(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function Ng(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Av={exports:{}},Th={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1;function UL(){if($1)return Th;$1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:a}}return Th.Fragment=e,Th.jsx=t,Th.jsxs=t,Th}var Y1;function FL(){return Y1||(Y1=1,Av.exports=UL()),Av.exports}var W=FL(),Cv={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W1;function BL(){if(W1)return xe;W1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),T=Symbol.iterator;function w(B){return B===null||typeof B!="object"?null:(B=T&&B[T]||B["@@iterator"],typeof B=="function"?B:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,D={};function F(B,se,he){this.props=B,this.context=se,this.refs=D,this.updater=he||R}F.prototype.isReactComponent={},F.prototype.setState=function(B,se){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,se,"setState")},F.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function z(){}z.prototype=F.prototype;function k(B,se,he){this.props=B,this.context=se,this.refs=D,this.updater=he||R}var ee=k.prototype=new z;ee.constructor=k,N(ee,F.prototype),ee.isPureReactComponent=!0;var X=Array.isArray;function re(){}var I={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function x(B,se,he){var me=he.ref;return{$$typeof:n,type:B,key:se,ref:me!==void 0?me:null,props:he}}function L(B,se){return x(B.type,se,B.props)}function V(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function q(B){var se={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(he){return se[he]})}var P=/\/+/g;function dt(B,se){return typeof B=="object"&&B!==null&&B.key!=null?q(""+B.key):se.toString(36)}function Rt(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(re,re):(B.status="pending",B.then(function(se){B.status==="pending"&&(B.status="fulfilled",B.value=se)},function(se){B.status==="pending"&&(B.status="rejected",B.reason=se)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function te(B,se,he,me,Ce){var Me=typeof B;(Me==="undefined"||Me==="boolean")&&(B=null);var $e=!1;if(B===null)$e=!0;else switch(Me){case"bigint":case"string":case"number":$e=!0;break;case"object":switch(B.$$typeof){case n:case e:$e=!0;break;case g:return $e=B._init,te($e(B._payload),se,he,me,Ce)}}if($e)return Ce=Ce(B),$e=me===""?"."+dt(B,0):me,X(Ce)?(he="",$e!=null&&(he=$e.replace(P,"$&/")+"/"),te(Ce,se,he,"",function(jo){return jo})):Ce!=null&&(V(Ce)&&(Ce=L(Ce,he+(Ce.key==null||B&&B.key===Ce.key?"":(""+Ce.key).replace(P,"$&/")+"/")+$e)),se.push(Ce)),1;$e=0;var en=me===""?".":me+":";if(X(B))for(var vt=0;vt<B.length;vt++)me=B[vt],Me=en+dt(me,vt),$e+=te(me,se,he,Me,Ce);else if(vt=w(B),typeof vt=="function")for(B=vt.call(B),vt=0;!(me=B.next()).done;)me=me.value,Me=en+dt(me,vt++),$e+=te(me,se,he,Me,Ce);else if(Me==="object"){if(typeof B.then=="function")return te(Rt(B),se,he,me,Ce);throw se=String(B),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return $e}function ae(B,se,he){if(B==null)return B;var me=[],Ce=0;return te(B,me,"","",function(Me){return se.call(he,Me,Ce++)}),me}function pe(B){if(B._status===-1){var se=B._result;se=se(),se.then(function(he){(B._status===0||B._status===-1)&&(B._status=1,B._result=he)},function(he){(B._status===0||B._status===-1)&&(B._status=2,B._result=he)}),B._status===-1&&(B._status=0,B._result=se)}if(B._status===1)return B._result.default;throw B._result}var Pe=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},je={map:ae,forEach:function(B,se,he){ae(B,function(){se.apply(this,arguments)},he)},count:function(B){var se=0;return ae(B,function(){se++}),se},toArray:function(B){return ae(B,function(se){return se})||[]},only:function(B){if(!V(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return xe.Activity=_,xe.Children=je,xe.Component=F,xe.Fragment=t,xe.Profiler=r,xe.PureComponent=k,xe.StrictMode=i,xe.Suspense=f,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,xe.__COMPILER_RUNTIME={__proto__:null,c:function(B){return I.H.useMemoCache(B)}},xe.cache=function(B){return function(){return B.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(B,se,he){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var me=N({},B.props),Ce=B.key;if(se!=null)for(Me in se.key!==void 0&&(Ce=""+se.key),se)!A.call(se,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&se.ref===void 0||(me[Me]=se[Me]);var Me=arguments.length-2;if(Me===1)me.children=he;else if(1<Me){for(var $e=Array(Me),en=0;en<Me;en++)$e[en]=arguments[en+2];me.children=$e}return x(B.type,Ce,me)},xe.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},xe.createElement=function(B,se,he){var me,Ce={},Me=null;if(se!=null)for(me in se.key!==void 0&&(Me=""+se.key),se)A.call(se,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ce[me]=se[me]);var $e=arguments.length-2;if($e===1)Ce.children=he;else if(1<$e){for(var en=Array($e),vt=0;vt<$e;vt++)en[vt]=arguments[vt+2];Ce.children=en}if(B&&B.defaultProps)for(me in $e=B.defaultProps,$e)Ce[me]===void 0&&(Ce[me]=$e[me]);return x(B,Me,Ce)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(B){return{$$typeof:h,render:B}},xe.isValidElement=V,xe.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:pe}},xe.memo=function(B,se){return{$$typeof:d,type:B,compare:se===void 0?null:se}},xe.startTransition=function(B){var se=I.T,he={};I.T=he;try{var me=B(),Ce=I.S;Ce!==null&&Ce(he,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(re,Pe)}catch(Me){Pe(Me)}finally{se!==null&&he.types!==null&&(se.types=he.types),I.T=se}},xe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},xe.use=function(B){return I.H.use(B)},xe.useActionState=function(B,se,he){return I.H.useActionState(B,se,he)},xe.useCallback=function(B,se){return I.H.useCallback(B,se)},xe.useContext=function(B){return I.H.useContext(B)},xe.useDebugValue=function(){},xe.useDeferredValue=function(B,se){return I.H.useDeferredValue(B,se)},xe.useEffect=function(B,se){return I.H.useEffect(B,se)},xe.useEffectEvent=function(B){return I.H.useEffectEvent(B)},xe.useId=function(){return I.H.useId()},xe.useImperativeHandle=function(B,se,he){return I.H.useImperativeHandle(B,se,he)},xe.useInsertionEffect=function(B,se){return I.H.useInsertionEffect(B,se)},xe.useLayoutEffect=function(B,se){return I.H.useLayoutEffect(B,se)},xe.useMemo=function(B,se){return I.H.useMemo(B,se)},xe.useOptimistic=function(B,se){return I.H.useOptimistic(B,se)},xe.useReducer=function(B,se,he){return I.H.useReducer(B,se,he)},xe.useRef=function(B){return I.H.useRef(B)},xe.useState=function(B){return I.H.useState(B)},xe.useSyncExternalStore=function(B,se,he){return I.H.useSyncExternalStore(B,se,he)},xe.useTransition=function(){return I.H.useTransition()},xe.version="19.2.0",xe}var Q1;function Pg(){return Q1||(Q1=1,Cv.exports=BL()),Cv.exports}var M=Pg();const zL=Ng(M);var Iv={exports:{}},Eh={},Rv={exports:{}},xv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1;function jL(){return X1||(X1=1,(function(n){function e(te,ae){var pe=te.length;te.push(ae);e:for(;0<pe;){var Pe=pe-1>>>1,je=te[Pe];if(0<r(je,ae))te[Pe]=ae,te[pe]=je,pe=Pe;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var ae=te[0],pe=te.pop();if(pe!==ae){te[0]=pe;e:for(var Pe=0,je=te.length,B=je>>>1;Pe<B;){var se=2*(Pe+1)-1,he=te[se],me=se+1,Ce=te[me];if(0>r(he,pe))me<je&&0>r(Ce,he)?(te[Pe]=Ce,te[me]=pe,Pe=me):(te[Pe]=he,te[se]=pe,Pe=se);else if(me<je&&0>r(Ce,pe))te[Pe]=Ce,te[me]=pe,Pe=me;else break e}}return ae}function r(te,ae){var pe=te.sortIndex-ae.sortIndex;return pe!==0?pe:te.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var f=[],d=[],g=1,_=null,T=3,w=!1,R=!1,N=!1,D=!1,F=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function ee(te){for(var ae=t(d);ae!==null;){if(ae.callback===null)i(d);else if(ae.startTime<=te)i(d),ae.sortIndex=ae.expirationTime,e(f,ae);else break;ae=t(d)}}function X(te){if(N=!1,ee(te),!R)if(t(f)!==null)R=!0,re||(re=!0,q());else{var ae=t(d);ae!==null&&Rt(X,ae.startTime-te)}}var re=!1,I=-1,A=5,x=-1;function L(){return D?!0:!(n.unstable_now()-x<A)}function V(){if(D=!1,re){var te=n.unstable_now();x=te;var ae=!0;try{e:{R=!1,N&&(N=!1,z(I),I=-1),w=!0;var pe=T;try{t:{for(ee(te),_=t(f);_!==null&&!(_.expirationTime>te&&L());){var Pe=_.callback;if(typeof Pe=="function"){_.callback=null,T=_.priorityLevel;var je=Pe(_.expirationTime<=te);if(te=n.unstable_now(),typeof je=="function"){_.callback=je,ee(te),ae=!0;break t}_===t(f)&&i(f),ee(te)}else i(f);_=t(f)}if(_!==null)ae=!0;else{var B=t(d);B!==null&&Rt(X,B.startTime-te),ae=!1}}break e}finally{_=null,T=pe,w=!1}ae=void 0}}finally{ae?q():re=!1}}}var q;if(typeof k=="function")q=function(){k(V)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,dt=P.port2;P.port1.onmessage=V,q=function(){dt.postMessage(null)}}else q=function(){F(V,0)};function Rt(te,ae){I=F(function(){te(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(te){switch(T){case 1:case 2:case 3:var ae=3;break;default:ae=T}var pe=T;T=ae;try{return te()}finally{T=pe}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(te,ae){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var pe=T;T=te;try{return ae()}finally{T=pe}},n.unstable_scheduleCallback=function(te,ae,pe){var Pe=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Pe+pe:Pe):pe=Pe,te){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=pe+je,te={id:g++,callback:ae,priorityLevel:te,startTime:pe,expirationTime:je,sortIndex:-1},pe>Pe?(te.sortIndex=pe,e(d,te),t(f)===null&&te===t(d)&&(N?(z(I),I=-1):N=!0,Rt(X,pe-Pe))):(te.sortIndex=je,e(f,te),R||w||(R=!0,re||(re=!0,q()))),te},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(te){var ae=T;return function(){var pe=T;T=ae;try{return te.apply(this,arguments)}finally{T=pe}}}})(xv)),xv}var J1;function qL(){return J1||(J1=1,Rv.exports=jL()),Rv.exports}var Dv={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1;function HL(){if(Z1)return bn;Z1=1;var n=Pg();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(f,d,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:f,containerInfo:d,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bn.createPortal=function(f,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,g)},bn.flushSync=function(f){var d=l.T,g=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=d,i.p=g,i.d.f()}},bn.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},bn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},bn.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var g=d.as,_=h(g,d.crossOrigin),T=typeof d.integrity=="string"?d.integrity:void 0,w=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;g==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:_,integrity:T,fetchPriority:w}):g==="script"&&i.d.X(f,{crossOrigin:_,integrity:T,fetchPriority:w,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},bn.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var g=h(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},bn.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var g=d.as,_=h(g,d.crossOrigin);i.d.L(f,g,{crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},bn.preloadModule=function(f,d){if(typeof f=="string")if(d){var g=h(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},bn.requestFormReset=function(f){i.d.r(f)},bn.unstable_batchedUpdates=function(f,d){return f(d)},bn.useFormState=function(f,d,g){return l.H.useFormState(f,d,g)},bn.useFormStatus=function(){return l.H.useHostTransitionStatus()},bn.version="19.2.0",bn}var eC;function GL(){if(eC)return Dv.exports;eC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Dv.exports=HL(),Dv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tC;function KL(){if(tC)return Eh;tC=1;var n=qL(),e=Pg(),t=GL();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function l(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function h(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function f(s){if(a(s)!==s)throw Error(i(188))}function d(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var u=s,c=o;;){var p=u.return;if(p===null)break;var y=p.alternate;if(y===null){if(c=p.return,c!==null){u=c;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===u)return f(p),s;if(y===c)return f(p),o;y=y.sibling}throw Error(i(188))}if(u.return!==c.return)u=p,c=y;else{for(var E=!1,b=p.child;b;){if(b===u){E=!0,u=p,c=y;break}if(b===c){E=!0,c=p,u=y;break}b=b.sibling}if(!E){for(b=y.child;b;){if(b===u){E=!0,u=y,c=p;break}if(b===c){E=!0,c=y,u=p;break}b=b.sibling}if(!E)throw Error(i(189))}}if(u.alternate!==c)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:o}function g(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=g(s),o!==null)return o;s=s.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),k=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=V&&s[V]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function dt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case F:return"Profiler";case D:return"StrictMode";case X:return"Suspense";case re:return"SuspenseList";case x:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case R:return"Portal";case k:return s.displayName||"Context";case z:return(s._context.displayName||"Context")+".Consumer";case ee:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case I:return o=s.displayName||null,o!==null?o:dt(s.type)||"Memo";case A:o=s._payload,s=s._init;try{return dt(s(o))}catch{}}return null}var Rt=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Pe=[],je=-1;function B(s){return{current:s}}function se(s){0>je||(s.current=Pe[je],Pe[je]=null,je--)}function he(s,o){je++,Pe[je]=s.current,s.current=o}var me=B(null),Ce=B(null),Me=B(null),$e=B(null);function en(s,o){switch(he(Me,o),he(Ce,s),he(me,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?g1(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=g1(o),s=y1(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}se(me),he(me,s)}function vt(){se(me),se(Ce),se(Me)}function jo(s){s.memoizedState!==null&&he($e,s);var o=me.current,u=y1(o,s.type);o!==u&&(he(Ce,s),he(me,u))}function ul(s){Ce.current===s&&(se(me),se(Ce)),$e.current===s&&(se($e),gh._currentValue=pe)}var cl,hl;function ss(s){if(cl===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);cl=o&&o[1]||"",hl=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cl+s+hl}var gc=!1;function qo(s,o){if(!s||gc)return"";gc=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(J){var Y=J}Reflect.construct(s,[],ie)}else{try{ie.call()}catch(J){Y=J}s.call(ie.prototype)}}else{try{throw Error()}catch(J){Y=J}(ie=s())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(J){if(J&&Y&&typeof J.stack=="string")return[J.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),E=y[0],b=y[1];if(E&&b){var O=E.split(`
`),$=b.split(`
`);for(p=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;p<$.length&&!$[p].includes("DetermineComponentFrameRoot");)p++;if(c===O.length||p===$.length)for(c=O.length-1,p=$.length-1;1<=c&&0<=p&&O[c]!==$[p];)p--;for(;1<=c&&0<=p;c--,p--)if(O[c]!==$[p]){if(c!==1||p!==1)do if(c--,p--,0>p||O[c]!==$[p]){var Z=`
`+O[c].replace(" at new "," at ");return s.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",s.displayName)),Z}while(1<=c&&0<=p);break}}}finally{gc=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?ss(u):""}function yc(s,o){switch(s.tag){case 26:case 27:case 5:return ss(s.type);case 16:return ss("Lazy");case 13:return s.child!==o&&o!==null?ss("Suspense Fallback"):ss("Suspense");case 19:return ss("SuspenseList");case 0:case 15:return qo(s.type,!1);case 11:return qo(s.type.render,!1);case 1:return qo(s.type,!0);case 31:return ss("Activity");default:return""}}function _c(s){try{var o="",u=null;do o+=yc(s,u),u=s,s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ft=Object.prototype.hasOwnProperty,tn=n.unstable_scheduleCallback,xr=n.unstable_cancelCallback,Iy=n.unstable_shouldYield,cd=n.unstable_requestPaint,Dn=n.unstable_now,Ho=n.unstable_getCurrentPriorityLevel,vc=n.unstable_ImmediatePriority,Tc=n.unstable_UserBlockingPriority,Dr=n.unstable_NormalPriority,Ry=n.unstable_LowPriority,hd=n.unstable_IdlePriority,fd=n.log,dd=n.unstable_setDisableYieldValue,Oi=null,dn=null;function fi(s){if(typeof fd=="function"&&dd(s),dn&&typeof dn.setStrictMode=="function")try{dn.setStrictMode(Oi,s)}catch{}}var Mt=Math.clz32?Math.clz32:pd,md=Math.log,fl=Math.LN2;function pd(s){return s>>>=0,s===0?32:31-(md(s)/fl|0)|0}var rs=256,Go=262144,Bt=4194304;function os(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function as(s,o,u){var c=s.pendingLanes;if(c===0)return 0;var p=0,y=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var b=c&134217727;return b!==0?(c=b&~y,c!==0?p=os(c):(E&=b,E!==0?p=os(E):u||(u=b&~s,u!==0&&(p=os(u))))):(b=c&~y,b!==0?p=os(b):E!==0?p=os(E):u||(u=c&~s,u!==0&&(p=os(u)))),p===0?0:o!==0&&o!==p&&(o&y)===0&&(y=p&-p,u=o&-o,y>=u||y===32&&(u&4194048)!==0)?o:p}function Vi(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function xy(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gd(){var s=Bt;return Bt<<=1,(Bt&62914560)===0&&(Bt=4194304),s}function ls(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function Ko(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Dy(s,o,u,c,p,y){var E=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var b=s.entanglements,O=s.expirationTimes,$=s.hiddenUpdates;for(u=E&~u;0<u;){var Z=31-Mt(u),ie=1<<Z;b[Z]=0,O[Z]=-1;var Y=$[Z];if(Y!==null)for($[Z]=null,Z=0;Z<Y.length;Z++){var J=Y[Z];J!==null&&(J.lane&=-536870913)}u&=~ie}c!==0&&$o(s,c,0),y!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=y&~(E&~o))}function $o(s,o,u){s.pendingLanes|=o,s.suspendedLanes&=~o;var c=31-Mt(o);s.entangledLanes|=o,s.entanglements[c]=s.entanglements[c]|1073741824|u&261930}function Ec(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var c=31-Mt(u),p=1<<c;p&o|s[c]&o&&(s[c]|=o),u&=~p}}function Sc(s,o){var u=o&-o;return u=(u&42)!==0?1:Yo(u),(u&(s.suspendedLanes|o))!==0?0:u}function Yo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Bs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function yd(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:B1(s.type))}function ki(s,o){var u=ae.p;try{return ae.p=s,o()}finally{ae.p=u}}var Li=Math.random().toString(36).slice(2),zt="__reactFiber$"+Li,on="__reactProps$"+Li,us="__reactContainer$"+Li,dl="__reactEvents$"+Li,Ny="__reactListeners$"+Li,_d="__reactHandles$"+Li,vd="__reactResources$"+Li,cs="__reactMarker$"+Li;function ml(s){delete s[zt],delete s[on],delete s[dl],delete s[Ny],delete s[_d]}function hs(s){var o=s[zt];if(o)return o;for(var u=s.parentNode;u;){if(o=u[us]||u[zt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=b1(s);s!==null;){if(u=s[zt])return u;s=b1(s)}return o}s=u,u=s.parentNode}return null}function di(s){if(s=s[zt]||s[us]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function Qn(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function fs(s){var o=s[vd];return o||(o=s[vd]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function jt(s){s[cs]=!0}var wc=new Set,bc={};function ds(s,o){ms(s,o),ms(s+"Capture",o)}function ms(s,o){for(bc[s]=o,s=0;s<o.length;s++)wc.add(o[s])}var Ac=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Cc={},Ic={};function Td(s){return Ft.call(Ic,s)?!0:Ft.call(Cc,s)?!1:Ac.test(s)?Ic[s]=!0:(Cc[s]=!0,!1)}function pl(s,o,u){if(Td(o))if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+u)}}function Xn(s,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+u)}}function qt(s,o,u,c){if(c===null)s.removeAttribute(u);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(o,u,""+c)}}function an(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Nr(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Rc(s,o,u){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return p.call(this)},set:function(E){u=""+E,y.call(this,E)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function it(s){if(!s._valueTracker){var o=Nr(s)?"checked":"value";s._valueTracker=Rc(s,o,""+s[o])}}function Wo(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),c="";return s&&(c=Nr(s)?s.checked?"true":"false":s.value),s=c,s!==u?(o.setValue(s),!0):!1}function ps(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Qo=/[\n"\\]/g;function Un(s){return s.replace(Qo,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function gl(s,o,u,c,p,y,E,b){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),o!=null?E==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+an(o)):s.value!==""+an(o)&&(s.value=""+an(o)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),o!=null?xc(s,E,an(o)):u!=null?xc(s,E,an(u)):c!=null&&s.removeAttribute("value"),p==null&&y!=null&&(s.defaultChecked=!!y),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?s.name=""+an(b):s.removeAttribute("name")}function Ed(s,o,u,c,p,y,E,b){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),o!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){it(s);return}u=u!=null?""+an(u):"",o=o!=null?""+an(o):u,b||o===s.value||(s.value=o),s.defaultValue=o}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=b?s.checked:!!c,s.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E),it(s)}function xc(s,o,u){o==="number"&&ps(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function Pr(s,o,u,c){if(s=s.options,o){o={};for(var p=0;p<u.length;p++)o["$"+u[p]]=!0;for(u=0;u<s.length;u++)p=o.hasOwnProperty("$"+s[u].value),s[u].selected!==p&&(s[u].selected=p),p&&c&&(s[u].defaultSelected=!0)}else{for(u=""+an(u),o=null,p=0;p<s.length;p++){if(s[p].value===u){s[p].selected=!0,c&&(s[p].defaultSelected=!0);return}o!==null||s[p].disabled||(o=s[p])}o!==null&&(o.selected=!0)}}function Sd(s,o,u){if(o!=null&&(o=""+an(o),o!==s.value&&(s.value=o),u==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=u!=null?""+an(u):""}function Mr(s,o,u,c){if(o==null){if(c!=null){if(u!=null)throw Error(i(92));if(Rt(c)){if(1<c.length)throw Error(i(93));c=c[0]}u=c}u==null&&(u=""),o=u}u=an(o),s.defaultValue=u,c=s.textContent,c===u&&c!==""&&c!==null&&(s.value=c),it(s)}function Fn(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var wd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dc(s,o,u){var c=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?c?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":c?s.setProperty(o,u):typeof u!="number"||u===0||wd.has(o)?o==="float"?s.cssFloat=u:s[o]=(""+u).trim():s[o]=u+"px"}function Nc(s,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,u!=null){for(var c in u)!u.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var p in o)c=o[p],o.hasOwnProperty(p)&&u[p]!==c&&Dc(s,p,c)}else for(var y in o)o.hasOwnProperty(y)&&Dc(s,y,o[y])}function yl(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Or=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _l(s){return Or.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ui(){}var Pc=null;function mi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Vr=null,gs=null;function Xo(s){var o=di(s);if(o&&(s=o.stateNode)){var u=s[on]||null;e:switch(s=o.stateNode,o.type){case"input":if(gl(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Un(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var c=u[o];if(c!==s&&c.form===s.form){var p=c[on]||null;if(!p)throw Error(i(90));gl(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<u.length;o++)c=u[o],c.form===s.form&&Wo(c)}break e;case"textarea":Sd(s,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&Pr(s,!!u.multiple,o,!1)}}}var vl=!1;function kr(s,o,u){if(vl)return s(o,u);vl=!0;try{var c=s(o);return c}finally{if(vl=!1,(Vr!==null||gs!==null)&&(ym(),Vr&&(o=Vr,s=gs,gs=Vr=null,Xo(o),s)))for(o=0;o<s.length;o++)Xo(s[o])}}function Fi(s,o){var u=s.stateNode;if(u===null)return null;var c=u[on]||null;if(c===null)return null;u=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jo=!1;if(pi)try{var lt={};Object.defineProperty(lt,"passive",{get:function(){Jo=!0}}),window.addEventListener("test",lt,lt),window.removeEventListener("test",lt,lt)}catch{Jo=!1}var ys=null,Mc=null,Zo=null;function Oc(){if(Zo)return Zo;var s,o=Mc,u=o.length,c,p="value"in ys?ys.value:ys.textContent,y=p.length;for(s=0;s<u&&o[s]===p[s];s++);var E=u-s;for(c=1;c<=E&&o[u-c]===p[y-c];c++);return Zo=p.slice(s,1<c?1-c:void 0)}function ea(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function zs(){return!0}function Bi(){return!1}function mn(s){function o(u,c,p,y,E){this._reactName=u,this._targetInst=p,this.type=c,this.nativeEvent=y,this.target=E,this.currentTarget=null;for(var b in s)s.hasOwnProperty(b)&&(u=s[b],this[b]=u?u(y):y[b]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?zs:Bi,this.isPropagationStopped=Bi,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=zs)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=zs)},persist:function(){},isPersistent:zs}),o}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_s=mn(js),Lr=_({},js,{view:0,detail:0}),Vc=mn(Lr),Ur,Tl,vs,El=_({},Lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==vs&&(vs&&s.type==="mousemove"?(Ur=s.screenX-vs.screenX,Tl=s.screenY-vs.screenY):Tl=Ur=0,vs=s),Ur)},movementY:function(s){return"movementY"in s?s.movementY:Tl}}),kc=mn(El),ta=_({},El,{dataTransfer:0}),Ad=mn(ta),Cd=_({},Lr,{relatedTarget:0}),na=mn(Cd),Lc=_({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),Id=mn(Lc),Sl=_({},js,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Rd=mn(Sl),xd=_({},js,{data:0}),Ts=mn(xd),Dd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Md(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Pd[s])?!!o[s]:!1}function Fr(){return Md}var Nn=_({},Lr,{key:function(s){if(s.key){var o=Dd[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=ea(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fr,charCode:function(s){return s.type==="keypress"?ea(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?ea(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Od=mn(Nn),Vd=_({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qs=mn(Vd),m=_({},Lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fr}),v=mn(m),S=_({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),C=mn(S),G=_({},El,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=mn(G),ce=_({},js,{newState:0,oldState:0}),De=mn(ce),Ot=[9,13,27,32],Xe=pi&&"CompositionEvent"in window,Tt=null;pi&&"documentMode"in document&&(Tt=document.documentMode);var gi=pi&&"TextEvent"in window&&!Tt,Es=pi&&(!Xe||Tt&&8<Tt&&11>=Tt),zi=" ",ji=!1;function ia(s,o){switch(s){case"keyup":return Ot.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wl(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var bl=!1;function lk(s,o){switch(s){case"compositionend":return wl(o);case"keypress":return o.which!==32?null:(ji=!0,zi);case"textInput":return s=o.data,s===zi&&ji?null:s;default:return null}}function uk(s,o){if(bl)return s==="compositionend"||!Xe&&ia(s,o)?(s=Oc(),Zo=Mc=ys=null,bl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Es&&o.locale!=="ko"?null:o.data;default:return null}}var ck={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Iw(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!ck[s.type]:o==="textarea"}function Rw(s,o,u,c){Vr?gs?gs.push(c):gs=[c]:Vr=c,o=bm(o,"onChange"),0<o.length&&(u=new _s("onChange","change",null,u,c),s.push({event:u,listeners:o}))}var Uc=null,Fc=null;function hk(s){c1(s,0)}function kd(s){var o=Qn(s);if(Wo(o))return s}function xw(s,o){if(s==="change")return o}var Dw=!1;if(pi){var Py;if(pi){var My="oninput"in document;if(!My){var Nw=document.createElement("div");Nw.setAttribute("oninput","return;"),My=typeof Nw.oninput=="function"}Py=My}else Py=!1;Dw=Py&&(!document.documentMode||9<document.documentMode)}function Pw(){Uc&&(Uc.detachEvent("onpropertychange",Mw),Fc=Uc=null)}function Mw(s){if(s.propertyName==="value"&&kd(Fc)){var o=[];Rw(o,Fc,s,mi(s)),kr(hk,o)}}function fk(s,o,u){s==="focusin"?(Pw(),Uc=o,Fc=u,Uc.attachEvent("onpropertychange",Mw)):s==="focusout"&&Pw()}function dk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return kd(Fc)}function mk(s,o){if(s==="click")return kd(o)}function pk(s,o){if(s==="input"||s==="change")return kd(o)}function gk(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Jn=typeof Object.is=="function"?Object.is:gk;function Bc(s,o){if(Jn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),c=Object.keys(o);if(u.length!==c.length)return!1;for(c=0;c<u.length;c++){var p=u[c];if(!Ft.call(o,p)||!Jn(s[p],o[p]))return!1}return!0}function Ow(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Vw(s,o){var u=Ow(s);s=0;for(var c;u;){if(u.nodeType===3){if(c=s+u.textContent.length,s<=o&&c>=o)return{node:u,offset:o-s};s=c}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Ow(u)}}function kw(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?kw(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Lw(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=ps(s.document);o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=ps(s.document)}return o}function Oy(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var yk=pi&&"documentMode"in document&&11>=document.documentMode,Al=null,Vy=null,zc=null,ky=!1;function Uw(s,o,u){var c=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ky||Al==null||Al!==ps(c)||(c=Al,"selectionStart"in c&&Oy(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),zc&&Bc(zc,c)||(zc=c,c=bm(Vy,"onSelect"),0<c.length&&(o=new _s("onSelect","select",null,o,u),s.push({event:o,listeners:c}),o.target=Al)))}function sa(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Cl={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionrun:sa("Transition","TransitionRun"),transitionstart:sa("Transition","TransitionStart"),transitioncancel:sa("Transition","TransitionCancel"),transitionend:sa("Transition","TransitionEnd")},Ly={},Fw={};pi&&(Fw=document.createElement("div").style,"AnimationEvent"in window||(delete Cl.animationend.animation,delete Cl.animationiteration.animation,delete Cl.animationstart.animation),"TransitionEvent"in window||delete Cl.transitionend.transition);function ra(s){if(Ly[s])return Ly[s];if(!Cl[s])return s;var o=Cl[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in Fw)return Ly[s]=o[u];return s}var Bw=ra("animationend"),zw=ra("animationiteration"),jw=ra("animationstart"),_k=ra("transitionrun"),vk=ra("transitionstart"),Tk=ra("transitioncancel"),qw=ra("transitionend"),Hw=new Map,Uy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uy.push("scrollEnd");function qi(s,o){Hw.set(s,o),ds(o,[s])}var Ld=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},yi=[],Il=0,Fy=0;function Ud(){for(var s=Il,o=Fy=Il=0;o<s;){var u=yi[o];yi[o++]=null;var c=yi[o];yi[o++]=null;var p=yi[o];yi[o++]=null;var y=yi[o];if(yi[o++]=null,c!==null&&p!==null){var E=c.pending;E===null?p.next=p:(p.next=E.next,E.next=p),c.pending=p}y!==0&&Gw(u,p,y)}}function Fd(s,o,u,c){yi[Il++]=s,yi[Il++]=o,yi[Il++]=u,yi[Il++]=c,Fy|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function By(s,o,u,c){return Fd(s,o,u,c),Bd(s)}function oa(s,o){return Fd(s,null,null,o),Bd(s)}function Gw(s,o,u){s.lanes|=u;var c=s.alternate;c!==null&&(c.lanes|=u);for(var p=!1,y=s.return;y!==null;)y.childLanes|=u,c=y.alternate,c!==null&&(c.childLanes|=u),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(p=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,p&&o!==null&&(p=31-Mt(u),s=y.hiddenUpdates,c=s[p],c===null?s[p]=[o]:c.push(o),o.lane=u|536870912),y):null}function Bd(s){if(50<uh)throw uh=0,W_=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Rl={};function Ek(s,o,u,c){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zn(s,o,u,c){return new Ek(s,o,u,c)}function zy(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Hs(s,o){var u=s.alternate;return u===null?(u=Zn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function Kw(s,o){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,o=u.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function zd(s,o,u,c,p,y){var E=0;if(c=s,typeof s=="function")zy(s)&&(E=1);else if(typeof s=="string")E=CL(s,u,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case x:return s=Zn(31,u,o,p),s.elementType=x,s.lanes=y,s;case N:return aa(u.children,p,y,o);case D:E=8,p|=24;break;case F:return s=Zn(12,u,o,p|2),s.elementType=F,s.lanes=y,s;case X:return s=Zn(13,u,o,p),s.elementType=X,s.lanes=y,s;case re:return s=Zn(19,u,o,p),s.elementType=re,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:E=10;break e;case z:E=9;break e;case ee:E=11;break e;case I:E=14;break e;case A:E=16,c=null;break e}E=29,u=Error(i(130,s===null?"null":typeof s,"")),c=null}return o=Zn(E,u,o,p),o.elementType=s,o.type=c,o.lanes=y,o}function aa(s,o,u,c){return s=Zn(7,s,c,o),s.lanes=u,s}function jy(s,o,u){return s=Zn(6,s,null,o),s.lanes=u,s}function $w(s){var o=Zn(18,null,null,0);return o.stateNode=s,o}function qy(s,o,u){return o=Zn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Yw=new WeakMap;function _i(s,o){if(typeof s=="object"&&s!==null){var u=Yw.get(s);return u!==void 0?u:(o={value:s,source:o,stack:_c(o)},Yw.set(s,o),o)}return{value:s,source:o,stack:_c(o)}}var xl=[],Dl=0,jd=null,jc=0,vi=[],Ti=0,Br=null,Ss=1,ws="";function Gs(s,o){xl[Dl++]=jc,xl[Dl++]=jd,jd=s,jc=o}function Ww(s,o,u){vi[Ti++]=Ss,vi[Ti++]=ws,vi[Ti++]=Br,Br=s;var c=Ss;s=ws;var p=32-Mt(c)-1;c&=~(1<<p),u+=1;var y=32-Mt(o)+p;if(30<y){var E=p-p%5;y=(c&(1<<E)-1).toString(32),c>>=E,p-=E,Ss=1<<32-Mt(o)+p|u<<p|c,ws=y+s}else Ss=1<<y|u<<p|c,ws=s}function Hy(s){s.return!==null&&(Gs(s,1),Ww(s,1,0))}function Gy(s){for(;s===jd;)jd=xl[--Dl],xl[Dl]=null,jc=xl[--Dl],xl[Dl]=null;for(;s===Br;)Br=vi[--Ti],vi[Ti]=null,ws=vi[--Ti],vi[Ti]=null,Ss=vi[--Ti],vi[Ti]=null}function Qw(s,o){vi[Ti++]=Ss,vi[Ti++]=ws,vi[Ti++]=Br,Ss=o.id,ws=o.overflow,Br=s}var pn=null,gt=null,Ge=!1,zr=null,Ei=!1,Ky=Error(i(519));function jr(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qc(_i(o,s)),Ky}function Xw(s){var o=s.stateNode,u=s.type,c=s.memoizedProps;switch(o[zt]=s,o[on]=c,u){case"dialog":Be("cancel",o),Be("close",o);break;case"iframe":case"object":case"embed":Be("load",o);break;case"video":case"audio":for(u=0;u<hh.length;u++)Be(hh[u],o);break;case"source":Be("error",o);break;case"img":case"image":case"link":Be("error",o),Be("load",o);break;case"details":Be("toggle",o);break;case"input":Be("invalid",o),Ed(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Be("invalid",o);break;case"textarea":Be("invalid",o),Mr(o,c.value,c.defaultValue,c.children)}u=c.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||c.suppressHydrationWarning===!0||m1(o.textContent,u)?(c.popover!=null&&(Be("beforetoggle",o),Be("toggle",o)),c.onScroll!=null&&Be("scroll",o),c.onScrollEnd!=null&&Be("scrollend",o),c.onClick!=null&&(o.onclick=Ui),o=!0):o=!1,o||jr(s,!0)}function Jw(s){for(pn=s.return;pn;)switch(pn.tag){case 5:case 31:case 13:Ei=!1;return;case 27:case 3:Ei=!0;return;default:pn=pn.return}}function Nl(s){if(s!==pn)return!1;if(!Ge)return Jw(s),Ge=!0,!1;var o=s.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||cv(s.type,s.memoizedProps)),u=!u),u&&gt&&jr(s),Jw(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));gt=w1(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));gt=w1(s)}else o===27?(o=gt,no(s.type)?(s=pv,pv=null,gt=s):gt=o):gt=pn?wi(s.stateNode.nextSibling):null;return!0}function la(){gt=pn=null,Ge=!1}function $y(){var s=zr;return s!==null&&(qn===null?qn=s:qn.push.apply(qn,s),zr=null),s}function qc(s){zr===null?zr=[s]:zr.push(s)}var Yy=B(null),ua=null,Ks=null;function qr(s,o,u){he(Yy,o._currentValue),o._currentValue=u}function $s(s){s._currentValue=Yy.current,se(Yy)}function Wy(s,o,u){for(;s!==null;){var c=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),s===u)break;s=s.return}}function Qy(s,o,u,c){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var y=p.dependencies;if(y!==null){var E=p.child;y=y.firstContext;e:for(;y!==null;){var b=y;y=p;for(var O=0;O<o.length;O++)if(b.context===o[O]){y.lanes|=u,b=y.alternate,b!==null&&(b.lanes|=u),Wy(y.return,u,s),c||(E=null);break e}y=b.next}}else if(p.tag===18){if(E=p.return,E===null)throw Error(i(341));E.lanes|=u,y=E.alternate,y!==null&&(y.lanes|=u),Wy(E,u,s),E=null}else E=p.child;if(E!==null)E.return=p;else for(E=p;E!==null;){if(E===s){E=null;break}if(p=E.sibling,p!==null){p.return=E.return,E=p;break}E=E.return}p=E}}function Pl(s,o,u,c){s=null;for(var p=o,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var E=p.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var b=p.type;Jn(p.pendingProps.value,E.value)||(s!==null?s.push(b):s=[b])}}else if(p===$e.current){if(E=p.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(gh):s=[gh])}p=p.return}s!==null&&Qy(o,s,u,c),o.flags|=262144}function qd(s){for(s=s.firstContext;s!==null;){if(!Jn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ca(s){ua=s,Ks=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function gn(s){return Zw(ua,s)}function Hd(s,o){return ua===null&&ca(s),Zw(s,o)}function Zw(s,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Ks===null){if(s===null)throw Error(i(308));Ks=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Ks=Ks.next=o;return u}var Sk=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(u,c){s.push(c)}};this.abort=function(){o.aborted=!0,s.forEach(function(u){return u()})}},wk=n.unstable_scheduleCallback,bk=n.unstable_NormalPriority,Ht={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xy(){return{controller:new Sk,data:new Map,refCount:0}}function Hc(s){s.refCount--,s.refCount===0&&wk(bk,function(){s.controller.abort()})}var Gc=null,Jy=0,Ml=0,Ol=null;function Ak(s,o){if(Gc===null){var u=Gc=[];Jy=0,Ml=tv(),Ol={status:"pending",value:void 0,then:function(c){u.push(c)}}}return Jy++,o.then(eb,eb),o}function eb(){if(--Jy===0&&Gc!==null){Ol!==null&&(Ol.status="fulfilled");var s=Gc;Gc=null,Ml=0,Ol=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function Ck(s,o){var u=[],c={status:"pending",value:null,reason:null,then:function(p){u.push(p)}};return s.then(function(){c.status="fulfilled",c.value=o;for(var p=0;p<u.length;p++)(0,u[p])(o)},function(p){for(c.status="rejected",c.reason=p,p=0;p<u.length;p++)(0,u[p])(void 0)}),c}var tb=te.S;te.S=function(s,o){UA=Dn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&Ak(s,o),tb!==null&&tb(s,o)};var ha=B(null);function Zy(){var s=ha.current;return s!==null?s:mt.pooledCache}function Gd(s,o){o===null?he(ha,ha.current):he(ha,o.pool)}function nb(){var s=Zy();return s===null?null:{parent:Ht._currentValue,pool:s}}var Vl=Error(i(460)),e_=Error(i(474)),Kd=Error(i(542)),$d={then:function(){}};function ib(s){return s=s.status,s==="fulfilled"||s==="rejected"}function sb(s,o,u){switch(u=s[u],u===void 0?s.push(o):u!==o&&(o.then(Ui,Ui),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,ob(s),s;default:if(typeof o.status=="string")o.then(Ui,Ui);else{if(s=mt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(c){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=c}},function(c){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,ob(s),s}throw da=o,Vl}}function fa(s){try{var o=s._init;return o(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(da=u,Vl):u}}var da=null;function rb(){if(da===null)throw Error(i(459));var s=da;return da=null,s}function ob(s){if(s===Vl||s===Kd)throw Error(i(483))}var kl=null,Kc=0;function Yd(s){var o=Kc;return Kc+=1,kl===null&&(kl=[]),sb(kl,s,o)}function $c(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Wd(s,o){throw o.$$typeof===T?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function ab(s){function o(j,U){if(s){var K=j.deletions;K===null?(j.deletions=[U],j.flags|=16):K.push(U)}}function u(j,U){if(!s)return null;for(;U!==null;)o(j,U),U=U.sibling;return null}function c(j){for(var U=new Map;j!==null;)j.key!==null?U.set(j.key,j):U.set(j.index,j),j=j.sibling;return U}function p(j,U){return j=Hs(j,U),j.index=0,j.sibling=null,j}function y(j,U,K){return j.index=K,s?(K=j.alternate,K!==null?(K=K.index,K<U?(j.flags|=67108866,U):K):(j.flags|=67108866,U)):(j.flags|=1048576,U)}function E(j){return s&&j.alternate===null&&(j.flags|=67108866),j}function b(j,U,K,ne){return U===null||U.tag!==6?(U=jy(K,j.mode,ne),U.return=j,U):(U=p(U,K),U.return=j,U)}function O(j,U,K,ne){var Te=K.type;return Te===N?Z(j,U,K.props.children,ne,K.key):U!==null&&(U.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&fa(Te)===U.type)?(U=p(U,K.props),$c(U,K),U.return=j,U):(U=zd(K.type,K.key,K.props,null,j.mode,ne),$c(U,K),U.return=j,U)}function $(j,U,K,ne){return U===null||U.tag!==4||U.stateNode.containerInfo!==K.containerInfo||U.stateNode.implementation!==K.implementation?(U=qy(K,j.mode,ne),U.return=j,U):(U=p(U,K.children||[]),U.return=j,U)}function Z(j,U,K,ne,Te){return U===null||U.tag!==7?(U=aa(K,j.mode,ne,Te),U.return=j,U):(U=p(U,K),U.return=j,U)}function ie(j,U,K){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=jy(""+U,j.mode,K),U.return=j,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case w:return K=zd(U.type,U.key,U.props,null,j.mode,K),$c(K,U),K.return=j,K;case R:return U=qy(U,j.mode,K),U.return=j,U;case A:return U=fa(U),ie(j,U,K)}if(Rt(U)||q(U))return U=aa(U,j.mode,K,null),U.return=j,U;if(typeof U.then=="function")return ie(j,Yd(U),K);if(U.$$typeof===k)return ie(j,Hd(j,U),K);Wd(j,U)}return null}function Y(j,U,K,ne){var Te=U!==null?U.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Te!==null?null:b(j,U,""+K,ne);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case w:return K.key===Te?O(j,U,K,ne):null;case R:return K.key===Te?$(j,U,K,ne):null;case A:return K=fa(K),Y(j,U,K,ne)}if(Rt(K)||q(K))return Te!==null?null:Z(j,U,K,ne,null);if(typeof K.then=="function")return Y(j,U,Yd(K),ne);if(K.$$typeof===k)return Y(j,U,Hd(j,K),ne);Wd(j,K)}return null}function J(j,U,K,ne,Te){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return j=j.get(K)||null,b(U,j,""+ne,Te);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return j=j.get(ne.key===null?K:ne.key)||null,O(U,j,ne,Te);case R:return j=j.get(ne.key===null?K:ne.key)||null,$(U,j,ne,Te);case A:return ne=fa(ne),J(j,U,K,ne,Te)}if(Rt(ne)||q(ne))return j=j.get(K)||null,Z(U,j,ne,Te,null);if(typeof ne.then=="function")return J(j,U,K,Yd(ne),Te);if(ne.$$typeof===k)return J(j,U,K,Hd(U,ne),Te);Wd(U,ne)}return null}function ge(j,U,K,ne){for(var Te=null,We=null,_e=U,Oe=U=0,He=null;_e!==null&&Oe<K.length;Oe++){_e.index>Oe?(He=_e,_e=null):He=_e.sibling;var Qe=Y(j,_e,K[Oe],ne);if(Qe===null){_e===null&&(_e=He);break}s&&_e&&Qe.alternate===null&&o(j,_e),U=y(Qe,U,Oe),We===null?Te=Qe:We.sibling=Qe,We=Qe,_e=He}if(Oe===K.length)return u(j,_e),Ge&&Gs(j,Oe),Te;if(_e===null){for(;Oe<K.length;Oe++)_e=ie(j,K[Oe],ne),_e!==null&&(U=y(_e,U,Oe),We===null?Te=_e:We.sibling=_e,We=_e);return Ge&&Gs(j,Oe),Te}for(_e=c(_e);Oe<K.length;Oe++)He=J(_e,j,Oe,K[Oe],ne),He!==null&&(s&&He.alternate!==null&&_e.delete(He.key===null?Oe:He.key),U=y(He,U,Oe),We===null?Te=He:We.sibling=He,We=He);return s&&_e.forEach(function(ao){return o(j,ao)}),Ge&&Gs(j,Oe),Te}function Se(j,U,K,ne){if(K==null)throw Error(i(151));for(var Te=null,We=null,_e=U,Oe=U=0,He=null,Qe=K.next();_e!==null&&!Qe.done;Oe++,Qe=K.next()){_e.index>Oe?(He=_e,_e=null):He=_e.sibling;var ao=Y(j,_e,Qe.value,ne);if(ao===null){_e===null&&(_e=He);break}s&&_e&&ao.alternate===null&&o(j,_e),U=y(ao,U,Oe),We===null?Te=ao:We.sibling=ao,We=ao,_e=He}if(Qe.done)return u(j,_e),Ge&&Gs(j,Oe),Te;if(_e===null){for(;!Qe.done;Oe++,Qe=K.next())Qe=ie(j,Qe.value,ne),Qe!==null&&(U=y(Qe,U,Oe),We===null?Te=Qe:We.sibling=Qe,We=Qe);return Ge&&Gs(j,Oe),Te}for(_e=c(_e);!Qe.done;Oe++,Qe=K.next())Qe=J(_e,j,Oe,Qe.value,ne),Qe!==null&&(s&&Qe.alternate!==null&&_e.delete(Qe.key===null?Oe:Qe.key),U=y(Qe,U,Oe),We===null?Te=Qe:We.sibling=Qe,We=Qe);return s&&_e.forEach(function(LL){return o(j,LL)}),Ge&&Gs(j,Oe),Te}function ht(j,U,K,ne){if(typeof K=="object"&&K!==null&&K.type===N&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case w:e:{for(var Te=K.key;U!==null;){if(U.key===Te){if(Te=K.type,Te===N){if(U.tag===7){u(j,U.sibling),ne=p(U,K.props.children),ne.return=j,j=ne;break e}}else if(U.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&fa(Te)===U.type){u(j,U.sibling),ne=p(U,K.props),$c(ne,K),ne.return=j,j=ne;break e}u(j,U);break}else o(j,U);U=U.sibling}K.type===N?(ne=aa(K.props.children,j.mode,ne,K.key),ne.return=j,j=ne):(ne=zd(K.type,K.key,K.props,null,j.mode,ne),$c(ne,K),ne.return=j,j=ne)}return E(j);case R:e:{for(Te=K.key;U!==null;){if(U.key===Te)if(U.tag===4&&U.stateNode.containerInfo===K.containerInfo&&U.stateNode.implementation===K.implementation){u(j,U.sibling),ne=p(U,K.children||[]),ne.return=j,j=ne;break e}else{u(j,U);break}else o(j,U);U=U.sibling}ne=qy(K,j.mode,ne),ne.return=j,j=ne}return E(j);case A:return K=fa(K),ht(j,U,K,ne)}if(Rt(K))return ge(j,U,K,ne);if(q(K)){if(Te=q(K),typeof Te!="function")throw Error(i(150));return K=Te.call(K),Se(j,U,K,ne)}if(typeof K.then=="function")return ht(j,U,Yd(K),ne);if(K.$$typeof===k)return ht(j,U,Hd(j,K),ne);Wd(j,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,U!==null&&U.tag===6?(u(j,U.sibling),ne=p(U,K),ne.return=j,j=ne):(u(j,U),ne=jy(K,j.mode,ne),ne.return=j,j=ne),E(j)):u(j,U)}return function(j,U,K,ne){try{Kc=0;var Te=ht(j,U,K,ne);return kl=null,Te}catch(_e){if(_e===Vl||_e===Kd)throw _e;var We=Zn(29,_e,null,j.mode);return We.lanes=ne,We.return=j,We}finally{}}}var ma=ab(!0),lb=ab(!1),Hr=!1;function t_(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function n_(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Gr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Kr(s,o,u){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Je&2)!==0){var p=c.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),c.pending=o,o=Bd(s),Gw(s,null,u),o}return Fd(s,c,o,u),Bd(s)}function Yc(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var c=o.lanes;c&=s.pendingLanes,u|=c,o.lanes=u,Ec(s,u)}}function i_(s,o){var u=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,u===c)){var p=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var E={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?p=y=E:y=y.next=E,u=u.next}while(u!==null);y===null?p=y=o:y=y.next=o}else p=y=o;u={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}var s_=!1;function Wc(){if(s_){var s=Ol;if(s!==null)throw s}}function Qc(s,o,u,c){s_=!1;var p=s.updateQueue;Hr=!1;var y=p.firstBaseUpdate,E=p.lastBaseUpdate,b=p.shared.pending;if(b!==null){p.shared.pending=null;var O=b,$=O.next;O.next=null,E===null?y=$:E.next=$,E=O;var Z=s.alternate;Z!==null&&(Z=Z.updateQueue,b=Z.lastBaseUpdate,b!==E&&(b===null?Z.firstBaseUpdate=$:b.next=$,Z.lastBaseUpdate=O))}if(y!==null){var ie=p.baseState;E=0,Z=$=O=null,b=y;do{var Y=b.lane&-536870913,J=Y!==b.lane;if(J?(qe&Y)===Y:(c&Y)===Y){Y!==0&&Y===Ml&&(s_=!0),Z!==null&&(Z=Z.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ge=s,Se=b;Y=o;var ht=u;switch(Se.tag){case 1:if(ge=Se.payload,typeof ge=="function"){ie=ge.call(ht,ie,Y);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Se.payload,Y=typeof ge=="function"?ge.call(ht,ie,Y):ge,Y==null)break e;ie=_({},ie,Y);break e;case 2:Hr=!0}}Y=b.callback,Y!==null&&(s.flags|=64,J&&(s.flags|=8192),J=p.callbacks,J===null?p.callbacks=[Y]:J.push(Y))}else J={lane:Y,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Z===null?($=Z=J,O=ie):Z=Z.next=J,E|=Y;if(b=b.next,b===null){if(b=p.shared.pending,b===null)break;J=b,b=J.next,J.next=null,p.lastBaseUpdate=J,p.shared.pending=null}}while(!0);Z===null&&(O=ie),p.baseState=O,p.firstBaseUpdate=$,p.lastBaseUpdate=Z,y===null&&(p.shared.lanes=0),Xr|=E,s.lanes=E,s.memoizedState=ie}}function ub(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function cb(s,o){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)ub(u[s],o)}var Ll=B(null),Qd=B(0);function hb(s,o){s=nr,he(Qd,s),he(Ll,o),nr=s|o.baseLanes}function r_(){he(Qd,nr),he(Ll,Ll.current)}function o_(){nr=Qd.current,se(Ll),se(Qd)}var ei=B(null),Si=null;function $r(s){var o=s.alternate;he(Vt,Vt.current&1),he(ei,s),Si===null&&(o===null||Ll.current!==null||o.memoizedState!==null)&&(Si=s)}function a_(s){he(Vt,Vt.current),he(ei,s),Si===null&&(Si=s)}function fb(s){s.tag===22?(he(Vt,Vt.current),he(ei,s),Si===null&&(Si=s)):Yr()}function Yr(){he(Vt,Vt.current),he(ei,ei.current)}function ti(s){se(ei),Si===s&&(Si=null),se(Vt)}var Vt=B(0);function Xd(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||dv(u)||mv(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ys=0,Ne=null,ut=null,Gt=null,Jd=!1,Ul=!1,pa=!1,Zd=0,Xc=0,Fl=null,Ik=0;function xt(){throw Error(i(321))}function l_(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!Jn(s[u],o[u]))return!1;return!0}function u_(s,o,u,c,p,y){return Ys=y,Ne=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,te.H=s===null||s.memoizedState===null?Wb:b_,pa=!1,y=u(c,p),pa=!1,Ul&&(y=mb(o,u,c,p)),db(s),y}function db(s){te.H=eh;var o=ut!==null&&ut.next!==null;if(Ys=0,Gt=ut=Ne=null,Jd=!1,Xc=0,Fl=null,o)throw Error(i(300));s===null||Kt||(s=s.dependencies,s!==null&&qd(s)&&(Kt=!0))}function mb(s,o,u,c){Ne=s;var p=0;do{if(Ul&&(Fl=null),Xc=0,Ul=!1,25<=p)throw Error(i(301));if(p+=1,Gt=ut=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}te.H=Qb,y=o(u,c)}while(Ul);return y}function Rk(){var s=te.H,o=s.useState()[0];return o=typeof o.then=="function"?Jc(o):o,s=s.useState()[0],(ut!==null?ut.memoizedState:null)!==s&&(Ne.flags|=1024),o}function c_(){var s=Zd!==0;return Zd=0,s}function h_(s,o,u){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~u}function f_(s){if(Jd){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Jd=!1}Ys=0,Gt=ut=Ne=null,Ul=!1,Xc=Zd=0,Fl=null}function Pn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Ne.memoizedState=Gt=s:Gt=Gt.next=s,Gt}function kt(){if(ut===null){var s=Ne.alternate;s=s!==null?s.memoizedState:null}else s=ut.next;var o=Gt===null?Ne.memoizedState:Gt.next;if(o!==null)Gt=o,ut=s;else{if(s===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));ut=s,s={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Gt===null?Ne.memoizedState=Gt=s:Gt=Gt.next=s}return Gt}function em(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jc(s){var o=Xc;return Xc+=1,Fl===null&&(Fl=[]),s=sb(Fl,s,o),o=Ne,(Gt===null?o.memoizedState:Gt.next)===null&&(o=o.alternate,te.H=o===null||o.memoizedState===null?Wb:b_),s}function tm(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Jc(s);if(s.$$typeof===k)return gn(s)}throw Error(i(438,String(s)))}function d_(s){var o=null,u=Ne.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=em(),Ne.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(s),c=0;c<s;c++)u[c]=L;return o.index++,u}function Ws(s,o){return typeof o=="function"?o(s):o}function nm(s){var o=kt();return m_(o,ut,s)}function m_(s,o,u){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=u;var p=s.baseQueue,y=c.pending;if(y!==null){if(p!==null){var E=p.next;p.next=y.next,y.next=E}o.baseQueue=p=y,c.pending=null}if(y=s.baseState,p===null)s.memoizedState=y;else{o=p.next;var b=E=null,O=null,$=o,Z=!1;do{var ie=$.lane&-536870913;if(ie!==$.lane?(qe&ie)===ie:(Ys&ie)===ie){var Y=$.revertLane;if(Y===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ie===Ml&&(Z=!0);else if((Ys&Y)===Y){$=$.next,Y===Ml&&(Z=!0);continue}else ie={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(b=O=ie,E=y):O=O.next=ie,Ne.lanes|=Y,Xr|=Y;ie=$.action,pa&&u(y,ie),y=$.hasEagerState?$.eagerState:u(y,ie)}else Y={lane:ie,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(b=O=Y,E=y):O=O.next=Y,Ne.lanes|=ie,Xr|=ie;$=$.next}while($!==null&&$!==o);if(O===null?E=y:O.next=b,!Jn(y,s.memoizedState)&&(Kt=!0,Z&&(u=Ol,u!==null)))throw u;s.memoizedState=y,s.baseState=E,s.baseQueue=O,c.lastRenderedState=y}return p===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function p_(s){var o=kt(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var c=u.dispatch,p=u.pending,y=o.memoizedState;if(p!==null){u.pending=null;var E=p=p.next;do y=s(y,E.action),E=E.next;while(E!==p);Jn(y,o.memoizedState)||(Kt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,c]}function pb(s,o,u){var c=Ne,p=kt(),y=Ge;if(y){if(u===void 0)throw Error(i(407));u=u()}else u=o();var E=!Jn((ut||p).memoizedState,u);if(E&&(p.memoizedState=u,Kt=!0),p=p.queue,__(_b.bind(null,c,p,s),[s]),p.getSnapshot!==o||E||Gt!==null&&Gt.memoizedState.tag&1){if(c.flags|=2048,Bl(9,{destroy:void 0},yb.bind(null,c,p,u,o),null),mt===null)throw Error(i(349));y||(Ys&127)!==0||gb(c,o,u)}return u}function gb(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Ne.updateQueue,o===null?(o=em(),Ne.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function yb(s,o,u,c){o.value=u,o.getSnapshot=c,vb(o)&&Tb(s)}function _b(s,o,u){return u(function(){vb(o)&&Tb(s)})}function vb(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!Jn(s,u)}catch{return!0}}function Tb(s){var o=oa(s,2);o!==null&&Hn(o,s,2)}function g_(s){var o=Pn();if(typeof s=="function"){var u=s;if(s=u(),pa){fi(!0);try{u()}finally{fi(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:s},o}function Eb(s,o,u,c){return s.baseState=u,m_(s,ut,typeof c=="function"?c:Ws)}function xk(s,o,u,c,p){if(rm(s))throw Error(i(485));if(s=o.action,s!==null){var y={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){y.listeners.push(E)}};te.T!==null?u(!0):y.isTransition=!1,c(y),u=o.pending,u===null?(y.next=o.pending=y,Sb(o,y)):(y.next=u.next,o.pending=u.next=y)}}function Sb(s,o){var u=o.action,c=o.payload,p=s.state;if(o.isTransition){var y=te.T,E={};te.T=E;try{var b=u(p,c),O=te.S;O!==null&&O(E,b),wb(s,o,b)}catch($){y_(s,o,$)}finally{y!==null&&E.types!==null&&(y.types=E.types),te.T=y}}else try{y=u(p,c),wb(s,o,y)}catch($){y_(s,o,$)}}function wb(s,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(c){bb(s,o,c)},function(c){return y_(s,o,c)}):bb(s,o,u)}function bb(s,o,u){o.status="fulfilled",o.value=u,Ab(o),s.state=u,o=s.pending,o!==null&&(u=o.next,u===o?s.pending=null:(u=u.next,o.next=u,Sb(s,u)))}function y_(s,o,u){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=u,Ab(o),o=o.next;while(o!==c)}s.action=null}function Ab(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Cb(s,o){return o}function Ib(s,o){if(Ge){var u=mt.formState;if(u!==null){e:{var c=Ne;if(Ge){if(gt){t:{for(var p=gt,y=Ei;p.nodeType!==8;){if(!y){p=null;break t}if(p=wi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){gt=wi(p.nextSibling),c=p.data==="F!";break e}}jr(c)}c=!1}c&&(o=u[0])}}return u=Pn(),u.memoizedState=u.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cb,lastRenderedState:o},u.queue=c,u=Kb.bind(null,Ne,c),c.dispatch=u,c=g_(!1),y=w_.bind(null,Ne,!1,c.queue),c=Pn(),p={state:o,dispatch:null,action:s,pending:null},c.queue=p,u=xk.bind(null,Ne,p,y,u),p.dispatch=u,c.memoizedState=s,[o,u,!1]}function Rb(s){var o=kt();return xb(o,ut,s)}function xb(s,o,u){if(o=m_(s,o,Cb)[0],s=nm(Ws)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=Jc(o)}catch(E){throw E===Vl?Kd:E}else c=o;o=kt();var p=o.queue,y=p.dispatch;return u!==o.memoizedState&&(Ne.flags|=2048,Bl(9,{destroy:void 0},Dk.bind(null,p,u),null)),[c,y,s]}function Dk(s,o){s.action=o}function Db(s){var o=kt(),u=ut;if(u!==null)return xb(o,u,s);kt(),o=o.memoizedState,u=kt();var c=u.queue.dispatch;return u.memoizedState=s,[o,c,!1]}function Bl(s,o,u,c){return s={tag:s,create:u,deps:c,inst:o,next:null},o=Ne.updateQueue,o===null&&(o=em(),Ne.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=s.next=s:(c=u.next,u.next=s,s.next=c,o.lastEffect=s),s}function Nb(){return kt().memoizedState}function im(s,o,u,c){var p=Pn();Ne.flags|=s,p.memoizedState=Bl(1|o,{destroy:void 0},u,c===void 0?null:c)}function sm(s,o,u,c){var p=kt();c=c===void 0?null:c;var y=p.memoizedState.inst;ut!==null&&c!==null&&l_(c,ut.memoizedState.deps)?p.memoizedState=Bl(o,y,u,c):(Ne.flags|=s,p.memoizedState=Bl(1|o,y,u,c))}function Pb(s,o){im(8390656,8,s,o)}function __(s,o){sm(2048,8,s,o)}function Nk(s){Ne.flags|=4;var o=Ne.updateQueue;if(o===null)o=em(),Ne.updateQueue=o,o.events=[s];else{var u=o.events;u===null?o.events=[s]:u.push(s)}}function Mb(s){var o=kt().memoizedState;return Nk({ref:o,nextImpl:s}),function(){if((Je&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function Ob(s,o){return sm(4,2,s,o)}function Vb(s,o){return sm(4,4,s,o)}function kb(s,o){if(typeof o=="function"){s=s();var u=o(s);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Lb(s,o,u){u=u!=null?u.concat([s]):null,sm(4,4,kb.bind(null,o,s),u)}function v_(){}function Ub(s,o){var u=kt();o=o===void 0?null:o;var c=u.memoizedState;return o!==null&&l_(o,c[1])?c[0]:(u.memoizedState=[s,o],s)}function Fb(s,o){var u=kt();o=o===void 0?null:o;var c=u.memoizedState;if(o!==null&&l_(o,c[1]))return c[0];if(c=s(),pa){fi(!0);try{s()}finally{fi(!1)}}return u.memoizedState=[c,o],c}function T_(s,o,u){return u===void 0||(Ys&1073741824)!==0&&(qe&261930)===0?s.memoizedState=o:(s.memoizedState=u,s=BA(),Ne.lanes|=s,Xr|=s,u)}function Bb(s,o,u,c){return Jn(u,o)?u:Ll.current!==null?(s=T_(s,u,c),Jn(s,o)||(Kt=!0),s):(Ys&42)===0||(Ys&1073741824)!==0&&(qe&261930)===0?(Kt=!0,s.memoizedState=u):(s=BA(),Ne.lanes|=s,Xr|=s,o)}function zb(s,o,u,c,p){var y=ae.p;ae.p=y!==0&&8>y?y:8;var E=te.T,b={};te.T=b,w_(s,!1,o,u);try{var O=p(),$=te.S;if($!==null&&$(b,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Z=Ck(O,c);Zc(s,o,Z,si(s))}else Zc(s,o,c,si(s))}catch(ie){Zc(s,o,{then:function(){},status:"rejected",reason:ie},si())}finally{ae.p=y,E!==null&&b.types!==null&&(E.types=b.types),te.T=E}}function Pk(){}function E_(s,o,u,c){if(s.tag!==5)throw Error(i(476));var p=jb(s).queue;zb(s,p,o,pe,u===null?Pk:function(){return qb(s),u(c)})}function jb(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:pe},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ws,lastRenderedState:u},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function qb(s){var o=jb(s);o.next===null&&(o=s.alternate.memoizedState),Zc(s,o.next.queue,{},si())}function S_(){return gn(gh)}function Hb(){return kt().memoizedState}function Gb(){return kt().memoizedState}function Mk(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var u=si();s=Gr(u);var c=Kr(o,s,u);c!==null&&(Hn(c,o,u),Yc(c,o,u)),o={cache:Xy()},s.payload=o;return}o=o.return}}function Ok(s,o,u){var c=si();u={lane:c,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},rm(s)?$b(o,u):(u=By(s,o,u,c),u!==null&&(Hn(u,s,c),Yb(u,o,c)))}function Kb(s,o,u){var c=si();Zc(s,o,u,c)}function Zc(s,o,u,c){var p={lane:c,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(rm(s))$b(o,p);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var E=o.lastRenderedState,b=y(E,u);if(p.hasEagerState=!0,p.eagerState=b,Jn(b,E))return Fd(s,o,p,0),mt===null&&Ud(),!1}catch{}finally{}if(u=By(s,o,p,c),u!==null)return Hn(u,s,c),Yb(u,o,c),!0}return!1}function w_(s,o,u,c){if(c={lane:2,revertLane:tv(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},rm(s)){if(o)throw Error(i(479))}else o=By(s,u,c,2),o!==null&&Hn(o,s,2)}function rm(s){var o=s.alternate;return s===Ne||o!==null&&o===Ne}function $b(s,o){Ul=Jd=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function Yb(s,o,u){if((u&4194048)!==0){var c=o.lanes;c&=s.pendingLanes,u|=c,o.lanes=u,Ec(s,u)}}var eh={readContext:gn,use:tm,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt};eh.useEffectEvent=xt;var Wb={readContext:gn,use:tm,useCallback:function(s,o){return Pn().memoizedState=[s,o===void 0?null:o],s},useContext:gn,useEffect:Pb,useImperativeHandle:function(s,o,u){u=u!=null?u.concat([s]):null,im(4194308,4,kb.bind(null,o,s),u)},useLayoutEffect:function(s,o){return im(4194308,4,s,o)},useInsertionEffect:function(s,o){im(4,2,s,o)},useMemo:function(s,o){var u=Pn();o=o===void 0?null:o;var c=s();if(pa){fi(!0);try{s()}finally{fi(!1)}}return u.memoizedState=[c,o],c},useReducer:function(s,o,u){var c=Pn();if(u!==void 0){var p=u(o);if(pa){fi(!0);try{u(o)}finally{fi(!1)}}}else p=o;return c.memoizedState=c.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},c.queue=s,s=s.dispatch=Ok.bind(null,Ne,s),[c.memoizedState,s]},useRef:function(s){var o=Pn();return s={current:s},o.memoizedState=s},useState:function(s){s=g_(s);var o=s.queue,u=Kb.bind(null,Ne,o);return o.dispatch=u,[s.memoizedState,u]},useDebugValue:v_,useDeferredValue:function(s,o){var u=Pn();return T_(u,s,o)},useTransition:function(){var s=g_(!1);return s=zb.bind(null,Ne,s.queue,!0,!1),Pn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,u){var c=Ne,p=Pn();if(Ge){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),mt===null)throw Error(i(349));(qe&127)!==0||gb(c,o,u)}p.memoizedState=u;var y={value:u,getSnapshot:o};return p.queue=y,Pb(_b.bind(null,c,y,s),[s]),c.flags|=2048,Bl(9,{destroy:void 0},yb.bind(null,c,y,u,o),null),u},useId:function(){var s=Pn(),o=mt.identifierPrefix;if(Ge){var u=ws,c=Ss;u=(c&~(1<<32-Mt(c)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Zd++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=Ik++,o="_"+o+"r_"+u.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:S_,useFormState:Ib,useActionState:Ib,useOptimistic:function(s){var o=Pn();o.memoizedState=o.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=w_.bind(null,Ne,!0,u),u.dispatch=o,[s,o]},useMemoCache:d_,useCacheRefresh:function(){return Pn().memoizedState=Mk.bind(null,Ne)},useEffectEvent:function(s){var o=Pn(),u={impl:s};return o.memoizedState=u,function(){if((Je&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},b_={readContext:gn,use:tm,useCallback:Ub,useContext:gn,useEffect:__,useImperativeHandle:Lb,useInsertionEffect:Ob,useLayoutEffect:Vb,useMemo:Fb,useReducer:nm,useRef:Nb,useState:function(){return nm(Ws)},useDebugValue:v_,useDeferredValue:function(s,o){var u=kt();return Bb(u,ut.memoizedState,s,o)},useTransition:function(){var s=nm(Ws)[0],o=kt().memoizedState;return[typeof s=="boolean"?s:Jc(s),o]},useSyncExternalStore:pb,useId:Hb,useHostTransitionStatus:S_,useFormState:Rb,useActionState:Rb,useOptimistic:function(s,o){var u=kt();return Eb(u,ut,s,o)},useMemoCache:d_,useCacheRefresh:Gb};b_.useEffectEvent=Mb;var Qb={readContext:gn,use:tm,useCallback:Ub,useContext:gn,useEffect:__,useImperativeHandle:Lb,useInsertionEffect:Ob,useLayoutEffect:Vb,useMemo:Fb,useReducer:p_,useRef:Nb,useState:function(){return p_(Ws)},useDebugValue:v_,useDeferredValue:function(s,o){var u=kt();return ut===null?T_(u,s,o):Bb(u,ut.memoizedState,s,o)},useTransition:function(){var s=p_(Ws)[0],o=kt().memoizedState;return[typeof s=="boolean"?s:Jc(s),o]},useSyncExternalStore:pb,useId:Hb,useHostTransitionStatus:S_,useFormState:Db,useActionState:Db,useOptimistic:function(s,o){var u=kt();return ut!==null?Eb(u,ut,s,o):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:d_,useCacheRefresh:Gb};Qb.useEffectEvent=Mb;function A_(s,o,u,c){o=s.memoizedState,u=u(c,o),u=u==null?o:_({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var C_={enqueueSetState:function(s,o,u){s=s._reactInternals;var c=si(),p=Gr(c);p.payload=o,u!=null&&(p.callback=u),o=Kr(s,p,c),o!==null&&(Hn(o,s,c),Yc(o,s,c))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var c=si(),p=Gr(c);p.tag=1,p.payload=o,u!=null&&(p.callback=u),o=Kr(s,p,c),o!==null&&(Hn(o,s,c),Yc(o,s,c))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=si(),c=Gr(u);c.tag=2,o!=null&&(c.callback=o),o=Kr(s,c,u),o!==null&&(Hn(o,s,u),Yc(o,s,u))}};function Xb(s,o,u,c,p,y,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,y,E):o.prototype&&o.prototype.isPureReactComponent?!Bc(u,c)||!Bc(p,y):!0}function Jb(s,o,u,c){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,c),o.state!==s&&C_.enqueueReplaceState(o,o.state,null)}function ga(s,o){var u=o;if("ref"in o){u={};for(var c in o)c!=="ref"&&(u[c]=o[c])}if(s=s.defaultProps){u===o&&(u=_({},u));for(var p in s)u[p]===void 0&&(u[p]=s[p])}return u}function Zb(s){Ld(s)}function eA(s){console.error(s)}function tA(s){Ld(s)}function om(s,o){try{var u=s.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function nA(s,o,u){try{var c=s.onCaughtError;c(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function I_(s,o,u){return u=Gr(u),u.tag=3,u.payload={element:null},u.callback=function(){om(s,o)},u}function iA(s){return s=Gr(s),s.tag=3,s}function sA(s,o,u,c){var p=u.type.getDerivedStateFromError;if(typeof p=="function"){var y=c.value;s.payload=function(){return p(y)},s.callback=function(){nA(o,u,c)}}var E=u.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){nA(o,u,c),typeof p!="function"&&(Jr===null?Jr=new Set([this]):Jr.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})})}function Vk(s,o,u,c,p){if(u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=u.alternate,o!==null&&Pl(o,u,p,!0),u=ei.current,u!==null){switch(u.tag){case 31:case 13:return Si===null?_m():u.alternate===null&&Dt===0&&(Dt=3),u.flags&=-257,u.flags|=65536,u.lanes=p,c===$d?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([c]):o.add(c),J_(s,c,p)),!1;case 22:return u.flags|=65536,c===$d?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([c]):u.add(c)),J_(s,c,p)),!1}throw Error(i(435,u.tag))}return J_(s,c,p),_m(),!1}if(Ge)return o=ei.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,c!==Ky&&(s=Error(i(422),{cause:c}),qc(_i(s,u)))):(c!==Ky&&(o=Error(i(423),{cause:c}),qc(_i(o,u))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,c=_i(c,u),p=I_(s.stateNode,c,p),i_(s,p),Dt!==4&&(Dt=2)),!1;var y=Error(i(520),{cause:c});if(y=_i(y,u),lh===null?lh=[y]:lh.push(y),Dt!==4&&(Dt=2),o===null)return!0;c=_i(c,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,s=p&-p,u.lanes|=s,s=I_(u.stateNode,c,s),i_(u,s),!1;case 1:if(o=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Jr===null||!Jr.has(y))))return u.flags|=65536,p&=-p,u.lanes|=p,p=iA(p),sA(p,s,u,c),i_(u,p),!1}u=u.return}while(u!==null);return!1}var R_=Error(i(461)),Kt=!1;function yn(s,o,u,c){o.child=s===null?lb(o,null,u,c):ma(o,s.child,u,c)}function rA(s,o,u,c,p){u=u.render;var y=o.ref;if("ref"in c){var E={};for(var b in c)b!=="ref"&&(E[b]=c[b])}else E=c;return ca(o),c=u_(s,o,u,E,y,p),b=c_(),s!==null&&!Kt?(h_(s,o,p),Qs(s,o,p)):(Ge&&b&&Hy(o),o.flags|=1,yn(s,o,c,p),o.child)}function oA(s,o,u,c,p){if(s===null){var y=u.type;return typeof y=="function"&&!zy(y)&&y.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=y,aA(s,o,y,c,p)):(s=zd(u.type,null,c,o,o.mode,p),s.ref=o.ref,s.return=o,o.child=s)}if(y=s.child,!k_(s,p)){var E=y.memoizedProps;if(u=u.compare,u=u!==null?u:Bc,u(E,c)&&s.ref===o.ref)return Qs(s,o,p)}return o.flags|=1,s=Hs(y,c),s.ref=o.ref,s.return=o,o.child=s}function aA(s,o,u,c,p){if(s!==null){var y=s.memoizedProps;if(Bc(y,c)&&s.ref===o.ref)if(Kt=!1,o.pendingProps=c=y,k_(s,p))(s.flags&131072)!==0&&(Kt=!0);else return o.lanes=s.lanes,Qs(s,o,p)}return x_(s,o,u,c,p)}function lA(s,o,u,c){var p=c.children,y=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|u:u,s!==null){for(c=o.child=s.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~y}else c=0,o.child=null;return uA(s,o,y,u,c)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Gd(o,y!==null?y.cachePool:null),y!==null?hb(o,y):r_(),fb(o);else return c=o.lanes=536870912,uA(s,o,y!==null?y.baseLanes|u:u,u,c)}else y!==null?(Gd(o,y.cachePool),hb(o,y),Yr(),o.memoizedState=null):(s!==null&&Gd(o,null),r_(),Yr());return yn(s,o,p,u),o.child}function th(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function uA(s,o,u,c,p){var y=Zy();return y=y===null?null:{parent:Ht._currentValue,pool:y},o.memoizedState={baseLanes:u,cachePool:y},s!==null&&Gd(o,null),r_(),fb(o),s!==null&&Pl(s,o,c,!0),o.childLanes=p,null}function am(s,o){return o=um({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function cA(s,o,u){return ma(o,s.child,null,u),s=am(o,o.pendingProps),s.flags|=2,ti(o),o.memoizedState=null,s}function kk(s,o,u){var c=o.pendingProps,p=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(Ge){if(c.mode==="hidden")return s=am(o,c),o.lanes=536870912,th(null,s);if(a_(o),(s=gt)?(s=S1(s,Ei),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Br!==null?{id:Ss,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},u=$w(s),u.return=o,o.child=u,pn=o,gt=null)):s=null,s===null)throw jr(o);return o.lanes=536870912,null}return am(o,c)}var y=s.memoizedState;if(y!==null){var E=y.dehydrated;if(a_(o),p)if(o.flags&256)o.flags&=-257,o=cA(s,o,u);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(Kt||Pl(s,o,u,!1),p=(u&s.childLanes)!==0,Kt||p){if(c=mt,c!==null&&(E=Sc(c,u),E!==0&&E!==y.retryLane))throw y.retryLane=E,oa(s,E),Hn(c,s,E),R_;_m(),o=cA(s,o,u)}else s=y.treeContext,gt=wi(E.nextSibling),pn=o,Ge=!0,zr=null,Ei=!1,s!==null&&Qw(o,s),o=am(o,c),o.flags|=4096;return o}return s=Hs(s.child,{mode:c.mode,children:c.children}),s.ref=o.ref,o.child=s,s.return=o,s}function lm(s,o){var u=o.ref;if(u===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(o.flags|=4194816)}}function x_(s,o,u,c,p){return ca(o),u=u_(s,o,u,c,void 0,p),c=c_(),s!==null&&!Kt?(h_(s,o,p),Qs(s,o,p)):(Ge&&c&&Hy(o),o.flags|=1,yn(s,o,u,p),o.child)}function hA(s,o,u,c,p,y){return ca(o),o.updateQueue=null,u=mb(o,c,u,p),db(s),c=c_(),s!==null&&!Kt?(h_(s,o,y),Qs(s,o,y)):(Ge&&c&&Hy(o),o.flags|=1,yn(s,o,u,y),o.child)}function fA(s,o,u,c,p){if(ca(o),o.stateNode===null){var y=Rl,E=u.contextType;typeof E=="object"&&E!==null&&(y=gn(E)),y=new u(c,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=C_,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=c,y.state=o.memoizedState,y.refs={},t_(o),E=u.contextType,y.context=typeof E=="object"&&E!==null?gn(E):Rl,y.state=o.memoizedState,E=u.getDerivedStateFromProps,typeof E=="function"&&(A_(o,u,E,c),y.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(E=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),E!==y.state&&C_.enqueueReplaceState(y,y.state,null),Qc(o,c,y,p),Wc(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(s===null){y=o.stateNode;var b=o.memoizedProps,O=ga(u,b);y.props=O;var $=y.context,Z=u.contextType;E=Rl,typeof Z=="object"&&Z!==null&&(E=gn(Z));var ie=u.getDerivedStateFromProps;Z=typeof ie=="function"||typeof y.getSnapshotBeforeUpdate=="function",b=o.pendingProps!==b,Z||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(b||$!==E)&&Jb(o,y,c,E),Hr=!1;var Y=o.memoizedState;y.state=Y,Qc(o,c,y,p),Wc(),$=o.memoizedState,b||Y!==$||Hr?(typeof ie=="function"&&(A_(o,u,ie,c),$=o.memoizedState),(O=Hr||Xb(o,u,O,c,Y,$,E))?(Z||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=$),y.props=c,y.state=$,y.context=E,c=O):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{y=o.stateNode,n_(s,o),E=o.memoizedProps,Z=ga(u,E),y.props=Z,ie=o.pendingProps,Y=y.context,$=u.contextType,O=Rl,typeof $=="object"&&$!==null&&(O=gn($)),b=u.getDerivedStateFromProps,($=typeof b=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==ie||Y!==O)&&Jb(o,y,c,O),Hr=!1,Y=o.memoizedState,y.state=Y,Qc(o,c,y,p),Wc();var J=o.memoizedState;E!==ie||Y!==J||Hr||s!==null&&s.dependencies!==null&&qd(s.dependencies)?(typeof b=="function"&&(A_(o,u,b,c),J=o.memoizedState),(Z=Hr||Xb(o,u,Z,c,Y,J,O)||s!==null&&s.dependencies!==null&&qd(s.dependencies))?($||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,J,O),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,J,O)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=J),y.props=c,y.state=J,y.context=O,c=Z):(typeof y.componentDidUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&Y===s.memoizedState||(o.flags|=1024),c=!1)}return y=c,lm(s,o),c=(o.flags&128)!==0,y||c?(y=o.stateNode,u=c&&typeof u.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,s!==null&&c?(o.child=ma(o,s.child,null,p),o.child=ma(o,null,u,p)):yn(s,o,u,p),o.memoizedState=y.state,s=o.child):s=Qs(s,o,p),s}function dA(s,o,u,c){return la(),o.flags|=256,yn(s,o,u,c),o.child}var D_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function N_(s){return{baseLanes:s,cachePool:nb()}}function P_(s,o,u){return s=s!==null?s.childLanes&~u:0,o&&(s|=ii),s}function mA(s,o,u){var c=o.pendingProps,p=!1,y=(o.flags&128)!==0,E;if((E=y)||(E=s!==null&&s.memoizedState===null?!1:(Vt.current&2)!==0),E&&(p=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,s===null){if(Ge){if(p?$r(o):Yr(),(s=gt)?(s=S1(s,Ei),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Br!==null?{id:Ss,overflow:ws}:null,retryLane:536870912,hydrationErrors:null},u=$w(s),u.return=o,o.child=u,pn=o,gt=null)):s=null,s===null)throw jr(o);return mv(s)?o.lanes=32:o.lanes=536870912,null}var b=c.children;return c=c.fallback,p?(Yr(),p=o.mode,b=um({mode:"hidden",children:b},p),c=aa(c,p,u,null),b.return=o,c.return=o,b.sibling=c,o.child=b,c=o.child,c.memoizedState=N_(u),c.childLanes=P_(s,E,u),o.memoizedState=D_,th(null,c)):($r(o),M_(o,b))}var O=s.memoizedState;if(O!==null&&(b=O.dehydrated,b!==null)){if(y)o.flags&256?($r(o),o.flags&=-257,o=O_(s,o,u)):o.memoizedState!==null?(Yr(),o.child=s.child,o.flags|=128,o=null):(Yr(),b=c.fallback,p=o.mode,c=um({mode:"visible",children:c.children},p),b=aa(b,p,u,null),b.flags|=2,c.return=o,b.return=o,c.sibling=b,o.child=c,ma(o,s.child,null,u),c=o.child,c.memoizedState=N_(u),c.childLanes=P_(s,E,u),o.memoizedState=D_,o=th(null,c));else if($r(o),mv(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var $=E.dgst;E=$,c=Error(i(419)),c.stack="",c.digest=E,qc({value:c,source:null,stack:null}),o=O_(s,o,u)}else if(Kt||Pl(s,o,u,!1),E=(u&s.childLanes)!==0,Kt||E){if(E=mt,E!==null&&(c=Sc(E,u),c!==0&&c!==O.retryLane))throw O.retryLane=c,oa(s,c),Hn(E,s,c),R_;dv(b)||_m(),o=O_(s,o,u)}else dv(b)?(o.flags|=192,o.child=s.child,o=null):(s=O.treeContext,gt=wi(b.nextSibling),pn=o,Ge=!0,zr=null,Ei=!1,s!==null&&Qw(o,s),o=M_(o,c.children),o.flags|=4096);return o}return p?(Yr(),b=c.fallback,p=o.mode,O=s.child,$=O.sibling,c=Hs(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,$!==null?b=Hs($,b):(b=aa(b,p,u,null),b.flags|=2),b.return=o,c.return=o,c.sibling=b,o.child=c,th(null,c),c=o.child,b=s.child.memoizedState,b===null?b=N_(u):(p=b.cachePool,p!==null?(O=Ht._currentValue,p=p.parent!==O?{parent:O,pool:O}:p):p=nb(),b={baseLanes:b.baseLanes|u,cachePool:p}),c.memoizedState=b,c.childLanes=P_(s,E,u),o.memoizedState=D_,th(s.child,c)):($r(o),u=s.child,s=u.sibling,u=Hs(u,{mode:"visible",children:c.children}),u.return=o,u.sibling=null,s!==null&&(E=o.deletions,E===null?(o.deletions=[s],o.flags|=16):E.push(s)),o.child=u,o.memoizedState=null,u)}function M_(s,o){return o=um({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function um(s,o){return s=Zn(22,s,null,o),s.lanes=0,s}function O_(s,o,u){return ma(o,s.child,null,u),s=M_(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function pA(s,o,u){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o),Wy(s.return,o,u)}function V_(s,o,u,c,p,y){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:u,tailMode:p,treeForkCount:y}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=c,E.tail=u,E.tailMode=p,E.treeForkCount=y)}function gA(s,o,u){var c=o.pendingProps,p=c.revealOrder,y=c.tail;c=c.children;var E=Vt.current,b=(E&2)!==0;if(b?(E=E&1|2,o.flags|=128):E&=1,he(Vt,E),yn(s,o,c,u),c=Ge?jc:0,!b&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&pA(s,u,o);else if(s.tag===19)pA(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(p){case"forwards":for(u=o.child,p=null;u!==null;)s=u.alternate,s!==null&&Xd(s)===null&&(p=u),u=u.sibling;u=p,u===null?(p=o.child,o.child=null):(p=u.sibling,u.sibling=null),V_(o,!1,p,u,y,c);break;case"backwards":case"unstable_legacy-backwards":for(u=null,p=o.child,o.child=null;p!==null;){if(s=p.alternate,s!==null&&Xd(s)===null){o.child=p;break}s=p.sibling,p.sibling=u,u=p,p=s}V_(o,!0,u,null,y,c);break;case"together":V_(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function Qs(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Xr|=o.lanes,(u&o.childLanes)===0)if(s!==null){if(Pl(s,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,u=Hs(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Hs(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function k_(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&qd(s)))}function Lk(s,o,u){switch(o.tag){case 3:en(o,o.stateNode.containerInfo),qr(o,Ht,s.memoizedState.cache),la();break;case 27:case 5:jo(o);break;case 4:en(o,o.stateNode.containerInfo);break;case 10:qr(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,a_(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?($r(o),o.flags|=128,null):(u&o.child.childLanes)!==0?mA(s,o,u):($r(o),s=Qs(s,o,u),s!==null?s.sibling:null);$r(o);break;case 19:var p=(s.flags&128)!==0;if(c=(u&o.childLanes)!==0,c||(Pl(s,o,u,!1),c=(u&o.childLanes)!==0),p){if(c)return gA(s,o,u);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),he(Vt,Vt.current),c)break;return null;case 22:return o.lanes=0,lA(s,o,u,o.pendingProps);case 24:qr(o,Ht,s.memoizedState.cache)}return Qs(s,o,u)}function yA(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps)Kt=!0;else{if(!k_(s,u)&&(o.flags&128)===0)return Kt=!1,Lk(s,o,u);Kt=(s.flags&131072)!==0}else Kt=!1,Ge&&(o.flags&1048576)!==0&&Ww(o,jc,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(s=fa(o.elementType),o.type=s,typeof s=="function")zy(s)?(c=ga(s,c),o.tag=1,o=fA(null,o,s,c,u)):(o.tag=0,o=x_(null,o,s,c,u));else{if(s!=null){var p=s.$$typeof;if(p===ee){o.tag=11,o=rA(null,o,s,c,u);break e}else if(p===I){o.tag=14,o=oA(null,o,s,c,u);break e}}throw o=dt(s)||s,Error(i(306,o,""))}}return o;case 0:return x_(s,o,o.type,o.pendingProps,u);case 1:return c=o.type,p=ga(c,o.pendingProps),fA(s,o,c,p,u);case 3:e:{if(en(o,o.stateNode.containerInfo),s===null)throw Error(i(387));c=o.pendingProps;var y=o.memoizedState;p=y.element,n_(s,o),Qc(o,c,null,u);var E=o.memoizedState;if(c=E.cache,qr(o,Ht,c),c!==y.cache&&Qy(o,[Ht],u,!0),Wc(),c=E.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=dA(s,o,c,u);break e}else if(c!==p){p=_i(Error(i(424)),o),qc(p),o=dA(s,o,c,u);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(gt=wi(s.firstChild),pn=o,Ge=!0,zr=null,Ei=!0,u=lb(o,null,c,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(la(),c===p){o=Qs(s,o,u);break e}yn(s,o,c,u)}o=o.child}return o;case 26:return lm(s,o),s===null?(u=R1(o.type,null,o.pendingProps,null))?o.memoizedState=u:Ge||(u=o.type,s=o.pendingProps,c=Am(Me.current).createElement(u),c[zt]=o,c[on]=s,_n(c,u,s),jt(c),o.stateNode=c):o.memoizedState=R1(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return jo(o),s===null&&Ge&&(c=o.stateNode=A1(o.type,o.pendingProps,Me.current),pn=o,Ei=!0,p=gt,no(o.type)?(pv=p,gt=wi(c.firstChild)):gt=p),yn(s,o,o.pendingProps.children,u),lm(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Ge&&((p=c=gt)&&(c=dL(c,o.type,o.pendingProps,Ei),c!==null?(o.stateNode=c,pn=o,gt=wi(c.firstChild),Ei=!1,p=!0):p=!1),p||jr(o)),jo(o),p=o.type,y=o.pendingProps,E=s!==null?s.memoizedProps:null,c=y.children,cv(p,y)?c=null:E!==null&&cv(p,E)&&(o.flags|=32),o.memoizedState!==null&&(p=u_(s,o,Rk,null,null,u),gh._currentValue=p),lm(s,o),yn(s,o,c,u),o.child;case 6:return s===null&&Ge&&((s=u=gt)&&(u=mL(u,o.pendingProps,Ei),u!==null?(o.stateNode=u,pn=o,gt=null,s=!0):s=!1),s||jr(o)),null;case 13:return mA(s,o,u);case 4:return en(o,o.stateNode.containerInfo),c=o.pendingProps,s===null?o.child=ma(o,null,c,u):yn(s,o,c,u),o.child;case 11:return rA(s,o,o.type,o.pendingProps,u);case 7:return yn(s,o,o.pendingProps,u),o.child;case 8:return yn(s,o,o.pendingProps.children,u),o.child;case 12:return yn(s,o,o.pendingProps.children,u),o.child;case 10:return c=o.pendingProps,qr(o,o.type,c.value),yn(s,o,c.children,u),o.child;case 9:return p=o.type._context,c=o.pendingProps.children,ca(o),p=gn(p),c=c(p),o.flags|=1,yn(s,o,c,u),o.child;case 14:return oA(s,o,o.type,o.pendingProps,u);case 15:return aA(s,o,o.type,o.pendingProps,u);case 19:return gA(s,o,u);case 31:return kk(s,o,u);case 22:return lA(s,o,u,o.pendingProps);case 24:return ca(o),c=gn(Ht),s===null?(p=Zy(),p===null&&(p=mt,y=Xy(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=u),p=y),o.memoizedState={parent:c,cache:p},t_(o),qr(o,Ht,p)):((s.lanes&u)!==0&&(n_(s,o),Qc(o,null,null,u),Wc()),p=s.memoizedState,y=o.memoizedState,p.parent!==c?(p={parent:c,cache:c},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),qr(o,Ht,c)):(c=y.cache,qr(o,Ht,c),c!==p.cache&&Qy(o,[Ht],u,!0))),yn(s,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Xs(s){s.flags|=4}function L_(s,o,u,c,p){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(p&335544128)===p)if(s.stateNode.complete)s.flags|=8192;else if(HA())s.flags|=8192;else throw da=$d,e_}else s.flags&=-16777217}function _A(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!M1(o))if(HA())s.flags|=8192;else throw da=$d,e_}function cm(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?gd():536870912,s.lanes|=o,Hl|=o)}function nh(s,o){if(!Ge)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var c=null;u!==null;)u.alternate!==null&&(c=u),u=u.sibling;c===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function yt(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,c=0;if(o)for(var p=s.child;p!==null;)u|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)u|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=c,s.childLanes=u,o}function Uk(s,o,u){var c=o.pendingProps;switch(Gy(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(o),null;case 1:return yt(o),null;case 3:return u=o.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),$s(Ht),vt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Nl(o)?Xs(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,$y())),yt(o),null;case 26:var p=o.type,y=o.memoizedState;return s===null?(Xs(o),y!==null?(yt(o),_A(o,y)):(yt(o),L_(o,p,null,c,u))):y?y!==s.memoizedState?(Xs(o),yt(o),_A(o,y)):(yt(o),o.flags&=-16777217):(s=s.memoizedProps,s!==c&&Xs(o),yt(o),L_(o,p,s,c,u)),null;case 27:if(ul(o),u=Me.current,p=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Xs(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return yt(o),null}s=me.current,Nl(o)?Xw(o):(s=A1(p,c,u),o.stateNode=s,Xs(o))}return yt(o),null;case 5:if(ul(o),p=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Xs(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return yt(o),null}if(y=me.current,Nl(o))Xw(o);else{var E=Am(Me.current);switch(y){case 1:y=E.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=E.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=E.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?E.createElement("select",{is:c.is}):E.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?E.createElement(p,{is:c.is}):E.createElement(p)}}y[zt]=o,y[on]=c;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)y.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=y;e:switch(_n(y,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Xs(o)}}return yt(o),L_(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,u),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==c&&Xs(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(s=Me.current,Nl(o)){if(s=o.stateNode,u=o.memoizedProps,c=null,p=pn,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}s[zt]=o,s=!!(s.nodeValue===u||c!==null&&c.suppressHydrationWarning===!0||m1(s.nodeValue,u)),s||jr(o,!0)}else s=Am(s).createTextNode(c),s[zt]=o,o.stateNode=s}return yt(o),null;case 31:if(u=o.memoizedState,s===null||s.memoizedState!==null){if(c=Nl(o),u!==null){if(s===null){if(!c)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[zt]=o}else la(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;yt(o),s=!1}else u=$y(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return o.flags&256?(ti(o),o):(ti(o),null);if((o.flags&128)!==0)throw Error(i(558))}return yt(o),null;case 13:if(c=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=Nl(o),c!==null&&c.dehydrated!==null){if(s===null){if(!p)throw Error(i(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[zt]=o}else la(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;yt(o),p=!1}else p=$y(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return o.flags&256?(ti(o),o):(ti(o),null)}return ti(o),(o.flags&128)!==0?(o.lanes=u,o):(u=c!==null,s=s!==null&&s.memoizedState!==null,u&&(c=o.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==p&&(c.flags|=2048)),u!==s&&u&&(o.child.flags|=8192),cm(o,o.updateQueue),yt(o),null);case 4:return vt(),s===null&&rv(o.stateNode.containerInfo),yt(o),null;case 10:return $s(o.type),yt(o),null;case 19:if(se(Vt),c=o.memoizedState,c===null)return yt(o),null;if(p=(o.flags&128)!==0,y=c.rendering,y===null)if(p)nh(c,!1);else{if(Dt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(y=Xd(s),y!==null){for(o.flags|=128,nh(c,!1),s=y.updateQueue,o.updateQueue=s,cm(o,s),o.subtreeFlags=0,s=u,u=o.child;u!==null;)Kw(u,s),u=u.sibling;return he(Vt,Vt.current&1|2),Ge&&Gs(o,c.treeForkCount),o.child}s=s.sibling}c.tail!==null&&Dn()>pm&&(o.flags|=128,p=!0,nh(c,!1),o.lanes=4194304)}else{if(!p)if(s=Xd(y),s!==null){if(o.flags|=128,p=!0,s=s.updateQueue,o.updateQueue=s,cm(o,s),nh(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!Ge)return yt(o),null}else 2*Dn()-c.renderingStartTime>pm&&u!==536870912&&(o.flags|=128,p=!0,nh(c,!1),o.lanes=4194304);c.isBackwards?(y.sibling=o.child,o.child=y):(s=c.last,s!==null?s.sibling=y:o.child=y,c.last=y)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Dn(),s.sibling=null,u=Vt.current,he(Vt,p?u&1|2:u&1),Ge&&Gs(o,c.treeForkCount),s):(yt(o),null);case 22:case 23:return ti(o),o_(),c=o.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(u&536870912)!==0&&(o.flags&128)===0&&(yt(o),o.subtreeFlags&6&&(o.flags|=8192)):yt(o),u=o.updateQueue,u!==null&&cm(o,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==u&&(o.flags|=2048),s!==null&&se(ha),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),$s(Ht),yt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function Fk(s,o){switch(Gy(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return $s(Ht),vt(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return ul(o),null;case 31:if(o.memoizedState!==null){if(ti(o),o.alternate===null)throw Error(i(340));la()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(ti(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));la()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return se(Vt),null;case 4:return vt(),null;case 10:return $s(o.type),null;case 22:case 23:return ti(o),o_(),s!==null&&se(ha),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return $s(Ht),null;case 25:return null;default:return null}}function vA(s,o){switch(Gy(o),o.tag){case 3:$s(Ht),vt();break;case 26:case 27:case 5:ul(o);break;case 4:vt();break;case 31:o.memoizedState!==null&&ti(o);break;case 13:ti(o);break;case 19:se(Vt);break;case 10:$s(o.type);break;case 22:case 23:ti(o),o_(),s!==null&&se(ha);break;case 24:$s(Ht)}}function ih(s,o){try{var u=o.updateQueue,c=u!==null?u.lastEffect:null;if(c!==null){var p=c.next;u=p;do{if((u.tag&s)===s){c=void 0;var y=u.create,E=u.inst;c=y(),E.destroy=c}u=u.next}while(u!==p)}}catch(b){rt(o,o.return,b)}}function Wr(s,o,u){try{var c=o.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var y=p.next;c=y;do{if((c.tag&s)===s){var E=c.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,p=o;var O=u,$=b;try{$()}catch(Z){rt(p,O,Z)}}}c=c.next}while(c!==y)}}catch(Z){rt(o,o.return,Z)}}function TA(s){var o=s.updateQueue;if(o!==null){var u=s.stateNode;try{cb(o,u)}catch(c){rt(s,s.return,c)}}}function EA(s,o,u){u.props=ga(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(c){rt(s,o,c)}}function sh(s,o){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof u=="function"?s.refCleanup=u(c):u.current=c}}catch(p){rt(s,o,p)}}function bs(s,o){var u=s.ref,c=s.refCleanup;if(u!==null)if(typeof c=="function")try{c()}catch(p){rt(s,o,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(p){rt(s,o,p)}else u.current=null}function SA(s){var o=s.type,u=s.memoizedProps,c=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&c.focus();break e;case"img":u.src?c.src=u.src:u.srcSet&&(c.srcset=u.srcSet)}}catch(p){rt(s,s.return,p)}}function U_(s,o,u){try{var c=s.stateNode;aL(c,s.type,u,o),c[on]=o}catch(p){rt(s,s.return,p)}}function wA(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&no(s.type)||s.tag===4}function F_(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||wA(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&no(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function B_(s,o,u){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(s),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ui));else if(c!==4&&(c===27&&no(s.type)&&(u=s.stateNode,o=null),s=s.child,s!==null))for(B_(s,o,u),s=s.sibling;s!==null;)B_(s,o,u),s=s.sibling}function hm(s,o,u){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(c!==4&&(c===27&&no(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(hm(s,o,u),s=s.sibling;s!==null;)hm(s,o,u),s=s.sibling}function bA(s){var o=s.stateNode,u=s.memoizedProps;try{for(var c=s.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);_n(o,c,u),o[zt]=s,o[on]=u}catch(y){rt(s,s.return,y)}}var Js=!1,$t=!1,z_=!1,AA=typeof WeakSet=="function"?WeakSet:Set,ln=null;function Bk(s,o){if(s=s.containerInfo,lv=Pm,s=Lw(s),Oy(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var c=u.getSelection&&u.getSelection();if(c&&c.rangeCount!==0){u=c.anchorNode;var p=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var E=0,b=-1,O=-1,$=0,Z=0,ie=s,Y=null;t:for(;;){for(var J;ie!==u||p!==0&&ie.nodeType!==3||(b=E+p),ie!==y||c!==0&&ie.nodeType!==3||(O=E+c),ie.nodeType===3&&(E+=ie.nodeValue.length),(J=ie.firstChild)!==null;)Y=ie,ie=J;for(;;){if(ie===s)break t;if(Y===u&&++$===p&&(b=E),Y===y&&++Z===c&&(O=E),(J=ie.nextSibling)!==null)break;ie=Y,Y=ie.parentNode}ie=J}u=b===-1||O===-1?null:{start:b,end:O}}else u=null}u=u||{start:0,end:0}}else u=null;for(uv={focusedElem:s,selectionRange:u},Pm=!1,ln=o;ln!==null;)if(o=ln,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,ln=s;else for(;ln!==null;){switch(o=ln,y=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)p=s[u],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,u=o,p=y.memoizedProps,y=y.memoizedState,c=u.stateNode;try{var ge=ga(u.type,p);s=c.getSnapshotBeforeUpdate(ge,y),c.__reactInternalSnapshotBeforeUpdate=s}catch(Se){rt(u,u.return,Se)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,u=s.nodeType,u===9)fv(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":fv(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,ln=s;break}ln=o.return}}function CA(s,o,u){var c=u.flags;switch(u.tag){case 0:case 11:case 15:er(s,u),c&4&&ih(5,u);break;case 1:if(er(s,u),c&4)if(s=u.stateNode,o===null)try{s.componentDidMount()}catch(E){rt(u,u.return,E)}else{var p=ga(u.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(p,o,s.__reactInternalSnapshotBeforeUpdate)}catch(E){rt(u,u.return,E)}}c&64&&TA(u),c&512&&sh(u,u.return);break;case 3:if(er(s,u),c&64&&(s=u.updateQueue,s!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{cb(s,o)}catch(E){rt(u,u.return,E)}}break;case 27:o===null&&c&4&&bA(u);case 26:case 5:er(s,u),o===null&&c&4&&SA(u),c&512&&sh(u,u.return);break;case 12:er(s,u);break;case 31:er(s,u),c&4&&xA(s,u);break;case 13:er(s,u),c&4&&DA(s,u),c&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=Wk.bind(null,u),pL(s,u))));break;case 22:if(c=u.memoizedState!==null||Js,!c){o=o!==null&&o.memoizedState!==null||$t,p=Js;var y=$t;Js=c,($t=o)&&!y?tr(s,u,(u.subtreeFlags&8772)!==0):er(s,u),Js=p,$t=y}break;case 30:break;default:er(s,u)}}function IA(s){var o=s.alternate;o!==null&&(s.alternate=null,IA(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&ml(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Et=null,Bn=!1;function Zs(s,o,u){for(u=u.child;u!==null;)RA(s,o,u),u=u.sibling}function RA(s,o,u){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Oi,u)}catch{}switch(u.tag){case 26:$t||bs(u,o),Zs(s,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:$t||bs(u,o);var c=Et,p=Bn;no(u.type)&&(Et=u.stateNode,Bn=!1),Zs(s,o,u),dh(u.stateNode),Et=c,Bn=p;break;case 5:$t||bs(u,o);case 6:if(c=Et,p=Bn,Et=null,Zs(s,o,u),Et=c,Bn=p,Et!==null)if(Bn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(u.stateNode)}catch(y){rt(u,o,y)}else try{Et.removeChild(u.stateNode)}catch(y){rt(u,o,y)}break;case 18:Et!==null&&(Bn?(s=Et,T1(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Jl(s)):T1(Et,u.stateNode));break;case 4:c=Et,p=Bn,Et=u.stateNode.containerInfo,Bn=!0,Zs(s,o,u),Et=c,Bn=p;break;case 0:case 11:case 14:case 15:Wr(2,u,o),$t||Wr(4,u,o),Zs(s,o,u);break;case 1:$t||(bs(u,o),c=u.stateNode,typeof c.componentWillUnmount=="function"&&EA(u,o,c)),Zs(s,o,u);break;case 21:Zs(s,o,u);break;case 22:$t=(c=$t)||u.memoizedState!==null,Zs(s,o,u),$t=c;break;default:Zs(s,o,u)}}function xA(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Jl(s)}catch(u){rt(o,o.return,u)}}}function DA(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Jl(s)}catch(u){rt(o,o.return,u)}}function zk(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new AA),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new AA),o;default:throw Error(i(435,s.tag))}}function fm(s,o){var u=zk(s);o.forEach(function(c){if(!u.has(c)){u.add(c);var p=Qk.bind(null,s,c);c.then(p,p)}})}function zn(s,o){var u=o.deletions;if(u!==null)for(var c=0;c<u.length;c++){var p=u[c],y=s,E=o,b=E;e:for(;b!==null;){switch(b.tag){case 27:if(no(b.type)){Et=b.stateNode,Bn=!1;break e}break;case 5:Et=b.stateNode,Bn=!1;break e;case 3:case 4:Et=b.stateNode.containerInfo,Bn=!0;break e}b=b.return}if(Et===null)throw Error(i(160));RA(y,E,p),Et=null,Bn=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)NA(o,s),o=o.sibling}var Hi=null;function NA(s,o){var u=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:zn(o,s),jn(s),c&4&&(Wr(3,s,s.return),ih(3,s),Wr(5,s,s.return));break;case 1:zn(o,s),jn(s),c&512&&($t||u===null||bs(u,u.return)),c&64&&Js&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?c:u.concat(c))));break;case 26:var p=Hi;if(zn(o,s),jn(s),c&512&&($t||u===null||bs(u,u.return)),c&4){var y=u!==null?u.memoizedState:null;if(c=s.memoizedState,u===null)if(c===null)if(s.stateNode===null){e:{c=s.type,u=s.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":y=p.getElementsByTagName("title")[0],(!y||y[cs]||y[zt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(c),p.head.insertBefore(y,p.querySelector("head > title"))),_n(y,c,u),y[zt]=s,jt(y),c=y;break e;case"link":var E=N1("link","href",p).get(c+(u.href||""));if(E){for(var b=0;b<E.length;b++)if(y=E[b],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){E.splice(b,1);break t}}y=p.createElement(c),_n(y,c,u),p.head.appendChild(y);break;case"meta":if(E=N1("meta","content",p).get(c+(u.content||""))){for(b=0;b<E.length;b++)if(y=E[b],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){E.splice(b,1);break t}}y=p.createElement(c),_n(y,c,u),p.head.appendChild(y);break;default:throw Error(i(468,c))}y[zt]=s,jt(y),c=y}s.stateNode=c}else P1(p,s.type,s.stateNode);else s.stateNode=D1(p,c,s.memoizedProps);else y!==c?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,c===null?P1(p,s.type,s.stateNode):D1(p,c,s.memoizedProps)):c===null&&s.stateNode!==null&&U_(s,s.memoizedProps,u.memoizedProps)}break;case 27:zn(o,s),jn(s),c&512&&($t||u===null||bs(u,u.return)),u!==null&&c&4&&U_(s,s.memoizedProps,u.memoizedProps);break;case 5:if(zn(o,s),jn(s),c&512&&($t||u===null||bs(u,u.return)),s.flags&32){p=s.stateNode;try{Fn(p,"")}catch(ge){rt(s,s.return,ge)}}c&4&&s.stateNode!=null&&(p=s.memoizedProps,U_(s,p,u!==null?u.memoizedProps:p)),c&1024&&(z_=!0);break;case 6:if(zn(o,s),jn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,u=s.stateNode;try{u.nodeValue=c}catch(ge){rt(s,s.return,ge)}}break;case 3:if(Rm=null,p=Hi,Hi=Cm(o.containerInfo),zn(o,s),Hi=p,jn(s),c&4&&u!==null&&u.memoizedState.isDehydrated)try{Jl(o.containerInfo)}catch(ge){rt(s,s.return,ge)}z_&&(z_=!1,PA(s));break;case 4:c=Hi,Hi=Cm(s.stateNode.containerInfo),zn(o,s),jn(s),Hi=c;break;case 12:zn(o,s),jn(s);break;case 31:zn(o,s),jn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,fm(s,c)));break;case 13:zn(o,s),jn(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(mm=Dn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,fm(s,c)));break;case 22:p=s.memoizedState!==null;var O=u!==null&&u.memoizedState!==null,$=Js,Z=$t;if(Js=$||p,$t=Z||O,zn(o,s),$t=Z,Js=$,jn(s),c&8192)e:for(o=s.stateNode,o._visibility=p?o._visibility&-2:o._visibility|1,p&&(u===null||O||Js||$t||ya(s)),u=null,o=s;;){if(o.tag===5||o.tag===26){if(u===null){O=u=o;try{if(y=O.stateNode,p)E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=O.stateNode;var ie=O.memoizedProps.style,Y=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;b.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ge){rt(O,O.return,ge)}}}else if(o.tag===6){if(u===null){O=o;try{O.stateNode.nodeValue=p?"":O.memoizedProps}catch(ge){rt(O,O.return,ge)}}}else if(o.tag===18){if(u===null){O=o;try{var J=O.stateNode;p?E1(J,!0):E1(O.stateNode,!1)}catch(ge){rt(O,O.return,ge)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=s.updateQueue,c!==null&&(u=c.retryQueue,u!==null&&(c.retryQueue=null,fm(s,u))));break;case 19:zn(o,s),jn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,fm(s,c)));break;case 30:break;case 21:break;default:zn(o,s),jn(s)}}function jn(s){var o=s.flags;if(o&2){try{for(var u,c=s.return;c!==null;){if(wA(c)){u=c;break}c=c.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var p=u.stateNode,y=F_(s);hm(s,y,p);break;case 5:var E=u.stateNode;u.flags&32&&(Fn(E,""),u.flags&=-33);var b=F_(s);hm(s,b,E);break;case 3:case 4:var O=u.stateNode.containerInfo,$=F_(s);B_(s,$,O);break;default:throw Error(i(161))}}catch(Z){rt(s,s.return,Z)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function PA(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;PA(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function er(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)CA(s,o.alternate,o),o=o.sibling}function ya(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Wr(4,o,o.return),ya(o);break;case 1:bs(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&EA(o,o.return,u),ya(o);break;case 27:dh(o.stateNode);case 26:case 5:bs(o,o.return),ya(o);break;case 22:o.memoizedState===null&&ya(o);break;case 30:ya(o);break;default:ya(o)}s=s.sibling}}function tr(s,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,p=s,y=o,E=y.flags;switch(y.tag){case 0:case 11:case 15:tr(p,y,u),ih(4,y);break;case 1:if(tr(p,y,u),c=y,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch($){rt(c,c.return,$)}if(c=y,p=c.updateQueue,p!==null){var b=c.stateNode;try{var O=p.shared.hiddenCallbacks;if(O!==null)for(p.shared.hiddenCallbacks=null,p=0;p<O.length;p++)ub(O[p],b)}catch($){rt(c,c.return,$)}}u&&E&64&&TA(y),sh(y,y.return);break;case 27:bA(y);case 26:case 5:tr(p,y,u),u&&c===null&&E&4&&SA(y),sh(y,y.return);break;case 12:tr(p,y,u);break;case 31:tr(p,y,u),u&&E&4&&xA(p,y);break;case 13:tr(p,y,u),u&&E&4&&DA(p,y);break;case 22:y.memoizedState===null&&tr(p,y,u),sh(y,y.return);break;case 30:break;default:tr(p,y,u)}o=o.sibling}}function j_(s,o){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Hc(u))}function q_(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Hc(s))}function Gi(s,o,u,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)MA(s,o,u,c),o=o.sibling}function MA(s,o,u,c){var p=o.flags;switch(o.tag){case 0:case 11:case 15:Gi(s,o,u,c),p&2048&&ih(9,o);break;case 1:Gi(s,o,u,c);break;case 3:Gi(s,o,u,c),p&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Hc(s)));break;case 12:if(p&2048){Gi(s,o,u,c),s=o.stateNode;try{var y=o.memoizedProps,E=y.id,b=y.onPostCommit;typeof b=="function"&&b(E,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(O){rt(o,o.return,O)}}else Gi(s,o,u,c);break;case 31:Gi(s,o,u,c);break;case 13:Gi(s,o,u,c);break;case 23:break;case 22:y=o.stateNode,E=o.alternate,o.memoizedState!==null?y._visibility&2?Gi(s,o,u,c):rh(s,o):y._visibility&2?Gi(s,o,u,c):(y._visibility|=2,zl(s,o,u,c,(o.subtreeFlags&10256)!==0||!1)),p&2048&&j_(E,o);break;case 24:Gi(s,o,u,c),p&2048&&q_(o.alternate,o);break;default:Gi(s,o,u,c)}}function zl(s,o,u,c,p){for(p=p&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=s,E=o,b=u,O=c,$=E.flags;switch(E.tag){case 0:case 11:case 15:zl(y,E,b,O,p),ih(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?zl(y,E,b,O,p):rh(y,E):(Z._visibility|=2,zl(y,E,b,O,p)),p&&$&2048&&j_(E.alternate,E);break;case 24:zl(y,E,b,O,p),p&&$&2048&&q_(E.alternate,E);break;default:zl(y,E,b,O,p)}o=o.sibling}}function rh(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=s,c=o,p=c.flags;switch(c.tag){case 22:rh(u,c),p&2048&&j_(c.alternate,c);break;case 24:rh(u,c),p&2048&&q_(c.alternate,c);break;default:rh(u,c)}o=o.sibling}}var oh=8192;function jl(s,o,u){if(s.subtreeFlags&oh)for(s=s.child;s!==null;)OA(s,o,u),s=s.sibling}function OA(s,o,u){switch(s.tag){case 26:jl(s,o,u),s.flags&oh&&s.memoizedState!==null&&IL(u,Hi,s.memoizedState,s.memoizedProps);break;case 5:jl(s,o,u);break;case 3:case 4:var c=Hi;Hi=Cm(s.stateNode.containerInfo),jl(s,o,u),Hi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=oh,oh=16777216,jl(s,o,u),oh=c):jl(s,o,u));break;default:jl(s,o,u)}}function VA(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function ah(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var c=o[u];ln=c,LA(c,s)}VA(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)kA(s),s=s.sibling}function kA(s){switch(s.tag){case 0:case 11:case 15:ah(s),s.flags&2048&&Wr(9,s,s.return);break;case 3:ah(s);break;case 12:ah(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,dm(s)):ah(s);break;default:ah(s)}}function dm(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var c=o[u];ln=c,LA(c,s)}VA(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Wr(8,o,o.return),dm(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,dm(o));break;default:dm(o)}s=s.sibling}}function LA(s,o){for(;ln!==null;){var u=ln;switch(u.tag){case 0:case 11:case 15:Wr(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var c=u.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Hc(u.memoizedState.cache)}if(c=u.child,c!==null)c.return=u,ln=c;else e:for(u=s;ln!==null;){c=ln;var p=c.sibling,y=c.return;if(IA(c),c===u){ln=null;break e}if(p!==null){p.return=y,ln=p;break e}ln=y}}}var jk={getCacheForType:function(s){var o=gn(Ht),u=o.data.get(s);return u===void 0&&(u=s(),o.data.set(s,u)),u},cacheSignal:function(){return gn(Ht).controller.signal}},qk=typeof WeakMap=="function"?WeakMap:Map,Je=0,mt=null,Fe=null,qe=0,st=0,ni=null,Qr=!1,ql=!1,H_=!1,nr=0,Dt=0,Xr=0,_a=0,G_=0,ii=0,Hl=0,lh=null,qn=null,K_=!1,mm=0,UA=0,pm=1/0,gm=null,Jr=null,nn=0,Zr=null,Gl=null,ir=0,$_=0,Y_=null,FA=null,uh=0,W_=null;function si(){return(Je&2)!==0&&qe!==0?qe&-qe:te.T!==null?tv():yd()}function BA(){if(ii===0)if((qe&536870912)===0||Ge){var s=Go;Go<<=1,(Go&3932160)===0&&(Go=262144),ii=s}else ii=536870912;return s=ei.current,s!==null&&(s.flags|=32),ii}function Hn(s,o,u){(s===mt&&(st===2||st===9)||s.cancelPendingCommit!==null)&&(Kl(s,0),eo(s,qe,ii,!1)),Ko(s,u),((Je&2)===0||s!==mt)&&(s===mt&&((Je&2)===0&&(_a|=u),Dt===4&&eo(s,qe,ii,!1)),As(s))}function zA(s,o,u){if((Je&6)!==0)throw Error(i(327));var c=!u&&(o&127)===0&&(o&s.expiredLanes)===0||Vi(s,o),p=c?Kk(s,o):X_(s,o,!0),y=c;do{if(p===0){ql&&!c&&eo(s,o,0,!1);break}else{if(u=s.current.alternate,y&&!Hk(u)){p=X_(s,o,!1),y=!1;continue}if(p===2){if(y=o,s.errorRecoveryDisabledLanes&y)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var b=s;p=lh;var O=b.current.memoizedState.isDehydrated;if(O&&(Kl(b,E).flags|=256),E=X_(b,E,!1),E!==2){if(H_&&!O){b.errorRecoveryDisabledLanes|=y,_a|=y,p=4;break e}y=qn,qn=p,y!==null&&(qn===null?qn=y:qn.push.apply(qn,y))}p=E}if(y=!1,p!==2)continue}}if(p===1){Kl(s,0),eo(s,o,0,!0);break}e:{switch(c=s,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:eo(c,o,ii,!Qr);break e;case 2:qn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(p=mm+300-Dn(),10<p)){if(eo(c,o,ii,!Qr),as(c,0,!0)!==0)break e;ir=o,c.timeoutHandle=_1(jA.bind(null,c,u,qn,gm,K_,o,ii,_a,Hl,Qr,y,"Throttled",-0,0),p);break e}jA(c,u,qn,gm,K_,o,ii,_a,Hl,Qr,y,null,-0,0)}}break}while(!0);As(s)}function jA(s,o,u,c,p,y,E,b,O,$,Z,ie,Y,J){if(s.timeoutHandle=-1,ie=o.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ui},OA(o,y,ie);var ge=(y&62914560)===y?mm-Dn():(y&4194048)===y?UA-Dn():0;if(ge=RL(ie,ge),ge!==null){ir=y,s.cancelPendingCommit=ge(QA.bind(null,s,o,y,u,c,p,E,b,O,Z,ie,null,Y,J)),eo(s,y,E,!$);return}}QA(s,o,y,u,c,p,E,b,O)}function Hk(s){for(var o=s;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var c=0;c<u.length;c++){var p=u[c],y=p.getSnapshot;p=p.value;try{if(!Jn(y(),p))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function eo(s,o,u,c){o&=~G_,o&=~_a,s.suspendedLanes|=o,s.pingedLanes&=~o,c&&(s.warmLanes|=o),c=s.expirationTimes;for(var p=o;0<p;){var y=31-Mt(p),E=1<<y;c[y]=-1,p&=~E}u!==0&&$o(s,u,o)}function ym(){return(Je&6)===0?(ch(0),!1):!0}function Q_(){if(Fe!==null){if(st===0)var s=Fe.return;else s=Fe,Ks=ua=null,f_(s),kl=null,Kc=0,s=Fe;for(;s!==null;)vA(s.alternate,s),s=s.return;Fe=null}}function Kl(s,o){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,cL(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),ir=0,Q_(),mt=s,Fe=u=Hs(s.current,null),qe=o,st=0,ni=null,Qr=!1,ql=Vi(s,o),H_=!1,Hl=ii=G_=_a=Xr=Dt=0,qn=lh=null,K_=!1,(o&8)!==0&&(o|=o&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=o;0<c;){var p=31-Mt(c),y=1<<p;o|=s[p],c&=~y}return nr=o,Ud(),u}function qA(s,o){Ne=null,te.H=eh,o===Vl||o===Kd?(o=rb(),st=3):o===e_?(o=rb(),st=4):st=o===R_?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ni=o,Fe===null&&(Dt=1,om(s,_i(o,s.current)))}function HA(){var s=ei.current;return s===null?!0:(qe&4194048)===qe?Si===null:(qe&62914560)===qe||(qe&536870912)!==0?s===Si:!1}function GA(){var s=te.H;return te.H=eh,s===null?eh:s}function KA(){var s=te.A;return te.A=jk,s}function _m(){Dt=4,Qr||(qe&4194048)!==qe&&ei.current!==null||(ql=!0),(Xr&134217727)===0&&(_a&134217727)===0||mt===null||eo(mt,qe,ii,!1)}function X_(s,o,u){var c=Je;Je|=2;var p=GA(),y=KA();(mt!==s||qe!==o)&&(gm=null,Kl(s,o)),o=!1;var E=Dt;e:do try{if(st!==0&&Fe!==null){var b=Fe,O=ni;switch(st){case 8:Q_(),E=6;break e;case 3:case 2:case 9:case 6:ei.current===null&&(o=!0);var $=st;if(st=0,ni=null,$l(s,b,O,$),u&&ql){E=0;break e}break;default:$=st,st=0,ni=null,$l(s,b,O,$)}}Gk(),E=Dt;break}catch(Z){qA(s,Z)}while(!0);return o&&s.shellSuspendCounter++,Ks=ua=null,Je=c,te.H=p,te.A=y,Fe===null&&(mt=null,qe=0,Ud()),E}function Gk(){for(;Fe!==null;)$A(Fe)}function Kk(s,o){var u=Je;Je|=2;var c=GA(),p=KA();mt!==s||qe!==o?(gm=null,pm=Dn()+500,Kl(s,o)):ql=Vi(s,o);e:do try{if(st!==0&&Fe!==null){o=Fe;var y=ni;t:switch(st){case 1:st=0,ni=null,$l(s,o,y,1);break;case 2:case 9:if(ib(y)){st=0,ni=null,YA(o);break}o=function(){st!==2&&st!==9||mt!==s||(st=7),As(s)},y.then(o,o);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:ib(y)?(st=0,ni=null,YA(o)):(st=0,ni=null,$l(s,o,y,7));break;case 5:var E=null;switch(Fe.tag){case 26:E=Fe.memoizedState;case 5:case 27:var b=Fe;if(E?M1(E):b.stateNode.complete){st=0,ni=null;var O=b.sibling;if(O!==null)Fe=O;else{var $=b.return;$!==null?(Fe=$,vm($)):Fe=null}break t}}st=0,ni=null,$l(s,o,y,5);break;case 6:st=0,ni=null,$l(s,o,y,6);break;case 8:Q_(),Dt=6;break e;default:throw Error(i(462))}}$k();break}catch(Z){qA(s,Z)}while(!0);return Ks=ua=null,te.H=c,te.A=p,Je=u,Fe!==null?0:(mt=null,qe=0,Ud(),Dt)}function $k(){for(;Fe!==null&&!Iy();)$A(Fe)}function $A(s){var o=yA(s.alternate,s,nr);s.memoizedProps=s.pendingProps,o===null?vm(s):Fe=o}function YA(s){var o=s,u=o.alternate;switch(o.tag){case 15:case 0:o=hA(u,o,o.pendingProps,o.type,void 0,qe);break;case 11:o=hA(u,o,o.pendingProps,o.type.render,o.ref,qe);break;case 5:f_(o);default:vA(u,o),o=Fe=Kw(o,nr),o=yA(u,o,nr)}s.memoizedProps=s.pendingProps,o===null?vm(s):Fe=o}function $l(s,o,u,c){Ks=ua=null,f_(o),kl=null,Kc=0;var p=o.return;try{if(Vk(s,p,o,u,qe)){Dt=1,om(s,_i(u,s.current)),Fe=null;return}}catch(y){if(p!==null)throw Fe=p,y;Dt=1,om(s,_i(u,s.current)),Fe=null;return}o.flags&32768?(Ge||c===1?s=!0:ql||(qe&536870912)!==0?s=!1:(Qr=s=!0,(c===2||c===9||c===3||c===6)&&(c=ei.current,c!==null&&c.tag===13&&(c.flags|=16384))),WA(o,s)):vm(o)}function vm(s){var o=s;do{if((o.flags&32768)!==0){WA(o,Qr);return}s=o.return;var u=Uk(o.alternate,o,nr);if(u!==null){Fe=u;return}if(o=o.sibling,o!==null){Fe=o;return}Fe=o=s}while(o!==null);Dt===0&&(Dt=5)}function WA(s,o){do{var u=Fk(s.alternate,s);if(u!==null){u.flags&=32767,Fe=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(s=s.sibling,s!==null)){Fe=s;return}Fe=s=u}while(s!==null);Dt=6,Fe=null}function QA(s,o,u,c,p,y,E,b,O){s.cancelPendingCommit=null;do Tm();while(nn!==0);if((Je&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(y=o.lanes|o.childLanes,y|=Fy,Dy(s,u,y,E,b,O),s===mt&&(Fe=mt=null,qe=0),Gl=o,Zr=s,ir=u,$_=y,Y_=p,FA=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Xk(Dr,function(){return t1(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=te.T,te.T=null,p=ae.p,ae.p=2,E=Je,Je|=4;try{Bk(s,o,u)}finally{Je=E,ae.p=p,te.T=c}}nn=1,XA(),JA(),ZA()}}function XA(){if(nn===1){nn=0;var s=Zr,o=Gl,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=te.T,te.T=null;var c=ae.p;ae.p=2;var p=Je;Je|=4;try{NA(o,s);var y=uv,E=Lw(s.containerInfo),b=y.focusedElem,O=y.selectionRange;if(E!==b&&b&&b.ownerDocument&&kw(b.ownerDocument.documentElement,b)){if(O!==null&&Oy(b)){var $=O.start,Z=O.end;if(Z===void 0&&(Z=$),"selectionStart"in b)b.selectionStart=$,b.selectionEnd=Math.min(Z,b.value.length);else{var ie=b.ownerDocument||document,Y=ie&&ie.defaultView||window;if(Y.getSelection){var J=Y.getSelection(),ge=b.textContent.length,Se=Math.min(O.start,ge),ht=O.end===void 0?Se:Math.min(O.end,ge);!J.extend&&Se>ht&&(E=ht,ht=Se,Se=E);var j=Vw(b,Se),U=Vw(b,ht);if(j&&U&&(J.rangeCount!==1||J.anchorNode!==j.node||J.anchorOffset!==j.offset||J.focusNode!==U.node||J.focusOffset!==U.offset)){var K=ie.createRange();K.setStart(j.node,j.offset),J.removeAllRanges(),Se>ht?(J.addRange(K),J.extend(U.node,U.offset)):(K.setEnd(U.node,U.offset),J.addRange(K))}}}}for(ie=[],J=b;J=J.parentNode;)J.nodeType===1&&ie.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ie.length;b++){var ne=ie[b];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Pm=!!lv,uv=lv=null}finally{Je=p,ae.p=c,te.T=u}}s.current=o,nn=2}}function JA(){if(nn===2){nn=0;var s=Zr,o=Gl,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=te.T,te.T=null;var c=ae.p;ae.p=2;var p=Je;Je|=4;try{CA(s,o.alternate,o)}finally{Je=p,ae.p=c,te.T=u}}nn=3}}function ZA(){if(nn===4||nn===3){nn=0,cd();var s=Zr,o=Gl,u=ir,c=FA;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?nn=5:(nn=0,Gl=Zr=null,e1(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(Jr=null),Bs(u),o=o.stateNode,dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Oi,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=te.T,p=ae.p,ae.p=2,te.T=null;try{for(var y=s.onRecoverableError,E=0;E<c.length;E++){var b=c[E];y(b.value,{componentStack:b.stack})}}finally{te.T=o,ae.p=p}}(ir&3)!==0&&Tm(),As(s),p=s.pendingLanes,(u&261930)!==0&&(p&42)!==0?s===W_?uh++:(uh=0,W_=s):uh=0,ch(0)}}function e1(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Hc(o)))}function Tm(){return XA(),JA(),ZA(),t1()}function t1(){if(nn!==5)return!1;var s=Zr,o=$_;$_=0;var u=Bs(ir),c=te.T,p=ae.p;try{ae.p=32>u?32:u,te.T=null,u=Y_,Y_=null;var y=Zr,E=ir;if(nn=0,Gl=Zr=null,ir=0,(Je&6)!==0)throw Error(i(331));var b=Je;if(Je|=4,kA(y.current),MA(y,y.current,E,u),Je=b,ch(0,!1),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Oi,y)}catch{}return!0}finally{ae.p=p,te.T=c,e1(s,o)}}function n1(s,o,u){o=_i(u,o),o=I_(s.stateNode,o,2),s=Kr(s,o,2),s!==null&&(Ko(s,2),As(s))}function rt(s,o,u){if(s.tag===3)n1(s,s,u);else for(;o!==null;){if(o.tag===3){n1(o,s,u);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Jr===null||!Jr.has(c))){s=_i(u,s),u=iA(2),c=Kr(o,u,2),c!==null&&(sA(u,c,o,s),Ko(c,2),As(c));break}}o=o.return}}function J_(s,o,u){var c=s.pingCache;if(c===null){c=s.pingCache=new qk;var p=new Set;c.set(o,p)}else p=c.get(o),p===void 0&&(p=new Set,c.set(o,p));p.has(u)||(H_=!0,p.add(u),s=Yk.bind(null,s,o,u),o.then(s,s))}function Yk(s,o,u){var c=s.pingCache;c!==null&&c.delete(o),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,mt===s&&(qe&u)===u&&(Dt===4||Dt===3&&(qe&62914560)===qe&&300>Dn()-mm?(Je&2)===0&&Kl(s,0):G_|=u,Hl===qe&&(Hl=0)),As(s)}function i1(s,o){o===0&&(o=gd()),s=oa(s,o),s!==null&&(Ko(s,o),As(s))}function Wk(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),i1(s,u)}function Qk(s,o){var u=0;switch(s.tag){case 31:case 13:var c=s.stateNode,p=s.memoizedState;p!==null&&(u=p.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),i1(s,u)}function Xk(s,o){return tn(s,o)}var Em=null,Yl=null,Z_=!1,Sm=!1,ev=!1,to=0;function As(s){s!==Yl&&s.next===null&&(Yl===null?Em=Yl=s:Yl=Yl.next=s),Sm=!0,Z_||(Z_=!0,Zk())}function ch(s,o){if(!ev&&Sm){ev=!0;do for(var u=!1,c=Em;c!==null;){if(s!==0){var p=c.pendingLanes;if(p===0)var y=0;else{var E=c.suspendedLanes,b=c.pingedLanes;y=(1<<31-Mt(42|s)+1)-1,y&=p&~(E&~b),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,a1(c,y))}else y=qe,y=as(c,c===mt?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Vi(c,y)||(u=!0,a1(c,y));c=c.next}while(u);ev=!1}}function Jk(){s1()}function s1(){Sm=Z_=!1;var s=0;to!==0&&uL()&&(s=to);for(var o=Dn(),u=null,c=Em;c!==null;){var p=c.next,y=r1(c,o);y===0?(c.next=null,u===null?Em=p:u.next=p,p===null&&(Yl=u)):(u=c,(s!==0||(y&3)!==0)&&(Sm=!0)),c=p}nn!==0&&nn!==5||ch(s),to!==0&&(to=0)}function r1(s,o){for(var u=s.suspendedLanes,c=s.pingedLanes,p=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var E=31-Mt(y),b=1<<E,O=p[E];O===-1?((b&u)===0||(b&c)!==0)&&(p[E]=xy(b,o)):O<=o&&(s.expiredLanes|=b),y&=~b}if(o=mt,u=qe,u=as(s,s===o?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,u===0||s===o&&(st===2||st===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&xr(c),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||Vi(s,u)){if(o=u&-u,o===s.callbackPriority)return o;switch(c!==null&&xr(c),Bs(u)){case 2:case 8:u=Tc;break;case 32:u=Dr;break;case 268435456:u=hd;break;default:u=Dr}return c=o1.bind(null,s),u=tn(u,c),s.callbackPriority=o,s.callbackNode=u,o}return c!==null&&c!==null&&xr(c),s.callbackPriority=2,s.callbackNode=null,2}function o1(s,o){if(nn!==0&&nn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Tm()&&s.callbackNode!==u)return null;var c=qe;return c=as(s,s===mt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(zA(s,c,o),r1(s,Dn()),s.callbackNode!=null&&s.callbackNode===u?o1.bind(null,s):null)}function a1(s,o){if(Tm())return null;zA(s,o,!0)}function Zk(){hL(function(){(Je&6)!==0?tn(vc,Jk):s1()})}function tv(){if(to===0){var s=Ml;s===0&&(s=rs,rs<<=1,(rs&261888)===0&&(rs=256)),to=s}return to}function l1(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:_l(""+s)}function u1(s,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,s.id&&u.setAttribute("form",s.id),o.parentNode.insertBefore(u,o),s=new FormData(s),u.parentNode.removeChild(u),s}function eL(s,o,u,c,p){if(o==="submit"&&u&&u.stateNode===p){var y=l1((p[on]||null).action),E=c.submitter;E&&(o=(o=E[on]||null)?l1(o.formAction):E.getAttribute("formAction"),o!==null&&(y=o,E=null));var b=new _s("action","action",null,c,p);s.push({event:b,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(to!==0){var O=E?u1(p,E):new FormData(p);E_(u,{pending:!0,data:O,method:p.method,action:y},null,O)}}else typeof y=="function"&&(b.preventDefault(),O=E?u1(p,E):new FormData(p),E_(u,{pending:!0,data:O,method:p.method,action:y},y,O))},currentTarget:p}]})}}for(var nv=0;nv<Uy.length;nv++){var iv=Uy[nv],tL=iv.toLowerCase(),nL=iv[0].toUpperCase()+iv.slice(1);qi(tL,"on"+nL)}qi(Bw,"onAnimationEnd"),qi(zw,"onAnimationIteration"),qi(jw,"onAnimationStart"),qi("dblclick","onDoubleClick"),qi("focusin","onFocus"),qi("focusout","onBlur"),qi(_k,"onTransitionRun"),qi(vk,"onTransitionStart"),qi(Tk,"onTransitionCancel"),qi(qw,"onTransitionEnd"),ms("onMouseEnter",["mouseout","mouseover"]),ms("onMouseLeave",["mouseout","mouseover"]),ms("onPointerEnter",["pointerout","pointerover"]),ms("onPointerLeave",["pointerout","pointerover"]),ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ds("onBeforeInput",["compositionend","keypress","textInput","paste"]),ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hh));function c1(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var c=s[u],p=c.event;c=c.listeners;e:{var y=void 0;if(o)for(var E=c.length-1;0<=E;E--){var b=c[E],O=b.instance,$=b.currentTarget;if(b=b.listener,O!==y&&p.isPropagationStopped())break e;y=b,p.currentTarget=$;try{y(p)}catch(Z){Ld(Z)}p.currentTarget=null,y=O}else for(E=0;E<c.length;E++){if(b=c[E],O=b.instance,$=b.currentTarget,b=b.listener,O!==y&&p.isPropagationStopped())break e;y=b,p.currentTarget=$;try{y(p)}catch(Z){Ld(Z)}p.currentTarget=null,y=O}}}}function Be(s,o){var u=o[dl];u===void 0&&(u=o[dl]=new Set);var c=s+"__bubble";u.has(c)||(h1(o,s,2,!1),u.add(c))}function sv(s,o,u){var c=0;o&&(c|=4),h1(u,s,c,o)}var wm="_reactListening"+Math.random().toString(36).slice(2);function rv(s){if(!s[wm]){s[wm]=!0,wc.forEach(function(u){u!=="selectionchange"&&(iL.has(u)||sv(u,!1,s),sv(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[wm]||(o[wm]=!0,sv("selectionchange",!1,o))}}function h1(s,o,u,c){switch(B1(o)){case 2:var p=NL;break;case 8:p=PL;break;default:p=Tv}u=p.bind(null,o,u,s),p=void 0,!Jo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),c?p!==void 0?s.addEventListener(o,u,{capture:!0,passive:p}):s.addEventListener(o,u,!0):p!==void 0?s.addEventListener(o,u,{passive:p}):s.addEventListener(o,u,!1)}function ov(s,o,u,c,p){var y=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var b=c.stateNode.containerInfo;if(b===p)break;if(E===4)for(E=c.return;E!==null;){var O=E.tag;if((O===3||O===4)&&E.stateNode.containerInfo===p)return;E=E.return}for(;b!==null;){if(E=hs(b),E===null)return;if(O=E.tag,O===5||O===6||O===26||O===27){c=y=E;continue e}b=b.parentNode}}c=c.return}kr(function(){var $=y,Z=mi(u),ie=[];e:{var Y=Hw.get(s);if(Y!==void 0){var J=_s,ge=s;switch(s){case"keypress":if(ea(u)===0)break e;case"keydown":case"keyup":J=Od;break;case"focusin":ge="focus",J=na;break;case"focusout":ge="blur",J=na;break;case"beforeblur":case"afterblur":J=na;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=kc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Ad;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=v;break;case Bw:case zw:case jw:J=Id;break;case qw:J=C;break;case"scroll":case"scrollend":J=Vc;break;case"wheel":J=Q;break;case"copy":case"cut":case"paste":J=Rd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=qs;break;case"toggle":case"beforetoggle":J=De}var Se=(o&4)!==0,ht=!Se&&(s==="scroll"||s==="scrollend"),j=Se?Y!==null?Y+"Capture":null:Y;Se=[];for(var U=$,K;U!==null;){var ne=U;if(K=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||K===null||j===null||(ne=Fi(U,j),ne!=null&&Se.push(fh(U,ne,K))),ht)break;U=U.return}0<Se.length&&(Y=new J(Y,ge,null,u,Z),ie.push({event:Y,listeners:Se}))}}if((o&7)===0){e:{if(Y=s==="mouseover"||s==="pointerover",J=s==="mouseout"||s==="pointerout",Y&&u!==Pc&&(ge=u.relatedTarget||u.fromElement)&&(hs(ge)||ge[us]))break e;if((J||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,J?(ge=u.relatedTarget||u.toElement,J=$,ge=ge?hs(ge):null,ge!==null&&(ht=a(ge),Se=ge.tag,ge!==ht||Se!==5&&Se!==27&&Se!==6)&&(ge=null)):(J=null,ge=$),J!==ge)){if(Se=kc,ne="onMouseLeave",j="onMouseEnter",U="mouse",(s==="pointerout"||s==="pointerover")&&(Se=qs,ne="onPointerLeave",j="onPointerEnter",U="pointer"),ht=J==null?Y:Qn(J),K=ge==null?Y:Qn(ge),Y=new Se(ne,U+"leave",J,u,Z),Y.target=ht,Y.relatedTarget=K,ne=null,hs(Z)===$&&(Se=new Se(j,U+"enter",ge,u,Z),Se.target=K,Se.relatedTarget=ht,ne=Se),ht=ne,J&&ge)t:{for(Se=sL,j=J,U=ge,K=0,ne=j;ne;ne=Se(ne))K++;ne=0;for(var Te=U;Te;Te=Se(Te))ne++;for(;0<K-ne;)j=Se(j),K--;for(;0<ne-K;)U=Se(U),ne--;for(;K--;){if(j===U||U!==null&&j===U.alternate){Se=j;break t}j=Se(j),U=Se(U)}Se=null}else Se=null;J!==null&&f1(ie,Y,J,Se,!1),ge!==null&&ht!==null&&f1(ie,ht,ge,Se,!0)}}e:{if(Y=$?Qn($):window,J=Y.nodeName&&Y.nodeName.toLowerCase(),J==="select"||J==="input"&&Y.type==="file")var We=xw;else if(Iw(Y))if(Dw)We=pk;else{We=dk;var _e=fk}else J=Y.nodeName,!J||J.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?$&&yl($.elementType)&&(We=xw):We=mk;if(We&&(We=We(s,$))){Rw(ie,We,u,Z);break e}_e&&_e(s,Y,$),s==="focusout"&&$&&Y.type==="number"&&$.memoizedProps.value!=null&&xc(Y,"number",Y.value)}switch(_e=$?Qn($):window,s){case"focusin":(Iw(_e)||_e.contentEditable==="true")&&(Al=_e,Vy=$,zc=null);break;case"focusout":zc=Vy=Al=null;break;case"mousedown":ky=!0;break;case"contextmenu":case"mouseup":case"dragend":ky=!1,Uw(ie,u,Z);break;case"selectionchange":if(yk)break;case"keydown":case"keyup":Uw(ie,u,Z)}var Oe;if(Xe)e:{switch(s){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else bl?ia(s,u)&&(He="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(He="onCompositionStart");He&&(Es&&u.locale!=="ko"&&(bl||He!=="onCompositionStart"?He==="onCompositionEnd"&&bl&&(Oe=Oc()):(ys=Z,Mc="value"in ys?ys.value:ys.textContent,bl=!0)),_e=bm($,He),0<_e.length&&(He=new Ts(He,s,null,u,Z),ie.push({event:He,listeners:_e}),Oe?He.data=Oe:(Oe=wl(u),Oe!==null&&(He.data=Oe)))),(Oe=gi?lk(s,u):uk(s,u))&&(He=bm($,"onBeforeInput"),0<He.length&&(_e=new Ts("onBeforeInput","beforeinput",null,u,Z),ie.push({event:_e,listeners:He}),_e.data=Oe)),eL(ie,s,$,u,Z)}c1(ie,o)})}function fh(s,o,u){return{instance:s,listener:o,currentTarget:u}}function bm(s,o){for(var u=o+"Capture",c=[];s!==null;){var p=s,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Fi(s,u),p!=null&&c.unshift(fh(s,p,y)),p=Fi(s,o),p!=null&&c.push(fh(s,p,y))),s.tag===3)return c;s=s.return}return[]}function sL(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function f1(s,o,u,c,p){for(var y=o._reactName,E=[];u!==null&&u!==c;){var b=u,O=b.alternate,$=b.stateNode;if(b=b.tag,O!==null&&O===c)break;b!==5&&b!==26&&b!==27||$===null||(O=$,p?($=Fi(u,y),$!=null&&E.unshift(fh(u,$,O))):p||($=Fi(u,y),$!=null&&E.push(fh(u,$,O)))),u=u.return}E.length!==0&&s.push({event:o,listeners:E})}var rL=/\r\n?/g,oL=/\u0000|\uFFFD/g;function d1(s){return(typeof s=="string"?s:""+s).replace(rL,`
`).replace(oL,"")}function m1(s,o){return o=d1(o),d1(s)===o}function ct(s,o,u,c,p,y){switch(u){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||Fn(s,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&Fn(s,""+c);break;case"className":Xn(s,"class",c);break;case"tabIndex":Xn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Xn(s,u,c);break;case"style":Nc(s,c,y);break;case"data":if(o!=="object"){Xn(s,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||u!=="href")){s.removeAttribute(u);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(u);break}c=_l(""+c),s.setAttribute(u,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(o!=="input"&&ct(s,o,"name",p.name,p,null),ct(s,o,"formEncType",p.formEncType,p,null),ct(s,o,"formMethod",p.formMethod,p,null),ct(s,o,"formTarget",p.formTarget,p,null)):(ct(s,o,"encType",p.encType,p,null),ct(s,o,"method",p.method,p,null),ct(s,o,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(u);break}c=_l(""+c),s.setAttribute(u,c);break;case"onClick":c!=null&&(s.onclick=Ui);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(u=c.__html,u!=null){if(p.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}u=_l(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(u,""+c):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":c===!0?s.setAttribute(u,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(u,c):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(u,c):s.removeAttribute(u);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(u):s.setAttribute(u,c);break;case"popover":Be("beforetoggle",s),Be("toggle",s),pl(s,"popover",c);break;case"xlinkActuate":qt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":qt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":qt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":qt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":qt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":qt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":qt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":qt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":qt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":pl(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=bd.get(u)||u,pl(s,u,c))}}function av(s,o,u,c,p,y){switch(u){case"style":Nc(s,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(u=c.__html,u!=null){if(p.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof c=="string"?Fn(s,c):(typeof c=="number"||typeof c=="bigint")&&Fn(s,""+c);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bc.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(p=u.endsWith("Capture"),o=u.slice(2,p?u.length-7:void 0),y=s[on]||null,y=y!=null?y[u]:null,typeof y=="function"&&s.removeEventListener(o,y,p),typeof c=="function")){typeof y!="function"&&y!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(o,c,p);break e}u in s?s[u]=c:c===!0?s.setAttribute(u,""):pl(s,u,c)}}}function _n(s,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",s),Be("load",s);var c=!1,p=!1,y;for(y in u)if(u.hasOwnProperty(y)){var E=u[y];if(E!=null)switch(y){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ct(s,o,y,E,u,null)}}p&&ct(s,o,"srcSet",u.srcSet,u,null),c&&ct(s,o,"src",u.src,u,null);return;case"input":Be("invalid",s);var b=y=E=p=null,O=null,$=null;for(c in u)if(u.hasOwnProperty(c)){var Z=u[c];if(Z!=null)switch(c){case"name":p=Z;break;case"type":E=Z;break;case"checked":O=Z;break;case"defaultChecked":$=Z;break;case"value":y=Z;break;case"defaultValue":b=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,o));break;default:ct(s,o,c,Z,u,null)}}Ed(s,y,b,O,$,E,p,!1);return;case"select":Be("invalid",s),c=E=y=null;for(p in u)if(u.hasOwnProperty(p)&&(b=u[p],b!=null))switch(p){case"value":y=b;break;case"defaultValue":E=b;break;case"multiple":c=b;default:ct(s,o,p,b,u,null)}o=y,u=E,s.multiple=!!c,o!=null?Pr(s,!!c,o,!1):u!=null&&Pr(s,!!c,u,!0);return;case"textarea":Be("invalid",s),y=p=c=null;for(E in u)if(u.hasOwnProperty(E)&&(b=u[E],b!=null))switch(E){case"value":c=b;break;case"defaultValue":p=b;break;case"children":y=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:ct(s,o,E,b,u,null)}Mr(s,c,p,y);return;case"option":for(O in u)if(u.hasOwnProperty(O)&&(c=u[O],c!=null))switch(O){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ct(s,o,O,c,u,null)}return;case"dialog":Be("beforetoggle",s),Be("toggle",s),Be("cancel",s),Be("close",s);break;case"iframe":case"object":Be("load",s);break;case"video":case"audio":for(c=0;c<hh.length;c++)Be(hh[c],s);break;case"image":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"embed":case"source":case"link":Be("error",s),Be("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in u)if(u.hasOwnProperty($)&&(c=u[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ct(s,o,$,c,u,null)}return;default:if(yl(o)){for(Z in u)u.hasOwnProperty(Z)&&(c=u[Z],c!==void 0&&av(s,o,Z,c,u,void 0));return}}for(b in u)u.hasOwnProperty(b)&&(c=u[b],c!=null&&ct(s,o,b,c,u,null))}function aL(s,o,u,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,E=null,b=null,O=null,$=null,Z=null;for(J in u){var ie=u[J];if(u.hasOwnProperty(J)&&ie!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":O=ie;default:c.hasOwnProperty(J)||ct(s,o,J,null,c,ie)}}for(var Y in c){var J=c[Y];if(ie=u[Y],c.hasOwnProperty(Y)&&(J!=null||ie!=null))switch(Y){case"type":y=J;break;case"name":p=J;break;case"checked":$=J;break;case"defaultChecked":Z=J;break;case"value":E=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,o));break;default:J!==ie&&ct(s,o,Y,J,c,ie)}}gl(s,E,b,O,$,Z,y,p);return;case"select":J=E=b=Y=null;for(y in u)if(O=u[y],u.hasOwnProperty(y)&&O!=null)switch(y){case"value":break;case"multiple":J=O;default:c.hasOwnProperty(y)||ct(s,o,y,null,c,O)}for(p in c)if(y=c[p],O=u[p],c.hasOwnProperty(p)&&(y!=null||O!=null))switch(p){case"value":Y=y;break;case"defaultValue":b=y;break;case"multiple":E=y;default:y!==O&&ct(s,o,p,y,c,O)}o=b,u=E,c=J,Y!=null?Pr(s,!!u,Y,!1):!!c!=!!u&&(o!=null?Pr(s,!!u,o,!0):Pr(s,!!u,u?[]:"",!1));return;case"textarea":J=Y=null;for(b in u)if(p=u[b],u.hasOwnProperty(b)&&p!=null&&!c.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ct(s,o,b,null,c,p)}for(E in c)if(p=c[E],y=u[E],c.hasOwnProperty(E)&&(p!=null||y!=null))switch(E){case"value":Y=p;break;case"defaultValue":J=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&ct(s,o,E,p,c,y)}Sd(s,Y,J);return;case"option":for(var ge in u)if(Y=u[ge],u.hasOwnProperty(ge)&&Y!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":s.selected=!1;break;default:ct(s,o,ge,null,c,Y)}for(O in c)if(Y=c[O],J=u[O],c.hasOwnProperty(O)&&Y!==J&&(Y!=null||J!=null))switch(O){case"selected":s.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:ct(s,o,O,Y,c,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in u)Y=u[Se],u.hasOwnProperty(Se)&&Y!=null&&!c.hasOwnProperty(Se)&&ct(s,o,Se,null,c,Y);for($ in c)if(Y=c[$],J=u[$],c.hasOwnProperty($)&&Y!==J&&(Y!=null||J!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,o));break;default:ct(s,o,$,Y,c,J)}return;default:if(yl(o)){for(var ht in u)Y=u[ht],u.hasOwnProperty(ht)&&Y!==void 0&&!c.hasOwnProperty(ht)&&av(s,o,ht,void 0,c,Y);for(Z in c)Y=c[Z],J=u[Z],!c.hasOwnProperty(Z)||Y===J||Y===void 0&&J===void 0||av(s,o,Z,Y,c,J);return}}for(var j in u)Y=u[j],u.hasOwnProperty(j)&&Y!=null&&!c.hasOwnProperty(j)&&ct(s,o,j,null,c,Y);for(ie in c)Y=c[ie],J=u[ie],!c.hasOwnProperty(ie)||Y===J||Y==null&&J==null||ct(s,o,ie,Y,c,J)}function p1(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lL(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,u=performance.getEntriesByType("resource"),c=0;c<u.length;c++){var p=u[c],y=p.transferSize,E=p.initiatorType,b=p.duration;if(y&&b&&p1(E)){for(E=0,b=p.responseEnd,c+=1;c<u.length;c++){var O=u[c],$=O.startTime;if($>b)break;var Z=O.transferSize,ie=O.initiatorType;Z&&p1(ie)&&(O=O.responseEnd,E+=Z*(O<b?1:(b-$)/(O-$)))}if(--c,o+=8*(y+E)/(p.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var lv=null,uv=null;function Am(s){return s.nodeType===9?s:s.ownerDocument}function g1(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function y1(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function cv(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var hv=null;function uL(){var s=window.event;return s&&s.type==="popstate"?s===hv?!1:(hv=s,!0):(hv=null,!1)}var _1=typeof setTimeout=="function"?setTimeout:void 0,cL=typeof clearTimeout=="function"?clearTimeout:void 0,v1=typeof Promise=="function"?Promise:void 0,hL=typeof queueMicrotask=="function"?queueMicrotask:typeof v1<"u"?function(s){return v1.resolve(null).then(s).catch(fL)}:_1;function fL(s){setTimeout(function(){throw s})}function no(s){return s==="head"}function T1(s,o){var u=o,c=0;do{var p=u.nextSibling;if(s.removeChild(u),p&&p.nodeType===8)if(u=p.data,u==="/$"||u==="/&"){if(c===0){s.removeChild(p),Jl(o);return}c--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")c++;else if(u==="html")dh(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,dh(u);for(var y=u.firstChild;y;){var E=y.nextSibling,b=y.nodeName;y[cs]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&y.rel.toLowerCase()==="stylesheet"||u.removeChild(y),y=E}}else u==="body"&&dh(s.ownerDocument.body);u=p}while(u);Jl(o)}function E1(s,o){var u=s;s=0;do{var c=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),c&&c.nodeType===8)if(u=c.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=c}while(u)}function fv(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":fv(u),ml(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function dL(s,o,u,c){for(;s.nodeType===1;){var p=u;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[cs])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=wi(s.nextSibling),s===null)break}return null}function mL(s,o,u){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=wi(s.nextSibling),s===null))return null;return s}function S1(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=wi(s.nextSibling),s===null))return null;return s}function dv(s){return s.data==="$?"||s.data==="$~"}function mv(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function pL(s,o){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||u.readyState!=="loading")o();else{var c=function(){o(),u.removeEventListener("DOMContentLoaded",c)};u.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function wi(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var pv=null;function w1(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(o===0)return wi(s.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}s=s.nextSibling}return null}function b1(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return s;o--}else u!=="/$"&&u!=="/&"||o++}s=s.previousSibling}return null}function A1(s,o,u){switch(o=Am(u),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function dh(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);ml(s)}var bi=new Map,C1=new Set;function Cm(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var sr=ae.d;ae.d={f:gL,r:yL,D:_L,C:vL,L:TL,m:EL,X:wL,S:SL,M:bL};function gL(){var s=sr.f(),o=ym();return s||o}function yL(s){var o=di(s);o!==null&&o.tag===5&&o.type==="form"?qb(o):sr.r(s)}var Wl=typeof document>"u"?null:document;function I1(s,o,u){var c=Wl;if(c&&typeof o=="string"&&o){var p=Un(o);p='link[rel="'+s+'"][href="'+p+'"]',typeof u=="string"&&(p+='[crossorigin="'+u+'"]'),C1.has(p)||(C1.add(p),s={rel:s,crossOrigin:u,href:o},c.querySelector(p)===null&&(o=c.createElement("link"),_n(o,"link",s),jt(o),c.head.appendChild(o)))}}function _L(s){sr.D(s),I1("dns-prefetch",s,null)}function vL(s,o){sr.C(s,o),I1("preconnect",s,o)}function TL(s,o,u){sr.L(s,o,u);var c=Wl;if(c&&s&&o){var p='link[rel="preload"][as="'+Un(o)+'"]';o==="image"&&u&&u.imageSrcSet?(p+='[imagesrcset="'+Un(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(p+='[imagesizes="'+Un(u.imageSizes)+'"]')):p+='[href="'+Un(s)+'"]';var y=p;switch(o){case"style":y=Ql(s);break;case"script":y=Xl(s)}bi.has(y)||(s=_({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:s,as:o},u),bi.set(y,s),c.querySelector(p)!==null||o==="style"&&c.querySelector(mh(y))||o==="script"&&c.querySelector(ph(y))||(o=c.createElement("link"),_n(o,"link",s),jt(o),c.head.appendChild(o)))}}function EL(s,o){sr.m(s,o);var u=Wl;if(u&&s){var c=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+Un(c)+'"][href="'+Un(s)+'"]',y=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=Xl(s)}if(!bi.has(y)&&(s=_({rel:"modulepreload",href:s},o),bi.set(y,s),u.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(ph(y)))return}c=u.createElement("link"),_n(c,"link",s),jt(c),u.head.appendChild(c)}}}function SL(s,o,u){sr.S(s,o,u);var c=Wl;if(c&&s){var p=fs(c).hoistableStyles,y=Ql(s);o=o||"default";var E=p.get(y);if(!E){var b={loading:0,preload:null};if(E=c.querySelector(mh(y)))b.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":o},u),(u=bi.get(y))&&gv(s,u);var O=E=c.createElement("link");jt(O),_n(O,"link",s),O._p=new Promise(function($,Z){O.onload=$,O.onerror=Z}),O.addEventListener("load",function(){b.loading|=1}),O.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Im(E,o,c)}E={type:"stylesheet",instance:E,count:1,state:b},p.set(y,E)}}}function wL(s,o){sr.X(s,o);var u=Wl;if(u&&s){var c=fs(u).hoistableScripts,p=Xl(s),y=c.get(p);y||(y=u.querySelector(ph(p)),y||(s=_({src:s,async:!0},o),(o=bi.get(p))&&yv(s,o),y=u.createElement("script"),jt(y),_n(y,"link",s),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function bL(s,o){sr.M(s,o);var u=Wl;if(u&&s){var c=fs(u).hoistableScripts,p=Xl(s),y=c.get(p);y||(y=u.querySelector(ph(p)),y||(s=_({src:s,async:!0,type:"module"},o),(o=bi.get(p))&&yv(s,o),y=u.createElement("script"),jt(y),_n(y,"link",s),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(p,y))}}function R1(s,o,u,c){var p=(p=Me.current)?Cm(p):null;if(!p)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=Ql(u.href),u=fs(p).hoistableStyles,c=u.get(o),c||(c={type:"style",instance:null,count:0,state:null},u.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Ql(u.href);var y=fs(p).hoistableStyles,E=y.get(s);if(E||(p=p.ownerDocument||p,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,E),(y=p.querySelector(mh(s)))&&!y._p&&(E.instance=y,E.state.loading=5),bi.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},bi.set(s,u),y||AL(p,s,u,E.state))),o&&c===null)throw Error(i(528,""));return E}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Xl(u),u=fs(p).hoistableScripts,c=u.get(o),c||(c={type:"script",instance:null,count:0,state:null},u.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Ql(s){return'href="'+Un(s)+'"'}function mh(s){return'link[rel="stylesheet"]['+s+"]"}function x1(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function AL(s,o,u,c){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=s.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),_n(o,"link",u),jt(o),s.head.appendChild(o))}function Xl(s){return'[src="'+Un(s)+'"]'}function ph(s){return"script[async]"+s}function D1(s,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var c=s.querySelector('style[data-href~="'+Un(u.href)+'"]');if(c)return o.instance=c,jt(c),c;var p=_({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),jt(c),_n(c,"style",p),Im(c,u.precedence,s),o.instance=c;case"stylesheet":p=Ql(u.href);var y=s.querySelector(mh(p));if(y)return o.state.loading|=4,o.instance=y,jt(y),y;c=x1(u),(p=bi.get(p))&&gv(c,p),y=(s.ownerDocument||s).createElement("link"),jt(y);var E=y;return E._p=new Promise(function(b,O){E.onload=b,E.onerror=O}),_n(y,"link",c),o.state.loading|=4,Im(y,u.precedence,s),o.instance=y;case"script":return y=Xl(u.src),(p=s.querySelector(ph(y)))?(o.instance=p,jt(p),p):(c=u,(p=bi.get(y))&&(c=_({},u),yv(c,p)),s=s.ownerDocument||s,p=s.createElement("script"),jt(p),_n(p,"link",c),s.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,Im(c,u.precedence,s));return o.instance}function Im(s,o,u){for(var c=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,y=p,E=0;E<c.length;E++){var b=c[E];if(b.dataset.precedence===o)y=b;else if(y!==p)break}y?y.parentNode.insertBefore(s,y.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(s,o.firstChild))}function gv(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function yv(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Rm=null;function N1(s,o,u){if(Rm===null){var c=new Map,p=Rm=new Map;p.set(u,c)}else p=Rm,c=p.get(u),c||(c=new Map,p.set(u,c));if(c.has(s))return c;for(c.set(s,null),u=u.getElementsByTagName(s),p=0;p<u.length;p++){var y=u[p];if(!(y[cs]||y[zt]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var E=y.getAttribute(o)||"";E=s+E;var b=c.get(E);b?b.push(y):c.set(E,[y])}}return c}function P1(s,o,u){s=s.ownerDocument||s,s.head.insertBefore(u,o==="title"?s.querySelector("head > title"):null)}function CL(s,o,u){if(u===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function M1(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function IL(s,o,u,c){if(u.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var p=Ql(c.href),y=o.querySelector(mh(p));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=xm.bind(s),o.then(s,s)),u.state.loading|=4,u.instance=y,jt(y);return}y=o.ownerDocument||o,c=x1(c),(p=bi.get(p))&&gv(c,p),y=y.createElement("link"),jt(y);var E=y;E._p=new Promise(function(b,O){E.onload=b,E.onerror=O}),_n(y,"link",c),u.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=xm.bind(s),o.addEventListener("load",u),o.addEventListener("error",u))}}var _v=0;function RL(s,o){return s.stylesheets&&s.count===0&&Nm(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var c=setTimeout(function(){if(s.stylesheets&&Nm(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+o);0<s.imgBytes&&_v===0&&(_v=62500*lL());var p=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Nm(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>_v?50:800)+o);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function xm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Dm=null;function Nm(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Dm=new Map,o.forEach(xL,s),Dm=null,xm.call(s))}function xL(s,o){if(!(o.state.loading&4)){var u=Dm.get(s);if(u)var c=u.get(null);else{u=new Map,Dm.set(s,u);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var E=p[y];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(u.set(E.dataset.precedence,E),c=E)}c&&u.set(null,c)}p=o.instance,E=p.getAttribute("data-precedence"),y=u.get(E)||c,y===c&&u.set(null,p),u.set(E,p),this.count++,c=xm.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),y?y.parentNode.insertBefore(p,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),o.state.loading|=4}}var gh={$$typeof:k,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function DL(s,o,u,c,p,y,E,b,O){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ls(0),this.hiddenUpdates=ls(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function O1(s,o,u,c,p,y,E,b,O,$,Z,ie){return s=new DL(s,o,u,E,O,$,Z,ie,b),o=1,y===!0&&(o|=24),y=Zn(3,null,null,o),s.current=y,y.stateNode=s,o=Xy(),o.refCount++,s.pooledCache=o,o.refCount++,y.memoizedState={element:c,isDehydrated:u,cache:o},t_(y),s}function V1(s){return s?(s=Rl,s):Rl}function k1(s,o,u,c,p,y){p=V1(p),c.context===null?c.context=p:c.pendingContext=p,c=Gr(o),c.payload={element:u},y=y===void 0?null:y,y!==null&&(c.callback=y),u=Kr(s,c,o),u!==null&&(Hn(u,s,o),Yc(u,s,o))}function L1(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function vv(s,o){L1(s,o),(s=s.alternate)&&L1(s,o)}function U1(s){if(s.tag===13||s.tag===31){var o=oa(s,67108864);o!==null&&Hn(o,s,67108864),vv(s,67108864)}}function F1(s){if(s.tag===13||s.tag===31){var o=si();o=Yo(o);var u=oa(s,o);u!==null&&Hn(u,s,o),vv(s,o)}}var Pm=!0;function NL(s,o,u,c){var p=te.T;te.T=null;var y=ae.p;try{ae.p=2,Tv(s,o,u,c)}finally{ae.p=y,te.T=p}}function PL(s,o,u,c){var p=te.T;te.T=null;var y=ae.p;try{ae.p=8,Tv(s,o,u,c)}finally{ae.p=y,te.T=p}}function Tv(s,o,u,c){if(Pm){var p=Ev(c);if(p===null)ov(s,o,c,Mm,u),z1(s,c);else if(OL(p,s,o,u,c))c.stopPropagation();else if(z1(s,c),o&4&&-1<ML.indexOf(s)){for(;p!==null;){var y=di(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var E=os(y.pendingLanes);if(E!==0){var b=y;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var O=1<<31-Mt(E);b.entanglements[1]|=O,E&=~O}As(y),(Je&6)===0&&(pm=Dn()+500,ch(0))}}break;case 31:case 13:b=oa(y,2),b!==null&&Hn(b,y,2),ym(),vv(y,2)}if(y=Ev(c),y===null&&ov(s,o,c,Mm,u),y===p)break;p=y}p!==null&&c.stopPropagation()}else ov(s,o,c,null,u)}}function Ev(s){return s=mi(s),Sv(s)}var Mm=null;function Sv(s){if(Mm=null,s=hs(s),s!==null){var o=a(s);if(o===null)s=null;else{var u=o.tag;if(u===13){if(s=l(o),s!==null)return s;s=null}else if(u===31){if(s=h(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Mm=s,null}function B1(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ho()){case vc:return 2;case Tc:return 8;case Dr:case Ry:return 32;case hd:return 268435456;default:return 32}default:return 32}}var wv=!1,io=null,so=null,ro=null,yh=new Map,_h=new Map,oo=[],ML="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function z1(s,o){switch(s){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":ro=null;break;case"pointerover":case"pointerout":yh.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":_h.delete(o.pointerId)}}function vh(s,o,u,c,p,y){return s===null||s.nativeEvent!==y?(s={blockedOn:o,domEventName:u,eventSystemFlags:c,nativeEvent:y,targetContainers:[p]},o!==null&&(o=di(o),o!==null&&U1(o)),s):(s.eventSystemFlags|=c,o=s.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),s)}function OL(s,o,u,c,p){switch(o){case"focusin":return io=vh(io,s,o,u,c,p),!0;case"dragenter":return so=vh(so,s,o,u,c,p),!0;case"mouseover":return ro=vh(ro,s,o,u,c,p),!0;case"pointerover":var y=p.pointerId;return yh.set(y,vh(yh.get(y)||null,s,o,u,c,p)),!0;case"gotpointercapture":return y=p.pointerId,_h.set(y,vh(_h.get(y)||null,s,o,u,c,p)),!0}return!1}function j1(s){var o=hs(s.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){s.blockedOn=o,ki(s.priority,function(){F1(u)});return}}else if(o===31){if(o=h(u),o!==null){s.blockedOn=o,ki(s.priority,function(){F1(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Om(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=Ev(s.nativeEvent);if(u===null){u=s.nativeEvent;var c=new u.constructor(u.type,u);Pc=c,u.target.dispatchEvent(c),Pc=null}else return o=di(u),o!==null&&U1(o),s.blockedOn=u,!1;o.shift()}return!0}function q1(s,o,u){Om(s)&&u.delete(o)}function VL(){wv=!1,io!==null&&Om(io)&&(io=null),so!==null&&Om(so)&&(so=null),ro!==null&&Om(ro)&&(ro=null),yh.forEach(q1),_h.forEach(q1)}function Vm(s,o){s.blockedOn===o&&(s.blockedOn=null,wv||(wv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,VL)))}var km=null;function H1(s){km!==s&&(km=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){km===s&&(km=null);for(var o=0;o<s.length;o+=3){var u=s[o],c=s[o+1],p=s[o+2];if(typeof c!="function"){if(Sv(c||u)===null)continue;break}var y=di(u);y!==null&&(s.splice(o,3),o-=3,E_(y,{pending:!0,data:p,method:u.method,action:c},c,p))}}))}function Jl(s){function o(O){return Vm(O,s)}io!==null&&Vm(io,s),so!==null&&Vm(so,s),ro!==null&&Vm(ro,s),yh.forEach(o),_h.forEach(o);for(var u=0;u<oo.length;u++){var c=oo[u];c.blockedOn===s&&(c.blockedOn=null)}for(;0<oo.length&&(u=oo[0],u.blockedOn===null);)j1(u),u.blockedOn===null&&oo.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(c=0;c<u.length;c+=3){var p=u[c],y=u[c+1],E=p[on]||null;if(typeof y=="function")E||H1(u);else if(E){var b=null;if(y&&y.hasAttribute("formAction")){if(p=y,E=y[on]||null)b=E.formAction;else if(Sv(p)!==null)continue}else b=E.action;typeof b=="function"?u[c+1]=b:(u.splice(c,3),c-=3),H1(u)}}}function G1(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(E){return p=E})},focusReset:"manual",scroll:"manual"})}function o(){p!==null&&(p(),p=null),c||setTimeout(u,20)}function u(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),p!==null&&(p(),p=null)}}}function bv(s){this._internalRoot=s}Lm.prototype.render=bv.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,c=si();k1(u,c,s,o,null,null)},Lm.prototype.unmount=bv.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;k1(s.current,2,null,s,null,null),ym(),o[us]=null}};function Lm(s){this._internalRoot=s}Lm.prototype.unstable_scheduleHydration=function(s){if(s){var o=yd();s={blockedOn:null,target:s,priority:o};for(var u=0;u<oo.length&&o!==0&&o<oo[u].priority;u++);oo.splice(u,0,s),u===0&&j1(s)}};var K1=e.version;if(K1!=="19.2.0")throw Error(i(527,K1,"19.2.0"));ae.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(o),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var kL={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Um=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Um.isDisabled&&Um.supportsFiber)try{Oi=Um.inject(kL),dn=Um}catch{}}return Eh.createRoot=function(s,o){if(!r(s))throw Error(i(299));var u=!1,c="",p=Zb,y=eA,E=tA;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),o=O1(s,1,!1,null,null,u,c,null,p,y,E,G1),s[us]=o.current,rv(s),new bv(o)},Eh.hydrateRoot=function(s,o,u){if(!r(s))throw Error(i(299));var c=!1,p="",y=Zb,E=eA,b=tA,O=null;return u!=null&&(u.unstable_strictMode===!0&&(c=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(b=u.onRecoverableError),u.formState!==void 0&&(O=u.formState)),o=O1(s,1,!0,o,u??null,c,p,O,y,E,b,G1),o.context=V1(null),u=o.current,c=si(),c=Yo(c),p=Gr(c),p.callback=null,Kr(u,p,c),u=c,o.current.lanes=u,Ko(o,u),As(o),s[us]=o.current,rv(s),new Lm(o)},Eh.version="19.2.0",Eh}var nC;function $L(){if(nC)return Iv.exports;nC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Iv.exports=KL(),Iv.exports}var YL=$L();const WL=Ng(YL);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var iC="popstate";function QL(n={}){function e(i,r){let{pathname:a,search:l,hash:h}=i.location;return C0("",{pathname:a,search:l,hash:h},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:uf(r)}return JL(e,t,null,n)}function Jt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ts(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XL(){return Math.random().toString(36).substring(2,10)}function sC(n,e){return{usr:n.state,key:n.key,idx:e}}function C0(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Bf(e):e,state:t,key:e&&e.key||i||XL()}}function uf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Bf(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function JL(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,l=r.history,h="POP",f=null,d=g();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function g(){return(l.state||{idx:null}).idx}function _(){h="POP";let D=g(),F=D==null?null:D-d;d=D,f&&f({action:h,location:N.location,delta:F})}function T(D,F){h="PUSH";let z=C0(N.location,D,F);d=g()+1;let k=sC(z,d),ee=N.createHref(z);try{l.pushState(k,"",ee)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;r.location.assign(ee)}a&&f&&f({action:h,location:N.location,delta:1})}function w(D,F){h="REPLACE";let z=C0(N.location,D,F);d=g();let k=sC(z,d),ee=N.createHref(z);l.replaceState(k,"",ee),a&&f&&f({action:h,location:N.location,delta:0})}function R(D){return ZL(D)}let N={get action(){return h},get location(){return n(r,l)},listen(D){if(f)throw new Error("A history only accepts one active listener");return r.addEventListener(iC,_),f=D,()=>{r.removeEventListener(iC,_),f=null}},createHref(D){return e(r,D)},createURL:R,encodeLocation(D){let F=R(D);return{pathname:F.pathname,search:F.search,hash:F.hash}},push:T,replace:w,go(D){return l.go(D)}};return N}function ZL(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Jt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:uf(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function _x(n,e,t="/"){return e4(n,e,t,!1)}function e4(n,e,t,i){let r=typeof e=="string"?Bf(e):e,a=mr(r.pathname||"/",t);if(a==null)return null;let l=vx(n);t4(l);let h=null;for(let f=0;h==null&&f<l.length;++f){let d=f4(a);h=c4(l[f],d,i)}return h}function vx(n,e=[],t=[],i="",r=!1){let a=(l,h,f=r,d)=>{let g={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&f)return;Jt(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let _=cr([i,g.relativePath]),T=t.concat(g);l.children&&l.children.length>0&&(Jt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),vx(l.children,e,T,_,f)),!(l.path==null&&!l.index)&&e.push({path:_,score:l4(_,l.index),routesMeta:T})};return n.forEach((l,h)=>{if(l.path===""||!l.path?.includes("?"))a(l,h);else for(let f of Tx(l.path))a(l,h,!0,f)}),e}function Tx(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let l=Tx(i.join("/")),h=[];return h.push(...l.map(f=>f===""?a:[a,f].join("/"))),r&&h.push(...l),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function t4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:u4(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var n4=/^:[\w-]+$/,i4=3,s4=2,r4=1,o4=10,a4=-2,rC=n=>n==="*";function l4(n,e){let t=n.split("/"),i=t.length;return t.some(rC)&&(i+=a4),e&&(i+=s4),t.filter(r=>!rC(r)).reduce((r,a)=>r+(n4.test(a)?i4:a===""?r4:o4),i)}function u4(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function c4(n,e,t=!1){let{routesMeta:i}=n,r={},a="/",l=[];for(let h=0;h<i.length;++h){let f=i[h],d=h===i.length-1,g=a==="/"?e:e.slice(a.length)||"/",_=Rp({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},g),T=f.route;if(!_&&d&&t&&!i[i.length-1].route.index&&(_=Rp({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!_)return null;Object.assign(r,_.params),l.push({params:r,pathname:cr([a,_.pathname]),pathnameBase:g4(cr([a,_.pathnameBase])),route:T}),_.pathnameBase!=="/"&&(a=cr([a,_.pathnameBase]))}return l}function Rp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=h4(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let a=r[0],l=a.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:i.reduce((d,{paramName:g,isOptional:_},T)=>{if(g==="*"){let R=h[T]||"";l=a.slice(0,a.length-R.length).replace(/(.)\/+$/,"$1")}const w=h[T];return _&&!w?d[g]=void 0:d[g]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:l,pattern:n}}function h4(n,e=!1,t=!0){ts(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function f4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ts(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function mr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function d4(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Bf(n):n;return{pathname:t?t.startsWith("/")?t:m4(t,e):e,search:y4(i),hash:_4(r)}}function m4(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Nv(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function p4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function YT(n){let e=p4(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function WT(n,e,t,i=!1){let r;typeof n=="string"?r=Bf(n):(r={...n},Jt(!r.pathname||!r.pathname.includes("?"),Nv("?","pathname","search",r)),Jt(!r.pathname||!r.pathname.includes("#"),Nv("#","pathname","hash",r)),Jt(!r.search||!r.search.includes("#"),Nv("#","search","hash",r)));let a=n===""||r.pathname==="",l=a?"/":r.pathname,h;if(l==null)h=t;else{let _=e.length-1;if(!i&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),_-=1;r.pathname=T.join("/")}h=_>=0?e[_]:"/"}let f=d4(r,h),d=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(d||g)&&(f.pathname+="/"),f}var cr=n=>n.join("/").replace(/\/\/+/g,"/"),g4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),y4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,_4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function v4(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Ex=["POST","PUT","PATCH","DELETE"];new Set(Ex);var T4=["GET",...Ex];new Set(T4);var nc=M.createContext(null);nc.displayName="DataRouter";var Mg=M.createContext(null);Mg.displayName="DataRouterState";M.createContext(!1);var Sx=M.createContext({isTransitioning:!1});Sx.displayName="ViewTransition";var E4=M.createContext(new Map);E4.displayName="Fetchers";var S4=M.createContext(null);S4.displayName="Await";var ns=M.createContext(null);ns.displayName="Navigation";var Og=M.createContext(null);Og.displayName="Location";var is=M.createContext({outlet:null,matches:[],isDataRoute:!1});is.displayName="Route";var QT=M.createContext(null);QT.displayName="RouteError";function w4(n,{relative:e}={}){Jt(ic(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=M.useContext(ns),{hash:r,pathname:a,search:l}=zf(n,{relative:e}),h=a;return t!=="/"&&(h=a==="/"?t:cr([t,a])),i.createHref({pathname:h,search:l,hash:r})}function ic(){return M.useContext(Og)!=null}function Cr(){return Jt(ic(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Og).location}var wx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bx(n){M.useContext(ns).static||M.useLayoutEffect(n)}function Ax(){let{isDataRoute:n}=M.useContext(is);return n?U4():b4()}function b4(){Jt(ic(),"useNavigate() may be used only in the context of a <Router> component.");let n=M.useContext(nc),{basename:e,navigator:t}=M.useContext(ns),{matches:i}=M.useContext(is),{pathname:r}=Cr(),a=JSON.stringify(YT(i)),l=M.useRef(!1);return bx(()=>{l.current=!0}),M.useCallback((f,d={})=>{if(ts(l.current,wx),!l.current)return;if(typeof f=="number"){t.go(f);return}let g=WT(f,JSON.parse(a),r,d.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:cr([e,g.pathname])),(d.replace?t.replace:t.push)(g,d.state,d)},[e,t,a,r,n])}var A4=M.createContext(null);function C4(n){let e=M.useContext(is).outlet;return M.useMemo(()=>e&&M.createElement(A4.Provider,{value:n},e),[e,n])}function zf(n,{relative:e}={}){let{matches:t}=M.useContext(is),{pathname:i}=Cr(),r=JSON.stringify(YT(t));return M.useMemo(()=>WT(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function I4(n,e){return Cx(n)}function Cx(n,e,t,i,r){Jt(ic(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=M.useContext(ns),{matches:l}=M.useContext(is),h=l[l.length-1],f=h?h.params:{},d=h?h.pathname:"/",g=h?h.pathnameBase:"/",_=h&&h.route;{let z=_&&_.path||"";Ix(d,!_||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let T=Cr(),w;w=T;let R=w.pathname||"/",N=R;if(g!=="/"){let z=g.replace(/^\//,"").split("/");N="/"+R.replace(/^\//,"").split("/").slice(z.length).join("/")}let D=_x(n,{pathname:N});return ts(_||D!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),ts(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),P4(D&&D.map(z=>Object.assign({},z,{params:Object.assign({},f,z.params),pathname:cr([g,a.encodeLocation?a.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:cr([g,a.encodeLocation?a.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),l,t,i,r)}function R4(){let n=L4(),e=v4(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:a},"ErrorBoundary")," or"," ",M.createElement("code",{style:a},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:r},t):null,l)}var x4=M.createElement(R4,null),D4=class extends M.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?M.createElement(is.Provider,{value:this.props.routeContext},M.createElement(QT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function N4({routeContext:n,match:e,children:t}){let i=M.useContext(nc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(is.Provider,{value:n},t)}function P4(n,e=[],t=null,i=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t?.errors;if(l!=null){let d=a.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);Jt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let h=!1,f=-1;if(t)for(let d=0;d<a.length;d++){let g=a[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=d),g.route.id){let{loaderData:_,errors:T}=t,w=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!T||T[g.route.id]===void 0);if(g.route.lazy||w){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((d,g,_)=>{let T,w=!1,R=null,N=null;t&&(T=l&&g.route.id?l[g.route.id]:void 0,R=g.route.errorElement||x4,h&&(f<0&&_===0?(Ix("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,N=null):f===_&&(w=!0,N=g.route.hydrateFallbackElement||null)));let D=e.concat(a.slice(0,_+1)),F=()=>{let z;return T?z=R:w?z=N:g.route.Component?z=M.createElement(g.route.Component,null):g.route.element?z=g.route.element:z=d,M.createElement(N4,{match:g,routeContext:{outlet:d,matches:D,isDataRoute:t!=null},children:z})};return t&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?M.createElement(D4,{location:t.location,revalidation:t.revalidation,component:R,error:T,children:F(),routeContext:{outlet:null,matches:D,isDataRoute:!0},unstable_onError:i}):F()},null)}function XT(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function M4(n){let e=M.useContext(nc);return Jt(e,XT(n)),e}function O4(n){let e=M.useContext(Mg);return Jt(e,XT(n)),e}function V4(n){let e=M.useContext(is);return Jt(e,XT(n)),e}function JT(n){let e=V4(n),t=e.matches[e.matches.length-1];return Jt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function k4(){return JT("useRouteId")}function L4(){let n=M.useContext(QT),e=O4("useRouteError"),t=JT("useRouteError");return n!==void 0?n:e.errors?.[t]}function U4(){let{router:n}=M4("useNavigate"),e=JT("useNavigate"),t=M.useRef(!1);return bx(()=>{t.current=!0}),M.useCallback(async(r,a={})=>{ts(t.current,wx),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...a}))},[n,e])}var oC={};function Ix(n,e,t){!e&&!oC[n]&&(oC[n]=!0,ts(!1,t))}M.memo(F4);function F4({routes:n,future:e,state:t,unstable_onError:i}){return Cx(n,void 0,t,i,e)}function aC({to:n,replace:e,state:t,relative:i}){Jt(ic(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=M.useContext(ns);ts(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=M.useContext(is),{pathname:l}=Cr(),h=Ax(),f=WT(n,YT(a),l,i==="path"),d=JSON.stringify(f);return M.useEffect(()=>{h(JSON.parse(d),{replace:e,state:t,relative:i})},[h,d,i,e,t]),null}function B4(n){return C4(n.context)}function z4({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:a=!1}){Jt(!ic(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),h=M.useMemo(()=>({basename:l,navigator:r,static:a,future:{}}),[l,r,a]);typeof t=="string"&&(t=Bf(t));let{pathname:f="/",search:d="",hash:g="",state:_=null,key:T="default"}=t,w=M.useMemo(()=>{let R=mr(f,l);return R==null?null:{location:{pathname:R,search:d,hash:g,state:_,key:T},navigationType:i}},[l,f,d,g,_,T,i]);return ts(w!=null,`<Router basename="${l}"> is not able to match the URL "${f}${d}${g}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:M.createElement(ns.Provider,{value:h},M.createElement(Og.Provider,{children:e,value:w}))}var sp="get",rp="application/x-www-form-urlencoded";function Vg(n){return n!=null&&typeof n.tagName=="string"}function j4(n){return Vg(n)&&n.tagName.toLowerCase()==="button"}function q4(n){return Vg(n)&&n.tagName.toLowerCase()==="form"}function H4(n){return Vg(n)&&n.tagName.toLowerCase()==="input"}function G4(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function K4(n,e){return n.button===0&&(!e||e==="_self")&&!G4(n)}var Fm=null;function $4(){if(Fm===null)try{new FormData(document.createElement("form"),0),Fm=!1}catch{Fm=!0}return Fm}var Y4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Pv(n){return n!=null&&!Y4.has(n)?(ts(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rp}"`),null):n}function W4(n,e){let t,i,r,a,l;if(q4(n)){let h=n.getAttribute("action");i=h?mr(h,e):null,t=n.getAttribute("method")||sp,r=Pv(n.getAttribute("enctype"))||rp,a=new FormData(n)}else if(j4(n)||H4(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(i=f?mr(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||sp,r=Pv(n.getAttribute("formenctype"))||Pv(h.getAttribute("enctype"))||rp,a=new FormData(h,n),!$4()){let{name:d,type:g,value:_}=n;if(g==="image"){let T=d?`${d}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else d&&a.append(d,_)}}else{if(Vg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=sp,i=null,r=rp,l=n}return a&&r==="text/plain"&&(l=a,a=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ZT(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Q4(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&mr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function X4(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function J4(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Z4(n,e,t){let i=await Promise.all(n.map(async r=>{let a=e.routes[r.route.id];if(a){let l=await X4(a,t);return l.links?l.links():[]}return[]}));return i3(i.flat(1).filter(J4).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function lC(n,e,t,i,r,a){let l=(f,d)=>t[d]?f.route.id!==t[d].route.id:!0,h=(f,d)=>t[d].pathname!==f.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==f.params["*"];return a==="assets"?e.filter((f,d)=>l(f,d)||h(f,d)):a==="data"?e.filter((f,d)=>{let g=i.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(l(f,d)||h(f,d))return!0;if(f.route.shouldRevalidate){let _=f.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function e3(n,e,{includeHydrateFallback:t}={}){return t3(n.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function t3(n){return[...new Set(n)]}function n3(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function i3(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let a=JSON.stringify(n3(r));return t.has(a)||(t.add(a),i.push({key:a,link:r})),i},[])}function Rx(){let n=M.useContext(nc);return ZT(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function s3(){let n=M.useContext(Mg);return ZT(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var eE=M.createContext(void 0);eE.displayName="FrameworkContext";function xx(){let n=M.useContext(eE);return ZT(n,"You must render this element inside a <HydratedRouter> element"),n}function r3(n,e){let t=M.useContext(eE),[i,r]=M.useState(!1),[a,l]=M.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:d,onMouseLeave:g,onTouchStart:_}=e,T=M.useRef(null);M.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let N=F=>{F.forEach(z=>{l(z.isIntersecting)})},D=new IntersectionObserver(N,{threshold:.5});return T.current&&D.observe(T.current),()=>{D.disconnect()}}},[n]),M.useEffect(()=>{if(i){let N=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(N)}}},[i]);let w=()=>{r(!0)},R=()=>{r(!1),l(!1)};return t?n!=="intent"?[a,T,{}]:[a,T,{onFocus:Sh(h,w),onBlur:Sh(f,R),onMouseEnter:Sh(d,w),onMouseLeave:Sh(g,R),onTouchStart:Sh(_,w)}]:[!1,T,{}]}function Sh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function o3({page:n,...e}){let{router:t}=Rx(),i=M.useMemo(()=>_x(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?M.createElement(l3,{page:n,matches:i,...e}):null}function a3(n){let{manifest:e,routeModules:t}=xx(),[i,r]=M.useState([]);return M.useEffect(()=>{let a=!1;return Z4(n,e,t).then(l=>{a||r(l)}),()=>{a=!0}},[n,e,t]),i}function l3({page:n,matches:e,...t}){let i=Cr(),{manifest:r,routeModules:a}=xx(),{basename:l}=Rx(),{loaderData:h,matches:f}=s3(),d=M.useMemo(()=>lC(n,e,f,r,i,"data"),[n,e,f,r,i]),g=M.useMemo(()=>lC(n,e,f,r,i,"assets"),[n,e,f,r,i]),_=M.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let R=new Set,N=!1;if(e.forEach(F=>{let z=r.routes[F.route.id];!z||!z.hasLoader||(!d.some(k=>k.route.id===F.route.id)&&F.route.id in h&&a[F.route.id]?.shouldRevalidate||z.hasClientLoader?N=!0:R.add(F.route.id))}),R.size===0)return[];let D=Q4(n,l,"data");return N&&R.size>0&&D.searchParams.set("_routes",e.filter(F=>R.has(F.route.id)).map(F=>F.route.id).join(",")),[D.pathname+D.search]},[l,h,i,r,d,e,n,a]),T=M.useMemo(()=>e3(g,r),[g,r]),w=a3(g);return M.createElement(M.Fragment,null,_.map(R=>M.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...t})),T.map(R=>M.createElement("link",{key:R,rel:"modulepreload",href:R,...t})),w.map(({key:R,link:N})=>M.createElement("link",{key:R,nonce:t.nonce,...N})))}function u3(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Dx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Dx&&(window.__reactRouterVersion="7.9.4")}catch{}function c3({basename:n,children:e,window:t}){let i=M.useRef();i.current==null&&(i.current=QL({window:t,v5Compat:!0}));let r=i.current,[a,l]=M.useState({action:r.action,location:r.location}),h=M.useCallback(f=>{M.startTransition(()=>l(f))},[l]);return M.useLayoutEffect(()=>r.listen(h),[r,h]),M.createElement(z4,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:r})}var Nx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tE=M.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:a,replace:l,state:h,target:f,to:d,preventScrollReset:g,viewTransition:_,...T},w){let{basename:R}=M.useContext(ns),N=typeof d=="string"&&Nx.test(d),D,F=!1;if(typeof d=="string"&&N&&(D=d,Dx))try{let x=new URL(window.location.href),L=d.startsWith("//")?new URL(x.protocol+d):new URL(d),V=mr(L.pathname,R);L.origin===x.origin&&V!=null?d=V+L.search+L.hash:F=!0}catch{ts(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=w4(d,{relative:r}),[k,ee,X]=r3(i,T),re=d3(d,{replace:l,state:h,target:f,preventScrollReset:g,relative:r,viewTransition:_});function I(x){e&&e(x),x.defaultPrevented||re(x)}let A=M.createElement("a",{...T,...X,href:D||z,onClick:F||a?e:I,ref:u3(w,ee),target:f,"data-discover":!N&&t==="render"?"true":void 0});return k&&!N?M.createElement(M.Fragment,null,A,M.createElement(o3,{page:z})):A});tE.displayName="Link";var au=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:a,to:l,viewTransition:h,children:f,...d},g){let _=zf(l,{relative:d.relative}),T=Cr(),w=M.useContext(Mg),{navigator:R,basename:N}=M.useContext(ns),D=w!=null&&_3(_)&&h===!0,F=R.encodeLocation?R.encodeLocation(_).pathname:_.pathname,z=T.pathname,k=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(z=z.toLowerCase(),k=k?k.toLowerCase():null,F=F.toLowerCase()),k&&N&&(k=mr(k,N)||k);const ee=F!=="/"&&F.endsWith("/")?F.length-1:F.length;let X=z===F||!r&&z.startsWith(F)&&z.charAt(ee)==="/",re=k!=null&&(k===F||!r&&k.startsWith(F)&&k.charAt(F.length)==="/"),I={isActive:X,isPending:re,isTransitioning:D},A=X?e:void 0,x;typeof i=="function"?x=i(I):x=[i,X?"active":null,re?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(I):a;return M.createElement(tE,{...d,"aria-current":A,className:x,ref:g,style:L,to:l,viewTransition:h},typeof f=="function"?f(I):f)});au.displayName="NavLink";var h3=M.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:a,method:l=sp,action:h,onSubmit:f,relative:d,preventScrollReset:g,viewTransition:_,...T},w)=>{let R=g3(),N=y3(h,{relative:d}),D=l.toLowerCase()==="get"?"get":"post",F=typeof h=="string"&&Nx.test(h),z=k=>{if(f&&f(k),k.defaultPrevented)return;k.preventDefault();let ee=k.nativeEvent.submitter,X=ee?.getAttribute("formmethod")||l;R(ee||k.currentTarget,{fetcherKey:e,method:X,navigate:t,replace:r,state:a,relative:d,preventScrollReset:g,viewTransition:_})};return M.createElement("form",{ref:w,method:D,action:N,onSubmit:i?f:z,...T,"data-discover":!F&&n==="render"?"true":void 0})});h3.displayName="Form";function f3(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Px(n){let e=M.useContext(nc);return Jt(e,f3(n)),e}function d3(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:a,viewTransition:l}={}){let h=Ax(),f=Cr(),d=zf(n,{relative:a});return M.useCallback(g=>{if(K4(g,e)){g.preventDefault();let _=t!==void 0?t:uf(f)===uf(d);h(n,{replace:_,state:i,preventScrollReset:r,relative:a,viewTransition:l})}},[f,h,d,t,i,e,n,r,a,l])}var m3=0,p3=()=>`__${String(++m3)}__`;function g3(){let{router:n}=Px("useSubmit"),{basename:e}=M.useContext(ns),t=k4();return M.useCallback(async(i,r={})=>{let{action:a,method:l,encType:h,formData:f,body:d}=W4(i,e);if(r.navigate===!1){let g=r.fetcherKey||p3();await n.fetch(g,t,r.action||a,{preventScrollReset:r.preventScrollReset,formData:f,body:d,formMethod:r.method||l,formEncType:r.encType||h,flushSync:r.flushSync})}else await n.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:f,body:d,formMethod:r.method||l,formEncType:r.encType||h,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function y3(n,{relative:e}={}){let{basename:t}=M.useContext(ns),i=M.useContext(is);Jt(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...zf(n||".",{relative:e})},l=Cr();if(n==null){a.search=l.search;let h=new URLSearchParams(a.search),f=h.getAll("index");if(f.some(g=>g==="")){h.delete("index"),f.filter(_=>_).forEach(_=>h.append("index",_));let g=h.toString();a.search=g?`?${g}`:""}}return(!n||n===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:cr([t,a.pathname])),uf(a)}function _3(n,{relative:e}={}){let t=M.useContext(Sx);Jt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Px("useViewTransitionState"),r=zf(n,{relative:e});if(!t.isTransitioning)return!1;let a=mr(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=mr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Rp(r.pathname,l)!=null||Rp(r.pathname,a)!=null}const v3=()=>W.jsx("div",{children:"Prihod"}),T3=()=>W.jsx("div",{children:"Groups"});var Mv={exports:{}},Ov={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uC;function E3(){if(uC)return Ov;uC=1;var n=Pg();function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,r=n.useRef,a=n.useEffect,l=n.useMemo,h=n.useDebugValue;return Ov.useSyncExternalStoreWithSelector=function(f,d,g,_,T){var w=r(null);if(w.current===null){var R={hasValue:!1,value:null};w.current=R}else R=w.current;w=l(function(){function D(X){if(!F){if(F=!0,z=X,X=_(X),T!==void 0&&R.hasValue){var re=R.value;if(T(re,X))return k=re}return k=X}if(re=k,t(z,X))return re;var I=_(X);return T!==void 0&&T(re,I)?(z=X,re):(z=X,k=I)}var F=!1,z,k,ee=g===void 0?null:g;return[function(){return D(d())},ee===null?void 0:function(){return D(ee())}]},[d,g,_,T]);var N=i(f,w[0],w[1]);return a(function(){R.hasValue=!0,R.value=N},[N]),h(N),N},Ov}var cC;function S3(){return cC||(cC=1,Mv.exports=E3()),Mv.exports}var w3=S3();function b3(n){n()}function A3(){let n=null,e=null;return{clear(){n=null,e=null},notify(){b3(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const r=e={callback:t,next:null,prev:e};return r.prev?r.prev.next=r:n=r,function(){!i||n===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:n=r.next)}}}}var hC={notify(){},get:()=>[]};function C3(n,e){let t,i=hC,r=0,a=!1;function l(N){g();const D=i.subscribe(N);let F=!1;return()=>{F||(F=!0,D(),_())}}function h(){i.notify()}function f(){R.onStateChange&&R.onStateChange()}function d(){return a}function g(){r++,t||(t=n.subscribe(f),i=A3())}function _(){r--,t&&r===0&&(t(),t=void 0,i.clear(),i=hC)}function T(){a||(a=!0,g())}function w(){a&&(a=!1,_())}const R={addNestedSub:l,notifyNestedSubs:h,handleChangeWrapper:f,isSubscribed:d,trySubscribe:T,tryUnsubscribe:w,getListeners:()=>i};return R}var I3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",R3=I3(),x3=()=>typeof navigator<"u"&&navigator.product==="ReactNative",D3=x3(),N3=()=>R3||D3?M.useLayoutEffect:M.useEffect,P3=N3(),M3=Symbol.for("react-redux-context"),O3=typeof globalThis<"u"?globalThis:{};function V3(){if(!M.createContext)return{};const n=O3[M3]??=new Map;let e=n.get(M.createContext);return e||(e=M.createContext(null),n.set(M.createContext,e)),e}var Co=V3();function k3(n){const{children:e,context:t,serverState:i,store:r}=n,a=M.useMemo(()=>{const f=C3(r);return{store:r,subscription:f,getServerState:i?()=>i:void 0}},[r,i]),l=M.useMemo(()=>r.getState(),[r]);P3(()=>{const{subscription:f}=a;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==r.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[a,l]);const h=t||Co;return M.createElement(h.Provider,{value:a},e)}var L3=k3;function nE(n=Co){return function(){return M.useContext(n)}}var Mx=nE();function Ox(n=Co){const e=n===Co?Mx:nE(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var U3=Ox();function F3(n=Co){const e=n===Co?U3:Ox(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var B3=F3(),z3=(n,e)=>n===e;function j3(n=Co){const e=n===Co?Mx:nE(n),t=(i,r={})=>{const{equalityFn:a=z3}=typeof r=="function"?{equalityFn:r}:r,l=e(),{store:h,subscription:f,getServerState:d}=l;M.useRef(!0);const g=M.useCallback({[i.name](T){return i(T)}}[i.name],[i]),_=w3.useSyncExternalStoreWithSelector(f.addNestedSub,h.getState,d||h.getState,g,a);return M.useDebugValue(_),_};return Object.assign(t,{withTypes:()=>t}),t}var q3=j3();const Vx=()=>B3(),Vv=q3.withTypes();function vn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var H3=typeof Symbol=="function"&&Symbol.observable||"@@observable",fC=H3,kv=()=>Math.random().toString(36).substring(7).split("").join("."),G3={INIT:`@@redux/INIT${kv()}`,REPLACE:`@@redux/REPLACE${kv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${kv()}`},xp=G3;function iE(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function kx(n,e,t){if(typeof n!="function")throw new Error(vn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(vn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(vn(1));return t(kx)(n,e)}let i=n,r=e,a=new Map,l=a,h=0,f=!1;function d(){l===a&&(l=new Map,a.forEach((D,F)=>{l.set(F,D)}))}function g(){if(f)throw new Error(vn(3));return r}function _(D){if(typeof D!="function")throw new Error(vn(4));if(f)throw new Error(vn(5));let F=!0;d();const z=h++;return l.set(z,D),function(){if(F){if(f)throw new Error(vn(6));F=!1,d(),l.delete(z),a=null}}}function T(D){if(!iE(D))throw new Error(vn(7));if(typeof D.type>"u")throw new Error(vn(8));if(typeof D.type!="string")throw new Error(vn(17));if(f)throw new Error(vn(9));try{f=!0,r=i(r,D)}finally{f=!1}return(a=l).forEach(z=>{z()}),D}function w(D){if(typeof D!="function")throw new Error(vn(10));i=D,T({type:xp.REPLACE})}function R(){const D=_;return{subscribe(F){if(typeof F!="object"||F===null)throw new Error(vn(11));function z(){const ee=F;ee.next&&ee.next(g())}return z(),{unsubscribe:D(z)}},[fC](){return this}}}return T({type:xp.INIT}),{dispatch:T,subscribe:_,getState:g,replaceReducer:w,[fC]:R}}function K3(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:xp.INIT})>"u")throw new Error(vn(12));if(typeof t(void 0,{type:xp.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(vn(13))})}function $3(n){const e=Object.keys(n),t={};for(let a=0;a<e.length;a++){const l=e[a];typeof n[l]=="function"&&(t[l]=n[l])}const i=Object.keys(t);let r;try{K3(t)}catch(a){r=a}return function(l={},h){if(r)throw r;let f=!1;const d={};for(let g=0;g<i.length;g++){const _=i[g],T=t[_],w=l[_],R=T(w,h);if(typeof R>"u")throw h&&h.type,new Error(vn(14));d[_]=R,f=f||R!==w}return f=f||i.length!==Object.keys(l).length,f?d:l}}function Dp(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function Y3(...n){return e=>(t,i)=>{const r=e(t,i);let a=()=>{throw new Error(vn(15))};const l={getState:r.getState,dispatch:(f,...d)=>a(f,...d)},h=n.map(f=>f(l));return a=Dp(...h)(r.dispatch),{...r,dispatch:a}}}function W3(n){return iE(n)&&"type"in n&&typeof n.type=="string"}var Lx=Symbol.for("immer-nothing"),dC=Symbol.for("immer-draftable"),ui=Symbol.for("immer-state");function Wi(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Pu=Object.getPrototypeOf;function ja(n){return!!n&&!!n[ui]}function pr(n){return n?Ux(n)||Array.isArray(n)||!!n[dC]||!!n.constructor?.[dC]||jf(n)||Lg(n):!1}var Q3=Object.prototype.constructor.toString();function Ux(n){if(!n||typeof n!="object")return!1;const e=Pu(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===Q3}function Np(n,e){kg(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,i)=>e(i,t,n))}function kg(n){const e=n[ui];return e?e.type_:Array.isArray(n)?1:jf(n)?2:Lg(n)?3:0}function I0(n,e){return kg(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function Fx(n,e,t){const i=kg(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function X3(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function jf(n){return n instanceof Map}function Lg(n){return n instanceof Set}function Ea(n){return n.copy_||n.base_}function R0(n,e){if(jf(n))return new Map(n);if(Lg(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=Ux(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[ui];let r=Reflect.ownKeys(i);for(let a=0;a<r.length;a++){const l=r[a],h=i[l];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(i[l]={configurable:!0,writable:!0,enumerable:h.enumerable,value:n[l]})}return Object.create(Pu(n),i)}else{const i=Pu(n);if(i!==null&&t)return{...n};const r=Object.create(i);return Object.assign(r,n)}}function sE(n,e=!1){return Ug(n)||ja(n)||!pr(n)||(kg(n)>1&&Object.defineProperties(n,{set:{value:Bm},add:{value:Bm},clear:{value:Bm},delete:{value:Bm}}),Object.freeze(n),e&&Object.values(n).forEach(t=>sE(t,!0))),n}function Bm(){Wi(2)}function Ug(n){return Object.isFrozen(n)}var J3={};function qa(n){const e=J3[n];return e||Wi(0,n),e}var cf;function Bx(){return cf}function Z3(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function mC(n,e){e&&(qa("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function x0(n){D0(n),n.drafts_.forEach(e6),n.drafts_=null}function D0(n){n===cf&&(cf=n.parent_)}function pC(n){return cf=Z3(cf,n)}function e6(n){const e=n[ui];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function gC(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[ui].modified_&&(x0(e),Wi(4)),pr(n)&&(n=Pp(e,n),e.parent_||Mp(e,n)),e.patches_&&qa("Patches").generateReplacementPatches_(t[ui].base_,n,e.patches_,e.inversePatches_)):n=Pp(e,t,[]),x0(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==Lx?n:void 0}function Pp(n,e,t){if(Ug(e))return e;const i=e[ui];if(!i)return Np(e,(r,a)=>yC(n,i,e,r,a,t)),e;if(i.scope_!==n)return e;if(!i.modified_)return Mp(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const r=i.copy_;let a=r,l=!1;i.type_===3&&(a=new Set(r),r.clear(),l=!0),Np(a,(h,f)=>yC(n,i,r,h,f,t,l)),Mp(n,r,!1),t&&n.patches_&&qa("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function yC(n,e,t,i,r,a,l){if(ja(r)){const h=a&&e&&e.type_!==3&&!I0(e.assigned_,i)?a.concat(i):void 0,f=Pp(n,r,h);if(Fx(t,i,f),ja(f))n.canAutoFreeze_=!1;else return}else l&&t.add(r);if(pr(r)&&!Ug(r)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;Pp(n,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(jf(t)?t.has(i):Object.prototype.propertyIsEnumerable.call(t,i))&&Mp(n,r)}}function Mp(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&sE(e,t)}function t6(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:Bx(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,a=rE;t&&(r=[i],a=hf);const{revoke:l,proxy:h}=Proxy.revocable(r,a);return i.draft_=h,i.revoke_=l,h}var rE={get(n,e){if(e===ui)return n;const t=Ea(n);if(!I0(t,e))return n6(n,t,e);const i=t[e];return n.finalized_||!pr(i)?i:i===Lv(n.base_,e)?(Uv(n),n.copy_[e]=P0(i,n)):i},has(n,e){return e in Ea(n)},ownKeys(n){return Reflect.ownKeys(Ea(n))},set(n,e,t){const i=zx(Ea(n),e);if(i?.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const r=Lv(Ea(n),e),a=r?.[ui];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(X3(t,r)&&(t!==void 0||I0(n.base_,e)))return!0;Uv(n),N0(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return Lv(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,Uv(n),N0(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=Ea(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){Wi(11)},getPrototypeOf(n){return Pu(n.base_)},setPrototypeOf(){Wi(12)}},hf={};Np(rE,(n,e)=>{hf[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});hf.deleteProperty=function(n,e){return hf.set.call(this,n,e,void 0)};hf.set=function(n,e,t){return rE.set.call(this,n[0],e,t,n[0])};function Lv(n,e){const t=n[ui];return(t?Ea(t):n)[e]}function n6(n,e,t){const i=zx(e,t);return i?"value"in i?i.value:i.get?.call(n.draft_):void 0}function zx(n,e){if(!(e in n))return;let t=Pu(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Pu(t)}}function N0(n){n.modified_||(n.modified_=!0,n.parent_&&N0(n.parent_))}function Uv(n){n.copy_||(n.copy_=R0(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var i6=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const l=this;return function(f=a,...d){return l.produce(f,g=>t.call(this,g,...d))}}typeof t!="function"&&Wi(6),i!==void 0&&typeof i!="function"&&Wi(7);let r;if(pr(e)){const a=pC(this),l=P0(e,void 0);let h=!0;try{r=t(l),h=!1}finally{h?x0(a):D0(a)}return mC(a,i),gC(r,a)}else if(!e||typeof e!="object"){if(r=t(e),r===void 0&&(r=e),r===Lx&&(r=void 0),this.autoFreeze_&&sE(r,!0),i){const a=[],l=[];qa("Patches").generateReplacementPatches_(e,r,a,l),i(a,l)}return r}else Wi(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(l,...h)=>this.produceWithPatches(l,f=>e(f,...h));let i,r;return[this.produce(e,t,(l,h)=>{i=l,r=h}),i,r]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){pr(n)||Wi(8),ja(n)&&(n=s6(n));const e=pC(this),t=P0(n,void 0);return t[ui].isManual_=!0,D0(e),t}finishDraft(n,e){const t=n&&n[ui];(!t||!t.isManual_)&&Wi(9);const{scope_:i}=t;return mC(i,e),gC(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const r=e[t];if(r.path.length===0&&r.op==="replace"){n=r.value;break}}t>-1&&(e=e.slice(t+1));const i=qa("Patches").applyPatches_;return ja(n)?i(n,e):this.produce(n,r=>i(r,e))}};function P0(n,e){const t=jf(n)?qa("MapSet").proxyMap_(n,e):Lg(n)?qa("MapSet").proxySet_(n,e):t6(n,e);return(e?e.scope_:Bx()).drafts_.push(t),t}function s6(n){return ja(n)||Wi(10,n),jx(n)}function jx(n){if(!pr(n)||Ug(n))return n;const e=n[ui];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=R0(n,e.scope_.immer_.useStrictShallowCopy_)}else t=R0(n,!0);return Np(t,(i,r)=>{Fx(t,i,jx(r))}),e&&(e.finalized_=!1),t}var r6=new i6,qx=r6.produce;function Hx(n){return({dispatch:t,getState:i})=>r=>a=>typeof a=="function"?a(t,i,n):r(a)}var o6=Hx(),a6=Hx,l6=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Dp:Dp.apply(null,arguments)},u6=n=>n&&typeof n.match=="function";function zh(n,e){function t(...i){if(e){let r=e(...i);if(!r)throw new Error(hr(0));return{type:n,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>W3(i)&&i.type===n,t}var Gx=class Mh extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Mh.prototype)}static get[Symbol.species](){return Mh}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Mh(...e[0].concat(this)):new Mh(...e.concat(this))}};function _C(n){return pr(n)?qx(n,()=>{}):n}function zm(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function c6(n){return typeof n=="boolean"}var h6=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=e??{};let l=new Gx;return t&&(c6(t)?l.push(o6):l.push(a6(t.extraArgument))),l},f6="RTK_autoBatch",vC=n=>e=>{setTimeout(e,n)},d6=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let r=!0,a=!1,l=!1;const h=new Set,f=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:vC(10):n.type==="callback"?n.queueNotification:vC(n.timeout),d=()=>{l=!1,a&&(a=!1,h.forEach(g=>g()))};return Object.assign({},i,{subscribe(g){const _=()=>r&&g(),T=i.subscribe(_);return h.add(g),()=>{T(),h.delete(g)}},dispatch(g){try{return r=!g?.meta?.[f6],a=!r,a&&(l||(l=!0,f(d))),i.dispatch(g)}finally{r=!0}}})},m6=n=>function(t){const{autoBatch:i=!0}=t??{};let r=new Gx(n);return i&&r.push(d6(typeof i=="object"?i:void 0)),r};function p6(n){const e=h6(),{reducer:t=void 0,middleware:i,devTools:r=!0,preloadedState:a=void 0,enhancers:l=void 0}=n||{};let h;if(typeof t=="function")h=t;else if(iE(t))h=$3(t);else throw new Error(hr(1));let f;typeof i=="function"?f=i(e):f=e();let d=Dp;r&&(d=l6({trace:!1,...typeof r=="object"&&r}));const g=Y3(...f),_=m6(g);let T=typeof l=="function"?l(_):_();const w=d(...T);return kx(h,a,w)}function Kx(n){const e={},t=[];let i;const r={addCase(a,l){const h=typeof a=="string"?a:a.type;if(!h)throw new Error(hr(28));if(h in e)throw new Error(hr(29));return e[h]=l,r},addAsyncThunk(a,l){return l.pending&&(e[a.pending.type]=l.pending),l.rejected&&(e[a.rejected.type]=l.rejected),l.fulfilled&&(e[a.fulfilled.type]=l.fulfilled),l.settled&&t.push({matcher:a.settled,reducer:l.settled}),r},addMatcher(a,l){return t.push({matcher:a,reducer:l}),r},addDefaultCase(a){return i=a,r}};return n(r),[e,t,i]}function g6(n){return typeof n=="function"}function y6(n,e){let[t,i,r]=Kx(e),a;if(g6(n))a=()=>_C(n());else{const h=_C(n);a=()=>h}function l(h=a(),f){let d=[t[f.type],...i.filter(({matcher:g})=>g(f)).map(({reducer:g})=>g)];return d.filter(g=>!!g).length===0&&(d=[r]),d.reduce((g,_)=>{if(_)if(ja(g)){const w=_(g,f);return w===void 0?g:w}else{if(pr(g))return qx(g,T=>_(T,f));{const T=_(g,f);if(T===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return T}}return g},h)}return l.getInitialState=a,l}var _6=(n,e)=>u6(n)?n.match(e):n(e);function v6(...n){return e=>n.some(t=>_6(t,e))}var T6="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",E6=(n=21)=>{let e="",t=n;for(;t--;)e+=T6[Math.random()*64|0];return e},S6=["name","message","stack","code"],Fv=class{constructor(n,e){this.payload=n,this.meta=e}_type},TC=class{constructor(n,e){this.payload=n,this.meta=e}_type},w6=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of S6)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},EC="External signal was aborted",b6=(()=>{function n(e,t,i){const r=zh(e+"/fulfilled",(f,d,g,_)=>({payload:f,meta:{..._||{},arg:g,requestId:d,requestStatus:"fulfilled"}})),a=zh(e+"/pending",(f,d,g)=>({payload:void 0,meta:{...g||{},arg:d,requestId:f,requestStatus:"pending"}})),l=zh(e+"/rejected",(f,d,g,_,T)=>({payload:_,error:(i&&i.serializeError||w6)(f||"Rejected"),meta:{...T||{},arg:g,requestId:d,rejectedWithValue:!!_,requestStatus:"rejected",aborted:f?.name==="AbortError",condition:f?.name==="ConditionError"}}));function h(f,{signal:d}={}){return(g,_,T)=>{const w=i?.idGenerator?i.idGenerator(f):E6(),R=new AbortController;let N,D;function F(k){D=k,R.abort()}d&&(d.aborted?F(EC):d.addEventListener("abort",()=>F(EC),{once:!0}));const z=(async function(){let k;try{let X=i?.condition?.(f,{getState:_,extra:T});if(C6(X)&&(X=await X),X===!1||R.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const re=new Promise((I,A)=>{N=()=>{A({name:"AbortError",message:D||"Aborted"})},R.signal.addEventListener("abort",N)});g(a(w,f,i?.getPendingMeta?.({requestId:w,arg:f},{getState:_,extra:T}))),k=await Promise.race([re,Promise.resolve(t(f,{dispatch:g,getState:_,extra:T,requestId:w,signal:R.signal,abort:F,rejectWithValue:(I,A)=>new Fv(I,A),fulfillWithValue:(I,A)=>new TC(I,A)})).then(I=>{if(I instanceof Fv)throw I;return I instanceof TC?r(I.payload,w,f,I.meta):r(I,w,f)})])}catch(X){k=X instanceof Fv?l(null,w,f,X.payload,X.meta):l(X,w,f)}finally{N&&R.signal.removeEventListener("abort",N)}return i&&!i.dispatchConditionRejection&&l.match(k)&&k.meta.condition||g(k),k})();return Object.assign(z,{abort:F,requestId:w,arg:f,unwrap(){return z.then(A6)}})}}return Object.assign(h,{pending:a,rejected:l,fulfilled:r,settled:v6(l,r),typePrefix:e})}return n.withTypes=()=>n,n})();function A6(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function C6(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var $x=Symbol.for("rtk-slice-createasyncthunk"),I6={[$x]:b6};function R6(n,e){return`${n}/${e}`}function x6({creators:n}={}){const e=n?.asyncThunk?.[$x];return function(i){const{name:r,reducerPath:a=r}=i;if(!r)throw new Error(hr(11));const l=(typeof i.reducers=="function"?i.reducers(N6()):i.reducers)||{},h=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(k,ee){const X=typeof k=="string"?k:k.type;if(!X)throw new Error(hr(12));if(X in f.sliceCaseReducersByType)throw new Error(hr(13));return f.sliceCaseReducersByType[X]=ee,d},addMatcher(k,ee){return f.sliceMatchers.push({matcher:k,reducer:ee}),d},exposeAction(k,ee){return f.actionCreators[k]=ee,d},exposeCaseReducer(k,ee){return f.sliceCaseReducersByName[k]=ee,d}};h.forEach(k=>{const ee=l[k],X={reducerName:k,type:R6(r,k),createNotation:typeof i.reducers=="function"};M6(ee)?V6(X,ee,d,e):P6(X,ee,d)});function g(){const[k={},ee=[],X=void 0]=typeof i.extraReducers=="function"?Kx(i.extraReducers):[i.extraReducers],re={...k,...f.sliceCaseReducersByType};return y6(i.initialState,I=>{for(let A in re)I.addCase(A,re[A]);for(let A of f.sliceMatchers)I.addMatcher(A.matcher,A.reducer);for(let A of ee)I.addMatcher(A.matcher,A.reducer);X&&I.addDefaultCase(X)})}const _=k=>k,T=new Map,w=new WeakMap;let R;function N(k,ee){return R||(R=g()),R(k,ee)}function D(){return R||(R=g()),R.getInitialState()}function F(k,ee=!1){function X(I){let A=I[k];return typeof A>"u"&&ee&&(A=zm(w,X,D)),A}function re(I=_){const A=zm(T,ee,()=>new WeakMap);return zm(A,I,()=>{const x={};for(const[L,V]of Object.entries(i.selectors??{}))x[L]=D6(V,I,()=>zm(w,I,D),ee);return x})}return{reducerPath:k,getSelectors:re,get selectors(){return re(X)},selectSlice:X}}const z={name:r,reducer:N,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:D,...F(a),injectInto(k,{reducerPath:ee,...X}={}){const re=ee??a;return k.inject({reducerPath:re,reducer:N},X),{...z,...F(re,!0)}}};return z}}function D6(n,e,t,i){function r(a,...l){let h=e(a);return typeof h>"u"&&i&&(h=t()),n(h,...l)}return r.unwrapped=n,r}function N6(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function P6({type:n,reducerName:e,createNotation:t},i,r){let a,l;if("reducer"in i){if(t&&!O6(i))throw new Error(hr(17));a=i.reducer,l=i.prepare}else a=i;r.addCase(n,a).exposeCaseReducer(e,a).exposeAction(e,l?zh(n,l):zh(n))}function M6(n){return n._reducerDefinitionType==="asyncThunk"}function O6(n){return n._reducerDefinitionType==="reducerWithPrepare"}function V6({type:n,reducerName:e},t,i,r){if(!r)throw new Error(hr(18));const{payloadCreator:a,fulfilled:l,pending:h,rejected:f,settled:d,options:g}=t,_=r(n,a,g);i.exposeAction(e,_),l&&i.addCase(_.fulfilled,l),h&&i.addCase(_.pending,h),f&&i.addCase(_.rejected,f),d&&i.addMatcher(_.settled,d),i.exposeCaseReducer(e,{fulfilled:l||jm,pending:h||jm,rejected:f||jm,settled:d||jm})}function jm(){}function hr(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const Yx=x6({creators:{asyncThunk:I6}}),k6=()=>{};var SC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue=function(n,e){if(!n)throw sc(e)},sc=function(n){return new Error("Firebase Database ("+Wx.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},L6=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],l=n[t++],h=n[t++],f=((r&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|l&63)}}return e.join("")},oE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],l=r+1<n.length,h=l?n[r+1]:0,f=r+2<n.length,d=f?n[r+2]:0,g=a>>2,_=(a&3)<<4|h>>4;let T=(h&15)<<2|d>>6,w=d&63;f||(w=64,l||(T=64)),i.push(t[g],t[_],t[T],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Qx(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):L6(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],h=r<n.length?t[n.charAt(r)]:0;++r;const d=r<n.length?t[n.charAt(r)]:64;++r;const _=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||h==null||d==null||_==null)throw new U6;const T=a<<2|h>>4;if(i.push(T),d!==64){const w=h<<4&240|d>>2;if(i.push(w),_!==64){const R=d<<6&192|_;i.push(R)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class U6 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Xx=function(n){const e=Qx(n);return oE.encodeByteArray(e,!0)},Op=function(n){return Xx(n).replace(/\./g,"")},Vp=function(n){try{return oE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(n){return Jx(void 0,n)}function Jx(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!B6(t)||(n[t]=Jx(n[t],e[t]));return n}function B6(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6=()=>Zx().__FIREBASE_DEFAULTS__,j6=()=>{if(typeof process>"u"||typeof SC>"u")return;const n=SC.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},q6=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Vp(n[1]);return e&&JSON.parse(e)},Fg=()=>{try{return k6()||z6()||j6()||q6()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},eD=n=>Fg()?.emulatorHosts?.[n],H6=n=>{const e=eD(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},tD=()=>Fg()?.config,nD=n=>Fg()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aE(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Op(JSON.stringify(t)),Op(JSON.stringify(l)),""].join(".")}const jh={};function K6(){const n={prod:[],emulator:[]};for(const e of Object.keys(jh))jh[e]?n.emulator.push(e):n.prod.push(e);return n}function $6(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let wC=!1;function iD(n,e){if(typeof window>"u"||typeof document>"u"||!Lo(window.location.host)||jh[n]===e||jh[n]||wC)return;jh[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=K6().prod.length>0;function l(){const T=document.getElementById(i);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,w){T.setAttribute("width","24"),T.setAttribute("id",w),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function d(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{wC=!0,l()},T}function g(T,w){T.setAttribute("id",w),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function _(){const T=$6(i),w=t("text"),R=document.getElementById(w)||document.createElement("span"),N=t("learnmore"),D=document.getElementById(N)||document.createElement("a"),F=t("preprendIcon"),z=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const k=T.element;h(k),g(D,N);const ee=d();f(z,F),k.append(z,R,D,ee),document.body.appendChild(k)}a?(R.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function sD(){const n=Fg()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Y6(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function W6(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Q6(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function X6(){return Wx.NODE_ADMIN===!0}function oD(){return!sD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aD(){return!sD()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function lD(){try{return typeof indexedDB=="object"}catch{return!1}}function J6(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6="FirebaseError";class Ir extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Z6,Object.setPrototypeOf(this,Ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qf.prototype.create)}}class qf{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],l=a?eU(a,i):"Error",h=`${this.serviceName}: ${l} (${r}).`;return new Ir(r,h,i)}}function eU(n,e){return n.replace(tU,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const tU=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(n){return JSON.parse(n)}function hn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=function(n){let e={},t={},i={},r="";try{const a=n.split(".");e=ff(Vp(a[0])||""),t=ff(Vp(a[1])||""),r=a[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}},nU=function(n){const e=uD(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},iU=function(n){const e=uD(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Mu(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function kp(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Lp(n,e,t){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function Io(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],l=e[r];if(bC(a)&&bC(l)){if(!Io(a,l))return!1}else if(a!==l)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function bC(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let _=0;_<16;_++)i[_]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let _=16;_<80;_++){const T=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(T<<1|T>>>31)&4294967295}let r=this.chain_[0],a=this.chain_[1],l=this.chain_[2],h=this.chain_[3],f=this.chain_[4],d,g;for(let _=0;_<80;_++){_<40?_<20?(d=h^a&(l^h),g=1518500249):(d=a^l^h,g=1859775393):_<60?(d=a&l|h&(a|l),g=2400959708):(d=a^l^h,g=3395469782);const T=(r<<5|r>>>27)+d+f+g+i[_]&4294967295;f=h,h=l,l=(a<<30|a>>>2)&4294967295,a=r,r=T}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let r=0;const a=this.buf_;let l=this.inbuf_;for(;r<t;){if(l===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(a[l]=e.charCodeAt(r),++l,++r,l===this.blockSize){this.compress_(a),l=0;break}}else for(;r<t;)if(a[l]=e[r],++l,++r,l===this.blockSize){this.compress_(a),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let a=24;a>=0;a-=8)e[i]=this.chain_[r]>>a&255,++i;return e}}function rU(n,e){const t=new oU(n,e);return t.subscribe.bind(t)}class oU{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");aU(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Bv),r.error===void 0&&(r.error=Bv),r.complete===void 0&&(r.complete=Bv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aU(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Bv(){}function Ou(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const a=r-55296;i++,ue(i<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(i)-56320;r=65536+(a<<10)+l}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Bg=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(n){return n&&n._delegate?n._delegate:n}class Ro{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uU=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new rr;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(hU(e))try{this.getOrInitializeService({instanceIdentifier:Sa})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=Sa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Sa){return this.instances.has(e)}getOptions(e=Sa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&l.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:cU(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Sa){return this.component?this.component.multipleInstances?e:Sa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function cU(n){return n===Sa?void 0:n}function hU(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new uU(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const dU={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},mU=ze.INFO,pU={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},gU=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=pU[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zg{constructor(e){this.name=e,this._logLevel=mU,this._logHandler=gU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?dU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const yU=(n,e)=>e.some(t=>n instanceof t);let AC,CC;function _U(){return AC||(AC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vU(){return CC||(CC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cD=new WeakMap,M0=new WeakMap,hD=new WeakMap,zv=new WeakMap,uE=new WeakMap;function TU(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(To(n.result)),r()},l=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&cD.set(t,n)}).catch(()=>{}),uE.set(e,n),e}function EU(n){if(M0.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),r()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});M0.set(n,e)}let O0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return M0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||hD.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return To(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function SU(n){O0=n(O0)}function wU(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(jv(this),e,...t);return hD.set(i,e.sort?e.sort():[e]),To(i)}:vU().includes(n)?function(...e){return n.apply(jv(this),e),To(cD.get(this))}:function(...e){return To(n.apply(jv(this),e))}}function bU(n){return typeof n=="function"?wU(n):(n instanceof IDBTransaction&&EU(n),yU(n,_U())?new Proxy(n,O0):n)}function To(n){if(n instanceof IDBRequest)return TU(n);if(zv.has(n))return zv.get(n);const e=bU(n);return e!==n&&(zv.set(n,e),uE.set(e,n)),e}const jv=n=>uE.get(n);function AU(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const l=indexedDB.open(n,e),h=To(l);return i&&l.addEventListener("upgradeneeded",f=>{i(To(l.result),f.oldVersion,f.newVersion,To(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),r&&f.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),h}const CU=["get","getKey","getAll","getAllKeys","count"],IU=["put","add","delete","clear"],qv=new Map;function IC(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(qv.get(e))return qv.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=IU.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||CU.includes(t)))return;const a=async function(l,...h){const f=this.transaction(l,r?"readwrite":"readonly");let d=f.store;return i&&(d=d.index(h.shift())),(await Promise.all([d[t](...h),r&&f.done]))[0]};return qv.set(e,a),a}SU(n=>({...n,get:(e,t,i)=>IC(e,t)||n.get(e,t,i),has:(e,t)=>!!IC(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xU(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function xU(n){return n.getComponent()?.type==="VERSION"}const V0="@firebase/app",RC="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new zg("@firebase/app"),DU="@firebase/app-compat",NU="@firebase/analytics-compat",PU="@firebase/analytics",MU="@firebase/app-check-compat",OU="@firebase/app-check",VU="@firebase/auth",kU="@firebase/auth-compat",LU="@firebase/database",UU="@firebase/data-connect",FU="@firebase/database-compat",BU="@firebase/functions",zU="@firebase/functions-compat",jU="@firebase/installations",qU="@firebase/installations-compat",HU="@firebase/messaging",GU="@firebase/messaging-compat",KU="@firebase/performance",$U="@firebase/performance-compat",YU="@firebase/remote-config",WU="@firebase/remote-config-compat",QU="@firebase/storage",XU="@firebase/storage-compat",JU="@firebase/firestore",ZU="@firebase/ai",e5="@firebase/firestore-compat",t5="firebase",n5="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="[DEFAULT]",i5={[V0]:"fire-core",[DU]:"fire-core-compat",[PU]:"fire-analytics",[NU]:"fire-analytics-compat",[OU]:"fire-app-check",[MU]:"fire-app-check-compat",[VU]:"fire-auth",[kU]:"fire-auth-compat",[LU]:"fire-rtdb",[UU]:"fire-data-connect",[FU]:"fire-rtdb-compat",[BU]:"fire-fn",[zU]:"fire-fn-compat",[jU]:"fire-iid",[qU]:"fire-iid-compat",[HU]:"fire-fcm",[GU]:"fire-fcm-compat",[KU]:"fire-perf",[$U]:"fire-perf-compat",[YU]:"fire-rc",[WU]:"fire-rc-compat",[QU]:"fire-gcs",[XU]:"fire-gcs-compat",[JU]:"fire-fst",[e5]:"fire-fst-compat",[ZU]:"fire-vertex","fire-js":"fire-js",[t5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up=new Map,s5=new Map,L0=new Map;function xC(n,e){try{n.container.addComponent(e)}catch(t){gr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ha(n){const e=n.name;if(L0.has(e))return gr.debug(`There were multiple attempts to register component ${e}.`),!1;L0.set(e,n);for(const t of Up.values())xC(t,n);for(const t of s5.values())xC(t,n);return!0}function jg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Qi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Eo=new qf("app","Firebase",r5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ro("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Eo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=n5;function fD(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:k0,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Eo.create("bad-app-name",{appName:String(r)});if(t||(t=tD()),!t)throw Eo.create("no-options");const a=Up.get(r);if(a){if(Io(t,a.options)&&Io(i,a.config))return a;throw Eo.create("duplicate-app",{appName:r})}const l=new fU(r);for(const f of L0.values())l.addComponent(f);const h=new o5(t,i,l);return Up.set(r,h),h}function dD(n=k0){const e=Up.get(n);if(!e&&n===k0&&tD())return fD();if(!e)throw Eo.create("no-app",{appName:n});return e}function Ns(n,e,t){let i=i5[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const l=[`Unable to register library "${i}" with version "${e}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gr.warn(l.join(" "));return}Ha(new Ro(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5="firebase-heartbeat-database",l5=1,df="firebase-heartbeat-store";let Hv=null;function mD(){return Hv||(Hv=AU(a5,l5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(df)}catch(t){console.warn(t)}}}}).catch(n=>{throw Eo.create("idb-open",{originalErrorMessage:n.message})})),Hv}async function u5(n){try{const t=(await mD()).transaction(df),i=await t.objectStore(df).get(pD(n));return await t.done,i}catch(e){if(e instanceof Ir)gr.warn(e.message);else{const t=Eo.create("idb-get",{originalErrorMessage:e?.message});gr.warn(t.message)}}}async function DC(n,e){try{const i=(await mD()).transaction(df,"readwrite");await i.objectStore(df).put(e,pD(n)),await i.done}catch(t){if(t instanceof Ir)gr.warn(t.message);else{const i=Eo.create("idb-set",{originalErrorMessage:t?.message});gr.warn(i.message)}}}function pD(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5=1024,h5=30;class f5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new m5(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=NC();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>h5){const r=p5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){gr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=NC(),{heartbeatsToSend:t,unsentEntries:i}=d5(this._heartbeatsCache.heartbeats),r=Op(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return gr.warn(e),""}}}function NC(){return new Date().toISOString().substring(0,10)}function d5(n,e=c5){const t=[];let i=n.slice();for(const r of n){const a=t.find(l=>l.agent===r.agent);if(a){if(a.dates.push(r.date),PC(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),PC(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class m5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lD()?J6().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await u5(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return DC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return DC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function PC(n){return Op(JSON.stringify({version:2,heartbeats:n})).length}function p5(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(n){Ha(new Ro("platform-logger",e=>new RU(e),"PRIVATE")),Ha(new Ro("heartbeat",e=>new f5(e),"PRIVATE")),Ns(V0,RC,n),Ns(V0,RC,"esm2020"),Ns("fire-js","")}g5("");var MC={};const OC="@firebase/database",VC="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gD="";function y5(n){gD=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),hn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:ff(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Fs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _5(e)}}catch{}return new v5},Na=yD("localStorage"),T5=yD("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu=new zg("@firebase/database"),E5=(function(){let n=1;return function(){return n++}})(),_D=function(n){const e=lU(n),t=new sU;t.update(e);const i=t.digest();return oE.encodeByteArray(i)},Hf=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Hf.apply(null,i):typeof i=="object"?e+=hn(i):e+=i,e+=" "}return e};let qh=null,kC=!0;const S5=function(n,e){ue(!0,"Can't turn on custom loggers persistently."),Tu.logLevel=ze.VERBOSE,qh=Tu.log.bind(Tu)},Sn=function(...n){if(kC===!0&&(kC=!1,qh===null&&T5.get("logging_enabled")===!0&&S5()),qh){const e=Hf.apply(null,n);qh(e)}},Gf=function(n){return function(...e){Sn(n,...e)}},U0=function(...n){const e="FIREBASE INTERNAL ERROR: "+Hf(...n);Tu.error(e)},yr=function(...n){const e=`FIREBASE FATAL ERROR: ${Hf(...n)}`;throw Tu.error(e),new Error(e)},Wn=function(...n){const e="FIREBASE WARNING: "+Hf(...n);Tu.warn(e)},w5=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Wn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},qg=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},b5=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Vu="[MIN_NAME]",Ga="[MAX_NAME]",sl=function(n,e){if(n===e)return 0;if(n===Vu||e===Ga)return-1;if(e===Vu||n===Ga)return 1;{const t=LC(n),i=LC(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},A5=function(n,e){return n===e?0:n<e?-1:1},wh=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+hn(e))},cE=function(n){if(typeof n!="object"||n===null)return hn(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=hn(e[i]),t+=":",t+=cE(n[e[i]]);return t+="}",t},vD=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const TD=function(n){ue(!qg(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let r,a,l,h,f;n===0?(a=0,l=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),a=h+i,l=Math.round(n*Math.pow(2,t-h)-Math.pow(2,t))):(a=0,l=Math.round(n/Math.pow(2,1-i-t))));const d=[];for(f=t;f;f-=1)d.push(l%2?1:0),l=Math.floor(l/2);for(f=e;f;f-=1)d.push(a%2?1:0),a=Math.floor(a/2);d.push(r?1:0),d.reverse();const g=d.join("");let _="";for(f=0;f<64;f+=8){let T=parseInt(g.substr(f,8),2).toString(16);T.length===1&&(T="0"+T),_=_+T}return _.toLowerCase()},C5=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},I5=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function R5(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const x5=new RegExp("^-?(0*)\\d{1,10}$"),D5=-2147483648,N5=2147483647,LC=function(n){if(x5.test(n)){const e=Number(n);if(e>=D5&&e<=N5)return e}return null},oc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Wn("Exception was thrown by user callback.",t),e},Math.floor(0))}},P5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Hh=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Qi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Wn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Sn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wn(e)}}class op{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}op.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="5",ED="v",SD="s",wD="r",bD="f",AD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,CD="ls",ID="p",F0="ac",RD="websocket",xD="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,t,i,r,a=!1,l="",h=!1,f=!1,d=null){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=f,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Na.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Na.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function V5(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function ND(n,e,t){ue(typeof e=="string","typeof type must == string"),ue(typeof t=="object","typeof params must == object");let i;if(e===RD)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===xD)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);V5(n)&&(t.ns=n.namespace);const r=[];return xn(t,(a,l)=>{r.push(a+"="+l)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(){this.counters_={}}incrementCounter(e,t=1){Fs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return F6(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv={},Kv={};function fE(n){const e=n.toString();return Gv[e]||(Gv[e]=new k5),Gv[e]}function L5(n,e){const t=n.toString();return Kv[t]||(Kv[t]=e()),Kv[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&oc(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="start",F5="close",B5="pLPCommand",z5="pRTLPCB",PD="id",MD="pw",OD="ser",j5="cb",q5="seg",H5="ts",G5="d",K5="dframe",VD=1870,kD=30,$5=VD-kD,Y5=25e3,W5=3e4;class du{constructor(e,t,i,r,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gf(e),this.stats_=fE(t),this.urlFn=f=>(this.appCheckToken&&(f[F0]=this.appCheckToken),ND(t,xD,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new U5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(W5)),b5(()=>{if(this.isClosed_)return;this.scriptTagHolder=new dE((...a)=>{const[l,h,f,d,g]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===UC)this.id=h,this.password=f;else if(l===F5)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const i={};i[UC]="t",i[OD]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[j5]=this.scriptTagHolder.uniqueCallbackIdentifier),i[ED]=hE,this.transportSessionId&&(i[SD]=this.transportSessionId),this.lastSessionId&&(i[CD]=this.lastSessionId),this.applicationId&&(i[ID]=this.applicationId),this.appCheckToken&&(i[F0]=this.appCheckToken),typeof location<"u"&&location.hostname&&AD.test(location.hostname)&&(i[wD]=bD);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){du.forceAllow_=!0}static forceDisallow(){du.forceDisallow_=!0}static isAvailable(){return du.forceAllow_?!0:!du.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!C5()&&!I5()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=hn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=Xx(t),r=vD(i,$5);for(let a=0;a<r.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[K5]="t",i[PD]=e,i[MD]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=hn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class dE{constructor(e,t,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=E5(),window[B5+this.uniqueCallbackIdentifier]=e,window[z5+this.uniqueCallbackIdentifier]=t,this.myIFrame=dE.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Sn("frame writing exception"),h.stack&&Sn(h.stack),Sn(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Sn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[PD]=this.myID,e[MD]=this.myPW,e[OD]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+kD+i.length<=VD;){const l=this.pendingSegs.shift();i=i+"&"+q5+r+"="+l.seg+"&"+H5+r+"="+l.ts+"&"+G5+r+"="+l.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(Y5)),a=()=>{clearTimeout(r),i()};this.addTag(e,a)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Sn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q5=16384,X5=45e3;let Fp=null;typeof MozWebSocket<"u"?Fp=MozWebSocket:typeof WebSocket<"u"&&(Fp=WebSocket);class Xi{constructor(e,t,i,r,a,l,h){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gf(this.connId),this.stats_=fE(t),this.connURL=Xi.connectionURL_(t,l,h,r,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,r,a){const l={};return l[ED]=hE,typeof location<"u"&&location.hostname&&AD.test(location.hostname)&&(l[wD]=bD),t&&(l[SD]=t),i&&(l[CD]=i),r&&(l[F0]=r),a&&(l[ID]=a),ND(e,RD,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Na.set("previous_websocket_failure",!0);try{let i;X6(),this.mySock=new Fp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Xi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Fp!==null&&!Xi.forceDisallow_}static previouslyFailed(){return Na.isInMemoryStorage||Na.get("previous_websocket_failure")===!0}markConnectionHealthy(){Na.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=ff(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ue(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=hn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=vD(t,Q5);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(X5))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Xi.responsesRequiredToBeHealthy=2;Xi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{static get ALL_TRANSPORTS(){return[du,Xi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Xi&&Xi.isAvailable();let i=t&&!Xi.previouslyFailed();if(e.webSocketOnly&&(t||Wn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Xi];else{const r=this.transports_=[];for(const a of mf.ALL_TRANSPORTS)a&&a.isAvailable()&&r.push(a);mf.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}mf.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=6e4,Z5=5e3,e9=10*1024,t9=100*1024,$v="t",FC="d",n9="s",BC="r",i9="e",zC="o",jC="a",qC="n",HC="p",s9="h";class r9{constructor(e,t,i,r,a,l,h,f,d,g){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=f,this.onKill_=d,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gf("c:"+this.id+":"),this.transportManager_=new mf(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Hh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>t9?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>e9?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if($v in e){const t=e[$v];t===jC?this.upgradeIfSecondaryHealthy_():t===BC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===zC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=wh("t",e),i=wh("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:HC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:jC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:qC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=wh("t",e),i=wh("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=wh($v,e);if(FC in e){const i=e[FC];if(t===s9){const r={...i};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===qC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===n9?this.onConnectionShutdown_(i):t===BC?this.onReset_(i):t===i9?U0("Server Error: "+i):t===zC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):U0("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),hE!==i&&Wn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Hh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(J5))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Hh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Z5))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:HC,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Na.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.allowedEvents_=e,this.listeners_={},ue(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let a=0;a<r.length;a++)if(r[a].callback===t&&(!i||i===r[a].context)){r.splice(a,1);return}}validateEventType_(e){ue(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp extends UD{static getInstance(){return new Bp}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!lE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ue(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=32,KC=768;class at{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ze(){return new at("")}function Ve(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function xo(n){return n.pieces_.length-n.pieceNum_}function pt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new at(n.pieces_,e)}function mE(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function o9(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function pf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function FD(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new at(e,0)}function Ut(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof at)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new at(t,0)}function Le(n){return n.pieceNum_>=n.pieces_.length}function Kn(n,e){const t=Ve(n),i=Ve(e);if(t===null)return e;if(t===i)return Kn(pt(n),pt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function a9(n,e){const t=pf(n,0),i=pf(e,0);for(let r=0;r<t.length&&r<i.length;r++){const a=sl(t[r],i[r]);if(a!==0)return a}return t.length===i.length?0:t.length<i.length?-1:1}function pE(n,e){if(xo(n)!==xo(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Ri(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(xo(n)>xo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class l9{constructor(e,t){this.errorPrefix_=t,this.parts_=pf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Bg(this.parts_[i]);BD(this)}}function u9(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Bg(e),BD(n)}function c9(n){const e=n.parts_.pop();n.byteLength_-=Bg(e),n.parts_.length>0&&(n.byteLength_-=1)}function BD(n){if(n.byteLength_>KC)throw new Error(n.errorPrefix_+"has a key path longer than "+KC+" bytes ("+n.byteLength_+").");if(n.parts_.length>GC)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+GC+") or object contains a cycle "+wa(n))}function wa(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE extends UD{static getInstance(){return new gE}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return ue(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=1e3,h9=300*1e3,$C=30*1e3,f9=1.3,d9=3e4,m9="server_kill",YC=3;class fr extends LD{constructor(e,t,i,r,a,l,h,f){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=h,this.authOverride_=f,this.id=fr.nextPersistentConnectionId_++,this.log_=Gf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bh,this.maxReconnectDelay_=h9,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");gE.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Bp.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const r=++this.requestNumber_,a={r,a:e,b:t};this.log_(hn(a)),ue(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const t=new rr,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const h=l.d;l.s==="ok"?t.resolve(h):t.reject(h)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),t.promise}listen(e,t,i,r){this.initConnection_();const a=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ue(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const h={onComplete:r,hashFn:t,query:e,tag:i};this.listens.get(l).set(a,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+i+" for "+r);const a={p:i},l="q";e.tag&&(a.q=t._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(l,a,h=>{const f=h.d,d=h.s;fr.warnOnListenWarnings_(f,t),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",h),d!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(d,f))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Fs(e,"w")){const i=Mu(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',a=t._path.toString();Wn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||iU(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=$C)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=nU(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,r=>{const a=r.s,l=r.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,t)}sendUnlisten_(e,t,i,r){this.log_("Unlisten on "+e+" for "+t);const a={p:e},l="n";r&&(a.q=i,a.t=r),this.sendRequest(l,a)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,r){const a={p:t,d:i};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,l=>{r&&setTimeout(()=>{r(l.s,l.d)},Math.floor(0))})}put(e,t,i,r){this.putInternal("p",e,t,i,r)}merge(e,t,i,r){this.putInternal("m",e,t,i,r)}putInternal(e,t,i,r,a){this.initConnection_();const l={p:t,d:i};a!==void 0&&(l.h=a),this.outstandingPuts_.push({action:e,request:l,onComplete:r}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,a=>{this.log_(t+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(a.s,a.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const a=i.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+hn(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):U0("Unrecognized action received from server: "+hn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ue(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=bh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>d9&&(this.reconnectDelay_=bh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*f9)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+fr.nextConnectionId_++,a=this.lastSessionId;let l=!1,h=null;const f=function(){h?h.close():(l=!0,i())},d=function(_){ue(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(_)};this.realtime_={close:f,sendRequest:d};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,T]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);l?Sn("getToken() completed but was canceled"):(Sn("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=T&&T.token,h=new r9(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,w=>{Wn(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(m9)},a))}catch(_){this.log_("Failed to get token: "+_),l||(this.repoInfo_.nodeAdmin&&Wn(_),f())}}}interrupt(e){Sn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Sn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],kp(this.interruptReasons_)&&(this.reconnectDelay_=bh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(a=>cE(a)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const i=new at(e).toString();let r;if(this.listens.has(i)){const a=this.listens.get(i);r=a.get(t),a.delete(t),a.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,t){Sn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=YC&&(this.reconnectDelay_=$C,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Sn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=YC&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+gD.replace(/\./g,"-")]=1,lE()?e["framework.cordova"]=1:rD()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Bp.getInstance().currentlyOnline();return kp(this.interruptReasons_)&&e}}fr.nextPersistentConnectionId_=0;fr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ue(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Ue(Vu,e),r=new Ue(Vu,t);return this.compare(i,r)!==0}minPost(){return Ue.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qm;class zD extends Hg{static get __EMPTY_NODE(){return qm}static set __EMPTY_NODE(e){qm=e}compare(e,t){return sl(e.name,t.name)}isDefinedOn(e){throw sc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ue.MIN}maxPost(){return new Ue(Ga,qm)}makePost(e,t){return ue(typeof e=="string","KeyIndex indexValue must always be a string."),new Ue(e,qm)}toString(){return".key"}}const Eu=new zD;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hm=class{constructor(e,t,i,r,a=null){this.isReverse_=r,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?i(e.key,t):1,r&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ri=class Oh{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??Oh.RED,this.left=r??Rs.EMPTY_NODE,this.right=a??Rs.EMPTY_NODE}copy(e,t,i,r,a){return new Oh(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return a<0?r=r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r=r.copy(null,t,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Rs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,r;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Rs.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Oh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Oh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};ri.RED=!0;ri.BLACK=!1;class p9{copy(e,t,i,r,a){return this}insert(e,t,i){return new ri(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let Rs=class ap{constructor(e,t=ap.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ap(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ri.BLACK,null,null))}remove(e){return new ap(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ri.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Hm(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Hm(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Hm(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Hm(this.root_,null,this.comparator_,!0,e)}};Rs.EMPTY_NODE=new p9;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(n,e){return sl(n.name,e.name)}function yE(n,e){return sl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B0;function y9(n){B0=n}const jD=function(n){return typeof n=="number"?"number:"+TD(n):"string:"+n},qD=function(n){if(n.isLeafNode()){const e=n.val();ue(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Fs(e,".sv"),"Priority must be a string or number.")}else ue(n===B0||n.isEmpty(),"priority of unexpected type.");ue(n===B0||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WC;class un{static set __childrenNodeConstructor(e){WC=e}static get __childrenNodeConstructor(){return WC}constructor(e,t=un.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ue(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),qD(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new un(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:un.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Le(e)?this:Ve(e)===".priority"?this.priorityNode_:un.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:un.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Ve(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(ue(i!==".priority"||xo(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,un.__childrenNodeConstructor.EMPTY_NODE.updateChild(pt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+jD(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=TD(this.value_):e+=this.value_,this.lazyHash_=_D(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===un.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof un.__childrenNodeConstructor?-1:(ue(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,r=un.VALUE_TYPE_ORDER.indexOf(t),a=un.VALUE_TYPE_ORDER.indexOf(i);return ue(r>=0,"Unknown leaf type: "+t),ue(a>=0,"Unknown leaf type: "+i),r===a?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}un.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HD,GD;function _9(n){HD=n}function v9(n){GD=n}class T9 extends Hg{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),a=i.compareTo(r);return a===0?sl(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ue.MIN}maxPost(){return new Ue(Ga,new un("[PRIORITY-POST]",GD))}makePost(e,t){const i=HD(e);return new Ue(t,new un("[PRIORITY-POST]",i))}toString(){return".priority"}}const It=new T9;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E9=Math.log(2);class S9{constructor(e){const t=a=>parseInt(Math.log(a)/E9,10),i=a=>parseInt(Array(a+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const zp=function(n,e,t,i){n.sort(e);const r=function(f,d){const g=d-f;let _,T;if(g===0)return null;if(g===1)return _=n[f],T=t?t(_):_,new ri(T,_.node,ri.BLACK,null,null);{const w=parseInt(g/2,10)+f,R=r(f,w),N=r(w+1,d);return _=n[w],T=t?t(_):_,new ri(T,_.node,ri.BLACK,R,N)}},a=function(f){let d=null,g=null,_=n.length;const T=function(R,N){const D=_-R,F=_;_-=R;const z=r(D+1,F),k=n[D],ee=t?t(k):k;w(new ri(ee,k.node,N,null,z))},w=function(R){d?(d.left=R,d=R):(g=R,d=R)};for(let R=0;R<f.count;++R){const N=f.nextBitIsOne(),D=Math.pow(2,f.count-(R+1));N?T(D,ri.BLACK):(T(D,ri.BLACK),T(D,ri.RED))}return g},l=new S9(n.length),h=a(l);return new Rs(i||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yv;const Zl={};class or{static get Default(){return ue(Zl&&It,"ChildrenNode.ts has not been loaded"),Yv=Yv||new or({".priority":Zl},{".priority":It}),Yv}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Mu(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Rs?t:null}hasIndex(e){return Fs(this.indexSet_,e.toString())}addIndex(e,t){ue(e!==Eu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const a=t.getIterator(Ue.Wrap);let l=a.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=a.getNext();let h;r?h=zp(i,e.getCompare()):h=Zl;const f=e.toString(),d={...this.indexSet_};d[f]=e;const g={...this.indexes_};return g[f]=h,new or(g,d)}addToIndexes(e,t){const i=Lp(this.indexes_,(r,a)=>{const l=Mu(this.indexSet_,a);if(ue(l,"Missing index implementation for "+a),r===Zl)if(l.isDefinedOn(e.node)){const h=[],f=t.getIterator(Ue.Wrap);let d=f.getNext();for(;d;)d.name!==e.name&&h.push(d),d=f.getNext();return h.push(e),zp(h,l.getCompare())}else return Zl;else{const h=t.get(e.name);let f=r;return h&&(f=f.remove(new Ue(e.name,h))),f.insert(e,e.node)}});return new or(i,this.indexSet_)}removeFromIndexes(e,t){const i=Lp(this.indexes_,r=>{if(r===Zl)return r;{const a=t.get(e.name);return a?r.remove(new Ue(e.name,a)):r}});return new or(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ah;class be{static get EMPTY_NODE(){return Ah||(Ah=new be(new Rs(yE),null,or.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&qD(this.priorityNode_),this.children_.isEmpty()&&ue(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ah}updatePriority(e){return this.children_.isEmpty()?this:new be(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Ah:t}}getChild(e){const t=Ve(e);return t===null?this:this.getImmediateChild(t).getChild(pt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ue(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Ue(e,t);let r,a;t.isEmpty()?(r=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,t),a=this.indexMap_.addToIndexes(i,this.children_));const l=r.isEmpty()?Ah:this.priorityNode_;return new be(r,l,a)}}updateChild(e,t){const i=Ve(e);if(i===null)return t;{ue(Ve(e)!==".priority"||xo(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(pt(e),t);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,r=0,a=!0;if(this.forEachChild(It,(l,h)=>{t[l]=h.val(e),i++,a&&be.INTEGER_REGEXP_.test(l)?r=Math.max(r,Number(l)):a=!1}),!e&&a&&r<2*i){const l=[];for(const h in t)l[h]=t[h];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+jD(this.getPriority().val())+":"),this.forEachChild(It,(t,i)=>{const r=i.hash();r!==""&&(e+=":"+t+":"+r)}),this.lazyHash_=e===""?"":_D(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const r=this.resolveIndex_(i);if(r){const a=r.getPredecessorKey(new Ue(e,t));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ue(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ue(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>t(r.name,r.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Ue.Wrap);let a=r.peek();for(;a!=null&&t.compare(a,e)<0;)r.getNext(),a=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Ue.Wrap);let a=r.peek();for(;a!=null&&t.compare(a,e)>0;)r.getNext(),a=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Kf?-1:0}withIndex(e){if(e===Eu||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new be(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Eu||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(It),r=t.getIterator(It);let a=i.getNext(),l=r.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=i.getNext(),l=r.getNext()}return a===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===Eu?null:this.indexMap_.get(e.toString())}}be.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class w9 extends be{constructor(){super(new Rs(yE),be.EMPTY_NODE,or.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return be.EMPTY_NODE}isEmpty(){return!1}}const Kf=new w9;Object.defineProperties(Ue,{MIN:{value:new Ue(Vu,be.EMPTY_NODE)},MAX:{value:new Ue(Ga,Kf)}});zD.__EMPTY_NODE=be.EMPTY_NODE;un.__childrenNodeConstructor=be;y9(Kf);v9(Kf);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=!0;function Qt(n,e=null){if(n===null)return be.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ue(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new un(t,Qt(e))}if(!(n instanceof Array)&&b9){const t=[];let i=!1;if(xn(n,(l,h)=>{if(l.substring(0,1)!=="."){const f=Qt(h);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),t.push(new Ue(l,f)))}}),t.length===0)return be.EMPTY_NODE;const a=zp(t,g9,l=>l.name,yE);if(i){const l=zp(t,It.getCompare());return new be(a,Qt(e),new or({".priority":l},{".priority":It}))}else return new be(a,Qt(e),or.Default)}else{let t=be.EMPTY_NODE;return xn(n,(i,r)=>{if(Fs(n,i)&&i.substring(0,1)!=="."){const a=Qt(r);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(i,a))}}),t.updatePriority(Qt(e))}}_9(Qt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9 extends Hg{constructor(e){super(),this.indexPath_=e,ue(!Le(e)&&Ve(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),a=i.compareTo(r);return a===0?sl(e.name,t.name):a}makePost(e,t){const i=Qt(e),r=be.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ue(t,r)}maxPost(){const e=be.EMPTY_NODE.updateChild(this.indexPath_,Kf);return new Ue(Ga,e)}toString(){return pf(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C9 extends Hg{compare(e,t){const i=e.node.compareTo(t.node);return i===0?sl(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ue.MIN}maxPost(){return Ue.MAX}makePost(e,t){const i=Qt(e);return new Ue(t,i)}toString(){return".value"}}const I9=new C9;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(n){return{type:"value",snapshotNode:n}}function ku(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function gf(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function yf(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function R9(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.index_=e}updateChild(e,t,i,r,a,l){ue(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(r).equals(i.getChild(r))&&h.isEmpty()===i.isEmpty()||(l!=null&&(i.isEmpty()?e.hasChild(t)?l.trackChildChange(gf(t,h)):ue(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(ku(t,i)):l.trackChildChange(yf(t,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(It,(r,a)=>{t.hasChild(r)||i.trackChildChange(gf(r,a))}),t.isLeafNode()||t.forEachChild(It,(r,a)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(a)||i.trackChildChange(yf(r,a,l))}else i.trackChildChange(ku(r,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?be.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this.indexedFilter_=new _E(e.getIndex()),this.index_=e.getIndex(),this.startPost_=_f.getStartPost_(e),this.endPost_=_f.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,a,l){return this.matches(new Ue(t,i))||(i=be.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,a,l)}updateFullNode(e,t,i){t.isLeafNode()&&(t=be.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(be.EMPTY_NODE);const a=this;return t.forEachChild(It,(l,h)=>{a.matches(new Ue(l,h))||(r=r.updateImmediateChild(l,be.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new _f(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,a,l){return this.rangedFilter_.matches(new Ue(t,i))||(i=be.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,a,l):this.fullLimitUpdateChild_(e,t,i,a,l)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=be.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=be.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))r=r.updateImmediateChild(h.name,h.node),l++;else break;else continue}}else{r=t.withIndex(this.index_),r=r.updatePriority(be.EMPTY_NODE);let a;this.reverse_?a=r.getReverseIterator(this.index_):a=r.getIterator(this.index_);let l=0;for(;a.hasNext();){const h=a.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:r=r.updateImmediateChild(h.name,be.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,a){let l;if(this.reverse_){const _=this.index_.getCompare();l=(T,w)=>_(w,T)}else l=this.index_.getCompare();const h=e;ue(h.numChildren()===this.limit_,"");const f=new Ue(t,i),d=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),g=this.rangedFilter_.matches(f);if(h.hasChild(t)){const _=h.getImmediateChild(t);let T=r.getChildAfterChild(this.index_,d,this.reverse_);for(;T!=null&&(T.name===t||h.hasChild(T.name));)T=r.getChildAfterChild(this.index_,T,this.reverse_);const w=T==null?1:l(T,f);if(g&&!i.isEmpty()&&w>=0)return a?.trackChildChange(yf(t,i,_)),h.updateImmediateChild(t,i);{a?.trackChildChange(gf(t,_));const N=h.updateImmediateChild(t,be.EMPTY_NODE);return T!=null&&this.rangedFilter_.matches(T)?(a?.trackChildChange(ku(T.name,T.node)),N.updateImmediateChild(T.name,T.node)):N}}else return i.isEmpty()?e:g&&l(d,f)>=0?(a!=null&&(a.trackChildChange(gf(d.name,d.node)),a.trackChildChange(ku(t,i))),h.updateImmediateChild(t,i).updateImmediateChild(d.name,be.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=It}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ue(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ue(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Vu}hasEnd(){return this.endSet_}getIndexEndValue(){return ue(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ue(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ga}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ue(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===It}copy(){const e=new vE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function D9(n){return n.loadsAllData()?new _E(n.getIndex()):n.hasLimit()?new x9(n):new _f(n)}function QC(n){const e={};if(n.isDefault())return e;let t;if(n.index_===It?t="$priority":n.index_===I9?t="$value":n.index_===Eu?t="$key":(ue(n.index_ instanceof A9,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=hn(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=hn(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+hn(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=hn(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+hn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function XC(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==It&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends LD{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ue(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Gf("p:rest:"),this.listens_={}}listen(e,t,i,r){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=jp.getListenId_(e,i),h={};this.listens_[l]=h;const f=QC(e._queryParams);this.restRequest_(a+".json",f,(d,g)=>{let _=g;if(d===404&&(_=null,d=null),d===null&&this.onDataUpdate_(a,_,!1,i),Mu(this.listens_,l)===h){let T;d?d===401?T="permission_denied":T="rest_error:"+d:T="ok",r(T,null)}})}unlisten(e,t){const i=jp.getListenId_(e,t);delete this.listens_[i]}get(e){const t=QC(e._queryParams),i=e._path.toString(),r=new rr;return this.restRequest_(i+".json",t,(a,l)=>{let h=l;a===404&&(h=null,a=null),a===null?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,a])=>{r&&r.accessToken&&(t.auth=r.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+rc(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&h.readyState===4){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let f=null;if(h.status>=200&&h.status<300){try{f=ff(h.responseText)}catch{Wn("Failed to parse JSON response for "+l+": "+h.responseText)}i(null,f)}else h.status!==401&&h.status!==404&&Wn("Got unsuccessful REST response for "+l+" Status: "+h.status),i(h.status);i=null}},h.open("GET",l,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(){this.rootNode_=be.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(){return{value:null,children:new Map}}function ac(n,e,t){if(Le(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Ve(e);n.children.has(i)||n.children.set(i,qp());const r=n.children.get(i);e=pt(e),ac(r,e,t)}}function z0(n,e){if(Le(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(It,(i,r)=>{ac(n,new at(i),r)}),z0(n,e)}}else if(n.children.size>0){const t=Ve(e);return e=pt(e),n.children.has(t)&&z0(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function j0(n,e,t){n.value!==null?t(e,n.value):P9(n,(i,r)=>{const a=new at(e.toString()+"/"+i);j0(r,a,t)})}function P9(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&xn(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=10*1e3,O9=30*1e3,V9=300*1e3;class k9{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new M9(e);const i=JC+(O9-JC)*Math.random();Hh(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;xn(e,(r,a)=>{a>0&&Fs(this.statsToReport_,r)&&(t[r]=a,i=!0)}),i&&this.server_.reportStats(t),Hh(this.reportStats_.bind(this),Math.floor(Math.random()*2*V9))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ji;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Ji||(Ji={}));function $D(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function TE(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function EE(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Ji.ACK_USER_WRITE,this.source=$D()}operationForChild(e){if(Le(this.path)){if(this.affectedTree.value!=null)return ue(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new at(e));return new Hp(Ze(),t,this.revert)}}else return ue(Ve(this.path)===e,"operationForChild called for unrelated child."),new Hp(pt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t){this.source=e,this.path=t,this.type=Ji.LISTEN_COMPLETE}operationForChild(e){return Le(this.path)?new vf(this.source,Ze()):new vf(this.source,pt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Ji.OVERWRITE}operationForChild(e){return Le(this.path)?new Ka(this.source,Ze(),this.snap.getImmediateChild(e)):new Ka(this.source,pt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Ji.MERGE}operationForChild(e){if(Le(this.path)){const t=this.children.subtree(new at(e));return t.isEmpty()?null:t.value?new Ka(this.source,Ze(),t.value):new Tf(this.source,Ze(),t)}else return ue(Ve(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Tf(this.source,pt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Le(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ve(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function U9(n,e,t,i){const r=[],a=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(R9(l.childName,l.snapshotNode))}),Ch(n,r,"child_removed",e,i,t),Ch(n,r,"child_added",e,i,t),Ch(n,r,"child_moved",a,i,t),Ch(n,r,"child_changed",e,i,t),Ch(n,r,"value",e,i,t),r}function Ch(n,e,t,i,r,a){const l=i.filter(h=>h.type===t);l.sort((h,f)=>B9(n,h,f)),l.forEach(h=>{const f=F9(n,h,a);r.forEach(d=>{d.respondsTo(h.type)&&e.push(d.createEvent(f,n.query_))})})}function F9(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function B9(n,e,t){if(e.childName==null||t.childName==null)throw sc("Should only compare child_ events.");const i=new Ue(e.childName,e.snapshotNode),r=new Ue(t.childName,t.snapshotNode);return n.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(n,e){return{eventCache:n,serverCache:e}}function Gh(n,e,t,i){return Gg(new $a(e,t,i),n.serverCache)}function YD(n,e,t,i){return Gg(n.eventCache,new $a(e,t,i))}function q0(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ya(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wv;const z9=()=>(Wv||(Wv=new Rs(A5)),Wv);class _t{static fromObject(e){let t=new _t(null);return xn(e,(i,r)=>{t=t.set(new at(i),r)}),t}constructor(e,t=z9()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ze(),value:this.value};if(Le(e))return null;{const i=Ve(e),r=this.children.get(i);if(r!==null){const a=r.findRootMostMatchingPathAndValue(pt(e),t);return a!=null?{path:Ut(new at(i),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Le(e))return this;{const t=Ve(e),i=this.children.get(t);return i!==null?i.subtree(pt(e)):new _t(null)}}set(e,t){if(Le(e))return new _t(t,this.children);{const i=Ve(e),a=(this.children.get(i)||new _t(null)).set(pt(e),t),l=this.children.insert(i,a);return new _t(this.value,l)}}remove(e){if(Le(e))return this.children.isEmpty()?new _t(null):new _t(null,this.children);{const t=Ve(e),i=this.children.get(t);if(i){const r=i.remove(pt(e));let a;return r.isEmpty()?a=this.children.remove(t):a=this.children.insert(t,r),this.value===null&&a.isEmpty()?new _t(null):new _t(this.value,a)}else return this}}get(e){if(Le(e))return this.value;{const t=Ve(e),i=this.children.get(t);return i?i.get(pt(e)):null}}setTree(e,t){if(Le(e))return t;{const i=Ve(e),a=(this.children.get(i)||new _t(null)).setTree(pt(e),t);let l;return a.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,a),new _t(this.value,l)}}fold(e){return this.fold_(Ze(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,a)=>{i[r]=a.fold_(Ut(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Ze(),t)}findOnPath_(e,t,i){const r=this.value?i(t,this.value):!1;if(r)return r;if(Le(e))return null;{const a=Ve(e),l=this.children.get(a);return l?l.findOnPath_(pt(e),Ut(t,a),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ze(),t)}foreachOnPath_(e,t,i){if(Le(e))return this;{this.value&&i(t,this.value);const r=Ve(e),a=this.children.get(r);return a?a.foreachOnPath_(pt(e),Ut(t,r),i):new _t(null)}}foreach(e){this.foreach_(Ze(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Ut(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this.writeTree_=e}static empty(){return new es(new _t(null))}}function Kh(n,e,t){if(Le(e))return new es(new _t(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let a=i.value;const l=Kn(r,e);return a=a.updateChild(l,t),new es(n.writeTree_.set(r,a))}else{const r=new _t(t),a=n.writeTree_.setTree(e,r);return new es(a)}}}function ZC(n,e,t){let i=n;return xn(t,(r,a)=>{i=Kh(i,Ut(e,r),a)}),i}function eI(n,e){if(Le(e))return es.empty();{const t=n.writeTree_.setTree(e,new _t(null));return new es(t)}}function H0(n,e){return rl(n,e)!=null}function rl(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Kn(t.path,e)):null}function tI(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(It,(i,r)=>{e.push(new Ue(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Ue(i,r.value))}),e}function So(n,e){if(Le(e))return n;{const t=rl(n,e);return t!=null?new es(new _t(t)):new es(n.writeTree_.subtree(e))}}function G0(n){return n.writeTree_.isEmpty()}function Lu(n,e){return WD(Ze(),n.writeTree_,e)}function WD(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,a)=>{r===".priority"?(ue(a.value!==null,"Priority writes must always be leaf nodes"),i=a.value):t=WD(Ut(n,r),a,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Ut(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(n,e){return ZD(e,n)}function j9(n,e,t,i,r){ue(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Kh(n.visibleWrites,e,t)),n.lastWriteId=i}function q9(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function H9(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);ue(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,a=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&G9(h,i.path)?r=!1:Ri(i.path,h.path)&&(a=!0)),l--}if(r){if(a)return K9(n),!0;if(i.snap)n.visibleWrites=eI(n.visibleWrites,i.path);else{const h=i.children;xn(h,f=>{n.visibleWrites=eI(n.visibleWrites,Ut(i.path,f))})}return!0}else return!1}function G9(n,e){if(n.snap)return Ri(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ri(Ut(n.path,t),e))return!0;return!1}function K9(n){n.visibleWrites=QD(n.allWrites,$9,Ze()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function $9(n){return n.visible}function QD(n,e,t){let i=es.empty();for(let r=0;r<n.length;++r){const a=n[r];if(e(a)){const l=a.path;let h;if(a.snap)Ri(t,l)?(h=Kn(t,l),i=Kh(i,h,a.snap)):Ri(l,t)&&(h=Kn(l,t),i=Kh(i,Ze(),a.snap.getChild(h)));else if(a.children){if(Ri(t,l))h=Kn(t,l),i=ZC(i,h,a.children);else if(Ri(l,t))if(h=Kn(l,t),Le(h))i=ZC(i,Ze(),a.children);else{const f=Mu(a.children,Ve(h));if(f){const d=f.getChild(pt(h));i=Kh(i,Ze(),d)}}}else throw sc("WriteRecord should have .snap or .children")}}return i}function XD(n,e,t,i,r){if(!i&&!r){const a=rl(n.visibleWrites,e);if(a!=null)return a;{const l=So(n.visibleWrites,e);if(G0(l))return t;if(t==null&&!H0(l,Ze()))return null;{const h=t||be.EMPTY_NODE;return Lu(l,h)}}}else{const a=So(n.visibleWrites,e);if(!r&&G0(a))return t;if(!r&&t==null&&!H0(a,Ze()))return null;{const l=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(Ri(d.path,e)||Ri(e,d.path))},h=QD(n.allWrites,l,e),f=t||be.EMPTY_NODE;return Lu(h,f)}}}function Y9(n,e,t){let i=be.EMPTY_NODE;const r=rl(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(It,(a,l)=>{i=i.updateImmediateChild(a,l)}),i;if(t){const a=So(n.visibleWrites,e);return t.forEachChild(It,(l,h)=>{const f=Lu(So(a,new at(l)),h);i=i.updateImmediateChild(l,f)}),tI(a).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const a=So(n.visibleWrites,e);return tI(a).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function W9(n,e,t,i,r){ue(i||r,"Either existingEventSnap or existingServerSnap must exist");const a=Ut(e,t);if(H0(n.visibleWrites,a))return null;{const l=So(n.visibleWrites,a);return G0(l)?r.getChild(t):Lu(l,r.getChild(t))}}function Q9(n,e,t,i){const r=Ut(e,t),a=rl(n.visibleWrites,r);if(a!=null)return a;if(i.isCompleteForChild(t)){const l=So(n.visibleWrites,r);return Lu(l,i.getNode().getImmediateChild(t))}else return null}function X9(n,e){return rl(n.visibleWrites,e)}function J9(n,e,t,i,r,a,l){let h;const f=So(n.visibleWrites,e),d=rl(f,Ze());if(d!=null)h=d;else if(t!=null)h=Lu(f,t);else return[];if(h=h.withIndex(l),!h.isEmpty()&&!h.isLeafNode()){const g=[],_=l.getCompare(),T=a?h.getReverseIteratorFrom(i,l):h.getIteratorFrom(i,l);let w=T.getNext();for(;w&&g.length<r;)_(w,i)!==0&&g.push(w),w=T.getNext();return g}else return[]}function Z9(){return{visibleWrites:es.empty(),allWrites:[],lastWriteId:-1}}function Gp(n,e,t,i){return XD(n.writeTree,n.treePath,e,t,i)}function wE(n,e){return Y9(n.writeTree,n.treePath,e)}function nI(n,e,t,i){return W9(n.writeTree,n.treePath,e,t,i)}function Kp(n,e){return X9(n.writeTree,Ut(n.treePath,e))}function eF(n,e,t,i,r,a){return J9(n.writeTree,n.treePath,e,t,i,r,a)}function bE(n,e,t){return Q9(n.writeTree,n.treePath,e,t)}function JD(n,e){return ZD(Ut(n.treePath,e),n.writeTree)}function ZD(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;ue(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ue(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const a=r.type;if(t==="child_added"&&a==="child_removed")this.changeMap.set(i,yf(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&a==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&a==="child_changed")this.changeMap.set(i,gf(i,r.oldSnap));else if(t==="child_changed"&&a==="child_added")this.changeMap.set(i,ku(i,e.snapshotNode));else if(t==="child_changed"&&a==="child_changed")this.changeMap.set(i,yf(i,e.snapshotNode,r.oldSnap));else throw sc("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const eN=new nF;class AE{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new $a(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bE(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ya(this.viewCache_),a=eF(this.writes_,r,t,1,i,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iF(n){return{filter:n}}function sF(n,e){ue(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ue(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function rF(n,e,t,i,r){const a=new tF;let l,h;if(t.type===Ji.OVERWRITE){const d=t;d.source.fromUser?l=K0(n,e,d.path,d.snap,i,r,a):(ue(d.source.fromServer,"Unknown source."),h=d.source.tagged||e.serverCache.isFiltered()&&!Le(d.path),l=$p(n,e,d.path,d.snap,i,r,h,a))}else if(t.type===Ji.MERGE){const d=t;d.source.fromUser?l=aF(n,e,d.path,d.children,i,r,a):(ue(d.source.fromServer,"Unknown source."),h=d.source.tagged||e.serverCache.isFiltered(),l=$0(n,e,d.path,d.children,i,r,h,a))}else if(t.type===Ji.ACK_USER_WRITE){const d=t;d.revert?l=cF(n,e,d.path,i,r,a):l=lF(n,e,d.path,d.affectedTree,i,r,a)}else if(t.type===Ji.LISTEN_COMPLETE)l=uF(n,e,t.path,i,a);else throw sc("Unknown operation type: "+t.type);const f=a.getChanges();return oF(e,l,f),{viewCache:l,changes:f}}function oF(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=q0(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&t.push(KD(q0(e)))}}function tN(n,e,t,i,r,a){const l=e.eventCache;if(Kp(i,t)!=null)return e;{let h,f;if(Le(t))if(ue(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=Ya(e),g=d instanceof be?d:be.EMPTY_NODE,_=wE(i,g);h=n.filter.updateFullNode(e.eventCache.getNode(),_,a)}else{const d=Gp(i,Ya(e));h=n.filter.updateFullNode(e.eventCache.getNode(),d,a)}else{const d=Ve(t);if(d===".priority"){ue(xo(t)===1,"Can't have a priority with additional path components");const g=l.getNode();f=e.serverCache.getNode();const _=nI(i,t,g,f);_!=null?h=n.filter.updatePriority(g,_):h=l.getNode()}else{const g=pt(t);let _;if(l.isCompleteForChild(d)){f=e.serverCache.getNode();const T=nI(i,t,l.getNode(),f);T!=null?_=l.getNode().getImmediateChild(d).updateChild(g,T):_=l.getNode().getImmediateChild(d)}else _=bE(i,d,e.serverCache);_!=null?h=n.filter.updateChild(l.getNode(),d,_,g,r,a):h=l.getNode()}}return Gh(e,h,l.isFullyInitialized()||Le(t),n.filter.filtersNodes())}}function $p(n,e,t,i,r,a,l,h){const f=e.serverCache;let d;const g=l?n.filter:n.filter.getIndexedFilter();if(Le(t))d=g.updateFullNode(f.getNode(),i,null);else if(g.filtersNodes()&&!f.isFiltered()){const w=f.getNode().updateChild(t,i);d=g.updateFullNode(f.getNode(),w,null)}else{const w=Ve(t);if(!f.isCompleteForPath(t)&&xo(t)>1)return e;const R=pt(t),D=f.getNode().getImmediateChild(w).updateChild(R,i);w===".priority"?d=g.updatePriority(f.getNode(),D):d=g.updateChild(f.getNode(),w,D,R,eN,null)}const _=YD(e,d,f.isFullyInitialized()||Le(t),g.filtersNodes()),T=new AE(r,_,a);return tN(n,_,t,r,T,h)}function K0(n,e,t,i,r,a,l){const h=e.eventCache;let f,d;const g=new AE(r,e,a);if(Le(t))d=n.filter.updateFullNode(e.eventCache.getNode(),i,l),f=Gh(e,d,!0,n.filter.filtersNodes());else{const _=Ve(t);if(_===".priority")d=n.filter.updatePriority(e.eventCache.getNode(),i),f=Gh(e,d,h.isFullyInitialized(),h.isFiltered());else{const T=pt(t),w=h.getNode().getImmediateChild(_);let R;if(Le(T))R=i;else{const N=g.getCompleteChild(_);N!=null?mE(T)===".priority"&&N.getChild(FD(T)).isEmpty()?R=N:R=N.updateChild(T,i):R=be.EMPTY_NODE}if(w.equals(R))f=e;else{const N=n.filter.updateChild(h.getNode(),_,R,T,g,l);f=Gh(e,N,h.isFullyInitialized(),n.filter.filtersNodes())}}}return f}function iI(n,e){return n.eventCache.isCompleteForChild(e)}function aF(n,e,t,i,r,a,l){let h=e;return i.foreach((f,d)=>{const g=Ut(t,f);iI(e,Ve(g))&&(h=K0(n,h,g,d,r,a,l))}),i.foreach((f,d)=>{const g=Ut(t,f);iI(e,Ve(g))||(h=K0(n,h,g,d,r,a,l))}),h}function sI(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function $0(n,e,t,i,r,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f=e,d;Le(t)?d=i:d=new _t(null).setTree(t,i);const g=e.serverCache.getNode();return d.children.inorderTraversal((_,T)=>{if(g.hasChild(_)){const w=e.serverCache.getNode().getImmediateChild(_),R=sI(n,w,T);f=$p(n,f,new at(_),R,r,a,l,h)}}),d.children.inorderTraversal((_,T)=>{const w=!e.serverCache.isCompleteForChild(_)&&T.value===null;if(!g.hasChild(_)&&!w){const R=e.serverCache.getNode().getImmediateChild(_),N=sI(n,R,T);f=$p(n,f,new at(_),N,r,a,l,h)}}),f}function lF(n,e,t,i,r,a,l){if(Kp(r,t)!=null)return e;const h=e.serverCache.isFiltered(),f=e.serverCache;if(i.value!=null){if(Le(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return $p(n,e,t,f.getNode().getChild(t),r,a,h,l);if(Le(t)){let d=new _t(null);return f.getNode().forEachChild(Eu,(g,_)=>{d=d.set(new at(g),_)}),$0(n,e,t,d,r,a,h,l)}else return e}else{let d=new _t(null);return i.foreach((g,_)=>{const T=Ut(t,g);f.isCompleteForPath(T)&&(d=d.set(g,f.getNode().getChild(T)))}),$0(n,e,t,d,r,a,h,l)}}function uF(n,e,t,i,r){const a=e.serverCache,l=YD(e,a.getNode(),a.isFullyInitialized()||Le(t),a.isFiltered());return tN(n,l,t,i,eN,r)}function cF(n,e,t,i,r,a){let l;if(Kp(i,t)!=null)return e;{const h=new AE(i,e,r),f=e.eventCache.getNode();let d;if(Le(t)||Ve(t)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=Gp(i,Ya(e));else{const _=e.serverCache.getNode();ue(_ instanceof be,"serverChildren would be complete if leaf node"),g=wE(i,_)}g=g,d=n.filter.updateFullNode(f,g,a)}else{const g=Ve(t);let _=bE(i,g,e.serverCache);_==null&&e.serverCache.isCompleteForChild(g)&&(_=f.getImmediateChild(g)),_!=null?d=n.filter.updateChild(f,g,_,pt(t),h,a):e.eventCache.getNode().hasChild(g)?d=n.filter.updateChild(f,g,be.EMPTY_NODE,pt(t),h,a):d=f,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Gp(i,Ya(e)),l.isLeafNode()&&(d=n.filter.updateFullNode(d,l,a)))}return l=e.serverCache.isFullyInitialized()||Kp(i,Ze())!=null,Gh(e,d,l,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new _E(i.getIndex()),a=D9(i);this.processor_=iF(a);const l=t.serverCache,h=t.eventCache,f=r.updateFullNode(be.EMPTY_NODE,l.getNode(),null),d=a.updateFullNode(be.EMPTY_NODE,h.getNode(),null),g=new $a(f,l.isFullyInitialized(),r.filtersNodes()),_=new $a(d,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=Gg(_,g),this.eventGenerator_=new L9(this.query_)}get query(){return this.query_}}function fF(n){return n.viewCache_.serverCache.getNode()}function dF(n,e){const t=Ya(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Le(e)&&!t.getImmediateChild(Ve(e)).isEmpty())?t.getChild(e):null}function rI(n){return n.eventRegistrations_.length===0}function mF(n,e){n.eventRegistrations_.push(e)}function oI(n,e,t){const i=[];if(t){ue(e==null,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,r);l&&i.push(l)})}if(e){let r=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(!l.matches(e))r.push(l);else if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(a+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function aI(n,e,t,i){e.type===Ji.MERGE&&e.source.queryId!==null&&(ue(Ya(n.viewCache_),"We should always have a full cache before handling merges"),ue(q0(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,a=rF(n.processor_,r,e,t,i);return sF(n.processor_,a.viewCache),ue(a.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,nN(n,a.changes,a.viewCache.eventCache.getNode(),null)}function pF(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(It,(a,l)=>{i.push(ku(a,l))}),t.isFullyInitialized()&&i.push(KD(t.getNode())),nN(n,i,t.getNode(),e)}function nN(n,e,t,i){const r=i?[i]:n.eventRegistrations_;return U9(n.eventGenerator_,e,t,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yp;class gF{constructor(){this.views=new Map}}function yF(n){ue(!Yp,"__referenceConstructor has already been defined"),Yp=n}function _F(){return ue(Yp,"Reference.ts has not been loaded"),Yp}function vF(n){return n.views.size===0}function CE(n,e,t,i){const r=e.source.queryId;if(r!==null){const a=n.views.get(r);return ue(a!=null,"SyncTree gave us an op for an invalid query."),aI(a,e,t,i)}else{let a=[];for(const l of n.views.values())a=a.concat(aI(l,e,t,i));return a}}function TF(n,e,t,i,r){const a=e._queryIdentifier,l=n.views.get(a);if(!l){let h=Gp(t,r?i:null),f=!1;h?f=!0:i instanceof be?(h=wE(t,i),f=!1):(h=be.EMPTY_NODE,f=!1);const d=Gg(new $a(h,f,!1),new $a(i,r,!1));return new hF(e,d)}return l}function EF(n,e,t,i,r,a){const l=TF(n,e,i,r,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),mF(l,t),pF(l,t)}function SF(n,e,t,i){const r=e._queryIdentifier,a=[];let l=[];const h=Do(n);if(r==="default")for(const[f,d]of n.views.entries())l=l.concat(oI(d,t,i)),rI(d)&&(n.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query));else{const f=n.views.get(r);f&&(l=l.concat(oI(f,t,i)),rI(f)&&(n.views.delete(r),f.query._queryParams.loadsAllData()||a.push(f.query)))}return h&&!Do(n)&&a.push(new(_F())(e._repo,e._path)),{removed:a,events:l}}function iN(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Su(n,e){let t=null;for(const i of n.views.values())t=t||dF(i,e);return t}function sN(n,e){if(e._queryParams.loadsAllData())return Kg(n);{const i=e._queryIdentifier;return n.views.get(i)}}function rN(n,e){return sN(n,e)!=null}function Do(n){return Kg(n)!=null}function Kg(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wp;function wF(n){ue(!Wp,"__referenceConstructor has already been defined"),Wp=n}function bF(){return ue(Wp,"Reference.ts has not been loaded"),Wp}let AF=1;class lI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _t(null),this.pendingWriteTree_=Z9(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function oN(n,e,t,i,r){return j9(n.pendingWriteTree_,e,t,i,r),r?$f(n,new Ka($D(),e,t)):[]}function Pa(n,e,t=!1){const i=q9(n.pendingWriteTree_,e);if(H9(n.pendingWriteTree_,e)){let a=new _t(null);return i.snap!=null?a=a.set(Ze(),!0):xn(i.children,l=>{a=a.set(new at(l),!0)}),$f(n,new Hp(i.path,a,t))}else return[]}function $g(n,e,t){return $f(n,new Ka(TE(),e,t))}function CF(n,e,t){const i=_t.fromObject(t);return $f(n,new Tf(TE(),e,i))}function IF(n,e){return $f(n,new vf(TE(),e))}function RF(n,e,t){const i=RE(n,t);if(i){const r=xE(i),a=r.path,l=r.queryId,h=Kn(a,e),f=new vf(EE(l),h);return DE(n,a,f)}else return[]}function Y0(n,e,t,i,r=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&(e._queryIdentifier==="default"||rN(l,e))){const f=SF(l,e,t,i);vF(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const d=f.removed;if(h=f.events,!r){const g=d.findIndex(T=>T._queryParams.loadsAllData())!==-1,_=n.syncPointTree_.findOnPath(a,(T,w)=>Do(w));if(g&&!_){const T=n.syncPointTree_.subtree(a);if(!T.isEmpty()){const w=NF(T);for(let R=0;R<w.length;++R){const N=w[R],D=N.query,F=uN(n,N);n.listenProvider_.startListening($h(D),Qp(n,D),F.hashFn,F.onComplete)}}}!_&&d.length>0&&!i&&(g?n.listenProvider_.stopListening($h(e),null):d.forEach(T=>{const w=n.queryToTagMap.get(Yg(T));n.listenProvider_.stopListening($h(T),w)}))}PF(n,d)}return h}function xF(n,e,t,i){const r=RE(n,i);if(r!=null){const a=xE(r),l=a.path,h=a.queryId,f=Kn(l,e),d=new Ka(EE(h),f,t);return DE(n,l,d)}else return[]}function DF(n,e,t,i){const r=RE(n,i);if(r){const a=xE(r),l=a.path,h=a.queryId,f=Kn(l,e),d=_t.fromObject(t),g=new Tf(EE(h),f,d);return DE(n,l,g)}else return[]}function uI(n,e,t,i=!1){const r=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(r,(T,w)=>{const R=Kn(T,r);a=a||Su(w,R),l=l||Do(w)});let h=n.syncPointTree_.get(r);h?(l=l||Do(h),a=a||Su(h,Ze())):(h=new gF,n.syncPointTree_=n.syncPointTree_.set(r,h));let f;a!=null?f=!0:(f=!1,a=be.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((w,R)=>{const N=Su(R,Ze());N&&(a=a.updateImmediateChild(w,N))}));const d=rN(h,e);if(!d&&!e._queryParams.loadsAllData()){const T=Yg(e);ue(!n.queryToTagMap.has(T),"View does not exist, but we have a tag");const w=MF();n.queryToTagMap.set(T,w),n.tagToQueryMap.set(w,T)}const g=SE(n.pendingWriteTree_,r);let _=EF(h,e,t,g,a,f);if(!d&&!l&&!i){const T=sN(h,e);_=_.concat(OF(n,e,T))}return _}function IE(n,e,t){const r=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const f=Kn(l,e),d=Su(h,f);if(d)return d});return XD(r,e,a,t,!0)}function $f(n,e){return aN(e,n.syncPointTree_,null,SE(n.pendingWriteTree_,Ze()))}function aN(n,e,t,i){if(Le(n.path))return lN(n,e,t,i);{const r=e.get(Ze());t==null&&r!=null&&(t=Su(r,Ze()));let a=[];const l=Ve(n.path),h=n.operationForChild(l),f=e.children.get(l);if(f&&h){const d=t?t.getImmediateChild(l):null,g=JD(i,l);a=a.concat(aN(h,f,d,g))}return r&&(a=a.concat(CE(r,n,i,t))),a}}function lN(n,e,t,i){const r=e.get(Ze());t==null&&r!=null&&(t=Su(r,Ze()));let a=[];return e.children.inorderTraversal((l,h)=>{const f=t?t.getImmediateChild(l):null,d=JD(i,l),g=n.operationForChild(l);g&&(a=a.concat(lN(g,h,f,d)))}),r&&(a=a.concat(CE(r,n,i,t))),a}function uN(n,e){const t=e.query,i=Qp(n,t);return{hashFn:()=>(fF(e)||be.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?RF(n,t._path,i):IF(n,t._path);{const a=R5(r,t);return Y0(n,t,null,a)}}}}function Qp(n,e){const t=Yg(e);return n.queryToTagMap.get(t)}function Yg(n){return n._path.toString()+"$"+n._queryIdentifier}function RE(n,e){return n.tagToQueryMap.get(e)}function xE(n){const e=n.indexOf("$");return ue(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new at(n.substr(0,e))}}function DE(n,e,t){const i=n.syncPointTree_.get(e);ue(i,"Missing sync point for query tag that we're tracking");const r=SE(n.pendingWriteTree_,e);return CE(i,t,r,null)}function NF(n){return n.fold((e,t,i)=>{if(t&&Do(t))return[Kg(t)];{let r=[];return t&&(r=iN(t)),xn(i,(a,l)=>{r=r.concat(l)}),r}})}function $h(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(bF())(n._repo,n._path):n}function PF(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=Yg(i),a=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(a)}}}function MF(){return AF++}function OF(n,e,t){const i=e._path,r=Qp(n,e),a=uN(n,t),l=n.listenProvider_.startListening($h(e),r,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(i);if(r)ue(!Do(h.value),"If we're adding a query, it shouldn't be shadowed");else{const f=h.fold((d,g,_)=>{if(!Le(d)&&g&&Do(g))return[Kg(g).query];{let T=[];return g&&(T=T.concat(iN(g).map(w=>w.query))),xn(_,(w,R)=>{T=T.concat(R)}),T}});for(let d=0;d<f.length;++d){const g=f[d];n.listenProvider_.stopListening($h(g),Qp(n,g))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new NE(t)}node(){return this.node_}}class PE{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ut(this.path_,e);return new PE(this.syncTree_,t)}node(){return IE(this.syncTree_,this.path_)}}const VF=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},cI=function(n,e,t){if(!n||typeof n!="object")return n;if(ue(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return kF(n[".sv"],e,t);if(typeof n[".sv"]=="object")return LF(n[".sv"],e);ue(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},kF=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ue(!1,"Unexpected server value: "+n)}},LF=function(n,e,t){n.hasOwnProperty("increment")||ue(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ue(!1,"Unexpected increment value: "+i);const r=e.node();if(ue(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return typeof l!="number"?i:l+i},UF=function(n,e,t,i){return ME(e,new PE(t,n),i)},cN=function(n,e,t){return ME(n,new NE(e),t)};function ME(n,e,t){const i=n.getPriority().val(),r=cI(i,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=cI(l.getValue(),e,t);return h!==l.getValue()||r!==l.getPriority().val()?new un(h,Qt(r)):n}else{const l=n;return a=l,r!==l.getPriority().val()&&(a=a.updatePriority(new un(r))),l.forEachChild(It,(h,f)=>{const d=ME(f,e.getImmediateChild(h),t);d!==f&&(a=a.updateImmediateChild(h,d))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function VE(n,e){let t=e instanceof at?e:new at(e),i=n,r=Ve(t);for(;r!==null;){const a=Mu(i.node.children,r)||{children:{},childCount:0};i=new OE(r,i,a),t=pt(t),r=Ve(t)}return i}function lc(n){return n.node.value}function hN(n,e){n.node.value=e,W0(n)}function fN(n){return n.node.childCount>0}function FF(n){return lc(n)===void 0&&!fN(n)}function Wg(n,e){xn(n.node.children,(t,i)=>{e(new OE(t,n,i))})}function dN(n,e,t,i){t&&e(n),Wg(n,r=>{dN(r,e,!0)})}function BF(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Yf(n){return new at(n.parent===null?n.name:Yf(n.parent)+"/"+n.name)}function W0(n){n.parent!==null&&zF(n.parent,n.name,n)}function zF(n,e,t){const i=FF(t),r=Fs(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,W0(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,W0(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF=/[\[\].#$\/\u0000-\u001F\u007F]/,qF=/[\[\].#$\u0000-\u001F\u007F]/,Qv=10*1024*1024,kE=function(n){return typeof n=="string"&&n.length!==0&&!jF.test(n)},mN=function(n){return typeof n=="string"&&n.length!==0&&!qF.test(n)},HF=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),mN(n)},pN=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!qg(n)||n&&typeof n=="object"&&Fs(n,".sv")},Q0=function(n,e,t,i){Qg(Ou(n,"value"),e,t)},Qg=function(n,e,t){const i=t instanceof at?new l9(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+wa(i));if(typeof e=="function")throw new Error(n+"contains a function "+wa(i)+" with contents = "+e.toString());if(qg(e))throw new Error(n+"contains "+e.toString()+" "+wa(i));if(typeof e=="string"&&e.length>Qv/3&&Bg(e)>Qv)throw new Error(n+"contains a string greater than "+Qv+" utf8 bytes "+wa(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,a=!1;if(xn(e,(l,h)=>{if(l===".value")r=!0;else if(l!==".priority"&&l!==".sv"&&(a=!0,!kE(l)))throw new Error(n+" contains an invalid key ("+l+") "+wa(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);u9(i,l),Qg(n,h,i),c9(i)}),r&&a)throw new Error(n+' contains ".value" child '+wa(i)+" in addition to actual children.")}},GF=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const a=pf(i);for(let l=0;l<a.length;l++)if(!(a[l]===".priority"&&l===a.length-1)){if(!kE(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(a9);let r=null;for(t=0;t<e.length;t++){if(i=e[t],r!==null&&Ri(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},KF=function(n,e,t,i){const r=Ou(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const a=[];xn(e,(l,h)=>{const f=new at(l);if(Qg(r,h,Ut(t,f)),mE(f)===".priority"&&!pN(h))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(f)}),GF(r,a)},$F=function(n,e,t){if(qg(e))throw new Error(Ou(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!pN(e))throw new Error(Ou(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},gN=function(n,e,t,i){if(!mN(t))throw new Error(Ou(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},YF=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),gN(n,e,t)},Vh=function(n,e){if(Ve(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},WF=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!kE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!HF(t))throw new Error(Ou(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function LE(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],a=r.getPath();t!==null&&!pE(a,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:a}),t.events.push(r)}t&&n.eventLists_.push(t)}function yN(n,e,t){LE(n,t),_N(n,i=>pE(i,e))}function _r(n,e,t){LE(n,t),_N(n,i=>Ri(i,e)||Ri(e,i))}function _N(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];if(r){const a=r.path;e(a)?(XF(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function XF(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();qh&&Sn("event: "+t.toString()),oc(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF="repo_interrupt",ZF=25;class eB{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new QF,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qp(),this.transactionQueueTree_=new OE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tB(n,e,t){if(n.stats_=fE(n.repoInfo_),n.forceRestClient_||P5())n.server_=new jp(n.repoInfo_,(i,r,a,l)=>{hI(n,i,r,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>fI(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{hn(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new fr(n.repoInfo_,e,(i,r,a,l)=>{hI(n,i,r,a,l)},i=>{fI(n,i)},i=>{iB(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=L5(n.repoInfo_,()=>new k9(n.stats_,n.server_)),n.infoData_=new N9,n.infoSyncTree_=new lI({startListening:(i,r,a,l)=>{let h=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(h=$g(n.infoSyncTree_,i._path,f),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),FE(n,"connected",!1),n.serverSyncTree_=new lI({startListening:(i,r,a,l)=>(n.server_.listen(i,a,r,(h,f)=>{const d=l(h,f);_r(n.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function nB(n){const t=n.infoData_.getNode(new at(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function UE(n){return VF({timestamp:nB(n)})}function hI(n,e,t,i,r){n.dataUpdateCount++;const a=new at(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(r)if(i){const f=Lp(t,d=>Qt(d));l=DF(n.serverSyncTree_,a,f,r)}else{const f=Qt(t);l=xF(n.serverSyncTree_,a,f,r)}else if(i){const f=Lp(t,d=>Qt(d));l=CF(n.serverSyncTree_,a,f)}else{const f=Qt(t);l=$g(n.serverSyncTree_,a,f)}let h=a;l.length>0&&(h=Xg(n,a)),_r(n.eventQueue_,h,l)}function fI(n,e){FE(n,"connected",e),e===!1&&rB(n)}function iB(n,e){xn(e,(t,i)=>{FE(n,t,i)})}function FE(n,e,t){const i=new at("/.info/"+e),r=Qt(t);n.infoData_.updateSnapshot(i,r);const a=$g(n.infoSyncTree_,i,r);_r(n.eventQueue_,i,a)}function vN(n){return n.nextWriteId_++}function sB(n,e,t,i,r){BE(n,"set",{path:e.toString(),value:t,priority:i});const a=UE(n),l=Qt(t,i),h=IE(n.serverSyncTree_,e),f=cN(l,h,a),d=vN(n),g=oN(n.serverSyncTree_,e,f,d,!0);LE(n.eventQueue_,g),n.server_.put(e.toString(),l.val(!0),(T,w)=>{const R=T==="ok";R||Wn("set at "+e+" failed: "+T);const N=Pa(n.serverSyncTree_,d,!R);_r(n.eventQueue_,e,N),Uu(n,r,T,w)});const _=bN(n,e);Xg(n,_),_r(n.eventQueue_,_,[])}function rB(n){BE(n,"onDisconnectEvents");const e=UE(n),t=qp();j0(n.onDisconnect_,Ze(),(r,a)=>{const l=UF(r,a,n.serverSyncTree_,e);ac(t,r,l)});let i=[];j0(t,Ze(),(r,a)=>{i=i.concat($g(n.serverSyncTree_,r,a));const l=bN(n,r);Xg(n,l)}),n.onDisconnect_=qp(),_r(n.eventQueue_,Ze(),i)}function oB(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{i==="ok"&&z0(n.onDisconnect_,e),Uu(n,t,i,r)})}function dI(n,e,t,i){const r=Qt(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(a,l)=>{a==="ok"&&ac(n.onDisconnect_,e,r),Uu(n,i,a,l)})}function aB(n,e,t,i,r){const a=Qt(t,i);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{l==="ok"&&ac(n.onDisconnect_,e,a),Uu(n,r,l,h)})}function lB(n,e,t,i){if(kp(t)){Sn("onDisconnect().update() called with empty data.  Don't do anything."),Uu(n,i,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(r,a)=>{r==="ok"&&xn(t,(l,h)=>{const f=Qt(h);ac(n.onDisconnect_,Ut(e,l),f)}),Uu(n,i,r,a)})}function uB(n,e,t){let i;Ve(e._path)===".info"?i=uI(n.infoSyncTree_,e,t):i=uI(n.serverSyncTree_,e,t),yN(n.eventQueue_,e._path,i)}function cB(n,e,t){let i;Ve(e._path)===".info"?i=Y0(n.infoSyncTree_,e,t):i=Y0(n.serverSyncTree_,e,t),yN(n.eventQueue_,e._path,i)}function hB(n){n.persistentConnection_&&n.persistentConnection_.interrupt(JF)}function BE(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Sn(t,...e)}function Uu(n,e,t,i){e&&oc(()=>{if(t==="ok")e(null);else{const r=(t||"error").toUpperCase();let a=r;i&&(a+=": "+i);const l=new Error(a);l.code=r,e(l)}})}function TN(n,e,t){return IE(n.serverSyncTree_,e,t)||be.EMPTY_NODE}function zE(n,e=n.transactionQueueTree_){if(e||Jg(n,e),lc(e)){const t=SN(n,e);ue(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&fB(n,Yf(e),t)}else fN(e)&&Wg(e,t=>{zE(n,t)})}function fB(n,e,t){const i=t.map(d=>d.currentWriteId),r=TN(n,e,i);let a=r;const l=r.hash();for(let d=0;d<t.length;d++){const g=t[d];ue(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const _=Kn(e,g.path);a=a.updateChild(_,g.currentOutputSnapshotRaw)}const h=a.val(!0),f=e;n.server_.put(f.toString(),h,d=>{BE(n,"transaction put response",{path:f.toString(),status:d});let g=[];if(d==="ok"){const _=[];for(let T=0;T<t.length;T++)t[T].status=2,g=g.concat(Pa(n.serverSyncTree_,t[T].currentWriteId)),t[T].onComplete&&_.push(()=>t[T].onComplete(null,!0,t[T].currentOutputSnapshotResolved)),t[T].unwatcher();Jg(n,VE(n.transactionQueueTree_,e)),zE(n,n.transactionQueueTree_),_r(n.eventQueue_,e,g);for(let T=0;T<_.length;T++)oc(_[T])}else{if(d==="datastale")for(let _=0;_<t.length;_++)t[_].status===3?t[_].status=4:t[_].status=0;else{Wn("transaction at "+f.toString()+" failed: "+d);for(let _=0;_<t.length;_++)t[_].status=4,t[_].abortReason=d}Xg(n,e)}},l)}function Xg(n,e){const t=EN(n,e),i=Yf(t),r=SN(n,t);return dB(n,r,i),i}function dB(n,e,t){if(e.length===0)return;const i=[];let r=[];const l=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const f=e[h],d=Kn(t,f.path);let g=!1,_;if(ue(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)g=!0,_=f.abortReason,r=r.concat(Pa(n.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=ZF)g=!0,_="maxretry",r=r.concat(Pa(n.serverSyncTree_,f.currentWriteId,!0));else{const T=TN(n,f.path,l);f.currentInputSnapshot=T;const w=e[h].update(T.val());if(w!==void 0){Qg("transaction failed: Data returned ",w,f.path);let R=Qt(w);typeof w=="object"&&w!=null&&Fs(w,".priority")||(R=R.updatePriority(T.getPriority()));const D=f.currentWriteId,F=UE(n),z=cN(R,T,F);f.currentOutputSnapshotRaw=R,f.currentOutputSnapshotResolved=z,f.currentWriteId=vN(n),l.splice(l.indexOf(D),1),r=r.concat(oN(n.serverSyncTree_,f.path,z,f.currentWriteId,f.applyLocally)),r=r.concat(Pa(n.serverSyncTree_,D,!0))}else g=!0,_="nodata",r=r.concat(Pa(n.serverSyncTree_,f.currentWriteId,!0))}_r(n.eventQueue_,t,r),r=[],g&&(e[h].status=2,(function(T){setTimeout(T,Math.floor(0))})(e[h].unwatcher),e[h].onComplete&&(_==="nodata"?i.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):i.push(()=>e[h].onComplete(new Error(_),!1,null))))}Jg(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)oc(i[h]);zE(n,n.transactionQueueTree_)}function EN(n,e){let t,i=n.transactionQueueTree_;for(t=Ve(e);t!==null&&lc(i)===void 0;)i=VE(i,t),e=pt(e),t=Ve(e);return i}function SN(n,e){const t=[];return wN(n,e,t),t.sort((i,r)=>i.order-r.order),t}function wN(n,e,t){const i=lc(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);Wg(e,r=>{wN(n,r,t)})}function Jg(n,e){const t=lc(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,hN(e,t.length>0?t:void 0)}Wg(e,i=>{Jg(n,i)})}function bN(n,e){const t=Yf(EN(n,e)),i=VE(n.transactionQueueTree_,e);return BF(i,r=>{Xv(n,r)}),Xv(n,i),dN(i,r=>{Xv(n,r)}),t}function Xv(n,e){const t=lc(e);if(t){const i=[];let r=[],a=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(ue(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):(ue(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),r=r.concat(Pa(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&i.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));a===-1?hN(e,void 0):t.length=a+1,_r(n.eventQueue_,Yf(e),r);for(let l=0;l<i.length;l++)oc(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mB(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function pB(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Wn(`Invalid query segment '${t}' in query '${n}'`)}return e}const mI=function(n,e){const t=gB(n),i=t.namespace;t.domain==="firebase.com"&&yr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&yr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||w5();const r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new DD(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new at(t.pathString)}},gB=function(n){let e="",t="",i="",r="",a="",l=!0,h="https",f=443;if(typeof n=="string"){let d=n.indexOf("//");d>=0&&(h=n.substring(0,d-1),n=n.substring(d+2));let g=n.indexOf("/");g===-1&&(g=n.length);let _=n.indexOf("?");_===-1&&(_=n.length),e=n.substring(0,Math.min(g,_)),g<_&&(r=mB(n.substring(g,_)));const T=pB(n.substring(Math.min(n.length,_)));d=e.indexOf(":"),d>=0?(l=h==="https"||h==="wss",f=parseInt(e.substring(d+1),10)):d=e.length;const w=e.slice(0,d);if(w.toLowerCase()==="localhost")t="localhost";else if(w.split(".").length<=2)t=w;else{const R=e.indexOf(".");i=e.substring(0,R).toLowerCase(),t=e.substring(R+1),a=i}"ns"in T&&(a=T.ns)}return{host:e,port:f,domain:t,subdomain:i,secure:l,scheme:h,pathString:r,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+hn(this.snapshot.exportVal())}}class _B{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ue(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TB{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new rr;return oB(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Vh("OnDisconnect.remove",this._path);const e=new rr;return dI(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Vh("OnDisconnect.set",this._path),Q0("OnDisconnect.set",e,this._path);const t=new rr;return dI(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Vh("OnDisconnect.setWithPriority",this._path),Q0("OnDisconnect.setWithPriority",e,this._path),$F("OnDisconnect.setWithPriority",t);const i=new rr;return aB(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Vh("OnDisconnect.update",this._path),KF("OnDisconnect.update",e,this._path);const t=new rr;return lB(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Le(this._path)?null:mE(this._path)}get ref(){return new Uo(this._repo,this._path)}get _queryIdentifier(){const e=XC(this._queryParams),t=cE(e);return t==="{}"?"default":t}get _queryObject(){return XC(this._queryParams)}isEqual(e){if(e=fn(e),!(e instanceof jE))return!1;const t=this._repo===e._repo,i=pE(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+o9(this._path)}}class Uo extends jE{constructor(e,t){super(e,t,new vE,!1)}get parent(){const e=FD(this._path);return e===null?null:new Uo(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Xp{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new at(e),i=X0(this.ref,e);return new Xp(this._node.getChild(t),i,It)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new Xp(r,X0(this.ref,i),It)))}hasChild(e){const t=new at(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function pI(n,e){return n=fn(n),n._checkNotDeleted("ref"),e!==void 0?X0(n._root,e):n._root}function X0(n,e){return n=fn(n),Ve(n._path)===null?YF("child","path",e):gN("child","path",e),new Uo(n._repo,Ut(n._path,e))}function EB(n){return n=fn(n),new TB(n._repo,n._path)}function gI(n,e){n=fn(n),Vh("set",n._path),Q0("set",e,n._path);const t=new rr;return sB(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}class qE{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new yB("value",this,new Xp(e.snapshotNode,new Uo(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new _B(this,e,t):null}matches(e){return e instanceof qE?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function SB(n,e,t,i,r){const a=new vB(t,void 0),l=new qE(a);return uB(n._repo,n,l),()=>cB(n._repo,n,l)}function wB(n,e,t,i){return SB(n,"value",e)}yF(Uo);wF(Uo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB="FIREBASE_DATABASE_EMULATOR_HOST",J0={};let AB=!1;function CB(n,e,t,i){const r=e.lastIndexOf(":"),a=e.substring(0,r),l=Lo(a);n.repoInfo_=new DD(e,l,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function IB(n,e,t,i,r){let a=i||n.options.databaseURL;a===void 0&&(n.options.projectId||yr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Sn("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=mI(a,r),h=l.repoInfo,f;typeof process<"u"&&MC&&(f=MC[bB]),f?(a=`http://${f}?ns=${h.namespace}`,l=mI(a,r),h=l.repoInfo):l.repoInfo.secure;const d=new O5(n.name,n.options,e);WF("Invalid Firebase Database URL",l),Le(l.path)||yr("Database URL must point to the root of a Firebase Database (not including a child path).");const g=xB(h,n,d,new M5(n,t));return new DB(g,n)}function RB(n,e){const t=J0[e];(!t||t[n.key]!==n)&&yr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),hB(n),delete t[n.key]}function xB(n,e,t,i){let r=J0[e.name];r||(r={},J0[e.name]=r);let a=r[n.toURLString()];return a&&yr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new eB(n,AB,t,i),r[n.toURLString()]=a,a}class DB{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(tB(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Uo(this._repo,Ze())),this._rootInternal}_delete(){return this._rootInternal!==null&&(RB(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&yr("Cannot call "+e+" on a deleted database.")}}function NB(n=dD(),e){const t=jg(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=H6("database");i&&PB(t,...i)}return t}function PB(n,e,t,i={}){n=fn(n),n._checkNotDeleted("useEmulator");const r=`${e}:${t}`,a=n._repoInternal;if(n._instanceStarted){if(r===n._repoInternal.repoInfo_.host&&Io(i,a.repoInfo_.emulatorOptions))return;yr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(a.repoInfo_.nodeAdmin)i.mockUserToken&&yr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new op(op.OWNER);else if(i.mockUserToken){const h=typeof i.mockUserToken=="string"?i.mockUserToken:G6(i.mockUserToken,n.app.options.projectId);l=new op(h)}Lo(e)&&(aE(e),iD("Database",!0)),CB(a,r,i,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MB(n){y5(il),Ha(new Ro("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return IB(i,r,a,t)},"PUBLIC").setMultipleInstances(!0)),Ns(OC,VC,n),Ns(OC,VC,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OB={".sv":"timestamp"};function VB(){return OB}fr.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};fr.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};MB();var kB="firebase",LB="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ns(kB,LB,"app");function AN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UB=AN,CN=new qf("auth","Firebase",AN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=new zg("@firebase/auth");function FB(n,...e){Jp.logLevel<=ze.WARN&&Jp.warn(`Auth (${il}): ${n}`,...e)}function lp(n,...e){Jp.logLevel<=ze.ERROR&&Jp.error(`Auth (${il}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(n,...e){throw HE(n,...e)}function Ps(n,...e){return HE(n,...e)}function IN(n,e,t){const i={...UB(),[e]:t};return new qf("auth","Firebase",i).create(e,{appName:n.name})}function ka(n){return IN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HE(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return CN.create(n,...e)}function Ae(n,e,...t){if(!n)throw HE(e,...t)}function ar(n){const e="INTERNAL ASSERTION FAILED: "+n;throw lp(e),new Error(e)}function Tr(n,e){n||ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(){return typeof self<"u"&&self.location?.href||""}function BB(){return yI()==="http:"||yI()==="https:"}function yI(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BB()||W6()||"connection"in navigator)?navigator.onLine:!0}function jB(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t){this.shortDelay=e,this.longDelay=t,Tr(t>e,"Short delay should be less than long delay!"),this.isMobile=lE()||rD()}get(){return zB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(n,e){Tr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],GB=new Wf(3e4,6e4);function KE(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function uc(n,e,t,i,r={}){return xN(n,r,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const h=rc({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const d={method:e,headers:f,...a};return Y6()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Lo(n.emulatorConfig.host)&&(d.credentials="include"),RN.fetch()(await DN(n,n.config.apiHost,t,h),d)})}async function xN(n,e,t){n._canInitEmulator=!1;const i={...qB,...e};try{const r=new $B(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw Gm(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[f,d]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gm(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw Gm(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw Gm(n,"user-disabled",l);const g=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw IN(n,g,d);vr(n,g)}}catch(r){if(r instanceof Ir)throw r;vr(n,"network-request-failed",{message:String(r)})}}async function KB(n,e,t,i,r={}){const a=await uc(n,e,t,i,r);return"mfaPendingCredential"in a&&vr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function DN(n,e,t,i){const r=`${e}${t}?${i}`,a=n,l=a.config.emulator?GE(n.config,r):`${n.config.apiScheme}://${r}`;return HB.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}class $B{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ps(this.auth,"network-request-failed")),GB.get())})}}function Gm(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Ps(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YB(n,e){return uc(n,"POST","/v1/accounts:delete",e)}async function Zp(n,e){return uc(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WB(n,e=!1){const t=fn(n),i=await t.getIdToken(e),r=$E(i);Ae(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,l=a?.sign_in_provider;return{claims:r,token:i,authTime:Yh(Jv(r.auth_time)),issuedAtTime:Yh(Jv(r.iat)),expirationTime:Yh(Jv(r.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function Jv(n){return Number(n)*1e3}function $E(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return lp("JWT malformed, contained fewer than 3 sections"),null;try{const r=Vp(t);return r?JSON.parse(r):(lp("Failed to decode base64 JWT payload"),null)}catch(r){return lp("Caught error parsing JWT payload as JSON",r?.toString()),null}}function _I(n){const e=$E(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ef(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ir&&QB(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function QB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XB{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yh(this.lastLoginAt),this.creationTime=Yh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eg(n){const e=n.auth,t=await n.getIdToken(),i=await Ef(n,Zp(e,{idToken:t}));Ae(i?.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const a=r.providerUserInfo?.length?NN(r.providerUserInfo):[],l=ZB(n.providerData,a),h=n.isAnonymous,f=!(n.email&&r.passwordHash)&&!l?.length,d=h?f:!1,g={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new eT(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(n,g)}async function JB(n){const e=fn(n);await eg(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZB(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function NN(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ez(n,e){const t=await xN(n,{},async()=>{const i=rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,l=await DN(n,r,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:i};return n.emulatorConfig&&Lo(n.emulatorConfig.host)&&(f.credentials="include"),RN.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function tz(n,e){return uc(n,"POST","/v2/accounts:revokeToken",KE(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_I(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=_I(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await ez(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,l=new wu;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Ae(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),a&&(Ae(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wu,this.toJSON())}_performRefresh(){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Zi{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new XB(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new eT(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Ef(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return WB(this,e)}reload(){return JB(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Zi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await eg(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qi(this.auth.app))return Promise.reject(ka(this.auth));const e=await this.getIdToken();return await Ef(this,YB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,h=t.tenantId??void 0,f=t._redirectEventId??void 0,d=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:_,emailVerified:T,isAnonymous:w,providerData:R,stsTokenManager:N}=t;Ae(_&&N,e,"internal-error");const D=wu.fromJSON(this.name,N);Ae(typeof _=="string",e,"internal-error"),lo(i,e.name),lo(r,e.name),Ae(typeof T=="boolean",e,"internal-error"),Ae(typeof w=="boolean",e,"internal-error"),lo(a,e.name),lo(l,e.name),lo(h,e.name),lo(f,e.name),lo(d,e.name),lo(g,e.name);const F=new Zi({uid:_,auth:e,email:r,emailVerified:T,displayName:i,isAnonymous:w,photoURL:l,phoneNumber:a,tenantId:h,stsTokenManager:D,createdAt:d,lastLoginAt:g});return R&&Array.isArray(R)&&(F.providerData=R.map(z=>({...z}))),f&&(F._redirectEventId=f),F}static async _fromIdTokenResponse(e,t,i=!1){const r=new wu;r.updateFromServerResponse(t);const a=new Zi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await eg(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Ae(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?NN(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!a?.length,h=new wu;h.updateFromIdToken(i);const f=new Zi({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:l}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new eT(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!a?.length};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=new Map;function lr(n){Tr(n instanceof Function,"Expected a class definition");let e=vI.get(n);return e?(Tr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,vI.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}PN.type="NONE";const TI=PN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(n,e,t){return`firebase:${n}:${e}:${t}`}class bu{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=up(this.userKey,r.apiKey,a),this.fullPersistenceKey=up("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zp(this.auth,{idToken:e}).catch(()=>{});return t?Zi._fromGetAccountInfoResponse(this.auth,t,e):null}return Zi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new bu(lr(TI),e,i);const r=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=r[0]||lr(TI);const l=up(i,e.config.apiKey,e.name);let h=null;for(const d of t)try{const g=await d._get(l);if(g){let _;if(typeof g=="string"){const T=await Zp(e,{idToken:g}).catch(()=>{});if(!T)break;_=await Zi._fromGetAccountInfoResponse(e,T,g)}else _=Zi._fromJSON(e,g);d!==a&&(h=_),a=d;break}}catch{}const f=r.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new bu(a,e,i):(a=f[0],h&&await a._set(l,h.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(l)}catch{}})),new bu(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UN(e))return"Blackberry";if(FN(e))return"Webos";if(ON(e))return"Safari";if((e.includes("chrome/")||VN(e))&&!e.includes("edge/"))return"Chrome";if(LN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function MN(n=sn()){return/firefox\//i.test(n)}function ON(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VN(n=sn()){return/crios\//i.test(n)}function kN(n=sn()){return/iemobile/i.test(n)}function LN(n=sn()){return/android/i.test(n)}function UN(n=sn()){return/blackberry/i.test(n)}function FN(n=sn()){return/webos/i.test(n)}function YE(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function nz(n=sn()){return YE(n)&&!!window.navigator?.standalone}function iz(){return Q6()&&document.documentMode===10}function BN(n=sn()){return YE(n)||LN(n)||FN(n)||UN(n)||/windows phone/i.test(n)||kN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(n,e=[]){let t;switch(n){case"Browser":t=EI(sn());break;case"Worker":t=`${EI(sn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${il}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((l,h)=>{try{const f=e(a);l(f)}catch(f){h(f)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rz(n,e={}){return uc(n,"GET","/v2/passwordPolicy",KE(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oz=6;class az{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??oz,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new SI(this),this.idTokenSubscription=new SI(this),this.beforeStateQueue=new sz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=CN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=lr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await bu.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zp(this,{idToken:e}),i=await Zi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Qi(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===l)&&h?.user&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await eg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qi(this.app))return Promise.reject(ka(this));const t=e?fn(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qi(this.app)?Promise.reject(ka(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qi(this.app)?Promise.reject(ka(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rz(this),t=new az(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new qf("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await tz(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&lr(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await bu.create(this,[lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,r);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Qi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&FB(`Error while retrieving App Check token: ${e.error}`),e?.token}}function WE(n){return fn(n)}class SI{constructor(e){this.auth=e,this.observer=null,this.addObserver=rU(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QE={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uz(n){QE=n}function cz(n){return QE.loadJS(n)}function hz(){return QE.gapiScript}function fz(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dz(n,e){const t=jg(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(Io(a,e??{}))return r;vr(r,"already-initialized")}return t.initialize({options:e})}function mz(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(lr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function pz(n,e,t){const i=WE(n);Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=jN(e),{host:l,port:h}=gz(e),f=h===null?"":`:${h}`,d={url:`${a}//${l}${f}/`},g=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Ae(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ae(Io(d,i.config.emulator)&&Io(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,Lo(l)?(aE(`${a}//${l}${f}`),iD("Auth",!0)):yz()}function jN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function gz(n){const e=jN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:wI(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:wI(l)}}}function wI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function yz(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ar("not implemented")}_getIdTokenResponse(e){return ar("not implemented")}_linkToIdToken(e,t){return ar("not implemented")}_getReauthenticationResolver(e){return ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Au(n,e){return KB(n,"POST","/v1/accounts:signInWithIdp",KE(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _z="http://localhost";class Wa extends qN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Wa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...a}=t;if(!i||!r)return null;const l=new Wa(i,r);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Au(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Au(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Au(e,t)}buildRequest(){const e={requestUri:_z,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=rc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf extends HN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo extends Qf{constructor(){super("facebook.com")}static credential(e){return Wa._fromParams({providerId:mo.PROVIDER_ID,signInMethod:mo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mo.credentialFromTaggedObject(e)}static credentialFromError(e){return mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mo.credential(e.oauthAccessToken)}catch{return null}}}mo.FACEBOOK_SIGN_IN_METHOD="facebook.com";mo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends Qf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Wa._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return po.credential(t,i)}catch{return null}}}po.GOOGLE_SIGN_IN_METHOD="google.com";po.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends Qf{constructor(){super("github.com")}static credential(e){return Wa._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return go.credential(e.oauthAccessToken)}catch{return null}}}go.GITHUB_SIGN_IN_METHOD="github.com";go.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends Qf{constructor(){super("twitter.com")}static credential(e,t){return Wa._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return yo.credential(t,i)}catch{return null}}}yo.TWITTER_SIGN_IN_METHOD="twitter.com";yo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await Zi._fromIdTokenResponse(e,i,r),l=bI(i);return new Fu({user:a,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=bI(i);return new Fu({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function bI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends Ir{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,tg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new tg(e,t,i,r)}}function GN(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?tg._fromErrorAndOperation(n,a,e,i):a})}async function vz(n,e,t=!1){const i=await Ef(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Fu._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tz(n,e,t=!1){const{auth:i}=n;if(Qi(i.app))return Promise.reject(ka(i));const r="reauthenticate";try{const a=await Ef(n,GN(i,r,e,n),t);Ae(a.idToken,i,"internal-error");const l=$E(a.idToken);Ae(l,i,"internal-error");const{sub:h}=l;return Ae(n.uid===h,i,"user-mismatch"),Fu._forOperation(n,r,a)}catch(a){throw a?.code==="auth/user-not-found"&&vr(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ez(n,e,t=!1){if(Qi(n.app))return Promise.reject(ka(n));const i="signIn",r=await GN(n,i,e),a=await Fu._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sz(n,e){return fn(n).setPersistence(e)}function wz(n,e,t,i){return fn(n).onIdTokenChanged(e,t,i)}function bz(n,e,t){return fn(n).beforeAuthStateChanged(e,t)}const ng="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ng,"1"),this.storage.removeItem(ng),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az=1e3,Cz=10;class $N extends KN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);iz()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Cz):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Az)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}$N.type="LOCAL";const YN=$N;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN extends KN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}WN.type="SESSION";const QN=WN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new Zg(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,l=this.handlersMap[r];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(l).map(async d=>d(t.origin,a)),f=await Iz(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Zg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,l;return new Promise((h,f)=>{const d=XE("",20);r.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(_){const T=_;if(T.data.eventId===d)switch(T.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(T.data.response);break;default:clearTimeout(g),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(){return window}function xz(n){Ms().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(){return typeof Ms().WorkerGlobalScope<"u"&&typeof Ms().importScripts=="function"}async function Dz(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nz(){return navigator?.serviceWorker?.controller||null}function Pz(){return XN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="firebaseLocalStorageDb",Mz=1,ig="firebaseLocalStorage",ZN="fbase_key";class Xf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ey(n,e){return n.transaction([ig],e?"readwrite":"readonly").objectStore(ig)}function Oz(){const n=indexedDB.deleteDatabase(JN);return new Xf(n).toPromise()}function tT(){const n=indexedDB.open(JN,Mz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(ig,{keyPath:ZN})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(ig)?e(i):(i.close(),await Oz(),e(await tT()))})})}async function AI(n,e,t){const i=ey(n,!0).put({[ZN]:e,value:t});return new Xf(i).toPromise()}async function Vz(n,e){const t=ey(n,!1).get(e),i=await new Xf(t).toPromise();return i===void 0?null:i.value}function CI(n,e){const t=ey(n,!0).delete(e);return new Xf(t).toPromise()}const kz=800,Lz=3;class eP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Lz)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zg._getInstance(Pz()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Dz(),!this.activeServiceWorker)return;this.sender=new Rz(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tT();return await AI(e,ng,"1"),await CI(e,ng),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>AI(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Vz(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>CI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=ey(r,!1).getAll();return new Xf(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eP.type="LOCAL";const Uz=eP;new Wf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fz(n,e){return e?lr(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE extends qN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Au(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Au(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Au(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Bz(n){return Ez(n.auth,new JE(n),n.bypassAuthState)}function zz(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),Tz(t,new JE(n),n.bypassAuthState)}async function jz(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),vz(t,new JE(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bz;case"linkViaPopup":case"linkViaRedirect":return jz;case"reauthViaPopup":case"reauthViaRedirect":return zz;default:vr(this.auth,"internal-error")}}resolve(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=new Wf(2e3,1e4);class mu extends tP{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,mu.currentPopupAction&&mu.currentPopupAction.cancel(),mu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Tr(this.filter.length===1,"Popup operations only handle one event");const e=XE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ps(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ps(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ps(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,qz.get())};e()}}mu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz="pendingRedirect",cp=new Map;class Gz extends tP{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=cp.get(this.auth._key());if(!e){try{const i=await Kz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}cp.set(this.auth._key(),e)}return this.bypassAuthState||cp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kz(n,e){const t=Wz(e),i=Yz(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function $z(n,e){cp.set(n._key(),e)}function Yz(n){return lr(n._redirectPersistence)}function Wz(n){return up(Hz,n.config.apiKey,n.name)}async function Qz(n,e,t=!1){if(Qi(n.app))return Promise.reject(ka(n));const i=WE(n),r=Fz(i,e),l=await new Gz(i,r,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz=600*1e3;class Jz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Zz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!nP(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ps(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Xz&&this.cachedEventUids.clear(),this.cachedEventUids.has(II(e))}saveEventToCache(e){this.cachedEventUids.add(II(e)),this.lastProcessedEventTime=Date.now()}}function II(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nP({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Zz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nP(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ej(n,e={}){return uc(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nj=/^https?/;async function ij(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ej(n);for(const t of e)try{if(sj(t))return}catch{}vr(n,"unauthorized-domain")}function sj(n){const e=Z0(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!nj.test(t))return!1;if(tj.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=new Wf(3e4,6e4);function RI(){const n=Ms().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function oj(n){return new Promise((e,t)=>{function i(){RI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RI(),t(Ps(n,"network-request-failed"))},timeout:rj.get()})}if(Ms().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ms().gapi?.load)i();else{const r=fz("iframefcb");return Ms()[r]=()=>{gapi.load?i():t(Ps(n,"network-request-failed"))},cz(`${hz()}?onload=${r}`).catch(a=>t(a))}}).catch(e=>{throw hp=null,e})}let hp=null;function aj(n){return hp=hp||oj(n),hp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=new Wf(5e3,15e3),uj="__/auth/iframe",cj="emulator/auth/iframe",hj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dj(n){const e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?GE(e,cj):`https://${n.config.authDomain}/${uj}`,i={apiKey:e.apiKey,appName:n.name,v:il},r=fj.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${rc(i).slice(1)}`}async function mj(n){const e=await aj(n),t=Ms().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:dj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hj,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const l=Ps(n,"network-request-failed"),h=Ms().setTimeout(()=>{a(l)},lj.get());function f(){Ms().clearTimeout(h),r(i)}i.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gj=500,yj=600,_j="_blank",vj="http://localhost";class xI{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Tj(n,e,t,i=gj,r=yj){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const f={...pj,width:i.toString(),height:r.toString(),top:a,left:l},d=sn().toLowerCase();t&&(h=VN(d)?_j:t),MN(d)&&(e=e||vj,f.scrollbars="yes");const g=Object.entries(f).reduce((T,[w,R])=>`${T}${w}=${R},`,"");if(nz(d)&&h!=="_self")return Ej(e||"",h),new xI(null);const _=window.open(e||"",h,g);Ae(_,n,"popup-blocked");try{_.focus()}catch{}return new xI(_)}function Ej(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj="__/auth/handler",wj="emulator/auth/handler",bj=encodeURIComponent("fac");async function DI(n,e,t,i,r,a){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:il,eventId:r};if(e instanceof HN){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",kp(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,_]of Object.entries({}))l[g]=_}if(e instanceof Qf){const g=e.getScopes().filter(_=>_!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const f=await n._getAppCheckToken(),d=f?`#${bj}=${encodeURIComponent(f)}`:"";return`${Aj(n)}?${rc(h).slice(1)}${d}`}function Aj({config:n}){return n.emulator?GE(n,wj):`https://${n.authDomain}/${Sj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="webStorageSupport";class Cj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=QN,this._completeRedirectFn=Qz,this._overrideRedirectResult=$z}async _openPopup(e,t,i,r){Tr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await DI(e,t,i,Z0(),r);return Tj(e,a,XE())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await DI(e,t,i,Z0(),r);return xz(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(Tr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await mj(e),i=new Jz(e);return t.register("authEvent",r=>(Ae(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Zv,{type:Zv},r=>{const a=r?.[0]?.[Zv];a!==void 0&&t(!!a),vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ij(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return BN()||ON()||YE()}}const Ij=Cj;var NI="@firebase/auth",PI="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dj(n){Ha(new Ro("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;Ae(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zN(n)},d=new lz(i,r,a,f);return mz(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ha(new Ro("auth-internal",e=>{const t=WE(e.getProvider("auth").getImmediate());return(i=>new Rj(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ns(NI,PI,xj(n)),Ns(NI,PI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=300,Pj=nD("authIdTokenMaxAge")||Nj;let MI=null;const Mj=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Pj)return;const r=t?.token;MI!==r&&(MI=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Oj(n=dD()){const e=jg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=dz(n,{popupRedirectResolver:Ij,persistence:[Uz,YN,QN]}),i=nD("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=Mj(a.toString());bz(t,l,()=>l(t.currentUser)),wz(t,h=>l(h))}}const r=eD("auth");return r&&pz(t,`http://${r}`),t}function Vj(){return document.getElementsByTagName("head")?.[0]??document}uz({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=Ps("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",Vj().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dj("Browser");var OI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wo,iP;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,A){function x(){}x.prototype=A.prototype,I.F=A.prototype,I.prototype=new x,I.prototype.constructor=I,I.D=function(L,V,q){for(var P=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)P[dt-2]=arguments[dt];return A.prototype[V].apply(L,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,A,x){x||(x=0);const L=Array(16);if(typeof A=="string")for(var V=0;V<16;++V)L[V]=A.charCodeAt(x++)|A.charCodeAt(x++)<<8|A.charCodeAt(x++)<<16|A.charCodeAt(x++)<<24;else for(V=0;V<16;++V)L[V]=A[x++]|A[x++]<<8|A[x++]<<16|A[x++]<<24;A=I.g[0],x=I.g[1],V=I.g[2];let q=I.g[3],P;P=A+(q^x&(V^q))+L[0]+3614090360&4294967295,A=x+(P<<7&4294967295|P>>>25),P=q+(V^A&(x^V))+L[1]+3905402710&4294967295,q=A+(P<<12&4294967295|P>>>20),P=V+(x^q&(A^x))+L[2]+606105819&4294967295,V=q+(P<<17&4294967295|P>>>15),P=x+(A^V&(q^A))+L[3]+3250441966&4294967295,x=V+(P<<22&4294967295|P>>>10),P=A+(q^x&(V^q))+L[4]+4118548399&4294967295,A=x+(P<<7&4294967295|P>>>25),P=q+(V^A&(x^V))+L[5]+1200080426&4294967295,q=A+(P<<12&4294967295|P>>>20),P=V+(x^q&(A^x))+L[6]+2821735955&4294967295,V=q+(P<<17&4294967295|P>>>15),P=x+(A^V&(q^A))+L[7]+4249261313&4294967295,x=V+(P<<22&4294967295|P>>>10),P=A+(q^x&(V^q))+L[8]+1770035416&4294967295,A=x+(P<<7&4294967295|P>>>25),P=q+(V^A&(x^V))+L[9]+2336552879&4294967295,q=A+(P<<12&4294967295|P>>>20),P=V+(x^q&(A^x))+L[10]+4294925233&4294967295,V=q+(P<<17&4294967295|P>>>15),P=x+(A^V&(q^A))+L[11]+2304563134&4294967295,x=V+(P<<22&4294967295|P>>>10),P=A+(q^x&(V^q))+L[12]+1804603682&4294967295,A=x+(P<<7&4294967295|P>>>25),P=q+(V^A&(x^V))+L[13]+4254626195&4294967295,q=A+(P<<12&4294967295|P>>>20),P=V+(x^q&(A^x))+L[14]+2792965006&4294967295,V=q+(P<<17&4294967295|P>>>15),P=x+(A^V&(q^A))+L[15]+1236535329&4294967295,x=V+(P<<22&4294967295|P>>>10),P=A+(V^q&(x^V))+L[1]+4129170786&4294967295,A=x+(P<<5&4294967295|P>>>27),P=q+(x^V&(A^x))+L[6]+3225465664&4294967295,q=A+(P<<9&4294967295|P>>>23),P=V+(A^x&(q^A))+L[11]+643717713&4294967295,V=q+(P<<14&4294967295|P>>>18),P=x+(q^A&(V^q))+L[0]+3921069994&4294967295,x=V+(P<<20&4294967295|P>>>12),P=A+(V^q&(x^V))+L[5]+3593408605&4294967295,A=x+(P<<5&4294967295|P>>>27),P=q+(x^V&(A^x))+L[10]+38016083&4294967295,q=A+(P<<9&4294967295|P>>>23),P=V+(A^x&(q^A))+L[15]+3634488961&4294967295,V=q+(P<<14&4294967295|P>>>18),P=x+(q^A&(V^q))+L[4]+3889429448&4294967295,x=V+(P<<20&4294967295|P>>>12),P=A+(V^q&(x^V))+L[9]+568446438&4294967295,A=x+(P<<5&4294967295|P>>>27),P=q+(x^V&(A^x))+L[14]+3275163606&4294967295,q=A+(P<<9&4294967295|P>>>23),P=V+(A^x&(q^A))+L[3]+4107603335&4294967295,V=q+(P<<14&4294967295|P>>>18),P=x+(q^A&(V^q))+L[8]+1163531501&4294967295,x=V+(P<<20&4294967295|P>>>12),P=A+(V^q&(x^V))+L[13]+2850285829&4294967295,A=x+(P<<5&4294967295|P>>>27),P=q+(x^V&(A^x))+L[2]+4243563512&4294967295,q=A+(P<<9&4294967295|P>>>23),P=V+(A^x&(q^A))+L[7]+1735328473&4294967295,V=q+(P<<14&4294967295|P>>>18),P=x+(q^A&(V^q))+L[12]+2368359562&4294967295,x=V+(P<<20&4294967295|P>>>12),P=A+(x^V^q)+L[5]+4294588738&4294967295,A=x+(P<<4&4294967295|P>>>28),P=q+(A^x^V)+L[8]+2272392833&4294967295,q=A+(P<<11&4294967295|P>>>21),P=V+(q^A^x)+L[11]+1839030562&4294967295,V=q+(P<<16&4294967295|P>>>16),P=x+(V^q^A)+L[14]+4259657740&4294967295,x=V+(P<<23&4294967295|P>>>9),P=A+(x^V^q)+L[1]+2763975236&4294967295,A=x+(P<<4&4294967295|P>>>28),P=q+(A^x^V)+L[4]+1272893353&4294967295,q=A+(P<<11&4294967295|P>>>21),P=V+(q^A^x)+L[7]+4139469664&4294967295,V=q+(P<<16&4294967295|P>>>16),P=x+(V^q^A)+L[10]+3200236656&4294967295,x=V+(P<<23&4294967295|P>>>9),P=A+(x^V^q)+L[13]+681279174&4294967295,A=x+(P<<4&4294967295|P>>>28),P=q+(A^x^V)+L[0]+3936430074&4294967295,q=A+(P<<11&4294967295|P>>>21),P=V+(q^A^x)+L[3]+3572445317&4294967295,V=q+(P<<16&4294967295|P>>>16),P=x+(V^q^A)+L[6]+76029189&4294967295,x=V+(P<<23&4294967295|P>>>9),P=A+(x^V^q)+L[9]+3654602809&4294967295,A=x+(P<<4&4294967295|P>>>28),P=q+(A^x^V)+L[12]+3873151461&4294967295,q=A+(P<<11&4294967295|P>>>21),P=V+(q^A^x)+L[15]+530742520&4294967295,V=q+(P<<16&4294967295|P>>>16),P=x+(V^q^A)+L[2]+3299628645&4294967295,x=V+(P<<23&4294967295|P>>>9),P=A+(V^(x|~q))+L[0]+4096336452&4294967295,A=x+(P<<6&4294967295|P>>>26),P=q+(x^(A|~V))+L[7]+1126891415&4294967295,q=A+(P<<10&4294967295|P>>>22),P=V+(A^(q|~x))+L[14]+2878612391&4294967295,V=q+(P<<15&4294967295|P>>>17),P=x+(q^(V|~A))+L[5]+4237533241&4294967295,x=V+(P<<21&4294967295|P>>>11),P=A+(V^(x|~q))+L[12]+1700485571&4294967295,A=x+(P<<6&4294967295|P>>>26),P=q+(x^(A|~V))+L[3]+2399980690&4294967295,q=A+(P<<10&4294967295|P>>>22),P=V+(A^(q|~x))+L[10]+4293915773&4294967295,V=q+(P<<15&4294967295|P>>>17),P=x+(q^(V|~A))+L[1]+2240044497&4294967295,x=V+(P<<21&4294967295|P>>>11),P=A+(V^(x|~q))+L[8]+1873313359&4294967295,A=x+(P<<6&4294967295|P>>>26),P=q+(x^(A|~V))+L[15]+4264355552&4294967295,q=A+(P<<10&4294967295|P>>>22),P=V+(A^(q|~x))+L[6]+2734768916&4294967295,V=q+(P<<15&4294967295|P>>>17),P=x+(q^(V|~A))+L[13]+1309151649&4294967295,x=V+(P<<21&4294967295|P>>>11),P=A+(V^(x|~q))+L[4]+4149444226&4294967295,A=x+(P<<6&4294967295|P>>>26),P=q+(x^(A|~V))+L[11]+3174756917&4294967295,q=A+(P<<10&4294967295|P>>>22),P=V+(A^(q|~x))+L[2]+718787259&4294967295,V=q+(P<<15&4294967295|P>>>17),P=x+(q^(V|~A))+L[9]+3951481745&4294967295,I.g[0]=I.g[0]+A&4294967295,I.g[1]=I.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+V&4294967295,I.g[3]=I.g[3]+q&4294967295}i.prototype.v=function(I,A){A===void 0&&(A=I.length);const x=A-this.blockSize,L=this.C;let V=this.h,q=0;for(;q<A;){if(V==0)for(;q<=x;)r(this,I,q),q+=this.blockSize;if(typeof I=="string"){for(;q<A;)if(L[V++]=I.charCodeAt(q++),V==this.blockSize){r(this,L),V=0;break}}else for(;q<A;)if(L[V++]=I[q++],V==this.blockSize){r(this,L),V=0;break}}this.h=V,this.o+=A},i.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var A=1;A<I.length-8;++A)I[A]=0;A=this.o*8;for(var x=I.length-8;x<I.length;++x)I[x]=A&255,A/=256;for(this.v(I),I=Array(16),A=0,x=0;x<4;++x)for(let L=0;L<32;L+=8)I[A++]=this.g[x]>>>L&255;return I};function a(I,A){var x=h;return Object.prototype.hasOwnProperty.call(x,I)?x[I]:x[I]=A(I)}function l(I,A){this.h=A;const x=[];let L=!0;for(let V=I.length-1;V>=0;V--){const q=I[V]|0;L&&q==A||(x[V]=q,L=!1)}this.g=x}var h={};function f(I){return-128<=I&&I<128?a(I,function(A){return new l([A|0],A<0?-1:0)}):new l([I|0],I<0?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return _;if(I<0)return D(d(-I));const A=[];let x=1;for(let L=0;I>=x;L++)A[L]=I/x|0,x*=4294967296;return new l(A,0)}function g(I,A){if(I.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(I.charAt(0)=="-")return D(g(I.substring(1),A));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=d(Math.pow(A,8));let L=_;for(let q=0;q<I.length;q+=8){var V=Math.min(8,I.length-q);const P=parseInt(I.substring(q,q+V),A);V<8?(V=d(Math.pow(A,V)),L=L.j(V).add(d(P))):(L=L.j(x),L=L.add(d(P)))}return L}var _=f(0),T=f(1),w=f(16777216);n=l.prototype,n.m=function(){if(N(this))return-D(this).m();let I=0,A=1;for(let x=0;x<this.g.length;x++){const L=this.i(x);I+=(L>=0?L:4294967296+L)*A,A*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(R(this))return"0";if(N(this))return"-"+D(this).toString(I);const A=d(Math.pow(I,6));var x=this;let L="";for(;;){const V=ee(x,A).g;x=F(x,V.j(A));let q=((x.g.length>0?x.g[0]:x.h)>>>0).toString(I);if(x=V,R(x))return q+L;for(;q.length<6;)q="0"+q;L=q+L}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function R(I){if(I.h!=0)return!1;for(let A=0;A<I.g.length;A++)if(I.g[A]!=0)return!1;return!0}function N(I){return I.h==-1}n.l=function(I){return I=F(this,I),N(I)?-1:R(I)?0:1};function D(I){const A=I.g.length,x=[];for(let L=0;L<A;L++)x[L]=~I.g[L];return new l(x,~I.h).add(T)}n.abs=function(){return N(this)?D(this):this},n.add=function(I){const A=Math.max(this.g.length,I.g.length),x=[];let L=0;for(let V=0;V<=A;V++){let q=L+(this.i(V)&65535)+(I.i(V)&65535),P=(q>>>16)+(this.i(V)>>>16)+(I.i(V)>>>16);L=P>>>16,q&=65535,P&=65535,x[V]=P<<16|q}return new l(x,x[x.length-1]&-2147483648?-1:0)};function F(I,A){return I.add(D(A))}n.j=function(I){if(R(this)||R(I))return _;if(N(this))return N(I)?D(this).j(D(I)):D(D(this).j(I));if(N(I))return D(this.j(D(I)));if(this.l(w)<0&&I.l(w)<0)return d(this.m()*I.m());const A=this.g.length+I.g.length,x=[];for(var L=0;L<2*A;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(let V=0;V<I.g.length;V++){const q=this.i(L)>>>16,P=this.i(L)&65535,dt=I.i(V)>>>16,Rt=I.i(V)&65535;x[2*L+2*V]+=P*Rt,z(x,2*L+2*V),x[2*L+2*V+1]+=q*Rt,z(x,2*L+2*V+1),x[2*L+2*V+1]+=P*dt,z(x,2*L+2*V+1),x[2*L+2*V+2]+=q*dt,z(x,2*L+2*V+2)}for(I=0;I<A;I++)x[I]=x[2*I+1]<<16|x[2*I];for(I=A;I<2*A;I++)x[I]=0;return new l(x,0)};function z(I,A){for(;(I[A]&65535)!=I[A];)I[A+1]+=I[A]>>>16,I[A]&=65535,A++}function k(I,A){this.g=I,this.h=A}function ee(I,A){if(R(A))throw Error("division by zero");if(R(I))return new k(_,_);if(N(I))return A=ee(D(I),A),new k(D(A.g),D(A.h));if(N(A))return A=ee(I,D(A)),new k(D(A.g),A.h);if(I.g.length>30){if(N(I)||N(A))throw Error("slowDivide_ only works with positive integers.");for(var x=T,L=A;L.l(I)<=0;)x=X(x),L=X(L);var V=re(x,1),q=re(L,1);for(L=re(L,2),x=re(x,2);!R(L);){var P=q.add(L);P.l(I)<=0&&(V=V.add(x),q=P),L=re(L,1),x=re(x,1)}return A=F(I,V.j(A)),new k(V,A)}for(V=_;I.l(A)>=0;){for(x=Math.max(1,Math.floor(I.m()/A.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),q=d(x),P=q.j(A);N(P)||P.l(I)>0;)x-=L,q=d(x),P=q.j(A);R(q)&&(q=T),V=V.add(q),I=F(I,P)}return new k(V,I)}n.B=function(I){return ee(this,I).h},n.and=function(I){const A=Math.max(this.g.length,I.g.length),x=[];for(let L=0;L<A;L++)x[L]=this.i(L)&I.i(L);return new l(x,this.h&I.h)},n.or=function(I){const A=Math.max(this.g.length,I.g.length),x=[];for(let L=0;L<A;L++)x[L]=this.i(L)|I.i(L);return new l(x,this.h|I.h)},n.xor=function(I){const A=Math.max(this.g.length,I.g.length),x=[];for(let L=0;L<A;L++)x[L]=this.i(L)^I.i(L);return new l(x,this.h^I.h)};function X(I){const A=I.g.length+1,x=[];for(let L=0;L<A;L++)x[L]=I.i(L)<<1|I.i(L-1)>>>31;return new l(x,I.h)}function re(I,A){const x=A>>5;A%=32;const L=I.g.length-x,V=[];for(let q=0;q<L;q++)V[q]=A>0?I.i(q+x)>>>A|I.i(q+x+1)<<32-A:I.i(q+x);return new l(V,I.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,iP=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=g,wo=l}).apply(typeof OI<"u"?OI:typeof self<"u"?self:typeof window<"u"?window:{});var Km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sP,kh,rP,fp,nT,oP,aP,lP;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Km=="object"&&Km];for(var v=0;v<m.length;++v){var S=m[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=t(this);function r(m,v){if(v)e:{var S=i;m=m.split(".");for(var C=0;C<m.length-1;C++){var G=m[C];if(!(G in S))break e;S=S[G]}m=m[m.length-1],C=S[m],v=v(C),v!=C&&v!=null&&e(S,m,{configurable:!0,writable:!0,value:v})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(v){var S=[],C;for(C in v)Object.prototype.hasOwnProperty.call(v,C)&&S.push([C,v[C]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function h(m){var v=typeof m;return v=="object"&&m!=null||v=="function"}function f(m,v,S){return m.call.apply(m.bind,arguments)}function d(m,v,S){return d=f,d.apply(null,arguments)}function g(m,v){var S=Array.prototype.slice.call(arguments,1);return function(){var C=S.slice();return C.push.apply(C,arguments),m.apply(this,C)}}function _(m,v){function S(){}S.prototype=v.prototype,m.Z=v.prototype,m.prototype=new S,m.prototype.constructor=m,m.Ob=function(C,G,Q){for(var ce=Array(arguments.length-2),De=2;De<arguments.length;De++)ce[De-2]=arguments[De];return v.prototype[G].apply(C,ce)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const v=m.length;if(v>0){const S=Array(v);for(let C=0;C<v;C++)S[C]=m[C];return S}return[]}function R(m,v){for(let C=1;C<arguments.length;C++){const G=arguments[C];var S=typeof G;if(S=S!="object"?S:G?Array.isArray(G)?"array":S:"null",S=="array"||S=="object"&&typeof G.length=="number"){S=m.length||0;const Q=G.length||0;m.length=S+Q;for(let ce=0;ce<Q;ce++)m[S+ce]=G[ce]}else m.push(G)}}class N{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function D(m){l.setTimeout(()=>{throw m},0)}function F(){var m=I;let v=null;return m.g&&(v=m.g,m.g=m.g.next,m.g||(m.h=null),v.next=null),v}class z{constructor(){this.h=this.g=null}add(v,S){const C=k.get();C.set(v,S),this.h?this.h.next=C:this.g=C,this.h=C}}var k=new N(()=>new ee,m=>m.reset());class ee{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let X,re=!1,I=new z,A=()=>{const m=Promise.resolve(void 0);X=()=>{m.then(x)}};function x(){for(var m;m=F();){try{m.h.call(m.g)}catch(S){D(S)}var v=k;v.j(m),v.h<100&&(v.h++,m.next=v.g,v.g=m)}re=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(m,v){this.type=m,this.g=this.target=v,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,v=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const S=()=>{};l.addEventListener("test",S,v),l.removeEventListener("test",S,v)}catch{}return m})();function P(m){return/^[\s\xa0]*$/.test(m)}function dt(m,v){V.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,v)}_(dt,V),dt.prototype.init=function(m,v){const S=this.type=m.type,C=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=v,v=m.relatedTarget,v||(S=="mouseover"?v=m.fromElement:S=="mouseout"&&(v=m.toElement)),this.relatedTarget=v,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&dt.Z.h.call(this)},dt.prototype.h=function(){dt.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Rt="closure_listenable_"+(Math.random()*1e6|0),te=0;function ae(m,v,S,C,G){this.listener=m,this.proxy=null,this.src=v,this.type=S,this.capture=!!C,this.ha=G,this.key=++te,this.da=this.fa=!1}function pe(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Pe(m,v,S){for(const C in m)v.call(S,m[C],C,m)}function je(m,v){for(const S in m)v.call(void 0,m[S],S,m)}function B(m){const v={};for(const S in m)v[S]=m[S];return v}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(m,v){let S,C;for(let G=1;G<arguments.length;G++){C=arguments[G];for(S in C)m[S]=C[S];for(let Q=0;Q<se.length;Q++)S=se[Q],Object.prototype.hasOwnProperty.call(C,S)&&(m[S]=C[S])}}function me(m){this.src=m,this.g={},this.h=0}me.prototype.add=function(m,v,S,C,G){const Q=m.toString();m=this.g[Q],m||(m=this.g[Q]=[],this.h++);const ce=Me(m,v,C,G);return ce>-1?(v=m[ce],S||(v.fa=!1)):(v=new ae(v,this.src,Q,!!C,G),v.fa=S,m.push(v)),v};function Ce(m,v){const S=v.type;if(S in m.g){var C=m.g[S],G=Array.prototype.indexOf.call(C,v,void 0),Q;(Q=G>=0)&&Array.prototype.splice.call(C,G,1),Q&&(pe(v),m.g[S].length==0&&(delete m.g[S],m.h--))}}function Me(m,v,S,C){for(let G=0;G<m.length;++G){const Q=m[G];if(!Q.da&&Q.listener==v&&Q.capture==!!S&&Q.ha==C)return G}return-1}var $e="closure_lm_"+(Math.random()*1e6|0),en={};function vt(m,v,S,C,G){if(Array.isArray(v)){for(let Q=0;Q<v.length;Q++)vt(m,v[Q],S,C,G);return null}return S=_c(S),m&&m[Rt]?m.J(v,S,h(C)?!!C.capture:!1,G):jo(m,v,S,!1,C,G)}function jo(m,v,S,C,G,Q){if(!v)throw Error("Invalid event type");const ce=h(G)?!!G.capture:!!G;let De=qo(m);if(De||(m[$e]=De=new me(m)),S=De.add(v,S,C,ce,Q),S.proxy)return S;if(C=ul(),S.proxy=C,C.src=m,C.listener=S,m.addEventListener)q||(G=ce),G===void 0&&(G=!1),m.addEventListener(v.toString(),C,G);else if(m.attachEvent)m.attachEvent(ss(v.toString()),C);else if(m.addListener&&m.removeListener)m.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return S}function ul(){function m(S){return v.call(m.src,m.listener,S)}const v=gc;return m}function cl(m,v,S,C,G){if(Array.isArray(v))for(var Q=0;Q<v.length;Q++)cl(m,v[Q],S,C,G);else C=h(C)?!!C.capture:!!C,S=_c(S),m&&m[Rt]?(m=m.i,Q=String(v).toString(),Q in m.g&&(v=m.g[Q],S=Me(v,S,C,G),S>-1&&(pe(v[S]),Array.prototype.splice.call(v,S,1),v.length==0&&(delete m.g[Q],m.h--)))):m&&(m=qo(m))&&(v=m.g[v.toString()],m=-1,v&&(m=Me(v,S,C,G)),(S=m>-1?v[m]:null)&&hl(S))}function hl(m){if(typeof m!="number"&&m&&!m.da){var v=m.src;if(v&&v[Rt])Ce(v.i,m);else{var S=m.type,C=m.proxy;v.removeEventListener?v.removeEventListener(S,C,m.capture):v.detachEvent?v.detachEvent(ss(S),C):v.addListener&&v.removeListener&&v.removeListener(C),(S=qo(v))?(Ce(S,m),S.h==0&&(S.src=null,v[$e]=null)):pe(m)}}}function ss(m){return m in en?en[m]:en[m]="on"+m}function gc(m,v){if(m.da)m=!0;else{v=new dt(v,this);const S=m.listener,C=m.ha||m.src;m.fa&&hl(m),m=S.call(C,v)}return m}function qo(m){return m=m[$e],m instanceof me?m:null}var yc="__closure_events_fn_"+(Math.random()*1e9>>>0);function _c(m){return typeof m=="function"?m:(m[yc]||(m[yc]=function(v){return m.handleEvent(v)}),m[yc])}function Ft(){L.call(this),this.i=new me(this),this.M=this,this.G=null}_(Ft,L),Ft.prototype[Rt]=!0,Ft.prototype.removeEventListener=function(m,v,S,C){cl(this,m,v,S,C)};function tn(m,v){var S,C=m.G;if(C)for(S=[];C;C=C.G)S.push(C);if(m=m.M,C=v.type||v,typeof v=="string")v=new V(v,m);else if(v instanceof V)v.target=v.target||m;else{var G=v;v=new V(C,m),he(v,G)}G=!0;let Q,ce;if(S)for(ce=S.length-1;ce>=0;ce--)Q=v.g=S[ce],G=xr(Q,C,!0,v)&&G;if(Q=v.g=m,G=xr(Q,C,!0,v)&&G,G=xr(Q,C,!1,v)&&G,S)for(ce=0;ce<S.length;ce++)Q=v.g=S[ce],G=xr(Q,C,!1,v)&&G}Ft.prototype.N=function(){if(Ft.Z.N.call(this),this.i){var m=this.i;for(const v in m.g){const S=m.g[v];for(let C=0;C<S.length;C++)pe(S[C]);delete m.g[v],m.h--}}this.G=null},Ft.prototype.J=function(m,v,S,C){return this.i.add(String(m),v,!1,S,C)},Ft.prototype.K=function(m,v,S,C){return this.i.add(String(m),v,!0,S,C)};function xr(m,v,S,C){if(v=m.i.g[String(v)],!v)return!0;v=v.concat();let G=!0;for(let Q=0;Q<v.length;++Q){const ce=v[Q];if(ce&&!ce.da&&ce.capture==S){const De=ce.listener,Ot=ce.ha||ce.src;ce.fa&&Ce(m.i,ce),G=De.call(Ot,C)!==!1&&G}}return G&&!C.defaultPrevented}function Iy(m,v){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=d(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:l.setTimeout(m,v||0)}function cd(m){m.g=Iy(()=>{m.g=null,m.i&&(m.i=!1,cd(m))},m.l);const v=m.h;m.h=null,m.m.apply(null,v)}class Dn extends L{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:cd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ho(m){L.call(this),this.h=m,this.g={}}_(Ho,L);var vc=[];function Tc(m){Pe(m.g,function(v,S){this.g.hasOwnProperty(S)&&hl(v)},m),m.g={}}Ho.prototype.N=function(){Ho.Z.N.call(this),Tc(this)},Ho.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dr=l.JSON.stringify,Ry=l.JSON.parse,hd=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function fd(){}function dd(){}var Oi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function dn(){V.call(this,"d")}_(dn,V);function fi(){V.call(this,"c")}_(fi,V);var Mt={},md=null;function fl(){return md=md||new Ft}Mt.Ia="serverreachability";function pd(m){V.call(this,Mt.Ia,m)}_(pd,V);function rs(m){const v=fl();tn(v,new pd(v))}Mt.STAT_EVENT="statevent";function Go(m,v){V.call(this,Mt.STAT_EVENT,m),this.stat=v}_(Go,V);function Bt(m){const v=fl();tn(v,new Go(v,m))}Mt.Ja="timingevent";function os(m,v){V.call(this,Mt.Ja,m),this.size=v}_(os,V);function as(m,v){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},v)}function Vi(){this.g=!0}Vi.prototype.ua=function(){this.g=!1};function xy(m,v,S,C,G,Q){m.info(function(){if(m.g)if(Q){var ce="",De=Q.split("&");for(let Xe=0;Xe<De.length;Xe++){var Ot=De[Xe].split("=");if(Ot.length>1){const Tt=Ot[0];Ot=Ot[1];const gi=Tt.split("_");ce=gi.length>=2&&gi[1]=="type"?ce+(Tt+"="+Ot+"&"):ce+(Tt+"=redacted&")}}}else ce=null;else ce=Q;return"XMLHTTP REQ ("+C+") [attempt "+G+"]: "+v+`
`+S+`
`+ce})}function gd(m,v,S,C,G,Q,ce){m.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+G+"]: "+v+`
`+S+`
`+Q+" "+ce})}function ls(m,v,S,C){m.info(function(){return"XMLHTTP TEXT ("+v+"): "+Dy(m,S)+(C?" "+C:"")})}function Ko(m,v){m.info(function(){return"TIMEOUT: "+v})}Vi.prototype.info=function(){};function Dy(m,v){if(!m.g)return v;if(!v)return null;try{const Q=JSON.parse(v);if(Q){for(m=0;m<Q.length;m++)if(Array.isArray(Q[m])){var S=Q[m];if(!(S.length<2)){var C=S[1];if(Array.isArray(C)&&!(C.length<1)){var G=C[0];if(G!="noop"&&G!="stop"&&G!="close")for(let ce=1;ce<C.length;ce++)C[ce]=""}}}}return Dr(Q)}catch{return v}}var $o={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ec={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sc;function Yo(){}_(Yo,fd),Yo.prototype.g=function(){return new XMLHttpRequest},Sc=new Yo;function Bs(m){return encodeURIComponent(String(m))}function yd(m){var v=1;m=m.split(":");const S=[];for(;v>0&&m.length;)S.push(m.shift()),v--;return m.length&&S.push(m.join(":")),S}function ki(m,v,S,C){this.j=m,this.i=v,this.l=S,this.S=C||1,this.V=new Ho(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Li}function Li(){this.i=null,this.g="",this.h=!1}var zt={},on={};function us(m,v,S){m.M=1,m.A=Wo(qt(v)),m.u=S,m.R=!0,dl(m,null)}function dl(m,v){m.F=Date.now(),cs(m),m.B=qt(m.A);var S=m.B,C=m.S;Array.isArray(C)||(C=[String(C)]),yl(S.i,"t",C),m.C=0,S=m.j.L,m.h=new Li,m.g=Pd(m.j,S?v:null,!m.u),m.P>0&&(m.O=new Dn(d(m.Y,m,m.g),m.P)),v=m.V,S=m.g,C=m.ba;var G="readystatechange";Array.isArray(G)||(G&&(vc[0]=G.toString()),G=vc);for(let Q=0;Q<G.length;Q++){const ce=vt(S,G[Q],C||v.handleEvent,!1,v.h||v);if(!ce)break;v.g[ce.key]=ce}v=m.J?B(m.J):{},m.u?(m.v||(m.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,v)):(m.v="GET",m.g.ea(m.B,m.v,null,v)),rs(),xy(m.i,m.v,m.B,m.l,m.S,m.u)}ki.prototype.ba=function(m){m=m.target;const v=this.O;v&&Bi(m)==3?v.j():this.Y(m)},ki.prototype.Y=function(m){try{if(m==this.g)e:{const De=Bi(this.g),Ot=this.g.ya(),Xe=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||mn(this.g)))){this.K||De!=4||Ot==7||(Ot==8||Xe<=0?rs(3):rs(2)),hs(this);var v=this.g.ca();this.X=v;var S=Ny(this);if(this.o=v==200,gd(this.i,this.v,this.B,this.l,this.S,De,v),this.o){if(this.U&&!this.L){t:{if(this.g){var C,G=this.g;if((C=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(C)){var Q=C;break t}}Q=null}if(m=Q)ls(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,fs(this,m);else{this.o=!1,this.m=3,Bt(12),Qn(this),di(this);break e}}if(this.R){m=!0;let Tt;for(;!this.K&&this.C<S.length;)if(Tt=vd(this,S),Tt==on){De==4&&(this.m=4,Bt(14),m=!1),ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==zt){this.m=4,Bt(15),ls(this.i,this.l,S,"[Invalid Chunk]"),m=!1;break}else ls(this.i,this.l,Tt,null),fs(this,Tt);if(_d(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||S.length!=0||this.h.h||(this.m=1,Bt(16),m=!1),this.o=this.o&&m,!m)ls(this.i,this.l,S,"[Invalid Chunked Response]"),Qn(this),di(this);else if(S.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Lc(ce),ce.P=!0,Bt(11))}}else ls(this.i,this.l,S,null),fs(this,S);De==4&&Qn(this),this.o&&!this.K&&(De==4?Rd(this.j,this):(this.o=!1,cs(this)))}else js(this.g),v==400&&S.indexOf("Unknown SID")>0?(this.m=3,Bt(12)):(this.m=0,Bt(13)),Qn(this),di(this)}}}catch{}finally{}};function Ny(m){if(!_d(m))return m.g.la();const v=mn(m.g);if(v==="")return"";let S="";const C=v.length,G=Bi(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Qn(m),di(m),"";m.h.i=new l.TextDecoder}for(let Q=0;Q<C;Q++)m.h.h=!0,S+=m.h.i.decode(v[Q],{stream:!(G&&Q==C-1)});return v.length=0,m.h.g+=S,m.C=0,m.h.g}function _d(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function vd(m,v){var S=m.C,C=v.indexOf(`
`,S);return C==-1?on:(S=Number(v.substring(S,C)),isNaN(S)?zt:(C+=1,C+S>v.length?on:(v=v.slice(C,C+S),m.C=C+S,v)))}ki.prototype.cancel=function(){this.K=!0,Qn(this)};function cs(m){m.T=Date.now()+m.H,ml(m,m.H)}function ml(m,v){if(m.D!=null)throw Error("WatchDog timer not null");m.D=as(d(m.aa,m),v)}function hs(m){m.D&&(l.clearTimeout(m.D),m.D=null)}ki.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Ko(this.i,this.B),this.M!=2&&(rs(),Bt(17)),Qn(this),this.m=2,di(this)):ml(this,this.T-m)};function di(m){m.j.I==0||m.K||Rd(m.j,m)}function Qn(m){hs(m);var v=m.O;v&&typeof v.dispose=="function"&&v.dispose(),m.O=null,Tc(m.V),m.g&&(v=m.g,m.g=null,v.abort(),v.dispose())}function fs(m,v){try{var S=m.j;if(S.I!=0&&(S.g==m||ms(S.h,m))){if(!m.L&&ms(S.h,m)&&S.I==3){try{var C=S.Ba.g.parse(v)}catch{C=null}if(Array.isArray(C)&&C.length==3){var G=C;if(G[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<m.F)Sl(S),Ur(S);else break e;na(S),Bt(18)}}else S.xa=G[1],0<S.xa-S.K&&G[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=as(d(S.Va,S),6e3));ds(S.h)<=1&&S.ta&&(S.ta=void 0)}else Ts(S,11)}else if((m.L||S.g==m)&&Sl(S),!P(v))for(G=S.Ba.g.parse(v),v=0;v<G.length;v++){let Xe=G[v];const Tt=Xe[0];if(!(Tt<=S.K))if(S.K=Tt,Xe=Xe[1],S.I==2)if(Xe[0]=="c"){S.M=Xe[1],S.ba=Xe[2];const gi=Xe[3];gi!=null&&(S.ka=gi,S.j.info("VER="+S.ka));const Es=Xe[4];Es!=null&&(S.za=Es,S.j.info("SVER="+S.za));const zi=Xe[5];zi!=null&&typeof zi=="number"&&zi>0&&(C=1.5*zi,S.O=C,S.j.info("backChannelRequestTimeoutMs_="+C)),C=S;const ji=m.g;if(ji){const ia=ji.g?ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ia){var Q=C.h;Q.g||ia.indexOf("spdy")==-1&&ia.indexOf("quic")==-1&&ia.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Ac(Q,Q.h),Q.h=null))}if(C.G){const wl=ji.g?ji.g.getResponseHeader("X-HTTP-Session-Id"):null;wl&&(C.wa=wl,it(C.J,C.G,wl))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-m.F,S.j.info("Handshake RTT: "+S.T+"ms")),C=S;var ce=m;if(C.na=Nd(C,C.L?C.ba:null,C.W),ce.L){Cc(C.h,ce);var De=ce,Ot=C.O;Ot&&(De.H=Ot),De.D&&(hs(De),cs(De)),C.g=ce}else Cd(C);S.i.length>0&&vs(S)}else Xe[0]!="stop"&&Xe[0]!="close"||Ts(S,7);else S.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Ts(S,7):Vc(S):Xe[0]!="noop"&&S.l&&S.l.qa(Xe),S.A=0)}}rs(4)}catch{}}var jt=class{constructor(m,v){this.g=m,this.map=v}};function wc(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function bc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ds(m){return m.h?1:m.g?m.g.size:0}function ms(m,v){return m.h?m.h==v:m.g?m.g.has(v):!1}function Ac(m,v){m.g?m.g.add(v):m.h=v}function Cc(m,v){m.h&&m.h==v?m.h=null:m.g&&m.g.has(v)&&m.g.delete(v)}wc.prototype.cancel=function(){if(this.i=Ic(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Ic(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let v=m.i;for(const S of m.g.values())v=v.concat(S.G);return v}return w(m.i)}var Td=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pl(m,v){if(m){m=m.split("&");for(let S=0;S<m.length;S++){const C=m[S].indexOf("=");let G,Q=null;C>=0?(G=m[S].substring(0,C),Q=m[S].substring(C+1)):G=m[S],v(G,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Xn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;m instanceof Xn?(this.l=m.l,an(this,m.j),this.o=m.o,this.g=m.g,Nr(this,m.u),this.h=m.h,Rc(this,bd(m.i)),this.m=m.m):m&&(v=String(m).match(Td))?(this.l=!1,an(this,v[1]||"",!0),this.o=ps(v[2]||""),this.g=ps(v[3]||"",!0),Nr(this,v[4]),this.h=ps(v[5]||"",!0),Rc(this,v[6]||"",!0),this.m=ps(v[7]||"")):(this.l=!1,this.i=new Mr(null,this.l))}Xn.prototype.toString=function(){const m=[];var v=this.j;v&&m.push(Qo(v,gl,!0),":");var S=this.g;return(S||v=="file")&&(m.push("//"),(v=this.o)&&m.push(Qo(v,gl,!0),"@"),m.push(Bs(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&m.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&m.push("/"),m.push(Qo(S,S.charAt(0)=="/"?xc:Ed,!0))),(S=this.i.toString())&&m.push("?",S),(S=this.m)&&m.push("#",Qo(S,Sd)),m.join("")},Xn.prototype.resolve=function(m){const v=qt(this);let S=!!m.j;S?an(v,m.j):S=!!m.o,S?v.o=m.o:S=!!m.g,S?v.g=m.g:S=m.u!=null;var C=m.h;if(S)Nr(v,m.u);else if(S=!!m.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var G=v.h.lastIndexOf("/");G!=-1&&(C=v.h.slice(0,G+1)+C)}if(G=C,G==".."||G==".")C="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){C=G.lastIndexOf("/",0)==0,G=G.split("/");const Q=[];for(let ce=0;ce<G.length;){const De=G[ce++];De=="."?C&&ce==G.length&&Q.push(""):De==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),C&&ce==G.length&&Q.push("")):(Q.push(De),C=!0)}C=Q.join("/")}else C=G}return S?v.h=C:S=m.i.toString()!=="",S?Rc(v,bd(m.i)):S=!!m.m,S&&(v.m=m.m),v};function qt(m){return new Xn(m)}function an(m,v,S){m.j=S?ps(v,!0):v,m.j&&(m.j=m.j.replace(/:$/,""))}function Nr(m,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);m.u=v}else m.u=null}function Rc(m,v,S){v instanceof Mr?(m.i=v,_l(m.i,m.l)):(S||(v=Qo(v,Pr)),m.i=new Mr(v,m.l))}function it(m,v,S){m.i.set(v,S)}function Wo(m){return it(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function ps(m,v){return m?v?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Qo(m,v,S){return typeof m=="string"?(m=encodeURI(m).replace(v,Un),S&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Un(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var gl=/[#\/\?@]/g,Ed=/[#\?:]/g,xc=/[#\?]/g,Pr=/[#\?@]/g,Sd=/#/g;function Mr(m,v){this.h=this.g=null,this.i=m||null,this.j=!!v}function Fn(m){m.g||(m.g=new Map,m.h=0,m.i&&pl(m.i,function(v,S){m.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}n=Mr.prototype,n.add=function(m,v){Fn(this),this.i=null,m=Or(this,m);let S=this.g.get(m);return S||this.g.set(m,S=[]),S.push(v),this.h+=1,this};function wd(m,v){Fn(m),v=Or(m,v),m.g.has(v)&&(m.i=null,m.h-=m.g.get(v).length,m.g.delete(v))}function Dc(m,v){return Fn(m),v=Or(m,v),m.g.has(v)}n.forEach=function(m,v){Fn(this),this.g.forEach(function(S,C){S.forEach(function(G){m.call(v,G,C,this)},this)},this)};function Nc(m,v){Fn(m);let S=[];if(typeof v=="string")Dc(m,v)&&(S=S.concat(m.g.get(Or(m,v))));else for(m=Array.from(m.g.values()),v=0;v<m.length;v++)S=S.concat(m[v]);return S}n.set=function(m,v){return Fn(this),this.i=null,m=Or(this,m),Dc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[v]),this.h+=1,this},n.get=function(m,v){return m?(m=Nc(this,m),m.length>0?String(m[0]):v):v};function yl(m,v,S){wd(m,v),S.length>0&&(m.i=null,m.g.set(Or(m,v),w(S)),m.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],v=Array.from(this.g.keys());for(let C=0;C<v.length;C++){var S=v[C];const G=Bs(S);S=Nc(this,S);for(let Q=0;Q<S.length;Q++){let ce=G;S[Q]!==""&&(ce+="="+Bs(S[Q])),m.push(ce)}}return this.i=m.join("&")};function bd(m){const v=new Mr;return v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),v}function Or(m,v){return v=String(v),m.j&&(v=v.toLowerCase()),v}function _l(m,v){v&&!m.j&&(Fn(m),m.i=null,m.g.forEach(function(S,C){const G=C.toLowerCase();C!=G&&(wd(this,C),yl(this,G,S))},m)),m.j=v}function Ui(m,v){const S=new Vi;if(l.Image){const C=new Image;C.onload=g(mi,S,"TestLoadImage: loaded",!0,v,C),C.onerror=g(mi,S,"TestLoadImage: error",!1,v,C),C.onabort=g(mi,S,"TestLoadImage: abort",!1,v,C),C.ontimeout=g(mi,S,"TestLoadImage: timeout",!1,v,C),l.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=m}else v(!1)}function Pc(m,v){const S=new Vi,C=new AbortController,G=setTimeout(()=>{C.abort(),mi(S,"TestPingServer: timeout",!1,v)},1e4);fetch(m,{signal:C.signal}).then(Q=>{clearTimeout(G),Q.ok?mi(S,"TestPingServer: ok",!0,v):mi(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(G),mi(S,"TestPingServer: error",!1,v)})}function mi(m,v,S,C,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),C(S)}catch{}}function Vr(){this.g=new hd}function gs(m){this.i=m.Sb||null,this.h=m.ab||!1}_(gs,fd),gs.prototype.g=function(){return new Xo(this.i,this.h)};function Xo(m,v){Ft.call(this),this.H=m,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Xo,Ft),n=Xo.prototype,n.open=function(m,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=v,this.readyState=1,Fi(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(v.body=m),(this.H||l).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,kr(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;vl(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function vl(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var v=m.value?m.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!m.done}))&&(this.response=this.responseText+=v)}m.done?kr(this):Fi(this),this.readyState==3&&vl(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,kr(this))},n.Na=function(m){this.g&&(this.response=m,kr(this))},n.ga=function(){this.g&&kr(this)};function kr(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Fi(m)}n.setRequestHeader=function(m,v){this.A.append(m,v)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,m.push(S[0]+": "+S[1]),S=v.next();return m.join(`\r
`)};function Fi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Xo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function pi(m){let v="";return Pe(m,function(S,C){v+=C,v+=":",v+=S,v+=`\r
`}),v}function Jo(m,v,S){e:{for(C in S){var C=!1;break e}C=!0}C||(S=pi(S),typeof m=="string"?S!=null&&Bs(S):it(m,v,S))}function lt(m){Ft.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(lt,Ft);var ys=/^https?$/i,Mc=["POST","PUT"];n=lt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,v,S,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);v=v?v.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sc.g(),this.g.onreadystatechange=T(d(this.Ca,this));try{this.B=!0,this.g.open(v,String(m),!0),this.B=!1}catch(Q){Zo(this,Q);return}if(m=S||"",S=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var G in C)S.set(G,C[G]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const Q of C.keys())S.set(Q,C.get(Q));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(S.keys()).find(Q=>Q.toLowerCase()=="content-type"),G=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(Mc,v,void 0)>=0)||C||G||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ce]of S)this.g.setRequestHeader(Q,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Q){Zo(this,Q)}};function Zo(m,v){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=v,m.o=5,Oc(m),zs(m)}function Oc(m){m.A||(m.A=!0,tn(m,"complete"),tn(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,tn(this,"complete"),tn(this,"abort"),zs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zs(this,!0)),lt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ea(this):this.Xa())},n.Xa=function(){ea(this)};function ea(m){if(m.h&&typeof a<"u"){if(m.v&&Bi(m)==4)setTimeout(m.Ca.bind(m),0);else if(tn(m,"readystatechange"),Bi(m)==4){m.h=!1;try{const Q=m.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var C;if(C=Q===0){let ce=String(m.D).match(Td)[1]||null;!ce&&l.self&&l.self.location&&(ce=l.self.location.protocol.slice(0,-1)),C=!ys.test(ce?ce.toLowerCase():"")}S=C}if(S)tn(m,"complete"),tn(m,"success");else{m.o=6;try{var G=Bi(m)>2?m.g.statusText:""}catch{G=""}m.l=G+" ["+m.ca()+"]",Oc(m)}}finally{zs(m)}}}}function zs(m,v){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const S=m.g;m.g=null,v||tn(m,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Bi(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Bi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var v=this.g.responseText;return m&&v.indexOf(m)==0&&(v=v.substring(m.length)),Ry(v)}};function mn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function js(m){const v={};m=(m.g&&Bi(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<m.length;C++){if(P(m[C]))continue;var S=yd(m[C]);const G=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const Q=v[G]||[];v[G]=Q,Q.push(S)}je(v,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _s(m,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[m]||v}function Lr(m){this.za=0,this.i=[],this.j=new Vi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_s("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_s("baseRetryDelayMs",5e3,m),this.Za=_s("retryDelaySeedMs",1e4,m),this.Ta=_s("forwardChannelMaxRetries",2,m),this.va=_s("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new wc(m&&m.concurrentRequestLimit),this.Ba=new Vr,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Lr.prototype,n.ka=8,n.I=1,n.connect=function(m,v,S,C){Bt(0),this.W=m,this.H=v||{},S&&C!==void 0&&(this.H.OSID=S,this.H.OAID=C),this.F=this.X,this.J=Nd(this,null,this.W),vs(this)};function Vc(m){if(Tl(m),m.I==3){var v=m.V++,S=qt(m.J);if(it(S,"SID",m.M),it(S,"RID",v),it(S,"TYPE","terminate"),ta(m,S),v=new ki(m,m.j,v),v.M=2,v.A=Wo(qt(S)),S=!1,l.navigator&&l.navigator.sendBeacon)try{S=l.navigator.sendBeacon(v.A.toString(),"")}catch{}!S&&l.Image&&(new Image().src=v.A,S=!0),S||(v.g=Pd(v.j,null),v.g.ea(v.A)),v.F=Date.now(),cs(v)}Dd(m)}function Ur(m){m.g&&(Lc(m),m.g.cancel(),m.g=null)}function Tl(m){Ur(m),m.v&&(l.clearTimeout(m.v),m.v=null),Sl(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function vs(m){if(!bc(m.h)&&!m.m){m.m=!0;var v=m.Ea;X||A(),re||(X(),re=!0),I.add(v,m),m.D=0}}function El(m,v){return ds(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=v.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=as(d(m.Ea,m,v),xd(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const G=new ki(this,this.j,m);let Q=this.o;if(this.U&&(Q?(Q=B(Q),he(Q,this.U)):Q=this.U),this.u!==null||this.R||(G.J=Q,Q=null),this.S)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var C=this.i[S];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(v+=C,v>4096){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=Ad(this,G,v),S=qt(this.J),it(S,"RID",m),it(S,"CVER",22),this.G&&it(S,"X-HTTP-Session-Id",this.G),ta(this,S),Q&&(this.R?v="headers="+Bs(pi(Q))+"&"+v:this.u&&Jo(S,this.u,Q)),Ac(this.h,G),this.Ra&&it(S,"TYPE","init"),this.S?(it(S,"$req",v),it(S,"SID","null"),G.U=!0,us(G,S,null)):us(G,S,v),this.I=2}}else this.I==3&&(m?kc(this,m):this.i.length==0||bc(this.h)||kc(this))};function kc(m,v){var S;v?S=v.l:S=m.V++;const C=qt(m.J);it(C,"SID",m.M),it(C,"RID",S),it(C,"AID",m.K),ta(m,C),m.u&&m.o&&Jo(C,m.u,m.o),S=new ki(m,m.j,S,m.D+1),m.u===null&&(S.J=m.o),v&&(m.i=v.G.concat(m.i)),v=Ad(m,S,1e3),S.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Ac(m.h,S),us(S,C,v)}function ta(m,v){m.H&&Pe(m.H,function(S,C){it(v,C,S)}),m.l&&Pe({},function(S,C){it(v,C,S)})}function Ad(m,v,S){S=Math.min(m.i.length,S);const C=m.l?d(m.l.Ka,m.l,m):null;e:{var G=m.i;let De=-1;for(;;){const Ot=["count="+S];De==-1?S>0?(De=G[0].g,Ot.push("ofs="+De)):De=0:Ot.push("ofs="+De);let Xe=!0;for(let Tt=0;Tt<S;Tt++){var Q=G[Tt].g;const gi=G[Tt].map;if(Q-=De,Q<0)De=Math.max(0,G[Tt].g-100),Xe=!1;else try{Q="req"+Q+"_"||"";try{var ce=gi instanceof Map?gi:Object.entries(gi);for(const[Es,zi]of ce){let ji=zi;h(zi)&&(ji=Dr(zi)),Ot.push(Q+Es+"="+encodeURIComponent(ji))}}catch(Es){throw Ot.push(Q+"type="+encodeURIComponent("_badmap")),Es}}catch{C&&C(gi)}}if(Xe){ce=Ot.join("&");break e}}ce=void 0}return m=m.i.splice(0,S),v.G=m,ce}function Cd(m){if(!m.g&&!m.v){m.Y=1;var v=m.Da;X||A(),re||(X(),re=!0),I.add(v,m),m.A=0}}function na(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=as(d(m.Da,m),xd(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Id(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=as(d(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Bt(10),Ur(this),Id(this))};function Lc(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function Id(m){m.g=new ki(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var v=qt(m.na);it(v,"RID","rpc"),it(v,"SID",m.M),it(v,"AID",m.K),it(v,"CI",m.F?"0":"1"),!m.F&&m.ia&&it(v,"TO",m.ia),it(v,"TYPE","xmlhttp"),ta(m,v),m.u&&m.o&&Jo(v,m.u,m.o),m.O&&(m.g.H=m.O);var S=m.g;m=m.ba,S.M=1,S.A=Wo(qt(v)),S.u=null,S.R=!0,dl(S,m)}n.Va=function(){this.C!=null&&(this.C=null,Ur(this),na(this),Bt(19))};function Sl(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function Rd(m,v){var S=null;if(m.g==v){Sl(m),Lc(m),m.g=null;var C=2}else if(ms(m.h,v))S=v.G,Cc(m.h,v),C=1;else return;if(m.I!=0){if(v.o)if(C==1){S=v.u?v.u.length:0,v=Date.now()-v.F;var G=m.D;C=fl(),tn(C,new os(C,S)),vs(m)}else Cd(m);else if(G=v.m,G==3||G==0&&v.X>0||!(C==1&&El(m,v)||C==2&&na(m)))switch(S&&S.length>0&&(v=m.h,v.i=v.i.concat(S)),G){case 1:Ts(m,5);break;case 4:Ts(m,10);break;case 3:Ts(m,6);break;default:Ts(m,2)}}}function xd(m,v){let S=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(S*=2),S*v}function Ts(m,v){if(m.j.info("Error code "+v),v==2){var S=d(m.bb,m),C=m.Ua;const G=!C;C=new Xn(C||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||an(C,"https"),Wo(C),G?Ui(C.toString(),S):Pc(C.toString(),S)}else Bt(2);m.I=0,m.l&&m.l.pa(v),Dd(m),Tl(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function Dd(m){if(m.I=0,m.ja=[],m.l){const v=Ic(m.h);(v.length!=0||m.i.length!=0)&&(R(m.ja,v),R(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function Nd(m,v,S){var C=S instanceof Xn?qt(S):new Xn(S);if(C.g!="")v&&(C.g=v+"."+C.g),Nr(C,C.u);else{var G=l.location;C=G.protocol,v=v?v+"."+G.hostname:G.hostname,G=+G.port;const Q=new Xn(null);C&&an(Q,C),v&&(Q.g=v),G&&Nr(Q,G),S&&(Q.h=S),C=Q}return S=m.G,v=m.wa,S&&v&&it(C,S,v),it(C,"VER",m.ka),ta(m,C),C}function Pd(m,v,S){if(v&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=m.Aa&&!m.ma?new lt(new gs({ab:S})):new lt(m.ma),v.Fa(m.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Md(){}n=Md.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Fr(){}Fr.prototype.g=function(m,v){return new Nn(m,v)};function Nn(m,v){Ft.call(this),this.g=new Lr(v),this.l=m,this.h=v&&v.messageUrlParams||null,m=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(m?m["X-WebChannel-Content-Type"]=v.messageContentType:m={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(m?m["X-WebChannel-Client-Profile"]=v.sa:m={"X-WebChannel-Client-Profile":v.sa}),this.g.U=m,(m=v&&v.Qb)&&!P(m)&&(this.g.u=m),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!P(v)&&(this.g.G=v,m=this.h,m!==null&&v in m&&(m=this.h,v in m&&delete m[v])),this.j=new qs(this)}_(Nn,Ft),Nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Nn.prototype.close=function(){Vc(this.g)},Nn.prototype.o=function(m){var v=this.g;if(typeof m=="string"){var S={};S.__data__=m,m=S}else this.v&&(S={},S.__data__=Dr(m),m=S);v.i.push(new jt(v.Ya++,m)),v.I==3&&vs(v)},Nn.prototype.N=function(){this.g.l=null,delete this.j,Vc(this.g),delete this.g,Nn.Z.N.call(this)};function Od(m){dn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var v=m.__sm__;if(v){e:{for(const S in v){m=S;break e}m=void 0}(this.i=m)&&(m=this.i,v=v!==null&&m in v?v[m]:void 0),this.data=v}else this.data=m}_(Od,dn);function Vd(){fi.call(this),this.status=1}_(Vd,fi);function qs(m){this.g=m}_(qs,Md),qs.prototype.ra=function(){tn(this.g,"a")},qs.prototype.qa=function(m){tn(this.g,new Od(m))},qs.prototype.pa=function(m){tn(this.g,new Vd)},qs.prototype.oa=function(){tn(this.g,"b")},Fr.prototype.createWebChannel=Fr.prototype.g,Nn.prototype.send=Nn.prototype.o,Nn.prototype.open=Nn.prototype.m,Nn.prototype.close=Nn.prototype.close,lP=function(){return new Fr},aP=function(){return fl()},oP=Mt,nT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},$o.NO_ERROR=0,$o.TIMEOUT=8,$o.HTTP_ERROR=6,fp=$o,Ec.COMPLETE="complete",rP=Ec,dd.EventType=Oi,Oi.OPEN="a",Oi.CLOSE="b",Oi.ERROR="c",Oi.MESSAGE="d",Ft.prototype.listen=Ft.prototype.J,kh=dd,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,sP=lt}).apply(typeof Km<"u"?Km:typeof self<"u"?self:typeof window<"u"?window:{});const VI="@firebase/firestore",kI="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mn.UNAUTHENTICATED=new Mn(null),Mn.GOOGLE_CREDENTIALS=new Mn("google-credentials-uid"),Mn.FIRST_PARTY=new Mn("first-party-uid"),Mn.MOCK_USER=new Mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new zg("@firebase/firestore");function lu(){return Qa.logLevel}function le(n,...e){if(Qa.logLevel<=ze.DEBUG){const t=e.map(ZE);Qa.debug(`Firestore (${cc}): ${n}`,...t)}}function On(n,...e){if(Qa.logLevel<=ze.ERROR){const t=e.map(ZE);Qa.error(`Firestore (${cc}): ${n}`,...t)}}function Sf(n,...e){if(Qa.logLevel<=ze.WARN){const t=e.map(ZE);Qa.warn(`Firestore (${cc}): ${n}`,...t)}}function ZE(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,uP(n,i,t)}function uP(n,e,t){let i=`FIRESTORE (${cc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw On(i),new Error(i)}function ve(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||uP(e,r,i)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Ir{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Mn.UNAUTHENTICATED)))}shutdown(){}}class Uj{constructor(e){this.t=e,this.currentUser=Mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new dr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new dr,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},h=f=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new dr)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ve(typeof i.accessToken=="string",31837,{l:i}),new kj(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new Mn(e)}}class Fj{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Bj{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new Fj(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class LI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zj{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ve(this.o===void 0,3512);const i=a=>{a.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,le("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new LI(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new LI(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=jj(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function Ie(n,e){return n<e?-1:n>e?1:0}function iT(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return e0(r)===e0(a)?Ie(r,a):e0(r)?1:-1}return Ie(n.length,e.length)}const qj=55296,Hj=57343;function e0(n){const e=n.charCodeAt(0);return e>=qj&&e<=Hj}function Bu(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}function cP(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="__name__";class Is{constructor(e,t,i){t===void 0?t=0:t>e.length&&ye(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&ye(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Is.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Is?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=Is.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return Ie(e.length,t.length)}static compareSegments(e,t){const i=Is.isNumericId(e),r=Is.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Is.extractNumericId(e).compare(Is.extractNumericId(t)):iT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wo.fromString(e.substring(4,e.length-2))}}class tt extends Is{construct(e,t,i){return new tt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new tt(t)}static emptyPath(){return new tt([])}}const Gj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Is{construct(e,t,i){return new At(e,t,i)}static isValidIdentifier(e){return Gj.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===UI}static keyField(){return new At([UI])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new de(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new de(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new de(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else h==="`"?(l=!l,r++):h!=="."||l?(i+=h,r++):(a(),r++)}if(a(),l)throw new de(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(t)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(tt.fromString(e))}static fromName(e){return new fe(tt.fromString(e).popFirst(5))}static empty(){return new fe(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(n,e,t){if(!t)throw new de(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Kj(n,e,t,i){if(e===!0&&i===!0)throw new de(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FI(n){if(!fe.isDocumentKey(n))throw new de(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function BI(n){if(fe.isDocumentKey(n))throw new de(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fP(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function tS(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ye(12329,{type:typeof n})}function sg(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tS(n);throw new de(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Jf(n,e){if(!fP(n))throw new de(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(r&&typeof l!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new de(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI=-62135596800,jI=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*jI);return new nt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zI)throw new de(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jI}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jf(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zI;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:Xt("string",nt._jsonSchemaVersion),seconds:Xt("number"),nanoseconds:Xt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new nt(0,0))}static max(){return new Ee(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=-1;class rg{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function sT(n){return n.fields.find((e=>e.kind===2))}function ba(n){return n.fields.filter((e=>e.kind!==2))}rg.UNKNOWN_ID=-1;class dp{constructor(e,t){this.fieldPath=e,this.kind=t}}class bf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bf(0,ci.min())}}function $j(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ee.fromTimestamp(i===1e9?new nt(t+1,0):new nt(t,i));return new ci(r,fe.empty(),e)}function dP(n){return new ci(n.readTime,n.key,wf)}class ci{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ci(Ee.min(),fe.empty(),wf)}static max(){return new ci(Ee.max(),fe.empty(),wf)}}function nS(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(n.documentKey,e.documentKey),t!==0?t:Ie(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ol(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==mP)throw n;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ye(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,i)=>{t(e)}))}static reject(e){return new H(((t,i)=>{i(e)}))}static waitFor(e){return new H(((t,i)=>{let r=0,a=0,l=!1;e.forEach((h=>{++r,h.next((()=>{++a,l&&a===r&&t()}),(f=>i(f)))})),l=!0,a===r&&t()}))}static or(e){let t=H.resolve(!1);for(const i of e)t=t.next((r=>r?H.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new H(((i,r)=>{const a=e.length,l=new Array(a);let h=0;for(let f=0;f<a;f++){const d=f;t(e[d]).next((g=>{l[d]=g,++h,h===a&&i(l)}),(g=>r(g)))}}))}static doWhile(e,t){return new H(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="SimpleDb";class ty{static open(e,t,i,r){try{return new ty(t,e.transaction(r,i))}catch(a){throw new Wh(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new dr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Wh(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=iS(i.target.error);this.S.reject(new Wh(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(le(oi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Wj(t)}}class bo{static delete(e){return le(oi,"Removing database:",e),Ia(Zx().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!lD())return!1;if(bo.F())return!0;const e=sn(),t=bo.M(e),i=0<t&&t<10,r=gP(e),a=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,bo.M(sn())===12.2&&On("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(le(oi,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=a=>{const l=a.target.result;t(l)},r.onblocked=()=>{i(new Wh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=a=>{const l=a.target.error;l.name==="VersionError"?i(new de(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new de(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new Wh(e,l))},r.onupgradeneeded=a=>{le(oi,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.N.k(l,r.transaction,a.oldVersion,this.version).next((()=>{le(oi,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,r){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const h=ty.open(this.db,e,a?"readonly":"readwrite",i),f=r(h).next((d=>(h.C(),d))).catch((d=>(h.abort(d),H.reject(d)))).toPromise();return f.catch((()=>{})),await h.D,f}catch(h){const f=h,d=f.name!=="FirebaseError"&&l<3;if(le(oi,"Transaction failed with error:",f.message,"Retrying:",d),this.close(),!d)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function gP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class Yj{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Ia(this.U.delete())}}class Wh extends de{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fo(n){return n.name==="IndexedDbTransactionError"}class Wj{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(le(oi,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(le(oi,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Ia(i)}add(e){return le(oi,"ADD",this.store.name,e,e),Ia(this.store.add(e))}get(e){return Ia(this.store.get(e)).next((t=>(t===void 0&&(t=null),le(oi,"GET",this.store.name,e,t),t)))}delete(e){return le(oi,"DELETE",this.store.name,e),Ia(this.store.delete(e))}count(){return le(oi,"COUNT",this.store.name),Ia(this.store.count())}J(e,t){const i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const a=r.getAll(i.range);return new H(((l,h)=>{a.onerror=f=>{h(f.target.error)},a.onsuccess=f=>{l(f.target.result)}}))}{const a=this.cursor(i),l=[];return this.H(a,((h,f)=>{l.push(f)})).next((()=>l))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new H(((r,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{r(l.target.result)}}))}Z(e,t){le(oi,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const r=this.cursor(i);return this.H(r,((a,l,h)=>h.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.H(r,t)}te(e){const t=this.cursor({});return new H(((i,r)=>{t.onerror=a=>{const l=iS(a.target.error);r(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((h=>{h?l.continue():i()})):i()}}))}H(e,t){const i=[];return new H(((r,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void r();const f=new Yj(h),d=t(h.primaryKey,h.value,f);if(d instanceof H){const g=d.catch((_=>(f.done(),H.reject(_))));i.push(g)}f.isDone?r():f.G===null?h.continue():h.continue(f.G)}})).next((()=>H.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ia(n){return new H(((e,t)=>{n.onsuccess=i=>{const r=i.target.result;e(r)},n.onerror=i=>{const r=iS(i.target.error);t(r)}}))}let qI=!1;function iS(n){const e=bo.M(sn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qI||(qI=!0,setTimeout((()=>{throw i}),0)),i}}return n}const Qh="IndexBackfiller";class Qj{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){le(Qh,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();le(Qh,`Documents written: ${t}`)}catch(t){Fo(t)?le(Qh,"Ignoring IndexedDB error during index backfill: ",t):await ol(t)}await this.re(6e4)}))}}class Xj{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let r=t,a=!0;return H.doWhile((()=>a===!0&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!i.has(l))return le(Qh,`Processing collection: ${l}`),this.oe(e,l,r).next((h=>{r-=h,i.add(l)}));a=!1})))).next((()=>t-r))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(r,a))).next((h=>(le(Qh,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>l.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((r,a)=>{const l=dP(a);nS(l,i)>0&&(i=l)})),new ci(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xi.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=-1;function ny(n){return n==null}function Af(n){return n===0&&1/n==-1/0}function Jj(n){return typeof n=="number"&&Number.isInteger(n)&&!Af(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="";function Rn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=HI(e)),e=Zj(n.get(t),e);return HI(e)}function Zj(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case og:t+="";break;default:t+=a}}return t}function HI(n){return n+og+""}function xs(n){const e=n.length;if(ve(e>=2,64408,{path:n}),e===2)return ve(n.charAt(0)===og&&n.charAt(1)==="",56145,{path:n}),tt.emptyPath();const t=e-2,i=[];let r="";for(let a=0;a<e;){const l=n.indexOf(og,a);switch((l<0||l>t)&&ye(50515,{path:n}),n.charAt(l+1)){case"":const h=n.substring(a,l);let f;r.length===0?f=h:(r+=h,f=r,r=""),i.push(f);break;case"":r+=n.substring(a,l),r+="\0";break;case"":r+=n.substring(a,l+1);break;default:ye(61167,{path:n})}a=l+2}return new tt(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="remoteDocuments",Zf="owner",eu="owner",Cf="mutationQueues",e8="userId",Yi="mutations",GI="batchId",Ma="userMutationsIndex",KI=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(n,e){return[n,Rn(e)]}function yP(n,e,t){return[n,Rn(e),t]}const t8={},zu="documentMutations",ag="remoteDocumentsV14",n8=["prefixPath","collectionGroup","readTime","documentId"],pp="documentKeyIndex",i8=["prefixPath","collectionGroup","documentId"],_P="collectionGroupIndex",s8=["collectionGroup","readTime","prefixPath","documentId"],If="remoteDocumentGlobal",rT="remoteDocumentGlobalKey",ju="targets",vP="queryTargetsIndex",r8=["canonicalId","targetId"],qu="targetDocuments",o8=["targetId","path"],sS="documentTargetsIndex",a8=["path","targetId"],lg="targetGlobalKey",Ua="targetGlobal",Rf="collectionParents",l8=["collectionId","parent"],Hu="clientMetadata",u8="clientId",iy="bundles",c8="bundleId",sy="namedQueries",h8="name",rS="indexConfiguration",f8="indexId",oT="collectionGroupIndex",d8="collectionGroup",Xh="indexState",m8=["indexId","uid"],TP="sequenceNumberIndex",p8=["uid","sequenceNumber"],Jh="indexEntries",g8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EP="documentKeyIndex",y8=["indexId","uid","orderedDocumentKey"],ry="documentOverlays",_8=["userId","collectionPath","documentId"],aT="collectionPathOverlayIndex",v8=["userId","collectionPath","largestBatchId"],SP="collectionGroupOverlayIndex",T8=["userId","collectionGroup","largestBatchId"],oS="globals",E8="name",wP=[Cf,Yi,zu,Aa,ju,Zf,Ua,qu,Hu,If,Rf,iy,sy],S8=[...wP,ry],bP=[Cf,Yi,zu,ag,ju,Zf,Ua,qu,Hu,If,Rf,iy,sy,ry],AP=bP,aS=[...AP,rS,Xh,Jh],w8=aS,CP=[...aS,oS],b8=CP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT extends pP{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function rn(n,e){const t=Re(n);return bo.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function al(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function IP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){this.comparator=e,this.root=t||En.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,En.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,En.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $m(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $m(this.root,e,this.comparator,!1)}getReverseIterator(){return new $m(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $m(this.root,e,this.comparator,!0)}}class $m{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class En{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??En.RED,this.left=r??En.EMPTY,this.right=a??En.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new En(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return En.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return En.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,En.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,En.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ye(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ye(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ye(27949);return e+(this.isRed()?0:1)}}En.EMPTY=null,En.RED=!0,En.BLACK=!1;En.EMPTY=new class{constructor(){this.size=0}get key(){throw ye(57766)}get value(){throw ye(16141)}get color(){throw ye(16727)}get left(){throw ye(29726)}get right(){throw ye(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new En(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new YI(this.data.getIterator())}getIteratorFrom(e){return new YI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ot(this.comparator);return t.data=e,t}}class YI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function tu(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new Di([])}unionWith(e){let t=new ot(At.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Di(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bu(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new RP("Invalid base64 string: "+a):a}})(e);return new Zt(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a})(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const A8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(n){if(ve(!!n,39018),typeof n=="string"){let e=0;const t=A8.exec(n);if(ve(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Sr(n){return typeof n=="string"?Zt.fromBase64String(n):Zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP="server_timestamp",DP="__type__",NP="__previous_value__",PP="__local_write_time__";function lS(n){return(n?.mapValue?.fields||{})[DP]?.stringValue===xP}function oy(n){const e=n.mapValue.fields[NP];return lS(e)?oy(e):e}function xf(n){const e=Er(n.mapValue.fields[PP].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e,t,i,r,a,l,h,f,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=g}}const ug="(default)";class Xa{constructor(e,t){this.projectId=e,this.database=t||ug}static empty(){return new Xa("","")}get isDefaultDatabase(){return this.database===ug}isEqual(e){return e instanceof Xa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="__type__",MP="__max__",vo={mapValue:{fields:{__type__:{stringValue:MP}}}},cS="__vector__",Gu="value",gp={nullValue:"NULL_VALUE"};function No(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lS(n)?4:OP(n)?9007199254740991:ay(n)?10:11:ye(28295,{value:n})}function Us(n,e){if(n===e)return!0;const t=No(n);if(t!==No(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xf(n).isEqual(xf(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=Er(r.timestampValue),h=Er(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return Sr(r.bytesValue).isEqual(Sr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return St(r.geoPointValue.latitude)===St(a.geoPointValue.latitude)&&St(r.geoPointValue.longitude)===St(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return St(r.integerValue)===St(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=St(r.doubleValue),h=St(a.doubleValue);return l===h?Af(l)===Af(h):isNaN(l)&&isNaN(h)}return!1})(n,e);case 9:return Bu(n.arrayValue.values||[],e.arrayValue.values||[],Us);case 10:case 11:return(function(r,a){const l=r.mapValue.fields||{},h=a.mapValue.fields||{};if($I(l)!==$I(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!Us(l[f],h[f])))return!1;return!0})(n,e);default:return ye(52216,{left:n})}}function Df(n,e){return(n.values||[]).find((t=>Us(t,e)))!==void 0}function Po(n,e){if(n===e)return 0;const t=No(n),i=No(e);if(t!==i)return Ie(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const h=St(a.integerValue||a.doubleValue),f=St(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return WI(n.timestampValue,e.timestampValue);case 4:return WI(xf(n),xf(e));case 5:return iT(n.stringValue,e.stringValue);case 6:return(function(a,l){const h=Sr(a),f=Sr(l);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const h=a.split("/"),f=l.split("/");for(let d=0;d<h.length&&d<f.length;d++){const g=Ie(h[d],f[d]);if(g!==0)return g}return Ie(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const h=Ie(St(a.latitude),St(l.latitude));return h!==0?h:Ie(St(a.longitude),St(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return QI(n.arrayValue,e.arrayValue);case 10:return(function(a,l){const h=a.fields||{},f=l.fields||{},d=h[Gu]?.arrayValue,g=f[Gu]?.arrayValue,_=Ie(d?.values?.length||0,g?.values?.length||0);return _!==0?_:QI(d,g)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===vo.mapValue&&l===vo.mapValue)return 0;if(a===vo.mapValue)return 1;if(l===vo.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),d=l.fields||{},g=Object.keys(d);f.sort(),g.sort();for(let _=0;_<f.length&&_<g.length;++_){const T=iT(f[_],g[_]);if(T!==0)return T;const w=Po(h[f[_]],d[g[_]]);if(w!==0)return w}return Ie(f.length,g.length)})(n.mapValue,e.mapValue);default:throw ye(23264,{he:t})}}function WI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ie(n,e);const t=Er(n),i=Er(e),r=Ie(t.seconds,i.seconds);return r!==0?r:Ie(t.nanos,i.nanos)}function QI(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=Po(t[r],i[r]);if(a)return a}return Ie(t.length,i.length)}function Ku(n){return uT(n)}function uT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Er(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Sr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=uT(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const l of i)a?a=!1:r+=",",r+=`${l}:${uT(t.fields[l])}`;return r+"}"})(n.mapValue):ye(61005,{value:n})}function yp(n){switch(No(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=oy(n);return e?16+yp(e):16;case 5:return 2*n.stringValue.length;case 6:return Sr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+yp(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return al(i.fields,((a,l)=>{r+=a.length+yp(l)})),r})(n.mapValue);default:throw ye(13486,{value:n})}}function hS(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cT(n){return!!n&&"integerValue"in n}function Nf(n){return!!n&&"arrayValue"in n}function XI(n){return!!n&&"nullValue"in n}function JI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _p(n){return!!n&&"mapValue"in n}function ay(n){return(n?.mapValue?.fields||{})[uS]?.stringValue===cS}function Zh(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return al(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Zh(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zh(n.arrayValue.values[t]);return e}return{...n}}function OP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===MP}const VP={mapValue:{fields:{[uS]:{stringValue:cS},[Gu]:{arrayValue:{}}}}};function I8(n){return"nullValue"in n?gp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?hS(Xa.empty(),fe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?ay(n)?VP:{mapValue:{}}:ye(35942,{value:n})}function R8(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?hS(Xa.empty(),fe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?VP:"mapValue"in n?ay(n)?{mapValue:{}}:vo:ye(61959,{value:n})}function ZI(n,e){const t=Po(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function eR(n,e){const t=Po(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.value=e}static empty(){return new Gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!_p(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zh(t)}setAll(e){let t=At.emptyPath(),i={},r=[];e.forEach(((l,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,i,r),i={},r=[],t=h.popLast()}l?i[h.lastSegment()]=Zh(l):r.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());_p(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Us(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];_p(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){al(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new Gn(Zh(this.value))}}function kP(n){const e=[];return al(n.fields,((t,i)=>{const r=new At([t]);if(_p(i)){const a=kP(i.mapValue).fields;if(a.length===0)e.push(r);else for(const l of a)e.push(r.child(l))}else e.push(r)})),new Di(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,t,i,r,a,l,h){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Pt(e,0,Ee.min(),Ee.min(),Ee.min(),Gn.empty(),0)}static newFoundDocument(e,t,i,r){return new Pt(e,1,t,Ee.min(),i,r,0)}static newNoDocument(e,t){return new Pt(e,2,t,Ee.min(),Ee.min(),Gn.empty(),0)}static newUnknownDocument(e,t){return new Pt(e,3,t,Ee.min(),Ee.min(),Gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t){this.position=e,this.inclusive=t}}function tR(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],l=n.position[r];if(a.field.isKeyField()?i=fe.comparator(fe.fromName(l.referenceValue),t.key):i=Po(l,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function nR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Us(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,t="asc"){this.field=e,this.dir=t}}function x8(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{}class Ke extends LP{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new D8(e,t,i):t==="array-contains"?new M8(e,i):t==="in"?new qP(e,i):t==="not-in"?new O8(e,i):t==="array-contains-any"?new V8(e,i):new Ke(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new N8(e,i):new P8(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Po(t,this.value)):t!==null&&No(this.value)===No(t)&&this.matchesComparison(Po(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ye(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ft extends LP{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ft(e,t)}matches(e){return Yu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Yu(n){return n.op==="and"}function hT(n){return n.op==="or"}function fS(n){return UP(n)&&Yu(n)}function UP(n){for(const e of n.filters)if(e instanceof ft)return!1;return!0}function fT(n){if(n instanceof Ke)return n.field.canonicalString()+n.op.toString()+Ku(n.value);if(fS(n))return n.filters.map((e=>fT(e))).join(",");{const e=n.filters.map((t=>fT(t))).join(",");return`${n.op}(${e})`}}function FP(n,e){return n instanceof Ke?(function(i,r){return r instanceof Ke&&i.op===r.op&&i.field.isEqual(r.field)&&Us(i.value,r.value)})(n,e):n instanceof ft?(function(i,r){return r instanceof ft&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,l,h)=>a&&FP(l,r.filters[h])),!0):!1})(n,e):void ye(19439)}function BP(n,e){const t=n.filters.concat(e);return ft.create(t,n.op)}function zP(n){return n instanceof Ke?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ku(t.value)}`})(n):n instanceof ft?(function(t){return t.op.toString()+" {"+t.getFilters().map(zP).join(" ,")+"}"})(n):"Filter"}class D8 extends Ke{constructor(e,t,i){super(e,t,i),this.key=fe.fromName(i.referenceValue)}matches(e){const t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class N8 extends Ke{constructor(e,t){super(e,"in",t),this.keys=jP("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class P8 extends Ke{constructor(e,t){super(e,"not-in",t),this.keys=jP("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function jP(n,e){return(e.arrayValue?.values||[]).map((t=>fe.fromName(t.referenceValue)))}class M8 extends Ke{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nf(t)&&Df(t.arrayValue,this.value)}}class qP extends Ke{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Df(this.value.arrayValue,t)}}class O8 extends Ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(Df(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Df(this.value.arrayValue,t)}}class V8 extends Ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Df(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k8{constructor(e,t=null,i=[],r=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=l,this.endAt=h,this.Te=null}}function dT(n,e=null,t=[],i=[],r=null,a=null,l=null){return new k8(n,e,t,i,r,a,l)}function Ja(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>fT(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),ny(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Ku(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Ku(i))).join(",")),e.Te=t}return e.Te}function ed(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!x8(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!FP(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nR(n.startAt,e.startAt)&&nR(n.endAt,e.endAt)}function hg(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function fg(n,e){return n.filters.filter((t=>t instanceof Ke&&t.field.isEqual(e)))}function iR(n,e,t){let i=gp,r=!0;for(const a of fg(n,e)){let l=gp,h=!0;switch(a.op){case"<":case"<=":l=I8(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=gp}ZI({value:i,inclusive:r},{value:l,inclusive:h})<0&&(i=l,r=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];ZI({value:i,inclusive:r},{value:l,inclusive:t.inclusive})<0&&(i=l,r=t.inclusive);break}}return{value:i,inclusive:r}}function sR(n,e,t){let i=vo,r=!0;for(const a of fg(n,e)){let l=vo,h=!0;switch(a.op){case">=":case">":l=R8(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=vo}eR({value:i,inclusive:r},{value:l,inclusive:h})>0&&(i=l,r=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];eR({value:i,inclusive:r},{value:l,inclusive:t.inclusive})>0&&(i=l,r=t.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,t=null,i=[],r=[],a=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function L8(n,e,t,i,r,a,l,h){return new ly(n,e,t,i,r,a,l,h)}function dS(n){return new ly(n)}function rR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function U8(n){return n.collectionGroup!==null}function ef(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new ot(At.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(h=h.add(d.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new cg(a,i))})),t.has(At.keyField().canonicalString())||e.Ie.push(new cg(At.keyField(),i))}return e.Ie}function Pi(n){const e=Re(n);return e.Ee||(e.Ee=F8(e,ef(n))),e.Ee}function F8(n,e){if(n.limitType==="F")return dT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new cg(r.field,a)}));const t=n.endAt?new $u(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new $u(n.startAt.position,n.startAt.inclusive):null;return dT(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function mT(n,e,t){return new ly(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function uy(n,e){return ed(Pi(n),Pi(e))&&n.limitType===e.limitType}function HP(n){return`${Ja(Pi(n))}|lt:${n.limitType}`}function uu(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>zP(r))).join(", ")}]`),ny(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Ku(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Ku(r))).join(",")),`Target(${i})`})(Pi(n))}; limitType=${n.limitType})`}function td(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):fe.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of ef(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(l,h,f){const d=tR(l,h,f);return l.inclusive?d<=0:d<0})(i.startAt,ef(i),r)||i.endAt&&!(function(l,h,f){const d=tR(l,h,f);return l.inclusive?d>=0:d>0})(i.endAt,ef(i),r))})(n,e)}function B8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GP(n){return(e,t)=>{let i=!1;for(const r of ef(n)){const a=z8(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function z8(n,e,t){const i=n.field.isKeyField()?fe.comparator(e.key,t.key):(function(a,l,h){const f=l.data.field(a),d=h.data.field(a);return f!==null&&d!==null?Po(f,d):ye(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return ye(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){al(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return IP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8=new bt(fe.comparator);function li(){return j8}const KP=new bt(fe.comparator);function Lh(...n){let e=KP;for(const t of n)e=e.insert(t.key,t);return e}function $P(n){let e=KP;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ds(){return tf()}function YP(){return tf()}function tf(){return new Rr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const q8=new bt(fe.comparator),H8=new ot(fe.comparator);function ke(...n){let e=H8;for(const t of n)e=e.add(t);return e}const G8=new ot(Ie);function K8(){return G8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Af(e)?"-0":e}}function WP(n){return{integerValue:""+n}}function $8(n,e){return Jj(e)?WP(e):mS(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(){this._=void 0}}function Y8(n,e,t){return n instanceof Wu?(function(r,a){const l={fields:{[DP]:{stringValue:xP},[PP]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&lS(a)&&(a=oy(a)),a&&(l.fields[NP]=a),{mapValue:l}})(t,e):n instanceof Qu?XP(n,e):n instanceof Xu?JP(n,e):(function(r,a){const l=QP(r,a),h=oR(l)+oR(r.Ae);return cT(l)&&cT(r.Ae)?WP(h):mS(r.serializer,h)})(n,e)}function W8(n,e,t){return n instanceof Qu?XP(n,e):n instanceof Xu?JP(n,e):t}function QP(n,e){return n instanceof Pf?(function(i){return cT(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Wu extends cy{}class Qu extends cy{constructor(e){super(),this.elements=e}}function XP(n,e){const t=ZP(e);for(const i of n.elements)t.some((r=>Us(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Xu extends cy{constructor(e){super(),this.elements=e}}function JP(n,e){let t=ZP(e);for(const i of n.elements)t=t.filter((r=>!Us(r,i)));return{arrayValue:{values:t}}}class Pf extends cy{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function oR(n){return St(n.integerValue||n.doubleValue)}function ZP(n){return Nf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,t){this.field=e,this.transform=t}}function Q8(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Qu&&r instanceof Qu||i instanceof Xu&&r instanceof Xu?Bu(i.elements,r.elements,Us):i instanceof Pf&&r instanceof Pf?Us(i.Ae,r.Ae):i instanceof Wu&&r instanceof Wu})(n.transform,e.transform)}class X8{constructor(e,t){this.version=e,this.transformResults=t}}class $n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class hy{}function tM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new fy(n.key,$n.none()):new hc(n.key,n.data,$n.none());{const t=n.data,i=Gn.empty();let r=new ot(At.comparator);for(let a of e.fields)if(!r.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?i.delete(a):i.set(a,l),r=r.add(a)}return new Bo(n.key,i,new Di(r.toArray()),$n.none())}}function J8(n,e,t){n instanceof hc?(function(r,a,l){const h=r.value.clone(),f=lR(r.fieldTransforms,a,l.transformResults);h.setAll(f),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Bo?(function(r,a,l){if(!vp(r.precondition,a))return void a.convertToUnknownDocument(l.version);const h=lR(r.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(nM(r)),f.setAll(h),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(r,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function nf(n,e,t,i){return n instanceof hc?(function(a,l,h,f){if(!vp(a.precondition,l))return h;const d=a.value.clone(),g=uR(a.fieldTransforms,f,l);return d.setAll(g),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(n,e,t,i):n instanceof Bo?(function(a,l,h,f){if(!vp(a.precondition,l))return h;const d=uR(a.fieldTransforms,f,l),g=l.data;return g.setAll(nM(a)),g.setAll(d),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((_=>_.field)))})(n,e,t,i):(function(a,l,h){return vp(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(n,e,t)}function Z8(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=QP(i.transform,r||null);a!=null&&(t===null&&(t=Gn.empty()),t.set(i.field,a))}return t||null}function aR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Bu(i,r,((a,l)=>Q8(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class hc extends hy{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Bo extends hy{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function nM(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function lR(n,e,t){const i=new Map;ve(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const a=n[r],l=a.transform,h=e.data.field(a.field);i.set(a.field,W8(l,h,t[r]))}return i}function uR(n,e,t){const i=new Map;for(const r of n){const a=r.transform,l=t.data.field(r.field);i.set(r.field,Y8(a,l,e))}return i}class fy extends hy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iM extends hy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&J8(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=nf(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=nf(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=YP();return this.mutations.forEach((r=>{const a=e.get(r.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(r.key)?null:h;const f=tM(l,h);f!==null&&i.set(r.key,f),l.isValidDocument()||l.convertToNoDocument(Ee.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ke())}isEqual(e){return this.batchId===e.batchId&&Bu(this.mutations,e.mutations,((t,i)=>aR(t,i)))&&Bu(this.baseMutations,e.baseMutations,((t,i)=>aR(t,i)))}}class gS{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){ve(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return q8})();const a=e.mutations;for(let l=0;l<a.length;l++)r=r.insert(a[l].key,i[l].version);return new gS(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt,Ye;function t7(n){switch(n){case oe.OK:return ye(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return ye(15467,{code:n})}}function sM(n){if(n===void 0)return On("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Yt.OK:return oe.OK;case Yt.CANCELLED:return oe.CANCELLED;case Yt.UNKNOWN:return oe.UNKNOWN;case Yt.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Yt.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Yt.INTERNAL:return oe.INTERNAL;case Yt.UNAVAILABLE:return oe.UNAVAILABLE;case Yt.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Yt.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Yt.NOT_FOUND:return oe.NOT_FOUND;case Yt.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Yt.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Yt.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Yt.ABORTED:return oe.ABORTED;case Yt.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Yt.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Yt.DATA_LOSS:return oe.DATA_LOSS;default:return ye(39323,{code:n})}}(Ye=Yt||(Yt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7=new wo([4294967295,4294967295],0);function cR(n){const e=n7().encode(n),t=new iP;return t.update(e),new Uint8Array(t.digest())}function hR(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new wo([t,i],0),new wo([r,a],0)]}class _S{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Uh(`Invalid padding: ${t}`);if(i<0)throw new Uh(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Uh(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Uh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=wo.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(wo.fromNumber(i)));return r.compare(i7)===1&&(r=new wo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=cR(e),[i,r]=hR(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);if(!this.we(l))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new _S(a,r,t);return i.forEach((h=>l.insert(h))),l}insert(e){if(this.ge===0)return;const t=cR(e),[i,r]=hR(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Uh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,nd.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new dy(Ee.min(),r,new bt(Ie),li(),ke())}}class nd{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new nd(i,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}}class rM{constructor(e,t){this.targetId=e,this.Ce=t}}class oM{constructor(e,t,i=Zt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class fR{constructor(){this.ve=0,this.Fe=dR(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),t=ke(),i=ke();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:ye(38017,{changeType:a})}})),new nd(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=dR()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class s7{constructor(e){this.Ge=e,this.ze=new Map,this.je=li(),this.Je=Ym(),this.He=Ym(),this.Ye=new bt(Ie)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:ye(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(hg(a))if(i===0){const l=new fe(a.path);this.et(t,l,Pt.newNoDocument(l,Ee.min()))}else ve(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const h=this.ut(e),f=h?this.ct(h,e,l):1;if(f!==0){this.it(t);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let l,h;try{l=Sr(i).toUint8Array()}catch(f){if(f instanceof RP)return Sf("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new _S(l,r,a)}catch(f){return Sf(f instanceof Uh?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const h=this.ot(l);if(h){if(a.current&&hg(h.target)){const f=new fe(h.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,Pt.newNoDocument(f,e))}a.Be&&(t.set(l,a.ke()),a.qe())}}));let i=ke();this.He.forEach(((a,l)=>{let h=!0;l.forEachWhile((f=>{const d=this.ot(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const r=new dy(e,t,this.Ye,this.je,i);return this.je=li(),this.Je=Ym(),this.He=Ym(),this.Ye=new bt(Ie),r}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new fR,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ot(Ie),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ot(Ie),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fR),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ym(){return new bt(fe.comparator)}function dR(){return new bt(fe.comparator)}const r7={asc:"ASCENDING",desc:"DESCENDING"},o7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a7={and:"AND",or:"OR"};class l7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pT(n,e){return n.useProto3Json||ny(e)?e:{value:e}}function Ju(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function u7(n,e){return Ju(n,e.toTimestamp())}function kn(n){return ve(!!n,49232),Ee.fromTimestamp((function(t){const i=Er(t);return new nt(i.seconds,i.nanos)})(n))}function vS(n,e){return gT(n,e).canonicalString()}function gT(n,e){const t=(function(r){return new tt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function lM(n){const e=tt.fromString(n);return ve(yM(e),10190,{key:e.toString()}),e}function dg(n,e){return vS(n.databaseId,e.path)}function Fa(n,e){const t=lM(e);if(t.get(1)!==n.databaseId.projectId)throw new de(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(hM(t))}function uM(n,e){return vS(n.databaseId,e)}function cM(n){const e=lM(n);return e.length===4?tt.emptyPath():hM(e)}function yT(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hM(n){return ve(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function mR(n,e,t){return{name:dg(n,e),fields:t.value.mapValue.fields}}function c7(n,e,t){const i=Fa(n,e.name),r=kn(e.updateTime),a=e.createTime?kn(e.createTime):Ee.min(),l=new Gn({mapValue:{fields:e.fields}}),h=Pt.newFoundDocument(i,r,a,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function h7(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ye(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(d,g){return d.useProto3Json?(ve(g===void 0||typeof g=="string",58123),Zt.fromBase64String(g||"")):(ve(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Zt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&(function(d){const g=d.code===void 0?oe.UNKNOWN:sM(d.code);return new de(g,d.message||"")})(l);t=new oM(i,r,a,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Fa(n,i.document.name),a=kn(i.document.updateTime),l=i.document.createTime?kn(i.document.createTime):Ee.min(),h=new Gn({mapValue:{fields:i.document.fields}}),f=Pt.newFoundDocument(r,a,l,h),d=i.targetIds||[],g=i.removedTargetIds||[];t=new Tp(d,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Fa(n,i.document),a=i.readTime?kn(i.readTime):Ee.min(),l=Pt.newNoDocument(r,a),h=i.removedTargetIds||[];t=new Tp([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Fa(n,i.document),a=i.removedTargetIds||[];t=new Tp([],a,r,null)}else{if(!("filter"in e))return ye(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,l=new e7(r,a),h=i.targetId;t=new rM(h,l)}}return t}function mg(n,e){let t;if(e instanceof hc)t={update:mR(n,e.key,e.value)};else if(e instanceof fy)t={delete:dg(n,e.key)};else if(e instanceof Bo)t={update:mR(n,e.key,e.data),updateMask:y7(e.fieldMask)};else{if(!(e instanceof iM))return ye(16599,{Vt:e.type});t={verify:dg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,l){const h=l.transform;if(h instanceof Wu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Qu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Xu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Pf)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw ye(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:u7(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:ye(27497)})(n,e.precondition)),t}function _T(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?$n.updateTime(kn(a.updateTime)):a.exists!==void 0?$n.exists(a.exists):$n.none()})(e.currentDocument):$n.none(),i=e.updateTransforms?e.updateTransforms.map((r=>(function(l,h){let f=null;if("setToServerValue"in h)ve(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),f=new Wu;else if("appendMissingElements"in h){const g=h.appendMissingElements.values||[];f=new Qu(g)}else if("removeAllFromArray"in h){const g=h.removeAllFromArray.values||[];f=new Xu(g)}else"increment"in h?f=new Pf(l,h.increment):ye(16584,{proto:h});const d=At.fromServerFormat(h.fieldPath);return new eM(d,f)})(n,r))):[];if(e.update){e.update.name;const r=Fa(n,e.update.name),a=new Gn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const d=f.fieldPaths||[];return new Di(d.map((g=>At.fromServerFormat(g))))})(e.updateMask);return new Bo(r,a,l,t,i)}return new hc(r,a,t,i)}if(e.delete){const r=Fa(n,e.delete);return new fy(r,t)}if(e.verify){const r=Fa(n,e.verify);return new iM(r,t)}return ye(1463,{proto:e})}function f7(n,e){return n&&n.length>0?(ve(e!==void 0,14353),n.map((t=>(function(r,a){let l=r.updateTime?kn(r.updateTime):kn(a);return l.isEqual(Ee.min())&&(l=kn(a)),new X8(l,r.transformResults||[])})(t,e)))):[]}function fM(n,e){return{documents:[uM(n,e.path)]}}function dM(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=uM(n,r);const a=(function(d){if(d.length!==0)return gM(ft.create(d,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(d){if(d.length!==0)return d.map((g=>(function(T){return{field:cu(T.field),direction:m7(T.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=pT(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:r}}function mM(n){let e=cM(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){ve(i===1,65062);const g=t.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=(function(_){const T=pM(_);return T instanceof ft&&fS(T)?T.getFilters():[T]})(t.where));let l=[];t.orderBy&&(l=(function(_){return _.map((T=>(function(R){return new cg(hu(R.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(T)))})(t.orderBy));let h=null;t.limit&&(h=(function(_){let T;return T=typeof _=="object"?_.value:_,ny(T)?null:T})(t.limit));let f=null;t.startAt&&(f=(function(_){const T=!!_.before,w=_.values||[];return new $u(w,T)})(t.startAt));let d=null;return t.endAt&&(d=(function(_){const T=!_.before,w=_.values||[];return new $u(w,T)})(t.endAt)),L8(e,r,l,a,h,"F",f,d)}function d7(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ye(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pM(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=hu(t.unaryFilter.field);return Ke.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=hu(t.unaryFilter.field);return Ke.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=hu(t.unaryFilter.field);return Ke.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=hu(t.unaryFilter.field);return Ke.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ye(61313);default:return ye(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ke.create(hu(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ye(58110);default:return ye(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ft.create(t.compositeFilter.filters.map((i=>pM(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ye(1026)}})(t.compositeFilter.op))})(n):ye(30097,{filter:n})}function m7(n){return r7[n]}function p7(n){return o7[n]}function g7(n){return a7[n]}function cu(n){return{fieldPath:n.canonicalString()}}function hu(n){return At.fromServerFormat(n.fieldPath)}function gM(n){return n instanceof Ke?(function(t){if(t.op==="=="){if(JI(t.value))return{unaryFilter:{field:cu(t.field),op:"IS_NAN"}};if(XI(t.value))return{unaryFilter:{field:cu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(JI(t.value))return{unaryFilter:{field:cu(t.field),op:"IS_NOT_NAN"}};if(XI(t.value))return{unaryFilter:{field:cu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cu(t.field),op:p7(t.op),value:t.value}}})(n):n instanceof ft?(function(t){const i=t.getFilters().map((r=>gM(r)));return i.length===1?i[0]:{compositeFilter:{op:g7(t.op),filters:i}}})(n):ye(54877,{filter:n})}function y7(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function yM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,t,i,r,a=Ee.min(),l=Ee.min(),h=Zt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e){this.yt=e}}function _7(n,e){let t;if(e.document)t=c7(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=fe.fromSegments(e.noDocument.path),r=el(e.noDocument.readTime);t=Pt.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ye(56709);{const i=fe.fromSegments(e.unknownDocument.path),r=el(e.unknownDocument.version);t=Pt.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime((function(r){const a=new nt(r[0],r[1]);return Ee.fromTimestamp(a)})(e.readTime)),t}function pR(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:pg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(a,l){return{name:dg(a,l.key),fields:l.data.value.mapValue.fields,updateTime:Ju(a,l.version.toTimestamp()),createTime:Ju(a,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Za(e.version)};else{if(!e.isUnknownDocument())return ye(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Za(e.version)}}return i}function pg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Za(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function el(n){const e=new nt(n.seconds,n.nanoseconds);return Ee.fromTimestamp(e)}function Ra(n,e){const t=(e.baseMutations||[]).map((a=>_T(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const h=e.mutations[a+1];l.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const i=e.mutations.map((a=>_T(n.yt,a))),r=nt.fromMillis(e.localWriteTimeMs);return new pS(e.batchId,r,t,i)}function Fh(n){const e=el(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?el(n.lastLimboFreeSnapshotVersion):Ee.min();let i;return i=(function(a){return a.documents!==void 0})(n.query)?(function(a){const l=a.documents.length;return ve(l===1,1966,{count:l}),Pi(dS(cM(a.documents[0])))})(n.query):(function(a){return Pi(mM(a))})(n.query),new ur(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Zt.fromBase64String(n.resumeToken))}function vM(n,e){const t=Za(e.snapshotVersion),i=Za(e.lastLimboFreeSnapshotVersion);let r;r=hg(e.target)?fM(n.yt,e.target):dM(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ja(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function TM(n){const e=mM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?mT(e,e.limit,"L"):e}function t0(n,e){return new yS(e.largestBatchId,_T(n.yt,e.overlayMutation))}function gR(n,e){const t=e.path.lastSegment();return[n,Rn(e.path.popLast()),t]}function yR(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:Za(i.readTime),documentKey:Rn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v7{getBundleMetadata(e,t){return _R(e).get(t).next((i=>{if(i)return(function(a){return{id:a.bundleId,createTime:el(a.createTime),version:a.version}})(i)}))}saveBundleMetadata(e,t){return _R(e).put((function(r){return{bundleId:r.id,createTime:Za(kn(r.createTime)),version:r.version}})(t))}getNamedQuery(e,t){return vR(e).get(t).next((i=>{if(i)return(function(a){return{name:a.name,query:TM(a.bundledQuery),readTime:el(a.readTime)}})(i)}))}saveNamedQuery(e,t){return vR(e).put((function(r){return{name:r.name,readTime:Za(kn(r.readTime)),bundledQuery:r.bundledQuery}})(t))}}function _R(n){return rn(n,iy)}function vR(n){return rn(n,sy)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new my(e,i)}getOverlay(e,t){return Ih(e).get(gR(this.userId,t)).next((i=>i?t0(this.serializer,i):null))}getOverlays(e,t){const i=Ds();return H.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){const r=[];return i.forEach(((a,l)=>{const h=new yS(t,l);r.push(this.St(e,h))})),H.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach((l=>r.add(Rn(l.getCollectionPath()))));const a=[];return r.forEach((l=>{const h=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);a.push(Ih(e).Z(aT,h))})),H.waitFor(a)}getOverlaysForCollection(e,t,i){const r=Ds(),a=Rn(t),l=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ih(e).J(aT,l).next((h=>{for(const f of h){const d=t0(this.serializer,f);r.set(d.getKey(),d)}return r}))}getOverlaysForCollectionGroup(e,t,i,r){const a=Ds();let l;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ih(e).ee({index:SP,range:h},((f,d,g)=>{const _=t0(this.serializer,d);a.size()<r||_.largestBatchId===l?(a.set(_.getKey(),_),l=_.largestBatchId):g.done()})).next((()=>a))}St(e,t){return Ih(e).put((function(r,a,l){const[h,f,d]=gR(a,l.mutation.key);return{userId:a,collectionPath:f,documentId:d,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:mg(r.yt,l.mutation)}})(this.serializer,this.userId,t))}}function Ih(n){return rn(n,ry)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{bt(e){return rn(e,oS)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?Zt.fromUint8Array(i):Zt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(St(e.integerValue));else if("doubleValue"in e){const i=St(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Af(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=Er(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Sr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?OP(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ay(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):ye(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const r of Object.keys(i))this.Ot(r,t),this.Ct(i[r],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const r=Gu,a=i[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(St(a)),this.Ot(r,t),this.Ct(i[r],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const r of i)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),fe.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}xa.Kt=new xa;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=255;function E7(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function TR(n){const e=64-(function(i){let r=0;for(let a=0;a<8;++a){const l=E7(255&i[a]);if(r+=l,l!==8)break}return r})(n);return Math.ceil(e/8)}class S7{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const r=t.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const r=t.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(e){const t=this.en(e),i=TR(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}nn(e){const t=this.en(e),i=TR(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}rn(){this.sn(nu),this.sn(255)}_n(){this.an(nu),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===nu?(this.sn(nu),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===nu?(this.an(nu),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class w7{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class b7{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Rh{constructor(){this.cn=new S7,this.ln=new w7(this.cn),this.hn=new b7(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t,i,r){this.Tn=e,this.In=t,this.En=i,this.dn=r}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new Da(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:Ep(this.En),directionalValue:Ep(this.dn),orderedDocumentKey:Ep(t),documentKey:i.path.toArray()}}Vn(e,t,i){const r=this.Rn(e,t,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function uo(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=ER(n.En,e.En),t!==0?t:(t=ER(n.dn,e.dn),t!==0?t:fe.comparator(n.In,e.In)))}function ER(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function Ep(n){return aD()?(function(t){let i="";for(let r=0;r<t.length;r++)i+=String.fromCharCode(t[r]);return i})(n):n}function SR(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(n)}class wR{constructor(e){this.mn=new ot(((t,i)=>At.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(ve(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=sT(e);if(t!==void 0&&!this.wn(t))return!1;const i=ba(e);let r=new Set,a=0,l=0;for(;a<i.length&&this.wn(i[a]);++a)r=r.add(i[a].fieldPath.canonicalString());if(a===i.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!r.has(h.field.canonicalString())){const f=i[a];if(!this.Sn(h,f)||!this.bn(this.fn[l++],f))return!1}++a}for(;a<i.length;++a){const h=i[a];if(l>=this.fn.length||!this.bn(this.fn[l++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new ot(At.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new dp(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new dp(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new dp(i.field,i.dir==="asc"?0:1)));return new rg(rg.UNKNOWN_ID,this.collectionId,t,bf.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EM(n){if(ve(n instanceof Ke||n instanceof ft,20012),n instanceof Ke){if(n instanceof qP){const t=n.value.arrayValue?.values?.map((i=>Ke.create(n.field,"==",i)))||[];return ft.create(t,"or")}return n}const e=n.filters.map((t=>EM(t)));return ft.create(e,n.op)}function A7(n){if(n.getFilters().length===0)return[];const e=ET(EM(n));return ve(SM(e),7391),vT(e)||TT(e)?[e]:e.getFilters()}function vT(n){return n instanceof Ke}function TT(n){return n instanceof ft&&fS(n)}function SM(n){return vT(n)||TT(n)||(function(t){if(t instanceof ft&&hT(t)){for(const i of t.getFilters())if(!vT(i)&&!TT(i))return!1;return!0}return!1})(n)}function ET(n){if(ve(n instanceof Ke||n instanceof ft,34018),n instanceof Ke)return n;if(n.filters.length===1)return ET(n.filters[0]);const e=n.filters.map((i=>ET(i)));let t=ft.create(e,n.op);return t=gg(t),SM(t)?t:(ve(t instanceof ft,64498),ve(Yu(t),40251),ve(t.filters.length>1,57927),t.filters.reduce(((i,r)=>TS(i,r))))}function TS(n,e){let t;return ve(n instanceof Ke||n instanceof ft,38388),ve(e instanceof Ke||e instanceof ft,25473),t=n instanceof Ke?e instanceof Ke?(function(r,a){return ft.create([r,a],"and")})(n,e):bR(n,e):e instanceof Ke?bR(e,n):(function(r,a){if(ve(r.filters.length>0&&a.filters.length>0,48005),Yu(r)&&Yu(a))return BP(r,a.getFilters());const l=hT(r)?r:a,h=hT(r)?a:r,f=l.filters.map((d=>TS(d,h)));return ft.create(f,"or")})(n,e),gg(t)}function bR(n,e){if(Yu(e))return BP(e,n.getFilters());{const t=e.filters.map((i=>TS(n,i)));return ft.create(t,"or")}}function gg(n){if(ve(n instanceof Ke||n instanceof ft,11850),n instanceof Ke)return n;const e=n.getFilters();if(e.length===1)return gg(e[0]);if(UP(n))return n;const t=e.map((r=>gg(r))),i=[];return t.forEach((r=>{r instanceof Ke?i.push(r):r instanceof ft&&(r.op===n.op?i.push(...r.filters):i.push(r))})),i.length===1?i[0]:ft.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C7{constructor(){this.Cn=new ES}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(ci.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(ci.min())}updateCollectionGroup(e,t,i){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class ES{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new ot(tt.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ot(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="IndexedDbIndexManager",Wm=new Uint8Array(0);class I7{constructor(e,t){this.databaseId=t,this.vn=new ES,this.Fn=new Rr((i=>Ja(i)),((i,r)=>ed(i,r))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:i,parent:Rn(r)};return CR(e).put(a)}return H.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[cP(t),""],!1,!0);return CR(e).J(r).next((a=>{for(const l of a){if(l.collectionId!==t)break;i.push(xs(l.parent))}return i}))}addFieldIndex(e,t){const i=xh(e),r=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete r.indexId;const a=i.add(r);if(t.indexState){const l=su(e);return a.next((h=>{l.put(yR(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const i=xh(e),r=su(e),a=iu(e);return i.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=xh(e),i=iu(e),r=su(e);return t.Z().next((()=>i.Z())).next((()=>r.Z()))}createTargetIndexes(e,t){return H.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((r=>{if(r===0||r===1){const a=new wR(i).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const i=iu(e);let r=!0;const a=new Map;return H.forEach(this.Mn(t),(l=>this.xn(e,l).next((h=>{r&&(r=!!h),a.set(l,h)})))).next((()=>{if(r){let l=ke();const h=[];return H.forEach(a,((f,d)=>{le(AR,`Using index ${(function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map((ee=>`${ee.fieldPath}:${ee.kind}`)).join(",")}`})(f)} to execute ${Ja(t)}`);const g=(function(k,ee){const X=sT(ee);if(X===void 0)return null;for(const re of fg(k,X.fieldPath))switch(re.op){case"array-contains-any":return re.value.arrayValue.values||[];case"array-contains":return[re.value]}return null})(d,f),_=(function(k,ee){const X=new Map;for(const re of ba(ee))for(const I of fg(k,re.fieldPath))switch(I.op){case"==":case"in":X.set(re.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return X.set(re.fieldPath.canonicalString(),I.value),Array.from(X.values())}return null})(d,f),T=(function(k,ee){const X=[];let re=!0;for(const I of ba(ee)){const A=I.kind===0?iR(k,I.fieldPath,k.startAt):sR(k,I.fieldPath,k.startAt);X.push(A.value),re&&(re=A.inclusive)}return new $u(X,re)})(d,f),w=(function(k,ee){const X=[];let re=!0;for(const I of ba(ee)){const A=I.kind===0?sR(k,I.fieldPath,k.endAt):iR(k,I.fieldPath,k.endAt);X.push(A.value),re&&(re=A.inclusive)}return new $u(X,re)})(d,f),R=this.On(f,d,T),N=this.On(f,d,w),D=this.Nn(f,d,_),F=this.Bn(f.indexId,g,R,T.inclusive,N,w.inclusive,D);return H.forEach(F,(z=>i.Y(z,t.limit).next((k=>{k.forEach((ee=>{const X=fe.fromSegments(ee.documentKey);l.has(X)||(l=l.add(X),h.push(X))}))}))))})).next((()=>h))}return H.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=A7(ft.create(e.filters,"and")).map((i=>dT(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,r,a,l,h){const f=(t!=null?t.length:1)*Math.max(i.length,a.length),d=f/(t!=null?t.length:1),g=[];for(let _=0;_<f;++_){const T=t?this.Ln(t[_/d]):Wm,w=this.kn(e,T,i[_%d],r),R=this.qn(e,T,a[_%d],l),N=h.map((D=>this.kn(e,T,D,!0)));g.push(...this.createRange(w,R,N))}return g}kn(e,t,i,r){const a=new Da(e,fe.empty(),t,i);return r?a:a.An()}qn(e,t,i,r){const a=new Da(e,fe.empty(),t,i);return r?a.An():a}xn(e,t){const i=new wR(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((a=>{let l=null;for(const h of a)i.yn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l}))}getIndexType(e,t){let i=2;const r=this.Mn(t);return H.forEach(r,(a=>this.xn(e,a).next((l=>{l?i!==0&&l.fields.length<(function(f){let d=new ot(At.comparator),g=!1;for(const _ of f.filters)for(const T of _.getFlattenedFilters())T.field.isKeyField()||(T.op==="array-contains"||T.op==="array-contains-any"?g=!0:d=d.add(T.field));for(const _ of f.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(g?1:0)})(a)&&(i=1):i=0})))).next((()=>(function(l){return l.limit!==null})(t)&&r.length>1&&i===2?1:i))}Qn(e,t){const i=new Rh;for(const r of ba(e)){const a=t.data.field(r.fieldPath);if(a==null)return null;const l=i.Pn(r.kind);xa.Kt.Dt(a,l)}return i.un()}Ln(e){const t=new Rh;return xa.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new Rh;return xa.Kt.Dt(hS(this.databaseId,t),i.Pn((function(a){const l=ba(a);return l.length===0?0:l[l.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let r=[];r.push(new Rh);let a=0;for(const l of ba(e)){const h=i[a++];for(const f of r)if(this.Un(t,l.fieldPath)&&Nf(h))r=this.Kn(r,l,h);else{const d=f.Pn(l.kind);xa.Kt.Dt(h,d)}}return this.Wn(r)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const r=[...e],a=[];for(const l of i.arrayValue.values||[])for(const h of r){const f=new Rh;f.seed(h.un()),xa.Kt.Dt(l,f.Pn(t.kind)),a.push(f)}return a}Un(e,t){return!!e.filters.find((i=>i instanceof Ke&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=xh(e),r=su(e);return(t?i.J(oT,IDBKeyRange.bound(t,t)):i.J()).next((a=>{const l=[];return H.forEach(a,(h=>r.get([h.indexId,this.uid]).next((f=>{l.push((function(g,_){const T=_?new bf(_.sequenceNumber,new ci(el(_.readTime),new fe(xs(_.documentKey)),_.largestBatchId)):bf.empty(),w=g.fields.map((([R,N])=>new dp(At.fromServerFormat(R),N)));return new rg(g.indexId,g.collectionGroup,w,T)})(h,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,r)=>{const a=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return a!==0?a:Ie(i.collectionGroup,r.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const r=xh(e),a=su(e);return this.Gn(e).next((l=>r.J(oT,IDBKeyRange.bound(t,t)).next((h=>H.forEach(h,(f=>a.put(yR(f.indexId,this.uid,l,i))))))))}updateIndexEntries(e,t){const i=new Map;return H.forEach(t,((r,a)=>{const l=i.get(r.collectionGroup);return(l?H.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next((h=>(i.set(r.collectionGroup,h),H.forEach(h,(f=>this.zn(e,r,f).next((d=>{const g=this.jn(a,f);return d.isEqual(g)?H.resolve():this.Jn(e,a,f,d,g)})))))))}))}Hn(e,t,i,r){return iu(e).put(r.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,r){return iu(e).delete(r.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const r=iu(e);let a=new ot(uo);return r.ee({index:EP,range:IDBKeyRange.only([i.indexId,this.uid,Ep(this.$n(i,t))])},((l,h)=>{a=a.add(new Da(i.indexId,t,SR(h.arrayValue),SR(h.directionalValue)))})).next((()=>a))}jn(e,t){let i=new ot(uo);const r=this.Qn(t,e);if(r==null)return i;const a=sT(t);if(a!=null){const l=e.data.field(a.fieldPath);if(Nf(l))for(const h of l.arrayValue.values||[])i=i.add(new Da(t.indexId,e.key,this.Ln(h),r))}else i=i.add(new Da(t.indexId,e.key,Wm,r));return i}Jn(e,t,i,r,a){le(AR,"Updating index entries for document '%s'",t.key);const l=[];return(function(f,d,g,_,T){const w=f.getIterator(),R=d.getIterator();let N=tu(w),D=tu(R);for(;N||D;){let F=!1,z=!1;if(N&&D){const k=g(N,D);k<0?z=!0:k>0&&(F=!0)}else N!=null?z=!0:F=!0;F?(_(D),D=tu(R)):z?(T(N),N=tu(w)):(N=tu(w),D=tu(R))}})(r,a,uo,(h=>{l.push(this.Hn(e,t,i,h))}),(h=>{l.push(this.Yn(e,t,i,h))})),H.waitFor(l)}Gn(e){let t=1;return su(e).ee({index:TP,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,r,a)=>{a.done(),t=r.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((l,h)=>uo(l,h))).filter(((l,h,f)=>!h||uo(l,f[h-1])!==0));const r=[];r.push(e);for(const l of i){const h=uo(l,e),f=uo(l,t);if(h===0)r[0]=e.An();else if(h>0&&f<0)r.push(l),r.push(l.An());else if(f>0)break}r.push(t);const a=[];for(let l=0;l<r.length;l+=2){if(this.Zn(r[l],r[l+1]))return[];const h=r[l].Vn(this.uid,Wm,fe.empty()),f=r[l+1].Vn(this.uid,Wm,fe.empty());a.push(IDBKeyRange.bound(h,f))}return a}Zn(e,t){return uo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(IR)}getMinOffset(e,t){return H.mapArray(this.Mn(t),(i=>this.xn(e,i).next((r=>r||ye(44426))))).next(IR)}}function CR(n){return rn(n,Rf)}function iu(n){return rn(n,Jh)}function xh(n){return rn(n,rS)}function su(n){return rn(n,Xh)}function IR(n){ve(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;nS(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new ci(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wM=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(n,e,t){const i=n.store(Yi),r=n.store(zu),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const f=i.ee({range:l},((g,_,T)=>(h++,T.delete())));a.push(f.next((()=>{ve(h===1,47070,{batchId:t.batchId})})));const d=[];for(const g of t.mutations){const _=yP(e,g.key.path,t.batchId);a.push(r.delete(_)),d.push(g.key)}return H.waitFor(a).next((()=>d))}function yg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ye(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(wM,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);class py{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Xn={}}static wt(e,t,i,r){ve(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new py(a,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return co(e).ee({index:Ma,range:i},((r,a,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,i,r){const a=fu(e),l=co(e);return l.add({}).next((h=>{ve(typeof h=="number",49019);const f=new pS(h,t,i,r),d=(function(w,R,N){const D=N.baseMutations.map((z=>mg(w.yt,z))),F=N.mutations.map((z=>mg(w.yt,z)));return{userId:R,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:D,mutations:F}})(this.serializer,this.userId,f),g=[];let _=new ot(((T,w)=>Ie(T.canonicalString(),w.canonicalString())));for(const T of r){const w=yP(this.userId,T.key.path,h);_=_.add(T.key.path.popLast()),g.push(l.put(d)),g.push(a.put(w,t8))}return _.forEach((T=>{g.push(this.indexManager.addToCollectionParentIndex(e,T))})),e.addOnCommittedListener((()=>{this.Xn[h]=f.keys()})),H.waitFor(g).next((()=>f))}))}lookupMutationBatch(e,t){return co(e).get(t).next((i=>i?(ve(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),Ra(this.serializer,i)):null))}er(e,t){return this.Xn[t]?H.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const r=i.keys();return this.Xn[t]=r,r}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let a=null;return co(e).ee({index:Ma,range:r},((l,h,f)=>{h.userId===this.userId&&(ve(h.batchId>=i,47524,{tr:i}),a=Ra(this.serializer,h)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=La;return co(e).ee({index:Ma,range:t,reverse:!0},((r,a,l)=>{i=a.batchId,l.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,La],[this.userId,Number.POSITIVE_INFINITY]);return co(e).J(Ma,t).next((i=>i.map((r=>Ra(this.serializer,r)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=mp(this.userId,t.path),r=IDBKeyRange.lowerBound(i),a=[];return fu(e).ee({range:r},((l,h,f)=>{const[d,g,_]=l,T=xs(g);if(d===this.userId&&t.path.isEqual(T))return co(e).get(_).next((w=>{if(!w)throw ye(61480,{nr:l,batchId:_});ve(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:_}),a.push(Ra(this.serializer,w))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ot(Ie);const r=[];return t.forEach((a=>{const l=mp(this.userId,a.path),h=IDBKeyRange.lowerBound(l),f=fu(e).ee({range:h},((d,g,_)=>{const[T,w,R]=d,N=xs(w);T===this.userId&&a.path.isEqual(N)?i=i.add(R):_.done()}));r.push(f)})),H.waitFor(r).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,a=mp(this.userId,i),l=IDBKeyRange.lowerBound(a);let h=new ot(Ie);return fu(e).ee({range:l},((f,d,g)=>{const[_,T,w]=f,R=xs(T);_===this.userId&&i.isPrefixOf(R)?R.length===r&&(h=h.add(w)):g.done()})).next((()=>this.rr(e,h)))}rr(e,t){const i=[],r=[];return t.forEach((a=>{r.push(co(e).get(a).next((l=>{if(l===null)throw ye(35274,{batchId:a});ve(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),i.push(Ra(this.serializer,l))})))})),H.waitFor(r).next((()=>i))}removeMutationBatch(e,t){return bM(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),H.forEach(i,(r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return H.resolve();const i=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),r=[];return fu(e).ee({range:i},((a,l,h)=>{if(a[0]===this.userId){const f=xs(a[1]);r.push(f)}else h.done()})).next((()=>{ve(r.length===0,56720,{sr:r.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return AM(e,this.userId,t)}_r(e){return CM(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:La,lastStreamToken:""}))}}function AM(n,e,t){const i=mp(e,t.path),r=i[1],a=IDBKeyRange.lowerBound(i);let l=!1;return fu(n).ee({range:a,X:!0},((h,f,d)=>{const[g,_,T]=h;g===e&&_===r&&(l=!0),d.done()})).next((()=>l))}function co(n){return rn(n,Yi)}function fu(n){return rn(n,zu)}function CM(n){return rn(n,Cf)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new tl(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ee.fromTimestamp(new nt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.hr(e,r))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ru(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(ve(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let r=0;const a=[];return ru(e).ee(((l,h)=>{const f=Fh(h);f.sequenceNumber<=t&&i.get(f.targetId)===null&&(r++,a.push(this.removeTargetData(e,f)))})).next((()=>H.waitFor(a))).next((()=>r))}forEachTarget(e,t){return ru(e).ee(((i,r)=>{const a=Fh(r);t(a)}))}lr(e){return xR(e).get(lg).next((t=>(ve(t!==null,2888),t)))}hr(e,t){return xR(e).put(lg,t)}Pr(e,t){return ru(e).put(vM(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Ja(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let a=null;return ru(e).ee({range:r,index:vP},((l,h,f)=>{const d=Fh(h);ed(t,d.target)&&(a=d,f.done())})).next((()=>a))}addMatchingKeys(e,t,i){const r=[],a=_o(e);return t.forEach((l=>{const h=Rn(l.path);r.push(a.put({targetId:i,path:h})),r.push(this.referenceDelegate.addReference(e,i,l))})),H.waitFor(r)}removeMatchingKeys(e,t,i){const r=_o(e);return H.forEach(t,(a=>{const l=Rn(a.path);return H.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,a)])}))}removeMatchingKeysForTargetId(e,t){const i=_o(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=_o(e);let a=ke();return r.ee({range:i,X:!0},((l,h,f)=>{const d=xs(l[1]),g=new fe(d);a=a.add(g)})).next((()=>a))}containsKey(e,t){const i=Rn(t.path),r=IDBKeyRange.bound([i],[cP(i)],!1,!0);let a=0;return _o(e).ee({index:sS,X:!0,range:r},(([l,h],f,d)=>{l!==0&&(a++,d.done())})).next((()=>a>0))}At(e,t){return ru(e).get(t).next((i=>i?Fh(i):null))}}function ru(n){return rn(n,ju)}function xR(n){return rn(n,Ua)}function _o(n){return rn(n,qu)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="LruGarbageCollector",IM=1048576;function NR([n,e],[t,i]){const r=Ie(n,t);return r===0?Ie(e,i):r}class x7{constructor(e){this.Ir=e,this.buffer=new ot(NR),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();NR(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class RM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(DR,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fo(t)?le(DR,"Ignoring IndexedDB error during garbage collection: ",t):await ol(t)}await this.Vr(3e5)}))}}class D7{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(xi.ce);const i=new x7(t);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(RR)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RR):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,a,l,h,f,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,l=Date.now(),this.nthSequenceNumber(e,r)))).next((_=>(i=_,h=Date.now(),this.removeTargets(e,i,t)))).next((_=>(a=_,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((_=>(d=Date.now(),lu()<=ze.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${r} in `+(h-l)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${_} documents in `+(d-f)+`ms
Total Duration: ${d-g}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:_}))))}}function xM(n,e){return new D7(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e,t){this.db=e,this.garbageCollector=xM(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,r)=>t(r)))}addReference(e,t,i){return Qm(e,i)}removeReference(e,t,i){return Qm(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Qm(e,t)}br(e,t){return(function(r,a){let l=!1;return CM(r).te((h=>AM(r,h,a).next((f=>(f&&(l=!0),H.resolve(!f)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let a=0;return this.Sr(e,((l,h)=>{if(h<=t){const f=this.br(e,l).next((d=>{if(!d)return a++,i.getEntry(e,l).next((()=>(i.removeEntry(l,Ee.min()),_o(e).delete((function(_){return[0,Rn(_.path)]})(l)))))}));r.push(f)}})).next((()=>H.waitFor(r))).next((()=>i.apply(e))).next((()=>a))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Qm(e,t)}Sr(e,t){const i=_o(e);let r,a=xi.ce;return i.ee({index:sS},(([l,h],{path:f,sequenceNumber:d})=>{l===0?(a!==xi.ce&&t(new fe(xs(r)),a),a=d,r=f):a=xi.ce})).next((()=>{a!==xi.ce&&t(new fe(xs(r)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qm(n,e){return _o(n).put((function(i,r){return{targetId:0,path:Rn(i.path),sequenceNumber:r}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(){this.changes=new Rr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?H.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return va(e).put(i)}removeEntry(e,t,i){return va(e).delete((function(a,l){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],pg(l),h[h.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=Pt.newInvalidDocument(t);return va(e).ee({index:pp,range:IDBKeyRange.only(Dh(t))},((r,a)=>{i=this.Cr(t,a)})).next((()=>i))}vr(e,t){let i={size:0,document:Pt.newInvalidDocument(t)};return va(e).ee({index:pp,range:IDBKeyRange.only(Dh(t))},((r,a)=>{i={document:this.Cr(t,a),size:yg(a)}})).next((()=>i))}getEntries(e,t){let i=li();return this.Fr(e,t,((r,a)=>{const l=this.Cr(r,a);i=i.insert(r,l)})).next((()=>i))}Mr(e,t){let i=li(),r=new bt(fe.comparator);return this.Fr(e,t,((a,l)=>{const h=this.Cr(a,l);i=i.insert(a,h),r=r.insert(a,yg(l))})).next((()=>({documents:i,Or:r})))}Fr(e,t,i){if(t.isEmpty())return H.resolve();let r=new ot(OR);t.forEach((f=>r=r.add(f)));const a=IDBKeyRange.bound(Dh(r.first()),Dh(r.last())),l=r.getIterator();let h=l.getNext();return va(e).ee({index:pp,range:a},((f,d,g)=>{const _=fe.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;h&&OR(h,_)<0;)i(h,null),h=l.getNext();h&&h.isEqual(_)&&(i(h,d),h=l.hasNext()?l.getNext():null),h?g.j(Dh(h)):g.done()})).next((()=>{for(;h;)i(h,null),h=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,i,r,a){const l=t.path,h=[l.popLast().toArray(),l.lastSegment(),pg(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return va(e).J(IDBKeyRange.bound(h,f,!0)).next((d=>{a?.incrementDocumentReadCount(d.length);let g=li();for(const _ of d){const T=this.Cr(fe.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);T.isFoundDocument()&&(td(t,T)||r.has(T.key))&&(g=g.insert(T.key,T))}return g}))}getAllFromCollectionGroup(e,t,i,r){let a=li();const l=MR(t,i),h=MR(t,ci.max());return va(e).ee({index:_P,range:IDBKeyRange.bound(l,h,!0)},((f,d,g)=>{const _=this.Cr(fe.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);a=a.insert(_.key,_),a.size===r&&g.done()})).next((()=>a))}newChangeBuffer(e){return new M7(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return PR(e).get(rT).next((t=>(ve(!!t,20021),t)))}Dr(e,t){return PR(e).put(rT,t)}Cr(e,t){if(t){const i=_7(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ee.min())))return i}return Pt.newInvalidDocument(e)}}function NM(n){return new P7(n)}class M7 extends DM{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Rr((i=>i.toString()),((i,r)=>i.isEqual(r)))}applyChanges(e){const t=[];let i=0,r=new ot(((a,l)=>Ie(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const h=this.Br.get(a);if(t.push(this.Nr.removeEntry(e,a,h.readTime)),l.isValidDocument()){const f=pR(this.Nr.serializer,l);r=r.add(a.path.popLast());const d=yg(f);i+=d-h.size,t.push(this.Nr.addEntry(e,a,f))}else if(i-=h.size,this.trackRemovals){const f=pR(this.Nr.serializer,l.convertToNoDocument(Ee.min()));t.push(this.Nr.addEntry(e,a,f))}})),r.forEach((a=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Nr.updateMetadata(e,i)),H.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:r})=>(r.forEach(((a,l)=>{this.Br.set(a,{size:l,readTime:i.get(a).readTime})})),i)))}}function PR(n){return rn(n,If)}function va(n){return rn(n,ag)}function Dh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function MR(n,e){const t=e.documentKey.path.toArray();return[n,pg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function OR(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let a=0;a<t.length-2&&a<i.length-2;++a)if(r=Ie(t[a],i[a]),r)return r;return r=Ie(t.length,i.length),r||(r=Ie(t[t.length-2],i[i.length-2]),r||Ie(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&nf(i.mutation,r,Di.empty(),nt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ke()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ke()){const r=Ds();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let l=Lh();return a.forEach(((h,f)=>{l=l.insert(h,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=Ds();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ke())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((l,h)=>{t.set(l,h)}))}))}computeViews(e,t,i,r){let a=li();const l=tf(),h=(function(){return tf()})();return t.forEach(((f,d)=>{const g=i.get(d.key);r.has(d.key)&&(g===void 0||g.mutation instanceof Bo)?a=a.insert(d.key,d):g!==void 0?(l.set(d.key,g.mutation.getFieldMask()),nf(g.mutation,d,g.mutation.getFieldMask(),nt.now())):l.set(d.key,Di.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((d,g)=>l.set(d,g))),t.forEach(((d,g)=>h.set(d,new O7(g,l.get(d)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=tf();let r=new bt(((l,h)=>l-h)),a=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const h of l)h.keys().forEach((f=>{const d=t.get(f);if(d===null)return;let g=i.get(f)||Di.empty();g=h.applyToLocalView(d,g),i.set(f,g);const _=(r.get(h.batchId)||ke()).add(f);r=r.insert(h.batchId,_)}))})).next((()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),d=f.key,g=f.value,_=YP();g.forEach((T=>{if(!a.has(T)){const w=tM(t.get(T),i.get(T));w!==null&&_.set(T,w),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,d,_))}return H.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(l){return fe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):U8(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const l=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):H.resolve(Ds());let h=wf,f=a;return l.next((d=>H.forEach(d,((g,_)=>(h<_.largestBatchId&&(h=_.largestBatchId),a.get(g)?H.resolve():this.remoteDocumentCache.getEntry(e,g).next((T=>{f=f.insert(g,T)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,f,d,ke()))).next((g=>({batchId:h,changes:$P(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next((i=>{let r=Lh();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let l=Lh();return this.indexManager.getCollectionParents(e,a).next((h=>H.forEach(h,(f=>{const d=(function(_,T){return new ly(T,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next((g=>{g.forEach(((_,T)=>{l=l.insert(_,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((l=>{a.forEach(((f,d)=>{const g=d.getKey();l.get(g)===null&&(l=l.insert(g,Pt.newInvalidDocument(g)))}));let h=Lh();return l.forEach(((f,d)=>{const g=a.get(f);g!==void 0&&nf(g.mutation,d,Di.empty(),nt.now()),td(t,d)&&(h=h.insert(f,d))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V7{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:kn(r.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:TM(r.bundledQuery),readTime:kn(r.readTime)}})(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(){this.overlays=new bt(fe.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ds();return H.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.St(e,t,a)})),H.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),H.resolve()}getOverlaysForCollection(e,t,i){const r=Ds(),a=t.length+1,l=new fe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,d=f.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&f.largestBatchId>i&&r.set(f.getKey(),f)}return H.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new bt(((d,g)=>d-g));const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>i){let g=a.get(d.largestBatchId);g===null&&(g=Ds(),a=a.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const h=Ds(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,g)=>h.set(d,g))),!(h.size()>=r)););return H.resolve(h)}St(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new yS(t,i));let a=this.qr.get(t);a===void 0&&(a=ke(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L7{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.Qr=new ot(cn.$r),this.Ur=new ot(cn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new cn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new cn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new fe(new tt([])),i=new cn(t,e),r=new cn(t,e+1),a=[];return this.Ur.forEachInRange([i,r],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new fe(new tt([])),i=new cn(t,e),r=new cn(t,e+1);let a=ke();return this.Ur.forEachInRange([i,r],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new cn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class cn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return fe.comparator(e.key,t.key)||Ie(e.Yr,t.Yr)}static Kr(e,t){return Ie(e.Yr,t.Yr)||fe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ot(cn.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new pS(a,t,i,r);this.mutationQueue.push(l);for(const h of r)this.Zr=this.Zr.add(new cn(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return H.resolve(l)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ei(i),a=r<0?0:r;return H.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?La:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new cn(t,0),r=new cn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,r],(l=>{const h=this.Xr(l.Yr);a.push(h)})),H.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ot(Ie);return t.forEach((r=>{const a=new cn(r,0),l=new cn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(h=>{i=i.add(h.Yr)}))})),H.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;fe.isDocumentKey(a)||(a=a.child(""));const l=new cn(new fe(a),0);let h=new ot(Ie);return this.Zr.forEachWhile((f=>{const d=f.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(h=h.add(f.Yr)),!0)}),l),H.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){ve(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return H.forEach(t.mutations,(r=>{const a=new cn(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new cn(t,0),r=this.Zr.firstAfterOrEqual(i);return H.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F7{constructor(e){this.ri=e,this.docs=(function(){return new bt(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,l=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return H.resolve(i?i.document.mutableCopy():Pt.newInvalidDocument(t))}getEntries(e,t){let i=li();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Pt.newInvalidDocument(r))})),H.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=li();const l=t.path,h=new fe(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:d,value:{document:g}}=f.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||nS(dP(g),i)<=0||(r.has(g.key)||td(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return H.resolve(a)}getAllFromCollectionGroup(e,t,i,r){ye(9500)}ii(e,t){return H.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new B7(this)}getSize(e){return H.resolve(this.size)}}class B7 extends DM{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e){this.persistence=e,this.si=new Rr((t=>Ja(t)),ed),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new SS,this.targetCount=0,this.ai=tl.ur()}forEachTarget(e,t){return this.si.forEach(((i,r)=>t(r))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new tl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)})),H.waitFor(a).next((()=>r))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return H.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),H.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((l=>{a.push(r.markPotentiallyOrphaned(e,l))})),H.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return H.resolve(i)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,t){this.ui={},this.overlays={},this.ci=new xi(0),this.li=!1,this.li=!0,this.hi=new L7,this.referenceDelegate=e(this),this.Pi=new z7(this),this.indexManager=new C7,this.remoteDocumentCache=(function(r){return new F7(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new _M(t),this.Ii=new V7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new k7,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new U7(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){le("MemoryPersistence","Starting transaction:",e);const r=new j7(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((a=>this.referenceDelegate.di(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ai(e,t){return H.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class j7 extends pP{constructor(e){super(),this.currentSequenceNumber=e}}class gy{constructor(e){this.persistence=e,this.Ri=new SS,this.Vi=null}static mi(e){return new gy(e)}get fi(){if(this.Vi)return this.Vi;throw ye(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),H.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(i=>{const r=fe.fromPath(i);return this.gi(e,r).next((a=>{a||t.removeEntry(r,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class _g{constructor(e,t){this.persistence=e,this.pi=new Rr((i=>Rn(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=xM(this,t)}static mi(e,t){return new _g(e,t)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return H.forEach(this.pi,((i,r)=>this.br(e,i,r).next((a=>a?H.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ii(e,(l=>this.br(e,l,t).next((h=>{h||(i++,a.removeEntry(l,Ee.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),H.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yp(e.data.value)),t}br(e,t,i){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return H.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e){this.serializer=e}k(e,t,i,r){const a=new ty("createOrUpgrade",t);i<1&&r>=1&&((function(f){f.createObjectStore(Zf)})(e),(function(f){f.createObjectStore(Cf,{keyPath:e8}),f.createObjectStore(Yi,{keyPath:GI,autoIncrement:!0}).createIndex(Ma,KI,{unique:!0}),f.createObjectStore(zu)})(e),VR(e),(function(f){f.createObjectStore(Aa)})(e));let l=H.resolve();return i<3&&r>=3&&(i!==0&&((function(f){f.deleteObjectStore(qu),f.deleteObjectStore(ju),f.deleteObjectStore(Ua)})(e),VR(e)),l=l.next((()=>(function(f){const d=f.store(Ua),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return d.put(lg,g)})(a)))),i<4&&r>=4&&(i!==0&&(l=l.next((()=>(function(f,d){return d.store(Yi).J().next((_=>{f.deleteObjectStore(Yi),f.createObjectStore(Yi,{keyPath:GI,autoIncrement:!0}).createIndex(Ma,KI,{unique:!0});const T=d.store(Yi),w=_.map((R=>T.put(R)));return H.waitFor(w)}))})(e,a)))),l=l.next((()=>{(function(f){f.createObjectStore(Hu,{keyPath:u8})})(e)}))),i<5&&r>=5&&(l=l.next((()=>this.yi(a)))),i<6&&r>=6&&(l=l.next((()=>((function(f){f.createObjectStore(If)})(e),this.wi(a))))),i<7&&r>=7&&(l=l.next((()=>this.Si(a)))),i<8&&r>=8&&(l=l.next((()=>this.bi(e,a)))),i<9&&r>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&r>=10&&(l=l.next((()=>this.Di(a)))),i<11&&r>=11&&(l=l.next((()=>{(function(f){f.createObjectStore(iy,{keyPath:c8})})(e),(function(f){f.createObjectStore(sy,{keyPath:h8})})(e)}))),i<12&&r>=12&&(l=l.next((()=>{(function(f){const d=f.createObjectStore(ry,{keyPath:_8});d.createIndex(aT,v8,{unique:!1}),d.createIndex(SP,T8,{unique:!1})})(e)}))),i<13&&r>=13&&(l=l.next((()=>(function(f){const d=f.createObjectStore(ag,{keyPath:n8});d.createIndex(pp,i8),d.createIndex(_P,s8)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(Aa)))),i<14&&r>=14&&(l=l.next((()=>this.Fi(e,a)))),i<15&&r>=15&&(l=l.next((()=>(function(f){f.createObjectStore(rS,{keyPath:f8,autoIncrement:!0}).createIndex(oT,d8,{unique:!1}),f.createObjectStore(Xh,{keyPath:m8}).createIndex(TP,p8,{unique:!1}),f.createObjectStore(Jh,{keyPath:g8}).createIndex(EP,y8,{unique:!1})})(e)))),i<16&&r>=16&&(l=l.next((()=>{t.objectStore(Xh).clear()})).next((()=>{t.objectStore(Jh).clear()}))),i<17&&r>=17&&(l=l.next((()=>{(function(f){f.createObjectStore(oS,{keyPath:E8})})(e)}))),i<18&&r>=18&&aD()&&(l=l.next((()=>{t.objectStore(Xh).clear()})).next((()=>{t.objectStore(Jh).clear()}))),l}wi(e){let t=0;return e.store(Aa).ee(((i,r)=>{t+=yg(r)})).next((()=>{const i={byteSize:t};return e.store(If).put(rT,i)}))}yi(e){const t=e.store(Cf),i=e.store(Yi);return t.J().next((r=>H.forEach(r,(a=>{const l=IDBKeyRange.bound([a.userId,La],[a.userId,a.lastAcknowledgedBatchId]);return i.J(Ma,l).next((h=>H.forEach(h,(f=>{ve(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const d=Ra(this.serializer,f);return bM(e,a.userId,d).next((()=>{}))}))))}))))}Si(e){const t=e.store(qu),i=e.store(Aa);return e.store(Ua).get(lg).next((r=>{const a=[];return i.ee(((l,h)=>{const f=new tt(l),d=(function(_){return[0,Rn(_)]})(f);a.push(t.get(d).next((g=>g?H.resolve():(_=>t.put({targetId:0,path:Rn(_),sequenceNumber:r.highestListenSequenceNumber}))(f))))})).next((()=>H.waitFor(a)))}))}bi(e,t){e.createObjectStore(Rf,{keyPath:l8});const i=t.store(Rf),r=new ES,a=l=>{if(r.add(l)){const h=l.lastSegment(),f=l.popLast();return i.put({collectionId:h,parent:Rn(f)})}};return t.store(Aa).ee({X:!0},((l,h)=>{const f=new tt(l);return a(f.popLast())})).next((()=>t.store(zu).ee({X:!0},(([l,h,f],d)=>{const g=xs(h);return a(g.popLast())}))))}Di(e){const t=e.store(ju);return t.ee(((i,r)=>{const a=Fh(r),l=vM(this.serializer,a);return t.put(l)}))}Ci(e,t){const i=t.store(Aa),r=[];return i.ee(((a,l)=>{const h=t.store(ag),f=(function(_){return _.document?new fe(tt.fromString(_.document.name).popFirst(5)):_.noDocument?fe.fromSegments(_.noDocument.path):_.unknownDocument?fe.fromSegments(_.unknownDocument.path):ye(36783)})(l).path.toArray(),d={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(h.put(d))})).next((()=>H.waitFor(r)))}Fi(e,t){const i=t.store(Yi),r=NM(this.serializer),a=new wS(gy.mi,this.serializer.yt);return i.J().next((l=>{const h=new Map;return l.forEach((f=>{let d=h.get(f.userId)??ke();Ra(this.serializer,f).keys().forEach((g=>d=d.add(g))),h.set(f.userId,d)})),H.forEach(h,((f,d)=>{const g=new Mn(d),_=my.wt(this.serializer,g),T=a.getIndexManager(g),w=py.wt(g,this.serializer,T,a.referenceDelegate);return new PM(r,w,_,T).recalculateAndSaveOverlaysForDocumentKeys(new lT(t,xi.ce),f).next()}))}))}}function VR(n){n.createObjectStore(qu,{keyPath:o8}).createIndex(sS,a8,{unique:!0}),n.createObjectStore(ju,{keyPath:"targetId"}).createIndex(vP,r8,{unique:!0}),n.createObjectStore(Ua)}const ho="IndexedDbPersistence",n0=18e5,i0=5e3,s0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",H7="main";class bS{constructor(e,t,i,r,a,l,h,f,d,g,_=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=a,this.window=l,this.document=h,this.xi=d,this.Oi=g,this.Ni=_,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=T=>Promise.resolve(),!bS.v())throw new de(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new N7(this,r),this.$i=t+H7,this.serializer=new _M(f),this.Ui=new bo(this.$i,this.Ni,new q7(this.serializer)),this.hi=new T7,this.Pi=new R7(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NM(this.serializer),this.Ii=new v7,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&On(ho,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(oe.FAILED_PRECONDITION,s0);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new xi(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Xm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Fo(e))return le(ho,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le(ho,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Nh(e).get(eu).next((t=>H.resolve(this.es(t))))}ts(e){return Xm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,n0)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=rn(t,Hu);return i.J().next((r=>{const a=this.ss(r,n0),l=r.filter((h=>a.indexOf(h)===-1));return H.forEach(l,(h=>i.delete(h.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?H.resolve(!0):Nh(e).get(eu).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,i0)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new de(oe.FAILED_PRECONDITION,s0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xm(e).J().next((i=>this.ss(i,i0).find((r=>{if(this.clientId!==r.clientId){const a=!this.networkEnabled&&r.networkEnabled,l=!this.inForeground&&r.inForeground,h=this.networkEnabled===r.networkEnabled;if(a||l&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&le(ho,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Zf,Hu],(e=>{const t=new lT(e,xi.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Xm(e).J().next((t=>this.ss(t,n0).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return py.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new I7(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return my.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){le(ho,"Starting transaction:",e);const r=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?b8:f===17?CP:f===16?w8:f===15?aS:f===14?AP:f===13?bP:f===12?S8:f===11?wP:void ye(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,r,a,(h=>(l=new lT(h,this.ci?this.ci.next():xi.ce),t==="readwrite-primary"?this.Hi(l).next((f=>!!f||this.Yi(l))).next((f=>{if(!f)throw On(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new de(oe.FAILED_PRECONDITION,mP);return i(l)})).next((f=>this.Xi(l).next((()=>f)))):this.Is(l).next((()=>i(l)))))).then((h=>(l.raiseOnCommittedEvent(),h)))}Is(e){return Nh(e).get(eu).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,i0)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(oe.FAILED_PRECONDITION,s0)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Nh(e).put(eu,t)}static v(){return bo.v()}Zi(e){const t=Nh(e);return t.get(eu).next((i=>this.es(i)?(le(ho,"Releasing primary lease."),t.delete(eu)):H.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(On(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;oD()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return le(ho,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return On(ho,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){On("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Nh(n){return rn(n,Zf)}function Xm(n){return rn(n,Hu)}function G7(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=ke(),r=ke();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new AS(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return oD()?8:gP(sn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.ys(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,t,r,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new K7;return this.Ss(e,t,l).next((h=>{if(a.result=h,this.Vs)return this.bs(e,t,l,h.size)}))})).next((()=>a.result))}bs(e,t,i,r){return i.documentReadCount<this.fs?(lu()<=ze.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",uu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(lu()<=ze.DEBUG&&le("QueryEngine","Query:",uu(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(lu()<=ze.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",uu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(t))):H.resolve())}ys(e,t){if(rR(t))return H.resolve(null);let i=Pi(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=mT(t,null,"F"),i=Pi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const l=ke(...a);return this.ps.getDocuments(e,l).next((h=>this.indexManager.getMinOffset(e,i).next((f=>{const d=this.Ds(t,h);return this.Cs(t,d,l,f.readTime)?this.ys(e,mT(t,null,"F")):this.vs(e,d,t,f)}))))})))))}ws(e,t,i,r){return rR(t)||r.isEqual(Ee.min())?H.resolve(null):this.ps.getDocuments(e,i).next((a=>{const l=this.Ds(t,a);return this.Cs(t,l,i,r)?H.resolve(null):(lu()<=ze.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),uu(t)),this.vs(e,l,t,$j(r,wf)).next((h=>h)))}))}Ds(e,t){let i=new ot(GP(e));return t.forEach(((r,a)=>{td(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(e,t,i){return lu()<=ze.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",uu(t)),this.ps.getDocumentsMatchingQuery(e,t,ci.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="LocalStore",$7=3e8;class Y7{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new bt(Ie),this.xs=new Rr((a=>Ja(a)),ed),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PM(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function OM(n,e,t,i){return new Y7(n,e,t,i)}async function VM(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],h=[];let f=ke();for(const d of r){l.push(d.batchId);for(const g of d.mutations)f=f.add(g.key)}for(const d of a){h.push(d.batchId);for(const g of d.mutations)f=f.add(g.key)}return t.localDocuments.getDocuments(i,f).next((d=>({Ls:d,removedBatchIds:l,addedBatchIds:h})))}))}))}function W7(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,d,g){const _=d.batch,T=_.keys();let w=H.resolve();return T.forEach((R=>{w=w.next((()=>g.getEntry(f,R))).next((N=>{const D=d.docVersions.get(R);ve(D!==null,48541),N.version.compareTo(D)<0&&(_.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),g.addEntry(N)))}))})),w.next((()=>h.mutationQueue.removeMutationBatch(f,_)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let f=ke();for(let d=0;d<h.mutationResults.length;++d)h.mutationResults[d].transformResults.length>0&&(f=f.add(h.batch.mutations[d].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function kM(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Q7(n,e){const t=Re(n),i=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const h=[];e.targetChanges.forEach(((g,_)=>{const T=r.get(_);if(!T)return;h.push(t.Pi.removeMatchingKeys(a,g.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(a,g.addedDocuments,_))));let w=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(_)!==null?w=w.withResumeToken(Zt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,i)),r=r.insert(_,w),(function(N,D,F){return N.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=$7?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(T,w,g)&&h.push(t.Pi.updateTargetData(a,w))}));let f=li(),d=ke();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))})),h.push(X7(a,l,e.documentUpdates).next((g=>{f=g.ks,d=g.qs}))),!i.isEqual(Ee.min())){const g=t.Pi.getLastRemoteSnapshotVersion(a).next((_=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));h.push(g)}return H.waitFor(h).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,d))).next((()=>f))})).then((a=>(t.Ms=r,a)))}function X7(n,e,t){let i=ke(),r=ke();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let l=li();return t.forEach(((h,f)=>{const d=a.get(h);f.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(h)),f.isNoDocument()&&f.version.isEqual(Ee.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):le(CS,"Ignoring outdated watch update for ",h,". Current version:",d.version," Watch version:",f.version)})),{ks:l,qs:r}}))}function J7(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=La),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Z7(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.Pi.getTargetData(i,e).next((a=>a?(r=a,H.resolve(r)):t.Pi.allocateTargetId(i).next((l=>(r=new ur(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function ST(n,e,t){const i=Re(n),r=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Fo(l))throw l;le(CS,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function kR(n,e,t){const i=Re(n);let r=Ee.min(),a=ke();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,d,g){const _=Re(f),T=_.xs.get(g);return T!==void 0?H.resolve(_.Ms.get(T)):_.Pi.getTargetData(d,g)})(i,l,Pi(e)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next((f=>{a=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,t?r:Ee.min(),t?a:ke()))).next((h=>(eq(i,B8(e),h),{documents:h,Qs:a})))))}function eq(n,e,t){let i=n.Os.get(e)||Ee.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class LR{constructor(){this.activeTargetIds=K8()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LM{constructor(){this.Mo=new LR,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new LR,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tq{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="ConnectivityMonitor";class FR{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(UR,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(UR,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jm=null;function wT(){return Jm===null?Jm=(function(){return 268435456+Math.round(2147483648*Math.random())})():Jm++,"0x"+Jm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0="RestConnection",nq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iq{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===ug?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,a){const l=wT(),h=this.zo(e,t.toUriEncodedString());le(r0,`Sending RPC '${e}' ${l}:`,h,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,a);const{host:d}=new URL(h),g=Lo(d);return this.Jo(e,h,f,i,g).then((_=>(le(r0,`Received RPC '${e}' ${l}: `,_),_)),(_=>{throw Sf(r0,`RPC '${e}' ${l} failed with error: `,_,"url: ",h,"request:",i),_}))}Ho(e,t,i,r,a,l){return this.Go(e,t,i,r,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+cc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}zo(e,t){const i=nq[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sq{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="WebChannelConnection";class rq extends iq{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,a){const l=wT();return new Promise(((h,f)=>{const d=new sP;d.setWithCredentials(!0),d.listenOnce(rP.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case fp.NO_ERROR:const _=d.getResponseJson();le(An,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),h(_);break;case fp.TIMEOUT:le(An,`RPC '${e}' ${l} timed out`),f(new de(oe.DEADLINE_EXCEEDED,"Request time out"));break;case fp.HTTP_ERROR:const T=d.getStatus();if(le(An,`RPC '${e}' ${l} failed with status:`,T,"response text:",d.getResponseText()),T>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const R=w?.error;if(R&&R.status&&R.message){const N=(function(F){const z=F.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(z)>=0?z:oe.UNKNOWN})(R.status);f(new de(N,R.message))}else f(new de(oe.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new de(oe.UNAVAILABLE,"Connection failed."));break;default:ye(9055,{l_:e,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{le(An,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(r);le(An,`RPC '${e}' ${l} sending request:`,r),d.send(t,"POST",g,i,15)}))}T_(e,t,i){const r=wT(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=lP(),h=aP(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const g=a.join("");le(An,`Creating RPC '${e}' stream ${r}: ${g}`,f);const _=l.createWebChannel(g,f);this.I_(_);let T=!1,w=!1;const R=new sq({Yo:D=>{w?le(An,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(T||(le(An,`Opening RPC '${e}' stream ${r} transport.`),_.open(),T=!0),le(An,`RPC '${e}' stream ${r} sending:`,D),_.send(D))},Zo:()=>_.close()}),N=(D,F,z)=>{D.listen(F,(k=>{try{z(k)}catch(ee){setTimeout((()=>{throw ee}),0)}}))};return N(_,kh.EventType.OPEN,(()=>{w||(le(An,`RPC '${e}' stream ${r} transport opened.`),R.o_())})),N(_,kh.EventType.CLOSE,(()=>{w||(w=!0,le(An,`RPC '${e}' stream ${r} transport closed`),R.a_(),this.E_(_))})),N(_,kh.EventType.ERROR,(D=>{w||(w=!0,Sf(An,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),R.a_(new de(oe.UNAVAILABLE,"The operation could not be completed")))})),N(_,kh.EventType.MESSAGE,(D=>{if(!w){const F=D.data[0];ve(!!F,16349);const z=F,k=z?.error||z[0]?.error;if(k){le(An,`RPC '${e}' stream ${r} received error:`,k);const ee=k.status;let X=(function(A){const x=Yt[A];if(x!==void 0)return sM(x)})(ee),re=k.message;X===void 0&&(X=oe.INTERNAL,re="Unknown error status: "+ee+" with message "+k.message),w=!0,R.a_(new de(X,re)),_.close()}else le(An,`RPC '${e}' stream ${r} received:`,F),R.u_(F)}})),N(h,oP.STAT_EVENT,(D=>{D.stat===nT.PROXY?le(An,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===nT.NOPROXY&&le(An,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oq(){return typeof window<"u"?window:null}function Sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(n){return new l7(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&le("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="PersistentStream";class FM{constructor(e,t,i,r,a,l,h,f){this.Mi=e,this.S_=i,this.b_=r,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new UM(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(On(t.toString()),On("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new de(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(BR,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(le(BR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class aq extends FM{constructor(e,t,i,r,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=h7(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ee.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ee.min():l.readTime?kn(l.readTime):Ee.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=yT(this.serializer),t.addTarget=(function(a,l){let h;const f=l.target;if(h=hg(f)?{documents:fM(a,f)}:{query:dM(a,f).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=aM(a,l.resumeToken);const d=pT(a,l.expectedCount);d!==null&&(h.expectedCount=d)}else if(l.snapshotVersion.compareTo(Ee.min())>0){h.readTime=Ju(a,l.snapshotVersion.toTimestamp());const d=pT(a,l.expectedCount);d!==null&&(h.expectedCount=d)}return h})(this.serializer,e);const i=d7(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=yT(this.serializer),t.removeTarget=e,this.q_(t)}}class lq extends FM{constructor(e,t,i,r,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=f7(e.writeResults,e.commitTime),i=kn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=yT(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>mg(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uq{}class cq extends uq{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new de(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,gT(t,i),r,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(oe.UNKNOWN,a.toString())}))}Ho(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(e,gT(t,i),r,l,h,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(oe.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class hq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(On(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="RemoteStore";class fq{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{ll(this)&&(le(nl,"Restarting streams for network reachability change."),await(async function(f){const d=Re(f);d.Ea.add(4),await id(d),d.Ra.set("Unknown"),d.Ea.delete(4),await _y(d)})(this))}))})),this.Ra=new hq(i,r)}}async function _y(n){if(ll(n))for(const e of n.da)await e(!0)}async function id(n){for(const e of n.da)await e(!1)}function BM(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),DS(t)?xS(t):fc(t).O_()&&RS(t,e))}function IS(n,e){const t=Re(n),i=fc(t);t.Ia.delete(e),i.O_()&&zM(t,e),t.Ia.size===0&&(i.O_()?i.L_():ll(t)&&t.Ra.set("Unknown"))}function RS(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fc(n).Y_(e)}function zM(n,e){n.Va.Ue(e),fc(n).Z_(e)}function xS(n){n.Va=new s7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),fc(n).start(),n.Ra.ua()}function DS(n){return ll(n)&&!fc(n).x_()&&n.Ia.size>0}function ll(n){return Re(n).Ea.size===0}function jM(n){n.Va=void 0}async function dq(n){n.Ra.set("Online")}async function mq(n){n.Ia.forEach(((e,t)=>{RS(n,e)}))}async function pq(n,e){jM(n),DS(n)?(n.Ra.ha(e),xS(n)):n.Ra.set("Unknown")}async function gq(n,e,t){if(n.Ra.set("Online"),e instanceof oM&&e.state===2&&e.cause)try{await(async function(r,a){const l=a.cause;for(const h of a.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,l),r.Ia.delete(h),r.Va.removeTarget(h))})(n,e)}catch(i){le(nl,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await vg(n,i)}else if(e instanceof Tp?n.Va.Ze(e):e instanceof rM?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ee.min()))try{const i=await kM(n.localStore);t.compareTo(i)>=0&&await(function(a,l){const h=a.Va.Tt(l);return h.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const g=a.Ia.get(d);g&&a.Ia.set(d,g.withResumeToken(f.resumeToken,l))}})),h.targetMismatches.forEach(((f,d)=>{const g=a.Ia.get(f);if(!g)return;a.Ia.set(f,g.withResumeToken(Zt.EMPTY_BYTE_STRING,g.snapshotVersion)),zM(a,f);const _=new ur(g.target,f,d,g.sequenceNumber);RS(a,_)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){le(nl,"Failed to raise snapshot:",i),await vg(n,i)}}async function vg(n,e,t){if(!Fo(e))throw e;n.Ea.add(1),await id(n),n.Ra.set("Offline"),t||(t=()=>kM(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(nl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await _y(n)}))}function qM(n,e){return e().catch((t=>vg(n,t,e)))}async function sd(n){const e=Re(n),t=Mo(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:La;for(;yq(e);)try{const r=await J7(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,_q(e,r)}catch(r){await vg(e,r)}HM(e)&&GM(e)}function yq(n){return ll(n)&&n.Ta.length<10}function _q(n,e){n.Ta.push(e);const t=Mo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function HM(n){return ll(n)&&!Mo(n).x_()&&n.Ta.length>0}function GM(n){Mo(n).start()}async function vq(n){Mo(n).ra()}async function Tq(n){const e=Mo(n);for(const t of n.Ta)e.ea(t.mutations)}async function Eq(n,e,t){const i=n.Ta.shift(),r=gS.from(i,e,t);await qM(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await sd(n)}async function Sq(n,e){e&&Mo(n).X_&&await(async function(i,r){if((function(l){return t7(l)&&l!==oe.ABORTED})(r.code)){const a=i.Ta.shift();Mo(i).B_(),await qM(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await sd(i)}})(n,e),HM(n)&&GM(n)}async function zR(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),le(nl,"RemoteStore received new credentials");const i=ll(t);t.Ea.add(3),await id(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await _y(t)}async function wq(n,e){const t=Re(n);e?(t.Ea.delete(2),await _y(t)):e||(t.Ea.add(2),await id(t),t.Ra.set("Unknown"))}function fc(n){return n.ma||(n.ma=(function(t,i,r){const a=Re(t);return a.sa(),new aq(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Xo:dq.bind(null,n),t_:mq.bind(null,n),r_:pq.bind(null,n),H_:gq.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),DS(n)?xS(n):n.Ra.set("Unknown")):(await n.ma.stop(),jM(n))}))),n.ma}function Mo(n){return n.fa||(n.fa=(function(t,i,r){const a=Re(t);return a.sa(),new lq(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:vq.bind(null,n),r_:Sq.bind(null,n),ta:Tq.bind(null,n),na:Eq.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await sd(n)):(await n.fa.stop(),n.Ta.length>0&&(le(nl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const l=Date.now()+i,h=new NS(e,t,l,r,a);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function PS(n,e){if(On("AsyncQueue",`${e}: ${n}`),Fo(n))return new de(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{static emptySet(e){return new Cu(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||fe.comparator(t.key,i.key):(t,i)=>fe.comparator(t.key,i.key),this.keyedMap=Lh(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Cu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Cu;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.ga=new bt(fe.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):ye(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Zu{constructor(e,t,i,r,a,l,h,f,d){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(e,t,i,r,a){const l=[];return t.forEach((h=>{l.push({type:0,doc:h})})),new Zu(e,t,Cu.emptySet(t),l,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bq{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class Aq{constructor(){this.queries=qR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Re(t),a=r.queries;r.queries=qR(),a.forEach(((l,h)=>{for(const f of h.Sa)f.onError(i)}))})(this,new de(oe.ABORTED,"Firestore shutting down"))}}function qR(){return new Rr((n=>HP(n)),uy)}async function Cq(n,e){const t=Re(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.ba()&&e.Da()&&(i=2):(a=new bq,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(l){const h=PS(l,`Initialization of query '${uu(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&MS(t)}async function Iq(n,e){const t=Re(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?r=e.Da()?0:1:!a.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Rq(n,e){const t=Re(n);let i=!1;for(const r of e){const a=r.query,l=t.queries.get(a);if(l){for(const h of l.Sa)h.Fa(r)&&(i=!0);l.wa=r}}i&&MS(t)}function xq(n,e,t){const i=Re(n),r=i.queries.get(e);if(r)for(const a of r.Sa)a.onError(t);i.queries.delete(e)}function MS(n){n.Ca.forEach((e=>{e.next()}))}var bT,HR;(HR=bT||(bT={})).Ma="default",HR.Cache="cache";class Dq{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Zu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Zu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e){this.key=e}}class $M{constructor(e){this.key=e}}class Nq{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=GP(e),this.tu=new Cu(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new jR,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=r,h=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((g,_)=>{const T=r.get(g),w=td(this.query,_)?_:null,R=!!T&&this.mutatedKeys.has(T.key),N=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let D=!1;T&&w?T.data.isEqual(w.data)?R!==N&&(i.track({type:3,doc:w}),D=!0):this.su(T,w)||(i.track({type:2,doc:w}),D=!0,(f&&this.eu(w,f)>0||d&&this.eu(w,d)<0)&&(h=!0)):!T&&w?(i.track({type:0,doc:w}),D=!0):T&&!w&&(i.track({type:1,doc:T}),D=!0,(f||d)&&(h=!0)),D&&(w?(l=l.add(w),a=N?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),i.track({type:1,doc:g})}return{tu:l,iu:i,Cs:h,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,_)=>(function(w,R){const N=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ye(20277,{Rt:D})}};return N(w)-N(R)})(g.type,_.type)||this.eu(g.doc,_.doc))),this.ou(i),r=r??!1;const h=t&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,d=f!==this.Za;return this.Za=f,l.length!==0||d?{snapshot:new Zu(this.query,e.tu,a,l,e.mutatedKeys,f===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new jR,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new $M(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new KM(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Zu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const OS="SyncEngine";class Pq{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Mq{constructor(e){this.key=e,this.hu=!1}}class Oq{constructor(e,t,i,r,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Rr((h=>HP(h)),uy),this.Iu=new Map,this.Eu=new Set,this.du=new bt(fe.comparator),this.Au=new Map,this.Ru=new SS,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Vq(n,e,t=!0){const i=ZM(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await YM(i,e,t,!0),r}async function kq(n,e){const t=ZM(n);await YM(t,e,!0,!1)}async function YM(n,e,t,i){const r=await Z7(n.localStore,Pi(e)),a=r.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let h;return i&&(h=await Lq(n,e,a,l==="current",r.resumeToken)),n.isPrimaryClient&&t&&BM(n.remoteStore,r),h}async function Lq(n,e,t,i,r){n.pu=(_,T,w)=>(async function(N,D,F,z){let k=D.view.ru(F);k.Cs&&(k=await kR(N.localStore,D.query,!1).then((({documents:I})=>D.view.ru(I,k))));const ee=z&&z.targetChanges.get(D.targetId),X=z&&z.targetMismatches.get(D.targetId)!=null,re=D.view.applyChanges(k,N.isPrimaryClient,ee,X);return KR(N,D.targetId,re.au),re.snapshot})(n,_,T,w);const a=await kR(n.localStore,e,!0),l=new Nq(e,a.Qs),h=l.ru(a.documents),f=nd.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),d=l.applyChanges(h,n.isPrimaryClient,f);KR(n,t,d.au);const g=new Pq(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function Uq(n,e,t){const i=Re(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((l=>!uy(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await ST(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&IS(i.remoteStore,r.targetId),AT(i,r.targetId)})).catch(ol)):(AT(i,r.targetId),await ST(i.localStore,r.targetId,!0))}async function Fq(n,e){const t=Re(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),IS(t.remoteStore,i.targetId))}async function Bq(n,e,t){const i=eO(n);try{const r=await(function(l,h){const f=Re(l),d=nt.now(),g=h.reduce(((w,R)=>w.add(R.key)),ke());let _,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let R=li(),N=ke();return f.Ns.getEntries(w,g).next((D=>{R=D,R.forEach(((F,z)=>{z.isValidDocument()||(N=N.add(F))}))})).next((()=>f.localDocuments.getOverlayedDocuments(w,R))).next((D=>{_=D;const F=[];for(const z of h){const k=Z8(z,_.get(z.key).overlayedDocument);k!=null&&F.push(new Bo(z.key,k,kP(k.value.mapValue),$n.exists(!0)))}return f.mutationQueue.addMutationBatch(w,d,F,h)})).next((D=>{T=D;const F=D.applyToLocalDocumentSet(_,N);return f.documentOverlayCache.saveOverlays(w,D.batchId,F)}))})).then((()=>({batchId:T.batchId,changes:$P(_)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,h,f){let d=l.Vu[l.currentUser.toKey()];d||(d=new bt(Ie)),d=d.insert(h,f),l.Vu[l.currentUser.toKey()]=d})(i,r.batchId,t),await rd(i,r.changes),await sd(i.remoteStore)}catch(r){const a=PS(r,"Failed to persist write");t.reject(a)}}async function WM(n,e){const t=Re(n);try{const i=await Q7(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const l=t.Au.get(a);l&&(ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?ve(l.hu,14607):r.removedDocuments.size>0&&(ve(l.hu,42227),l.hu=!1))})),await rd(t,i,e)}catch(i){await ol(i)}}function GR(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,l)=>{const h=l.view.va(e);h.snapshot&&r.push(h.snapshot)})),(function(l,h){const f=Re(l);f.onlineState=h;let d=!1;f.queries.forEach(((g,_)=>{for(const T of _.Sa)T.va(h)&&(d=!0)})),d&&MS(f)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function zq(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let l=new bt(fe.comparator);l=l.insert(a,Pt.newNoDocument(a,Ee.min()));const h=ke().add(a),f=new dy(Ee.min(),new Map,new bt(Ie),l,h);await WM(i,f),i.du=i.du.remove(a),i.Au.delete(e),VS(i)}else await ST(i.localStore,e,!1).then((()=>AT(i,e,t))).catch(ol)}async function jq(n,e){const t=Re(n),i=e.batch.batchId;try{const r=await W7(t.localStore,e);XM(t,i,null),QM(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await rd(t,r)}catch(r){await ol(r)}}async function qq(n,e,t){const i=Re(n);try{const r=await(function(l,h){const f=Re(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let g;return f.mutationQueue.lookupMutationBatch(d,h).next((_=>(ve(_!==null,37113),g=_.keys(),f.mutationQueue.removeMutationBatch(d,_)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,g,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g))).next((()=>f.localDocuments.getDocuments(d,g)))}))})(i.localStore,e);XM(i,e,t),QM(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await rd(i,r)}catch(r){await ol(r)}}function QM(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function XM(n,e,t){const i=Re(n);let r=i.Vu[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function AT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||JM(n,i)}))}function JM(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(IS(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),VS(n))}function KR(n,e,t){for(const i of t)i instanceof KM?(n.Ru.addReference(i.key,e),Hq(n,i)):i instanceof $M?(le(OS,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||JM(n,i.key)):ye(19791,{wu:i})}function Hq(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(le(OS,"New document in limbo: "+t),n.Eu.add(i),VS(n))}function VS(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new fe(tt.fromString(e)),i=n.fu.next();n.Au.set(i,new Mq(t)),n.du=n.du.insert(t,i),BM(n.remoteStore,new ur(Pi(dS(t.path)),i,"TargetPurposeLimboResolution",xi.ce))}}async function rd(n,e,t){const i=Re(n),r=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,f)=>{l.push(i.pu(f,e,t).then((d=>{if((d||t)&&i.isPrimaryClient){const g=d?!d.fromCache:t?.targetChanges.get(f.targetId)?.current;i.sharedClientState.updateQueryState(f.targetId,g?"current":"not-current")}if(d){r.push(d);const g=AS.As(f.targetId,d);a.push(g)}})))})),await Promise.all(l),i.Pu.H_(r),await(async function(f,d){const g=Re(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>H.forEach(d,(T=>H.forEach(T.Es,(w=>g.persistence.referenceDelegate.addReference(_,T.targetId,w))).next((()=>H.forEach(T.ds,(w=>g.persistence.referenceDelegate.removeReference(_,T.targetId,w)))))))))}catch(_){if(!Fo(_))throw _;le(CS,"Failed to update sequence numbers: "+_)}for(const _ of d){const T=_.targetId;if(!_.fromCache){const w=g.Ms.get(T),R=w.snapshotVersion,N=w.withLastLimboFreeSnapshotVersion(R);g.Ms=g.Ms.insert(T,N)}}})(i.localStore,a))}async function Gq(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){le(OS,"User change. New user:",e.toKey());const i=await VM(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((h=>{h.forEach((f=>{f.reject(new de(oe.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await rd(t,i.Ls)}}function Kq(n,e){const t=Re(n),i=t.Au.get(e);if(i&&i.hu)return ke().add(i.key);{let r=ke();const a=t.Iu.get(e);if(!a)return r;for(const l of a){const h=t.Tu.get(l);r=r.unionWith(h.view.nu)}return r}}function ZM(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kq.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zq.bind(null,e),e.Pu.H_=Rq.bind(null,e.eventManager),e.Pu.yu=xq.bind(null,e.eventManager),e}function eO(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jq.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qq.bind(null,e),e}class Mf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yy(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return OM(this.persistence,new MM,e.initialUser,this.serializer)}Cu(e){return new wS(gy.mi,this.serializer)}Du(e){return new LM}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mf.provider={build:()=>new Mf};class $q extends Mf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ve(this.persistence.referenceDelegate instanceof _g,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new RM(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new wS((i=>_g.mi(i,t)),this.serializer)}}class Yq extends Mf{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await eO(this.xu.syncEngine),await sd(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return OM(this.persistence,new MM,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new RM(i,e.asyncQueue,t)}Mu(e,t){const i=new Xj(t,this.persistence);return new Qj(e.asyncQueue,i)}Cu(e){const t=G7(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new bS(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,oq(),Sp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new LM}}class Tg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>GR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gq.bind(null,this.syncEngine),await wq(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new Aq})()}createDatastore(e){const t=yy(e.databaseInfo.databaseId),i=(function(a){return new rq(a)})(e.databaseInfo);return(function(a,l,h,f){return new cq(a,l,h,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,l,h){return new fq(i,r,a,l,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>GR(this.syncEngine,t,0)),(function(){return FR.v()?new FR:new tq})())}createSyncEngine(e,t){return(function(r,a,l,h,f,d,g){const _=new Oq(r,a,l,h,f,d);return g&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Re(t);le(nl,"RemoteStore shutting down."),i.Ea.add(5),await id(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Tg.provider={build:()=>new Tg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wq{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):On("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="FirestoreClient";class Qq{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Mn.UNAUTHENTICATED,this.clientId=eS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{le(Oo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(le(Oo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=PS(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function o0(n,e){n.asyncQueue.verifyOperationInProgress(),le(Oo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await VM(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function $R(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Xq(n);le(Oo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>zR(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>zR(e.remoteStore,r))),n._onlineComponents=e}async function Xq(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(Oo,"Using user provided OfflineComponentProvider");try{await o0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===oe.FAILED_PRECONDITION||r.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Sf("Error using user provided cache. Falling back to memory cache: "+t),await o0(n,new Mf)}}else le(Oo,"Using default OfflineComponentProvider"),await o0(n,new $q(void 0));return n._offlineComponents}async function tO(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(Oo,"Using user provided OnlineComponentProvider"),await $R(n,n._uninitializedComponentsProvider._online)):(le(Oo,"Using default OnlineComponentProvider"),await $R(n,new Tg))),n._onlineComponents}function Jq(n){return tO(n).then((e=>e.syncEngine))}async function Zq(n){const e=await tO(n),t=e.eventManager;return t.onListen=Vq.bind(null,e.syncEngine),t.onUnlisten=Uq.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=kq.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Fq.bind(null,e.syncEngine),t}function eH(n,e,t={}){const i=new dr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,f,d){const g=new Wq({next:T=>{g.Nu(),l.enqueueAndForget((()=>Iq(a,_))),T.fromCache&&f.source==="server"?d.reject(new de(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(T)},error:T=>d.reject(T)}),_=new Dq(h,g,{includeMetadataChanges:!0,qa:!0});return Cq(a,_)})(await Zq(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tH="firestore.googleapis.com",WR=!0;class QR{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tH,this.ssl=WR}else this.host=e.host,this.ssl=e.ssl??WR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<IM)throw new de(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Kj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nO(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new de(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new de(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new de(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class kS{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QR({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QR(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Lj;switch(i.type){case"firstParty":return new Bj(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=YR.get(t);i&&(le("ComponentProvider","Removing Datastore"),YR.delete(t),i.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new vy(this.firestore,e,this._query)}}class wn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ao(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}toJSON(){return{type:wn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Jf(t,wn._jsonSchema))return new wn(e,i||null,new fe(tt.fromString(t.referencePath)))}}wn._jsonSchemaVersion="firestore/documentReference/1.0",wn._jsonSchema={type:Xt("string",wn._jsonSchemaVersion),referencePath:Xt("string")};class Ao extends vy{constructor(e,t,i){super(e,t,dS(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new fe(e))}withConverter(e){return new Ao(this.firestore,e,this._path)}}function Eg(n,e,...t){if(n=fn(n),hP("collection","path",e),n instanceof kS){const i=tt.fromString(e,...t);return BI(i),new Ao(n,null,i)}{if(!(n instanceof wn||n instanceof Ao))throw new de(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tt.fromString(e,...t));return BI(i),new Ao(n.firestore,null,i)}}function LS(n,e,...t){if(n=fn(n),arguments.length===1&&(e=eS.newId()),hP("doc","path",e),n instanceof kS){const i=tt.fromString(e,...t);return FI(i),new wn(n,null,new fe(i))}{if(!(n instanceof wn||n instanceof Ao))throw new de(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(tt.fromString(e,...t));return FI(i),new wn(n.firestore,n instanceof Ao?n.converter:null,new fe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR="AsyncQueue";class JR{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new UM(this,"async_queue_retry"),this._c=()=>{const i=Sp();i&&le(XR,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Sp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Sp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new dr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Fo(e))throw e;le(XR,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,On("INTERNAL UNHANDLED ERROR: ",ZR(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=NS.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&ye(47125,{Pc:ZR(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ZR(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH=-1;class Ty extends kS{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new JR,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JR(e),this._firestoreClient=void 0,await e}}}function iH(n,e,t){t||(t=ug);const i=jg(n,"firestore");if(i.isInitialized(t)){const r=i.getImmediate({identifier:t}),a=i.getOptions(t);if(Io(a,e))return r;throw new de(oe.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new de(oe.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<IM)throw new de(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Lo(e.host)&&aE(e.host),i.initialize({options:e,instanceIdentifier:t})}function iO(n){if(n._terminated)throw new de(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||sH(n),n._firestoreClient}function sH(n){const e=n._freezeSettings(),t=(function(r,a,l,h){return new C8(r,a,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,nO(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Qq(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(r){const a=r?._online.build();return{_offline:r?._offline.build(a),_online:a}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ii(Zt.fromBase64String(e))}catch(t){throw new de(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ii(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ii._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jf(e,Ii._jsonSchema))return Ii.fromBase64String(e.bytes)}}Ii._jsonSchemaVersion="firestore/bytes/1.0",Ii._jsonSchema={type:Xt("string",Ii._jsonSchemaVersion),bytes:Xt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Os._jsonSchemaVersion}}static fromJSON(e){if(Jf(e,Os._jsonSchema))return new Os(e.latitude,e.longitude)}}Os._jsonSchemaVersion="firestore/geoPoint/1.0",Os._jsonSchema={type:Xt("string",Os._jsonSchemaVersion),latitude:Xt("number"),longitude:Xt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jf(e,Vs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vs(e.vectorValues);throw new de(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vs._jsonSchemaVersion="firestore/vectorValue/1.0",Vs._jsonSchema={type:Xt("string",Vs._jsonSchemaVersion),vectorValues:Xt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rH=/^__.*__$/;class oH{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Bo(e,this.data,this.fieldMask,t,this.fieldTransforms):new hc(e,this.data,t,this.fieldTransforms)}}function sO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ye(40011,{Ac:n})}}class BS{constructor(e,t,i,r,a,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new BS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(sO(this.Ac)&&rH.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class aH{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||yy(e)}Cc(e,t,i,r=!1){return new BS({Ac:e,methodName:t,Dc:i,path:At.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lH(n){const e=n._freezeSettings(),t=yy(n._databaseId);return new aH(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uH(n,e,t,i,r,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,e,t,r);lO("Data must be an object, but it was:",l,i);const h=oO(i,l);let f,d;if(a.merge)f=new Di(l.fieldMask),d=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const _ of a.mergeFields){const T=cH(e,_,t);if(!l.contains(T))throw new de(oe.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);fH(g,T)||g.push(T)}f=new Di(g),d=l.fieldTransforms.filter((_=>f.covers(_.field)))}else f=null,d=l.fieldTransforms;return new oH(new Gn(h),f,d)}class zS extends FS{_toFieldTransform(e){return new eM(e.path,new Wu)}isEqual(e){return e instanceof zS}}function rO(n,e){if(aO(n=fn(n)))return lO("Unsupported field value:",e,n),oO(n,e);if(n instanceof FS)return(function(i,r){if(!sO(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const a=[];let l=0;for(const h of i){let f=rO(h,r.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=fn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $8(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=nt.fromDate(i);return{timestampValue:Ju(r.serializer,a)}}if(i instanceof nt){const a=new nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ju(r.serializer,a)}}if(i instanceof Os)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ii)return{bytesValue:aM(r.serializer,i._byteString)};if(i instanceof wn){const a=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw r.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:vS(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Vs)return(function(l,h){return{mapValue:{fields:{[uS]:{stringValue:cS},[Gu]:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw h.Sc("VectorValues must only contain numeric values.");return mS(h.serializer,d)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${tS(i)}`)})(n,e)}function oO(n,e){const t={};return IP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):al(n,((i,r)=>{const a=rO(r,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function aO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof nt||n instanceof Os||n instanceof Ii||n instanceof wn||n instanceof FS||n instanceof Vs)}function lO(n,e,t){if(!aO(t)||!fP(t)){const i=tS(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function cH(n,e,t){if((e=fn(e))instanceof US)return e._internalPath;if(typeof e=="string")return uO(n,e);throw Sg("Field path arguments must be of type string or ",n,!1,void 0,t)}const hH=new RegExp("[~\\*/\\[\\]]");function uO(n,e,t){if(e.search(hH)>=0)throw Sg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new US(...e.split("."))._internalPath}catch{throw Sg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sg(n,e,t,i,r){const a=i&&!i.isEmpty(),l=r!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${i}`),l&&(f+=` in document ${r}`),f+=")"),new de(oe.INVALID_ARGUMENT,h+n+f)}function fH(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dH(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hO("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class dH extends cO{data(){return super.data()}}function hO(n,e){return typeof e=="string"?uO(n,e):e instanceof US?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mH(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pH{convertValue(e,t="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ye(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return al(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){const t=e.fields?.[Gu].arrayValue?.values?.map((i=>St(i.doubleValue)));return new Vs(t)}convertGeoPoint(e){return new Os(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=oy(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(xf(e));default:return null}}convertTimestamp(e){const t=Er(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=tt.fromString(e);ve(yM(i),9688,{name:e});const r=new Xa(i.get(1),i.get(3)),a=new fe(i.popFirst(5));return r.isEqual(t)||On(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gH(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class Zm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Iu extends cO{constructor(e,t,i,r,a,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(hO("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Iu._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Iu._jsonSchemaVersion="firestore/documentSnapshot/1.0",Iu._jsonSchema={type:Xt("string",Iu._jsonSchemaVersion),bundleSource:Xt("string","DocumentSnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class wp extends Iu{data(e={}){return super.data(e)}}class Ru{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Zm(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new wp(this._firestore,this._userDataWriter,i.key,i,new Zm(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((h=>{const f=new wp(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Zm(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new wp(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Zm(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,g=-1;return h.type!==0&&(d=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),g=l.indexOf(h.doc.key)),{type:yH(h.type),doc:f,oldIndex:d,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ru._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=eS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yH(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ye(61501,{type:n})}}Ru._jsonSchemaVersion="firestore/querySnapshot/1.0",Ru._jsonSchema={type:Xt("string",Ru._jsonSchemaVersion),bundleSource:Xt("string","QuerySnapshot"),bundleName:Xt("string"),bundle:Xt("string")};class _H extends pH{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ii(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}}function fO(n){n=sg(n,vy);const e=sg(n.firestore,Ty),t=iO(e),i=new _H(e);return mH(n._query),eH(t,n._query).then((r=>new Ru(e,i,n,r)))}function dO(n){return pO(sg(n.firestore,Ty),[new fy(n._key,$n.none())])}function mO(n,e){const t=sg(n.firestore,Ty),i=LS(n),r=gH(n.converter,e);return pO(t,[uH(lH(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,$n.exists(!1))]).then((()=>i))}function pO(n,e){return(function(i,r){const a=new dr;return i.asyncQueue.enqueueAndForget((async()=>Bq(await Jq(i),r,a))),a.promise})(iO(n),e)}class vH{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=SH(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function TH(n){return new vH(n)}class EH{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Tg.provider,this._offlineComponentProvider={build:t=>new Yq(t,e?.cacheSizeBytes,this.forceOwnership)}}}function SH(n){return new EH(n?.forceOwnership)}function wH(){return new zS("serverTimestamp")}(function(e,t=!0){(function(r){cc=r})(il),Ha(new Ro("firestore",((i,{instanceIdentifier:r,options:a})=>{const l=i.getProvider("app").getImmediate(),h=new Ty(new Uj(i.getProvider("auth-internal")),new zj(l,i.getProvider("app-check-internal")),(function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new de(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xa(d.options.projectId,g)})(l,r),l);return a={useFetchStreams:t,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),Ns(VI,kI,e),Ns(VI,kI,"esm2020")})();const bH={apiKey:"AIzaSyDohDZ_1IPsjgOhyzw_2dRMWAkObxE4WV4",authDomain:"project-test-d89c4.firebaseapp.com",databaseURL:"https://project-test-d89c4-default-rtdb.europe-west1.firebasedatabase.app",projectId:"project-test-d89c4",storageBucket:"project-test-d89c4.firebasestorage.app",messagingSenderId:"829539787895",appId:"1:829539787895:web:7ab849b09811e70c265272",measurementId:"G-TJHM6BSH1H"},jS=fD(bH),AH=Oj(jS),e2=NB(jS);Sz(AH,YN).then(()=>{console.log("Auth persistence set to 'localStorage'")}).catch(n=>{console.error("Failed to set persistence:",n)});const xu=iH(jS,{localCache:TH({cacheSizeBytes:nH})});console.log("Firebase initialized successfully");console.log("Offline persistence enabled (via localCache)");const CH={products:[],status:"idle",error:null},CT=n=>{if(n==null)return n;if(n instanceof nt)return n.toDate().toISOString();if(Array.isArray(n))return n.map(e=>CT(e));if(typeof n=="object"){const e={};for(const t in n)n.hasOwnProperty(t)&&(e[t]=CT(n[t]));return e}return n},qS=Yx({name:"products",initialState:CH,reducers:n=>({fetchProductsTC:n.asyncThunk(async(e,t)=>{try{return(await fO(Eg(xu,"products"))).docs.map(a=>{const l=a.data(),h=CT(l);return{id:a.id,...h}})}catch(i){return t.rejectWithValue(i.message??"Failed to fetch products")}},{fulfilled:(e,t)=>{e.products=t.payload,e.status="succeeded"},pending:e=>{e.status="loading",e.error=null},rejected:(e,t)=>{e.status="failed",e.error=t.payload}}),deleteProductTC:n.asyncThunk(async(e,t)=>{try{return await dO(LS(xu,"products",e)),e}catch(i){return t.rejectWithValue(i.message??"Failed to delete product")}},{fulfilled:(e,t)=>{e.products=e.products.filter(i=>i.id!==t.payload)}}),addProductTC:n.asyncThunk(async(e,t)=>{try{const i={...e,guarantee:{start:e.guarantee.start,end:e.guarantee.end},date:wH()};return{id:(await mO(Eg(xu,"products"),i)).id,...e,date:new Date().toISOString()}}catch(i){return t.rejectWithValue(i.message??"Failed to add product")}},{fulfilled:(e,t)=>{e.products.push(t.payload)}})}),selectors:{selectProducts:n=>n.products,selectStatus:n=>n.status,selectError:n=>n.error}}),{selectProducts:IH,selectStatus:RH,selectError:xH}=qS.selectors,{fetchProductsTC:DH,deleteProductTC:NH,addProductTC:PH}=qS.actions,MH=qS.reducer;var a0={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var t2;function OH(){return t2||(t2=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var a="",l=0;l<arguments.length;l++){var h=arguments[l];h&&(a=r(a,i(h)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return t.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var h in a)e.call(a,h)&&a[h]&&(l=r(l,h));return l}function r(a,l){return l?a?a+" "+l:a+l:a}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(a0)),a0.exports}var VH=OH();const Ln=Ng(VH),kH=["xxl","xl","lg","md","sm","xs"],LH="xs",Ey=M.createContext({prefixes:{},breakpoints:kH,minBreakpoint:LH}),{Consumer:LQ,Provider:UQ}=Ey;function hi(n,e){const{prefixes:t}=M.useContext(Ey);return n||t[e]||e}function gO(){const{breakpoints:n}=M.useContext(Ey);return n}function yO(){const{minBreakpoint:n}=M.useContext(Ey);return n}var l0={exports:{}},u0,n2;function UH(){if(n2)return u0;n2=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return u0=n,u0}var c0,i2;function FH(){if(i2)return c0;i2=1;var n=UH();function e(){}function t(){}return t.resetWarningCache=e,c0=function(){function i(l,h,f,d,g,_){if(_!==n){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},c0}var s2;function BH(){return s2||(s2=1,l0.exports=FH()()),l0.exports}var zH=BH();const Du=Ng(zH);function jH(n,e){return M.Children.toArray(n).some(t=>M.isValidElement(t)&&t.type===e)}function qH({as:n,bsPrefix:e,className:t,...i}){e=hi(e,"col");const r=gO(),a=yO(),l=[],h=[];return r.forEach(f=>{const d=i[f];delete i[f];let g,_,T;typeof d=="object"&&d!=null?{span:g,offset:_,order:T}=d:g=d;const w=f!==a?`-${f}`:"";g&&l.push(g===!0?`${e}${w}`:`${e}${w}-${g}`),T!=null&&h.push(`order${w}-${T}`),_!=null&&h.push(`offset${w}-${_}`)}),[{...i,className:Ln(t,...l,...h)},{as:n,bsPrefix:e,spans:l}]}const wg=M.forwardRef((n,e)=>{const[{className:t,...i},{as:r="div",bsPrefix:a,spans:l}]=qH(n);return W.jsx(r,{...i,ref:e,className:Ln(t,!l.length&&a)})});wg.displayName="Col";const HH={type:Du.string,tooltip:Du.bool,as:Du.elementType},Sy=M.forwardRef(({as:n="div",className:e,type:t="valid",tooltip:i=!1,...r},a)=>W.jsx(n,{...r,ref:a,className:Ln(e,`${t}-${i?"tooltip":"feedback"}`)}));Sy.displayName="Feedback";Sy.propTypes=HH;const wr=M.createContext({}),HS=M.forwardRef(({id:n,bsPrefix:e,className:t,type:i="checkbox",isValid:r=!1,isInvalid:a=!1,as:l="input",...h},f)=>{const{controlId:d}=M.useContext(wr);return e=hi(e,"form-check-input"),W.jsx(l,{...h,ref:f,type:i,id:n||d,className:Ln(t,e,r&&"is-valid",a&&"is-invalid")})});HS.displayName="FormCheckInput";const bg=M.forwardRef(({bsPrefix:n,className:e,htmlFor:t,...i},r)=>{const{controlId:a}=M.useContext(wr);return n=hi(n,"form-check-label"),W.jsx("label",{...i,ref:r,htmlFor:t||a,className:Ln(e,n)})});bg.displayName="FormCheckLabel";const _O=M.forwardRef(({id:n,bsPrefix:e,bsSwitchPrefix:t,inline:i=!1,reverse:r=!1,disabled:a=!1,isValid:l=!1,isInvalid:h=!1,feedbackTooltip:f=!1,feedback:d,feedbackType:g,className:_,style:T,title:w="",type:R="checkbox",label:N,children:D,as:F="input",...z},k)=>{e=hi(e,"form-check"),t=hi(t,"form-switch");const{controlId:ee}=M.useContext(wr),X=M.useMemo(()=>({controlId:n||ee}),[ee,n]),re=!D&&N!=null&&N!==!1||jH(D,bg),I=W.jsx(HS,{...z,type:R==="switch"?"checkbox":R,ref:k,isValid:l,isInvalid:h,disabled:a,as:F});return W.jsx(wr.Provider,{value:X,children:W.jsx("div",{style:T,className:Ln(_,re&&e,i&&`${e}-inline`,r&&`${e}-reverse`,R==="switch"&&t),children:D||W.jsxs(W.Fragment,{children:[I,re&&W.jsx(bg,{title:w,children:N}),d&&W.jsx(Sy,{type:g,tooltip:f,children:d})]})})})});_O.displayName="FormCheck";const Ag=Object.assign(_O,{Input:HS,Label:bg}),vO=M.forwardRef(({bsPrefix:n,type:e,size:t,htmlSize:i,id:r,className:a,isValid:l=!1,isInvalid:h=!1,plaintext:f,readOnly:d,as:g="input",..._},T)=>{const{controlId:w}=M.useContext(wr);return n=hi(n,"form-control"),W.jsx(g,{..._,type:e,size:i,ref:T,readOnly:d,id:r||w,className:Ln(a,f?`${n}-plaintext`:n,t&&`${n}-${t}`,e==="color"&&`${n}-color`,l&&"is-valid",h&&"is-invalid")})});vO.displayName="FormControl";const GH=Object.assign(vO,{Feedback:Sy}),TO=M.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},r)=>(e=hi(e,"form-floating"),W.jsx(t,{ref:r,className:Ln(n,e),...i})));TO.displayName="FormFloating";const GS=M.forwardRef(({controlId:n,as:e="div",...t},i)=>{const r=M.useMemo(()=>({controlId:n}),[n]);return W.jsx(wr.Provider,{value:r,children:W.jsx(e,{...t,ref:i})})});GS.displayName="FormGroup";const EO=M.forwardRef(({as:n="label",bsPrefix:e,column:t=!1,visuallyHidden:i=!1,className:r,htmlFor:a,...l},h)=>{const{controlId:f}=M.useContext(wr);e=hi(e,"form-label");let d="col-form-label";typeof t=="string"&&(d=`${d} ${d}-${t}`);const g=Ln(r,e,i&&"visually-hidden",t&&d);return a=a||f,t?W.jsx(wg,{ref:h,as:"label",className:g,htmlFor:a,...l}):W.jsx(n,{ref:h,className:g,htmlFor:a,...l})});EO.displayName="FormLabel";const SO=M.forwardRef(({bsPrefix:n,className:e,id:t,...i},r)=>{const{controlId:a}=M.useContext(wr);return n=hi(n,"form-range"),W.jsx("input",{...i,type:"range",ref:r,className:Ln(e,n),id:t||a})});SO.displayName="FormRange";const wO=M.forwardRef(({bsPrefix:n,size:e,htmlSize:t,className:i,isValid:r=!1,isInvalid:a=!1,id:l,...h},f)=>{const{controlId:d}=M.useContext(wr);return n=hi(n,"form-select"),W.jsx("select",{...h,size:t,ref:f,className:Ln(i,n,e&&`${n}-${e}`,r&&"is-valid",a&&"is-invalid"),id:l||d})});wO.displayName="FormSelect";const bO=M.forwardRef(({bsPrefix:n,className:e,as:t="small",muted:i,...r},a)=>(n=hi(n,"form-text"),W.jsx(t,{...r,ref:a,className:Ln(e,n,i&&"text-muted")})));bO.displayName="FormText";const AO=M.forwardRef((n,e)=>W.jsx(Ag,{...n,ref:e,type:"switch"}));AO.displayName="Switch";const KH=Object.assign(AO,{Input:Ag.Input,Label:Ag.Label}),CO=M.forwardRef(({bsPrefix:n,className:e,children:t,controlId:i,label:r,...a},l)=>(n=hi(n,"form-floating"),W.jsxs(GS,{ref:l,className:Ln(e,n),controlId:i,...a,children:[t,W.jsx("label",{htmlFor:i,children:r})]})));CO.displayName="FloatingLabel";const $H={_ref:Du.any,validated:Du.bool,as:Du.elementType},KS=M.forwardRef(({className:n,validated:e,as:t="form",...i},r)=>W.jsx(t,{...i,ref:r,className:Ln(n,e&&"was-validated")}));KS.displayName="Form";KS.propTypes=$H;const ou=Object.assign(KS,{Group:GS,Control:GH,Floating:TO,Check:Ag,Switch:KH,Label:EO,Text:bO,Range:SO,Select:wO,FloatingLabel:CO}),IO=M.forwardRef(({bsPrefix:n,className:e,as:t="div",...i},r)=>{const a=hi(n,"row"),l=gO(),h=yO(),f=`${a}-cols`,d=[];return l.forEach(g=>{const _=i[g];delete i[g];let T;_!=null&&typeof _=="object"?{cols:T}=_:T=_;const w=g!==h?`-${g}`:"";T!=null&&d.push(`${f}${w}-${T}`)}),W.jsx(t,{ref:r,...i,className:Ln(e,a,...d)})});IO.displayName="Row";const YH="_formLabel_2ak2w_3",WH="_productsContainer_2ak2w_15",QH="_productCard_2ak2w_37",XH="_statusIndicator_2ak2w_73",JH="_statusDot_2ak2w_81",ZH="_available_2ak2w_147",eG="_notAvailable_2ak2w_155",tG="_productImage_2ak2w_171",nG="_productInfo_2ak2w_187",iG="_productTitle_2ak2w_197",sG="_productSerial_2ak2w_211",rG="_productStatus_2ak2w_221",oG="_statusText_2ak2w_231",aG="_dateRange_2ak2w_263",lG="_condition_2ak2w_281",uG="_price_2ak2w_303",cG="_priceUsd_2ak2w_315",hG="_priceUah_2ak2w_327",fG="_groupName_2ak2w_337",dG="_name_2ak2w_351",mG="_probel_2ak2w_365",pG="_arrivalDate_2ak2w_415",gG="_deleteBtn_2ak2w_431",et={formLabel:YH,productsContainer:WH,productCard:QH,statusIndicator:XH,statusDot:JH,available:ZH,notAvailable:eG,productImage:tG,productInfo:nG,productTitle:iG,productSerial:sG,productStatus:rG,statusText:oG,dateRange:aG,condition:lG,new:"_new_2ak2w_291",price:uG,priceUsd:cG,priceUah:hG,groupName:fG,name:dG,probel:mG,arrivalDate:pG,deleteBtn:gG},yG=({filteredProducts:n})=>{const e=Vx(),t=i=>{e(NH(i))};return W.jsx(W.Fragment,{children:W.jsx("div",{className:et.productsContainer,children:n.map(i=>W.jsxs("div",{className:et.productCard,children:[W.jsx("div",{className:et.statusIndicator,children:i.status?W.jsx("div",{className:`${et.statusDot} ${et.available}`}):W.jsx("div",{className:`${et.statusDot} ${et.notAvailable}`})}),W.jsx("div",{className:et.productImage,children:W.jsx("img",{src:i.photo,alt:i.title,width:40,height:40})}),W.jsxs("div",{className:et.productInfo,children:[W.jsx("div",{className:et.productTitle,children:i.title}),W.jsx("div",{className:et.productSerial,children:i.serialNumber})]}),W.jsx("div",{className:et.productStatus,children:i.status?W.jsx("span",{className:`${et.statusText} ${et.available}`,children:""}):W.jsx("span",{className:`${et.statusText} ${et.notAvailable}`,children:" "})}),W.jsxs("div",{className:et.dateRange,children:[W.jsxs("div",{children:["c: ",i.guarantee.start]}),W.jsxs("div",{children:[": ",i.guarantee.end]})]}),W.jsx("div",{className:et.condition,children:W.jsx("span",{className:et.new,children:i.isNew===1?"":"/"})}),W.jsxs("div",{className:et.price,children:[W.jsx("div",{className:et.priceUsd,children:"2 500 $"}),W.jsx("div",{className:et.priceUah,children:"250 000. 50 UAH"})]}),W.jsx("div",{className:et.groupName,children:"    "}),i.name?W.jsx("div",{className:et.name,children:i.name}):W.jsx("div",{className:et.probel,children:"-"}),W.jsx("div",{className:et.groupName,children:"    "}),W.jsxs("div",{className:et.arrivalDate,children:[W.jsx("span",{children:new Date(i.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),W.jsx("span",{children:new Date(i.date).toLocaleDateString("ru-RU",{day:"2-digit",month:"short",year:"numeric"})}),W.jsx("button",{className:et.deleteBtn,onClick:()=>t(i.id),children:""})]})]},i.id))})})},_G=()=>{const n=Vx(),e=Vv(IH),t=Vv(RH),i=Vv(xH),[r,a]=M.useState("");M.useEffect(()=>{n(DH())},[n]);const l=r?e.filter(g=>g.type===r):e,h=g=>{a(g.currentTarget.value)};if(t==="loading")return W.jsx("div",{children:"Loading products..."});if(t==="failed")return W.jsxs("div",{children:["Error: ",i]});const f={serialNumber:123459,isNew:1,photo:"https://baproar.vtexassets.com/arquivos/ids/2069005/image-928323e59f2040b0b9d00210d52a6b6b.jpg?v=638932927540630000",title:"Barcelona",type:"Table",specification:"Specs here",guarantee:{start:"2025-01-01",end:"2026-01-01"},price:[{value:100,symbol:"USD",isDefault:1}],order:4,date:new Date().toISOString(),name:"       ",status:!0},d=()=>{n(PH(f))};return W.jsxs("div",{className:"container-fluid py-4",style:{background:"#f8f9fa"},children:[W.jsxs("div",{className:"d-flex",style:{alignItems:"flex-end",gap:"10px"},children:[W.jsxs("h1",{className:"mb-4",children:[" / ",l.length]}),W.jsx("div",{className:"mb-4 d-flex",children:W.jsxs(IO,{className:"g-3 flex-nowrap",children:[W.jsx(wg,{xs:6,md:12,children:W.jsxs(ou.Group,{className:"d-flex align-items-center gap-2",children:[W.jsx(ou.Label,{className:et.formLabel,children:":"}),W.jsxs(ou.Select,{onChange:h,children:[W.jsx("option",{value:"",children:"All"}),W.jsx("option",{value:"Monitors",children:"Monitors"}),W.jsx("option",{value:"Some Think",children:"Some Think"})]})]})}),W.jsx(wg,{xs:6,md:12,children:W.jsxs(ou.Group,{className:"d-flex align-items-center gap-2",children:[W.jsx(ou.Label,{className:et.formLabel,children:":"}),W.jsx(ou.Select,{children:W.jsx("option",{})})]})})]})})]}),W.jsx(yG,{filteredProducts:l}),W.jsx("button",{onClick:d,className:"btn btn-primary mt-3",children:"add"})]})},vG=()=>W.jsx("div",{children:"Users"}),TG=()=>W.jsx("div",{children:"Settings"}),EG=()=>W.jsx("div",{children:W.jsx("h3",{children:"Error404"})}),SG="_header_19c6z_1",wG="_header__container_19c6z_19",bG="_logo_19c6z_35",AG="_left_container_19c6z_47",CG="_left_19c6z_47",IG="_center_19c6z_79",RG="_search__input_19c6z_89",xG="_right_19c6z_123",DG="_data_container_allDate_19c6z_141",NG="_clockIcon_19c6z_153",Ki={header:SG,header__container:wG,logo:bG,left_container:AG,left:CG,center:IG,search__input:RG,right:xG,data_container_allDate:DG,clockIcon:NG},PG="/testObject/assets/logo-CDE6t0y_.png",MG="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%2020010904//EN'%20'http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd'%3e%3csvg%20version='1.0'%20xmlns='http://www.w3.org/2000/svg'%20width='512.000000pt'%20height='512.000000pt'%20viewBox='0%200%20512.000000%20512.000000'%20preserveAspectRatio='xMidYMid%20meet'%3e%3cmetadata%3e%20Created%20by%20potrace%201.16,%20written%20by%20Peter%20Selinger%202001-2019%20%3c/metadata%3e%3cg%20transform='translate(0.000000,512.000000)%20scale(0.100000,-0.100000)'%20fill='%2345897d'%20stroke='none'%3e%3cpath%20d='M2240%205105%20c-444%20-55%20-852%20-220%20-1220%20-493%20-150%20-112%20-400%20-362%20-512%20-512%20-276%20-372%20-439%20-779%20-494%20-1230%20-17%20-148%20-17%20-472%200%20-620%2055%20-451%20218%20-858%20494%20-1230%20112%20-150%20362%20-400%20512%20-512%20372%20-276%20779%20-439%201230%20-494%20148%20-17%20472%20-17%20620%200%20451%2055%20858%20218%201230%20494%20150%20112%20400%20362%20512%20512%20276%20372%20439%20779%20494%201230%2017%20148%2017%20472%200%20620%20-55%20451%20-218%20858%20-494%201230%20-112%20150%20-362%20400%20-512%20512%20-372%20276%20-779%20439%20-1230%20494%20-143%2017%20-488%2016%20-630%20-1z%20m610%20-159%20c792%20-99%201487%20-585%201848%20-1292%20182%20-358%20262%20-692%20262%20-1094%200%20-402%20-80%20-736%20-262%20-1094%20-328%20-643%20-946%20-1114%20-1657%20-1262%20-286%20-59%20-676%20-59%20-962%200%20-710%20148%20-1329%20619%20-1656%201261%20-183%20359%20-263%20692%20-263%201095%200%20318%2052%20598%20161%20872%20331%20832%201078%201408%201964%201517%20116%2014%20441%2012%20565%20-3z'/%3e%3cpath%20d='M2240%204801%20c-418%20-63%20-812%20-236%20-1117%20-491%20-68%20-56%20-73%20-63%20-73%20-100%200%20-50%2027%20-80%2073%20-80%2026%200%2052%2015%20118%2067%20249%20197%20537%20338%20836%20409%20324%2077%20699%2073%201017%20-11%20720%20-189%201312%20-781%201501%20-1501%2087%20-332%2087%20-736%200%20-1068%20-189%20-720%20-781%20-1312%20-1501%20-1501%20-332%20-87%20-736%20-87%20-1068%200%20-720%20189%20-1312%20781%20-1501%201501%20-84%20318%20-88%20693%20-11%201017%2071%20299%20212%20587%20409%20836%2052%2066%2067%2092%2067%20118%200%2046%20-30%2073%20-80%2073%20-37%200%20-44%20-5%20-100%20-72%20-261%20-313%20-436%20-719%20-494%20-1146%20-21%20-146%20-21%20-435%20-1%20-589%20132%20-1013%20935%20-1816%201948%20-1948%20153%20-20%20441%20-20%20594%200%201013%20132%201816%20935%201948%201948%2020%20153%2020%20441%200%20594%20-132%201013%20-935%201816%20-1948%201948%20-161%2021%20-466%2019%20-617%20-4z'/%3e%3cpath%20d='M2501%204494%20c-12%20-15%20-21%20-37%20-21%20-49%200%20-12%209%20-34%2021%20-49%2016%20-20%2029%20-26%2059%20-26%2030%200%2043%206%2059%2026%2012%2015%2021%2037%2021%2049%200%2012%20-9%2034%20-21%2049%20-16%2020%20-29%2026%20-59%2026%20-30%200%20-43%20-6%20-59%20-26z'/%3e%3cpath%20d='M1562%204247%20c-59%20-63%202%20-154%2084%20-127%2058%2019%2068%20111%2015%20139%20-33%2018%20-76%2013%20-99%20-12z'/%3e%3cpath%20d='M3457%204259%20c-51%20-30%20-40%20-120%2017%20-139%2060%20-20%20106%2014%20106%2078%200%2055%20-72%2091%20-123%2061z'/%3e%3cpath%20d='M1712%203987%20c-13%20-13%20-22%20-36%20-22%20-53%200%20-21%20102%20-207%20345%20-627%20l344%20-597%20-24%20-52%20c-45%20-96%20-28%20-185%2047%20-260%2026%20-27%2054%20-48%2063%20-48%2013%200%2015%20-89%2015%20-849%200%20-843%200%20-848%2021%20-875%2029%20-37%2089%20-37%20118%200%2021%2027%2021%2032%2021%20875%200%20760%202%20849%2015%20849%209%200%2037%2021%2063%2048%2073%2072%2091%20164%2051%20252%20-38%2083%20-102%20128%20-197%20139%20l-54%206%20-343%20595%20c-189%20327%20-351%20600%20-361%20607%20-29%2021%20-78%2016%20-102%20-10z'/%3e%3cpath%20d='M872%203557%20c-59%20-63%202%20-154%2084%20-127%2058%2019%2068%20111%2015%20139%20-33%2018%20-76%2013%20-99%20-12z'/%3e%3cpath%20d='M4147%203569%20c-51%20-30%20-40%20-120%2017%20-139%2060%20-20%20106%2014%20106%2078%200%2055%20-72%2091%20-123%2061z'/%3e%3cpath%20d='M626%202619%20c-37%20-29%20-37%20-89%200%20-118%2015%20-12%2037%20-21%2049%20-21%2012%200%2034%209%2049%2021%2020%2016%2026%2029%2026%2059%200%2030%20-6%2043%20-26%2059%20-15%2012%20-37%2021%20-49%2021%20-12%200%20-34%20-9%20-49%20-21z'/%3e%3cpath%20d='M4396%202619%20c-37%20-29%20-37%20-89%200%20-118%2015%20-12%2037%20-21%2049%20-21%2012%200%2034%209%2049%2021%2037%2029%2037%2089%200%20118%20-15%2012%20-37%2021%20-49%2021%20-12%200%20-34%20-9%20-49%20-21z'/%3e%3cpath%20d='M893%201690%20c-47%20-19%20-58%20-92%20-20%20-128%2025%20-24%2066%20-28%2098%20-11%2052%2027%2043%20119%20-13%20138%20-36%2013%20-36%2013%20-65%201z'/%3e%3cpath%20d='M4158%201689%20c-52%20-20%20-58%20-112%20-9%20-138%2055%20-30%20121%206%20121%2066%200%2058%20-55%2093%20-112%2072z'/%3e%3cpath%20d='M1583%201000%20c-47%20-19%20-58%20-92%20-20%20-128%2025%20-24%2066%20-28%2098%20-11%2052%2027%2043%20119%20-13%20138%20-36%2013%20-36%2013%20-65%201z'/%3e%3cpath%20d='M3468%20999%20c-52%20-20%20-58%20-112%20-9%20-138%2055%20-30%20121%206%20121%2066%200%2058%20-55%2093%20-112%2072z'/%3e%3c/g%3e%3c/svg%3e",OG=()=>{const[n,e]=M.useState(0),t=M.useRef(n);return M.useEffect(()=>{const i=Math.random().toString(36).substring(2),r=pI(e2,`activeSessions/${i}`);gI(r,{connectedAt:VB()}),EB(r).remove();const a=pI(e2,"activeSessions"),l=wB(a,h=>{const f=h.val(),d=f?Object.keys(f).length:0;d!==t.current&&(t.current=d,e(d))});return()=>{l(),gI(r,null).catch(console.error)}},[]),n},$S=M.createContext({});function YS(n){const e=M.useRef(null);return e.current===null&&(e.current=n()),e.current}const WS=typeof window<"u",RO=WS?M.useLayoutEffect:M.useEffect,wy=M.createContext(null);function QS(n,e){n.indexOf(e)===-1&&n.push(e)}function XS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const br=(n,e,t)=>t>e?e:t<n?n:t;let JS=()=>{};const Ar={},xO=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function DO(n){return typeof n=="object"&&n!==null}const NO=n=>/^0[^.\s]+$/u.test(n);function ZS(n){let e;return()=>(e===void 0&&(e=n()),e)}const Mi=n=>n,VG=(n,e)=>t=>e(n(t)),od=(...n)=>n.reduce(VG),Of=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class ew{constructor(){this.subscriptions=[]}add(e){return QS(this.subscriptions,e),()=>XS(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let a=0;a<r;a++){const l=this.subscriptions[a];l&&l(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ks=n=>n*1e3,Ni=n=>n/1e3;function PO(n,e){return e?n*(1e3/e):0}const MO=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,kG=1e-7,LG=12;function UG(n,e,t,i,r){let a,l,h=0;do l=e+(t-e)/2,a=MO(l,i,r)-n,a>0?t=l:e=l;while(Math.abs(a)>kG&&++h<LG);return l}function ad(n,e,t,i){if(n===e&&t===i)return Mi;const r=a=>UG(a,0,1,n,t);return a=>a===0||a===1?a:MO(r(a),e,i)}const OO=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,VO=n=>e=>1-n(1-e),kO=ad(.33,1.53,.69,.99),tw=VO(kO),LO=OO(tw),UO=n=>(n*=2)<1?.5*tw(n):.5*(2-Math.pow(2,-10*(n-1))),nw=n=>1-Math.sin(Math.acos(n)),FO=VO(nw),BO=OO(nw),FG=ad(.42,0,1,1),BG=ad(0,0,.58,1),zO=ad(.42,0,.58,1),zG=n=>Array.isArray(n)&&typeof n[0]!="number",jO=n=>Array.isArray(n)&&typeof n[0]=="number",jG={linear:Mi,easeIn:FG,easeInOut:zO,easeOut:BG,circIn:nw,circInOut:BO,circOut:FO,backIn:tw,backInOut:LO,backOut:kO,anticipate:UO},qG=n=>typeof n=="string",r2=n=>{if(jO(n)){JS(n.length===4);const[e,t,i,r]=n;return ad(e,t,i,r)}else if(qG(n))return jG[n];return n},ep=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function HG(n,e){let t=new Set,i=new Set,r=!1,a=!1;const l=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function f(g){l.has(g)&&(d.schedule(g),n()),g(h)}const d={schedule:(g,_=!1,T=!1)=>{const R=T&&r?t:i;return _&&l.add(g),R.has(g)||R.add(g),g},cancel:g=>{i.delete(g),l.delete(g)},process:g=>{if(h=g,r){a=!0;return}r=!0,[t,i]=[i,t],t.forEach(f),t.clear(),r=!1,a&&(a=!1,d.process(g))}};return d}const GG=40;function qO(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=ep.reduce((k,ee)=>(k[ee]=HG(a),k),{}),{setup:h,read:f,resolveKeyframes:d,preUpdate:g,update:_,preRender:T,render:w,postRender:R}=l,N=()=>{const k=Ar.useManualTiming?r.timestamp:performance.now();t=!1,Ar.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(k-r.timestamp,GG),1)),r.timestamp=k,r.isProcessing=!0,h.process(r),f.process(r),d.process(r),g.process(r),_.process(r),T.process(r),w.process(r),R.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(N))},D=()=>{t=!0,i=!0,r.isProcessing||n(N)};return{schedule:ep.reduce((k,ee)=>{const X=l[ee];return k[ee]=(re,I=!1,A=!1)=>(t||D(),X.schedule(re,I,A)),k},{}),cancel:k=>{for(let ee=0;ee<ep.length;ee++)l[ep[ee]].cancel(k)},state:r,steps:l}}const{schedule:wt,cancel:Vo,state:Tn,steps:h0}=qO(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mi,!0);let bp;function KG(){bp=void 0}const Yn={now:()=>(bp===void 0&&Yn.set(Tn.isProcessing||Ar.useManualTiming?Tn.timestamp:performance.now()),bp),set:n=>{bp=n,queueMicrotask(KG)}},HO=n=>e=>typeof e=="string"&&e.startsWith(n),iw=HO("--"),$G=HO("var(--"),sw=n=>$G(n)?YG.test(n.split("/*")[0].trim()):!1,YG=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,dc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Vf={...dc,transform:n=>br(0,1,n)},tp={...dc,default:1},sf=n=>Math.round(n*1e5)/1e5,rw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function WG(n){return n==null}const QG=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ow=(n,e)=>t=>!!(typeof t=="string"&&QG.test(t)&&t.startsWith(n)||e&&!WG(t)&&Object.prototype.hasOwnProperty.call(t,e)),GO=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,a,l,h]=i.match(rw);return{[n]:parseFloat(r),[e]:parseFloat(a),[t]:parseFloat(l),alpha:h!==void 0?parseFloat(h):1}},XG=n=>br(0,255,n),f0={...dc,transform:n=>Math.round(XG(n))},Oa={test:ow("rgb","red"),parse:GO("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+f0.transform(n)+", "+f0.transform(e)+", "+f0.transform(t)+", "+sf(Vf.transform(i))+")"};function JG(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const IT={test:ow("#"),parse:JG,transform:Oa.transform},ld=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),fo=ld("deg"),Ls=ld("%"),we=ld("px"),ZG=ld("vh"),eK=ld("vw"),o2={...Ls,parse:n=>Ls.parse(n)/100,transform:n=>Ls.transform(n*100)},pu={test:ow("hsl","hue"),parse:GO("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Ls.transform(sf(e))+", "+Ls.transform(sf(t))+", "+sf(Vf.transform(i))+")"},Wt={test:n=>Oa.test(n)||IT.test(n)||pu.test(n),parse:n=>Oa.test(n)?Oa.parse(n):pu.test(n)?pu.parse(n):IT.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Oa.transform(n):pu.transform(n),getAnimatableNone:n=>{const e=Wt.parse(n);return e.alpha=0,Wt.transform(e)}},tK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function nK(n){return isNaN(n)&&typeof n=="string"&&(n.match(rw)?.length||0)+(n.match(tK)?.length||0)>0}const KO="number",$O="color",iK="var",sK="var(",a2="${}",rK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function kf(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let a=0;const h=e.replace(rK,f=>(Wt.test(f)?(i.color.push(a),r.push($O),t.push(Wt.parse(f))):f.startsWith(sK)?(i.var.push(a),r.push(iK),t.push(f)):(i.number.push(a),r.push(KO),t.push(parseFloat(f))),++a,a2)).split(a2);return{values:t,split:h,indexes:i,types:r}}function YO(n){return kf(n).values}function WO(n){const{split:e,types:t}=kf(n),i=e.length;return r=>{let a="";for(let l=0;l<i;l++)if(a+=e[l],r[l]!==void 0){const h=t[l];h===KO?a+=sf(r[l]):h===$O?a+=Wt.transform(r[l]):a+=r[l]}return a}}const oK=n=>typeof n=="number"?0:Wt.test(n)?Wt.getAnimatableNone(n):n;function aK(n){const e=YO(n);return WO(n)(e.map(oK))}const ko={test:nK,parse:YO,createTransformer:WO,getAnimatableNone:aK};function d0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function lK({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,a=0,l=0;if(!e)r=a=l=t;else{const h=t<.5?t*(1+e):t+e-t*e,f=2*t-h;r=d0(f,h,n+1/3),a=d0(f,h,n),l=d0(f,h,n-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:i}}function Cg(n,e){return t=>t>0?e:n}const Ct=(n,e,t)=>n+(e-n)*t,m0=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},uK=[IT,Oa,pu],cK=n=>uK.find(e=>e.test(n));function l2(n){const e=cK(n);if(!e)return!1;let t=e.parse(n);return e===pu&&(t=lK(t)),t}const u2=(n,e)=>{const t=l2(n),i=l2(e);if(!t||!i)return Cg(n,e);const r={...t};return a=>(r.red=m0(t.red,i.red,a),r.green=m0(t.green,i.green,a),r.blue=m0(t.blue,i.blue,a),r.alpha=Ct(t.alpha,i.alpha,a),Oa.transform(r))},RT=new Set(["none","hidden"]);function hK(n,e){return RT.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function fK(n,e){return t=>Ct(n,e,t)}function aw(n){return typeof n=="number"?fK:typeof n=="string"?sw(n)?Cg:Wt.test(n)?u2:pK:Array.isArray(n)?QO:typeof n=="object"?Wt.test(n)?u2:dK:Cg}function QO(n,e){const t=[...n],i=t.length,r=n.map((a,l)=>aw(a)(a,e[l]));return a=>{for(let l=0;l<i;l++)t[l]=r[l](a);return t}}function dK(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=aw(n[r])(n[r],e[r]));return r=>{for(const a in i)t[a]=i[a](r);return t}}function mK(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const a=e.types[r],l=n.indexes[a][i[a]],h=n.values[l]??0;t[r]=h,i[a]++}return t}const pK=(n,e)=>{const t=ko.createTransformer(e),i=kf(n),r=kf(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?RT.has(n)&&!r.values.length||RT.has(e)&&!i.values.length?hK(n,e):od(QO(mK(i,r),r.values),t):Cg(n,e)};function XO(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Ct(n,e,t):aw(n)(n,e)}const gK=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>wt.update(e,t),stop:()=>Vo(e),now:()=>Tn.isProcessing?Tn.timestamp:Yn.now()}},JO=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let a=0;a<r;a++)i+=Math.round(n(a/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Ig=2e4;function lw(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Ig;)e+=t,i=n.next(e);return e>=Ig?1/0:e}function yK(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(lw(i),Ig);return{type:"keyframes",ease:a=>i.next(r*a).value/e,duration:Ni(r)}}const _K=5;function ZO(n,e,t){const i=Math.max(e-_K,0);return PO(t-n(i),e-i)}const Nt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},p0=.001;function vK({duration:n=Nt.duration,bounce:e=Nt.bounce,velocity:t=Nt.velocity,mass:i=Nt.mass}){let r,a,l=1-e;l=br(Nt.minDamping,Nt.maxDamping,l),n=br(Nt.minDuration,Nt.maxDuration,Ni(n)),l<1?(r=d=>{const g=d*l,_=g*n,T=g-t,w=xT(d,l),R=Math.exp(-_);return p0-T/w*R},a=d=>{const _=d*l*n,T=_*t+t,w=Math.pow(l,2)*Math.pow(d,2)*n,R=Math.exp(-_),N=xT(Math.pow(d,2),l);return(-r(d)+p0>0?-1:1)*((T-w)*R)/N}):(r=d=>{const g=Math.exp(-d*n),_=(d-t)*n+1;return-p0+g*_},a=d=>{const g=Math.exp(-d*n),_=(t-d)*(n*n);return g*_});const h=5/n,f=EK(r,a,h);if(n=ks(n),isNaN(f))return{stiffness:Nt.stiffness,damping:Nt.damping,duration:n};{const d=Math.pow(f,2)*i;return{stiffness:d,damping:l*2*Math.sqrt(i*d),duration:n}}}const TK=12;function EK(n,e,t){let i=t;for(let r=1;r<TK;r++)i=i-n(i)/e(i);return i}function xT(n,e){return n*Math.sqrt(1-e*e)}const SK=["duration","bounce"],wK=["stiffness","damping","mass"];function c2(n,e){return e.some(t=>n[t]!==void 0)}function bK(n){let e={velocity:Nt.velocity,stiffness:Nt.stiffness,damping:Nt.damping,mass:Nt.mass,isResolvedFromDuration:!1,...n};if(!c2(n,wK)&&c2(n,SK))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,a=2*br(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:Nt.mass,stiffness:r,damping:a}}else{const t=vK(n);e={...e,...t,mass:Nt.mass},e.isResolvedFromDuration=!0}return e}function Rg(n=Nt.visualDuration,e=Nt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],h={done:!1,value:a},{stiffness:f,damping:d,mass:g,duration:_,velocity:T,isResolvedFromDuration:w}=bK({...t,velocity:-Ni(t.velocity||0)}),R=T||0,N=d/(2*Math.sqrt(f*g)),D=l-a,F=Ni(Math.sqrt(f/g)),z=Math.abs(D)<5;i||(i=z?Nt.restSpeed.granular:Nt.restSpeed.default),r||(r=z?Nt.restDelta.granular:Nt.restDelta.default);let k;if(N<1){const X=xT(F,N);k=re=>{const I=Math.exp(-N*F*re);return l-I*((R+N*F*D)/X*Math.sin(X*re)+D*Math.cos(X*re))}}else if(N===1)k=X=>l-Math.exp(-F*X)*(D+(R+F*D)*X);else{const X=F*Math.sqrt(N*N-1);k=re=>{const I=Math.exp(-N*F*re),A=Math.min(X*re,300);return l-I*((R+N*F*D)*Math.sinh(A)+X*D*Math.cosh(A))/X}}const ee={calculatedDuration:w&&_||null,next:X=>{const re=k(X);if(w)h.done=X>=_;else{let I=X===0?R:0;N<1&&(I=X===0?ks(R):ZO(k,X,re));const A=Math.abs(I)<=i,x=Math.abs(l-re)<=r;h.done=A&&x}return h.value=h.done?l:re,h},toString:()=>{const X=Math.min(lw(ee),Ig),re=JO(I=>ee.next(X*I).value,X,30);return X+"ms "+re},toTransition:()=>{}};return ee}Rg.applyToOptions=n=>{const e=yK(n,100,Rg);return n.ease=e.ease,n.duration=ks(e.duration),n.type="keyframes",n};function DT({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:l,min:h,max:f,restDelta:d=.5,restSpeed:g}){const _=n[0],T={done:!1,value:_},w=A=>h!==void 0&&A<h||f!==void 0&&A>f,R=A=>h===void 0?f:f===void 0||Math.abs(h-A)<Math.abs(f-A)?h:f;let N=t*e;const D=_+N,F=l===void 0?D:l(D);F!==D&&(N=F-_);const z=A=>-N*Math.exp(-A/i),k=A=>F+z(A),ee=A=>{const x=z(A),L=k(A);T.done=Math.abs(x)<=d,T.value=T.done?F:L};let X,re;const I=A=>{w(T.value)&&(X=A,re=Rg({keyframes:[T.value,R(T.value)],velocity:ZO(k,A,T.value),damping:r,stiffness:a,restDelta:d,restSpeed:g}))};return I(0),{calculatedDuration:null,next:A=>{let x=!1;return!re&&X===void 0&&(x=!0,ee(A),I(A)),X!==void 0&&A>=X?re.next(A-X):(!x&&ee(A),T)}}}function AK(n,e,t){const i=[],r=t||Ar.mix||XO,a=n.length-1;for(let l=0;l<a;l++){let h=r(n[l],n[l+1]);if(e){const f=Array.isArray(e)?e[l]||Mi:e;h=od(f,h)}i.push(h)}return i}function CK(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const a=n.length;if(JS(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=AK(e,i,r),f=h.length,d=g=>{if(l&&g<n[0])return e[0];let _=0;if(f>1)for(;_<n.length-2&&!(g<n[_+1]);_++);const T=Of(n[_],n[_+1],g);return h[_](T)};return t?g=>d(br(n[0],n[a-1],g)):d}function IK(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Of(0,e,i);n.push(Ct(t,1,r))}}function RK(n){const e=[0];return IK(e,n.length-1),e}function xK(n,e){return n.map(t=>t*e)}function DK(n,e){return n.map(()=>e||zO).splice(0,n.length-1)}function rf({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=zG(i)?i.map(r2):r2(i),a={done:!1,value:e[0]},l=xK(t&&t.length===e.length?t:RK(e),n),h=CK(l,e,{ease:Array.isArray(r)?r:DK(e,r)});return{calculatedDuration:n,next:f=>(a.value=h(f),a.done=f>=n,a)}}const NK=n=>n!==null;function uw(n,{repeat:e,repeatType:t="loop"},i,r=1){const a=n.filter(NK),h=r<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!h||i===void 0?a[h]:i}const PK={decay:DT,inertia:DT,tween:rf,keyframes:rf,spring:Rg};function eV(n){typeof n.type=="string"&&(n.type=PK[n.type])}class cw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const MK=n=>n/100;class hw extends cw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Yn.now()&&this.tick(Yn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;eV(e);const{type:t=rf,repeat:i=0,repeatDelay:r=0,repeatType:a,velocity:l=0}=e;let{keyframes:h}=e;const f=t||rf;f!==rf&&typeof h[0]!="number"&&(this.mixKeyframes=od(MK,XO(h[0],h[1])),h=[0,100]);const d=f({...e,keyframes:h});a==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...h].reverse(),velocity:-l})),d.calculatedDuration===null&&(d.calculatedDuration=lw(d));const{calculatedDuration:g}=d;this.calculatedDuration=g,this.resolvedDuration=g+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=d}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:h,calculatedDuration:f}=this;if(this.startTime===null)return i.next(0);const{delay:d=0,keyframes:g,repeat:_,repeatType:T,repeatDelay:w,type:R,onUpdate:N,finalKeyframe:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const F=this.currentTime-d*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?F<0:F>r;this.currentTime=Math.max(F,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let k=this.currentTime,ee=i;if(_){const A=Math.min(this.currentTime,r)/h;let x=Math.floor(A),L=A%1;!L&&A>=1&&(L=1),L===1&&x--,x=Math.min(x,_+1),!!(x%2)&&(T==="reverse"?(L=1-L,w&&(L-=w/h)):T==="mirror"&&(ee=l)),k=br(0,1,L)*h}const X=z?{done:!1,value:g[0]}:ee.next(k);a&&(X.value=a(X.value));let{done:re}=X;!z&&f!==null&&(re=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const I=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&re);return I&&R!==DT&&(X.value=uw(g,this.options,D,this.speed)),N&&N(X.value),I&&this.finish(),X}then(e,t){return this.finished.then(e,t)}get duration(){return Ni(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ni(e)}get time(){return Ni(this.currentTime)}set time(e){e=ks(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Yn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Ni(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=gK,startTime:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Yn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function OK(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Va=n=>n*180/Math.PI,NT=n=>{const e=Va(Math.atan2(n[1],n[0]));return PT(e)},VK={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:NT,rotateZ:NT,skewX:n=>Va(Math.atan(n[1])),skewY:n=>Va(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},PT=n=>(n=n%360,n<0&&(n+=360),n),h2=NT,f2=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),d2=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),kK={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:f2,scaleY:d2,scale:n=>(f2(n)+d2(n))/2,rotateX:n=>PT(Va(Math.atan2(n[6],n[5]))),rotateY:n=>PT(Va(Math.atan2(-n[2],n[0]))),rotateZ:h2,rotate:h2,skewX:n=>Va(Math.atan(n[4])),skewY:n=>Va(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function MT(n){return n.includes("scale")?1:0}function OT(n,e){if(!n||n==="none")return MT(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=kK,r=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=VK,r=h}if(!r)return MT(e);const a=i[e],l=r[1].split(",").map(UK);return typeof a=="function"?a(l):l[a]}const LK=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return OT(t,e)};function UK(n){return parseFloat(n.trim())}const mc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pc=new Set(mc),m2=n=>n===dc||n===we,FK=new Set(["x","y","z"]),BK=mc.filter(n=>!FK.has(n));function zK(n){const e=[];return BK.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Ba={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>OT(e,"x"),y:(n,{transform:e})=>OT(e,"y")};Ba.translateX=Ba.x;Ba.translateY=Ba.y;const za=new Set;let VT=!1,kT=!1,LT=!1;function tV(){if(kT){const n=Array.from(za).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=zK(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([a,l])=>{i.getValue(a)?.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}kT=!1,VT=!1,za.forEach(n=>n.complete(LT)),za.clear()}function nV(){za.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(kT=!0)})}function jK(){LT=!0,nV(),tV(),LT=!1}class fw{constructor(e,t,i,r,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(za.add(this),VT||(VT=!0,wt.read(nV),wt.resolveKeyframes(tV))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const a=r?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&t){const h=i.readValue(t,l);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=l),r&&a===void 0&&r.set(e[0])}OK(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),za.delete(this)}cancel(){this.state==="scheduled"&&(za.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const qK=n=>n.startsWith("--");function HK(n,e,t){qK(e)?n.style.setProperty(e,t):n.style[e]=t}const GK=ZS(()=>window.ScrollTimeline!==void 0),KK={};function $K(n,e){const t=ZS(n);return()=>KK[e]??t()}const iV=$K(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Bh=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,p2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bh([0,.65,.55,1]),circOut:Bh([.55,0,1,.45]),backIn:Bh([.31,.01,.66,-.59]),backOut:Bh([.33,1.53,.69,.99])};function sV(n,e){if(n)return typeof n=="function"?iV()?JO(n,e):"ease-out":jO(n)?Bh(n):Array.isArray(n)?n.map(t=>sV(t,e)||p2.easeOut):p2[n]}function YK(n,e,t,{delay:i=0,duration:r=300,repeat:a=0,repeatType:l="loop",ease:h="easeOut",times:f}={},d=void 0){const g={[e]:t};f&&(g.offset=f);const _=sV(h,r);Array.isArray(_)&&(g.easing=_);const T={delay:i,duration:r,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return d&&(T.pseudoElement=d),n.animate(g,T)}function rV(n){return typeof n=="function"&&"applyToOptions"in n}function WK({type:n,...e}){return rV(n)&&iV()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class QK extends cw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:h,onComplete:f}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,JS(typeof e.type!="string");const d=WK(e);this.animation=YK(t,i,r,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=uw(r,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):HK(t,i,g),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Ni(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ni(e)}get time(){return Ni(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ks(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&GK()?(this.animation.timeline=e,Mi):t(this)}}const oV={anticipate:UO,backInOut:LO,circInOut:BO};function XK(n){return n in oV}function JK(n){typeof n.ease=="string"&&XK(n.ease)&&(n.ease=oV[n.ease])}const g2=10;class ZK extends QK{constructor(e){JK(e),eV(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:a,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new hw({...l,autoplay:!1}),f=ks(this.finishedTime??this.time);t.setWithVelocity(h.sample(f-g2).value,h.sample(f).value,g2),h.stop()}}const y2=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(ko.test(n)||n==="0")&&!n.startsWith("url("));function e$(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function t$(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],l=y2(r,e),h=y2(a,e);return!l||!h?!1:e$(n)||(t==="spring"||rV(t))&&i}function UT(n){n.duration=0,n.type="keyframes"}const n$=new Set(["opacity","clipPath","filter","transform"]),i$=ZS(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function s$(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:a,type:l}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:d}=e.owner.getProps();return i$()&&t&&n$.has(t)&&(t!=="transform"||!d)&&!f&&!i&&r!=="mirror"&&a!==0&&l!=="inertia"}const r$=40;class o$ extends cw{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:l="loop",keyframes:h,name:f,motionValue:d,element:g,..._}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Yn.now();const T={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:a,repeatType:l,name:f,motionValue:d,element:g,..._},w=g?.KeyframeResolver||fw;this.keyframeResolver=new w(h,(R,N,D)=>this.onKeyframesResolved(R,N,T,!D),f,d,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:a,type:l,velocity:h,delay:f,isHandoff:d,onUpdate:g}=i;this.resolvedAt=Yn.now(),t$(e,a,l,h)||((Ar.instantAnimations||!f)&&g?.(uw(e,i,t)),e[0]=e[e.length-1],UT(i),i.repeat=0);const T={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>r$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},w=!d&&s$(T)?new ZK({...T,element:T.motionValue.owner.current}):new hw(T);w.finished.then(()=>this.notifyFinished()).catch(Mi),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),jK()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const a$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function l$(n){const e=a$.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function aV(n,e,t=1){const[i,r]=l$(n);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const l=a.trim();return xO(l)?parseFloat(l):l}return sw(r)?aV(r,e,t+1):r}function dw(n,e){return n?.[e]??n?.default??n}const lV=new Set(["width","height","top","left","right","bottom",...mc]),u$={test:n=>n==="auto",parse:n=>n},uV=n=>e=>e.test(n),cV=[dc,we,Ls,fo,eK,ZG,u$],_2=n=>cV.find(uV(n));function c$(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||NO(n):!0}const h$=new Set(["brightness","contrast","saturate","opacity"]);function f$(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(rw)||[];if(!i)return n;const r=t.replace(i,"");let a=h$.has(e)?1:0;return i!==t&&(a*=100),e+"("+a+r+")"}const d$=/\b([a-z-]*)\(.*?\)/gu,FT={...ko,getAnimatableNone:n=>{const e=n.match(d$);return e?e.map(f$).join(" "):n}},v2={...dc,transform:Math.round},m$={rotate:fo,rotateX:fo,rotateY:fo,rotateZ:fo,scale:tp,scaleX:tp,scaleY:tp,scaleZ:tp,skew:fo,skewX:fo,skewY:fo,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:Vf,originX:o2,originY:o2,originZ:we},mw={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,backgroundPositionX:we,backgroundPositionY:we,...m$,zIndex:v2,fillOpacity:Vf,strokeOpacity:Vf,numOctaves:v2},p$={...mw,color:Wt,backgroundColor:Wt,outlineColor:Wt,fill:Wt,stroke:Wt,borderColor:Wt,borderTopColor:Wt,borderRightColor:Wt,borderBottomColor:Wt,borderLeftColor:Wt,filter:FT,WebkitFilter:FT},hV=n=>p$[n];function fV(n,e){let t=hV(n);return t!==FT&&(t=ko),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const g$=new Set(["auto","none","0"]);function y$(n,e,t){let i=0,r;for(;i<n.length&&!r;){const a=n[i];typeof a=="string"&&!g$.has(a)&&kf(a).values.length&&(r=n[i]),i++}if(r&&t)for(const a of e)n[a]=fV(t,r)}class _$ extends fw{constructor(e,t,i,r,a){super(e,t,i,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let d=e[f];if(typeof d=="string"&&(d=d.trim(),sw(d))){const g=aV(d,t.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!lV.has(i)||e.length!==2)return;const[r,a]=e,l=_2(r),h=_2(a);if(l!==h)if(m2(l)&&m2(h))for(let f=0;f<e.length;f++){const d=e[f];typeof d=="string"&&(e[f]=parseFloat(d))}else Ba[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||c$(e[r]))&&i.push(r);i.length&&y$(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ba[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const a=i.length-1,l=i[a];i[a]=Ba[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function v$(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=t?.[n]??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const dV=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function mV(n){return DO(n)&&"offsetHeight"in n}const T2=30,T$=n=>!isNaN(parseFloat(n));class E${constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=Yn.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Yn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=T$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new ew);const i=this.events[e].add(t);return e==="change"?()=>{i(),wt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Yn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>T2)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,T2);return PO(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ec(n,e){return new E$(n,e)}const{schedule:pw}=qO(queueMicrotask,!1),$i={x:!1,y:!1};function pV(){return $i.x||$i.y}function S$(n){return n==="x"||n==="y"?$i[n]?null:($i[n]=!0,()=>{$i[n]=!1}):$i.x||$i.y?null:($i.x=$i.y=!0,()=>{$i.x=$i.y=!1})}function gV(n,e){const t=v$(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function E2(n){return!(n.pointerType==="touch"||pV())}function w$(n,e,t={}){const[i,r,a]=gV(n,t),l=h=>{if(!E2(h))return;const{target:f}=h,d=e(f,h);if(typeof d!="function"||!f)return;const g=_=>{E2(_)&&(d(_),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,r)};return i.forEach(h=>{h.addEventListener("pointerenter",l,r)}),a}const yV=(n,e)=>e?n===e?!0:yV(n,e.parentElement):!1,gw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,b$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function A$(n){return b$.has(n.tagName)||n.tabIndex!==-1}const Ap=new WeakSet;function S2(n){return e=>{e.key==="Enter"&&n(e)}}function g0(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const C$=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=S2(()=>{if(Ap.has(t))return;g0(t,"down");const r=S2(()=>{g0(t,"up")}),a=()=>g0(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function w2(n){return gw(n)&&!pV()}function I$(n,e,t={}){const[i,r,a]=gV(n,t),l=h=>{const f=h.currentTarget;if(!w2(h))return;Ap.add(f);const d=e(f,h),g=(w,R)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",T),Ap.has(f)&&Ap.delete(f),w2(w)&&typeof d=="function"&&d(w,{success:R})},_=w=>{g(w,f===window||f===document||t.useGlobalTarget||yV(f,w.target))},T=w=>{g(w,!1)};window.addEventListener("pointerup",_,r),window.addEventListener("pointercancel",T,r)};return i.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",l,r),mV(h)&&(h.addEventListener("focus",d=>C$(d,r)),!A$(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),a}function _V(n){return DO(n)&&"ownerSVGElement"in n}function R$(n){return _V(n)&&n.tagName==="svg"}const In=n=>!!(n&&n.getVelocity),x$=[...cV,Wt,ko],D$=n=>x$.find(uV(n)),yw=M.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function b2(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function N$(...n){return e=>{let t=!1;const i=n.map(r=>{const a=b2(r,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let r=0;r<i.length;r++){const a=i[r];typeof a=="function"?a():b2(n[r],null)}}}}function P$(...n){return M.useCallback(N$(...n),n)}class M$ extends M.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,r=mV(i)&&i.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function O$({children:n,isPresent:e,anchorX:t,root:i}){const r=M.useId(),a=M.useRef(null),l=M.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=M.useContext(yw),f=P$(a,n?.ref);return M.useInsertionEffect(()=>{const{width:d,height:g,top:_,left:T,right:w}=l.current;if(e||!a.current||!d||!g)return;const R=t==="left"?`left: ${T}`:`right: ${w}`;a.current.dataset.motionPopId=r;const N=document.createElement("style");h&&(N.nonce=h);const D=i??document.head;return D.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${g}px !important;
            ${R}px !important;
            top: ${_}px !important;
          }
        `),()=>{D.contains(N)&&D.removeChild(N)}},[e]),W.jsx(M$,{isPresent:e,childRef:a,sizeRef:l,children:M.cloneElement(n,{ref:f})})}const V$=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:a,mode:l,anchorX:h,root:f})=>{const d=YS(k$),g=M.useId();let _=!0,T=M.useMemo(()=>(_=!1,{id:g,initial:e,isPresent:t,custom:r,onExitComplete:w=>{d.set(w,!0);for(const R of d.values())if(!R)return;i&&i()},register:w=>(d.set(w,!1),()=>d.delete(w))}),[t,d,i]);return a&&_&&(T={...T}),M.useMemo(()=>{d.forEach((w,R)=>d.set(R,!1))},[t]),M.useEffect(()=>{!t&&!d.size&&i&&i()},[t]),l==="popLayout"&&(n=W.jsx(O$,{isPresent:t,anchorX:h,root:f,children:n})),W.jsx(wy.Provider,{value:T,children:n})};function k$(){return new Map}function vV(n=!0){const e=M.useContext(wy);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,a=M.useId();M.useEffect(()=>{if(n)return r(a)},[n]);const l=M.useCallback(()=>n&&i&&i(a),[a,i,n]);return!t&&i?[!1,l]:[!0]}const np=n=>n.key||"";function A2(n){const e=[];return M.Children.forEach(n,t=>{M.isValidElement(t)&&e.push(t)}),e}const L$=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:a="sync",propagate:l=!1,anchorX:h="left",root:f})=>{const[d,g]=vV(l),_=M.useMemo(()=>A2(n),[n]),T=l&&!d?[]:_.map(np),w=M.useRef(!0),R=M.useRef(_),N=YS(()=>new Map),[D,F]=M.useState(_),[z,k]=M.useState(_);RO(()=>{w.current=!1,R.current=_;for(let re=0;re<z.length;re++){const I=np(z[re]);T.includes(I)?N.delete(I):N.get(I)!==!0&&N.set(I,!1)}},[z,T.length,T.join("-")]);const ee=[];if(_!==D){let re=[..._];for(let I=0;I<z.length;I++){const A=z[I],x=np(A);T.includes(x)||(re.splice(I,0,A),ee.push(A))}return a==="wait"&&ee.length&&(re=ee),k(A2(re)),F(_),null}const{forceRender:X}=M.useContext($S);return W.jsx(W.Fragment,{children:z.map(re=>{const I=np(re),A=l&&!d?!1:_===z||T.includes(I),x=()=>{if(N.has(I))N.set(I,!0);else return;let L=!0;N.forEach(V=>{V||(L=!1)}),L&&(X?.(),k(R.current),l&&g?.(),i&&i())};return W.jsx(V$,{isPresent:A,initial:!w.current||t?void 0:!1,custom:e,presenceAffectsLayout:r,mode:a,root:f,onExitComplete:A?void 0:x,anchorX:h,children:re},I)})})},TV=M.createContext({strict:!1}),C2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},tc={};for(const n in C2)tc[n]={isEnabled:e=>C2[n].some(t=>!!e[t])};function U$(n){for(const e in n)tc[e]={...tc[e],...n[e]}}const F$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xg(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||F$.has(n)}let EV=n=>!xg(n);function B$(n){typeof n=="function"&&(EV=e=>e.startsWith("on")?!xg(e):n(e))}try{B$(require("@emotion/is-prop-valid").default)}catch{}function z$(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(EV(r)||t===!0&&xg(r)||!e&&!xg(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}const by=M.createContext({});function Ay(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Lf(n){return typeof n=="string"||Array.isArray(n)}const _w=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],vw=["initial",..._w];function Cy(n){return Ay(n.animate)||vw.some(e=>Lf(n[e]))}function SV(n){return!!(Cy(n)||n.variants)}function j$(n,e){if(Cy(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Lf(t)?t:void 0,animate:Lf(i)?i:void 0}}return n.inherit!==!1?e:{}}function q$(n){const{initial:e,animate:t}=j$(n,M.useContext(by));return M.useMemo(()=>({initial:e,animate:t}),[I2(e),I2(t)])}function I2(n){return Array.isArray(n)?n.join(" "):n}const Uf={};function H$(n){for(const e in n)Uf[e]=n[e],iw(e)&&(Uf[e].isCSSVariable=!0)}function wV(n,{layout:e,layoutId:t}){return pc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Uf[n]||n==="opacity")}const G$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},K$=mc.length;function $$(n,e,t){let i="",r=!0;for(let a=0;a<K$;a++){const l=mc[a],h=n[l];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(l.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||t){const d=dV(h,mw[l]);if(!f){r=!1;const g=G$[l]||l;i+=`${g}(${d}) `}t&&(e[l]=d)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function Tw(n,e,t){const{style:i,vars:r,transformOrigin:a}=n;let l=!1,h=!1;for(const f in e){const d=e[f];if(pc.has(f)){l=!0;continue}else if(iw(f)){r[f]=d;continue}else{const g=dV(d,mw[f]);f.startsWith("origin")?(h=!0,a[f]=g):i[f]=g}}if(e.transform||(l||t?i.transform=$$(e,n.transform,t):i.transform&&(i.transform="none")),h){const{originX:f="50%",originY:d="50%",originZ:g=0}=a;i.transformOrigin=`${f} ${d} ${g}`}}const Ew=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function bV(n,e,t){for(const i in e)!In(e[i])&&!wV(i,t)&&(n[i]=e[i])}function Y$({transformTemplate:n},e){return M.useMemo(()=>{const t=Ew();return Tw(t,e,n),Object.assign({},t.vars,t.style)},[e])}function W$(n,e){const t=n.style||{},i={};return bV(i,t,n),Object.assign(i,Y$(n,e)),i}function Q$(n,e){const t={},i=W$(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const X$={offset:"stroke-dashoffset",array:"stroke-dasharray"},J$={offset:"strokeDashoffset",array:"strokeDasharray"};function Z$(n,e,t=1,i=0,r=!0){n.pathLength=1;const a=r?X$:J$;n[a.offset]=we.transform(-i);const l=we.transform(e),h=we.transform(t);n[a.array]=`${l} ${h}`}function AV(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:a=1,pathOffset:l=0,...h},f,d,g){if(Tw(n,h,d),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:_,style:T}=n;_.transform&&(T.transform=_.transform,delete _.transform),(T.transform||_.transformOrigin)&&(T.transformOrigin=_.transformOrigin??"50% 50%",delete _.transformOrigin),T.transform&&(T.transformBox=g?.transformBox??"fill-box",delete _.transformBox),e!==void 0&&(_.x=e),t!==void 0&&(_.y=t),i!==void 0&&(_.scale=i),r!==void 0&&Z$(_,r,a,l,!1)}const CV=()=>({...Ew(),attrs:{}}),IV=n=>typeof n=="string"&&n.toLowerCase()==="svg";function eY(n,e,t,i){const r=M.useMemo(()=>{const a=CV();return AV(a,e,IV(i),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};bV(a,n.style,n),r.style={...a,...r.style}}return r}const tY=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Sw(n){return typeof n!="string"||n.includes("-")?!1:!!(tY.indexOf(n)>-1||/[A-Z]/u.test(n))}function nY(n,e,t,{latestValues:i},r,a=!1){const h=(Sw(n)?eY:Q$)(e,i,r,n),f=z$(e,typeof n=="string",a),d=n!==M.Fragment?{...f,...h,ref:t}:{},{children:g}=e,_=M.useMemo(()=>In(g)?g.get():g,[g]);return M.createElement(n,{...d,children:_})}function R2(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function ww(n,e,t,i){if(typeof e=="function"){const[r,a]=R2(i);e=e(t!==void 0?t:n.custom,r,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,a]=R2(i);e=e(t!==void 0?t:n.custom,r,a)}return e}function Cp(n){return In(n)?n.get():n}function iY({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:sY(t,i,r,n),renderState:e()}}function sY(n,e,t,i){const r={},a=i(n,{});for(const T in a)r[T]=Cp(a[T]);let{initial:l,animate:h}=n;const f=Cy(n),d=SV(n);e&&d&&!f&&n.inherit!==!1&&(l===void 0&&(l=e.initial),h===void 0&&(h=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const _=g?h:l;if(_&&typeof _!="boolean"&&!Ay(_)){const T=Array.isArray(_)?_:[_];for(let w=0;w<T.length;w++){const R=ww(n,T[w]);if(R){const{transitionEnd:N,transition:D,...F}=R;for(const z in F){let k=F[z];if(Array.isArray(k)){const ee=g?k.length-1:0;k=k[ee]}k!==null&&(r[z]=k)}for(const z in N)r[z]=N[z]}}}return r}const RV=n=>(e,t)=>{const i=M.useContext(by),r=M.useContext(wy),a=()=>iY(n,e,i,r);return t?a():YS(a)};function bw(n,e,t){const{style:i}=n,r={};for(const a in i)(In(i[a])||e.style&&In(e.style[a])||wV(a,n)||t?.getValue(a)?.liveStyle!==void 0)&&(r[a]=i[a]);return r}const rY=RV({scrapeMotionValuesFromProps:bw,createRenderState:Ew});function xV(n,e,t){const i=bw(n,e,t);for(const r in n)if(In(n[r])||In(e[r])){const a=mc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[a]=n[r]}return i}const oY=RV({scrapeMotionValuesFromProps:xV,createRenderState:CV}),aY=Symbol.for("motionComponentSymbol");function gu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function lY(n,e,t){return M.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):gu(t)&&(t.current=i))},[e])}const Aw=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),uY="framerAppearId",DV="data-"+Aw(uY),NV=M.createContext({});function cY(n,e,t,i,r){const{visualElement:a}=M.useContext(by),l=M.useContext(TV),h=M.useContext(wy),f=M.useContext(yw).reducedMotion,d=M.useRef(null);i=i||l.renderer,!d.current&&i&&(d.current=i(n,{visualState:e,parent:a,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const g=d.current,_=M.useContext(NV);g&&!g.projection&&r&&(g.type==="html"||g.type==="svg")&&hY(d.current,t,r,_);const T=M.useRef(!1);M.useInsertionEffect(()=>{g&&T.current&&g.update(t,h)});const w=t[DV],R=M.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return RO(()=>{g&&(T.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),R.current&&g.animationState&&g.animationState.animateChanges())}),M.useEffect(()=>{g&&(!R.current&&g.animationState&&g.animationState.animateChanges(),R.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),R.current=!1),g.enteringChildren=void 0)}),g}function hY(n,e,t,i){const{layoutId:r,layout:a,drag:l,dragConstraints:h,layoutScroll:f,layoutRoot:d,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:PV(n.parent)),n.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!l||h&&gu(h),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:f,layoutRoot:d})}function PV(n){if(n)return n.options.allowProjection!==!1?n.projection:PV(n.parent)}function y0(n,{forwardMotionProps:e=!1}={},t,i){t&&U$(t);const r=Sw(n)?oY:rY;function a(h,f){let d;const g={...M.useContext(yw),...h,layoutId:fY(h)},{isStatic:_}=g,T=q$(h),w=r(h,_);if(!_&&WS){dY();const R=mY(g);d=R.MeasureLayout,T.visualElement=cY(n,w,g,i,R.ProjectionNode)}return W.jsxs(by.Provider,{value:T,children:[d&&T.visualElement?W.jsx(d,{visualElement:T.visualElement,...g}):null,nY(n,h,lY(w,T.visualElement,f),w,_,e)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=M.forwardRef(a);return l[aY]=n,l}function fY({layoutId:n}){const e=M.useContext($S).id;return e&&n!==void 0?e+"-"+n:n}function dY(n,e){M.useContext(TV).strict}function mY(n){const{drag:e,layout:t}=tc;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function pY(n,e){if(typeof Proxy>"u")return y0;const t=new Map,i=(a,l)=>y0(a,l,n,e),r=(a,l)=>i(a,l);return new Proxy(r,{get:(a,l)=>l==="create"?i:(t.has(l)||t.set(l,y0(l,void 0,n,e)),t.get(l))})}function MV({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function gY({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function yY(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function _0(n){return n===void 0||n===1}function BT({scale:n,scaleX:e,scaleY:t}){return!_0(n)||!_0(e)||!_0(t)}function Ca(n){return BT(n)||OV(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function OV(n){return x2(n.x)||x2(n.y)}function x2(n){return n&&n!=="0%"}function Dg(n,e,t){const i=n-t,r=e*i;return t+r}function D2(n,e,t,i,r){return r!==void 0&&(n=Dg(n,r,i)),Dg(n,t,i)+e}function zT(n,e=0,t=1,i,r){n.min=D2(n.min,e,t,i,r),n.max=D2(n.max,e,t,i,r)}function VV(n,{x:e,y:t}){zT(n.x,e.translate,e.scale,e.originPoint),zT(n.y,t.translate,t.scale,t.originPoint)}const N2=.999999999999,P2=1.0000000000001;function _Y(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let a,l;for(let h=0;h<r;h++){a=t[h],l=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&_u(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,VV(n,l)),i&&Ca(a.latestValues)&&_u(n,a.latestValues))}e.x<P2&&e.x>N2&&(e.x=1),e.y<P2&&e.y>N2&&(e.y=1)}function yu(n,e){n.min=n.min+e,n.max=n.max+e}function M2(n,e,t,i,r=.5){const a=Ct(n.min,n.max,r);zT(n,e,t,a,i)}function _u(n,e){M2(n.x,e.x,e.scaleX,e.scale,e.originX),M2(n.y,e.y,e.scaleY,e.scale,e.originY)}function kV(n,e){return MV(yY(n.getBoundingClientRect(),e))}function vY(n,e,t){const i=kV(n,t),{scroll:r}=e;return r&&(yu(i.x,r.offset.x),yu(i.y,r.offset.y)),i}const O2=()=>({translate:0,scale:1,origin:0,originPoint:0}),vu=()=>({x:O2(),y:O2()}),V2=()=>({min:0,max:0}),Lt=()=>({x:V2(),y:V2()}),jT={current:null},LV={current:!1};function TY(){if(LV.current=!0,!!WS)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>jT.current=n.matches;n.addEventListener("change",e),e()}else jT.current=!1}const EY=new WeakMap;function SY(n,e,t){for(const i in e){const r=e[i],a=t[i];if(In(r))n.addValue(i,r);else if(In(a))n.addValue(i,ec(r,{owner:n}));else if(a!==r)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=n.getStaticValue(i);n.addValue(i,ec(l!==void 0?l:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const k2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class wY{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:a,visualState:l},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=fw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=Yn.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,wt.render(this.render,!1,!0))};const{latestValues:f,renderState:d}=l;this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=Cy(t),this.isVariantNode=SV(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,..._}=this.scrapeMotionValuesFromProps(t,{},this);for(const T in _){const w=_[T];f[T]!==void 0&&In(w)&&w.set(f[T])}}mount(e){this.current=e,EY.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),LV.current||TY(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:jT.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Vo(this.notifyUpdate),Vo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=pc.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&wt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in tc){const t=tc[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Lt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<k2.length;i++){const r=k2[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,l=e[a];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=SY(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=ec(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(xO(i)||NO(i))?i=parseFloat(i):!D$(i)&&ko.test(t)&&(i=fV(e,t)),this.setBaseTarget(e,In(i)?i.get():i)),In(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const a=ww(this.props,t,this.presenceContext?.custom);a&&(i=a[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!In(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new ew),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){pw.render(this.render)}}class UV extends wY{constructor(){super(...arguments),this.KeyframeResolver=_$}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;In(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function FV(n,{style:e,vars:t},i,r){const a=n.style;let l;for(l in e)a[l]=e[l];r?.applyProjectionStyles(a,i);for(l in t)a.setProperty(l,t[l])}function bY(n){return window.getComputedStyle(n)}class AY extends UV{constructor(){super(...arguments),this.type="html",this.renderInstance=FV}readValueFromInstance(e,t){if(pc.has(t))return this.projection?.isProjecting?MT(t):LK(e,t);{const i=bY(e),r=(iw(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return kV(e,t)}build(e,t,i){Tw(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return bw(e,t,i)}}const BV=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function CY(n,e,t,i){FV(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(BV.has(r)?r:Aw(r),e.attrs[r])}class IY extends UV{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Lt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(pc.has(t)){const i=hV(t);return i&&i.default||0}return t=BV.has(t)?t:Aw(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return xV(e,t,i)}build(e,t,i){AV(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){CY(e,t,i,r)}mount(e){this.isSVGTag=IV(e.tagName),super.mount(e)}}const RY=(n,e)=>Sw(n)?new IY(e):new AY(e,{allowProjection:n!==M.Fragment});function Nu(n,e,t){const i=n.getProps();return ww(i,e,t!==void 0?t:i.custom,n)}const qT=n=>Array.isArray(n);function xY(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ec(t))}function DY(n){return qT(n)?n[n.length-1]||0:n}function NY(n,e){const t=Nu(n,e);let{transitionEnd:i={},transition:r={},...a}=t||{};a={...a,...i};for(const l in a){const h=DY(a[l]);xY(n,l,h)}}function PY(n){return!!(In(n)&&n.add)}function HT(n,e){const t=n.getValue("willChange");if(PY(t))return t.add(e);if(!t&&Ar.WillChange){const i=new Ar.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function zV(n){return n.props[DV]}const MY=n=>n!==null;function OY(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(MY),a=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[a]}const VY={type:"spring",stiffness:500,damping:25,restSpeed:10},kY=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),LY={type:"keyframes",duration:.8},UY={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},FY=(n,{keyframes:e})=>e.length>2?LY:pc.has(n)?n.startsWith("scale")?kY(e[1]):VY:UY;function BY({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:a,repeatType:l,repeatDelay:h,from:f,elapsed:d,...g}){return!!Object.keys(g).length}const Cw=(n,e,t,i={},r,a)=>l=>{const h=dw(i,n)||{},f=h.delay||i.delay||0;let{elapsed:d=0}=i;d=d-ks(f);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-d,onUpdate:T=>{e.set(T),h.onUpdate&&h.onUpdate(T)},onComplete:()=>{l(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:a?void 0:r};BY(h)||Object.assign(g,FY(n,g)),g.duration&&(g.duration=ks(g.duration)),g.repeatDelay&&(g.repeatDelay=ks(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let _=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(UT(g),g.delay===0&&(_=!0)),(Ar.instantAnimations||Ar.skipAnimations)&&(_=!0,UT(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,_&&!a&&e.get()!==void 0){const T=OY(g.keyframes,h);if(T!==void 0){wt.update(()=>{g.onUpdate(T),g.onComplete()});return}}return h.isSync?new hw(g):new o$(g)};function zY({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function jV(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:l,...h}=e;i&&(a=i);const f=[],d=r&&n.animationState&&n.animationState.getState()[r];for(const g in h){const _=n.getValue(g,n.latestValues[g]??null),T=h[g];if(T===void 0||d&&zY(d,g))continue;const w={delay:t,...dw(a||{},g)},R=_.get();if(R!==void 0&&!_.isAnimating&&!Array.isArray(T)&&T===R&&!w.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const F=zV(n);if(F){const z=window.MotionHandoffAnimation(F,g,wt);z!==null&&(w.startTime=z,N=!0)}}HT(n,g),_.start(Cw(g,_,T,n.shouldReduceMotion&&lV.has(g)?{type:!1}:w,n,N));const D=_.animation;D&&f.push(D)}return l&&Promise.all(f).then(()=>{wt.update(()=>{l&&NY(n,l)})}),f}function qV(n,e,t,i=0,r=1){const a=Array.from(n).sort((d,g)=>d.sortNodePosition(g)).indexOf(e),l=n.size,h=(l-1)*i;return typeof t=="function"?t(a,l):r===1?a*i:h-a*i}function GT(n,e,t={}){const i=Nu(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const a=i?()=>Promise.all(jV(n,i,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:g,staggerDirection:_}=r;return jY(n,e,f,d,g,_,t)}:()=>Promise.resolve(),{when:h}=r;if(h){const[f,d]=h==="beforeChildren"?[a,l]:[l,a];return f().then(()=>d())}else return Promise.all([a(),l(t.delay)])}function jY(n,e,t=0,i=0,r=0,a=1,l){const h=[];for(const f of n.variantChildren)f.notify("AnimationStart",e),h.push(GT(f,e,{...l,delay:t+(typeof i=="function"?0:i)+qV(n.variantChildren,f,i,r,a)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(h)}function qY(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(a=>GT(n,a,t));i=Promise.all(r)}else if(typeof e=="string")i=GT(n,e,t);else{const r=typeof e=="function"?Nu(n,e,t.custom):e;i=Promise.all(jV(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function HV(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const HY=vw.length;function GV(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?GV(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<HY;t++){const i=vw[t],r=n.props[i];(Lf(r)||r===!1)&&(e[i]=r)}return e}const GY=[..._w].reverse(),KY=_w.length;function $Y(n){return e=>Promise.all(e.map(({animation:t,options:i})=>qY(n,t,i)))}function YY(n){let e=$Y(n),t=L2(),i=!0;const r=f=>(d,g)=>{const _=Nu(n,g,f==="exit"?n.presenceContext?.custom:void 0);if(_){const{transition:T,transitionEnd:w,...R}=_;d={...d,...R,...w}}return d};function a(f){e=f(n)}function l(f){const{props:d}=n,g=GV(n.parent)||{},_=[],T=new Set;let w={},R=1/0;for(let D=0;D<KY;D++){const F=GY[D],z=t[F],k=d[F]!==void 0?d[F]:g[F],ee=Lf(k),X=F===f?z.isActive:null;X===!1&&(R=D);let re=k===g[F]&&k!==d[F]&&ee;if(re&&i&&n.manuallyAnimateOnMount&&(re=!1),z.protectedKeys={...w},!z.isActive&&X===null||!k&&!z.prevProp||Ay(k)||typeof k=="boolean")continue;const I=WY(z.prevProp,k);let A=I||F===f&&z.isActive&&!re&&ee||D>R&&ee,x=!1;const L=Array.isArray(k)?k:[k];let V=L.reduce(r(F),{});X===!1&&(V={});const{prevResolvedValues:q={}}=z,P={...q,...V},dt=ae=>{A=!0,T.has(ae)&&(x=!0,T.delete(ae)),z.needsAnimating[ae]=!0;const pe=n.getValue(ae);pe&&(pe.liveStyle=!1)};for(const ae in P){const pe=V[ae],Pe=q[ae];if(w.hasOwnProperty(ae))continue;let je=!1;qT(pe)&&qT(Pe)?je=!HV(pe,Pe):je=pe!==Pe,je?pe!=null?dt(ae):T.add(ae):pe!==void 0&&T.has(ae)?dt(ae):z.protectedKeys[ae]=!0}z.prevProp=k,z.prevResolvedValues=V,z.isActive&&(w={...w,...V}),i&&n.blockInitialAnimation&&(A=!1);const Rt=re&&I;A&&(!Rt||x)&&_.push(...L.map(ae=>{const pe={type:F};if(typeof ae=="string"&&i&&!Rt&&n.manuallyAnimateOnMount&&n.parent){const{parent:Pe}=n,je=Nu(Pe,ae);if(Pe.enteringChildren&&je){const{delayChildren:B}=je.transition||{};pe.delay=qV(Pe.enteringChildren,n,B)}}return{animation:ae,options:pe}}))}if(T.size){const D={};if(typeof d.initial!="boolean"){const F=Nu(n,Array.isArray(d.initial)?d.initial[0]:d.initial);F&&F.transition&&(D.transition=F.transition)}T.forEach(F=>{const z=n.getBaseTarget(F),k=n.getValue(F);k&&(k.liveStyle=!0),D[F]=z??null}),_.push({animation:D})}let N=!!_.length;return i&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(N=!1),i=!1,N?e(_):Promise.resolve()}function h(f,d){if(t[f].isActive===d)return Promise.resolve();n.variantChildren?.forEach(_=>_.animationState?.setActive(f,d)),t[f].isActive=d;const g=l(f);for(const _ in t)t[_].protectedKeys={};return g}return{animateChanges:l,setActive:h,setAnimateFunction:a,getState:()=>t,reset:()=>{t=L2(),i=!0}}}function WY(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!HV(e,n):!1}function Ta(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function L2(){return{animate:Ta(!0),whileInView:Ta(),whileHover:Ta(),whileTap:Ta(),whileDrag:Ta(),whileFocus:Ta(),exit:Ta()}}class zo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class QY extends zo{constructor(e){super(e),e.animationState||(e.animationState=YY(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ay(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let XY=0;class JY extends zo{constructor(){super(...arguments),this.id=XY++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const ZY={animation:{Feature:QY},exit:{Feature:JY}};function Ff(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function ud(n){return{point:{x:n.pageX,y:n.pageY}}}const eW=n=>e=>gw(e)&&n(e,ud(e));function of(n,e,t,i){return Ff(n,e,eW(t),i)}const KV=1e-4,tW=1-KV,nW=1+KV,$V=.01,iW=0-$V,sW=0+$V;function Vn(n){return n.max-n.min}function rW(n,e,t){return Math.abs(n-e)<=t}function U2(n,e,t,i=.5){n.origin=i,n.originPoint=Ct(e.min,e.max,n.origin),n.scale=Vn(t)/Vn(e),n.translate=Ct(t.min,t.max,n.origin)-n.originPoint,(n.scale>=tW&&n.scale<=nW||isNaN(n.scale))&&(n.scale=1),(n.translate>=iW&&n.translate<=sW||isNaN(n.translate))&&(n.translate=0)}function af(n,e,t,i){U2(n.x,e.x,t.x,i?i.originX:void 0),U2(n.y,e.y,t.y,i?i.originY:void 0)}function F2(n,e,t){n.min=t.min+e.min,n.max=n.min+Vn(e)}function oW(n,e,t){F2(n.x,e.x,t.x),F2(n.y,e.y,t.y)}function B2(n,e,t){n.min=e.min-t.min,n.max=n.min+Vn(e)}function lf(n,e,t){B2(n.x,e.x,t.x),B2(n.y,e.y,t.y)}function Ci(n){return[n("x"),n("y")]}const YV=({current:n})=>n?n.ownerDocument.defaultView:null,z2=(n,e)=>Math.abs(n-e);function aW(n,e){const t=z2(n.x,e.x),i=z2(n.y,e.y);return Math.sqrt(t**2+i**2)}class WV{constructor(e,t,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=T0(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,R=aW(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!R)return;const{point:N}=T,{timestamp:D}=Tn;this.history.push({...N,timestamp:D});const{onStart:F,onMove:z}=this.handlers;w||(F&&F(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,T)},this.handlePointerMove=(T,w)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=v0(w,this.transformPagePoint),wt.update(this.updatePoint,!0)},this.handlePointerUp=(T,w)=>{this.end();const{onEnd:R,onSessionEnd:N,resumeAnimation:D}=this.handlers;if(this.dragSnapToOrigin&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const F=T0(T.type==="pointercancel"?this.lastMoveEventInfo:v0(w,this.transformPagePoint),this.history);this.startEvent&&R&&R(T,F),N&&N(T,F)},!gw(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=r||window;const h=ud(e),f=v0(h,this.transformPagePoint),{point:d}=f,{timestamp:g}=Tn;this.history=[{...d,timestamp:g}];const{onSessionStart:_}=t;_&&_(e,T0(f,this.history)),this.removeListeners=od(of(this.contextWindow,"pointermove",this.handlePointerMove),of(this.contextWindow,"pointerup",this.handlePointerUp),of(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Vo(this.updatePoint)}}function v0(n,e){return e?{point:e(n.point)}:n}function j2(n,e){return{x:n.x-e.x,y:n.y-e.y}}function T0({point:n},e){return{point:n,delta:j2(n,QV(e)),offset:j2(n,lW(e)),velocity:uW(e,.1)}}function lW(n){return n[0]}function QV(n){return n[n.length-1]}function uW(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=QV(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>ks(e)));)t--;if(!i)return{x:0,y:0};const a=Ni(r.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const l={x:(r.x-i.x)/a,y:(r.y-i.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function cW(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Ct(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Ct(t,n,i.max):Math.min(n,t)),n}function q2(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function hW(n,{top:e,left:t,bottom:i,right:r}){return{x:q2(n.x,t,r),y:q2(n.y,e,i)}}function H2(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function fW(n,e){return{x:H2(n.x,e.x),y:H2(n.y,e.y)}}function dW(n,e){let t=.5;const i=Vn(n),r=Vn(e);return r>i?t=Of(e.min,e.max-i,n.min):i>r&&(t=Of(n.min,n.max-r,e.min)),br(0,1,t)}function mW(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const KT=.35;function pW(n=KT){return n===!1?n=0:n===!0&&(n=KT),{x:G2(n,"left","right"),y:G2(n,"top","bottom")}}function G2(n,e,t){return{min:K2(n,e),max:K2(n,t)}}function K2(n,e){return typeof n=="number"?n:n[e]||0}const gW=new WeakMap;class yW{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Lt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=_=>{const{dragSnapToOrigin:T}=this.getProps();T?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ud(_).point)},l=(_,T)=>{const{drag:w,dragPropagation:R,onDragStart:N}=this.getProps();if(w&&!R&&(this.openDragLock&&this.openDragLock(),this.openDragLock=S$(w),!this.openDragLock))return;this.latestPointerEvent=_,this.latestPanInfo=T,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ci(F=>{let z=this.getAxisMotionValue(F).get()||0;if(Ls.test(z)){const{projection:k}=this.visualElement;if(k&&k.layout){const ee=k.layout.layoutBox[F];ee&&(z=Vn(ee)*(parseFloat(z)/100))}}this.originPoint[F]=z}),N&&wt.postRender(()=>N(_,T)),HT(this.visualElement,"transform");const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},h=(_,T)=>{this.latestPointerEvent=_,this.latestPanInfo=T;const{dragPropagation:w,dragDirectionLock:R,onDirectionLock:N,onDrag:D}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:F}=T;if(R&&this.currentDirection===null){this.currentDirection=_W(F),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",T.point,F),this.updateAxis("y",T.point,F),this.visualElement.render(),D&&D(_,T)},f=(_,T)=>{this.latestPointerEvent=_,this.latestPanInfo=T,this.stop(_,T),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Ci(_=>this.getAnimationState(_)==="paused"&&this.getAxisMotionValue(_).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new WV(e,{onSessionStart:a,onStart:l,onMove:h,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:YV(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,r=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!r||!i)return;const{velocity:l}=r;this.startAnimation(l);const{onDragEnd:h}=this.getProps();h&&wt.postRender(()=>h(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!ip(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=cW(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&gu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=hW(i.layoutBox,e):this.constraints=!1,this.elastic=pW(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ci(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=mW(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!gu(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=vY(i,r.root,this.visualElement.getTransformPagePoint());let l=fW(r.layout.layoutBox,a);if(t){const h=t(gY(l));this.hasMutatedConstraints=!!h,h&&(l=MV(h))}return l}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},d=Ci(g=>{if(!ip(g,t,this.currentDirection))return;let _=f&&f[g]||{};l&&(_={min:0,max:0});const T=r?200:1e6,w=r?40:1e7,R={type:"inertia",velocity:i?e[g]:0,bounceStiffness:T,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...a,..._};return this.startAxisValueAnimation(g,R)});return Promise.all(d).then(h)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return HT(this.visualElement,e),i.start(Cw(e,i,0,t,this.visualElement,!1))}stopAnimation(){Ci(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ci(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Ci(t=>{const{drag:i}=this.getProps();if(!ip(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(t);if(r&&r.layout){const{min:l,max:h}=r.layout.layoutBox[t];a.set(e[t]-Ct(l,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!gu(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ci(l=>{const h=this.getAxisMotionValue(l);if(h&&this.constraints!==!1){const f=h.get();r[l]=dW({min:f,max:f},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ci(l=>{if(!ip(l,e,null))return;const h=this.getAxisMotionValue(l),{min:f,max:d}=this.constraints[l];h.set(Ct(f,d,r[l]))})}addListeners(){if(!this.visualElement.current)return;gW.set(this.visualElement,this);const e=this.visualElement.current,t=of(e,"pointerdown",f=>{const{drag:d,dragListener:g=!0}=this.getProps();d&&g&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();gu(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),wt.read(i);const l=Ff(window,"resize",()=>this.scalePositionWithinConstraints()),h=r.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ci(g=>{const _=this.getAxisMotionValue(g);_&&(this.originPoint[g]+=f[g].translate,_.set(_.get()+f[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),a(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:l=KT,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:a,dragElastic:l,dragMomentum:h}}}function ip(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function _W(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class vW extends zo{constructor(e){super(e),this.removeGroupControls=Mi,this.removeListeners=Mi,this.controls=new yW(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mi}unmount(){this.removeGroupControls(),this.removeListeners()}}const $2=n=>(e,t)=>{n&&wt.postRender(()=>n(e,t))};class TW extends zo{constructor(){super(...arguments),this.removePointerDownListener=Mi}onPointerDown(e){this.session=new WV(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:YV(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:$2(e),onStart:$2(t),onMove:i,onEnd:(a,l)=>{delete this.session,r&&wt.postRender(()=>r(a,l))}}}mount(){this.removePointerDownListener=of(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ip={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Y2(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ph={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(we.test(n))n=parseFloat(n);else return n;const t=Y2(n,e.target.x),i=Y2(n,e.target.y);return`${t}% ${i}%`}},EW={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=ko.parse(n);if(r.length>5)return i;const a=ko.createTransformer(n),l=typeof r[0]!="number"?1:0,h=t.x.scale*e.x,f=t.y.scale*e.y;r[0+l]/=h,r[1+l]/=f;const d=Ct(h,f,.5);return typeof r[2+l]=="number"&&(r[2+l]/=d),typeof r[3+l]=="number"&&(r[3+l]/=d),a(r)}};let E0=!1;class SW extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:a}=e;H$(wW),a&&(t.group&&t.group.add(a),i&&i.register&&r&&i.register(a),E0&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Ip.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:a}=this.props,{projection:l}=i;return l&&(l.isPresent=a,E0=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||wt.postRender(()=>{const h=l.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),pw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;E0=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function XV(n){const[e,t]=vV(),i=M.useContext($S);return W.jsx(SW,{...n,layoutGroup:i,switchLayoutGroup:M.useContext(NV),isPresent:e,safeToRemove:t})}const wW={borderRadius:{...Ph,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ph,borderTopRightRadius:Ph,borderBottomLeftRadius:Ph,borderBottomRightRadius:Ph,boxShadow:EW};function bW(n,e,t){const i=In(n)?n:ec(n);return i.start(Cw("",i,e,t)),i.animation}const AW=(n,e)=>n.depth-e.depth;class CW{constructor(){this.children=[],this.isDirty=!1}add(e){QS(this.children,e),this.isDirty=!0}remove(e){XS(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(AW),this.isDirty=!1,this.children.forEach(e)}}function IW(n,e){const t=Yn.now(),i=({timestamp:r})=>{const a=r-t;a>=e&&(Vo(i),n(a-e))};return wt.setup(i,!0),()=>Vo(i)}const JV=["TopLeft","TopRight","BottomLeft","BottomRight"],RW=JV.length,W2=n=>typeof n=="string"?parseFloat(n):n,Q2=n=>typeof n=="number"||we.test(n);function xW(n,e,t,i,r,a){r?(n.opacity=Ct(0,t.opacity??1,DW(i)),n.opacityExit=Ct(e.opacity??1,0,NW(i))):a&&(n.opacity=Ct(e.opacity??1,t.opacity??1,i));for(let l=0;l<RW;l++){const h=`border${JV[l]}Radius`;let f=X2(e,h),d=X2(t,h);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||Q2(f)===Q2(d)?(n[h]=Math.max(Ct(W2(f),W2(d),i),0),(Ls.test(d)||Ls.test(f))&&(n[h]+="%")):n[h]=d}(e.rotate||t.rotate)&&(n.rotate=Ct(e.rotate||0,t.rotate||0,i))}function X2(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const DW=ZV(0,.5,FO),NW=ZV(.5,.95,Mi);function ZV(n,e,t){return i=>i<n?0:i>e?1:t(Of(n,e,i))}function J2(n,e){n.min=e.min,n.max=e.max}function Ai(n,e){J2(n.x,e.x),J2(n.y,e.y)}function Z2(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function ex(n,e,t,i,r){return n-=e,n=Dg(n,1/t,i),r!==void 0&&(n=Dg(n,1/r,i)),n}function PW(n,e=0,t=1,i=.5,r,a=n,l=n){if(Ls.test(e)&&(e=parseFloat(e),e=Ct(l.min,l.max,e/100)-l.min),typeof e!="number")return;let h=Ct(a.min,a.max,i);n===a&&(h-=e),n.min=ex(n.min,e,t,h,r),n.max=ex(n.max,e,t,h,r)}function tx(n,e,[t,i,r],a,l){PW(n,e[t],e[i],e[r],e.scale,a,l)}const MW=["x","scaleX","originX"],OW=["y","scaleY","originY"];function nx(n,e,t,i){tx(n.x,e,MW,t?t.x:void 0,i?i.x:void 0),tx(n.y,e,OW,t?t.y:void 0,i?i.y:void 0)}function ix(n){return n.translate===0&&n.scale===1}function ek(n){return ix(n.x)&&ix(n.y)}function sx(n,e){return n.min===e.min&&n.max===e.max}function VW(n,e){return sx(n.x,e.x)&&sx(n.y,e.y)}function rx(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function tk(n,e){return rx(n.x,e.x)&&rx(n.y,e.y)}function ox(n){return Vn(n.x)/Vn(n.y)}function ax(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class kW{constructor(){this.members=[]}add(e){QS(this.members,e),e.scheduleRender()}remove(e){if(XS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function LW(n,e,t){let i="";const r=n.x.translate/e.x,a=n.y.translate/e.y,l=t?.z||0;if((r||a||l)&&(i=`translate3d(${r}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:g,rotateX:_,rotateY:T,skewX:w,skewY:R}=t;d&&(i=`perspective(${d}px) ${i}`),g&&(i+=`rotate(${g}deg) `),_&&(i+=`rotateX(${_}deg) `),T&&(i+=`rotateY(${T}deg) `),w&&(i+=`skewX(${w}deg) `),R&&(i+=`skewY(${R}deg) `)}const h=n.x.scale*e.x,f=n.y.scale*e.y;return(h!==1||f!==1)&&(i+=`scale(${h}, ${f})`),i||"none"}const S0=["","X","Y","Z"],UW=1e3;let FW=0;function w0(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function nk(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=zV(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",wt,!(r||a))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&nk(i)}function ik({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},h=e?.()){this.id=FW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(jW),this.nodes.forEach(KW),this.nodes.forEach($W),this.nodes.forEach(qW)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new CW)}addEventListener(l,h){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new ew),this.eventHandlers.get(l).add(h)}notifyListeners(l,...h){const f=this.eventHandlers.get(l);f&&f.notify(...h)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=_V(l)&&!R$(l),this.instance=l;const{layoutId:h,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||h)&&(this.isLayoutDirty=!0),n){let g,_=0;const T=()=>this.root.updateBlockedByResize=!1;wt.read(()=>{_=window.innerWidth}),n(l,()=>{const w=window.innerWidth;w!==_&&(_=w,this.root.updateBlockedByResize=!0,g&&g(),g=IW(T,250),Ip.hasAnimatedSinceResize&&(Ip.hasAnimatedSinceResize=!1,this.nodes.forEach(cx)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&d&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_,hasRelativeLayoutChanged:T,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const R=this.options.transition||d.getDefaultTransition()||JW,{onLayoutAnimationStart:N,onLayoutAnimationComplete:D}=d.getProps(),F=!this.targetLayout||!tk(this.targetLayout,w),z=!_&&T;if(this.options.layoutRoot||this.resumeFrom||z||_&&(F||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...dw(R,"layout"),onPlay:N,onComplete:D};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(g,z)}else _||cx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Vo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(YW),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&nk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const _=this.path[g];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ux);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(GW),this.nodes.forEach(BW),this.nodes.forEach(zW)):this.nodes.forEach(ux),this.clearAllSnapshots();const h=Yn.now();Tn.delta=br(0,1e3/60,h-Tn.timestamp),Tn.timestamp=h,Tn.isProcessing=!0,h0.update.process(Tn),h0.preRender.process(Tn),h0.render.process(Tn),Tn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(HW),this.sharedNodes.forEach(WW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Vn(this.snapshot.measuredBox.x)&&!Vn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Lt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(h=!1),h&&this.instance){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!ek(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,g=d!==this.prevTransformTemplateValue;l&&this.instance&&(h||Ca(this.latestValues)||g)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return l&&(f=this.removeTransform(f)),ZW(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Lt();const h=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(eQ))){const{scroll:d}=this.root;d&&(yu(h.x,d.offset.x),yu(h.y,d.offset.y))}return h}removeElementScroll(l){const h=Lt();if(Ai(h,l),this.scroll?.wasRoot)return h;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:g,options:_}=d;d!==this.root&&g&&_.layoutScroll&&(g.wasRoot&&Ai(h,l),yu(h.x,g.offset.x),yu(h.y,g.offset.y))}return h}applyTransform(l,h=!1){const f=Lt();Ai(f,l);for(let d=0;d<this.path.length;d++){const g=this.path[d];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&_u(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Ca(g.latestValues)&&_u(f,g.latestValues)}return Ca(this.latestValues)&&_u(f,this.latestValues),f}removeTransform(l){const h=Lt();Ai(h,l);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!Ca(d.latestValues))continue;BT(d.latestValues)&&d.updateSnapshot();const g=Lt(),_=d.measurePageBox();Ai(g,_),nx(h,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,g)}return Ca(this.latestValues)&&nx(h,this.latestValues),h}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Tn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:_}=this.options;if(!(!this.layout||!(g||_))){if(this.resolvedRelativeTargetAt=Tn.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lt(),this.relativeTargetOrigin=Lt(),lf(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Lt(),this.targetWithTransforms=Lt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),oW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ai(this.target,this.layout.layoutBox),VV(this.target,this.targetDelta)):Ai(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lt(),this.relativeTargetOrigin=Lt(),lf(this.relativeTargetOrigin,this.target,T.target),Ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||BT(this.parent.latestValues)||OV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),h=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Tn.timestamp&&(f=!1),f)return;const{layout:d,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||g))return;Ai(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,T=this.treeScale.y;_Y(this.layoutCorrected,this.treeScale,this.path,h),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Lt());const{target:w}=l;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Z2(this.prevProjectionDelta.x,this.projectionDelta.x),Z2(this.prevProjectionDelta.y,this.projectionDelta.y)),af(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==T||!ax(this.projectionDelta.x,this.prevProjectionDelta.x)||!ax(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vu(),this.projectionDelta=vu(),this.projectionDeltaWithTransform=vu()}setAnimationOrigin(l,h=!1){const f=this.snapshot,d=f?f.latestValues:{},g={...this.latestValues},_=vu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const T=Lt(),w=f?f.source:void 0,R=this.layout?this.layout.source:void 0,N=w!==R,D=this.getStack(),F=!D||D.members.length<=1,z=!!(N&&!F&&this.options.crossfade===!0&&!this.path.some(XW));this.animationProgress=0;let k;this.mixTargetDelta=ee=>{const X=ee/1e3;hx(_.x,l.x,X),hx(_.y,l.y,X),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(lf(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),QW(this.relativeTarget,this.relativeTargetOrigin,T,X),k&&VW(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Lt()),Ai(k,this.relativeTarget)),N&&(this.animationValues=g,xW(g,d,this.latestValues,X,z,F)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=X},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Vo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wt.update(()=>{Ip.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ec(0)),this.currentAnimation=bW(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),l.onUpdate&&l.onUpdate(h)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(UW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:h,target:f,layout:d,latestValues:g}=l;if(!(!h||!f||!d)){if(this!==l&&this.layout&&d&&sk(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||Lt();const _=Vn(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+_;const T=Vn(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+T}Ai(h,f),_u(h,g),af(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(l,h){this.sharedNodes.has(l)||this.sharedNodes.set(l,new kW),this.sharedNodes.get(l).add(h);const d=h.options.initialPromotionConfig;h.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(h):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:h,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let h=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const d={};f.z&&w0("z",l,d,this.animationValues);for(let g=0;g<S0.length;g++)w0(`rotate${S0[g]}`,l,d,this.animationValues),w0(`skew${S0[g]}`,l,d,this.animationValues);l.render();for(const g in d)l.setStaticValue(g,d[g]),this.animationValues&&(this.animationValues[g]=d[g]);l.scheduleRender()}applyProjectionStyles(l,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Cp(h?.pointerEvents)||"",l.transform=f?f(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Cp(h?.pointerEvents)||""),this.hasProjected&&!Ca(this.latestValues)&&(l.transform=f?f({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=d.animationValues||d.latestValues;this.applyTransformsToTarget();let _=LW(this.projectionDeltaWithTransform,this.treeScale,g);f&&(_=f(g,_)),l.transform=_;const{x:T,y:w}=this.projectionDelta;l.transformOrigin=`${T.origin*100}% ${w.origin*100}% 0`,d.animationValues?l.opacity=d===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=d===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const R in Uf){if(g[R]===void 0)continue;const{correct:N,applyTo:D,isCSSVariable:F}=Uf[R],z=_==="none"?g[R]:N(g[R],d);if(D){const k=D.length;for(let ee=0;ee<k;ee++)l[D[ee]]=z}else F?this.options.visualElement.renderState.vars[R]=z:l[R]=z}this.options.layoutId&&(l.pointerEvents=d===this?Cp(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(lx),this.root.sharedNodes.clear()}}}function BW(n){n.updateLayout()}function zW(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:r}=n.options,a=e.source!==n.layout.source;r==="size"?Ci(g=>{const _=a?e.measuredBox[g]:e.layoutBox[g],T=Vn(_);_.min=t[g].min,_.max=_.min+T}):sk(r,e.layoutBox,t)&&Ci(g=>{const _=a?e.measuredBox[g]:e.layoutBox[g],T=Vn(t[g]);_.max=_.min+T,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+T)});const l=vu();af(l,t,e.layoutBox);const h=vu();a?af(h,n.applyTransform(i,!0),e.measuredBox):af(h,t,e.layoutBox);const f=!ek(l);let d=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:_,layout:T}=g;if(_&&T){const w=Lt();lf(w,e.layoutBox,_.layoutBox);const R=Lt();lf(R,t,T.layoutBox),tk(w,R)||(d=!0),g.options.layoutRoot&&(n.relativeTarget=R,n.relativeTargetOrigin=w,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:h,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function jW(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function qW(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function HW(n){n.clearSnapshot()}function lx(n){n.clearMeasurements()}function ux(n){n.isLayoutDirty=!1}function GW(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function cx(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function KW(n){n.resolveTargetDelta()}function $W(n){n.calcProjection()}function YW(n){n.resetSkewAndRotation()}function WW(n){n.removeLeadSnapshot()}function hx(n,e,t){n.translate=Ct(e.translate,0,t),n.scale=Ct(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function fx(n,e,t,i){n.min=Ct(e.min,t.min,i),n.max=Ct(e.max,t.max,i)}function QW(n,e,t,i){fx(n.x,e.x,t.x,i),fx(n.y,e.y,t.y,i)}function XW(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const JW={duration:.45,ease:[.4,0,.1,1]},dx=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),mx=dx("applewebkit/")&&!dx("chrome/")?Math.round:Mi;function px(n){n.min=mx(n.min),n.max=mx(n.max)}function ZW(n){px(n.x),px(n.y)}function sk(n,e,t){return n==="position"||n==="preserve-aspect"&&!rW(ox(e),ox(t),.2)}function eQ(n){return n!==n.root&&n.scroll?.wasRoot}const tQ=ik({attachResizeListener:(n,e)=>Ff(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),b0={current:void 0},rk=ik({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!b0.current){const n=new tQ({});n.mount(window),n.setOptions({layoutScroll:!0}),b0.current=n}return b0.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),nQ={pan:{Feature:TW},drag:{Feature:vW,ProjectionNode:rk,MeasureLayout:XV}};function gx(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,a=i[r];a&&wt.postRender(()=>a(e,ud(e)))}class iQ extends zo{mount(){const{current:e}=this.node;e&&(this.unmount=w$(e,(t,i)=>(gx(this.node,i,"Start"),r=>gx(this.node,r,"End"))))}unmount(){}}class sQ extends zo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=od(Ff(this.node.current,"focus",()=>this.onFocus()),Ff(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function yx(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),a=i[r];a&&wt.postRender(()=>a(e,ud(e)))}class rQ extends zo{mount(){const{current:e}=this.node;e&&(this.unmount=I$(e,(t,i)=>(yx(this.node,i,"Start"),(r,{success:a})=>yx(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const $T=new WeakMap,A0=new WeakMap,oQ=n=>{const e=$T.get(n.target);e&&e(n)},aQ=n=>{n.forEach(oQ)};function lQ({root:n,...e}){const t=n||document;A0.has(t)||A0.set(t,{});const i=A0.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(aQ,{root:n,...e})),i[r]}function uQ(n,e,t){const i=lQ(e);return $T.set(n,t),i.observe(n),()=>{$T.delete(n),i.unobserve(n)}}const cQ={some:0,all:1};class hQ extends zo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:cQ[r]},h=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:g,onViewportLeave:_}=this.node.getProps(),T=d?g:_;T&&T(f)};return uQ(this.node.current,l,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(fQ(e,t))&&this.startObserver()}unmount(){}}function fQ({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const dQ={inView:{Feature:hQ},tap:{Feature:rQ},focus:{Feature:sQ},hover:{Feature:iQ}},mQ={layout:{ProjectionNode:rk,MeasureLayout:XV}},pQ={...ZY,...dQ,...nQ,...mQ},ok=pY(pQ,RY),gQ=M.memo(()=>{const n=OG(),e=M.useMemo(()=>W.jsx(L$,{mode:"wait",children:W.jsx(ok.span,{initial:{scale:.6,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.6,opacity:0},transition:{duration:.3,type:"spring"},style:{fontWeight:"bold",color:n>0?"#28a745":"#dc3545",marginLeft:"5px"},children:n},n)}),[n]);return W.jsx("div",{children:W.jsx("div",{style:{cursor:"pointer",boxShadow:"rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset",borderRadius:"8px",display:"flex",gap:"20px",background:"#ededed",border:"solid 1px #000",padding:"9px"},children:W.jsxs("span",{style:{fontSize:"15px"},children:["Active sessions:",e]})})})}),yQ=()=>{const[n,e]=M.useState(""),[t,i]=M.useState("");return M.useEffect(()=>{const r=()=>{const f=new Date,d=f.getDate(),g=f.toLocaleString("en-US",{month:"short"}).toUpperCase(),_=f.getFullYear();e(`${d} ${g}, ${_}`)},a=()=>{const f=new Date,d=String(f.getHours()).padStart(2,"0"),g=String(f.getMinutes()).padStart(2,"0");i(`${d}:${g}`)};r(),a();const l=setInterval(r,6e4),h=setInterval(a,1e3);return()=>{clearInterval(l),clearInterval(h)}},[]),W.jsx("header",{className:Ki.header,children:W.jsxs("div",{className:Ki.header__container,children:[W.jsxs("div",{className:Ki.left,children:[W.jsxs("div",{className:Ki.left_container,children:[W.jsx("img",{className:Ki.logo,src:PG,alt:"logo"}),W.jsx("span",{children:"INVENTORY"})]}),W.jsx("div",{className:Ki.center,children:W.jsx("input",{type:"text",placeholder:"...",className:Ki.search__input})}),W.jsx("span",{children:W.jsx(gQ,{})})]}),W.jsxs("div",{className:Ki.right,children:[W.jsx("div",{className:Ki.data_container,children:"today"}),W.jsxs("div",{className:Ki.data_container_allDate,children:[W.jsx("span",{children:n}),W.jsxs("div",{children:[W.jsx("img",{className:Ki.clockIcon,src:MG,alt:"clock",width:12,height:12}),W.jsx("span",{children:t})]})]})]})]})})},_Q="_app_wfltt_1",vQ="_app__body_wfltt_11",TQ="_app__nav_wfltt_21",EQ="_app__link_wfltt_55",SQ="_app__user_wfltt_93",wQ="_app__settings_wfltt_119",bQ="_app__content_wfltt_157",Cs={app:_Q,app__body:vQ,app__nav:TQ,app__link:EQ,"app__link--active":"_app__link--active_wfltt_79","app__user-container":"_app__user-container_wfltt_93",app__user:SQ,app__settings:wQ,app__content:bQ},AQ="/testObject/assets/currentUser-DW_uhQFp.jpg",CQ="/testObject/assets/setting-iFurRb8-.png",IQ=()=>{const n=Cr(),e=({isActive:t})=>t?`${Cs.app__link} ${Cs["app__link--active"]}`:Cs.app__link;return W.jsxs("div",{className:Cs.app__body,children:[W.jsxs("nav",{className:Cs.app__nav,children:[W.jsxs("div",{className:Cs["app__user-container"],children:[W.jsx("img",{className:Cs.app__user,src:AQ,alt:"user"}),W.jsx(tE,{to:ai.SETTINGS,children:W.jsx("img",{className:Cs.app__settings,src:CQ,alt:"settings"})})]}),W.jsx(au,{to:ai.PRIHOD,className:e,children:""}),W.jsx(au,{to:ai.GROUPS,className:e,children:""}),W.jsx(au,{to:ai.PRODUCTS,className:e,children:""}),W.jsx(au,{to:ai.USERS,className:e,children:""}),W.jsx(au,{to:ai.SETTINGS,className:e,children:""})]}),W.jsx("main",{className:Cs.app__content,children:W.jsx(ok.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.5,ease:"easeInOut"},children:W.jsx(B4,{})},n.pathname)})]})},RQ=()=>W.jsxs("div",{className:Cs.app,children:[W.jsx(yQ,{}),W.jsx(IQ,{})]}),ai={PRIHOD:"/prihod",GROUPS:"/group",PRODUCTS:"/products",USERS:"/users",SETTINGS:"/settings",ERROR:"/404"},xQ=[{element:W.jsx(RQ,{}),children:[{path:"/",element:W.jsx(aC,{to:ai.PRIHOD,replace:!0})},{path:ai.PRIHOD,element:W.jsx(v3,{})},{path:ai.GROUPS,element:W.jsx(T3,{})},{path:ai.PRODUCTS,element:W.jsx(_G,{})},{path:ai.USERS,element:W.jsx(vG,{})},{path:ai.SETTINGS,element:W.jsx(TG,{})},{path:ai.ERROR,element:W.jsx(EG,{})},{path:"*",element:W.jsx(aC,{to:"/404",replace:!0})}]}],DQ={orders:[],status:"idle",error:null},ak=Yx({name:"orders",initialState:DQ,reducers:n=>({fetchOrdersTC:n.asyncThunk(async(e,t)=>{try{return(await fO(Eg(xu,"orders"))).docs.map(a=>({id:a.id,...a.data()}))}catch(i){return t.rejectWithValue(i.message??"Failed to fetch orders")}},{fulfilled:(e,t)=>{e.orders=t.payload},pending:e=>{e.error=null},rejected:(e,t)=>{e.status="failed",e.error=t.payload}}),deleteOrderTC:n.asyncThunk(async(e,t)=>{try{return await dO(LS(xu,"orders",e)),e}catch(i){return t.rejectWithValue(i.message??"Failed to delete order")}},{fulfilled:(e,t)=>{e.orders=e.orders.filter(i=>i.id!==t.payload)},rejected:(e,t)=>{e.error=t.payload}}),addOrderTC:n.asyncThunk(async(e,t)=>{try{return{id:(await mO(Eg(xu,"orders"),e)).id,...e}}catch(i){return t.rejectWithValue(i.message??"Failed to add order")}},{fulfilled:(e,t)=>{e.orders.push(t.payload)},rejected:(e,t)=>{e.error=t.payload}})}),selectors:{selectOrders:n=>n.orders,selectStatus:n=>n.status,selectError:n=>n.error}}),{fetchOrdersTC:BQ,deleteOrderTC:zQ,addOrderTC:jQ}=ak.actions,NQ=ak.reducer,PQ=p6({reducer:{orders:NQ,products:MH}}),MQ=()=>I4(xQ);WL.createRoot(document.getElementById("root")).render(W.jsx(zL.StrictMode,{children:W.jsx(c3,{basename:"/testObject",children:W.jsx(L3,{store:PQ,children:W.jsx(MQ,{})})})}));
