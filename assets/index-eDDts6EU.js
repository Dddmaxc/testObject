(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function om(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hE={exports:{}},Df={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bR;function hU(){if(bR)return Df;bR=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var c in r)c!=="key"&&(o[c]=r[c])}else o=r;return r=o.ref,{$$typeof:t,type:i,key:l,ref:r!==void 0?r:null,props:o}}return Df.Fragment=e,Df.jsx=n,Df.jsxs=n,Df}var wR;function fU(){return wR||(wR=1,hE.exports=hU()),hE.exports}var R=fU(),fE={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SR;function dU(){if(SR)return $e;SR=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w(q){return q===null||typeof q!="object"?null:(q=v&&q[v]||q["@@iterator"],typeof q=="function"?q:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,O={};function j(q,oe,_e){this.props=q,this.context=oe,this.refs=O,this.updater=_e||S}j.prototype.isReactComponent={},j.prototype.setState=function(q,oe){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,oe,"setState")},j.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function V(){}V.prototype=j.prototype;function k(q,oe,_e){this.props=q,this.context=oe,this.refs=O,this.updater=_e||S}var K=k.prototype=new V;K.constructor=k,N(K,j.prototype),K.isPureReactComponent=!0;var H=Array.isArray;function ie(){}var x={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function P(q,oe,_e){var Te=_e.ref;return{$$typeof:t,type:q,key:oe,ref:Te!==void 0?Te:null,props:_e}}function F(q,oe){return P(q.type,oe,q.props)}function L(q){return typeof q=="object"&&q!==null&&q.$$typeof===t}function B(q){var oe={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(_e){return oe[_e]})}var M=/\/+/g;function Pe(q,oe){return typeof q=="object"&&q!==null&&q.key!=null?B(""+q.key):oe.toString(36)}function Ke(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ie,ie):(q.status="pending",q.then(function(oe){q.status==="pending"&&(q.status="fulfilled",q.value=oe)},function(oe){q.status==="pending"&&(q.status="rejected",q.reason=oe)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function ee(q,oe,_e,Te,De){var Ue=typeof q;(Ue==="undefined"||Ue==="boolean")&&(q=null);var He=!1;if(q===null)He=!0;else switch(Ue){case"bigint":case"string":case"number":He=!0;break;case"object":switch(q.$$typeof){case t:case e:He=!0;break;case p:return He=q._init,ee(He(q._payload),oe,_e,Te,De)}}if(He)return De=De(q),He=Te===""?"."+Pe(q,0):Te,H(De)?(_e="",He!=null&&(_e=He.replace(M,"$&/")+"/"),ee(De,oe,_e,"",function(kn){return kn})):De!=null&&(L(De)&&(De=F(De,_e+(De.key==null||q&&q.key===De.key?"":(""+De.key).replace(M,"$&/")+"/")+He)),oe.push(De)),1;He=0;var Vt=Te===""?".":Te+":";if(H(q))for(var ct=0;ct<q.length;ct++)Te=q[ct],Ue=Vt+Pe(Te,ct),He+=ee(Te,oe,_e,Ue,De);else if(ct=w(q),typeof ct=="function")for(q=ct.call(q),ct=0;!(Te=q.next()).done;)Te=Te.value,Ue=Vt+Pe(Te,ct++),He+=ee(Te,oe,_e,Ue,De);else if(Ue==="object"){if(typeof q.then=="function")return ee(Ke(q),oe,_e,Te,De);throw oe=String(q),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return He}function he(q,oe,_e){if(q==null)return q;var Te=[],De=0;return ee(q,Te,"","",function(Ue){return oe.call(_e,Ue,De++)}),Te}function ge(q){if(q._status===-1){var oe=q._result;oe=oe(),oe.then(function(_e){(q._status===0||q._status===-1)&&(q._status=1,q._result=_e)},function(_e){(q._status===0||q._status===-1)&&(q._status=2,q._result=_e)}),q._status===-1&&(q._status=0,q._result=oe)}if(q._status===1)return q._result.default;throw q._result}var ke=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},je={map:he,forEach:function(q,oe,_e){he(q,function(){oe.apply(this,arguments)},_e)},count:function(q){var oe=0;return he(q,function(){oe++}),oe},toArray:function(q){return he(q,function(oe){return oe})||[]},only:function(q){if(!L(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return $e.Activity=y,$e.Children=je,$e.Component=j,$e.Fragment=n,$e.Profiler=r,$e.PureComponent=k,$e.StrictMode=i,$e.Suspense=f,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,$e.__COMPILER_RUNTIME={__proto__:null,c:function(q){return x.H.useMemoCache(q)}},$e.cache=function(q){return function(){return q.apply(null,arguments)}},$e.cacheSignal=function(){return null},$e.cloneElement=function(q,oe,_e){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var Te=N({},q.props),De=q.key;if(oe!=null)for(Ue in oe.key!==void 0&&(De=""+oe.key),oe)!I.call(oe,Ue)||Ue==="key"||Ue==="__self"||Ue==="__source"||Ue==="ref"&&oe.ref===void 0||(Te[Ue]=oe[Ue]);var Ue=arguments.length-2;if(Ue===1)Te.children=_e;else if(1<Ue){for(var He=Array(Ue),Vt=0;Vt<Ue;Vt++)He[Vt]=arguments[Vt+2];Te.children=He}return P(q.type,De,Te)},$e.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:o,_context:q},q},$e.createElement=function(q,oe,_e){var Te,De={},Ue=null;if(oe!=null)for(Te in oe.key!==void 0&&(Ue=""+oe.key),oe)I.call(oe,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(De[Te]=oe[Te]);var He=arguments.length-2;if(He===1)De.children=_e;else if(1<He){for(var Vt=Array(He),ct=0;ct<He;ct++)Vt[ct]=arguments[ct+2];De.children=Vt}if(q&&q.defaultProps)for(Te in He=q.defaultProps,He)De[Te]===void 0&&(De[Te]=He[Te]);return P(q,Ue,De)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(q){return{$$typeof:c,render:q}},$e.isValidElement=L,$e.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:ge}},$e.memo=function(q,oe){return{$$typeof:d,type:q,compare:oe===void 0?null:oe}},$e.startTransition=function(q){var oe=x.T,_e={};x.T=_e;try{var Te=q(),De=x.S;De!==null&&De(_e,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(ie,ke)}catch(Ue){ke(Ue)}finally{oe!==null&&_e.types!==null&&(oe.types=_e.types),x.T=oe}},$e.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},$e.use=function(q){return x.H.use(q)},$e.useActionState=function(q,oe,_e){return x.H.useActionState(q,oe,_e)},$e.useCallback=function(q,oe){return x.H.useCallback(q,oe)},$e.useContext=function(q){return x.H.useContext(q)},$e.useDebugValue=function(){},$e.useDeferredValue=function(q,oe){return x.H.useDeferredValue(q,oe)},$e.useEffect=function(q,oe){return x.H.useEffect(q,oe)},$e.useEffectEvent=function(q){return x.H.useEffectEvent(q)},$e.useId=function(){return x.H.useId()},$e.useImperativeHandle=function(q,oe,_e){return x.H.useImperativeHandle(q,oe,_e)},$e.useInsertionEffect=function(q,oe){return x.H.useInsertionEffect(q,oe)},$e.useLayoutEffect=function(q,oe){return x.H.useLayoutEffect(q,oe)},$e.useMemo=function(q,oe){return x.H.useMemo(q,oe)},$e.useOptimistic=function(q,oe){return x.H.useOptimistic(q,oe)},$e.useReducer=function(q,oe,_e){return x.H.useReducer(q,oe,_e)},$e.useRef=function(q){return x.H.useRef(q)},$e.useState=function(q){return x.H.useState(q)},$e.useSyncExternalStore=function(q,oe,_e){return x.H.useSyncExternalStore(q,oe,_e)},$e.useTransition=function(){return x.H.useTransition()},$e.version="19.2.0",$e}var CR;function hy(){return CR||(CR=1,fE.exports=dU()),fE.exports}var A=hy();const St=om(A);var dE={exports:{}},Nf={},mE={exports:{}},pE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AR;function mU(){return AR||(AR=1,(function(t){function e(ee,he){var ge=ee.length;ee.push(he);e:for(;0<ge;){var ke=ge-1>>>1,je=ee[ke];if(0<r(je,he))ee[ke]=he,ee[ge]=je,ge=ke;else break e}}function n(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var he=ee[0],ge=ee.pop();if(ge!==he){ee[0]=ge;e:for(var ke=0,je=ee.length,q=je>>>1;ke<q;){var oe=2*(ke+1)-1,_e=ee[oe],Te=oe+1,De=ee[Te];if(0>r(_e,ge))Te<je&&0>r(De,_e)?(ee[ke]=De,ee[Te]=ge,ke=Te):(ee[ke]=_e,ee[oe]=ge,ke=oe);else if(Te<je&&0>r(De,ge))ee[ke]=De,ee[Te]=ge,ke=Te;else break e}}return he}function r(ee,he){var ge=ee.sortIndex-he.sortIndex;return ge!==0?ge:ee.id-he.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var f=[],d=[],p=1,y=null,v=3,w=!1,S=!1,N=!1,O=!1,j=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function K(ee){for(var he=n(d);he!==null;){if(he.callback===null)i(d);else if(he.startTime<=ee)i(d),he.sortIndex=he.expirationTime,e(f,he);else break;he=n(d)}}function H(ee){if(N=!1,K(ee),!S)if(n(f)!==null)S=!0,ie||(ie=!0,B());else{var he=n(d);he!==null&&Ke(H,he.startTime-ee)}}var ie=!1,x=-1,I=5,P=-1;function F(){return O?!0:!(t.unstable_now()-P<I)}function L(){if(O=!1,ie){var ee=t.unstable_now();P=ee;var he=!0;try{e:{S=!1,N&&(N=!1,V(x),x=-1),w=!0;var ge=v;try{t:{for(K(ee),y=n(f);y!==null&&!(y.expirationTime>ee&&F());){var ke=y.callback;if(typeof ke=="function"){y.callback=null,v=y.priorityLevel;var je=ke(y.expirationTime<=ee);if(ee=t.unstable_now(),typeof je=="function"){y.callback=je,K(ee),he=!0;break t}y===n(f)&&i(f),K(ee)}else i(f);y=n(f)}if(y!==null)he=!0;else{var q=n(d);q!==null&&Ke(H,q.startTime-ee),he=!1}}break e}finally{y=null,v=ge,w=!1}he=void 0}}finally{he?B():ie=!1}}}var B;if(typeof k=="function")B=function(){k(L)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,Pe=M.port2;M.port1.onmessage=L,B=function(){Pe.postMessage(null)}}else B=function(){j(L,0)};function Ke(ee,he){x=j(function(){ee(t.unstable_now())},he)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(ee){switch(v){case 1:case 2:case 3:var he=3;break;default:he=v}var ge=v;v=he;try{return ee()}finally{v=ge}},t.unstable_requestPaint=function(){O=!0},t.unstable_runWithPriority=function(ee,he){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ge=v;v=ee;try{return he()}finally{v=ge}},t.unstable_scheduleCallback=function(ee,he,ge){var ke=t.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?ke+ge:ke):ge=ke,ee){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=ge+je,ee={id:p++,callback:he,priorityLevel:ee,startTime:ge,expirationTime:je,sortIndex:-1},ge>ke?(ee.sortIndex=ge,e(d,ee),n(f)===null&&ee===n(d)&&(N?(V(x),x=-1):N=!0,Ke(H,ge-ke))):(ee.sortIndex=je,e(f,ee),S||w||(S=!0,ie||(ie=!0,B()))),ee},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(ee){var he=v;return function(){var ge=v;v=he;try{return ee.apply(this,arguments)}finally{v=ge}}}})(pE)),pE}var IR;function pU(){return IR||(IR=1,mE.exports=mU()),mE.exports}var gE={exports:{}},ti={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RR;function gU(){if(RR)return ti;RR=1;var t=hy();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,d,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:f,containerInfo:d,implementation:p}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return ti.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ti.createPortal=function(f,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(f,d,null,p)},ti.flushSync=function(f){var d=l.T,p=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=d,i.p=p,i.d.f()}},ti.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},ti.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},ti.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var p=d.as,y=c(p,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,w=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):p==="script"&&i.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},ti.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},ti.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,y=c(p,d.crossOrigin);i.d.L(f,p,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},ti.preloadModule=function(f,d){if(typeof f=="string")if(d){var p=c(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},ti.requestFormReset=function(f){i.d.r(f)},ti.unstable_batchedUpdates=function(f,d){return f(d)},ti.useFormState=function(f,d,p){return l.H.useFormState(f,d,p)},ti.useFormStatus=function(){return l.H.useHostTransitionStatus()},ti.version="19.2.0",ti}var xR;function KP(){if(xR)return gE.exports;xR=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),gE.exports=gU(),gE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DR;function _U(){if(DR)return Nf;DR=1;var t=pU(),e=hy(),n=KP();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(i(188))}function d(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var u=s,h=a;;){var g=u.return;if(g===null)break;var _=g.alternate;if(_===null){if(h=g.return,h!==null){u=h;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===u)return f(g),s;if(_===h)return f(g),a;_=_.sibling}throw Error(i(188))}if(u.return!==h.return)u=g,h=_;else{for(var T=!1,C=g.child;C;){if(C===u){T=!0,u=g,h=_;break}if(C===h){T=!0,h=g,u=_;break}C=C.sibling}if(!T){for(C=_.child;C;){if(C===u){T=!0,u=_,h=g;break}if(C===h){T=!0,h=_,u=g;break}C=C.sibling}if(!T)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:a}function p(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=p(s),a!==null)return a;s=s.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),V=Symbol.for("react.consumer"),k=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var M=Symbol.for("react.client.reference");function Pe(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===M?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case j:return"Profiler";case O:return"StrictMode";case H:return"Suspense";case ie:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case k:return s.displayName||"Context";case V:return(s._context.displayName||"Context")+".Consumer";case K:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case x:return a=s.displayName||null,a!==null?a:Pe(s.type)||"Memo";case I:a=s._payload,s=s._init;try{return Pe(s(a))}catch{}}return null}var Ke=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},ke=[],je=-1;function q(s){return{current:s}}function oe(s){0>je||(s.current=ke[je],ke[je]=null,je--)}function _e(s,a){je++,ke[je]=s.current,s.current=a}var Te=q(null),De=q(null),Ue=q(null),He=q(null);function Vt(s,a){switch(_e(Ue,a),_e(De,s),_e(Te,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?HI(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=HI(a),s=GI(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}oe(Te),_e(Te,s)}function ct(){oe(Te),oe(De),oe(Ue)}function kn(s){s.memoizedState!==null&&_e(He,s);var a=Te.current,u=GI(a,s.type);a!==u&&(_e(De,s),_e(Te,u))}function Pi(s){De.current===s&&(oe(Te),oe(De)),He.current===s&&(oe(He),Af._currentValue=ge)}var Jn,mi;function fn(s){if(Jn===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Jn=a&&a[1]||"",mi=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jn+s+mi}var ft=!1;function pi(s,a){if(!s||ft)return"";ft=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ne){var J=ne}Reflect.construct(s,[],ue)}else{try{ue.call()}catch(ne){J=ne}s.call(ue.prototype)}}else{try{throw Error()}catch(ne){J=ne}(ue=s())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ne){if(ne&&J&&typeof ne.stack=="string")return[ne.stack,J.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=h.DetermineComponentFrameRoot(),T=_[0],C=_[1];if(T&&C){var U=T.split(`
`),X=C.split(`
`);for(g=h=0;h<U.length&&!U[h].includes("DetermineComponentFrameRoot");)h++;for(;g<X.length&&!X[g].includes("DetermineComponentFrameRoot");)g++;if(h===U.length||g===X.length)for(h=U.length-1,g=X.length-1;1<=h&&0<=g&&U[h]!==X[g];)g--;for(;1<=h&&0<=g;h--,g--)if(U[h]!==X[g]){if(h!==1||g!==1)do if(h--,g--,0>g||U[h]!==X[g]){var se=`
`+U[h].replace(" at new "," at ");return s.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",s.displayName)),se}while(1<=h&&0<=g);break}}}finally{ft=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?fn(u):""}function Oi(s,a){switch(s.tag){case 26:case 27:case 5:return fn(s.type);case 16:return fn("Lazy");case 13:return s.child!==a&&a!==null?fn("Suspense Fallback"):fn("Suspense");case 19:return fn("SuspenseList");case 0:case 15:return pi(s.type,!1);case 11:return pi(s.type.render,!1);case 1:return pi(s.type,!0);case 31:return fn("Activity");default:return""}}function So(s){try{var a="",u=null;do a+=Oi(s,u),u=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var zt=Object.prototype.hasOwnProperty,z=t.unstable_scheduleCallback,Z=t.unstable_cancelCallback,re=t.unstable_shouldYield,we=t.unstable_requestPaint,fe=t.unstable_now,de=t.unstable_getCurrentPriorityLevel,pe=t.unstable_ImmediatePriority,We=t.unstable_UserBlockingPriority,et=t.unstable_NormalPriority,ei=t.unstable_LowPriority,Rs=t.unstable_IdlePriority,Mi=t.log,mu=t.unstable_setDisableYieldValue,ai=null,rn=null;function gi(s){if(typeof Mi=="function"&&mu(s),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(ai,s)}catch{}}var Bt=Math.clz32?Math.clz32:Mm,pu=Math.log,xs=Math.LN2;function Mm(s){return s>>>=0,s===0?32:31-(pu(s)/xs|0)|0}var Hr=256,Ua=262144,dn=4194304;function Gr(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Kr(s,a,u){var h=s.pendingLanes;if(h===0)return 0;var g=0,_=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var C=h&134217727;return C!==0?(h=C&~_,h!==0?g=Gr(h):(T&=C,T!==0?g=Gr(T):u||(u=C&~s,u!==0&&(g=Gr(u))))):(C=h&~_,C!==0?g=Gr(C):T!==0?g=Gr(T):u||(u=h&~s,u!==0&&(g=Gr(u)))),g===0?0:a!==0&&a!==g&&(a&_)===0&&(_=g&-g,u=a&-a,_>=u||_===32&&(u&4194048)!==0)?a:g}function Tr(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function pv(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function km(){var s=dn;return dn<<=1,(dn&62914560)===0&&(dn=4194304),s}function Wr(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Fa(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function gv(s,a,u,h,g,_){var T=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var C=s.entanglements,U=s.expirationTimes,X=s.hiddenUpdates;for(u=T&~u;0<u;){var se=31-Bt(u),ue=1<<se;C[se]=0,U[se]=-1;var J=X[se];if(J!==null)for(X[se]=null,se=0;se<J.length;se++){var ne=J[se];ne!==null&&(ne.lane&=-536870913)}u&=~ue}h!==0&&ja(s,h,0),_!==0&&g===0&&s.tag!==0&&(s.suspendedLanes|=_&~(T&~a))}function ja(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-Bt(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|u&261930}function Dh(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var h=31-Bt(u),g=1<<h;g&a|s[h]&a&&(s[h]|=a),u&=~g}}function Nh(s,a){var u=a&-a;return u=(u&42)!==0?1:Ba(u),(u&(s.suspendedLanes|a))!==0?0:u}function Ba(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Ds(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Vm(){var s=he.p;return s!==0?s:(s=window.event,s===void 0?32:pR(s.type))}function br(s,a){var u=he.p;try{return he.p=s,a()}finally{he.p=u}}var wr=Math.random().toString(36).slice(2),mn="__reactFiber$"+wr,Vn="__reactProps$"+wr,Yr="__reactContainer$"+wr,gu="__reactEvents$"+wr,_v="__reactListeners$"+wr,Lm="__reactHandles$"+wr,zm="__reactResources$"+wr,Zr="__reactMarker$"+wr;function _u(s){delete s[mn],delete s[Vn],delete s[gu],delete s[_v],delete s[Lm]}function Qr(s){var a=s[mn];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Yr]||u[mn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=JI(s);s!==null;){if(u=s[mn])return u;s=JI(s)}return a}s=u,u=s.parentNode}return null}function Xi(s){if(s=s[mn]||s[Yr]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function ki(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function Xr(s){var a=s[zm];return a||(a=s[zm]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function pn(s){s[Zr]=!0}var Ph=new Set,Oh={};function Jr(s,a){es(s,a),es(s+"Capture",a)}function es(s,a){for(Oh[s]=a,s=0;s<a.length;s++)Ph.add(a[s])}var Mh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kh={},Vh={};function Um(s){return zt.call(Vh,s)?!0:zt.call(kh,s)?!1:Mh.test(s)?Vh[s]=!0:(kh[s]=!0,!1)}function yu(s,a,u){if(Um(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function Vi(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function gn(s,a,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+h)}}function Ln(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Co(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Lh(s,a,u){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var g=h.get,_=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(T){u=""+T,_.call(this,T)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Tt(s){if(!s._valueTracker){var a=Co(s)?"checked":"value";s._valueTracker=Lh(s,a,""+s[a])}}function qa(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return s&&(h=Co(s)?s.checked?"true":"false":s.value),s=h,s!==u?(a.setValue(s),!0):!1}function ts(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var $a=/[\n"\\]/g;function _i(s){return s.replace($a,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function vu(s,a,u,h,g,_,T,C){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),a!=null?T==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+Ln(a)):s.value!==""+Ln(a)&&(s.value=""+Ln(a)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),a!=null?zh(s,T,Ln(a)):u!=null?zh(s,T,Ln(u)):h!=null&&s.removeAttribute("value"),g==null&&_!=null&&(s.defaultChecked=!!_),g!=null&&(s.checked=g&&typeof g!="function"&&typeof g!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.name=""+Ln(C):s.removeAttribute("name")}function Fm(s,a,u,h,g,_,T,C){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),a!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||a!=null)){Tt(s);return}u=u!=null?""+Ln(u):"",a=a!=null?""+Ln(a):u,C||a===s.value||(s.value=a),s.defaultValue=a}h=h??g,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=C?s.checked:!!h,s.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T),Tt(s)}function zh(s,a,u){a==="number"&&ts(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function Ao(s,a,u,h){if(s=s.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=a.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&h&&(s[u].defaultSelected=!0)}else{for(u=""+Ln(u),a=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,h&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function jm(s,a,u){if(a!=null&&(a=""+Ln(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+Ln(u):""}function Io(s,a,u,h){if(a==null){if(h!=null){if(u!=null)throw Error(i(92));if(Ke(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),a=u}u=Ln(a),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h),Tt(s)}function yi(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Bm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uh(s,a,u){var h=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,u):typeof u!="number"||u===0||Bm.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function Fh(s,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var g in a)h=a[g],a.hasOwnProperty(g)&&u[g]!==h&&Uh(s,g,h)}else for(var _ in a)a.hasOwnProperty(_)&&Uh(s,_,a[_])}function Eu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ro=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tu(s){return Ro.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Sr(){}var jh=null;function Ji(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var xo=null,ns=null;function Ha(s){var a=Xi(s);if(a&&(s=a.stateNode)){var u=s[Vn]||null;e:switch(s=a.stateNode,a.type){case"input":if(vu(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+_i(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==s&&h.form===s.form){var g=h[Vn]||null;if(!g)throw Error(i(90));vu(h,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(a=0;a<u.length;a++)h=u[a],h.form===s.form&&qa(h)}break e;case"textarea":jm(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&Ao(s,!!u.multiple,a,!1)}}}var bu=!1;function Do(s,a,u){if(bu)return s(a,u);bu=!0;try{var h=s(a);return h}finally{if(bu=!1,(xo!==null||ns!==null)&&(Vp(),xo&&(a=xo,s=ns,ns=xo=null,Ha(a),s)))for(a=0;a<s.length;a++)Ha(s[a])}}function Cr(s,a){var u=s.stateNode;if(u===null)return null;var h=u[Vn]||null;if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ga=!1;if(er)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){Ga=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{Ga=!1}var is=null,Bh=null,Ka=null;function qh(){if(Ka)return Ka;var s,a=Bh,u=a.length,h,g="value"in is?is.value:is.textContent,_=g.length;for(s=0;s<u&&a[s]===g[s];s++);var T=u-s;for(h=1;h<=T&&a[u-h]===g[_-h];h++);return Ka=g.slice(s,1<h?1-h:void 0)}function Wa(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Ns(){return!0}function Ar(){return!1}function $n(s){function a(u,h,g,_,T){this._reactName=u,this._targetInst=g,this.type=h,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(u=s[C],this[C]=u?u(_):_[C]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Ns:Ar,this.isPropagationStopped=Ar,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ns)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ns)},persist:function(){},isPersistent:Ns}),a}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rs=$n(Ps),No=y({},Ps,{view:0,detail:0}),$h=$n(No),Po,wu,ss,Su=y({},No,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oo,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ss&&(ss&&s.type==="mousemove"?(Po=s.screenX-ss.screenX,wu=s.screenY-ss.screenY):wu=Po=0,ss=s),Po)},movementY:function(s){return"movementY"in s?s.movementY:wu}}),Hh=$n(Su),Ya=y({},Su,{dataTransfer:0}),$m=$n(Ya),Hm=y({},No,{relatedTarget:0}),Za=$n(Hm),Gh=y({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),Gm=$n(Gh),Cu=y({},Ps,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Km=$n(Cu),Wm=y({},Ps,{data:0}),os=$n(Wm),Ym={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xm(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Qm[s])?!!a[s]:!1}function Oo(){return Xm}var li=y({},No,{key:function(s){if(s.key){var a=Ym[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Wa(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Zm[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oo,charCode:function(s){return s.type==="keypress"?Wa(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Wa(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Jm=$n(li),ep=y({},Su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Os=$n(ep),m=y({},No,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oo}),E=$n(m),b=y({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=$n(b),Y=y({},Su,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),te=$n(Y),ve=y({},Ps,{newState:0,oldState:0}),Ye=$n(ve),sn=[9,13,27,32],pt=er&&"CompositionEvent"in window,qt=null;er&&"documentMode"in document&&(qt=document.documentMode);var tr=er&&"TextEvent"in window&&!qt,as=er&&(!pt||qt&&8<qt&&11>=qt),Ir=" ",Rr=!1;function Qa(s,a){switch(s){case"keyup":return sn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Au(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Iu=!1;function k6(s,a){switch(s){case"compositionend":return Au(a);case"keypress":return a.which!==32?null:(Rr=!0,Ir);case"textInput":return s=a.data,s===Ir&&Rr?null:s;default:return null}}function V6(s,a){if(Iu)return s==="compositionend"||!pt&&Qa(s,a)?(s=qh(),Ka=Bh=is=null,Iu=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return as&&a.locale!=="ko"?null:a.data;default:return null}}var L6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nC(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!L6[s.type]:a==="textarea"}function iC(s,a,u,h){xo?ns?ns.push(h):ns=[h]:xo=h,a=qp(a,"onChange"),0<a.length&&(u=new rs("onChange","change",null,u,h),s.push({event:u,listeners:a}))}var Kh=null,Wh=null;function z6(s){UI(s,0)}function tp(s){var a=ki(s);if(qa(a))return s}function rC(s,a){if(s==="change")return a}var sC=!1;if(er){var yv;if(er){var vv="oninput"in document;if(!vv){var oC=document.createElement("div");oC.setAttribute("oninput","return;"),vv=typeof oC.oninput=="function"}yv=vv}else yv=!1;sC=yv&&(!document.documentMode||9<document.documentMode)}function aC(){Kh&&(Kh.detachEvent("onpropertychange",lC),Wh=Kh=null)}function lC(s){if(s.propertyName==="value"&&tp(Wh)){var a=[];iC(a,Wh,s,Ji(s)),Do(z6,a)}}function U6(s,a,u){s==="focusin"?(aC(),Kh=a,Wh=u,Kh.attachEvent("onpropertychange",lC)):s==="focusout"&&aC()}function F6(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return tp(Wh)}function j6(s,a){if(s==="click")return tp(a)}function B6(s,a){if(s==="input"||s==="change")return tp(a)}function q6(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Li=typeof Object.is=="function"?Object.is:q6;function Yh(s,a){if(Li(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var g=u[h];if(!zt.call(a,g)||!Li(s[g],a[g]))return!1}return!0}function uC(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function cC(s,a){var u=uC(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=a&&h>=a)return{node:u,offset:a-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=uC(u)}}function hC(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?hC(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function fC(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=ts(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=ts(s.document)}return a}function Ev(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var $6=er&&"documentMode"in document&&11>=document.documentMode,Ru=null,Tv=null,Zh=null,bv=!1;function dC(s,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;bv||Ru==null||Ru!==ts(h)||(h=Ru,"selectionStart"in h&&Ev(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Zh&&Yh(Zh,h)||(Zh=h,h=qp(Tv,"onSelect"),0<h.length&&(a=new rs("onSelect","select",null,a,u),s.push({event:a,listeners:h}),a.target=Ru)))}function Xa(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var xu={animationend:Xa("Animation","AnimationEnd"),animationiteration:Xa("Animation","AnimationIteration"),animationstart:Xa("Animation","AnimationStart"),transitionrun:Xa("Transition","TransitionRun"),transitionstart:Xa("Transition","TransitionStart"),transitioncancel:Xa("Transition","TransitionCancel"),transitionend:Xa("Transition","TransitionEnd")},wv={},mC={};er&&(mC=document.createElement("div").style,"AnimationEvent"in window||(delete xu.animationend.animation,delete xu.animationiteration.animation,delete xu.animationstart.animation),"TransitionEvent"in window||delete xu.transitionend.transition);function Ja(s){if(wv[s])return wv[s];if(!xu[s])return s;var a=xu[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in mC)return wv[s]=a[u];return s}var pC=Ja("animationend"),gC=Ja("animationiteration"),_C=Ja("animationstart"),H6=Ja("transitionrun"),G6=Ja("transitionstart"),K6=Ja("transitioncancel"),yC=Ja("transitionend"),vC=new Map,Sv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sv.push("scrollEnd");function xr(s,a){vC.set(s,a),Jr(a,[s])}var np=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},nr=[],Du=0,Cv=0;function ip(){for(var s=Du,a=Cv=Du=0;a<s;){var u=nr[a];nr[a++]=null;var h=nr[a];nr[a++]=null;var g=nr[a];nr[a++]=null;var _=nr[a];if(nr[a++]=null,h!==null&&g!==null){var T=h.pending;T===null?g.next=g:(g.next=T.next,T.next=g),h.pending=g}_!==0&&EC(u,g,_)}}function rp(s,a,u,h){nr[Du++]=s,nr[Du++]=a,nr[Du++]=u,nr[Du++]=h,Cv|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function Av(s,a,u,h){return rp(s,a,u,h),sp(s)}function el(s,a){return rp(s,null,null,a),sp(s)}function EC(s,a,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var g=!1,_=s.return;_!==null;)_.childLanes|=u,h=_.alternate,h!==null&&(h.childLanes|=u),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(g=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,g&&a!==null&&(g=31-Bt(u),s=_.hiddenUpdates,h=s[g],h===null?s[g]=[a]:h.push(a),a.lane=u|536870912),_):null}function sp(s){if(50<vf)throw vf=0,k0=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var Nu={};function W6(s,a,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(s,a,u,h){return new W6(s,a,u,h)}function Iv(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ms(s,a){var u=s.alternate;return u===null?(u=zi(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function TC(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function op(s,a,u,h,g,_){var T=0;if(h=s,typeof s=="function")Iv(s)&&(T=1);else if(typeof s=="string")T=Jz(s,u,Te.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=zi(31,u,a,g),s.elementType=P,s.lanes=_,s;case N:return tl(u.children,g,_,a);case O:T=8,g|=24;break;case j:return s=zi(12,u,a,g|2),s.elementType=j,s.lanes=_,s;case H:return s=zi(13,u,a,g),s.elementType=H,s.lanes=_,s;case ie:return s=zi(19,u,a,g),s.elementType=ie,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:T=10;break e;case V:T=9;break e;case K:T=11;break e;case x:T=14;break e;case I:T=16,h=null;break e}T=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=zi(T,u,a,g),a.elementType=s,a.type=h,a.lanes=_,a}function tl(s,a,u,h){return s=zi(7,s,h,a),s.lanes=u,s}function Rv(s,a,u){return s=zi(6,s,null,a),s.lanes=u,s}function bC(s){var a=zi(18,null,null,0);return a.stateNode=s,a}function xv(s,a,u){return a=zi(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var wC=new WeakMap;function ir(s,a){if(typeof s=="object"&&s!==null){var u=wC.get(s);return u!==void 0?u:(a={value:s,source:a,stack:So(a)},wC.set(s,a),a)}return{value:s,source:a,stack:So(a)}}var Pu=[],Ou=0,ap=null,Qh=0,rr=[],sr=0,Mo=null,ls=1,us="";function ks(s,a){Pu[Ou++]=Qh,Pu[Ou++]=ap,ap=s,Qh=a}function SC(s,a,u){rr[sr++]=ls,rr[sr++]=us,rr[sr++]=Mo,Mo=s;var h=ls;s=us;var g=32-Bt(h)-1;h&=~(1<<g),u+=1;var _=32-Bt(a)+g;if(30<_){var T=g-g%5;_=(h&(1<<T)-1).toString(32),h>>=T,g-=T,ls=1<<32-Bt(a)+g|u<<g|h,us=_+s}else ls=1<<_|u<<g|h,us=s}function Dv(s){s.return!==null&&(ks(s,1),SC(s,1,0))}function Nv(s){for(;s===ap;)ap=Pu[--Ou],Pu[Ou]=null,Qh=Pu[--Ou],Pu[Ou]=null;for(;s===Mo;)Mo=rr[--sr],rr[sr]=null,us=rr[--sr],rr[sr]=null,ls=rr[--sr],rr[sr]=null}function CC(s,a){rr[sr++]=ls,rr[sr++]=us,rr[sr++]=Mo,ls=a.id,us=a.overflow,Mo=s}var Hn=null,Ut=null,ut=!1,ko=null,or=!1,Pv=Error(i(519));function Vo(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xh(ir(a,s)),Pv}function AC(s){var a=s.stateNode,u=s.type,h=s.memoizedProps;switch(a[mn]=s,a[Vn]=h,u){case"dialog":rt("cancel",a),rt("close",a);break;case"iframe":case"object":case"embed":rt("load",a);break;case"video":case"audio":for(u=0;u<Tf.length;u++)rt(Tf[u],a);break;case"source":rt("error",a);break;case"img":case"image":case"link":rt("error",a),rt("load",a);break;case"details":rt("toggle",a);break;case"input":rt("invalid",a),Fm(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":rt("invalid",a);break;case"textarea":rt("invalid",a),Io(a,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||h.suppressHydrationWarning===!0||qI(a.textContent,u)?(h.popover!=null&&(rt("beforetoggle",a),rt("toggle",a)),h.onScroll!=null&&rt("scroll",a),h.onScrollEnd!=null&&rt("scrollend",a),h.onClick!=null&&(a.onclick=Sr),a=!0):a=!1,a||Vo(s,!0)}function IC(s){for(Hn=s.return;Hn;)switch(Hn.tag){case 5:case 31:case 13:or=!1;return;case 27:case 3:or=!0;return;default:Hn=Hn.return}}function Mu(s){if(s!==Hn)return!1;if(!ut)return IC(s),ut=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||Z0(s.type,s.memoizedProps)),u=!u),u&&Ut&&Vo(s),IC(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ut=XI(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ut=XI(s)}else a===27?(a=Ut,Zo(s.type)?(s=tE,tE=null,Ut=s):Ut=a):Ut=Hn?lr(s.stateNode.nextSibling):null;return!0}function nl(){Ut=Hn=null,ut=!1}function Ov(){var s=ko;return s!==null&&(bi===null?bi=s:bi.push.apply(bi,s),ko=null),s}function Xh(s){ko===null?ko=[s]:ko.push(s)}var Mv=q(null),il=null,Vs=null;function Lo(s,a,u){_e(Mv,a._currentValue),a._currentValue=u}function Ls(s){s._currentValue=Mv.current,oe(Mv)}function kv(s,a,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===u)break;s=s.return}}function Vv(s,a,u,h){var g=s.child;for(g!==null&&(g.return=s);g!==null;){var _=g.dependencies;if(_!==null){var T=g.child;_=_.firstContext;e:for(;_!==null;){var C=_;_=g;for(var U=0;U<a.length;U++)if(C.context===a[U]){_.lanes|=u,C=_.alternate,C!==null&&(C.lanes|=u),kv(_.return,u,s),h||(T=null);break e}_=C.next}}else if(g.tag===18){if(T=g.return,T===null)throw Error(i(341));T.lanes|=u,_=T.alternate,_!==null&&(_.lanes|=u),kv(T,u,s),T=null}else T=g.child;if(T!==null)T.return=g;else for(T=g;T!==null;){if(T===s){T=null;break}if(g=T.sibling,g!==null){g.return=T.return,T=g;break}T=T.return}g=T}}function ku(s,a,u,h){s=null;for(var g=a,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var T=g.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var C=g.type;Li(g.pendingProps.value,T.value)||(s!==null?s.push(C):s=[C])}}else if(g===He.current){if(T=g.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(s!==null?s.push(Af):s=[Af])}g=g.return}s!==null&&Vv(a,s,u,h),a.flags|=262144}function lp(s){for(s=s.firstContext;s!==null;){if(!Li(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function rl(s){il=s,Vs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Gn(s){return RC(il,s)}function up(s,a){return il===null&&rl(s),RC(s,a)}function RC(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Vs===null){if(s===null)throw Error(i(308));Vs=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Vs=Vs.next=a;return u}var Y6=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},Z6=t.unstable_scheduleCallback,Q6=t.unstable_NormalPriority,_n={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lv(){return{controller:new Y6,data:new Map,refCount:0}}function Jh(s){s.refCount--,s.refCount===0&&Z6(Q6,function(){s.controller.abort()})}var ef=null,zv=0,Vu=0,Lu=null;function X6(s,a){if(ef===null){var u=ef=[];zv=0,Vu=j0(),Lu={status:"pending",value:void 0,then:function(h){u.push(h)}}}return zv++,a.then(xC,xC),a}function xC(){if(--zv===0&&ef!==null){Lu!==null&&(Lu.status="fulfilled");var s=ef;ef=null,Vu=0,Lu=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function J6(s,a){var u=[],h={status:"pending",value:null,reason:null,then:function(g){u.push(g)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var g=0;g<u.length;g++)(0,u[g])(a)},function(g){for(h.status="rejected",h.reason=g,g=0;g<u.length;g++)(0,u[g])(void 0)}),h}var DC=ee.S;ee.S=function(s,a){dI=fe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&X6(s,a),DC!==null&&DC(s,a)};var sl=q(null);function Uv(){var s=sl.current;return s!==null?s:Pt.pooledCache}function cp(s,a){a===null?_e(sl,sl.current):_e(sl,a.pool)}function NC(){var s=Uv();return s===null?null:{parent:_n._currentValue,pool:s}}var zu=Error(i(460)),Fv=Error(i(474)),hp=Error(i(542)),fp={then:function(){}};function PC(s){return s=s.status,s==="fulfilled"||s==="rejected"}function OC(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(Sr,Sr),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,kC(s),s;default:if(typeof a.status=="string")a.then(Sr,Sr);else{if(s=Pt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var g=a;g.status="fulfilled",g.value=h}},function(h){if(a.status==="pending"){var g=a;g.status="rejected",g.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,kC(s),s}throw al=a,zu}}function ol(s){try{var a=s._init;return a(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(al=u,zu):u}}var al=null;function MC(){if(al===null)throw Error(i(459));var s=al;return al=null,s}function kC(s){if(s===zu||s===hp)throw Error(i(483))}var Uu=null,tf=0;function dp(s){var a=tf;return tf+=1,Uu===null&&(Uu=[]),OC(Uu,s,a)}function nf(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function mp(s,a){throw a.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function VC(s){function a(G,$){if(s){var Q=G.deletions;Q===null?(G.deletions=[$],G.flags|=16):Q.push($)}}function u(G,$){if(!s)return null;for(;$!==null;)a(G,$),$=$.sibling;return null}function h(G){for(var $=new Map;G!==null;)G.key!==null?$.set(G.key,G):$.set(G.index,G),G=G.sibling;return $}function g(G,$){return G=Ms(G,$),G.index=0,G.sibling=null,G}function _(G,$,Q){return G.index=Q,s?(Q=G.alternate,Q!==null?(Q=Q.index,Q<$?(G.flags|=67108866,$):Q):(G.flags|=67108866,$)):(G.flags|=1048576,$)}function T(G){return s&&G.alternate===null&&(G.flags|=67108866),G}function C(G,$,Q,le){return $===null||$.tag!==6?($=Rv(Q,G.mode,le),$.return=G,$):($=g($,Q),$.return=G,$)}function U(G,$,Q,le){var Ne=Q.type;return Ne===N?se(G,$,Q.props.children,le,Q.key):$!==null&&($.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===I&&ol(Ne)===$.type)?($=g($,Q.props),nf($,Q),$.return=G,$):($=op(Q.type,Q.key,Q.props,null,G.mode,le),nf($,Q),$.return=G,$)}function X(G,$,Q,le){return $===null||$.tag!==4||$.stateNode.containerInfo!==Q.containerInfo||$.stateNode.implementation!==Q.implementation?($=xv(Q,G.mode,le),$.return=G,$):($=g($,Q.children||[]),$.return=G,$)}function se(G,$,Q,le,Ne){return $===null||$.tag!==7?($=tl(Q,G.mode,le,Ne),$.return=G,$):($=g($,Q),$.return=G,$)}function ue(G,$,Q){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Rv(""+$,G.mode,Q),$.return=G,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return Q=op($.type,$.key,$.props,null,G.mode,Q),nf(Q,$),Q.return=G,Q;case S:return $=xv($,G.mode,Q),$.return=G,$;case I:return $=ol($),ue(G,$,Q)}if(Ke($)||B($))return $=tl($,G.mode,Q,null),$.return=G,$;if(typeof $.then=="function")return ue(G,dp($),Q);if($.$$typeof===k)return ue(G,up(G,$),Q);mp(G,$)}return null}function J(G,$,Q,le){var Ne=$!==null?$.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Ne!==null?null:C(G,$,""+Q,le);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case w:return Q.key===Ne?U(G,$,Q,le):null;case S:return Q.key===Ne?X(G,$,Q,le):null;case I:return Q=ol(Q),J(G,$,Q,le)}if(Ke(Q)||B(Q))return Ne!==null?null:se(G,$,Q,le,null);if(typeof Q.then=="function")return J(G,$,dp(Q),le);if(Q.$$typeof===k)return J(G,$,up(G,Q),le);mp(G,Q)}return null}function ne(G,$,Q,le,Ne){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return G=G.get(Q)||null,C($,G,""+le,Ne);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case w:return G=G.get(le.key===null?Q:le.key)||null,U($,G,le,Ne);case S:return G=G.get(le.key===null?Q:le.key)||null,X($,G,le,Ne);case I:return le=ol(le),ne(G,$,Q,le,Ne)}if(Ke(le)||B(le))return G=G.get(Q)||null,se($,G,le,Ne,null);if(typeof le.then=="function")return ne(G,$,Q,dp(le),Ne);if(le.$$typeof===k)return ne(G,$,Q,up($,le),Ne);mp($,le)}return null}function Se(G,$,Q,le){for(var Ne=null,dt=null,Ie=$,Qe=$=0,at=null;Ie!==null&&Qe<Q.length;Qe++){Ie.index>Qe?(at=Ie,Ie=null):at=Ie.sibling;var mt=J(G,Ie,Q[Qe],le);if(mt===null){Ie===null&&(Ie=at);break}s&&Ie&&mt.alternate===null&&a(G,Ie),$=_(mt,$,Qe),dt===null?Ne=mt:dt.sibling=mt,dt=mt,Ie=at}if(Qe===Q.length)return u(G,Ie),ut&&ks(G,Qe),Ne;if(Ie===null){for(;Qe<Q.length;Qe++)Ie=ue(G,Q[Qe],le),Ie!==null&&($=_(Ie,$,Qe),dt===null?Ne=Ie:dt.sibling=Ie,dt=Ie);return ut&&ks(G,Qe),Ne}for(Ie=h(Ie);Qe<Q.length;Qe++)at=ne(Ie,G,Qe,Q[Qe],le),at!==null&&(s&&at.alternate!==null&&Ie.delete(at.key===null?Qe:at.key),$=_(at,$,Qe),dt===null?Ne=at:dt.sibling=at,dt=at);return s&&Ie.forEach(function(ta){return a(G,ta)}),ut&&ks(G,Qe),Ne}function Ve(G,$,Q,le){if(Q==null)throw Error(i(151));for(var Ne=null,dt=null,Ie=$,Qe=$=0,at=null,mt=Q.next();Ie!==null&&!mt.done;Qe++,mt=Q.next()){Ie.index>Qe?(at=Ie,Ie=null):at=Ie.sibling;var ta=J(G,Ie,mt.value,le);if(ta===null){Ie===null&&(Ie=at);break}s&&Ie&&ta.alternate===null&&a(G,Ie),$=_(ta,$,Qe),dt===null?Ne=ta:dt.sibling=ta,dt=ta,Ie=at}if(mt.done)return u(G,Ie),ut&&ks(G,Qe),Ne;if(Ie===null){for(;!mt.done;Qe++,mt=Q.next())mt=ue(G,mt.value,le),mt!==null&&($=_(mt,$,Qe),dt===null?Ne=mt:dt.sibling=mt,dt=mt);return ut&&ks(G,Qe),Ne}for(Ie=h(Ie);!mt.done;Qe++,mt=Q.next())mt=ne(Ie,G,Qe,mt.value,le),mt!==null&&(s&&mt.alternate!==null&&Ie.delete(mt.key===null?Qe:mt.key),$=_(mt,$,Qe),dt===null?Ne=mt:dt.sibling=mt,dt=mt);return s&&Ie.forEach(function(cU){return a(G,cU)}),ut&&ks(G,Qe),Ne}function Nt(G,$,Q,le){if(typeof Q=="object"&&Q!==null&&Q.type===N&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case w:e:{for(var Ne=Q.key;$!==null;){if($.key===Ne){if(Ne=Q.type,Ne===N){if($.tag===7){u(G,$.sibling),le=g($,Q.props.children),le.return=G,G=le;break e}}else if($.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===I&&ol(Ne)===$.type){u(G,$.sibling),le=g($,Q.props),nf(le,Q),le.return=G,G=le;break e}u(G,$);break}else a(G,$);$=$.sibling}Q.type===N?(le=tl(Q.props.children,G.mode,le,Q.key),le.return=G,G=le):(le=op(Q.type,Q.key,Q.props,null,G.mode,le),nf(le,Q),le.return=G,G=le)}return T(G);case S:e:{for(Ne=Q.key;$!==null;){if($.key===Ne)if($.tag===4&&$.stateNode.containerInfo===Q.containerInfo&&$.stateNode.implementation===Q.implementation){u(G,$.sibling),le=g($,Q.children||[]),le.return=G,G=le;break e}else{u(G,$);break}else a(G,$);$=$.sibling}le=xv(Q,G.mode,le),le.return=G,G=le}return T(G);case I:return Q=ol(Q),Nt(G,$,Q,le)}if(Ke(Q))return Se(G,$,Q,le);if(B(Q)){if(Ne=B(Q),typeof Ne!="function")throw Error(i(150));return Q=Ne.call(Q),Ve(G,$,Q,le)}if(typeof Q.then=="function")return Nt(G,$,dp(Q),le);if(Q.$$typeof===k)return Nt(G,$,up(G,Q),le);mp(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,$!==null&&$.tag===6?(u(G,$.sibling),le=g($,Q),le.return=G,G=le):(u(G,$),le=Rv(Q,G.mode,le),le.return=G,G=le),T(G)):u(G,$)}return function(G,$,Q,le){try{tf=0;var Ne=Nt(G,$,Q,le);return Uu=null,Ne}catch(Ie){if(Ie===zu||Ie===hp)throw Ie;var dt=zi(29,Ie,null,G.mode);return dt.lanes=le,dt.return=G,dt}finally{}}}var ll=VC(!0),LC=VC(!1),zo=!1;function jv(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Bv(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Uo(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Fo(s,a,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(gt&2)!==0){var g=h.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),h.pending=a,a=sp(s),EC(s,null,u),a}return rp(s,h,a,u),sp(s)}function rf(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Dh(s,u)}}function qv(s,a){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var g=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var T={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?g=_=T:_=_.next=T,u=u.next}while(u!==null);_===null?g=_=a:_=_.next=a}else g=_=a;u={baseState:h.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var $v=!1;function sf(){if($v){var s=Lu;if(s!==null)throw s}}function of(s,a,u,h){$v=!1;var g=s.updateQueue;zo=!1;var _=g.firstBaseUpdate,T=g.lastBaseUpdate,C=g.shared.pending;if(C!==null){g.shared.pending=null;var U=C,X=U.next;U.next=null,T===null?_=X:T.next=X,T=U;var se=s.alternate;se!==null&&(se=se.updateQueue,C=se.lastBaseUpdate,C!==T&&(C===null?se.firstBaseUpdate=X:C.next=X,se.lastBaseUpdate=U))}if(_!==null){var ue=g.baseState;T=0,se=X=U=null,C=_;do{var J=C.lane&-536870913,ne=J!==C.lane;if(ne?(ot&J)===J:(h&J)===J){J!==0&&J===Vu&&($v=!0),se!==null&&(se=se.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Se=s,Ve=C;J=a;var Nt=u;switch(Ve.tag){case 1:if(Se=Ve.payload,typeof Se=="function"){ue=Se.call(Nt,ue,J);break e}ue=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ve.payload,J=typeof Se=="function"?Se.call(Nt,ue,J):Se,J==null)break e;ue=y({},ue,J);break e;case 2:zo=!0}}J=C.callback,J!==null&&(s.flags|=64,ne&&(s.flags|=8192),ne=g.callbacks,ne===null?g.callbacks=[J]:ne.push(J))}else ne={lane:J,tag:C.tag,payload:C.payload,callback:C.callback,next:null},se===null?(X=se=ne,U=ue):se=se.next=ne,T|=J;if(C=C.next,C===null){if(C=g.shared.pending,C===null)break;ne=C,C=ne.next,ne.next=null,g.lastBaseUpdate=ne,g.shared.pending=null}}while(!0);se===null&&(U=ue),g.baseState=U,g.firstBaseUpdate=X,g.lastBaseUpdate=se,_===null&&(g.shared.lanes=0),Ho|=T,s.lanes=T,s.memoizedState=ue}}function zC(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function UC(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)zC(u[s],a)}var Fu=q(null),pp=q(0);function FC(s,a){s=Gs,_e(pp,s),_e(Fu,a),Gs=s|a.baseLanes}function Hv(){_e(pp,Gs),_e(Fu,Fu.current)}function Gv(){Gs=pp.current,oe(Fu),oe(pp)}var Ui=q(null),ar=null;function jo(s){var a=s.alternate;_e(on,on.current&1),_e(Ui,s),ar===null&&(a===null||Fu.current!==null||a.memoizedState!==null)&&(ar=s)}function Kv(s){_e(on,on.current),_e(Ui,s),ar===null&&(ar=s)}function jC(s){s.tag===22?(_e(on,on.current),_e(Ui,s),ar===null&&(ar=s)):Bo()}function Bo(){_e(on,on.current),_e(Ui,Ui.current)}function Fi(s){oe(Ui),ar===s&&(ar=null),oe(on)}var on=q(0);function gp(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||J0(u)||eE(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var zs=0,Ze=null,xt=null,yn=null,_p=!1,ju=!1,ul=!1,yp=0,af=0,Bu=null,ez=0;function Jt(){throw Error(i(321))}function Wv(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Li(s[u],a[u]))return!1;return!0}function Yv(s,a,u,h,g,_){return zs=_,Ze=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ee.H=s===null||s.memoizedState===null?SA:c0,ul=!1,_=u(h,g),ul=!1,ju&&(_=qC(a,u,h,g)),BC(s),_}function BC(s){ee.H=cf;var a=xt!==null&&xt.next!==null;if(zs=0,yn=xt=Ze=null,_p=!1,af=0,Bu=null,a)throw Error(i(300));s===null||vn||(s=s.dependencies,s!==null&&lp(s)&&(vn=!0))}function qC(s,a,u,h){Ze=s;var g=0;do{if(ju&&(Bu=null),af=0,ju=!1,25<=g)throw Error(i(301));if(g+=1,yn=xt=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}ee.H=CA,_=a(u,h)}while(ju);return _}function tz(){var s=ee.H,a=s.useState()[0];return a=typeof a.then=="function"?lf(a):a,s=s.useState()[0],(xt!==null?xt.memoizedState:null)!==s&&(Ze.flags|=1024),a}function Zv(){var s=yp!==0;return yp=0,s}function Qv(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function Xv(s){if(_p){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}_p=!1}zs=0,yn=xt=Ze=null,ju=!1,af=yp=0,Bu=null}function ui(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Ze.memoizedState=yn=s:yn=yn.next=s,yn}function an(){if(xt===null){var s=Ze.alternate;s=s!==null?s.memoizedState:null}else s=xt.next;var a=yn===null?Ze.memoizedState:yn.next;if(a!==null)yn=a,xt=s;else{if(s===null)throw Ze.alternate===null?Error(i(467)):Error(i(310));xt=s,s={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},yn===null?Ze.memoizedState=yn=s:yn=yn.next=s}return yn}function vp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function lf(s){var a=af;return af+=1,Bu===null&&(Bu=[]),s=OC(Bu,s,a),a=Ze,(yn===null?a.memoizedState:yn.next)===null&&(a=a.alternate,ee.H=a===null||a.memoizedState===null?SA:c0),s}function Ep(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return lf(s);if(s.$$typeof===k)return Gn(s)}throw Error(i(438,String(s)))}function Jv(s){var a=null,u=Ze.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var h=Ze.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(g){return g.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=vp(),Ze.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),h=0;h<s;h++)u[h]=F;return a.index++,u}function Us(s,a){return typeof a=="function"?a(s):a}function Tp(s){var a=an();return e0(a,xt,s)}function e0(s,a,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var g=s.baseQueue,_=h.pending;if(_!==null){if(g!==null){var T=g.next;g.next=_.next,_.next=T}a.baseQueue=g=_,h.pending=null}if(_=s.baseState,g===null)s.memoizedState=_;else{a=g.next;var C=T=null,U=null,X=a,se=!1;do{var ue=X.lane&-536870913;if(ue!==X.lane?(ot&ue)===ue:(zs&ue)===ue){var J=X.revertLane;if(J===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ue===Vu&&(se=!0);else if((zs&J)===J){X=X.next,J===Vu&&(se=!0);continue}else ue={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(C=U=ue,T=_):U=U.next=ue,Ze.lanes|=J,Ho|=J;ue=X.action,ul&&u(_,ue),_=X.hasEagerState?X.eagerState:u(_,ue)}else J={lane:ue,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(C=U=J,T=_):U=U.next=J,Ze.lanes|=ue,Ho|=ue;X=X.next}while(X!==null&&X!==a);if(U===null?T=_:U.next=C,!Li(_,s.memoizedState)&&(vn=!0,se&&(u=Lu,u!==null)))throw u;s.memoizedState=_,s.baseState=T,s.baseQueue=U,h.lastRenderedState=_}return g===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function t0(s){var a=an(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,g=u.pending,_=a.memoizedState;if(g!==null){u.pending=null;var T=g=g.next;do _=s(_,T.action),T=T.next;while(T!==g);Li(_,a.memoizedState)||(vn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),u.lastRenderedState=_}return[_,h]}function $C(s,a,u){var h=Ze,g=an(),_=ut;if(_){if(u===void 0)throw Error(i(407));u=u()}else u=a();var T=!Li((xt||g).memoizedState,u);if(T&&(g.memoizedState=u,vn=!0),g=g.queue,r0(KC.bind(null,h,g,s),[s]),g.getSnapshot!==a||T||yn!==null&&yn.memoizedState.tag&1){if(h.flags|=2048,qu(9,{destroy:void 0},GC.bind(null,h,g,u,a),null),Pt===null)throw Error(i(349));_||(zs&127)!==0||HC(h,a,u)}return u}function HC(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Ze.updateQueue,a===null?(a=vp(),Ze.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function GC(s,a,u,h){a.value=u,a.getSnapshot=h,WC(a)&&YC(s)}function KC(s,a,u){return u(function(){WC(a)&&YC(s)})}function WC(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Li(s,u)}catch{return!0}}function YC(s){var a=el(s,2);a!==null&&wi(a,s,2)}function n0(s){var a=ui();if(typeof s=="function"){var u=s;if(s=u(),ul){gi(!0);try{u()}finally{gi(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:s},a}function ZC(s,a,u,h){return s.baseState=u,e0(s,xt,typeof h=="function"?h:Us)}function nz(s,a,u,h,g){if(Sp(s))throw Error(i(485));if(s=a.action,s!==null){var _={payload:g,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){_.listeners.push(T)}};ee.T!==null?u(!0):_.isTransition=!1,h(_),u=a.pending,u===null?(_.next=a.pending=_,QC(a,_)):(_.next=u.next,a.pending=u.next=_)}}function QC(s,a){var u=a.action,h=a.payload,g=s.state;if(a.isTransition){var _=ee.T,T={};ee.T=T;try{var C=u(g,h),U=ee.S;U!==null&&U(T,C),XC(s,a,C)}catch(X){i0(s,a,X)}finally{_!==null&&T.types!==null&&(_.types=T.types),ee.T=_}}else try{_=u(g,h),XC(s,a,_)}catch(X){i0(s,a,X)}}function XC(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){JC(s,a,h)},function(h){return i0(s,a,h)}):JC(s,a,u)}function JC(s,a,u){a.status="fulfilled",a.value=u,eA(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,QC(s,u)))}function i0(s,a,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=u,eA(a),a=a.next;while(a!==h)}s.action=null}function eA(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function tA(s,a){return a}function nA(s,a){if(ut){var u=Pt.formState;if(u!==null){e:{var h=Ze;if(ut){if(Ut){t:{for(var g=Ut,_=or;g.nodeType!==8;){if(!_){g=null;break t}if(g=lr(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){Ut=lr(g.nextSibling),h=g.data==="F!";break e}}Vo(h)}h=!1}h&&(a=u[0])}}return u=ui(),u.memoizedState=u.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tA,lastRenderedState:a},u.queue=h,u=TA.bind(null,Ze,h),h.dispatch=u,h=n0(!1),_=u0.bind(null,Ze,!1,h.queue),h=ui(),g={state:a,dispatch:null,action:s,pending:null},h.queue=g,u=nz.bind(null,Ze,g,_,u),g.dispatch=u,h.memoizedState=s,[a,u,!1]}function iA(s){var a=an();return rA(a,xt,s)}function rA(s,a,u){if(a=e0(s,a,tA)[0],s=Tp(Us)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=lf(a)}catch(T){throw T===zu?hp:T}else h=a;a=an();var g=a.queue,_=g.dispatch;return u!==a.memoizedState&&(Ze.flags|=2048,qu(9,{destroy:void 0},iz.bind(null,g,u),null)),[h,_,s]}function iz(s,a){s.action=a}function sA(s){var a=an(),u=xt;if(u!==null)return rA(a,u,s);an(),a=a.memoizedState,u=an();var h=u.queue.dispatch;return u.memoizedState=s,[a,h,!1]}function qu(s,a,u,h){return s={tag:s,create:u,deps:h,inst:a,next:null},a=Ze.updateQueue,a===null&&(a=vp(),Ze.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,a.lastEffect=s),s}function oA(){return an().memoizedState}function bp(s,a,u,h){var g=ui();Ze.flags|=s,g.memoizedState=qu(1|a,{destroy:void 0},u,h===void 0?null:h)}function wp(s,a,u,h){var g=an();h=h===void 0?null:h;var _=g.memoizedState.inst;xt!==null&&h!==null&&Wv(h,xt.memoizedState.deps)?g.memoizedState=qu(a,_,u,h):(Ze.flags|=s,g.memoizedState=qu(1|a,_,u,h))}function aA(s,a){bp(8390656,8,s,a)}function r0(s,a){wp(2048,8,s,a)}function rz(s){Ze.flags|=4;var a=Ze.updateQueue;if(a===null)a=vp(),Ze.updateQueue=a,a.events=[s];else{var u=a.events;u===null?a.events=[s]:u.push(s)}}function lA(s){var a=an().memoizedState;return rz({ref:a,nextImpl:s}),function(){if((gt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function uA(s,a){return wp(4,2,s,a)}function cA(s,a){return wp(4,4,s,a)}function hA(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function fA(s,a,u){u=u!=null?u.concat([s]):null,wp(4,4,hA.bind(null,a,s),u)}function s0(){}function dA(s,a){var u=an();a=a===void 0?null:a;var h=u.memoizedState;return a!==null&&Wv(a,h[1])?h[0]:(u.memoizedState=[s,a],s)}function mA(s,a){var u=an();a=a===void 0?null:a;var h=u.memoizedState;if(a!==null&&Wv(a,h[1]))return h[0];if(h=s(),ul){gi(!0);try{s()}finally{gi(!1)}}return u.memoizedState=[h,a],h}function o0(s,a,u){return u===void 0||(zs&1073741824)!==0&&(ot&261930)===0?s.memoizedState=a:(s.memoizedState=u,s=pI(),Ze.lanes|=s,Ho|=s,u)}function pA(s,a,u,h){return Li(u,a)?u:Fu.current!==null?(s=o0(s,u,h),Li(s,a)||(vn=!0),s):(zs&42)===0||(zs&1073741824)!==0&&(ot&261930)===0?(vn=!0,s.memoizedState=u):(s=pI(),Ze.lanes|=s,Ho|=s,a)}function gA(s,a,u,h,g){var _=he.p;he.p=_!==0&&8>_?_:8;var T=ee.T,C={};ee.T=C,u0(s,!1,a,u);try{var U=g(),X=ee.S;if(X!==null&&X(C,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var se=J6(U,h);uf(s,a,se,qi(s))}else uf(s,a,h,qi(s))}catch(ue){uf(s,a,{then:function(){},status:"rejected",reason:ue},qi())}finally{he.p=_,T!==null&&C.types!==null&&(T.types=C.types),ee.T=T}}function sz(){}function a0(s,a,u,h){if(s.tag!==5)throw Error(i(476));var g=_A(s).queue;gA(s,g,a,ge,u===null?sz:function(){return yA(s),u(h)})}function _A(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:ge},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Us,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function yA(s){var a=_A(s);a.next===null&&(a=s.alternate.memoizedState),uf(s,a.next.queue,{},qi())}function l0(){return Gn(Af)}function vA(){return an().memoizedState}function EA(){return an().memoizedState}function oz(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=qi();s=Uo(u);var h=Fo(a,s,u);h!==null&&(wi(h,a,u),rf(h,a,u)),a={cache:Lv()},s.payload=a;return}a=a.return}}function az(s,a,u){var h=qi();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Sp(s)?bA(a,u):(u=Av(s,a,u,h),u!==null&&(wi(u,s,h),wA(u,a,h)))}function TA(s,a,u){var h=qi();uf(s,a,u,h)}function uf(s,a,u,h){var g={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Sp(s))bA(a,g);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var T=a.lastRenderedState,C=_(T,u);if(g.hasEagerState=!0,g.eagerState=C,Li(C,T))return rp(s,a,g,0),Pt===null&&ip(),!1}catch{}finally{}if(u=Av(s,a,g,h),u!==null)return wi(u,s,h),wA(u,a,h),!0}return!1}function u0(s,a,u,h){if(h={lane:2,revertLane:j0(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Sp(s)){if(a)throw Error(i(479))}else a=Av(s,u,h,2),a!==null&&wi(a,s,2)}function Sp(s){var a=s.alternate;return s===Ze||a!==null&&a===Ze}function bA(s,a){ju=_p=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function wA(s,a,u){if((u&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,Dh(s,u)}}var cf={readContext:Gn,use:Ep,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt};cf.useEffectEvent=Jt;var SA={readContext:Gn,use:Ep,useCallback:function(s,a){return ui().memoizedState=[s,a===void 0?null:a],s},useContext:Gn,useEffect:aA,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,bp(4194308,4,hA.bind(null,a,s),u)},useLayoutEffect:function(s,a){return bp(4194308,4,s,a)},useInsertionEffect:function(s,a){bp(4,2,s,a)},useMemo:function(s,a){var u=ui();a=a===void 0?null:a;var h=s();if(ul){gi(!0);try{s()}finally{gi(!1)}}return u.memoizedState=[h,a],h},useReducer:function(s,a,u){var h=ui();if(u!==void 0){var g=u(a);if(ul){gi(!0);try{u(a)}finally{gi(!1)}}}else g=a;return h.memoizedState=h.baseState=g,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:g},h.queue=s,s=s.dispatch=az.bind(null,Ze,s),[h.memoizedState,s]},useRef:function(s){var a=ui();return s={current:s},a.memoizedState=s},useState:function(s){s=n0(s);var a=s.queue,u=TA.bind(null,Ze,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:s0,useDeferredValue:function(s,a){var u=ui();return o0(u,s,a)},useTransition:function(){var s=n0(!1);return s=gA.bind(null,Ze,s.queue,!0,!1),ui().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var h=Ze,g=ui();if(ut){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),Pt===null)throw Error(i(349));(ot&127)!==0||HC(h,a,u)}g.memoizedState=u;var _={value:u,getSnapshot:a};return g.queue=_,aA(KC.bind(null,h,_,s),[s]),h.flags|=2048,qu(9,{destroy:void 0},GC.bind(null,h,_,u,a),null),u},useId:function(){var s=ui(),a=Pt.identifierPrefix;if(ut){var u=us,h=ls;u=(h&~(1<<32-Bt(h)-1)).toString(32)+u,a="_"+a+"R_"+u,u=yp++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=ez++,a="_"+a+"r_"+u.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:l0,useFormState:nA,useActionState:nA,useOptimistic:function(s){var a=ui();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=u0.bind(null,Ze,!0,u),u.dispatch=a,[s,a]},useMemoCache:Jv,useCacheRefresh:function(){return ui().memoizedState=oz.bind(null,Ze)},useEffectEvent:function(s){var a=ui(),u={impl:s};return a.memoizedState=u,function(){if((gt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},c0={readContext:Gn,use:Ep,useCallback:dA,useContext:Gn,useEffect:r0,useImperativeHandle:fA,useInsertionEffect:uA,useLayoutEffect:cA,useMemo:mA,useReducer:Tp,useRef:oA,useState:function(){return Tp(Us)},useDebugValue:s0,useDeferredValue:function(s,a){var u=an();return pA(u,xt.memoizedState,s,a)},useTransition:function(){var s=Tp(Us)[0],a=an().memoizedState;return[typeof s=="boolean"?s:lf(s),a]},useSyncExternalStore:$C,useId:vA,useHostTransitionStatus:l0,useFormState:iA,useActionState:iA,useOptimistic:function(s,a){var u=an();return ZC(u,xt,s,a)},useMemoCache:Jv,useCacheRefresh:EA};c0.useEffectEvent=lA;var CA={readContext:Gn,use:Ep,useCallback:dA,useContext:Gn,useEffect:r0,useImperativeHandle:fA,useInsertionEffect:uA,useLayoutEffect:cA,useMemo:mA,useReducer:t0,useRef:oA,useState:function(){return t0(Us)},useDebugValue:s0,useDeferredValue:function(s,a){var u=an();return xt===null?o0(u,s,a):pA(u,xt.memoizedState,s,a)},useTransition:function(){var s=t0(Us)[0],a=an().memoizedState;return[typeof s=="boolean"?s:lf(s),a]},useSyncExternalStore:$C,useId:vA,useHostTransitionStatus:l0,useFormState:sA,useActionState:sA,useOptimistic:function(s,a){var u=an();return xt!==null?ZC(u,xt,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:Jv,useCacheRefresh:EA};CA.useEffectEvent=lA;function h0(s,a,u,h){a=s.memoizedState,u=u(h,a),u=u==null?a:y({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var f0={enqueueSetState:function(s,a,u){s=s._reactInternals;var h=qi(),g=Uo(h);g.payload=a,u!=null&&(g.callback=u),a=Fo(s,g,h),a!==null&&(wi(a,s,h),rf(a,s,h))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var h=qi(),g=Uo(h);g.tag=1,g.payload=a,u!=null&&(g.callback=u),a=Fo(s,g,h),a!==null&&(wi(a,s,h),rf(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=qi(),h=Uo(u);h.tag=2,a!=null&&(h.callback=a),a=Fo(s,h,u),a!==null&&(wi(a,s,u),rf(a,s,u))}};function AA(s,a,u,h,g,_,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,_,T):a.prototype&&a.prototype.isPureReactComponent?!Yh(u,h)||!Yh(g,_):!0}function IA(s,a,u,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==s&&f0.enqueueReplaceState(a,a.state,null)}function cl(s,a){var u=a;if("ref"in a){u={};for(var h in a)h!=="ref"&&(u[h]=a[h])}if(s=s.defaultProps){u===a&&(u=y({},u));for(var g in s)u[g]===void 0&&(u[g]=s[g])}return u}function RA(s){np(s)}function xA(s){console.error(s)}function DA(s){np(s)}function Cp(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function NA(s,a,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function d0(s,a,u){return u=Uo(u),u.tag=3,u.payload={element:null},u.callback=function(){Cp(s,a)},u}function PA(s){return s=Uo(s),s.tag=3,s}function OA(s,a,u,h){var g=u.type.getDerivedStateFromError;if(typeof g=="function"){var _=h.value;s.payload=function(){return g(_)},s.callback=function(){NA(a,u,h)}}var T=u.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){NA(a,u,h),typeof g!="function"&&(Go===null?Go=new Set([this]):Go.add(this));var C=h.stack;this.componentDidCatch(h.value,{componentStack:C!==null?C:""})})}function lz(s,a,u,h,g){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=u.alternate,a!==null&&ku(a,u,g,!0),u=Ui.current,u!==null){switch(u.tag){case 31:case 13:return ar===null?Lp():u.alternate===null&&en===0&&(en=3),u.flags&=-257,u.flags|=65536,u.lanes=g,h===fp?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([h]):a.add(h),z0(s,h,g)),!1;case 22:return u.flags|=65536,h===fp?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([h]):u.add(h)),z0(s,h,g)),!1}throw Error(i(435,u.tag))}return z0(s,h,g),Lp(),!1}if(ut)return a=Ui.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=g,h!==Pv&&(s=Error(i(422),{cause:h}),Xh(ir(s,u)))):(h!==Pv&&(a=Error(i(423),{cause:h}),Xh(ir(a,u))),s=s.current.alternate,s.flags|=65536,g&=-g,s.lanes|=g,h=ir(h,u),g=d0(s.stateNode,h,g),qv(s,g),en!==4&&(en=2)),!1;var _=Error(i(520),{cause:h});if(_=ir(_,u),yf===null?yf=[_]:yf.push(_),en!==4&&(en=2),a===null)return!0;h=ir(h,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=g&-g,u.lanes|=s,s=d0(u.stateNode,h,s),qv(u,s),!1;case 1:if(a=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Go===null||!Go.has(_))))return u.flags|=65536,g&=-g,u.lanes|=g,g=PA(g),OA(g,s,u,h),qv(u,g),!1}u=u.return}while(u!==null);return!1}var m0=Error(i(461)),vn=!1;function Kn(s,a,u,h){a.child=s===null?LC(a,null,u,h):ll(a,s.child,u,h)}function MA(s,a,u,h,g){u=u.render;var _=a.ref;if("ref"in h){var T={};for(var C in h)C!=="ref"&&(T[C]=h[C])}else T=h;return rl(a),h=Yv(s,a,u,T,_,g),C=Zv(),s!==null&&!vn?(Qv(s,a,g),Fs(s,a,g)):(ut&&C&&Dv(a),a.flags|=1,Kn(s,a,h,g),a.child)}function kA(s,a,u,h,g){if(s===null){var _=u.type;return typeof _=="function"&&!Iv(_)&&_.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=_,VA(s,a,_,h,g)):(s=op(u.type,null,h,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(_=s.child,!b0(s,g)){var T=_.memoizedProps;if(u=u.compare,u=u!==null?u:Yh,u(T,h)&&s.ref===a.ref)return Fs(s,a,g)}return a.flags|=1,s=Ms(_,h),s.ref=a.ref,s.return=a,a.child=s}function VA(s,a,u,h,g){if(s!==null){var _=s.memoizedProps;if(Yh(_,h)&&s.ref===a.ref)if(vn=!1,a.pendingProps=h=_,b0(s,g))(s.flags&131072)!==0&&(vn=!0);else return a.lanes=s.lanes,Fs(s,a,g)}return p0(s,a,u,h,g)}function LA(s,a,u,h){var g=h.children,_=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,s!==null){for(h=a.child=s.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;h=g&~_}else h=0,a.child=null;return zA(s,a,_,u,h)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&cp(a,_!==null?_.cachePool:null),_!==null?FC(a,_):Hv(),jC(a);else return h=a.lanes=536870912,zA(s,a,_!==null?_.baseLanes|u:u,u,h)}else _!==null?(cp(a,_.cachePool),FC(a,_),Bo(),a.memoizedState=null):(s!==null&&cp(a,null),Hv(),Bo());return Kn(s,a,g,u),a.child}function hf(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function zA(s,a,u,h,g){var _=Uv();return _=_===null?null:{parent:_n._currentValue,pool:_},a.memoizedState={baseLanes:u,cachePool:_},s!==null&&cp(a,null),Hv(),jC(a),s!==null&&ku(s,a,h,!0),a.childLanes=g,null}function Ap(s,a){return a=Rp({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function UA(s,a,u){return ll(a,s.child,null,u),s=Ap(a,a.pendingProps),s.flags|=2,Fi(a),a.memoizedState=null,s}function uz(s,a,u){var h=a.pendingProps,g=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(ut){if(h.mode==="hidden")return s=Ap(a,h),a.lanes=536870912,hf(null,s);if(Kv(a),(s=Ut)?(s=QI(s,or),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Mo!==null?{id:ls,overflow:us}:null,retryLane:536870912,hydrationErrors:null},u=bC(s),u.return=a,a.child=u,Hn=a,Ut=null)):s=null,s===null)throw Vo(a);return a.lanes=536870912,null}return Ap(a,h)}var _=s.memoizedState;if(_!==null){var T=_.dehydrated;if(Kv(a),g)if(a.flags&256)a.flags&=-257,a=UA(s,a,u);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(vn||ku(s,a,u,!1),g=(u&s.childLanes)!==0,vn||g){if(h=Pt,h!==null&&(T=Nh(h,u),T!==0&&T!==_.retryLane))throw _.retryLane=T,el(s,T),wi(h,s,T),m0;Lp(),a=UA(s,a,u)}else s=_.treeContext,Ut=lr(T.nextSibling),Hn=a,ut=!0,ko=null,or=!1,s!==null&&CC(a,s),a=Ap(a,h),a.flags|=4096;return a}return s=Ms(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function Ip(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function p0(s,a,u,h,g){return rl(a),u=Yv(s,a,u,h,void 0,g),h=Zv(),s!==null&&!vn?(Qv(s,a,g),Fs(s,a,g)):(ut&&h&&Dv(a),a.flags|=1,Kn(s,a,u,g),a.child)}function FA(s,a,u,h,g,_){return rl(a),a.updateQueue=null,u=qC(a,h,u,g),BC(s),h=Zv(),s!==null&&!vn?(Qv(s,a,_),Fs(s,a,_)):(ut&&h&&Dv(a),a.flags|=1,Kn(s,a,u,_),a.child)}function jA(s,a,u,h,g){if(rl(a),a.stateNode===null){var _=Nu,T=u.contextType;typeof T=="object"&&T!==null&&(_=Gn(T)),_=new u(h,_),a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=f0,a.stateNode=_,_._reactInternals=a,_=a.stateNode,_.props=h,_.state=a.memoizedState,_.refs={},jv(a),T=u.contextType,_.context=typeof T=="object"&&T!==null?Gn(T):Nu,_.state=a.memoizedState,T=u.getDerivedStateFromProps,typeof T=="function"&&(h0(a,u,T,h),_.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(T=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),T!==_.state&&f0.enqueueReplaceState(_,_.state,null),of(a,h,_,g),sf(),_.state=a.memoizedState),typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){_=a.stateNode;var C=a.memoizedProps,U=cl(u,C);_.props=U;var X=_.context,se=u.contextType;T=Nu,typeof se=="object"&&se!==null&&(T=Gn(se));var ue=u.getDerivedStateFromProps;se=typeof ue=="function"||typeof _.getSnapshotBeforeUpdate=="function",C=a.pendingProps!==C,se||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C||X!==T)&&IA(a,_,h,T),zo=!1;var J=a.memoizedState;_.state=J,of(a,h,_,g),sf(),X=a.memoizedState,C||J!==X||zo?(typeof ue=="function"&&(h0(a,u,ue,h),X=a.memoizedState),(U=zo||AA(a,u,U,h,J,X,T))?(se||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(a.flags|=4194308)):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=X),_.props=h,_.state=X,_.context=T,h=U):(typeof _.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{_=a.stateNode,Bv(s,a),T=a.memoizedProps,se=cl(u,T),_.props=se,ue=a.pendingProps,J=_.context,X=u.contextType,U=Nu,typeof X=="object"&&X!==null&&(U=Gn(X)),C=u.getDerivedStateFromProps,(X=typeof C=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==ue||J!==U)&&IA(a,_,h,U),zo=!1,J=a.memoizedState,_.state=J,of(a,h,_,g),sf();var ne=a.memoizedState;T!==ue||J!==ne||zo||s!==null&&s.dependencies!==null&&lp(s.dependencies)?(typeof C=="function"&&(h0(a,u,C,h),ne=a.memoizedState),(se=zo||AA(a,u,se,h,J,ne,U)||s!==null&&s.dependencies!==null&&lp(s.dependencies))?(X||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(h,ne,U),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(h,ne,U)),typeof _.componentDidUpdate=="function"&&(a.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===s.memoizedProps&&J===s.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&J===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ne),_.props=h,_.state=ne,_.context=U,h=se):(typeof _.componentDidUpdate!="function"||T===s.memoizedProps&&J===s.memoizedState||(a.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&J===s.memoizedState||(a.flags|=1024),h=!1)}return _=h,Ip(s,a),h=(a.flags&128)!==0,_||h?(_=a.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:_.render(),a.flags|=1,s!==null&&h?(a.child=ll(a,s.child,null,g),a.child=ll(a,null,u,g)):Kn(s,a,u,g),a.memoizedState=_.state,s=a.child):s=Fs(s,a,g),s}function BA(s,a,u,h){return nl(),a.flags|=256,Kn(s,a,u,h),a.child}var g0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _0(s){return{baseLanes:s,cachePool:NC()}}function y0(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=Bi),s}function qA(s,a,u){var h=a.pendingProps,g=!1,_=(a.flags&128)!==0,T;if((T=_)||(T=s!==null&&s.memoizedState===null?!1:(on.current&2)!==0),T&&(g=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,s===null){if(ut){if(g?jo(a):Bo(),(s=Ut)?(s=QI(s,or),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:Mo!==null?{id:ls,overflow:us}:null,retryLane:536870912,hydrationErrors:null},u=bC(s),u.return=a,a.child=u,Hn=a,Ut=null)):s=null,s===null)throw Vo(a);return eE(s)?a.lanes=32:a.lanes=536870912,null}var C=h.children;return h=h.fallback,g?(Bo(),g=a.mode,C=Rp({mode:"hidden",children:C},g),h=tl(h,g,u,null),C.return=a,h.return=a,C.sibling=h,a.child=C,h=a.child,h.memoizedState=_0(u),h.childLanes=y0(s,T,u),a.memoizedState=g0,hf(null,h)):(jo(a),v0(a,C))}var U=s.memoizedState;if(U!==null&&(C=U.dehydrated,C!==null)){if(_)a.flags&256?(jo(a),a.flags&=-257,a=E0(s,a,u)):a.memoizedState!==null?(Bo(),a.child=s.child,a.flags|=128,a=null):(Bo(),C=h.fallback,g=a.mode,h=Rp({mode:"visible",children:h.children},g),C=tl(C,g,u,null),C.flags|=2,h.return=a,C.return=a,h.sibling=C,a.child=h,ll(a,s.child,null,u),h=a.child,h.memoizedState=_0(u),h.childLanes=y0(s,T,u),a.memoizedState=g0,a=hf(null,h));else if(jo(a),eE(C)){if(T=C.nextSibling&&C.nextSibling.dataset,T)var X=T.dgst;T=X,h=Error(i(419)),h.stack="",h.digest=T,Xh({value:h,source:null,stack:null}),a=E0(s,a,u)}else if(vn||ku(s,a,u,!1),T=(u&s.childLanes)!==0,vn||T){if(T=Pt,T!==null&&(h=Nh(T,u),h!==0&&h!==U.retryLane))throw U.retryLane=h,el(s,h),wi(T,s,h),m0;J0(C)||Lp(),a=E0(s,a,u)}else J0(C)?(a.flags|=192,a.child=s.child,a=null):(s=U.treeContext,Ut=lr(C.nextSibling),Hn=a,ut=!0,ko=null,or=!1,s!==null&&CC(a,s),a=v0(a,h.children),a.flags|=4096);return a}return g?(Bo(),C=h.fallback,g=a.mode,U=s.child,X=U.sibling,h=Ms(U,{mode:"hidden",children:h.children}),h.subtreeFlags=U.subtreeFlags&65011712,X!==null?C=Ms(X,C):(C=tl(C,g,u,null),C.flags|=2),C.return=a,h.return=a,h.sibling=C,a.child=h,hf(null,h),h=a.child,C=s.child.memoizedState,C===null?C=_0(u):(g=C.cachePool,g!==null?(U=_n._currentValue,g=g.parent!==U?{parent:U,pool:U}:g):g=NC(),C={baseLanes:C.baseLanes|u,cachePool:g}),h.memoizedState=C,h.childLanes=y0(s,T,u),a.memoizedState=g0,hf(s.child,h)):(jo(a),u=s.child,s=u.sibling,u=Ms(u,{mode:"visible",children:h.children}),u.return=a,u.sibling=null,s!==null&&(T=a.deletions,T===null?(a.deletions=[s],a.flags|=16):T.push(s)),a.child=u,a.memoizedState=null,u)}function v0(s,a){return a=Rp({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function Rp(s,a){return s=zi(22,s,null,a),s.lanes=0,s}function E0(s,a,u){return ll(a,s.child,null,u),s=v0(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function $A(s,a,u){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),kv(s.return,a,u)}function T0(s,a,u,h,g,_){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:g,treeForkCount:_}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=h,T.tail=u,T.tailMode=g,T.treeForkCount=_)}function HA(s,a,u){var h=a.pendingProps,g=h.revealOrder,_=h.tail;h=h.children;var T=on.current,C=(T&2)!==0;if(C?(T=T&1|2,a.flags|=128):T&=1,_e(on,T),Kn(s,a,h,u),h=ut?Qh:0,!C&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&$A(s,u,a);else if(s.tag===19)$A(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(g){case"forwards":for(u=a.child,g=null;u!==null;)s=u.alternate,s!==null&&gp(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),T0(a,!1,g,u,_,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&gp(s)===null){a.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}T0(a,!0,u,null,_,h);break;case"together":T0(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function Fs(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),Ho|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(ku(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,u=Ms(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=Ms(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function b0(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&lp(s)))}function cz(s,a,u){switch(a.tag){case 3:Vt(a,a.stateNode.containerInfo),Lo(a,_n,s.memoizedState.cache),nl();break;case 27:case 5:kn(a);break;case 4:Vt(a,a.stateNode.containerInfo);break;case 10:Lo(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Kv(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(jo(a),a.flags|=128,null):(u&a.child.childLanes)!==0?qA(s,a,u):(jo(a),s=Fs(s,a,u),s!==null?s.sibling:null);jo(a);break;case 19:var g=(s.flags&128)!==0;if(h=(u&a.childLanes)!==0,h||(ku(s,a,u,!1),h=(u&a.childLanes)!==0),g){if(h)return HA(s,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),_e(on,on.current),h)break;return null;case 22:return a.lanes=0,LA(s,a,u,a.pendingProps);case 24:Lo(a,_n,s.memoizedState.cache)}return Fs(s,a,u)}function GA(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)vn=!0;else{if(!b0(s,u)&&(a.flags&128)===0)return vn=!1,cz(s,a,u);vn=(s.flags&131072)!==0}else vn=!1,ut&&(a.flags&1048576)!==0&&SC(a,Qh,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(s=ol(a.elementType),a.type=s,typeof s=="function")Iv(s)?(h=cl(s,h),a.tag=1,a=jA(null,a,s,h,u)):(a.tag=0,a=p0(null,a,s,h,u));else{if(s!=null){var g=s.$$typeof;if(g===K){a.tag=11,a=MA(null,a,s,h,u);break e}else if(g===x){a.tag=14,a=kA(null,a,s,h,u);break e}}throw a=Pe(s)||s,Error(i(306,a,""))}}return a;case 0:return p0(s,a,a.type,a.pendingProps,u);case 1:return h=a.type,g=cl(h,a.pendingProps),jA(s,a,h,g,u);case 3:e:{if(Vt(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var _=a.memoizedState;g=_.element,Bv(s,a),of(a,h,null,u);var T=a.memoizedState;if(h=T.cache,Lo(a,_n,h),h!==_.cache&&Vv(a,[_n],u,!0),sf(),h=T.element,_.isDehydrated)if(_={element:h,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){a=BA(s,a,h,u);break e}else if(h!==g){g=ir(Error(i(424)),a),Xh(g),a=BA(s,a,h,u);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ut=lr(s.firstChild),Hn=a,ut=!0,ko=null,or=!0,u=LC(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(nl(),h===g){a=Fs(s,a,u);break e}Kn(s,a,h,u)}a=a.child}return a;case 26:return Ip(s,a),s===null?(u=iR(a.type,null,a.pendingProps,null))?a.memoizedState=u:ut||(u=a.type,s=a.pendingProps,h=$p(Ue.current).createElement(u),h[mn]=a,h[Vn]=s,Wn(h,u,s),pn(h),a.stateNode=h):a.memoizedState=iR(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return kn(a),s===null&&ut&&(h=a.stateNode=eR(a.type,a.pendingProps,Ue.current),Hn=a,or=!0,g=Ut,Zo(a.type)?(tE=g,Ut=lr(h.firstChild)):Ut=g),Kn(s,a,a.pendingProps.children,u),Ip(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&ut&&((g=h=Ut)&&(h=Fz(h,a.type,a.pendingProps,or),h!==null?(a.stateNode=h,Hn=a,Ut=lr(h.firstChild),or=!1,g=!0):g=!1),g||Vo(a)),kn(a),g=a.type,_=a.pendingProps,T=s!==null?s.memoizedProps:null,h=_.children,Z0(g,_)?h=null:T!==null&&Z0(g,T)&&(a.flags|=32),a.memoizedState!==null&&(g=Yv(s,a,tz,null,null,u),Af._currentValue=g),Ip(s,a),Kn(s,a,h,u),a.child;case 6:return s===null&&ut&&((s=u=Ut)&&(u=jz(u,a.pendingProps,or),u!==null?(a.stateNode=u,Hn=a,Ut=null,s=!0):s=!1),s||Vo(a)),null;case 13:return qA(s,a,u);case 4:return Vt(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=ll(a,null,h,u):Kn(s,a,h,u),a.child;case 11:return MA(s,a,a.type,a.pendingProps,u);case 7:return Kn(s,a,a.pendingProps,u),a.child;case 8:return Kn(s,a,a.pendingProps.children,u),a.child;case 12:return Kn(s,a,a.pendingProps.children,u),a.child;case 10:return h=a.pendingProps,Lo(a,a.type,h.value),Kn(s,a,h.children,u),a.child;case 9:return g=a.type._context,h=a.pendingProps.children,rl(a),g=Gn(g),h=h(g),a.flags|=1,Kn(s,a,h,u),a.child;case 14:return kA(s,a,a.type,a.pendingProps,u);case 15:return VA(s,a,a.type,a.pendingProps,u);case 19:return HA(s,a,u);case 31:return uz(s,a,u);case 22:return LA(s,a,u,a.pendingProps);case 24:return rl(a),h=Gn(_n),s===null?(g=Uv(),g===null&&(g=Pt,_=Lv(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=u),g=_),a.memoizedState={parent:h,cache:g},jv(a),Lo(a,_n,g)):((s.lanes&u)!==0&&(Bv(s,a),of(a,null,null,u),sf()),g=s.memoizedState,_=a.memoizedState,g.parent!==h?(g={parent:h,cache:h},a.memoizedState=g,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=g),Lo(a,_n,h)):(h=_.cache,Lo(a,_n,h),h!==g.cache&&Vv(a,[_n],u,!0))),Kn(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function js(s){s.flags|=4}function w0(s,a,u,h,g){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(g&335544128)===g)if(s.stateNode.complete)s.flags|=8192;else if(vI())s.flags|=8192;else throw al=fp,Fv}else s.flags&=-16777217}function KA(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!lR(a))if(vI())s.flags|=8192;else throw al=fp,Fv}function xp(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?km():536870912,s.lanes|=a,Ku|=a)}function ff(s,a){if(!ut)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Ft(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(a)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags&65011712,h|=g.flags&65011712,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,h|=g.subtreeFlags,h|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=h,s.childLanes=u,a}function hz(s,a,u){var h=a.pendingProps;switch(Nv(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(a),null;case 1:return Ft(a),null;case 3:return u=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),Ls(_n),ct(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Mu(a)?js(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ov())),Ft(a),null;case 26:var g=a.type,_=a.memoizedState;return s===null?(js(a),_!==null?(Ft(a),KA(a,_)):(Ft(a),w0(a,g,null,h,u))):_?_!==s.memoizedState?(js(a),Ft(a),KA(a,_)):(Ft(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&js(a),Ft(a),w0(a,g,s,h,u)),null;case 27:if(Pi(a),u=Ue.current,g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&js(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return Ft(a),null}s=Te.current,Mu(a)?AC(a):(s=eR(g,h,u),a.stateNode=s,js(a))}return Ft(a),null;case 5:if(Pi(a),g=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&js(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return Ft(a),null}if(_=Te.current,Mu(a))AC(a);else{var T=$p(Ue.current);switch(_){case 1:_=T.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=T.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=T.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=T.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof h.is=="string"?T.createElement("select",{is:h.is}):T.createElement("select"),h.multiple?_.multiple=!0:h.size&&(_.size=h.size);break;default:_=typeof h.is=="string"?T.createElement(g,{is:h.is}):T.createElement(g)}}_[mn]=a,_[Vn]=h;e:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)_.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break e;for(;T.sibling===null;){if(T.return===null||T.return===a)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=_;e:switch(Wn(_,g,h),g){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&js(a)}}return Ft(a),w0(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,u),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&js(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=Ue.current,Mu(a)){if(s=a.stateNode,u=a.memoizedProps,h=null,g=Hn,g!==null)switch(g.tag){case 27:case 5:h=g.memoizedProps}s[mn]=a,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||qI(s.nodeValue,u)),s||Vo(a,!0)}else s=$p(s).createTextNode(h),s[mn]=a,a.stateNode=s}return Ft(a),null;case 31:if(u=a.memoizedState,s===null||s.memoizedState!==null){if(h=Mu(a),u!==null){if(s===null){if(!h)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[mn]=a}else nl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ft(a),s=!1}else u=Ov(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return a.flags&256?(Fi(a),a):(Fi(a),null);if((a.flags&128)!==0)throw Error(i(558))}return Ft(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(g=Mu(a),h!==null&&h.dehydrated!==null){if(s===null){if(!g)throw Error(i(318));if(g=a.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(i(317));g[mn]=a}else nl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ft(a),g=!1}else g=Ov(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=g),g=!0;if(!g)return a.flags&256?(Fi(a),a):(Fi(a),null)}return Fi(a),(a.flags&128)!==0?(a.lanes=u,a):(u=h!==null,s=s!==null&&s.memoizedState!==null,u&&(h=a.child,g=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(g=h.alternate.memoizedState.cachePool.pool),_=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(_=h.memoizedState.cachePool.pool),_!==g&&(h.flags|=2048)),u!==s&&u&&(a.child.flags|=8192),xp(a,a.updateQueue),Ft(a),null);case 4:return ct(),s===null&&H0(a.stateNode.containerInfo),Ft(a),null;case 10:return Ls(a.type),Ft(a),null;case 19:if(oe(on),h=a.memoizedState,h===null)return Ft(a),null;if(g=(a.flags&128)!==0,_=h.rendering,_===null)if(g)ff(h,!1);else{if(en!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(_=gp(s),_!==null){for(a.flags|=128,ff(h,!1),s=_.updateQueue,a.updateQueue=s,xp(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)TC(u,s),u=u.sibling;return _e(on,on.current&1|2),ut&&ks(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&fe()>Mp&&(a.flags|=128,g=!0,ff(h,!1),a.lanes=4194304)}else{if(!g)if(s=gp(_),s!==null){if(a.flags|=128,g=!0,s=s.updateQueue,a.updateQueue=s,xp(a,s),ff(h,!0),h.tail===null&&h.tailMode==="hidden"&&!_.alternate&&!ut)return Ft(a),null}else 2*fe()-h.renderingStartTime>Mp&&u!==536870912&&(a.flags|=128,g=!0,ff(h,!1),a.lanes=4194304);h.isBackwards?(_.sibling=a.child,a.child=_):(s=h.last,s!==null?s.sibling=_:a.child=_,h.last=_)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=fe(),s.sibling=null,u=on.current,_e(on,g?u&1|2:u&1),ut&&ks(a,h.treeForkCount),s):(Ft(a),null);case 22:case 23:return Fi(a),Gv(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(u&536870912)!==0&&(a.flags&128)===0&&(Ft(a),a.subtreeFlags&6&&(a.flags|=8192)):Ft(a),u=a.updateQueue,u!==null&&xp(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==u&&(a.flags|=2048),s!==null&&oe(sl),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Ls(_n),Ft(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function fz(s,a){switch(Nv(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ls(_n),ct(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return Pi(a),null;case 31:if(a.memoizedState!==null){if(Fi(a),a.alternate===null)throw Error(i(340));nl()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Fi(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));nl()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return oe(on),null;case 4:return ct(),null;case 10:return Ls(a.type),null;case 22:case 23:return Fi(a),Gv(),s!==null&&oe(sl),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return Ls(_n),null;case 25:return null;default:return null}}function WA(s,a){switch(Nv(a),a.tag){case 3:Ls(_n),ct();break;case 26:case 27:case 5:Pi(a);break;case 4:ct();break;case 31:a.memoizedState!==null&&Fi(a);break;case 13:Fi(a);break;case 19:oe(on);break;case 10:Ls(a.type);break;case 22:case 23:Fi(a),Gv(),s!==null&&oe(sl);break;case 24:Ls(_n)}}function df(s,a){try{var u=a.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var g=h.next;u=g;do{if((u.tag&s)===s){h=void 0;var _=u.create,T=u.inst;h=_(),T.destroy=h}u=u.next}while(u!==g)}}catch(C){wt(a,a.return,C)}}function qo(s,a,u){try{var h=a.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var _=g.next;h=_;do{if((h.tag&s)===s){var T=h.inst,C=T.destroy;if(C!==void 0){T.destroy=void 0,g=a;var U=u,X=C;try{X()}catch(se){wt(g,U,se)}}}h=h.next}while(h!==_)}}catch(se){wt(a,a.return,se)}}function YA(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{UC(a,u)}catch(h){wt(s,s.return,h)}}}function ZA(s,a,u){u.props=cl(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){wt(s,a,h)}}function mf(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(g){wt(s,a,g)}}function cs(s,a){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(g){wt(s,a,g)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(g){wt(s,a,g)}else u.current=null}function QA(s){var a=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(g){wt(s,s.return,g)}}function S0(s,a,u){try{var h=s.stateNode;Mz(h,s.type,u,a),h[Vn]=a}catch(g){wt(s,s.return,g)}}function XA(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Zo(s.type)||s.tag===4}function C0(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||XA(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Zo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function A0(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Sr));else if(h!==4&&(h===27&&Zo(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(A0(s,a,u),s=s.sibling;s!==null;)A0(s,a,u),s=s.sibling}function Dp(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(h!==4&&(h===27&&Zo(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Dp(s,a,u),s=s.sibling;s!==null;)Dp(s,a,u),s=s.sibling}function JA(s){var a=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,g=a.attributes;g.length;)a.removeAttributeNode(g[0]);Wn(a,h,u),a[mn]=s,a[Vn]=u}catch(_){wt(s,s.return,_)}}var Bs=!1,En=!1,I0=!1,eI=typeof WeakSet=="function"?WeakSet:Set,zn=null;function dz(s,a){if(s=s.containerInfo,W0=Qp,s=fC(s),Ev(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var g=h.anchorOffset,_=h.focusNode;h=h.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var T=0,C=-1,U=-1,X=0,se=0,ue=s,J=null;t:for(;;){for(var ne;ue!==u||g!==0&&ue.nodeType!==3||(C=T+g),ue!==_||h!==0&&ue.nodeType!==3||(U=T+h),ue.nodeType===3&&(T+=ue.nodeValue.length),(ne=ue.firstChild)!==null;)J=ue,ue=ne;for(;;){if(ue===s)break t;if(J===u&&++X===g&&(C=T),J===_&&++se===h&&(U=T),(ne=ue.nextSibling)!==null)break;ue=J,J=ue.parentNode}ue=ne}u=C===-1||U===-1?null:{start:C,end:U}}else u=null}u=u||{start:0,end:0}}else u=null;for(Y0={focusedElem:s,selectionRange:u},Qp=!1,zn=a;zn!==null;)if(a=zn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,zn=s;else for(;zn!==null;){switch(a=zn,_=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)g=s[u],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,u=a,g=_.memoizedProps,_=_.memoizedState,h=u.stateNode;try{var Se=cl(u.type,g);s=h.getSnapshotBeforeUpdate(Se,_),h.__reactInternalSnapshotBeforeUpdate=s}catch(Ve){wt(u,u.return,Ve)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)X0(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":X0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,zn=s;break}zn=a.return}}function tI(s,a,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:$s(s,u),h&4&&df(5,u);break;case 1:if($s(s,u),h&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(T){wt(u,u.return,T)}else{var g=cl(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(g,a,s.__reactInternalSnapshotBeforeUpdate)}catch(T){wt(u,u.return,T)}}h&64&&YA(u),h&512&&mf(u,u.return);break;case 3:if($s(s,u),h&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{UC(s,a)}catch(T){wt(u,u.return,T)}}break;case 27:a===null&&h&4&&JA(u);case 26:case 5:$s(s,u),a===null&&h&4&&QA(u),h&512&&mf(u,u.return);break;case 12:$s(s,u);break;case 31:$s(s,u),h&4&&rI(s,u);break;case 13:$s(s,u),h&4&&sI(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=bz.bind(null,u),Bz(s,u))));break;case 22:if(h=u.memoizedState!==null||Bs,!h){a=a!==null&&a.memoizedState!==null||En,g=Bs;var _=En;Bs=h,(En=a)&&!_?Hs(s,u,(u.subtreeFlags&8772)!==0):$s(s,u),Bs=g,En=_}break;case 30:break;default:$s(s,u)}}function nI(s){var a=s.alternate;a!==null&&(s.alternate=null,nI(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&_u(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var $t=null,vi=!1;function qs(s,a,u){for(u=u.child;u!==null;)iI(s,a,u),u=u.sibling}function iI(s,a,u){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(ai,u)}catch{}switch(u.tag){case 26:En||cs(u,a),qs(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:En||cs(u,a);var h=$t,g=vi;Zo(u.type)&&($t=u.stateNode,vi=!1),qs(s,a,u),wf(u.stateNode),$t=h,vi=g;break;case 5:En||cs(u,a);case 6:if(h=$t,g=vi,$t=null,qs(s,a,u),$t=h,vi=g,$t!==null)if(vi)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(u.stateNode)}catch(_){wt(u,a,_)}else try{$t.removeChild(u.stateNode)}catch(_){wt(u,a,_)}break;case 18:$t!==null&&(vi?(s=$t,YI(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),tc(s)):YI($t,u.stateNode));break;case 4:h=$t,g=vi,$t=u.stateNode.containerInfo,vi=!0,qs(s,a,u),$t=h,vi=g;break;case 0:case 11:case 14:case 15:qo(2,u,a),En||qo(4,u,a),qs(s,a,u);break;case 1:En||(cs(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"&&ZA(u,a,h)),qs(s,a,u);break;case 21:qs(s,a,u);break;case 22:En=(h=En)||u.memoizedState!==null,qs(s,a,u),En=h;break;default:qs(s,a,u)}}function rI(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{tc(s)}catch(u){wt(a,a.return,u)}}}function sI(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{tc(s)}catch(u){wt(a,a.return,u)}}function mz(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new eI),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new eI),a;default:throw Error(i(435,s.tag))}}function Np(s,a){var u=mz(s);a.forEach(function(h){if(!u.has(h)){u.add(h);var g=wz.bind(null,s,h);h.then(g,g)}})}function Ei(s,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var g=u[h],_=s,T=a,C=T;e:for(;C!==null;){switch(C.tag){case 27:if(Zo(C.type)){$t=C.stateNode,vi=!1;break e}break;case 5:$t=C.stateNode,vi=!1;break e;case 3:case 4:$t=C.stateNode.containerInfo,vi=!0;break e}C=C.return}if($t===null)throw Error(i(160));iI(_,T,g),$t=null,vi=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)oI(a,s),a=a.sibling}var Dr=null;function oI(s,a){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ei(a,s),Ti(s),h&4&&(qo(3,s,s.return),df(3,s),qo(5,s,s.return));break;case 1:Ei(a,s),Ti(s),h&512&&(En||u===null||cs(u,u.return)),h&64&&Bs&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var g=Dr;if(Ei(a,s),Ti(s),h&512&&(En||u===null||cs(u,u.return)),h&4){var _=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,g=g.ownerDocument||g;t:switch(h){case"title":_=g.getElementsByTagName("title")[0],(!_||_[Zr]||_[mn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(h),g.head.insertBefore(_,g.querySelector("head > title"))),Wn(_,h,u),_[mn]=s,pn(_),h=_;break e;case"link":var T=oR("link","href",g).get(h+(u.href||""));if(T){for(var C=0;C<T.length;C++)if(_=T[C],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){T.splice(C,1);break t}}_=g.createElement(h),Wn(_,h,u),g.head.appendChild(_);break;case"meta":if(T=oR("meta","content",g).get(h+(u.content||""))){for(C=0;C<T.length;C++)if(_=T[C],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){T.splice(C,1);break t}}_=g.createElement(h),Wn(_,h,u),g.head.appendChild(_);break;default:throw Error(i(468,h))}_[mn]=s,pn(_),h=_}s.stateNode=h}else aR(g,s.type,s.stateNode);else s.stateNode=sR(g,h,s.memoizedProps);else _!==h?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,h===null?aR(g,s.type,s.stateNode):sR(g,h,s.memoizedProps)):h===null&&s.stateNode!==null&&S0(s,s.memoizedProps,u.memoizedProps)}break;case 27:Ei(a,s),Ti(s),h&512&&(En||u===null||cs(u,u.return)),u!==null&&h&4&&S0(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Ei(a,s),Ti(s),h&512&&(En||u===null||cs(u,u.return)),s.flags&32){g=s.stateNode;try{yi(g,"")}catch(Se){wt(s,s.return,Se)}}h&4&&s.stateNode!=null&&(g=s.memoizedProps,S0(s,g,u!==null?u.memoizedProps:g)),h&1024&&(I0=!0);break;case 6:if(Ei(a,s),Ti(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(Se){wt(s,s.return,Se)}}break;case 3:if(Kp=null,g=Dr,Dr=Hp(a.containerInfo),Ei(a,s),Dr=g,Ti(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{tc(a.containerInfo)}catch(Se){wt(s,s.return,Se)}I0&&(I0=!1,aI(s));break;case 4:h=Dr,Dr=Hp(s.stateNode.containerInfo),Ei(a,s),Ti(s),Dr=h;break;case 12:Ei(a,s),Ti(s);break;case 31:Ei(a,s),Ti(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Np(s,h)));break;case 13:Ei(a,s),Ti(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Op=fe()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Np(s,h)));break;case 22:g=s.memoizedState!==null;var U=u!==null&&u.memoizedState!==null,X=Bs,se=En;if(Bs=X||g,En=se||U,Ei(a,s),En=se,Bs=X,Ti(s),h&8192)e:for(a=s.stateNode,a._visibility=g?a._visibility&-2:a._visibility|1,g&&(u===null||U||Bs||En||hl(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){U=u=a;try{if(_=U.stateNode,g)T=_.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{C=U.stateNode;var ue=U.memoizedProps.style,J=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;C.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Se){wt(U,U.return,Se)}}}else if(a.tag===6){if(u===null){U=a;try{U.stateNode.nodeValue=g?"":U.memoizedProps}catch(Se){wt(U,U.return,Se)}}}else if(a.tag===18){if(u===null){U=a;try{var ne=U.stateNode;g?ZI(ne,!0):ZI(U.stateNode,!1)}catch(Se){wt(U,U.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,Np(s,u))));break;case 19:Ei(a,s),Ti(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,Np(s,h)));break;case 30:break;case 21:break;default:Ei(a,s),Ti(s)}}function Ti(s){var a=s.flags;if(a&2){try{for(var u,h=s.return;h!==null;){if(XA(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var g=u.stateNode,_=C0(s);Dp(s,_,g);break;case 5:var T=u.stateNode;u.flags&32&&(yi(T,""),u.flags&=-33);var C=C0(s);Dp(s,C,T);break;case 3:case 4:var U=u.stateNode.containerInfo,X=C0(s);A0(s,X,U);break;default:throw Error(i(161))}}catch(se){wt(s,s.return,se)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function aI(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;aI(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function $s(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)tI(s,a.alternate,a),a=a.sibling}function hl(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:qo(4,a,a.return),hl(a);break;case 1:cs(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&ZA(a,a.return,u),hl(a);break;case 27:wf(a.stateNode);case 26:case 5:cs(a,a.return),hl(a);break;case 22:a.memoizedState===null&&hl(a);break;case 30:hl(a);break;default:hl(a)}s=s.sibling}}function Hs(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,g=s,_=a,T=_.flags;switch(_.tag){case 0:case 11:case 15:Hs(g,_,u),df(4,_);break;case 1:if(Hs(g,_,u),h=_,g=h.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(X){wt(h,h.return,X)}if(h=_,g=h.updateQueue,g!==null){var C=h.stateNode;try{var U=g.shared.hiddenCallbacks;if(U!==null)for(g.shared.hiddenCallbacks=null,g=0;g<U.length;g++)zC(U[g],C)}catch(X){wt(h,h.return,X)}}u&&T&64&&YA(_),mf(_,_.return);break;case 27:JA(_);case 26:case 5:Hs(g,_,u),u&&h===null&&T&4&&QA(_),mf(_,_.return);break;case 12:Hs(g,_,u);break;case 31:Hs(g,_,u),u&&T&4&&rI(g,_);break;case 13:Hs(g,_,u),u&&T&4&&sI(g,_);break;case 22:_.memoizedState===null&&Hs(g,_,u),mf(_,_.return);break;case 30:break;default:Hs(g,_,u)}a=a.sibling}}function R0(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Jh(u))}function x0(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Jh(s))}function Nr(s,a,u,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)lI(s,a,u,h),a=a.sibling}function lI(s,a,u,h){var g=a.flags;switch(a.tag){case 0:case 11:case 15:Nr(s,a,u,h),g&2048&&df(9,a);break;case 1:Nr(s,a,u,h);break;case 3:Nr(s,a,u,h),g&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Jh(s)));break;case 12:if(g&2048){Nr(s,a,u,h),s=a.stateNode;try{var _=a.memoizedProps,T=_.id,C=_.onPostCommit;typeof C=="function"&&C(T,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){wt(a,a.return,U)}}else Nr(s,a,u,h);break;case 31:Nr(s,a,u,h);break;case 13:Nr(s,a,u,h);break;case 23:break;case 22:_=a.stateNode,T=a.alternate,a.memoizedState!==null?_._visibility&2?Nr(s,a,u,h):pf(s,a):_._visibility&2?Nr(s,a,u,h):(_._visibility|=2,$u(s,a,u,h,(a.subtreeFlags&10256)!==0||!1)),g&2048&&R0(T,a);break;case 24:Nr(s,a,u,h),g&2048&&x0(a.alternate,a);break;default:Nr(s,a,u,h)}}function $u(s,a,u,h,g){for(g=g&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var _=s,T=a,C=u,U=h,X=T.flags;switch(T.tag){case 0:case 11:case 15:$u(_,T,C,U,g),df(8,T);break;case 23:break;case 22:var se=T.stateNode;T.memoizedState!==null?se._visibility&2?$u(_,T,C,U,g):pf(_,T):(se._visibility|=2,$u(_,T,C,U,g)),g&&X&2048&&R0(T.alternate,T);break;case 24:$u(_,T,C,U,g),g&&X&2048&&x0(T.alternate,T);break;default:$u(_,T,C,U,g)}a=a.sibling}}function pf(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,h=a,g=h.flags;switch(h.tag){case 22:pf(u,h),g&2048&&R0(h.alternate,h);break;case 24:pf(u,h),g&2048&&x0(h.alternate,h);break;default:pf(u,h)}a=a.sibling}}var gf=8192;function Hu(s,a,u){if(s.subtreeFlags&gf)for(s=s.child;s!==null;)uI(s,a,u),s=s.sibling}function uI(s,a,u){switch(s.tag){case 26:Hu(s,a,u),s.flags&gf&&s.memoizedState!==null&&eU(u,Dr,s.memoizedState,s.memoizedProps);break;case 5:Hu(s,a,u);break;case 3:case 4:var h=Dr;Dr=Hp(s.stateNode.containerInfo),Hu(s,a,u),Dr=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=gf,gf=16777216,Hu(s,a,u),gf=h):Hu(s,a,u));break;default:Hu(s,a,u)}}function cI(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function _f(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];zn=h,fI(h,s)}cI(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)hI(s),s=s.sibling}function hI(s){switch(s.tag){case 0:case 11:case 15:_f(s),s.flags&2048&&qo(9,s,s.return);break;case 3:_f(s);break;case 12:_f(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,Pp(s)):_f(s);break;default:_f(s)}}function Pp(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];zn=h,fI(h,s)}cI(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:qo(8,a,a.return),Pp(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Pp(a));break;default:Pp(a)}s=s.sibling}}function fI(s,a){for(;zn!==null;){var u=zn;switch(u.tag){case 0:case 11:case 15:qo(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Jh(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,zn=h;else e:for(u=s;zn!==null;){h=zn;var g=h.sibling,_=h.return;if(nI(h),h===u){zn=null;break e}if(g!==null){g.return=_,zn=g;break e}zn=_}}}var pz={getCacheForType:function(s){var a=Gn(_n),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u},cacheSignal:function(){return Gn(_n).controller.signal}},gz=typeof WeakMap=="function"?WeakMap:Map,gt=0,Pt=null,it=null,ot=0,bt=0,ji=null,$o=!1,Gu=!1,D0=!1,Gs=0,en=0,Ho=0,fl=0,N0=0,Bi=0,Ku=0,yf=null,bi=null,P0=!1,Op=0,dI=0,Mp=1/0,kp=null,Go=null,Nn=0,Ko=null,Wu=null,Ks=0,O0=0,M0=null,mI=null,vf=0,k0=null;function qi(){return(gt&2)!==0&&ot!==0?ot&-ot:ee.T!==null?j0():Vm()}function pI(){if(Bi===0)if((ot&536870912)===0||ut){var s=Ua;Ua<<=1,(Ua&3932160)===0&&(Ua=262144),Bi=s}else Bi=536870912;return s=Ui.current,s!==null&&(s.flags|=32),Bi}function wi(s,a,u){(s===Pt&&(bt===2||bt===9)||s.cancelPendingCommit!==null)&&(Yu(s,0),Wo(s,ot,Bi,!1)),Fa(s,u),((gt&2)===0||s!==Pt)&&(s===Pt&&((gt&2)===0&&(fl|=u),en===4&&Wo(s,ot,Bi,!1)),hs(s))}function gI(s,a,u){if((gt&6)!==0)throw Error(i(327));var h=!u&&(a&127)===0&&(a&s.expiredLanes)===0||Tr(s,a),g=h?vz(s,a):L0(s,a,!0),_=h;do{if(g===0){Gu&&!h&&Wo(s,a,0,!1);break}else{if(u=s.current.alternate,_&&!_z(u)){g=L0(s,a,!1),_=!1;continue}if(g===2){if(_=a,s.errorRecoveryDisabledLanes&_)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var C=s;g=yf;var U=C.current.memoizedState.isDehydrated;if(U&&(Yu(C,T).flags|=256),T=L0(C,T,!1),T!==2){if(D0&&!U){C.errorRecoveryDisabledLanes|=_,fl|=_,g=4;break e}_=bi,bi=g,_!==null&&(bi===null?bi=_:bi.push.apply(bi,_))}g=T}if(_=!1,g!==2)continue}}if(g===1){Yu(s,0),Wo(s,a,0,!0);break}e:{switch(h=s,_=g,_){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Wo(h,a,Bi,!$o);break e;case 2:bi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(g=Op+300-fe(),10<g)){if(Wo(h,a,Bi,!$o),Kr(h,0,!0)!==0)break e;Ks=a,h.timeoutHandle=KI(_I.bind(null,h,u,bi,kp,P0,a,Bi,fl,Ku,$o,_,"Throttled",-0,0),g);break e}_I(h,u,bi,kp,P0,a,Bi,fl,Ku,$o,_,null,-0,0)}}break}while(!0);hs(s)}function _I(s,a,u,h,g,_,T,C,U,X,se,ue,J,ne){if(s.timeoutHandle=-1,ue=a.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sr},uI(a,_,ue);var Se=(_&62914560)===_?Op-fe():(_&4194048)===_?dI-fe():0;if(Se=tU(ue,Se),Se!==null){Ks=_,s.cancelPendingCommit=Se(CI.bind(null,s,a,_,u,h,g,T,C,U,se,ue,null,J,ne)),Wo(s,_,T,!X);return}}CI(s,a,_,u,h,g,T,C,U)}function _z(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var g=u[h],_=g.getSnapshot;g=g.value;try{if(!Li(_(),g))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Wo(s,a,u,h){a&=~N0,a&=~fl,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var g=a;0<g;){var _=31-Bt(g),T=1<<_;h[_]=-1,g&=~T}u!==0&&ja(s,u,a)}function Vp(){return(gt&6)===0?(Ef(0),!1):!0}function V0(){if(it!==null){if(bt===0)var s=it.return;else s=it,Vs=il=null,Xv(s),Uu=null,tf=0,s=it;for(;s!==null;)WA(s.alternate,s),s=s.return;it=null}}function Yu(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,Lz(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Ks=0,V0(),Pt=s,it=u=Ms(s.current,null),ot=a,bt=0,ji=null,$o=!1,Gu=Tr(s,a),D0=!1,Ku=Bi=N0=fl=Ho=en=0,bi=yf=null,P0=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var g=31-Bt(h),_=1<<g;a|=s[g],h&=~_}return Gs=a,ip(),u}function yI(s,a){Ze=null,ee.H=cf,a===zu||a===hp?(a=MC(),bt=3):a===Fv?(a=MC(),bt=4):bt=a===m0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,ji=a,it===null&&(en=1,Cp(s,ir(a,s.current)))}function vI(){var s=Ui.current;return s===null?!0:(ot&4194048)===ot?ar===null:(ot&62914560)===ot||(ot&536870912)!==0?s===ar:!1}function EI(){var s=ee.H;return ee.H=cf,s===null?cf:s}function TI(){var s=ee.A;return ee.A=pz,s}function Lp(){en=4,$o||(ot&4194048)!==ot&&Ui.current!==null||(Gu=!0),(Ho&134217727)===0&&(fl&134217727)===0||Pt===null||Wo(Pt,ot,Bi,!1)}function L0(s,a,u){var h=gt;gt|=2;var g=EI(),_=TI();(Pt!==s||ot!==a)&&(kp=null,Yu(s,a)),a=!1;var T=en;e:do try{if(bt!==0&&it!==null){var C=it,U=ji;switch(bt){case 8:V0(),T=6;break e;case 3:case 2:case 9:case 6:Ui.current===null&&(a=!0);var X=bt;if(bt=0,ji=null,Zu(s,C,U,X),u&&Gu){T=0;break e}break;default:X=bt,bt=0,ji=null,Zu(s,C,U,X)}}yz(),T=en;break}catch(se){yI(s,se)}while(!0);return a&&s.shellSuspendCounter++,Vs=il=null,gt=h,ee.H=g,ee.A=_,it===null&&(Pt=null,ot=0,ip()),T}function yz(){for(;it!==null;)bI(it)}function vz(s,a){var u=gt;gt|=2;var h=EI(),g=TI();Pt!==s||ot!==a?(kp=null,Mp=fe()+500,Yu(s,a)):Gu=Tr(s,a);e:do try{if(bt!==0&&it!==null){a=it;var _=ji;t:switch(bt){case 1:bt=0,ji=null,Zu(s,a,_,1);break;case 2:case 9:if(PC(_)){bt=0,ji=null,wI(a);break}a=function(){bt!==2&&bt!==9||Pt!==s||(bt=7),hs(s)},_.then(a,a);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:PC(_)?(bt=0,ji=null,wI(a)):(bt=0,ji=null,Zu(s,a,_,7));break;case 5:var T=null;switch(it.tag){case 26:T=it.memoizedState;case 5:case 27:var C=it;if(T?lR(T):C.stateNode.complete){bt=0,ji=null;var U=C.sibling;if(U!==null)it=U;else{var X=C.return;X!==null?(it=X,zp(X)):it=null}break t}}bt=0,ji=null,Zu(s,a,_,5);break;case 6:bt=0,ji=null,Zu(s,a,_,6);break;case 8:V0(),en=6;break e;default:throw Error(i(462))}}Ez();break}catch(se){yI(s,se)}while(!0);return Vs=il=null,ee.H=h,ee.A=g,gt=u,it!==null?0:(Pt=null,ot=0,ip(),en)}function Ez(){for(;it!==null&&!re();)bI(it)}function bI(s){var a=GA(s.alternate,s,Gs);s.memoizedProps=s.pendingProps,a===null?zp(s):it=a}function wI(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=FA(u,a,a.pendingProps,a.type,void 0,ot);break;case 11:a=FA(u,a,a.pendingProps,a.type.render,a.ref,ot);break;case 5:Xv(a);default:WA(u,a),a=it=TC(a,Gs),a=GA(u,a,Gs)}s.memoizedProps=s.pendingProps,a===null?zp(s):it=a}function Zu(s,a,u,h){Vs=il=null,Xv(a),Uu=null,tf=0;var g=a.return;try{if(lz(s,g,a,u,ot)){en=1,Cp(s,ir(u,s.current)),it=null;return}}catch(_){if(g!==null)throw it=g,_;en=1,Cp(s,ir(u,s.current)),it=null;return}a.flags&32768?(ut||h===1?s=!0:Gu||(ot&536870912)!==0?s=!1:($o=s=!0,(h===2||h===9||h===3||h===6)&&(h=Ui.current,h!==null&&h.tag===13&&(h.flags|=16384))),SI(a,s)):zp(a)}function zp(s){var a=s;do{if((a.flags&32768)!==0){SI(a,$o);return}s=a.return;var u=hz(a.alternate,a,Gs);if(u!==null){it=u;return}if(a=a.sibling,a!==null){it=a;return}it=a=s}while(a!==null);en===0&&(en=5)}function SI(s,a){do{var u=fz(s.alternate,s);if(u!==null){u.flags&=32767,it=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){it=s;return}it=s=u}while(s!==null);en=6,it=null}function CI(s,a,u,h,g,_,T,C,U){s.cancelPendingCommit=null;do Up();while(Nn!==0);if((gt&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(_=a.lanes|a.childLanes,_|=Cv,gv(s,u,_,T,C,U),s===Pt&&(it=Pt=null,ot=0),Wu=a,Ko=s,Ks=u,O0=_,M0=g,mI=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,Sz(et,function(){return DI(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=ee.T,ee.T=null,g=he.p,he.p=2,T=gt,gt|=4;try{dz(s,a,u)}finally{gt=T,he.p=g,ee.T=h}}Nn=1,AI(),II(),RI()}}function AI(){if(Nn===1){Nn=0;var s=Ko,a=Wu,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=ee.T,ee.T=null;var h=he.p;he.p=2;var g=gt;gt|=4;try{oI(a,s);var _=Y0,T=fC(s.containerInfo),C=_.focusedElem,U=_.selectionRange;if(T!==C&&C&&C.ownerDocument&&hC(C.ownerDocument.documentElement,C)){if(U!==null&&Ev(C)){var X=U.start,se=U.end;if(se===void 0&&(se=X),"selectionStart"in C)C.selectionStart=X,C.selectionEnd=Math.min(se,C.value.length);else{var ue=C.ownerDocument||document,J=ue&&ue.defaultView||window;if(J.getSelection){var ne=J.getSelection(),Se=C.textContent.length,Ve=Math.min(U.start,Se),Nt=U.end===void 0?Ve:Math.min(U.end,Se);!ne.extend&&Ve>Nt&&(T=Nt,Nt=Ve,Ve=T);var G=cC(C,Ve),$=cC(C,Nt);if(G&&$&&(ne.rangeCount!==1||ne.anchorNode!==G.node||ne.anchorOffset!==G.offset||ne.focusNode!==$.node||ne.focusOffset!==$.offset)){var Q=ue.createRange();Q.setStart(G.node,G.offset),ne.removeAllRanges(),Ve>Nt?(ne.addRange(Q),ne.extend($.node,$.offset)):(Q.setEnd($.node,$.offset),ne.addRange(Q))}}}}for(ue=[],ne=C;ne=ne.parentNode;)ne.nodeType===1&&ue.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ue.length;C++){var le=ue[C];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Qp=!!W0,Y0=W0=null}finally{gt=g,he.p=h,ee.T=u}}s.current=a,Nn=2}}function II(){if(Nn===2){Nn=0;var s=Ko,a=Wu,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=ee.T,ee.T=null;var h=he.p;he.p=2;var g=gt;gt|=4;try{tI(s,a.alternate,a)}finally{gt=g,he.p=h,ee.T=u}}Nn=3}}function RI(){if(Nn===4||Nn===3){Nn=0,we();var s=Ko,a=Wu,u=Ks,h=mI;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Nn=5:(Nn=0,Wu=Ko=null,xI(s,s.pendingLanes));var g=s.pendingLanes;if(g===0&&(Go=null),Ds(u),a=a.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(ai,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=ee.T,g=he.p,he.p=2,ee.T=null;try{for(var _=s.onRecoverableError,T=0;T<h.length;T++){var C=h[T];_(C.value,{componentStack:C.stack})}}finally{ee.T=a,he.p=g}}(Ks&3)!==0&&Up(),hs(s),g=s.pendingLanes,(u&261930)!==0&&(g&42)!==0?s===k0?vf++:(vf=0,k0=s):vf=0,Ef(0)}}function xI(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Jh(a)))}function Up(){return AI(),II(),RI(),DI()}function DI(){if(Nn!==5)return!1;var s=Ko,a=O0;O0=0;var u=Ds(Ks),h=ee.T,g=he.p;try{he.p=32>u?32:u,ee.T=null,u=M0,M0=null;var _=Ko,T=Ks;if(Nn=0,Wu=Ko=null,Ks=0,(gt&6)!==0)throw Error(i(331));var C=gt;if(gt|=4,hI(_.current),lI(_,_.current,T,u),gt=C,Ef(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(ai,_)}catch{}return!0}finally{he.p=g,ee.T=h,xI(s,a)}}function NI(s,a,u){a=ir(u,a),a=d0(s.stateNode,a,2),s=Fo(s,a,2),s!==null&&(Fa(s,2),hs(s))}function wt(s,a,u){if(s.tag===3)NI(s,s,u);else for(;a!==null;){if(a.tag===3){NI(a,s,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Go===null||!Go.has(h))){s=ir(u,s),u=PA(2),h=Fo(a,u,2),h!==null&&(OA(u,h,a,s),Fa(h,2),hs(h));break}}a=a.return}}function z0(s,a,u){var h=s.pingCache;if(h===null){h=s.pingCache=new gz;var g=new Set;h.set(a,g)}else g=h.get(a),g===void 0&&(g=new Set,h.set(a,g));g.has(u)||(D0=!0,g.add(u),s=Tz.bind(null,s,a,u),a.then(s,s))}function Tz(s,a,u){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,Pt===s&&(ot&u)===u&&(en===4||en===3&&(ot&62914560)===ot&&300>fe()-Op?(gt&2)===0&&Yu(s,0):N0|=u,Ku===ot&&(Ku=0)),hs(s)}function PI(s,a){a===0&&(a=km()),s=el(s,a),s!==null&&(Fa(s,a),hs(s))}function bz(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),PI(s,u)}function wz(s,a){var u=0;switch(s.tag){case 31:case 13:var h=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),PI(s,u)}function Sz(s,a){return z(s,a)}var Fp=null,Qu=null,U0=!1,jp=!1,F0=!1,Yo=0;function hs(s){s!==Qu&&s.next===null&&(Qu===null?Fp=Qu=s:Qu=Qu.next=s),jp=!0,U0||(U0=!0,Az())}function Ef(s,a){if(!F0&&jp){F0=!0;do for(var u=!1,h=Fp;h!==null;){if(s!==0){var g=h.pendingLanes;if(g===0)var _=0;else{var T=h.suspendedLanes,C=h.pingedLanes;_=(1<<31-Bt(42|s)+1)-1,_&=g&~(T&~C),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,VI(h,_))}else _=ot,_=Kr(h,h===Pt?_:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(_&3)===0||Tr(h,_)||(u=!0,VI(h,_));h=h.next}while(u);F0=!1}}function Cz(){OI()}function OI(){jp=U0=!1;var s=0;Yo!==0&&Vz()&&(s=Yo);for(var a=fe(),u=null,h=Fp;h!==null;){var g=h.next,_=MI(h,a);_===0?(h.next=null,u===null?Fp=g:u.next=g,g===null&&(Qu=u)):(u=h,(s!==0||(_&3)!==0)&&(jp=!0)),h=g}Nn!==0&&Nn!==5||Ef(s),Yo!==0&&(Yo=0)}function MI(s,a){for(var u=s.suspendedLanes,h=s.pingedLanes,g=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var T=31-Bt(_),C=1<<T,U=g[T];U===-1?((C&u)===0||(C&h)!==0)&&(g[T]=pv(C,a)):U<=a&&(s.expiredLanes|=C),_&=~C}if(a=Pt,u=ot,u=Kr(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===a&&(bt===2||bt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Z(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||Tr(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(h!==null&&Z(h),Ds(u)){case 2:case 8:u=We;break;case 32:u=et;break;case 268435456:u=Rs;break;default:u=et}return h=kI.bind(null,s),u=z(u,h),s.callbackPriority=a,s.callbackNode=u,a}return h!==null&&h!==null&&Z(h),s.callbackPriority=2,s.callbackNode=null,2}function kI(s,a){if(Nn!==0&&Nn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Up()&&s.callbackNode!==u)return null;var h=ot;return h=Kr(s,s===Pt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(gI(s,h,a),MI(s,fe()),s.callbackNode!=null&&s.callbackNode===u?kI.bind(null,s):null)}function VI(s,a){if(Up())return null;gI(s,a,!0)}function Az(){zz(function(){(gt&6)!==0?z(pe,Cz):OI()})}function j0(){if(Yo===0){var s=Vu;s===0&&(s=Hr,Hr<<=1,(Hr&261888)===0&&(Hr=256)),Yo=s}return Yo}function LI(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Tu(""+s)}function zI(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function Iz(s,a,u,h,g){if(a==="submit"&&u&&u.stateNode===g){var _=LI((g[Vn]||null).action),T=h.submitter;T&&(a=(a=T[Vn]||null)?LI(a.formAction):T.getAttribute("formAction"),a!==null&&(_=a,T=null));var C=new rs("action","action",null,h,g);s.push({event:C,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Yo!==0){var U=T?zI(g,T):new FormData(g);a0(u,{pending:!0,data:U,method:g.method,action:_},null,U)}}else typeof _=="function"&&(C.preventDefault(),U=T?zI(g,T):new FormData(g),a0(u,{pending:!0,data:U,method:g.method,action:_},_,U))},currentTarget:g}]})}}for(var B0=0;B0<Sv.length;B0++){var q0=Sv[B0],Rz=q0.toLowerCase(),xz=q0[0].toUpperCase()+q0.slice(1);xr(Rz,"on"+xz)}xr(pC,"onAnimationEnd"),xr(gC,"onAnimationIteration"),xr(_C,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(H6,"onTransitionRun"),xr(G6,"onTransitionStart"),xr(K6,"onTransitionCancel"),xr(yC,"onTransitionEnd"),es("onMouseEnter",["mouseout","mouseover"]),es("onMouseLeave",["mouseout","mouseover"]),es("onPointerEnter",["pointerout","pointerover"]),es("onPointerLeave",["pointerout","pointerover"]),Jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dz=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tf));function UI(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],g=h.event;h=h.listeners;e:{var _=void 0;if(a)for(var T=h.length-1;0<=T;T--){var C=h[T],U=C.instance,X=C.currentTarget;if(C=C.listener,U!==_&&g.isPropagationStopped())break e;_=C,g.currentTarget=X;try{_(g)}catch(se){np(se)}g.currentTarget=null,_=U}else for(T=0;T<h.length;T++){if(C=h[T],U=C.instance,X=C.currentTarget,C=C.listener,U!==_&&g.isPropagationStopped())break e;_=C,g.currentTarget=X;try{_(g)}catch(se){np(se)}g.currentTarget=null,_=U}}}}function rt(s,a){var u=a[gu];u===void 0&&(u=a[gu]=new Set);var h=s+"__bubble";u.has(h)||(FI(a,s,2,!1),u.add(h))}function $0(s,a,u){var h=0;a&&(h|=4),FI(u,s,h,a)}var Bp="_reactListening"+Math.random().toString(36).slice(2);function H0(s){if(!s[Bp]){s[Bp]=!0,Ph.forEach(function(u){u!=="selectionchange"&&(Dz.has(u)||$0(u,!1,s),$0(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Bp]||(a[Bp]=!0,$0("selectionchange",!1,a))}}function FI(s,a,u,h){switch(pR(a)){case 2:var g=rU;break;case 8:g=sU;break;default:g=oE}u=g.bind(null,a,u,s),g=void 0,!Ga||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),h?g!==void 0?s.addEventListener(a,u,{capture:!0,passive:g}):s.addEventListener(a,u,!0):g!==void 0?s.addEventListener(a,u,{passive:g}):s.addEventListener(a,u,!1)}function G0(s,a,u,h,g){var _=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var C=h.stateNode.containerInfo;if(C===g)break;if(T===4)for(T=h.return;T!==null;){var U=T.tag;if((U===3||U===4)&&T.stateNode.containerInfo===g)return;T=T.return}for(;C!==null;){if(T=Qr(C),T===null)return;if(U=T.tag,U===5||U===6||U===26||U===27){h=_=T;continue e}C=C.parentNode}}h=h.return}Do(function(){var X=_,se=Ji(u),ue=[];e:{var J=vC.get(s);if(J!==void 0){var ne=rs,Se=s;switch(s){case"keypress":if(Wa(u)===0)break e;case"keydown":case"keyup":ne=Jm;break;case"focusin":Se="focus",ne=Za;break;case"focusout":Se="blur",ne=Za;break;case"beforeblur":case"afterblur":ne=Za;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Hh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=$m;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=E;break;case pC:case gC:case _C:ne=Gm;break;case yC:ne=D;break;case"scroll":case"scrollend":ne=$h;break;case"wheel":ne=te;break;case"copy":case"cut":case"paste":ne=Km;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Os;break;case"toggle":case"beforetoggle":ne=Ye}var Ve=(a&4)!==0,Nt=!Ve&&(s==="scroll"||s==="scrollend"),G=Ve?J!==null?J+"Capture":null:J;Ve=[];for(var $=X,Q;$!==null;){var le=$;if(Q=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Q===null||G===null||(le=Cr($,G),le!=null&&Ve.push(bf($,le,Q))),Nt)break;$=$.return}0<Ve.length&&(J=new ne(J,Se,null,u,se),ue.push({event:J,listeners:Ve}))}}if((a&7)===0){e:{if(J=s==="mouseover"||s==="pointerover",ne=s==="mouseout"||s==="pointerout",J&&u!==jh&&(Se=u.relatedTarget||u.fromElement)&&(Qr(Se)||Se[Yr]))break e;if((ne||J)&&(J=se.window===se?se:(J=se.ownerDocument)?J.defaultView||J.parentWindow:window,ne?(Se=u.relatedTarget||u.toElement,ne=X,Se=Se?Qr(Se):null,Se!==null&&(Nt=o(Se),Ve=Se.tag,Se!==Nt||Ve!==5&&Ve!==27&&Ve!==6)&&(Se=null)):(ne=null,Se=X),ne!==Se)){if(Ve=Hh,le="onMouseLeave",G="onMouseEnter",$="mouse",(s==="pointerout"||s==="pointerover")&&(Ve=Os,le="onPointerLeave",G="onPointerEnter",$="pointer"),Nt=ne==null?J:ki(ne),Q=Se==null?J:ki(Se),J=new Ve(le,$+"leave",ne,u,se),J.target=Nt,J.relatedTarget=Q,le=null,Qr(se)===X&&(Ve=new Ve(G,$+"enter",Se,u,se),Ve.target=Q,Ve.relatedTarget=Nt,le=Ve),Nt=le,ne&&Se)t:{for(Ve=Nz,G=ne,$=Se,Q=0,le=G;le;le=Ve(le))Q++;le=0;for(var Ne=$;Ne;Ne=Ve(Ne))le++;for(;0<Q-le;)G=Ve(G),Q--;for(;0<le-Q;)$=Ve($),le--;for(;Q--;){if(G===$||$!==null&&G===$.alternate){Ve=G;break t}G=Ve(G),$=Ve($)}Ve=null}else Ve=null;ne!==null&&jI(ue,J,ne,Ve,!1),Se!==null&&Nt!==null&&jI(ue,Nt,Se,Ve,!0)}}e:{if(J=X?ki(X):window,ne=J.nodeName&&J.nodeName.toLowerCase(),ne==="select"||ne==="input"&&J.type==="file")var dt=rC;else if(nC(J))if(sC)dt=B6;else{dt=F6;var Ie=U6}else ne=J.nodeName,!ne||ne.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?X&&Eu(X.elementType)&&(dt=rC):dt=j6;if(dt&&(dt=dt(s,X))){iC(ue,dt,u,se);break e}Ie&&Ie(s,J,X),s==="focusout"&&X&&J.type==="number"&&X.memoizedProps.value!=null&&zh(J,"number",J.value)}switch(Ie=X?ki(X):window,s){case"focusin":(nC(Ie)||Ie.contentEditable==="true")&&(Ru=Ie,Tv=X,Zh=null);break;case"focusout":Zh=Tv=Ru=null;break;case"mousedown":bv=!0;break;case"contextmenu":case"mouseup":case"dragend":bv=!1,dC(ue,u,se);break;case"selectionchange":if($6)break;case"keydown":case"keyup":dC(ue,u,se)}var Qe;if(pt)e:{switch(s){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Iu?Qa(s,u)&&(at="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(at="onCompositionStart");at&&(as&&u.locale!=="ko"&&(Iu||at!=="onCompositionStart"?at==="onCompositionEnd"&&Iu&&(Qe=qh()):(is=se,Bh="value"in is?is.value:is.textContent,Iu=!0)),Ie=qp(X,at),0<Ie.length&&(at=new os(at,s,null,u,se),ue.push({event:at,listeners:Ie}),Qe?at.data=Qe:(Qe=Au(u),Qe!==null&&(at.data=Qe)))),(Qe=tr?k6(s,u):V6(s,u))&&(at=qp(X,"onBeforeInput"),0<at.length&&(Ie=new os("onBeforeInput","beforeinput",null,u,se),ue.push({event:Ie,listeners:at}),Ie.data=Qe)),Iz(ue,s,X,u,se)}UI(ue,a)})}function bf(s,a,u){return{instance:s,listener:a,currentTarget:u}}function qp(s,a){for(var u=a+"Capture",h=[];s!==null;){var g=s,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=Cr(s,u),g!=null&&h.unshift(bf(s,g,_)),g=Cr(s,a),g!=null&&h.push(bf(s,g,_))),s.tag===3)return h;s=s.return}return[]}function Nz(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function jI(s,a,u,h,g){for(var _=a._reactName,T=[];u!==null&&u!==h;){var C=u,U=C.alternate,X=C.stateNode;if(C=C.tag,U!==null&&U===h)break;C!==5&&C!==26&&C!==27||X===null||(U=X,g?(X=Cr(u,_),X!=null&&T.unshift(bf(u,X,U))):g||(X=Cr(u,_),X!=null&&T.push(bf(u,X,U)))),u=u.return}T.length!==0&&s.push({event:a,listeners:T})}var Pz=/\r\n?/g,Oz=/\u0000|\uFFFD/g;function BI(s){return(typeof s=="string"?s:""+s).replace(Pz,`
`).replace(Oz,"")}function qI(s,a){return a=BI(a),BI(s)===a}function Dt(s,a,u,h,g,_){switch(u){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||yi(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&yi(s,""+h);break;case"className":Vi(s,"class",h);break;case"tabIndex":Vi(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Vi(s,u,h);break;case"style":Fh(s,h,_);break;case"data":if(a!=="object"){Vi(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Tu(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(a!=="input"&&Dt(s,a,"name",g.name,g,null),Dt(s,a,"formEncType",g.formEncType,g,null),Dt(s,a,"formMethod",g.formMethod,g,null),Dt(s,a,"formTarget",g.formTarget,g,null)):(Dt(s,a,"encType",g.encType,g,null),Dt(s,a,"method",g.method,g,null),Dt(s,a,"target",g.target,g,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=Tu(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=Sr);break;case"onScroll":h!=null&&rt("scroll",s);break;case"onScrollEnd":h!=null&&rt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=Tu(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":rt("beforetoggle",s),rt("toggle",s),yu(s,"popover",h);break;case"xlinkActuate":gn(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":gn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":gn(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":gn(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":gn(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":gn(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":gn(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":gn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":gn(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":yu(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=qm.get(u)||u,yu(s,u,h))}}function K0(s,a,u,h,g,_){switch(u){case"style":Fh(s,h,_);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(g.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?yi(s,h):(typeof h=="number"||typeof h=="bigint")&&yi(s,""+h);break;case"onScroll":h!=null&&rt("scroll",s);break;case"onScrollEnd":h!=null&&rt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=Sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oh.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(g=u.endsWith("Capture"),a=u.slice(2,g?u.length-7:void 0),_=s[Vn]||null,_=_!=null?_[u]:null,typeof _=="function"&&s.removeEventListener(a,_,g),typeof h=="function")){typeof _!="function"&&_!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,h,g);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):yu(s,u,h)}}}function Wn(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",s),rt("load",s);var h=!1,g=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var T=u[_];if(T!=null)switch(_){case"src":h=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Dt(s,a,_,T,u,null)}}g&&Dt(s,a,"srcSet",u.srcSet,u,null),h&&Dt(s,a,"src",u.src,u,null);return;case"input":rt("invalid",s);var C=_=T=g=null,U=null,X=null;for(h in u)if(u.hasOwnProperty(h)){var se=u[h];if(se!=null)switch(h){case"name":g=se;break;case"type":T=se;break;case"checked":U=se;break;case"defaultChecked":X=se;break;case"value":_=se;break;case"defaultValue":C=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,a));break;default:Dt(s,a,h,se,u,null)}}Fm(s,_,C,U,X,T,g,!1);return;case"select":rt("invalid",s),h=T=_=null;for(g in u)if(u.hasOwnProperty(g)&&(C=u[g],C!=null))switch(g){case"value":_=C;break;case"defaultValue":T=C;break;case"multiple":h=C;default:Dt(s,a,g,C,u,null)}a=_,u=T,s.multiple=!!h,a!=null?Ao(s,!!h,a,!1):u!=null&&Ao(s,!!h,u,!0);return;case"textarea":rt("invalid",s),_=g=h=null;for(T in u)if(u.hasOwnProperty(T)&&(C=u[T],C!=null))switch(T){case"value":h=C;break;case"defaultValue":g=C;break;case"children":_=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:Dt(s,a,T,C,u,null)}Io(s,h,g,_);return;case"option":for(U in u)if(u.hasOwnProperty(U)&&(h=u[U],h!=null))switch(U){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Dt(s,a,U,h,u,null)}return;case"dialog":rt("beforetoggle",s),rt("toggle",s),rt("cancel",s),rt("close",s);break;case"iframe":case"object":rt("load",s);break;case"video":case"audio":for(h=0;h<Tf.length;h++)rt(Tf[h],s);break;case"image":rt("error",s),rt("load",s);break;case"details":rt("toggle",s);break;case"embed":case"source":case"link":rt("error",s),rt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in u)if(u.hasOwnProperty(X)&&(h=u[X],h!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:Dt(s,a,X,h,u,null)}return;default:if(Eu(a)){for(se in u)u.hasOwnProperty(se)&&(h=u[se],h!==void 0&&K0(s,a,se,h,u,void 0));return}}for(C in u)u.hasOwnProperty(C)&&(h=u[C],h!=null&&Dt(s,a,C,h,u,null))}function Mz(s,a,u,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,T=null,C=null,U=null,X=null,se=null;for(ne in u){var ue=u[ne];if(u.hasOwnProperty(ne)&&ue!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":U=ue;default:h.hasOwnProperty(ne)||Dt(s,a,ne,null,h,ue)}}for(var J in h){var ne=h[J];if(ue=u[J],h.hasOwnProperty(J)&&(ne!=null||ue!=null))switch(J){case"type":_=ne;break;case"name":g=ne;break;case"checked":X=ne;break;case"defaultChecked":se=ne;break;case"value":T=ne;break;case"defaultValue":C=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:ne!==ue&&Dt(s,a,J,ne,h,ue)}}vu(s,T,C,U,X,se,_,g);return;case"select":ne=T=C=J=null;for(_ in u)if(U=u[_],u.hasOwnProperty(_)&&U!=null)switch(_){case"value":break;case"multiple":ne=U;default:h.hasOwnProperty(_)||Dt(s,a,_,null,h,U)}for(g in h)if(_=h[g],U=u[g],h.hasOwnProperty(g)&&(_!=null||U!=null))switch(g){case"value":J=_;break;case"defaultValue":C=_;break;case"multiple":T=_;default:_!==U&&Dt(s,a,g,_,h,U)}a=C,u=T,h=ne,J!=null?Ao(s,!!u,J,!1):!!h!=!!u&&(a!=null?Ao(s,!!u,a,!0):Ao(s,!!u,u?[]:"",!1));return;case"textarea":ne=J=null;for(C in u)if(g=u[C],u.hasOwnProperty(C)&&g!=null&&!h.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:Dt(s,a,C,null,h,g)}for(T in h)if(g=h[T],_=u[T],h.hasOwnProperty(T)&&(g!=null||_!=null))switch(T){case"value":J=g;break;case"defaultValue":ne=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(i(91));break;default:g!==_&&Dt(s,a,T,g,h,_)}jm(s,J,ne);return;case"option":for(var Se in u)if(J=u[Se],u.hasOwnProperty(Se)&&J!=null&&!h.hasOwnProperty(Se))switch(Se){case"selected":s.selected=!1;break;default:Dt(s,a,Se,null,h,J)}for(U in h)if(J=h[U],ne=u[U],h.hasOwnProperty(U)&&J!==ne&&(J!=null||ne!=null))switch(U){case"selected":s.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:Dt(s,a,U,J,h,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in u)J=u[Ve],u.hasOwnProperty(Ve)&&J!=null&&!h.hasOwnProperty(Ve)&&Dt(s,a,Ve,null,h,J);for(X in h)if(J=h[X],ne=u[X],h.hasOwnProperty(X)&&J!==ne&&(J!=null||ne!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:Dt(s,a,X,J,h,ne)}return;default:if(Eu(a)){for(var Nt in u)J=u[Nt],u.hasOwnProperty(Nt)&&J!==void 0&&!h.hasOwnProperty(Nt)&&K0(s,a,Nt,void 0,h,J);for(se in h)J=h[se],ne=u[se],!h.hasOwnProperty(se)||J===ne||J===void 0&&ne===void 0||K0(s,a,se,J,h,ne);return}}for(var G in u)J=u[G],u.hasOwnProperty(G)&&J!=null&&!h.hasOwnProperty(G)&&Dt(s,a,G,null,h,J);for(ue in h)J=h[ue],ne=u[ue],!h.hasOwnProperty(ue)||J===ne||J==null&&ne==null||Dt(s,a,ue,J,h,ne)}function $I(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kz(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var g=u[h],_=g.transferSize,T=g.initiatorType,C=g.duration;if(_&&C&&$I(T)){for(T=0,C=g.responseEnd,h+=1;h<u.length;h++){var U=u[h],X=U.startTime;if(X>C)break;var se=U.transferSize,ue=U.initiatorType;se&&$I(ue)&&(U=U.responseEnd,T+=se*(U<C?1:(C-X)/(U-X)))}if(--h,a+=8*(_+T)/(g.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var W0=null,Y0=null;function $p(s){return s.nodeType===9?s:s.ownerDocument}function HI(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function GI(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function Z0(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Q0=null;function Vz(){var s=window.event;return s&&s.type==="popstate"?s===Q0?!1:(Q0=s,!0):(Q0=null,!1)}var KI=typeof setTimeout=="function"?setTimeout:void 0,Lz=typeof clearTimeout=="function"?clearTimeout:void 0,WI=typeof Promise=="function"?Promise:void 0,zz=typeof queueMicrotask=="function"?queueMicrotask:typeof WI<"u"?function(s){return WI.resolve(null).then(s).catch(Uz)}:KI;function Uz(s){setTimeout(function(){throw s})}function Zo(s){return s==="head"}function YI(s,a){var u=a,h=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"||u==="/&"){if(h===0){s.removeChild(g),tc(a);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")wf(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,wf(u);for(var _=u.firstChild;_;){var T=_.nextSibling,C=_.nodeName;_[Zr]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=T}}else u==="body"&&wf(s.ownerDocument.body);u=g}while(u);tc(a)}function ZI(s,a){var u=s;s=0;do{var h=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=h}while(u)}function X0(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":X0(u),_u(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function Fz(s,a,u,h){for(;s.nodeType===1;){var g=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Zr])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==g.rel||s.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||s.getAttribute("title")!==(g.title==null?null:g.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(g.src==null?null:g.src)||s.getAttribute("type")!==(g.type==null?null:g.type)||s.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=lr(s.nextSibling),s===null)break}return null}function jz(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=lr(s.nextSibling),s===null))return null;return s}function QI(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=lr(s.nextSibling),s===null))return null;return s}function J0(s){return s.data==="$?"||s.data==="$~"}function eE(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Bz(s,a){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||u.readyState!=="loading")a();else{var h=function(){a(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function lr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var tE=null;function XI(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(a===0)return lr(s.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}s=s.nextSibling}return null}function JI(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return s;a--}else u!=="/$"&&u!=="/&"||a++}s=s.previousSibling}return null}function eR(s,a,u){switch(a=$p(u),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function wf(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);_u(s)}var ur=new Map,tR=new Set;function Hp(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ws=he.d;he.d={f:qz,r:$z,D:Hz,C:Gz,L:Kz,m:Wz,X:Zz,S:Yz,M:Qz};function qz(){var s=Ws.f(),a=Vp();return s||a}function $z(s){var a=Xi(s);a!==null&&a.tag===5&&a.type==="form"?yA(a):Ws.r(s)}var Xu=typeof document>"u"?null:document;function nR(s,a,u){var h=Xu;if(h&&typeof a=="string"&&a){var g=_i(a);g='link[rel="'+s+'"][href="'+g+'"]',typeof u=="string"&&(g+='[crossorigin="'+u+'"]'),tR.has(g)||(tR.add(g),s={rel:s,crossOrigin:u,href:a},h.querySelector(g)===null&&(a=h.createElement("link"),Wn(a,"link",s),pn(a),h.head.appendChild(a)))}}function Hz(s){Ws.D(s),nR("dns-prefetch",s,null)}function Gz(s,a){Ws.C(s,a),nR("preconnect",s,a)}function Kz(s,a,u){Ws.L(s,a,u);var h=Xu;if(h&&s&&a){var g='link[rel="preload"][as="'+_i(a)+'"]';a==="image"&&u&&u.imageSrcSet?(g+='[imagesrcset="'+_i(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(g+='[imagesizes="'+_i(u.imageSizes)+'"]')):g+='[href="'+_i(s)+'"]';var _=g;switch(a){case"style":_=Ju(s);break;case"script":_=ec(s)}ur.has(_)||(s=y({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),ur.set(_,s),h.querySelector(g)!==null||a==="style"&&h.querySelector(Sf(_))||a==="script"&&h.querySelector(Cf(_))||(a=h.createElement("link"),Wn(a,"link",s),pn(a),h.head.appendChild(a)))}}function Wz(s,a){Ws.m(s,a);var u=Xu;if(u&&s){var h=a&&typeof a.as=="string"?a.as:"script",g='link[rel="modulepreload"][as="'+_i(h)+'"][href="'+_i(s)+'"]',_=g;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=ec(s)}if(!ur.has(_)&&(s=y({rel:"modulepreload",href:s},a),ur.set(_,s),u.querySelector(g)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Cf(_)))return}h=u.createElement("link"),Wn(h,"link",s),pn(h),u.head.appendChild(h)}}}function Yz(s,a,u){Ws.S(s,a,u);var h=Xu;if(h&&s){var g=Xr(h).hoistableStyles,_=Ju(s);a=a||"default";var T=g.get(_);if(!T){var C={loading:0,preload:null};if(T=h.querySelector(Sf(_)))C.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":a},u),(u=ur.get(_))&&nE(s,u);var U=T=h.createElement("link");pn(U),Wn(U,"link",s),U._p=new Promise(function(X,se){U.onload=X,U.onerror=se}),U.addEventListener("load",function(){C.loading|=1}),U.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Gp(T,a,h)}T={type:"stylesheet",instance:T,count:1,state:C},g.set(_,T)}}}function Zz(s,a){Ws.X(s,a);var u=Xu;if(u&&s){var h=Xr(u).hoistableScripts,g=ec(s),_=h.get(g);_||(_=u.querySelector(Cf(g)),_||(s=y({src:s,async:!0},a),(a=ur.get(g))&&iE(s,a),_=u.createElement("script"),pn(_),Wn(_,"link",s),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(g,_))}}function Qz(s,a){Ws.M(s,a);var u=Xu;if(u&&s){var h=Xr(u).hoistableScripts,g=ec(s),_=h.get(g);_||(_=u.querySelector(Cf(g)),_||(s=y({src:s,async:!0,type:"module"},a),(a=ur.get(g))&&iE(s,a),_=u.createElement("script"),pn(_),Wn(_,"link",s),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},h.set(g,_))}}function iR(s,a,u,h){var g=(g=Ue.current)?Hp(g):null;if(!g)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Ju(u.href),u=Xr(g).hoistableStyles,h=u.get(a),h||(h={type:"style",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Ju(u.href);var _=Xr(g).hoistableStyles,T=_.get(s);if(T||(g=g.ownerDocument||g,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,T),(_=g.querySelector(Sf(s)))&&!_._p&&(T.instance=_,T.state.loading=5),ur.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},ur.set(s,u),_||Xz(g,s,u,T.state))),a&&h===null)throw Error(i(528,""));return T}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ec(u),u=Xr(g).hoistableScripts,h=u.get(a),h||(h={type:"script",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Ju(s){return'href="'+_i(s)+'"'}function Sf(s){return'link[rel="stylesheet"]['+s+"]"}function rR(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function Xz(s,a,u,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Wn(a,"link",u),pn(a),s.head.appendChild(a))}function ec(s){return'[src="'+_i(s)+'"]'}function Cf(s){return"script[async]"+s}function sR(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+_i(u.href)+'"]');if(h)return a.instance=h,pn(h),h;var g=y({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),pn(h),Wn(h,"style",g),Gp(h,u.precedence,s),a.instance=h;case"stylesheet":g=Ju(u.href);var _=s.querySelector(Sf(g));if(_)return a.state.loading|=4,a.instance=_,pn(_),_;h=rR(u),(g=ur.get(g))&&nE(h,g),_=(s.ownerDocument||s).createElement("link"),pn(_);var T=_;return T._p=new Promise(function(C,U){T.onload=C,T.onerror=U}),Wn(_,"link",h),a.state.loading|=4,Gp(_,u.precedence,s),a.instance=_;case"script":return _=ec(u.src),(g=s.querySelector(Cf(_)))?(a.instance=g,pn(g),g):(h=u,(g=ur.get(_))&&(h=y({},u),iE(h,g)),s=s.ownerDocument||s,g=s.createElement("script"),pn(g),Wn(g,"link",h),s.head.appendChild(g),a.instance=g);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Gp(h,u.precedence,s));return a.instance}function Gp(s,a,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=h.length?h[h.length-1]:null,_=g,T=0;T<h.length;T++){var C=h[T];if(C.dataset.precedence===a)_=C;else if(_!==g)break}_?_.parentNode.insertBefore(s,_.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function nE(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function iE(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var Kp=null;function oR(s,a,u){if(Kp===null){var h=new Map,g=Kp=new Map;g.set(u,h)}else g=Kp,h=g.get(u),h||(h=new Map,g.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),g=0;g<u.length;g++){var _=u[g];if(!(_[Zr]||_[mn]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var T=_.getAttribute(a)||"";T=s+T;var C=h.get(T);C?C.push(_):h.set(T,[_])}}return h}function aR(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function Jz(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function lR(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function eU(s,a,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var g=Ju(h.href),_=a.querySelector(Sf(g));if(_){a=_._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=Wp.bind(s),a.then(s,s)),u.state.loading|=4,u.instance=_,pn(_);return}_=a.ownerDocument||a,h=rR(h),(g=ur.get(g))&&nE(h,g),_=_.createElement("link"),pn(_);var T=_;T._p=new Promise(function(C,U){T.onload=C,T.onerror=U}),Wn(_,"link",h),u.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=Wp.bind(s),a.addEventListener("load",u),a.addEventListener("error",u))}}var rE=0;function tU(s,a){return s.stylesheets&&s.count===0&&Zp(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var h=setTimeout(function(){if(s.stylesheets&&Zp(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+a);0<s.imgBytes&&rE===0&&(rE=62500*kz());var g=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Zp(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>rE?50:800)+a);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(g)}}:null}function Wp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zp(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Yp=null;function Zp(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Yp=new Map,a.forEach(nU,s),Yp=null,Wp.call(s))}function nU(s,a){if(!(a.state.loading&4)){var u=Yp.get(s);if(u)var h=u.get(null);else{u=new Map,Yp.set(s,u);for(var g=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var T=g[_];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(u.set(T.dataset.precedence,T),h=T)}h&&u.set(null,h)}g=a.instance,T=g.getAttribute("data-precedence"),_=u.get(T)||h,_===h&&u.set(null,g),u.set(T,g),this.count++,h=Wp.bind(this),g.addEventListener("load",h),g.addEventListener("error",h),_?_.parentNode.insertBefore(g,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(g,s.firstChild)),a.state.loading|=4}}var Af={$$typeof:k,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function iU(s,a,u,h,g,_,T,C,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wr(0),this.hiddenUpdates=Wr(null),this.identifierPrefix=h,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function uR(s,a,u,h,g,_,T,C,U,X,se,ue){return s=new iU(s,a,u,T,U,X,se,ue,C),a=1,_===!0&&(a|=24),_=zi(3,null,null,a),s.current=_,_.stateNode=s,a=Lv(),a.refCount++,s.pooledCache=a,a.refCount++,_.memoizedState={element:h,isDehydrated:u,cache:a},jv(_),s}function cR(s){return s?(s=Nu,s):Nu}function hR(s,a,u,h,g,_){g=cR(g),h.context===null?h.context=g:h.pendingContext=g,h=Uo(a),h.payload={element:u},_=_===void 0?null:_,_!==null&&(h.callback=_),u=Fo(s,h,a),u!==null&&(wi(u,s,a),rf(u,s,a))}function fR(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function sE(s,a){fR(s,a),(s=s.alternate)&&fR(s,a)}function dR(s){if(s.tag===13||s.tag===31){var a=el(s,67108864);a!==null&&wi(a,s,67108864),sE(s,67108864)}}function mR(s){if(s.tag===13||s.tag===31){var a=qi();a=Ba(a);var u=el(s,a);u!==null&&wi(u,s,a),sE(s,a)}}var Qp=!0;function rU(s,a,u,h){var g=ee.T;ee.T=null;var _=he.p;try{he.p=2,oE(s,a,u,h)}finally{he.p=_,ee.T=g}}function sU(s,a,u,h){var g=ee.T;ee.T=null;var _=he.p;try{he.p=8,oE(s,a,u,h)}finally{he.p=_,ee.T=g}}function oE(s,a,u,h){if(Qp){var g=aE(h);if(g===null)G0(s,a,h,Xp,u),gR(s,h);else if(aU(g,s,a,u,h))h.stopPropagation();else if(gR(s,h),a&4&&-1<oU.indexOf(s)){for(;g!==null;){var _=Xi(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var T=Gr(_.pendingLanes);if(T!==0){var C=_;for(C.pendingLanes|=2,C.entangledLanes|=2;T;){var U=1<<31-Bt(T);C.entanglements[1]|=U,T&=~U}hs(_),(gt&6)===0&&(Mp=fe()+500,Ef(0))}}break;case 31:case 13:C=el(_,2),C!==null&&wi(C,_,2),Vp(),sE(_,2)}if(_=aE(h),_===null&&G0(s,a,h,Xp,u),_===g)break;g=_}g!==null&&h.stopPropagation()}else G0(s,a,h,null,u)}}function aE(s){return s=Ji(s),lE(s)}var Xp=null;function lE(s){if(Xp=null,s=Qr(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===31){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Xp=s,null}function pR(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case pe:return 2;case We:return 8;case et:case ei:return 32;case Rs:return 268435456;default:return 32}default:return 32}}var uE=!1,Qo=null,Xo=null,Jo=null,If=new Map,Rf=new Map,ea=[],oU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gR(s,a){switch(s){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":If.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rf.delete(a.pointerId)}}function xf(s,a,u,h,g,_){return s===null||s.nativeEvent!==_?(s={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:_,targetContainers:[g]},a!==null&&(a=Xi(a),a!==null&&dR(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function aU(s,a,u,h,g){switch(a){case"focusin":return Qo=xf(Qo,s,a,u,h,g),!0;case"dragenter":return Xo=xf(Xo,s,a,u,h,g),!0;case"mouseover":return Jo=xf(Jo,s,a,u,h,g),!0;case"pointerover":var _=g.pointerId;return If.set(_,xf(If.get(_)||null,s,a,u,h,g)),!0;case"gotpointercapture":return _=g.pointerId,Rf.set(_,xf(Rf.get(_)||null,s,a,u,h,g)),!0}return!1}function _R(s){var a=Qr(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,br(s.priority,function(){mR(u)});return}}else if(a===31){if(a=c(u),a!==null){s.blockedOn=a,br(s.priority,function(){mR(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Jp(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=aE(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);jh=h,u.target.dispatchEvent(h),jh=null}else return a=Xi(u),a!==null&&dR(a),s.blockedOn=u,!1;a.shift()}return!0}function yR(s,a,u){Jp(s)&&u.delete(a)}function lU(){uE=!1,Qo!==null&&Jp(Qo)&&(Qo=null),Xo!==null&&Jp(Xo)&&(Xo=null),Jo!==null&&Jp(Jo)&&(Jo=null),If.forEach(yR),Rf.forEach(yR)}function eg(s,a){s.blockedOn===a&&(s.blockedOn=null,uE||(uE=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,lU)))}var tg=null;function vR(s){tg!==s&&(tg=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){tg===s&&(tg=null);for(var a=0;a<s.length;a+=3){var u=s[a],h=s[a+1],g=s[a+2];if(typeof h!="function"){if(lE(h||u)===null)continue;break}var _=Xi(u);_!==null&&(s.splice(a,3),a-=3,a0(_,{pending:!0,data:g,method:u.method,action:h},h,g))}}))}function tc(s){function a(U){return eg(U,s)}Qo!==null&&eg(Qo,s),Xo!==null&&eg(Xo,s),Jo!==null&&eg(Jo,s),If.forEach(a),Rf.forEach(a);for(var u=0;u<ea.length;u++){var h=ea[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<ea.length&&(u=ea[0],u.blockedOn===null);)_R(u),u.blockedOn===null&&ea.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var g=u[h],_=u[h+1],T=g[Vn]||null;if(typeof _=="function")T||vR(u);else if(T){var C=null;if(_&&_.hasAttribute("formAction")){if(g=_,T=_[Vn]||null)C=T.formAction;else if(lE(g)!==null)continue}else C=T.action;typeof C=="function"?u[h+1]=C:(u.splice(h,3),h-=3),vR(u)}}}function ER(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(T){return g=T})},focusReset:"manual",scroll:"manual"})}function a(){g!==null&&(g(),g=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,g=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),g!==null&&(g(),g=null)}}}function cE(s){this._internalRoot=s}ng.prototype.render=cE.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,h=qi();hR(u,h,s,a,null,null)},ng.prototype.unmount=cE.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;hR(s.current,2,null,s,null,null),Vp(),a[Yr]=null}};function ng(s){this._internalRoot=s}ng.prototype.unstable_scheduleHydration=function(s){if(s){var a=Vm();s={blockedOn:null,target:s,priority:a};for(var u=0;u<ea.length&&a!==0&&a<ea[u].priority;u++);ea.splice(u,0,s),u===0&&_R(s)}};var TR=e.version;if(TR!=="19.2.0")throw Error(i(527,TR,"19.2.0"));he.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(a),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var uU={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ig=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ig.isDisabled&&ig.supportsFiber)try{ai=ig.inject(uU),rn=ig}catch{}}return Nf.createRoot=function(s,a){if(!r(s))throw Error(i(299));var u=!1,h="",g=RA,_=xA,T=DA;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=uR(s,1,!1,null,null,u,h,null,g,_,T,ER),s[Yr]=a.current,H0(s),new cE(a)},Nf.hydrateRoot=function(s,a,u){if(!r(s))throw Error(i(299));var h=!1,g="",_=RA,T=xA,C=DA,U=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(g=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(T=u.onCaughtError),u.onRecoverableError!==void 0&&(C=u.onRecoverableError),u.formState!==void 0&&(U=u.formState)),a=uR(s,1,!0,a,u??null,h,g,U,_,T,C,ER),a.context=cR(null),u=a.current,h=qi(),h=Ba(h),g=Uo(h),g.callback=null,Fo(u,g,h),u=h,a.current.lanes=u,Fa(a,u),hs(a),s[Yr]=a.current,H0(s),new ng(a)},Nf.version="19.2.0",Nf}var NR;function yU(){if(NR)return dE.exports;NR=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),dE.exports=_U(),dE.exports}var vU=yU();const EU=om(vU);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PR="popstate";function TU(t={}){function e(r,o){let{pathname:l="/",search:c="",hash:f=""}=dh(r.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),ET("",{pathname:l,search:c,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){let l=r.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let f=r.location.href,d=f.indexOf("#");c=d===-1?f:f.slice(0,d)}return c+"#"+(typeof o=="string"?o:wd(o))}function i(r,o){vr(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return wU(e,n,i,t)}function An(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bU(){return Math.random().toString(36).substring(2,10)}function OR(t,e){return{usr:t.state,key:t.key,idx:e}}function ET(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?dh(e):e,state:n,key:e&&e.key||i||bU()}}function wd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function dh(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function wU(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:o=!1}=i,l=r.history,c="POP",f=null,d=p();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function p(){return(l.state||{idx:null}).idx}function y(){c="POP";let O=p(),j=O==null?null:O-d;d=O,f&&f({action:c,location:N.location,delta:j})}function v(O,j){c="PUSH";let V=ET(N.location,O,j);n&&n(V,O),d=p()+1;let k=OR(V,d),K=N.createHref(V);try{l.pushState(k,"",K)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;r.location.assign(K)}o&&f&&f({action:c,location:N.location,delta:1})}function w(O,j){c="REPLACE";let V=ET(N.location,O,j);n&&n(V,O),d=p();let k=OR(V,d),K=N.createHref(V);l.replaceState(k,"",K),o&&f&&f({action:c,location:N.location,delta:0})}function S(O){return SU(O)}let N={get action(){return c},get location(){return t(r,l)},listen(O){if(f)throw new Error("A history only accepts one active listener");return r.addEventListener(PR,y),f=O,()=>{r.removeEventListener(PR,y),f=null}},createHref(O){return e(r,O)},createURL:S,encodeLocation(O){let j=S(O);return{pathname:j.pathname,search:j.search,hash:j.hash}},push:v,replace:w,go(O){return l.go(O)}};return N}function SU(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),An(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:wd(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function WP(t,e,n="/"){return CU(t,e,n,!1)}function CU(t,e,n,i){let r=typeof e=="string"?dh(e):e,o=ao(r.pathname||"/",n);if(o==null)return null;let l=YP(t);AU(l);let c=null;for(let f=0;c==null&&f<l.length;++f){let d=LU(o);c=kU(l[f],d,i)}return c}function YP(t,e=[],n=[],i="",r=!1){let o=(l,c,f=r,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&f)return;An(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let y=no([i,p.relativePath]),v=n.concat(p);l.children&&l.children.length>0&&(An(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),YP(l.children,e,v,y,f)),!(l.path==null&&!l.index)&&e.push({path:y,score:OU(y,l.index),routesMeta:v})};return t.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))o(l,c);else for(let f of ZP(l.path))o(l,c,!0,f)}),e}function ZP(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let l=ZP(i.join("/")),c=[];return c.push(...l.map(f=>f===""?o:[o,f].join("/"))),r&&c.push(...l),c.map(f=>t.startsWith("/")&&f===""?"/":f)}function AU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:MU(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var IU=/^:[\w-]+$/,RU=3,xU=2,DU=1,NU=10,PU=-2,MR=t=>t==="*";function OU(t,e){let n=t.split("/"),i=n.length;return n.some(MR)&&(i+=PU),e&&(i+=xU),n.filter(r=>!MR(r)).reduce((r,o)=>r+(IU.test(o)?RU:o===""?DU:NU),i)}function MU(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function kU(t,e,n=!1){let{routesMeta:i}=t,r={},o="/",l=[];for(let c=0;c<i.length;++c){let f=i[c],d=c===i.length-1,p=o==="/"?e:e.slice(o.length)||"/",y=n_({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},p),v=f.route;if(!y&&d&&n&&!i[i.length-1].route.index&&(y=n_({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},p)),!y)return null;Object.assign(r,y.params),l.push({params:r,pathname:no([o,y.pathname]),pathnameBase:jU(no([o,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(o=no([o,y.pathnameBase]))}return l}function n_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=VU(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:i.reduce((d,{paramName:p,isOptional:y},v)=>{if(p==="*"){let S=c[v]||"";l=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const w=c[v];return y&&!w?d[p]=void 0:d[p]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:l,pattern:t}}function VU(t,e=!1,n=!0){vr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,f)=>(i.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function LU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ao(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function zU(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?dh(t):t;return{pathname:n?n.startsWith("/")?n:UU(n,e):e,search:BU(i),hash:qU(r)}}function UU(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function _E(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function FU(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ew(t){let e=FU(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function tw(t,e,n,i=!1){let r;typeof t=="string"?r=dh(t):(r={...t},An(!r.pathname||!r.pathname.includes("?"),_E("?","pathname","search",r)),An(!r.pathname||!r.pathname.includes("#"),_E("#","pathname","hash",r)),An(!r.search||!r.search.includes("#"),_E("#","search","hash",r)));let o=t===""||r.pathname==="",l=o?"/":r.pathname,c;if(l==null)c=n;else{let y=e.length-1;if(!i&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;r.pathname=v.join("/")}c=y>=0?e[y]:"/"}let f=zU(r,c),d=l&&l!=="/"&&l.endsWith("/"),p=(o||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(d||p)&&(f.pathname+="/"),f}var no=t=>t.join("/").replace(/\/\/+/g,"/"),jU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $U(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var QP=["POST","PUT","PATCH","DELETE"];new Set(QP);var HU=["GET",...QP];new Set(HU);var mh=A.createContext(null);mh.displayName="DataRouter";var fy=A.createContext(null);fy.displayName="DataRouterState";A.createContext(!1);var XP=A.createContext({isTransitioning:!1});XP.displayName="ViewTransition";var GU=A.createContext(new Map);GU.displayName="Fetchers";var KU=A.createContext(null);KU.displayName="Await";var qr=A.createContext(null);qr.displayName="Navigation";var dy=A.createContext(null);dy.displayName="Location";var $r=A.createContext({outlet:null,matches:[],isDataRoute:!1});$r.displayName="Route";var nw=A.createContext(null);nw.displayName="RouteError";function WU(t,{relative:e}={}){An(ph(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=A.useContext(qr),{hash:r,pathname:o,search:l}=am(t,{relative:e}),c=o;return n!=="/"&&(c=o==="/"?n:no([n,o])),i.createHref({pathname:c,search:l,hash:r})}function ph(){return A.useContext(dy)!=null}function Eo(){return An(ph(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(dy).location}var JP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eO(t){A.useContext(qr).static||A.useLayoutEffect(t)}function tO(){let{isDataRoute:t}=A.useContext($r);return t?uF():YU()}function YU(){An(ph(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(mh),{basename:e,navigator:n}=A.useContext(qr),{matches:i}=A.useContext($r),{pathname:r}=Eo(),o=JSON.stringify(ew(i)),l=A.useRef(!1);return eO(()=>{l.current=!0}),A.useCallback((f,d={})=>{if(vr(l.current,JP),!l.current)return;if(typeof f=="number"){n.go(f);return}let p=tw(f,JSON.parse(o),r,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:no([e,p.pathname])),(d.replace?n.replace:n.push)(p,d.state,d)},[e,n,o,r,t])}var ZU=A.createContext(null);function QU(t){let e=A.useContext($r).outlet;return A.useMemo(()=>e&&A.createElement(ZU.Provider,{value:t},e),[e,t])}function am(t,{relative:e}={}){let{matches:n}=A.useContext($r),{pathname:i}=Eo(),r=JSON.stringify(ew(n));return A.useMemo(()=>tw(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function XU(t,e){return nO(t)}function nO(t,e,n,i,r){An(ph(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=A.useContext(qr),{matches:l}=A.useContext($r),c=l[l.length-1],f=c?c.params:{},d=c?c.pathname:"/",p=c?c.pathnameBase:"/",y=c&&c.route;{let V=y&&y.path||"";iO(d,!y||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let v=Eo(),w;w=v;let S=w.pathname||"/",N=S;if(p!=="/"){let V=p.replace(/^\//,"").split("/");N="/"+S.replace(/^\//,"").split("/").slice(V.length).join("/")}let O=WP(t,{pathname:N});return vr(y||O!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),vr(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),iF(O&&O.map(V=>Object.assign({},V,{params:Object.assign({},f,V.params),pathname:no([p,o.encodeLocation?o.encodeLocation(V.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?p:no([p,o.encodeLocation?o.encodeLocation(V.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:V.pathnameBase])})),l,n,i,r)}function JU(){let t=lF(),e=$U(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=A.createElement(A.Fragment,null,A.createElement("p",null,"💿 Hey developer 👋"),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:o},"ErrorBoundary")," or"," ",A.createElement("code",{style:o},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:r},n):null,l)}var eF=A.createElement(JU,null),tF=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?A.createElement($r.Provider,{value:this.props.routeContext},A.createElement(nw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function nF({routeContext:t,match:e,children:n}){let i=A.useContext(mh);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement($r.Provider,{value:t},n)}function iF(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=n?.errors;if(l!=null){let d=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);An(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,f=-1;if(n)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=d),p.route.id){let{loaderData:y,errors:v}=n,w=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!v||v[p.route.id]===void 0);if(p.route.lazy||w){c=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((d,p,y)=>{let v,w=!1,S=null,N=null;n&&(v=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||eF,c&&(f<0&&y===0?(iO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,N=null):f===y&&(w=!0,N=p.route.hydrateFallbackElement||null)));let O=e.concat(o.slice(0,y+1)),j=()=>{let V;return v?V=S:w?V=N:p.route.Component?V=A.createElement(p.route.Component,null):p.route.element?V=p.route.element:V=d,A.createElement(nF,{match:p,routeContext:{outlet:d,matches:O,isDataRoute:n!=null},children:V})};return n&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?A.createElement(tF,{location:n.location,revalidation:n.revalidation,component:S,error:v,children:j(),routeContext:{outlet:null,matches:O,isDataRoute:!0},unstable_onError:i}):j()},null)}function iw(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rF(t){let e=A.useContext(mh);return An(e,iw(t)),e}function sF(t){let e=A.useContext(fy);return An(e,iw(t)),e}function oF(t){let e=A.useContext($r);return An(e,iw(t)),e}function rw(t){let e=oF(t),n=e.matches[e.matches.length-1];return An(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function aF(){return rw("useRouteId")}function lF(){let t=A.useContext(nw),e=sF("useRouteError"),n=rw("useRouteError");return t!==void 0?t:e.errors?.[n]}function uF(){let{router:t}=rF("useNavigate"),e=rw("useNavigate"),n=A.useRef(!1);return eO(()=>{n.current=!0}),A.useCallback(async(r,o={})=>{vr(n.current,JP),n.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...o}))},[t,e])}var kR={};function iO(t,e,n){!e&&!kR[t]&&(kR[t]=!0,vr(!1,n))}A.memo(cF);function cF({routes:t,future:e,state:n,unstable_onError:i}){return nO(t,void 0,n,i,e)}function VR({to:t,replace:e,state:n,relative:i}){An(ph(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=A.useContext(qr);vr(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=A.useContext($r),{pathname:l}=Eo(),c=tO(),f=tw(t,ew(o),l,i==="path"),d=JSON.stringify(f);return A.useEffect(()=>{c(JSON.parse(d),{replace:e,state:n,relative:i})},[c,d,i,e,n]),null}function hF(t){return QU(t.context)}function fF({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:o=!1}){An(!ph(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:r,static:o,future:{}}),[l,r,o]);typeof n=="string"&&(n=dh(n));let{pathname:f="/",search:d="",hash:p="",state:y=null,key:v="default"}=n,w=A.useMemo(()=>{let S=ao(f,l);return S==null?null:{location:{pathname:S,search:d,hash:p,state:y,key:v},navigationType:i}},[l,f,d,p,y,v,i]);return vr(w!=null,`<Router basename="${l}"> is not able to match the URL "${f}${d}${p}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:A.createElement(qr.Provider,{value:c},A.createElement(dy.Provider,{children:e,value:w}))}var Dg="get",Ng="application/x-www-form-urlencoded";function my(t){return t!=null&&typeof t.tagName=="string"}function dF(t){return my(t)&&t.tagName.toLowerCase()==="button"}function mF(t){return my(t)&&t.tagName.toLowerCase()==="form"}function pF(t){return my(t)&&t.tagName.toLowerCase()==="input"}function gF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function _F(t,e){return t.button===0&&(!e||e==="_self")&&!gF(t)}var rg=null;function yF(){if(rg===null)try{new FormData(document.createElement("form"),0),rg=!1}catch{rg=!0}return rg}var vF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yE(t){return t!=null&&!vF.has(t)?(vr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ng}"`),null):t}function EF(t,e){let n,i,r,o,l;if(mF(t)){let c=t.getAttribute("action");i=c?ao(c,e):null,n=t.getAttribute("method")||Dg,r=yE(t.getAttribute("enctype"))||Ng,o=new FormData(t)}else if(dF(t)||pF(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||c.getAttribute("action");if(i=f?ao(f,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Dg,r=yE(t.getAttribute("formenctype"))||yE(c.getAttribute("enctype"))||Ng,o=new FormData(c,t),!yF()){let{name:d,type:p,value:y}=t;if(p==="image"){let v=d?`${d}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else d&&o.append(d,y)}}else{if(my(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Dg,i=null,r=Ng,l=t}return o&&r==="text/plain"&&(l=o,o=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function sw(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function TF(t,e,n){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&ao(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function bF(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wF(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function SF(t,e,n){let i=await Promise.all(t.map(async r=>{let o=e.routes[r.route.id];if(o){let l=await bF(o,n);return l.links?l.links():[]}return[]}));return RF(i.flat(1).filter(wF).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function LR(t,e,n,i,r,o){let l=(f,d)=>n[d]?f.route.id!==n[d].route.id:!0,c=(f,d)=>n[d].pathname!==f.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,d)=>l(f,d)||c(f,d)):o==="data"?e.filter((f,d)=>{let p=i.routes[f.route.id];if(!p||!p.hasLoader)return!1;if(l(f,d)||c(f,d))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function CF(t,e,{includeHydrateFallback:n}={}){return AF(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function AF(t){return[...new Set(t)]}function IF(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function RF(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let o=JSON.stringify(IF(r));return n.has(o)||(n.add(o),i.push({key:o,link:r})),i},[])}function rO(){let t=A.useContext(mh);return sw(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function xF(){let t=A.useContext(fy);return sw(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ow=A.createContext(void 0);ow.displayName="FrameworkContext";function sO(){let t=A.useContext(ow);return sw(t,"You must render this element inside a <HydratedRouter> element"),t}function DF(t,e){let n=A.useContext(ow),[i,r]=A.useState(!1),[o,l]=A.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:d,onMouseLeave:p,onTouchStart:y}=e,v=A.useRef(null);A.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let N=j=>{j.forEach(V=>{l(V.isIntersecting)})},O=new IntersectionObserver(N,{threshold:.5});return v.current&&O.observe(v.current),()=>{O.disconnect()}}},[t]),A.useEffect(()=>{if(i){let N=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(N)}}},[i]);let w=()=>{r(!0)},S=()=>{r(!1),l(!1)};return n?t!=="intent"?[o,v,{}]:[o,v,{onFocus:Pf(c,w),onBlur:Pf(f,S),onMouseEnter:Pf(d,w),onMouseLeave:Pf(p,S),onTouchStart:Pf(y,w)}]:[!1,v,{}]}function Pf(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function NF({page:t,...e}){let{router:n}=rO(),i=A.useMemo(()=>WP(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?A.createElement(OF,{page:t,matches:i,...e}):null}function PF(t){let{manifest:e,routeModules:n}=sO(),[i,r]=A.useState([]);return A.useEffect(()=>{let o=!1;return SF(t,e,n).then(l=>{o||r(l)}),()=>{o=!0}},[t,e,n]),i}function OF({page:t,matches:e,...n}){let i=Eo(),{manifest:r,routeModules:o}=sO(),{basename:l}=rO(),{loaderData:c,matches:f}=xF(),d=A.useMemo(()=>LR(t,e,f,r,i,"data"),[t,e,f,r,i]),p=A.useMemo(()=>LR(t,e,f,r,i,"assets"),[t,e,f,r,i]),y=A.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let S=new Set,N=!1;if(e.forEach(j=>{let V=r.routes[j.route.id];!V||!V.hasLoader||(!d.some(k=>k.route.id===j.route.id)&&j.route.id in c&&o[j.route.id]?.shouldRevalidate||V.hasClientLoader?N=!0:S.add(j.route.id))}),S.size===0)return[];let O=TF(t,l,"data");return N&&S.size>0&&O.searchParams.set("_routes",e.filter(j=>S.has(j.route.id)).map(j=>j.route.id).join(",")),[O.pathname+O.search]},[l,c,i,r,d,e,t,o]),v=A.useMemo(()=>CF(p,r),[p,r]),w=PF(p);return A.createElement(A.Fragment,null,y.map(S=>A.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),v.map(S=>A.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),w.map(({key:S,link:N})=>A.createElement("link",{key:S,nonce:n.nonce,...N})))}function MF(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var oO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{oO&&(window.__reactRouterVersion="7.9.4")}catch{}function kF({basename:t,children:e,window:n}){let i=A.useRef();i.current==null&&(i.current=TU({window:n,v5Compat:!0}));let r=i.current,[o,l]=A.useState({action:r.action,location:r.location}),c=A.useCallback(f=>{A.startTransition(()=>l(f))},[l]);return A.useLayoutEffect(()=>r.listen(c),[r,c]),A.createElement(fF,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:r})}var aO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aw=A.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:o,replace:l,state:c,target:f,to:d,preventScrollReset:p,viewTransition:y,...v},w){let{basename:S}=A.useContext(qr),N=typeof d=="string"&&aO.test(d),O,j=!1;if(typeof d=="string"&&N&&(O=d,oO))try{let P=new URL(window.location.href),F=d.startsWith("//")?new URL(P.protocol+d):new URL(d),L=ao(F.pathname,S);F.origin===P.origin&&L!=null?d=L+F.search+F.hash:j=!0}catch{vr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=WU(d,{relative:r}),[k,K,H]=DF(i,v),ie=zF(d,{replace:l,state:c,target:f,preventScrollReset:p,relative:r,viewTransition:y});function x(P){e&&e(P),P.defaultPrevented||ie(P)}let I=A.createElement("a",{...v,...H,href:O||V,onClick:j||o?e:x,ref:MF(w,K),target:f,"data-discover":!N&&n==="render"?"true":void 0});return k&&!N?A.createElement(A.Fragment,null,I,A.createElement(NF,{page:V})):I});aw.displayName="Link";var mc=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:o,to:l,viewTransition:c,children:f,...d},p){let y=am(l,{relative:d.relative}),v=Eo(),w=A.useContext(fy),{navigator:S,basename:N}=A.useContext(qr),O=w!=null&&qF(y)&&c===!0,j=S.encodeLocation?S.encodeLocation(y).pathname:y.pathname,V=v.pathname,k=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;n||(V=V.toLowerCase(),k=k?k.toLowerCase():null,j=j.toLowerCase()),k&&N&&(k=ao(k,N)||k);const K=j!=="/"&&j.endsWith("/")?j.length-1:j.length;let H=V===j||!r&&V.startsWith(j)&&V.charAt(K)==="/",ie=k!=null&&(k===j||!r&&k.startsWith(j)&&k.charAt(j.length)==="/"),x={isActive:H,isPending:ie,isTransitioning:O},I=H?e:void 0,P;typeof i=="function"?P=i(x):P=[i,H?"active":null,ie?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let F=typeof o=="function"?o(x):o;return A.createElement(aw,{...d,"aria-current":I,className:P,ref:p,style:F,to:l,viewTransition:c},typeof f=="function"?f(x):f)});mc.displayName="NavLink";var VF=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:o,method:l=Dg,action:c,onSubmit:f,relative:d,preventScrollReset:p,viewTransition:y,...v},w)=>{let S=jF(),N=BF(c,{relative:d}),O=l.toLowerCase()==="get"?"get":"post",j=typeof c=="string"&&aO.test(c),V=k=>{if(f&&f(k),k.defaultPrevented)return;k.preventDefault();let K=k.nativeEvent.submitter,H=K?.getAttribute("formmethod")||l;S(K||k.currentTarget,{fetcherKey:e,method:H,navigate:n,replace:r,state:o,relative:d,preventScrollReset:p,viewTransition:y})};return A.createElement("form",{ref:w,method:O,action:N,onSubmit:i?f:V,...v,"data-discover":!j&&t==="render"?"true":void 0})});VF.displayName="Form";function LF(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lO(t){let e=A.useContext(mh);return An(e,LF(t)),e}function zF(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:o,viewTransition:l}={}){let c=tO(),f=Eo(),d=am(t,{relative:o});return A.useCallback(p=>{if(_F(p,e)){p.preventDefault();let y=n!==void 0?n:wd(f)===wd(d);c(t,{replace:y,state:i,preventScrollReset:r,relative:o,viewTransition:l})}},[f,c,d,n,i,e,t,r,o,l])}var UF=0,FF=()=>`__${String(++UF)}__`;function jF(){let{router:t}=lO("useSubmit"),{basename:e}=A.useContext(qr),n=aF();return A.useCallback(async(i,r={})=>{let{action:o,method:l,encType:c,formData:f,body:d}=EF(i,e);if(r.navigate===!1){let p=r.fetcherKey||FF();await t.fetch(p,n,r.action||o,{preventScrollReset:r.preventScrollReset,formData:f,body:d,formMethod:r.method||l,formEncType:r.encType||c,flushSync:r.flushSync})}else await t.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:f,body:d,formMethod:r.method||l,formEncType:r.encType||c,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,n])}function BF(t,{relative:e}={}){let{basename:n}=A.useContext(qr),i=A.useContext($r);An(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),o={...am(t||".",{relative:e})},l=Eo();if(t==null){o.search=l.search;let c=new URLSearchParams(o.search),f=c.getAll("index");if(f.some(p=>p==="")){c.delete("index"),f.filter(y=>y).forEach(y=>c.append("index",y));let p=c.toString();o.search=p?`?${p}`:""}}return(!t||t===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:no([n,o.pathname])),wd(o)}function qF(t,{relative:e}={}){let n=A.useContext(XP);An(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=lO("useViewTransitionState"),r=am(t,{relative:e});if(!n.isTransitioning)return!1;let o=ao(n.currentLocation.pathname,i)||n.currentLocation.pathname,l=ao(n.nextLocation.pathname,i)||n.nextLocation.pathname;return n_(r.pathname,l)!=null||n_(r.pathname,o)!=null}var $F=KP();const Tc=om($F),HF=()=>R.jsx("div",{children:"Groups"}),GF=()=>R.jsx("div",{children:"Users"}),KF=()=>R.jsx("div",{children:"Settings"}),WF=()=>R.jsx("div",{children:R.jsx("h3",{children:"Error404"})}),YF="_header_19c6z_1",ZF="_header__container_19c6z_19",QF="_logo_19c6z_35",XF="_left_container_19c6z_47",JF="_left_19c6z_47",e9="_center_19c6z_79",t9="_search__input_19c6z_89",n9="_right_19c6z_123",i9="_data_container_allDate_19c6z_141",r9="_clockIcon_19c6z_153",Pr={header:YF,header__container:ZF,logo:QF,left_container:XF,left:JF,center:e9,search__input:t9,right:n9,data_container_allDate:i9,clockIcon:r9},s9="/testObject/assets/logo-CDE6t0y_.png",o9="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%2020010904//EN'%20'http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd'%3e%3csvg%20version='1.0'%20xmlns='http://www.w3.org/2000/svg'%20width='512.000000pt'%20height='512.000000pt'%20viewBox='0%200%20512.000000%20512.000000'%20preserveAspectRatio='xMidYMid%20meet'%3e%3cmetadata%3e%20Created%20by%20potrace%201.16,%20written%20by%20Peter%20Selinger%202001-2019%20%3c/metadata%3e%3cg%20transform='translate(0.000000,512.000000)%20scale(0.100000,-0.100000)'%20fill='%2345897d'%20stroke='none'%3e%3cpath%20d='M2240%205105%20c-444%20-55%20-852%20-220%20-1220%20-493%20-150%20-112%20-400%20-362%20-512%20-512%20-276%20-372%20-439%20-779%20-494%20-1230%20-17%20-148%20-17%20-472%200%20-620%2055%20-451%20218%20-858%20494%20-1230%20112%20-150%20362%20-400%20512%20-512%20372%20-276%20779%20-439%201230%20-494%20148%20-17%20472%20-17%20620%200%20451%2055%20858%20218%201230%20494%20150%20112%20400%20362%20512%20512%20276%20372%20439%20779%20494%201230%2017%20148%2017%20472%200%20620%20-55%20451%20-218%20858%20-494%201230%20-112%20150%20-362%20400%20-512%20512%20-372%20276%20-779%20439%20-1230%20494%20-143%2017%20-488%2016%20-630%20-1z%20m610%20-159%20c792%20-99%201487%20-585%201848%20-1292%20182%20-358%20262%20-692%20262%20-1094%200%20-402%20-80%20-736%20-262%20-1094%20-328%20-643%20-946%20-1114%20-1657%20-1262%20-286%20-59%20-676%20-59%20-962%200%20-710%20148%20-1329%20619%20-1656%201261%20-183%20359%20-263%20692%20-263%201095%200%20318%2052%20598%20161%20872%20331%20832%201078%201408%201964%201517%20116%2014%20441%2012%20565%20-3z'/%3e%3cpath%20d='M2240%204801%20c-418%20-63%20-812%20-236%20-1117%20-491%20-68%20-56%20-73%20-63%20-73%20-100%200%20-50%2027%20-80%2073%20-80%2026%200%2052%2015%20118%2067%20249%20197%20537%20338%20836%20409%20324%2077%20699%2073%201017%20-11%20720%20-189%201312%20-781%201501%20-1501%2087%20-332%2087%20-736%200%20-1068%20-189%20-720%20-781%20-1312%20-1501%20-1501%20-332%20-87%20-736%20-87%20-1068%200%20-720%20189%20-1312%20781%20-1501%201501%20-84%20318%20-88%20693%20-11%201017%2071%20299%20212%20587%20409%20836%2052%2066%2067%2092%2067%20118%200%2046%20-30%2073%20-80%2073%20-37%200%20-44%20-5%20-100%20-72%20-261%20-313%20-436%20-719%20-494%20-1146%20-21%20-146%20-21%20-435%20-1%20-589%20132%20-1013%20935%20-1816%201948%20-1948%20153%20-20%20441%20-20%20594%200%201013%20132%201816%20935%201948%201948%2020%20153%2020%20441%200%20594%20-132%201013%20-935%201816%20-1948%201948%20-161%2021%20-466%2019%20-617%20-4z'/%3e%3cpath%20d='M2501%204494%20c-12%20-15%20-21%20-37%20-21%20-49%200%20-12%209%20-34%2021%20-49%2016%20-20%2029%20-26%2059%20-26%2030%200%2043%206%2059%2026%2012%2015%2021%2037%2021%2049%200%2012%20-9%2034%20-21%2049%20-16%2020%20-29%2026%20-59%2026%20-30%200%20-43%20-6%20-59%20-26z'/%3e%3cpath%20d='M1562%204247%20c-59%20-63%202%20-154%2084%20-127%2058%2019%2068%20111%2015%20139%20-33%2018%20-76%2013%20-99%20-12z'/%3e%3cpath%20d='M3457%204259%20c-51%20-30%20-40%20-120%2017%20-139%2060%20-20%20106%2014%20106%2078%200%2055%20-72%2091%20-123%2061z'/%3e%3cpath%20d='M1712%203987%20c-13%20-13%20-22%20-36%20-22%20-53%200%20-21%20102%20-207%20345%20-627%20l344%20-597%20-24%20-52%20c-45%20-96%20-28%20-185%2047%20-260%2026%20-27%2054%20-48%2063%20-48%2013%200%2015%20-89%2015%20-849%200%20-843%200%20-848%2021%20-875%2029%20-37%2089%20-37%20118%200%2021%2027%2021%2032%2021%20875%200%20760%202%20849%2015%20849%209%200%2037%2021%2063%2048%2073%2072%2091%20164%2051%20252%20-38%2083%20-102%20128%20-197%20139%20l-54%206%20-343%20595%20c-189%20327%20-351%20600%20-361%20607%20-29%2021%20-78%2016%20-102%20-10z'/%3e%3cpath%20d='M872%203557%20c-59%20-63%202%20-154%2084%20-127%2058%2019%2068%20111%2015%20139%20-33%2018%20-76%2013%20-99%20-12z'/%3e%3cpath%20d='M4147%203569%20c-51%20-30%20-40%20-120%2017%20-139%2060%20-20%20106%2014%20106%2078%200%2055%20-72%2091%20-123%2061z'/%3e%3cpath%20d='M626%202619%20c-37%20-29%20-37%20-89%200%20-118%2015%20-12%2037%20-21%2049%20-21%2012%200%2034%209%2049%2021%2020%2016%2026%2029%2026%2059%200%2030%20-6%2043%20-26%2059%20-15%2012%20-37%2021%20-49%2021%20-12%200%20-34%20-9%20-49%20-21z'/%3e%3cpath%20d='M4396%202619%20c-37%20-29%20-37%20-89%200%20-118%2015%20-12%2037%20-21%2049%20-21%2012%200%2034%209%2049%2021%2037%2029%2037%2089%200%20118%20-15%2012%20-37%2021%20-49%2021%20-12%200%20-34%20-9%20-49%20-21z'/%3e%3cpath%20d='M893%201690%20c-47%20-19%20-58%20-92%20-20%20-128%2025%20-24%2066%20-28%2098%20-11%2052%2027%2043%20119%20-13%20138%20-36%2013%20-36%2013%20-65%201z'/%3e%3cpath%20d='M4158%201689%20c-52%20-20%20-58%20-112%20-9%20-138%2055%20-30%20121%206%20121%2066%200%2058%20-55%2093%20-112%2072z'/%3e%3cpath%20d='M1583%201000%20c-47%20-19%20-58%20-92%20-20%20-128%2025%20-24%2066%20-28%2098%20-11%2052%2027%2043%20119%20-13%20138%20-36%2013%20-36%2013%20-65%201z'/%3e%3cpath%20d='M3468%20999%20c-52%20-20%20-58%20-112%20-9%20-138%2055%20-30%20121%206%20121%2066%200%2058%20-55%2093%20-112%2072z'/%3e%3c/g%3e%3c/svg%3e",a9=()=>{};var zR={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye=function(t,e){if(!t)throw gh(e)},gh=function(t){return new Error("Firebase Database ("+uO.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},l9=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],l=t[n++],c=t[n++],f=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},lw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],l=r+1<t.length,c=l?t[r+1]:0,f=r+2<t.length,d=f?t[r+2]:0,p=o>>2,y=(o&3)<<4|c>>4;let v=(c&15)<<2|d>>6,w=d&63;f||(w=64,l||(v=64)),i.push(n[p],n[y],n[v],n[w])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cO(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):l9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],c=r<t.length?n[t.charAt(r)]:0;++r;const d=r<t.length?n[t.charAt(r)]:64;++r;const y=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||c==null||d==null||y==null)throw new u9;const v=o<<2|c>>4;if(i.push(v),d!==64){const w=c<<4&240|d>>2;if(i.push(w),y!==64){const S=d<<6&192|y;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hO=function(t){const e=cO(t);return lw.encodeByteArray(e,!0)},i_=function(t){return hO(t).replace(/\./g,"")},r_=function(t){try{return lw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t){return fO(void 0,t)}function fO(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!h9(n)||(t[n]=fO(t[n],e[n]));return t}function h9(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f9=()=>dO().__FIREBASE_DEFAULTS__,d9=()=>{if(typeof process>"u"||typeof zR>"u")return;const t=zR.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},m9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&r_(t[1]);return e&&JSON.parse(e)},py=()=>{try{return a9()||f9()||d9()||m9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mO=t=>py()?.emulatorHosts?.[t],p9=t=>{const e=mO(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},pO=()=>py()?.config,gO=t=>py()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[i_(JSON.stringify(n)),i_(JSON.stringify(l)),""].join(".")}const ed={};function _9(){const t={prod:[],emulator:[]};for(const e of Object.keys(ed))ed[e]?t.emulator.push(e):t.prod.push(e);return t}function y9(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let UR=!1;function _O(t,e){if(typeof window>"u"||typeof document>"u"||!Pa(window.location.host)||ed[t]===e||ed[t]||UR)return;ed[t]=e;function n(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=_9().prod.length>0;function l(){const v=document.getElementById(i);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function f(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function d(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{UR=!0,l()},v}function p(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=y9(i),w=n("text"),S=document.getElementById(w)||document.createElement("span"),N=n("learnmore"),O=document.getElementById(N)||document.createElement("a"),j=n("preprendIcon"),V=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const k=v.element;c(k),p(O,N);const K=d();f(V,j),k.append(V,S,O,K),document.body.appendChild(k)}o?(S.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pn())}function yO(){const t=py()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function v9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function E9(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function T9(){const t=Pn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function b9(){return uO.NODE_ADMIN===!0}function EO(){return!yO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TO(){return!yO()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function bO(){try{return typeof indexedDB=="object"}catch{return!1}}function w9(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9="FirebaseError";class To extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=S9,Object.setPrototypeOf(this,To.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,lm.prototype.create)}}class lm{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?C9(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new To(r,c,i)}}function C9(t,e){return t.replace(A9,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const A9=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sd(t){return JSON.parse(t)}function Bn(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=function(t){let e={},n={},i={},r="";try{const o=t.split(".");e=Sd(r_(o[0])||""),n=Sd(r_(o[1])||""),r=o[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},I9=function(t){const e=wO(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},R9=function(t){const e=wO(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function jc(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function s_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function o_(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Ta(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],l=e[r];if(FR(o)&&FR(l)){if(!Ta(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function FR(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x9{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let y=0;y<16;y++)i[y]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let y=0;y<16;y++)i[y]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let y=16;y<80;y++){const v=i[y-3]^i[y-8]^i[y-14]^i[y-16];i[y]=(v<<1|v>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],l=this.chain_[2],c=this.chain_[3],f=this.chain_[4],d,p;for(let y=0;y<80;y++){y<40?y<20?(d=c^o&(l^c),p=1518500249):(d=o^l^c,p=1859775393):y<60?(d=o&l|c&(o|l),p=2400959708):(d=o^l^c,p=3395469782);const v=(r<<5|r>>>27)+d+f+p+i[y]&4294967295;f=c,c=l,l=(o<<30|o>>>2)&4294967295,o=r,r=v}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const o=this.buf_;let l=this.inbuf_;for(;r<n;){if(l===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(o[l]=e.charCodeAt(r),++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}else for(;r<n;)if(o[l]=e[r],++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}function D9(t,e){const n=new N9(t,e);return n.subscribe.bind(n)}class N9{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");P9(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=vE),r.error===void 0&&(r.error=vE),r.complete===void 0&&(r.complete=vE);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function P9(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function vE(){}function Bc(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,ye(i<t.length,"Surrogate pair missing trail surrogate.");const l=t.charCodeAt(i)-56320;r=65536+(o<<10)+l}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},gy=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t){return t&&t._delegate?t._delegate:t}class ba{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M9=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Zs;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(V9(e))try{this.getOrInitializeService({instanceIdentifier:pl})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=pl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pl){return this.instances.has(e)}getOptions(e=pl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:k9(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=pl){return this.component?this.component.multipleInstances?e:pl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function k9(t){return t===pl?void 0:t}function V9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new M9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(st||(st={}));const z9={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},U9=st.INFO,F9={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},j9=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=F9[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _y{constructor(e){this.name=e,this._logLevel=U9,this._logHandler=j9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const B9=(t,e)=>e.some(n=>t instanceof n);let jR,BR;function q9(){return jR||(jR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $9(){return BR||(BR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SO=new WeakMap,TT=new WeakMap,CO=new WeakMap,EE=new WeakMap,hw=new WeakMap;function H9(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(pa(t.result)),r()},l=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&SO.set(n,t)}).catch(()=>{}),hw.set(e,t),e}function G9(t){if(TT.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),r()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});TT.set(t,e)}let bT={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return TT.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CO.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function K9(t){bT=t(bT)}function W9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(TE(this),e,...n);return CO.set(i,e.sort?e.sort():[e]),pa(i)}:$9().includes(t)?function(...e){return t.apply(TE(this),e),pa(SO.get(this))}:function(...e){return pa(t.apply(TE(this),e))}}function Y9(t){return typeof t=="function"?W9(t):(t instanceof IDBTransaction&&G9(t),B9(t,q9())?new Proxy(t,bT):t)}function pa(t){if(t instanceof IDBRequest)return H9(t);if(EE.has(t))return EE.get(t);const e=Y9(t);return e!==t&&(EE.set(t,e),hw.set(e,t)),e}const TE=t=>hw.get(t);function Z9(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(t,e),c=pa(l);return i&&l.addEventListener("upgradeneeded",f=>{i(pa(l.result),f.oldVersion,f.newVersion,pa(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),c.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const Q9=["get","getKey","getAll","getAllKeys","count"],X9=["put","add","delete","clear"],bE=new Map;function qR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bE.get(e))return bE.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=X9.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Q9.includes(n)))return;const o=async function(l,...c){const f=this.transaction(l,r?"readwrite":"readonly");let d=f.store;return i&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),r&&f.done]))[0]};return bE.set(e,o),o}K9(t=>({...t,get:(e,n,i)=>qR(e,n)||t.get(e,n,i),has:(e,n)=>!!qR(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(e5(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function e5(t){return t.getComponent()?.type==="VERSION"}const wT="@firebase/app",$R="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=new _y("@firebase/app"),t5="@firebase/app-compat",n5="@firebase/analytics-compat",i5="@firebase/analytics",r5="@firebase/app-check-compat",s5="@firebase/app-check",o5="@firebase/auth",a5="@firebase/auth-compat",l5="@firebase/database",u5="@firebase/data-connect",c5="@firebase/database-compat",h5="@firebase/functions",f5="@firebase/functions-compat",d5="@firebase/installations",m5="@firebase/installations-compat",p5="@firebase/messaging",g5="@firebase/messaging-compat",_5="@firebase/performance",y5="@firebase/performance-compat",v5="@firebase/remote-config",E5="@firebase/remote-config-compat",T5="@firebase/storage",b5="@firebase/storage-compat",w5="@firebase/firestore",S5="@firebase/ai",C5="@firebase/firestore-compat",A5="firebase",I5="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="[DEFAULT]",R5={[wT]:"fire-core",[t5]:"fire-core-compat",[i5]:"fire-analytics",[n5]:"fire-analytics-compat",[s5]:"fire-app-check",[r5]:"fire-app-check-compat",[o5]:"fire-auth",[a5]:"fire-auth-compat",[l5]:"fire-rtdb",[u5]:"fire-data-connect",[c5]:"fire-rtdb-compat",[h5]:"fire-fn",[f5]:"fire-fn-compat",[d5]:"fire-iid",[m5]:"fire-iid-compat",[p5]:"fire-fcm",[g5]:"fire-fcm-compat",[_5]:"fire-perf",[y5]:"fire-perf-compat",[v5]:"fire-rc",[E5]:"fire-rc-compat",[T5]:"fire-gcs",[b5]:"fire-gcs-compat",[w5]:"fire-fst",[C5]:"fire-fst-compat",[S5]:"fire-vertex","fire-js":"fire-js",[A5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_=new Map,x5=new Map,CT=new Map;function HR(t,e){try{t.container.addComponent(e)}catch(n){lo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ql(t){const e=t.name;if(CT.has(e))return lo.debug(`There were multiple attempts to register component ${e}.`),!1;CT.set(e,t);for(const n of a_.values())HR(n,t);for(const n of x5.values())HR(n,t);return!0}function yy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ga=new lm("app","Firebase",D5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ba("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ga.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=I5;function AO(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:ST,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw ga.create("bad-app-name",{appName:String(r)});if(n||(n=pO()),!n)throw ga.create("no-options");const o=a_.get(r);if(o){if(Ta(n,o.options)&&Ta(i,o.config))return o;throw ga.create("duplicate-app",{appName:r})}const l=new L9(r);for(const f of CT.values())l.addComponent(f);const c=new N5(n,i,l);return a_.set(r,c),c}function IO(t=ST){const e=a_.get(t);if(!e&&t===ST&&pO())return AO();if(!e)throw ga.create("no-app",{appName:t});return e}function vs(t,e,n){let i=R5[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const l=[`Unable to register library "${i}" with version "${e}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),lo.warn(l.join(" "));return}ql(new ba(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5="firebase-heartbeat-database",O5=1,Cd="firebase-heartbeat-store";let wE=null;function RO(){return wE||(wE=Z9(P5,O5,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cd)}catch(n){console.warn(n)}}}}).catch(t=>{throw ga.create("idb-open",{originalErrorMessage:t.message})})),wE}async function M5(t){try{const n=(await RO()).transaction(Cd),i=await n.objectStore(Cd).get(xO(t));return await n.done,i}catch(e){if(e instanceof To)lo.warn(e.message);else{const n=ga.create("idb-get",{originalErrorMessage:e?.message});lo.warn(n.message)}}}async function GR(t,e){try{const i=(await RO()).transaction(Cd,"readwrite");await i.objectStore(Cd).put(e,xO(t)),await i.done}catch(n){if(n instanceof To)lo.warn(n.message);else{const i=ga.create("idb-set",{originalErrorMessage:n?.message});lo.warn(i.message)}}}function xO(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k5=1024,V5=30;class L5{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new U5(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=KR();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>V5){const r=F5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){lo.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=KR(),{heartbeatsToSend:n,unsentEntries:i}=z5(this._heartbeatsCache.heartbeats),r=i_(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return lo.warn(e),""}}}function KR(){return new Date().toISOString().substring(0,10)}function z5(t,e=k5){const n=[];let i=t.slice();for(const r of t){const o=n.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),WR(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),WR(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class U5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bO()?w9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await M5(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return GR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return GR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function WR(t){return i_(JSON.stringify({version:2,heartbeats:t})).length}function F5(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(t){ql(new ba("platform-logger",e=>new J9(e),"PRIVATE")),ql(new ba("heartbeat",e=>new L5(e),"PRIVATE")),vs(wT,$R,t),vs(wT,$R,"esm2020"),vs("fire-js","")}j5("");var YR={};const ZR="@firebase/database",QR="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DO="";function B5(t){DO=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Bn(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Sd(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Is(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new q5(e)}}catch{}return new $5},Rl=NO("localStorage"),H5=NO("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new _y("@firebase/database"),G5=(function(){let t=1;return function(){return t++}})(),PO=function(t){const e=O9(t),n=new x9;n.update(e);const i=n.digest();return lw.encodeByteArray(i)},um=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=um.apply(null,i):typeof i=="object"?e+=Bn(i):e+=i,e+=" "}return e};let td=null,XR=!0;const K5=function(t,e){ye(!0,"Can't turn on custom loggers persistently."),Dc.logLevel=st.VERBOSE,td=Dc.log.bind(Dc)},Xn=function(...t){if(XR===!0&&(XR=!1,td===null&&H5.get("logging_enabled")===!0&&K5()),td){const e=um.apply(null,t);td(e)}},cm=function(t){return function(...e){Xn(t,...e)}},AT=function(...t){const e="FIREBASE INTERNAL ERROR: "+um(...t);Dc.error(e)},uo=function(...t){const e=`FIREBASE FATAL ERROR: ${um(...t)}`;throw Dc.error(e),new Error(e)},Di=function(...t){const e="FIREBASE WARNING: "+um(...t);Dc.warn(e)},W5=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Di("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},vy=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Y5=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},qc="[MIN_NAME]",$l="[MAX_NAME]",au=function(t,e){if(t===e)return 0;if(t===qc||e===$l)return-1;if(e===qc||t===$l)return 1;{const n=JR(t),i=JR(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},Z5=function(t,e){return t===e?0:t<e?-1:1},Of=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Bn(e))},fw=function(t){if(typeof t!="object"||t===null)return Bn(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Bn(e[i]),n+=":",n+=fw(t[e[i]]);return n+="}",n},OO=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function oi(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const MO=function(t){ye(!vy(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,o,l,c,f;t===0?(o=0,l=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(c=Math.min(Math.floor(Math.log(t)/Math.LN2),i),o=c+i,l=Math.round(t*Math.pow(2,n-c)-Math.pow(2,n))):(o=0,l=Math.round(t/Math.pow(2,1-i-n))));const d=[];for(f=n;f;f-=1)d.push(l%2?1:0),l=Math.floor(l/2);for(f=e;f;f-=1)d.push(o%2?1:0),o=Math.floor(o/2);d.push(r?1:0),d.reverse();const p=d.join("");let y="";for(f=0;f<64;f+=8){let v=parseInt(p.substr(f,8),2).toString(16);v.length===1&&(v="0"+v),y=y+v}return y.toLowerCase()},Q5=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},X5=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function J5(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const ej=new RegExp("^-?(0*)\\d{1,10}$"),tj=-2147483648,nj=2147483647,JR=function(t){if(ej.test(t)){const e=Number(t);if(e>=tj&&e<=nj)return e}return null},yh=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Di("Exception was thrown by user callback.",n),e},Math.floor(0))}},ij=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},nd=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,kr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(n=>n.addTokenListener(e))}notifyForInvalidToken(){Di(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Xn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Di(e)}}class Pg{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Pg.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="5",kO="v",VO="s",LO="r",zO="f",UO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,FO="ls",jO="p",IT="ac",BO="websocket",qO="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n,i,r,o=!1,l="",c=!1,f=!1,d=null){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=f,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rl.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Rl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function oj(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function HO(t,e,n){ye(typeof e=="string","typeof type must == string"),ye(typeof n=="object","typeof params must == object");let i;if(e===BO)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===qO)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);oj(t)&&(n.ns=t.namespace);const r=[];return oi(n,(o,l)=>{r.push(o+"="+l)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.counters_={}}incrementCounter(e,n=1){Is(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return c9(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE={},CE={};function mw(t){const e=t.toString();return SE[e]||(SE[e]=new aj),SE[e]}function lj(t,e){const n=t.toString();return CE[n]||(CE[n]=e()),CE[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&yh(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="start",cj="close",hj="pLPCommand",fj="pRTLPCB",GO="id",KO="pw",WO="ser",dj="cb",mj="seg",pj="ts",gj="d",_j="dframe",YO=1870,ZO=30,yj=YO-ZO,vj=25e3,Ej=3e4;class bc{constructor(e,n,i,r,o,l,c){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cm(e),this.stats_=mw(n),this.urlFn=f=>(this.appCheckToken&&(f[IT]=this.appCheckToken),HO(n,qO,f))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new uj(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Ej)),Y5(()=>{if(this.isClosed_)return;this.scriptTagHolder=new pw((...o)=>{const[l,c,f,d,p]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===ex)this.id=c,this.password=f;else if(l===cj)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const i={};i[ex]="t",i[WO]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[dj]=this.scriptTagHolder.uniqueCallbackIdentifier),i[kO]=dw,this.transportSessionId&&(i[VO]=this.transportSessionId),this.lastSessionId&&(i[FO]=this.lastSessionId),this.applicationId&&(i[jO]=this.applicationId),this.appCheckToken&&(i[IT]=this.appCheckToken),typeof location<"u"&&location.hostname&&UO.test(location.hostname)&&(i[LO]=zO);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){bc.forceAllow_=!0}static forceDisallow(){bc.forceDisallow_=!0}static isAvailable(){return bc.forceAllow_?!0:!bc.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Q5()&&!X5()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Bn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=hO(n),r=OO(i,yj);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[_j]="t",i[GO]=e,i[KO]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Bn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class pw{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=G5(),window[hj+this.uniqueCallbackIdentifier]=e,window[fj+this.uniqueCallbackIdentifier]=n,this.myIFrame=pw.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){Xn("frame writing exception"),c.stack&&Xn(c.stack),Xn(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Xn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[GO]=this.myID,e[KO]=this.myPW,e[WO]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ZO+i.length<=YO;){const l=this.pendingSegs.shift();i=i+"&"+mj+r+"="+l.seg+"&"+pj+r+"="+l.ts+"&"+gj+r+"="+l.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(vj)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Xn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=16384,bj=45e3;let l_=null;typeof MozWebSocket<"u"?l_=MozWebSocket:typeof WebSocket<"u"&&(l_=WebSocket);class Vr{constructor(e,n,i,r,o,l,c){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cm(this.connId),this.stats_=mw(n),this.connURL=Vr.connectionURL_(n,l,c,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,o){const l={};return l[kO]=dw,typeof location<"u"&&location.hostname&&UO.test(location.hostname)&&(l[LO]=zO),n&&(l[VO]=n),i&&(l[FO]=i),r&&(l[IT]=r),o&&(l[jO]=o),HO(e,BO,l)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rl.set("previous_websocket_failure",!0);try{let i;b9(),this.mySock=new l_(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Vr.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&l_!==null&&!Vr.forceDisallow_}static previouslyFailed(){return Rl.isInMemoryStorage||Rl.get("previous_websocket_failure")===!0}markConnectionHealthy(){Rl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=Sd(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ye(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Bn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=OO(n,Tj);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(bj))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Vr.responsesRequiredToBeHealthy=2;Vr.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{static get ALL_TRANSPORTS(){return[bc,Vr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=Vr&&Vr.isAvailable();let i=n&&!Vr.previouslyFailed();if(e.webSocketOnly&&(n||Di("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Vr];else{const r=this.transports_=[];for(const o of Ad.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);Ad.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ad.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=6e4,Sj=5e3,Cj=10*1024,Aj=100*1024,AE="t",tx="d",Ij="s",nx="r",Rj="e",ix="o",rx="a",sx="n",ox="p",xj="h";class Dj{constructor(e,n,i,r,o,l,c,f,d,p){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=f,this.onKill_=d,this.lastSessionId=p,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cm("c:"+this.id+":"),this.transportManager_=new Ad(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=nd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Aj?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Cj?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(AE in e){const n=e[AE];n===rx?this.upgradeIfSecondaryHealthy_():n===nx?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===ix&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Of("t",e),i=Of("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:ox,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:rx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:sx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Of("t",e),i=Of("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Of(AE,e);if(tx in e){const i=e[tx];if(n===xj){const r={...i};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===sx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Ij?this.onConnectionShutdown_(i):n===nx?this.onReset_(i):n===Rj?AT("Server Error: "+i):n===ix?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):AT("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),dw!==i&&Di("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),nd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(wj))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):nd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Sj))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:ox,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.allowedEvents_=e,this.listeners_={},ye(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===n&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){ye(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_ extends XO{static getInstance(){return new u_}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!cw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ye(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=32,lx=768;class It{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function yt(){return new It("")}function Xe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function wa(t){return t.pieces_.length-t.pieceNum_}function Mt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new It(t.pieces_,e)}function gw(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Nj(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Id(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function JO(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new It(e,0)}function cn(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof It)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new It(n,0)}function tt(t){return t.pieceNum_>=t.pieces_.length}function Ii(t,e){const n=Xe(t),i=Xe(e);if(n===null)return e;if(n===i)return Ii(Mt(t),Mt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Pj(t,e){const n=Id(t,0),i=Id(e,0);for(let r=0;r<n.length&&r<i.length;r++){const o=au(n[r],i[r]);if(o!==0)return o}return n.length===i.length?0:n.length<i.length?-1:1}function _w(t,e){if(wa(t)!==wa(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function dr(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(wa(t)>wa(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class Oj{constructor(e,n){this.errorPrefix_=n,this.parts_=Id(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=gy(this.parts_[i]);eM(this)}}function Mj(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=gy(e),eM(t)}function kj(t){const e=t.parts_.pop();t.byteLength_-=gy(e),t.parts_.length>0&&(t.byteLength_-=1)}function eM(t){if(t.byteLength_>lx)throw new Error(t.errorPrefix_+"has a key path longer than "+lx+" bytes ("+t.byteLength_+").");if(t.parts_.length>ax)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ax+") or object contains a cycle "+gl(t))}function gl(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw extends XO{static getInstance(){return new yw}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return ye(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf=1e3,Vj=300*1e3,ux=30*1e3,Lj=1.3,zj=3e4,Uj="server_kill",cx=3;class io extends QO{constructor(e,n,i,r,o,l,c,f){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=f,this.id=io.nextPersistentConnectionId_++,this.log_=cm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Mf,this.maxReconnectDelay_=Vj,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yw.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&u_.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,o={r,a:e,b:n};this.log_(Bn(o)),ye(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new Zs,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const c=l.d;l.s==="ok"?n.resolve(c):n.reject(c)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,i,r){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),ye(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ye(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const c={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(l).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const o={p:i},l="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,c=>{const f=c.d,d=c.s;io.warnOnListenWarnings_(f,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(d,f))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Is(e,"w")){const i=jc(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();Di(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||R9(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ux)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=I9(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const o=r.s,l=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),ye(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const o={p:e},l="n";r&&(o.q=i,o.t=r),this.sendRequest(l,o)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const o={p:n,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{r&&setTimeout(()=>{r(l.s,l.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,o){this.initConnection_();const l={p:n,d:i};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:r}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Bn(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):AT("Unrecognized action received from server: "+Bn(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ye(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Mf,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Mf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>zj&&(this.reconnectDelay_=Mf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Lj)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+io.nextConnectionId_++,o=this.lastSessionId;let l=!1,c=null;const f=function(){c?c.close():(l=!0,i())},d=function(y){ye(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(y)};this.realtime_={close:f,sendRequest:d};const p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,v]=await Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);l?Xn("getToken() completed but was canceled"):(Xn("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=v&&v.token,c=new Dj(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,w=>{Di(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(Uj)},o))}catch(y){this.log_("Failed to get token: "+y),l||(this.repoInfo_.nodeAdmin&&Di(y),f())}}}interrupt(e){Xn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Xn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],s_(this.interruptReasons_)&&(this.reconnectDelay_=Mf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(o=>fw(o)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new It(e).toString();let r;if(this.listens.has(i)){const o=this.listens.get(i);r=o.get(n),o.delete(n),o.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){Xn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=cx&&(this.reconnectDelay_=ux,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Xn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=cx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+DO.replace(/\./g,"-")]=1,cw()?e["framework.cordova"]=1:vO()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=u_.getInstance().currentlyOnline();return s_(this.interruptReasons_)&&e}}io.nextPersistentConnectionId_=0;io.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new nt(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new nt(qc,e),r=new nt(qc,n);return this.compare(i,r)!==0}minPost(){return nt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg;class tM extends Ey{static get __EMPTY_NODE(){return sg}static set __EMPTY_NODE(e){sg=e}compare(e,n){return au(e.name,n.name)}isDefinedOn(e){throw gh("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return nt.MIN}maxPost(){return new nt($l,sg)}makePost(e,n){return ye(typeof e=="string","KeyIndex indexValue must always be a string."),new nt(e,sg)}toString(){return".key"}}const Nc=new tM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let og=class{constructor(e,n,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=n?i(e.key,n):1,r&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},$i=class Hf{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Hf.RED,this.left=r??gs.EMPTY_NODE,this.right=o??gs.EMPTY_NODE}copy(e,n,i,r,o){return new Hf(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return gs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return gs.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Hf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Hf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};$i.RED=!0;$i.BLACK=!1;class Fj{copy(e,n,i,r,o){return this}insert(e,n,i){return new $i(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let gs=class Og{constructor(e,n=Og.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Og(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,$i.BLACK,null,null))}remove(e){return new Og(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$i.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new og(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new og(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new og(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new og(this.root_,null,this.comparator_,!0,e)}};gs.EMPTY_NODE=new Fj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(t,e){return au(t.name,e.name)}function vw(t,e){return au(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RT;function Bj(t){RT=t}const nM=function(t){return typeof t=="number"?"number:"+MO(t):"string:"+t},iM=function(t){if(t.isLeafNode()){const e=t.val();ye(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Is(e,".sv"),"Priority must be a string or number.")}else ye(t===RT||t.isEmpty(),"priority of unexpected type.");ye(t===RT||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hx;class Fn{static set __childrenNodeConstructor(e){hx=e}static get __childrenNodeConstructor(){return hx}constructor(e,n=Fn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ye(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),iM(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Fn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Fn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return tt(e)?this:Xe(e)===".priority"?this.priorityNode_:Fn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Fn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Xe(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(ye(i!==".priority"||wa(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Fn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Mt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+nM(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=MO(this.value_):e+=this.value_,this.lazyHash_=PO(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Fn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Fn.__childrenNodeConstructor?-1:(ye(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=Fn.VALUE_TYPE_ORDER.indexOf(n),o=Fn.VALUE_TYPE_ORDER.indexOf(i);return ye(r>=0,"Unknown leaf type: "+n),ye(o>=0,"Unknown leaf type: "+i),r===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Fn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rM,sM;function qj(t){rM=t}function $j(t){sM=t}class Hj extends Ey{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),o=i.compareTo(r);return o===0?au(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return nt.MIN}maxPost(){return new nt($l,new Fn("[PRIORITY-POST]",sM))}makePost(e,n){const i=rM(e);return new nt(n,new Fn("[PRIORITY-POST]",i))}toString(){return".priority"}}const Qt=new Hj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=Math.log(2);class Kj{constructor(e){const n=o=>parseInt(Math.log(o)/Gj,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const c_=function(t,e,n,i){t.sort(e);const r=function(f,d){const p=d-f;let y,v;if(p===0)return null;if(p===1)return y=t[f],v=n?n(y):y,new $i(v,y.node,$i.BLACK,null,null);{const w=parseInt(p/2,10)+f,S=r(f,w),N=r(w+1,d);return y=t[w],v=n?n(y):y,new $i(v,y.node,$i.BLACK,S,N)}},o=function(f){let d=null,p=null,y=t.length;const v=function(S,N){const O=y-S,j=y;y-=S;const V=r(O+1,j),k=t[O],K=n?n(k):k;w(new $i(K,k.node,N,null,V))},w=function(S){d?(d.left=S,d=S):(p=S,d=S)};for(let S=0;S<f.count;++S){const N=f.nextBitIsOne(),O=Math.pow(2,f.count-(S+1));N?v(O,$i.BLACK):(v(O,$i.BLACK),v(O,$i.RED))}return p},l=new Kj(t.length),c=o(l);return new gs(i||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IE;const nc={};class Qs{static get Default(){return ye(nc&&Qt,"ChildrenNode.ts has not been loaded"),IE=IE||new Qs({".priority":nc},{".priority":Qt}),IE}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=jc(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof gs?n:null}hasIndex(e){return Is(this.indexSet_,e.toString())}addIndex(e,n){ye(e!==Nc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=n.getIterator(nt.Wrap);let l=o.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=o.getNext();let c;r?c=c_(i,e.getCompare()):c=nc;const f=e.toString(),d={...this.indexSet_};d[f]=e;const p={...this.indexes_};return p[f]=c,new Qs(p,d)}addToIndexes(e,n){const i=o_(this.indexes_,(r,o)=>{const l=jc(this.indexSet_,o);if(ye(l,"Missing index implementation for "+o),r===nc)if(l.isDefinedOn(e.node)){const c=[],f=n.getIterator(nt.Wrap);let d=f.getNext();for(;d;)d.name!==e.name&&c.push(d),d=f.getNext();return c.push(e),c_(c,l.getCompare())}else return nc;else{const c=n.get(e.name);let f=r;return c&&(f=f.remove(new nt(e.name,c))),f.insert(e,e.node)}});return new Qs(i,this.indexSet_)}removeFromIndexes(e,n){const i=o_(this.indexes_,r=>{if(r===nc)return r;{const o=n.get(e.name);return o?r.remove(new nt(e.name,o)):r}});return new Qs(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf;class ze{static get EMPTY_NODE(){return kf||(kf=new ze(new gs(vw),null,Qs.Default))}constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&iM(this.priorityNode_),this.children_.isEmpty()&&ye(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||kf}updatePriority(e){return this.children_.isEmpty()?this:new ze(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?kf:n}}getChild(e){const n=Xe(e);return n===null?this:this.getImmediateChild(n).getChild(Mt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ye(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new nt(e,n);let r,o;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));const l=r.isEmpty()?kf:this.priorityNode_;return new ze(r,l,o)}}updateChild(e,n){const i=Xe(e);if(i===null)return n;{ye(Xe(e)!==".priority"||wa(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(Mt(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,o=!0;if(this.forEachChild(Qt,(l,c)=>{n[l]=c.val(e),i++,o&&ze.INTEGER_REGEXP_.test(l)?r=Math.max(r,Number(l)):o=!1}),!e&&o&&r<2*i){const l=[];for(const c in n)l[c]=n[c];return l}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+nM(this.getPriority().val())+":"),this.forEachChild(Qt,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":PO(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const o=r.getPredecessorKey(new nt(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new nt(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new nt(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,nt.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,nt.Wrap);let o=r.peek();for(;o!=null&&n.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===hm?-1:0}withIndex(e){if(e===Nc||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ze(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Nc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(Qt),r=n.getIterator(Qt);let o=i.getNext(),l=r.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=i.getNext(),l=r.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===Nc?null:this.indexMap_.get(e.toString())}}ze.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Wj extends ze{constructor(){super(new gs(vw),ze.EMPTY_NODE,Qs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ze.EMPTY_NODE}isEmpty(){return!1}}const hm=new Wj;Object.defineProperties(nt,{MIN:{value:new nt(qc,ze.EMPTY_NODE)},MAX:{value:new nt($l,hm)}});tM.__EMPTY_NODE=ze.EMPTY_NODE;Fn.__childrenNodeConstructor=ze;Bj(hm);$j(hm);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=!0;function Sn(t,e=null){if(t===null)return ze.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),ye(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Fn(n,Sn(e))}if(!(t instanceof Array)&&Yj){const n=[];let i=!1;if(oi(t,(l,c)=>{if(l.substring(0,1)!=="."){const f=Sn(c);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),n.push(new nt(l,f)))}}),n.length===0)return ze.EMPTY_NODE;const o=c_(n,jj,l=>l.name,vw);if(i){const l=c_(n,Qt.getCompare());return new ze(o,Sn(e),new Qs({".priority":l},{".priority":Qt}))}else return new ze(o,Sn(e),Qs.Default)}else{let n=ze.EMPTY_NODE;return oi(t,(i,r)=>{if(Is(t,i)&&i.substring(0,1)!=="."){const o=Sn(r);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(i,o))}}),n.updatePriority(Sn(e))}}qj(Sn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj extends Ey{constructor(e){super(),this.indexPath_=e,ye(!tt(e)&&Xe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),o=i.compareTo(r);return o===0?au(e.name,n.name):o}makePost(e,n){const i=Sn(e),r=ze.EMPTY_NODE.updateChild(this.indexPath_,i);return new nt(n,r)}maxPost(){const e=ze.EMPTY_NODE.updateChild(this.indexPath_,hm);return new nt($l,e)}toString(){return Id(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj extends Ey{compare(e,n){const i=e.node.compareTo(n.node);return i===0?au(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return nt.MIN}maxPost(){return nt.MAX}makePost(e,n){const i=Sn(e);return new nt(n,i)}toString(){return".value"}}const Xj=new Qj;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(t){return{type:"value",snapshotNode:t}}function $c(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Rd(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function xd(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Jj(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.index_=e}updateChild(e,n,i,r,o,l){ye(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(n);return c.getChild(r).equals(i.getChild(r))&&c.isEmpty()===i.isEmpty()||(l!=null&&(i.isEmpty()?e.hasChild(n)?l.trackChildChange(Rd(n,c)):ye(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?l.trackChildChange($c(n,i)):l.trackChildChange(xd(n,i,c))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Qt,(r,o)=>{n.hasChild(r)||i.trackChildChange(Rd(r,o))}),n.isLeafNode()||n.forEachChild(Qt,(r,o)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(o)||i.trackChildChange(xd(r,o,l))}else i.trackChildChange($c(r,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ze.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e){this.indexedFilter_=new Ew(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Dd.getStartPost_(e),this.endPost_=Dd.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,o,l){return this.matches(new nt(n,i))||(i=ze.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,o,l)}updateFullNode(e,n,i){n.isLeafNode()&&(n=ze.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(ze.EMPTY_NODE);const o=this;return n.forEachChild(Qt,(l,c)=>{o.matches(new nt(l,c))||(r=r.updateImmediateChild(l,ze.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eB{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Dd(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,o,l){return this.rangedFilter_.matches(new nt(n,i))||(i=ze.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,o,l):this.fullLimitUpdateChild_(e,n,i,o,l)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=ze.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=ze.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const c=o.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))r=r.updateImmediateChild(c.name,c.node),l++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(ze.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let l=0;for(;o.hasNext();){const c=o.getNext();l<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?l++:r=r.updateImmediateChild(c.name,ze.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,o){let l;if(this.reverse_){const y=this.index_.getCompare();l=(v,w)=>y(w,v)}else l=this.index_.getCompare();const c=e;ye(c.numChildren()===this.limit_,"");const f=new nt(n,i),d=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),p=this.rangedFilter_.matches(f);if(c.hasChild(n)){const y=c.getImmediateChild(n);let v=r.getChildAfterChild(this.index_,d,this.reverse_);for(;v!=null&&(v.name===n||c.hasChild(v.name));)v=r.getChildAfterChild(this.index_,v,this.reverse_);const w=v==null?1:l(v,f);if(p&&!i.isEmpty()&&w>=0)return o?.trackChildChange(xd(n,i,y)),c.updateImmediateChild(n,i);{o?.trackChildChange(Rd(n,y));const N=c.updateImmediateChild(n,ze.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(o?.trackChildChange($c(v.name,v.node)),N.updateImmediateChild(v.name,v.node)):N}}else return i.isEmpty()?e:p&&l(d,f)>=0?(o!=null&&(o.trackChildChange(Rd(d.name,d.node)),o.trackChildChange($c(n,i))),c.updateImmediateChild(n,i).updateImmediateChild(d.name,ze.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Qt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ye(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ye(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qc}hasEnd(){return this.endSet_}getIndexEndValue(){return ye(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ye(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$l}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ye(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Qt}copy(){const e=new Tw;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function tB(t){return t.loadsAllData()?new Ew(t.getIndex()):t.hasLimit()?new eB(t):new Dd(t)}function fx(t){const e={};if(t.isDefault())return e;let n;if(t.index_===Qt?n="$priority":t.index_===Xj?n="$value":t.index_===Nc?n="$key":(ye(t.index_ instanceof Zj,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Bn(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Bn(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Bn(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Bn(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Bn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function dx(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Qt&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_ extends QO{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ye(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=cm("p:rest:"),this.listens_={}}listen(e,n,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=h_.getListenId_(e,i),c={};this.listens_[l]=c;const f=fx(e._queryParams);this.restRequest_(o+".json",f,(d,p)=>{let y=p;if(d===404&&(y=null,d=null),d===null&&this.onDataUpdate_(o,y,!1,i),jc(this.listens_,l)===c){let v;d?d===401?v="permission_denied":v="rest_error:"+d:v="ok",r(v,null)}})}unlisten(e,n){const i=h_.getListenId_(e,n);delete this.listens_[i]}get(e){const n=fx(e._queryParams),i=e._path.toString(),r=new Zs;return this.restRequest_(i+".json",n,(o,l)=>{let c=l;o===404&&(c=null,o=null),o===null?(this.onDataUpdate_(i,c,!1,null),r.resolve(c)):r.reject(new Error(c))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(n.auth=r.accessToken),o&&o.token&&(n.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_h(n);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(i&&c.readyState===4){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let f=null;if(c.status>=200&&c.status<300){try{f=Sd(c.responseText)}catch{Di("Failed to parse JSON response for "+l+": "+c.responseText)}i(null,f)}else c.status!==401&&c.status!==404&&Di("Got unsuccessful REST response for "+l+" Status: "+c.status),i(c.status);i=null}},c.open("GET",l,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nB{constructor(){this.rootNode_=ze.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f_(){return{value:null,children:new Map}}function vh(t,e,n){if(tt(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=Xe(e);t.children.has(i)||t.children.set(i,f_());const r=t.children.get(i);e=Mt(e),vh(r,e,n)}}function xT(t,e){if(tt(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{const n=t.value;return t.value=null,n.forEachChild(Qt,(i,r)=>{vh(t,new It(i),r)}),xT(t,e)}}else if(t.children.size>0){const n=Xe(e);return e=Mt(e),t.children.has(n)&&xT(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function DT(t,e,n){t.value!==null?n(e,t.value):iB(t,(i,r)=>{const o=new It(e.toString()+"/"+i);DT(r,o,n)})}function iB(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&oi(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=10*1e3,sB=30*1e3,oB=300*1e3;class aB{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new rB(e);const i=mx+(sB-mx)*Math.random();nd(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;oi(e,(r,o)=>{o>0&&Is(this.statsToReport_,r)&&(n[r]=o,i=!0)}),i&&this.server_.reportStats(n),nd(this.reportStats_.bind(this),Math.floor(Math.random()*2*oB))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Fr||(Fr={}));function aM(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bw(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ww(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Fr.ACK_USER_WRITE,this.source=aM()}operationForChild(e){if(tt(this.path)){if(this.affectedTree.value!=null)return ye(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new It(e));return new d_(yt(),n,this.revert)}}else return ye(Xe(this.path)===e,"operationForChild called for unrelated child."),new d_(Mt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.source=e,this.path=n,this.type=Fr.LISTEN_COMPLETE}operationForChild(e){return tt(this.path)?new Nd(this.source,yt()):new Nd(this.source,Mt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Fr.OVERWRITE}operationForChild(e){return tt(this.path)?new Hl(this.source,yt(),this.snap.getImmediateChild(e)):new Hl(this.source,Mt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Fr.MERGE}operationForChild(e){if(tt(this.path)){const n=this.children.subtree(new It(e));return n.isEmpty()?null:n.value?new Hl(this.source,yt(),n.value):new Pd(this.source,yt(),n)}else return ye(Xe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Pd(this.source,Mt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(tt(e))return this.isFullyInitialized()&&!this.filtered_;const n=Xe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lB{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function uB(t,e,n,i){const r=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&t.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(Jj(l.childName,l.snapshotNode))}),Vf(t,r,"child_removed",e,i,n),Vf(t,r,"child_added",e,i,n),Vf(t,r,"child_moved",o,i,n),Vf(t,r,"child_changed",e,i,n),Vf(t,r,"value",e,i,n),r}function Vf(t,e,n,i,r,o){const l=i.filter(c=>c.type===n);l.sort((c,f)=>hB(t,c,f)),l.forEach(c=>{const f=cB(t,c,o);r.forEach(d=>{d.respondsTo(c.type)&&e.push(d.createEvent(f,t.query_))})})}function cB(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function hB(t,e,n){if(e.childName==null||n.childName==null)throw gh("Should only compare child_ events.");const i=new nt(e.childName,e.snapshotNode),r=new nt(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(t,e){return{eventCache:t,serverCache:e}}function id(t,e,n,i){return Ty(new Gl(e,n,i),t.serverCache)}function lM(t,e,n,i){return Ty(t.eventCache,new Gl(e,n,i))}function NT(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Kl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RE;const fB=()=>(RE||(RE=new gs(Z5)),RE);class jt{static fromObject(e){let n=new jt(null);return oi(e,(i,r)=>{n=n.set(new It(i),r)}),n}constructor(e,n=fB()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:yt(),value:this.value};if(tt(e))return null;{const i=Xe(e),r=this.children.get(i);if(r!==null){const o=r.findRootMostMatchingPathAndValue(Mt(e),n);return o!=null?{path:cn(new It(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(tt(e))return this;{const n=Xe(e),i=this.children.get(n);return i!==null?i.subtree(Mt(e)):new jt(null)}}set(e,n){if(tt(e))return new jt(n,this.children);{const i=Xe(e),o=(this.children.get(i)||new jt(null)).set(Mt(e),n),l=this.children.insert(i,o);return new jt(this.value,l)}}remove(e){if(tt(e))return this.children.isEmpty()?new jt(null):new jt(null,this.children);{const n=Xe(e),i=this.children.get(n);if(i){const r=i.remove(Mt(e));let o;return r.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,r),this.value===null&&o.isEmpty()?new jt(null):new jt(this.value,o)}else return this}}get(e){if(tt(e))return this.value;{const n=Xe(e),i=this.children.get(n);return i?i.get(Mt(e)):null}}setTree(e,n){if(tt(e))return n;{const i=Xe(e),o=(this.children.get(i)||new jt(null)).setTree(Mt(e),n);let l;return o.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,o),new jt(this.value,l)}}fold(e){return this.fold_(yt(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(cn(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,yt(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(tt(e))return null;{const o=Xe(e),l=this.children.get(o);return l?l.findOnPath_(Mt(e),cn(n,o),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,yt(),n)}foreachOnPath_(e,n,i){if(tt(e))return this;{this.value&&i(n,this.value);const r=Xe(e),o=this.children.get(r);return o?o.foreachOnPath_(Mt(e),cn(n,r),i):new jt(null)}}foreach(e){this.foreach_(yt(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(cn(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.writeTree_=e}static empty(){return new Br(new jt(null))}}function rd(t,e,n){if(tt(e))return new Br(new jt(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let o=i.value;const l=Ii(r,e);return o=o.updateChild(l,n),new Br(t.writeTree_.set(r,o))}else{const r=new jt(n),o=t.writeTree_.setTree(e,r);return new Br(o)}}}function px(t,e,n){let i=t;return oi(n,(r,o)=>{i=rd(i,cn(e,r),o)}),i}function gx(t,e){if(tt(e))return Br.empty();{const n=t.writeTree_.setTree(e,new jt(null));return new Br(n)}}function PT(t,e){return lu(t,e)!=null}function lu(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ii(n.path,e)):null}function _x(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Qt,(i,r)=>{e.push(new nt(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new nt(i,r.value))}),e}function _a(t,e){if(tt(e))return t;{const n=lu(t,e);return n!=null?new Br(new jt(n)):new Br(t.writeTree_.subtree(e))}}function OT(t){return t.writeTree_.isEmpty()}function Hc(t,e){return uM(yt(),t.writeTree_,e)}function uM(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(ye(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):n=uM(cn(t,r),o,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(cn(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e){return dM(e,t)}function dB(t,e,n,i,r){ye(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=rd(t.visibleWrites,e,n)),t.lastWriteId=i}function mB(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function pB(t,e){const n=t.allWrites.findIndex(c=>c.writeId===e);ye(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,o=!1,l=t.allWrites.length-1;for(;r&&l>=0;){const c=t.allWrites[l];c.visible&&(l>=n&&gB(c,i.path)?r=!1:dr(i.path,c.path)&&(o=!0)),l--}if(r){if(o)return _B(t),!0;if(i.snap)t.visibleWrites=gx(t.visibleWrites,i.path);else{const c=i.children;oi(c,f=>{t.visibleWrites=gx(t.visibleWrites,cn(i.path,f))})}return!0}else return!1}function gB(t,e){if(t.snap)return dr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&dr(cn(t.path,n),e))return!0;return!1}function _B(t){t.visibleWrites=cM(t.allWrites,yB,yt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function yB(t){return t.visible}function cM(t,e,n){let i=Br.empty();for(let r=0;r<t.length;++r){const o=t[r];if(e(o)){const l=o.path;let c;if(o.snap)dr(n,l)?(c=Ii(n,l),i=rd(i,c,o.snap)):dr(l,n)&&(c=Ii(l,n),i=rd(i,yt(),o.snap.getChild(c)));else if(o.children){if(dr(n,l))c=Ii(n,l),i=px(i,c,o.children);else if(dr(l,n))if(c=Ii(l,n),tt(c))i=px(i,yt(),o.children);else{const f=jc(o.children,Xe(c));if(f){const d=f.getChild(Mt(c));i=rd(i,yt(),d)}}}else throw gh("WriteRecord should have .snap or .children")}}return i}function hM(t,e,n,i,r){if(!i&&!r){const o=lu(t.visibleWrites,e);if(o!=null)return o;{const l=_a(t.visibleWrites,e);if(OT(l))return n;if(n==null&&!PT(l,yt()))return null;{const c=n||ze.EMPTY_NODE;return Hc(l,c)}}}else{const o=_a(t.visibleWrites,e);if(!r&&OT(o))return n;if(!r&&n==null&&!PT(o,yt()))return null;{const l=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(dr(d.path,e)||dr(e,d.path))},c=cM(t.allWrites,l,e),f=n||ze.EMPTY_NODE;return Hc(c,f)}}}function vB(t,e,n){let i=ze.EMPTY_NODE;const r=lu(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Qt,(o,l)=>{i=i.updateImmediateChild(o,l)}),i;if(n){const o=_a(t.visibleWrites,e);return n.forEachChild(Qt,(l,c)=>{const f=Hc(_a(o,new It(l)),c);i=i.updateImmediateChild(l,f)}),_x(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const o=_a(t.visibleWrites,e);return _x(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function EB(t,e,n,i,r){ye(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=cn(e,n);if(PT(t.visibleWrites,o))return null;{const l=_a(t.visibleWrites,o);return OT(l)?r.getChild(n):Hc(l,r.getChild(n))}}function TB(t,e,n,i){const r=cn(e,n),o=lu(t.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(n)){const l=_a(t.visibleWrites,r);return Hc(l,i.getNode().getImmediateChild(n))}else return null}function bB(t,e){return lu(t.visibleWrites,e)}function wB(t,e,n,i,r,o,l){let c;const f=_a(t.visibleWrites,e),d=lu(f,yt());if(d!=null)c=d;else if(n!=null)c=Hc(f,n);else return[];if(c=c.withIndex(l),!c.isEmpty()&&!c.isLeafNode()){const p=[],y=l.getCompare(),v=o?c.getReverseIteratorFrom(i,l):c.getIteratorFrom(i,l);let w=v.getNext();for(;w&&p.length<r;)y(w,i)!==0&&p.push(w),w=v.getNext();return p}else return[]}function SB(){return{visibleWrites:Br.empty(),allWrites:[],lastWriteId:-1}}function m_(t,e,n,i){return hM(t.writeTree,t.treePath,e,n,i)}function Cw(t,e){return vB(t.writeTree,t.treePath,e)}function yx(t,e,n,i){return EB(t.writeTree,t.treePath,e,n,i)}function p_(t,e){return bB(t.writeTree,cn(t.treePath,e))}function CB(t,e,n,i,r,o){return wB(t.writeTree,t.treePath,e,n,i,r,o)}function Aw(t,e,n){return TB(t.writeTree,t.treePath,e,n)}function fM(t,e){return dM(cn(t.treePath,e),t.writeTree)}function dM(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;ye(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ye(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(i,xd(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(i,Rd(i,r.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(i,$c(i,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(i,xd(i,e.snapshotNode,r.oldSnap));else throw gh("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IB{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const mM=new IB;class Iw{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Gl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Aw(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Kl(this.viewCache_),o=CB(this.writes_,r,n,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RB(t){return{filter:t}}function xB(t,e){ye(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),ye(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function DB(t,e,n,i,r){const o=new AB;let l,c;if(n.type===Fr.OVERWRITE){const d=n;d.source.fromUser?l=MT(t,e,d.path,d.snap,i,r,o):(ye(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered()&&!tt(d.path),l=g_(t,e,d.path,d.snap,i,r,c,o))}else if(n.type===Fr.MERGE){const d=n;d.source.fromUser?l=PB(t,e,d.path,d.children,i,r,o):(ye(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered(),l=kT(t,e,d.path,d.children,i,r,c,o))}else if(n.type===Fr.ACK_USER_WRITE){const d=n;d.revert?l=kB(t,e,d.path,i,r,o):l=OB(t,e,d.path,d.affectedTree,i,r,o)}else if(n.type===Fr.LISTEN_COMPLETE)l=MB(t,e,n.path,i,o);else throw gh("Unknown operation type: "+n.type);const f=o.getChanges();return NB(e,l,f),{viewCache:l,changes:f}}function NB(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=NT(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(oM(NT(e)))}}function pM(t,e,n,i,r,o){const l=e.eventCache;if(p_(i,n)!=null)return e;{let c,f;if(tt(n))if(ye(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=Kl(e),p=d instanceof ze?d:ze.EMPTY_NODE,y=Cw(i,p);c=t.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const d=m_(i,Kl(e));c=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const d=Xe(n);if(d===".priority"){ye(wa(n)===1,"Can't have a priority with additional path components");const p=l.getNode();f=e.serverCache.getNode();const y=yx(i,n,p,f);y!=null?c=t.filter.updatePriority(p,y):c=l.getNode()}else{const p=Mt(n);let y;if(l.isCompleteForChild(d)){f=e.serverCache.getNode();const v=yx(i,n,l.getNode(),f);v!=null?y=l.getNode().getImmediateChild(d).updateChild(p,v):y=l.getNode().getImmediateChild(d)}else y=Aw(i,d,e.serverCache);y!=null?c=t.filter.updateChild(l.getNode(),d,y,p,r,o):c=l.getNode()}}return id(e,c,l.isFullyInitialized()||tt(n),t.filter.filtersNodes())}}function g_(t,e,n,i,r,o,l,c){const f=e.serverCache;let d;const p=l?t.filter:t.filter.getIndexedFilter();if(tt(n))d=p.updateFullNode(f.getNode(),i,null);else if(p.filtersNodes()&&!f.isFiltered()){const w=f.getNode().updateChild(n,i);d=p.updateFullNode(f.getNode(),w,null)}else{const w=Xe(n);if(!f.isCompleteForPath(n)&&wa(n)>1)return e;const S=Mt(n),O=f.getNode().getImmediateChild(w).updateChild(S,i);w===".priority"?d=p.updatePriority(f.getNode(),O):d=p.updateChild(f.getNode(),w,O,S,mM,null)}const y=lM(e,d,f.isFullyInitialized()||tt(n),p.filtersNodes()),v=new Iw(r,y,o);return pM(t,y,n,r,v,c)}function MT(t,e,n,i,r,o,l){const c=e.eventCache;let f,d;const p=new Iw(r,e,o);if(tt(n))d=t.filter.updateFullNode(e.eventCache.getNode(),i,l),f=id(e,d,!0,t.filter.filtersNodes());else{const y=Xe(n);if(y===".priority")d=t.filter.updatePriority(e.eventCache.getNode(),i),f=id(e,d,c.isFullyInitialized(),c.isFiltered());else{const v=Mt(n),w=c.getNode().getImmediateChild(y);let S;if(tt(v))S=i;else{const N=p.getCompleteChild(y);N!=null?gw(v)===".priority"&&N.getChild(JO(v)).isEmpty()?S=N:S=N.updateChild(v,i):S=ze.EMPTY_NODE}if(w.equals(S))f=e;else{const N=t.filter.updateChild(c.getNode(),y,S,v,p,l);f=id(e,N,c.isFullyInitialized(),t.filter.filtersNodes())}}}return f}function vx(t,e){return t.eventCache.isCompleteForChild(e)}function PB(t,e,n,i,r,o,l){let c=e;return i.foreach((f,d)=>{const p=cn(n,f);vx(e,Xe(p))&&(c=MT(t,c,p,d,r,o,l))}),i.foreach((f,d)=>{const p=cn(n,f);vx(e,Xe(p))||(c=MT(t,c,p,d,r,o,l))}),c}function Ex(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function kT(t,e,n,i,r,o,l,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f=e,d;tt(n)?d=i:d=new jt(null).setTree(n,i);const p=e.serverCache.getNode();return d.children.inorderTraversal((y,v)=>{if(p.hasChild(y)){const w=e.serverCache.getNode().getImmediateChild(y),S=Ex(t,w,v);f=g_(t,f,new It(y),S,r,o,l,c)}}),d.children.inorderTraversal((y,v)=>{const w=!e.serverCache.isCompleteForChild(y)&&v.value===null;if(!p.hasChild(y)&&!w){const S=e.serverCache.getNode().getImmediateChild(y),N=Ex(t,S,v);f=g_(t,f,new It(y),N,r,o,l,c)}}),f}function OB(t,e,n,i,r,o,l){if(p_(r,n)!=null)return e;const c=e.serverCache.isFiltered(),f=e.serverCache;if(i.value!=null){if(tt(n)&&f.isFullyInitialized()||f.isCompleteForPath(n))return g_(t,e,n,f.getNode().getChild(n),r,o,c,l);if(tt(n)){let d=new jt(null);return f.getNode().forEachChild(Nc,(p,y)=>{d=d.set(new It(p),y)}),kT(t,e,n,d,r,o,c,l)}else return e}else{let d=new jt(null);return i.foreach((p,y)=>{const v=cn(n,p);f.isCompleteForPath(v)&&(d=d.set(p,f.getNode().getChild(v)))}),kT(t,e,n,d,r,o,c,l)}}function MB(t,e,n,i,r){const o=e.serverCache,l=lM(e,o.getNode(),o.isFullyInitialized()||tt(n),o.isFiltered());return pM(t,l,n,i,mM,r)}function kB(t,e,n,i,r,o){let l;if(p_(i,n)!=null)return e;{const c=new Iw(i,e,r),f=e.eventCache.getNode();let d;if(tt(n)||Xe(n)===".priority"){let p;if(e.serverCache.isFullyInitialized())p=m_(i,Kl(e));else{const y=e.serverCache.getNode();ye(y instanceof ze,"serverChildren would be complete if leaf node"),p=Cw(i,y)}p=p,d=t.filter.updateFullNode(f,p,o)}else{const p=Xe(n);let y=Aw(i,p,e.serverCache);y==null&&e.serverCache.isCompleteForChild(p)&&(y=f.getImmediateChild(p)),y!=null?d=t.filter.updateChild(f,p,y,Mt(n),c,o):e.eventCache.getNode().hasChild(p)?d=t.filter.updateChild(f,p,ze.EMPTY_NODE,Mt(n),c,o):d=f,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=m_(i,Kl(e)),l.isLeafNode()&&(d=t.filter.updateFullNode(d,l,o)))}return l=e.serverCache.isFullyInitialized()||p_(i,yt())!=null,id(e,d,l,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new Ew(i.getIndex()),o=tB(i);this.processor_=RB(o);const l=n.serverCache,c=n.eventCache,f=r.updateFullNode(ze.EMPTY_NODE,l.getNode(),null),d=o.updateFullNode(ze.EMPTY_NODE,c.getNode(),null),p=new Gl(f,l.isFullyInitialized(),r.filtersNodes()),y=new Gl(d,c.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ty(y,p),this.eventGenerator_=new lB(this.query_)}get query(){return this.query_}}function LB(t){return t.viewCache_.serverCache.getNode()}function zB(t,e){const n=Kl(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!tt(e)&&!n.getImmediateChild(Xe(e)).isEmpty())?n.getChild(e):null}function Tx(t){return t.eventRegistrations_.length===0}function UB(t,e){t.eventRegistrations_.push(e)}function bx(t,e,n){const i=[];if(n){ye(e==null,"A cancel should cancel all event registrations.");const r=t.query._path;t.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(n,r);l&&i.push(l)})}if(e){let r=[];for(let o=0;o<t.eventRegistrations_.length;++o){const l=t.eventRegistrations_[o];if(!l.matches(e))r.push(l);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function wx(t,e,n,i){e.type===Fr.MERGE&&e.source.queryId!==null&&(ye(Kl(t.viewCache_),"We should always have a full cache before handling merges"),ye(NT(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,o=DB(t.processor_,r,e,n,i);return xB(t.processor_,o.viewCache),ye(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,gM(t,o.changes,o.viewCache.eventCache.getNode(),null)}function FB(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Qt,(o,l)=>{i.push($c(o,l))}),n.isFullyInitialized()&&i.push(oM(n.getNode())),gM(t,i,n.getNode(),e)}function gM(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return uB(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __;class jB{constructor(){this.views=new Map}}function BB(t){ye(!__,"__referenceConstructor has already been defined"),__=t}function qB(){return ye(__,"Reference.ts has not been loaded"),__}function $B(t){return t.views.size===0}function Rw(t,e,n,i){const r=e.source.queryId;if(r!==null){const o=t.views.get(r);return ye(o!=null,"SyncTree gave us an op for an invalid query."),wx(o,e,n,i)}else{let o=[];for(const l of t.views.values())o=o.concat(wx(l,e,n,i));return o}}function HB(t,e,n,i,r){const o=e._queryIdentifier,l=t.views.get(o);if(!l){let c=m_(n,r?i:null),f=!1;c?f=!0:i instanceof ze?(c=Cw(n,i),f=!1):(c=ze.EMPTY_NODE,f=!1);const d=Ty(new Gl(c,f,!1),new Gl(i,r,!1));return new VB(e,d)}return l}function GB(t,e,n,i,r,o){const l=HB(t,e,i,r,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),UB(l,n),FB(l,n)}function KB(t,e,n,i){const r=e._queryIdentifier,o=[];let l=[];const c=Sa(t);if(r==="default")for(const[f,d]of t.views.entries())l=l.concat(bx(d,n,i)),Tx(d)&&(t.views.delete(f),d.query._queryParams.loadsAllData()||o.push(d.query));else{const f=t.views.get(r);f&&(l=l.concat(bx(f,n,i)),Tx(f)&&(t.views.delete(r),f.query._queryParams.loadsAllData()||o.push(f.query)))}return c&&!Sa(t)&&o.push(new(qB())(e._repo,e._path)),{removed:o,events:l}}function _M(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Pc(t,e){let n=null;for(const i of t.views.values())n=n||zB(i,e);return n}function yM(t,e){if(e._queryParams.loadsAllData())return by(t);{const i=e._queryIdentifier;return t.views.get(i)}}function vM(t,e){return yM(t,e)!=null}function Sa(t){return by(t)!=null}function by(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let y_;function WB(t){ye(!y_,"__referenceConstructor has already been defined"),y_=t}function YB(){return ye(y_,"Reference.ts has not been loaded"),y_}let ZB=1;class Sx{constructor(e){this.listenProvider_=e,this.syncPointTree_=new jt(null),this.pendingWriteTree_=SB(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function EM(t,e,n,i,r){return dB(t.pendingWriteTree_,e,n,i,r),r?fm(t,new Hl(aM(),e,n)):[]}function xl(t,e,n=!1){const i=mB(t.pendingWriteTree_,e);if(pB(t.pendingWriteTree_,e)){let o=new jt(null);return i.snap!=null?o=o.set(yt(),!0):oi(i.children,l=>{o=o.set(new It(l),!0)}),fm(t,new d_(i.path,o,n))}else return[]}function wy(t,e,n){return fm(t,new Hl(bw(),e,n))}function QB(t,e,n){const i=jt.fromObject(n);return fm(t,new Pd(bw(),e,i))}function XB(t,e){return fm(t,new Nd(bw(),e))}function JB(t,e,n){const i=Dw(t,n);if(i){const r=Nw(i),o=r.path,l=r.queryId,c=Ii(o,e),f=new Nd(ww(l),c);return Pw(t,o,f)}else return[]}function VT(t,e,n,i,r=!1){const o=e._path,l=t.syncPointTree_.get(o);let c=[];if(l&&(e._queryIdentifier==="default"||vM(l,e))){const f=KB(l,e,n,i);$B(l)&&(t.syncPointTree_=t.syncPointTree_.remove(o));const d=f.removed;if(c=f.events,!r){const p=d.findIndex(v=>v._queryParams.loadsAllData())!==-1,y=t.syncPointTree_.findOnPath(o,(v,w)=>Sa(w));if(p&&!y){const v=t.syncPointTree_.subtree(o);if(!v.isEmpty()){const w=n8(v);for(let S=0;S<w.length;++S){const N=w[S],O=N.query,j=wM(t,N);t.listenProvider_.startListening(sd(O),v_(t,O),j.hashFn,j.onComplete)}}}!y&&d.length>0&&!i&&(p?t.listenProvider_.stopListening(sd(e),null):d.forEach(v=>{const w=t.queryToTagMap.get(Sy(v));t.listenProvider_.stopListening(sd(v),w)}))}i8(t,d)}return c}function e8(t,e,n,i){const r=Dw(t,i);if(r!=null){const o=Nw(r),l=o.path,c=o.queryId,f=Ii(l,e),d=new Hl(ww(c),f,n);return Pw(t,l,d)}else return[]}function t8(t,e,n,i){const r=Dw(t,i);if(r){const o=Nw(r),l=o.path,c=o.queryId,f=Ii(l,e),d=jt.fromObject(n),p=new Pd(ww(c),f,d);return Pw(t,l,p)}else return[]}function Cx(t,e,n,i=!1){const r=e._path;let o=null,l=!1;t.syncPointTree_.foreachOnPath(r,(v,w)=>{const S=Ii(v,r);o=o||Pc(w,S),l=l||Sa(w)});let c=t.syncPointTree_.get(r);c?(l=l||Sa(c),o=o||Pc(c,yt())):(c=new jB,t.syncPointTree_=t.syncPointTree_.set(r,c));let f;o!=null?f=!0:(f=!1,o=ze.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((w,S)=>{const N=Pc(S,yt());N&&(o=o.updateImmediateChild(w,N))}));const d=vM(c,e);if(!d&&!e._queryParams.loadsAllData()){const v=Sy(e);ye(!t.queryToTagMap.has(v),"View does not exist, but we have a tag");const w=r8();t.queryToTagMap.set(v,w),t.tagToQueryMap.set(w,v)}const p=Sw(t.pendingWriteTree_,r);let y=GB(c,e,n,p,o,f);if(!d&&!l&&!i){const v=yM(c,e);y=y.concat(s8(t,e,v))}return y}function xw(t,e,n){const r=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(l,c)=>{const f=Ii(l,e),d=Pc(c,f);if(d)return d});return hM(r,e,o,n,!0)}function fm(t,e){return TM(e,t.syncPointTree_,null,Sw(t.pendingWriteTree_,yt()))}function TM(t,e,n,i){if(tt(t.path))return bM(t,e,n,i);{const r=e.get(yt());n==null&&r!=null&&(n=Pc(r,yt()));let o=[];const l=Xe(t.path),c=t.operationForChild(l),f=e.children.get(l);if(f&&c){const d=n?n.getImmediateChild(l):null,p=fM(i,l);o=o.concat(TM(c,f,d,p))}return r&&(o=o.concat(Rw(r,t,i,n))),o}}function bM(t,e,n,i){const r=e.get(yt());n==null&&r!=null&&(n=Pc(r,yt()));let o=[];return e.children.inorderTraversal((l,c)=>{const f=n?n.getImmediateChild(l):null,d=fM(i,l),p=t.operationForChild(l);p&&(o=o.concat(bM(p,c,f,d)))}),r&&(o=o.concat(Rw(r,t,i,n))),o}function wM(t,e){const n=e.query,i=v_(t,n);return{hashFn:()=>(LB(e)||ze.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?JB(t,n._path,i):XB(t,n._path);{const o=J5(r,n);return VT(t,n,null,o)}}}}function v_(t,e){const n=Sy(e);return t.queryToTagMap.get(n)}function Sy(t){return t._path.toString()+"$"+t._queryIdentifier}function Dw(t,e){return t.tagToQueryMap.get(e)}function Nw(t){const e=t.indexOf("$");return ye(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new It(t.substr(0,e))}}function Pw(t,e,n){const i=t.syncPointTree_.get(e);ye(i,"Missing sync point for query tag that we're tracking");const r=Sw(t.pendingWriteTree_,e);return Rw(i,n,r,null)}function n8(t){return t.fold((e,n,i)=>{if(n&&Sa(n))return[by(n)];{let r=[];return n&&(r=_M(n)),oi(i,(o,l)=>{r=r.concat(l)}),r}})}function sd(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(YB())(t._repo,t._path):t}function i8(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const r=Sy(i),o=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(o)}}}function r8(){return ZB++}function s8(t,e,n){const i=e._path,r=v_(t,e),o=wM(t,n),l=t.listenProvider_.startListening(sd(e),r,o.hashFn,o.onComplete),c=t.syncPointTree_.subtree(i);if(r)ye(!Sa(c.value),"If we're adding a query, it shouldn't be shadowed");else{const f=c.fold((d,p,y)=>{if(!tt(d)&&p&&Sa(p))return[by(p).query];{let v=[];return p&&(v=v.concat(_M(p).map(w=>w.query))),oi(y,(w,S)=>{v=v.concat(S)}),v}});for(let d=0;d<f.length;++d){const p=f[d];t.listenProvider_.stopListening(sd(p),v_(t,p))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Ow(n)}node(){return this.node_}}class Mw{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=cn(this.path_,e);return new Mw(this.syncTree_,n)}node(){return xw(this.syncTree_,this.path_)}}const o8=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Ax=function(t,e,n){if(!t||typeof t!="object")return t;if(ye(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return a8(t[".sv"],e,n);if(typeof t[".sv"]=="object")return l8(t[".sv"],e);ye(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},a8=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:ye(!1,"Unexpected server value: "+t)}},l8=function(t,e,n){t.hasOwnProperty("increment")||ye(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&ye(!1,"Unexpected increment value: "+i);const r=e.node();if(ye(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return typeof l!="number"?i:l+i},u8=function(t,e,n,i){return kw(e,new Mw(n,t),i)},SM=function(t,e,n){return kw(t,new Ow(e),n)};function kw(t,e,n){const i=t.getPriority().val(),r=Ax(i,e.getImmediateChild(".priority"),n);let o;if(t.isLeafNode()){const l=t,c=Ax(l.getValue(),e,n);return c!==l.getValue()||r!==l.getPriority().val()?new Fn(c,Sn(r)):t}else{const l=t;return o=l,r!==l.getPriority().val()&&(o=o.updatePriority(new Fn(r))),l.forEachChild(Qt,(c,f)=>{const d=kw(f,e.getImmediateChild(c),n);d!==f&&(o=o.updateImmediateChild(c,d))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function Lw(t,e){let n=e instanceof It?e:new It(e),i=t,r=Xe(n);for(;r!==null;){const o=jc(i.node.children,r)||{children:{},childCount:0};i=new Vw(r,i,o),n=Mt(n),r=Xe(n)}return i}function Eh(t){return t.node.value}function CM(t,e){t.node.value=e,LT(t)}function AM(t){return t.node.childCount>0}function c8(t){return Eh(t)===void 0&&!AM(t)}function Cy(t,e){oi(t.node.children,(n,i)=>{e(new Vw(n,t,i))})}function IM(t,e,n,i){n&&e(t),Cy(t,r=>{IM(r,e,!0)})}function h8(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function dm(t){return new It(t.parent===null?t.name:dm(t.parent)+"/"+t.name)}function LT(t){t.parent!==null&&f8(t.parent,t.name,t)}function f8(t,e,n){const i=c8(n),r=Is(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,LT(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,LT(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=/[\[\].#$\/\u0000-\u001F\u007F]/,m8=/[\[\].#$\u0000-\u001F\u007F]/,xE=10*1024*1024,zw=function(t){return typeof t=="string"&&t.length!==0&&!d8.test(t)},RM=function(t){return typeof t=="string"&&t.length!==0&&!m8.test(t)},p8=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),RM(t)},xM=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!vy(t)||t&&typeof t=="object"&&Is(t,".sv")},zT=function(t,e,n,i){Ay(Bc(t,"value"),e,n)},Ay=function(t,e,n){const i=n instanceof It?new Oj(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+gl(i));if(typeof e=="function")throw new Error(t+"contains a function "+gl(i)+" with contents = "+e.toString());if(vy(e))throw new Error(t+"contains "+e.toString()+" "+gl(i));if(typeof e=="string"&&e.length>xE/3&&gy(e)>xE)throw new Error(t+"contains a string greater than "+xE+" utf8 bytes "+gl(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(oi(e,(l,c)=>{if(l===".value")r=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!zw(l)))throw new Error(t+" contains an invalid key ("+l+") "+gl(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Mj(i,l),Ay(t,c,i),kj(i)}),r&&o)throw new Error(t+' contains ".value" child '+gl(i)+" in addition to actual children.")}},g8=function(t,e){let n,i;for(n=0;n<e.length;n++){i=e[n];const o=Id(i);for(let l=0;l<o.length;l++)if(!(o[l]===".priority"&&l===o.length-1)){if(!zw(o[l]))throw new Error(t+"contains an invalid key ("+o[l]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Pj);let r=null;for(n=0;n<e.length;n++){if(i=e[n],r!==null&&dr(r,i))throw new Error(t+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},_8=function(t,e,n,i){const r=Bc(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];oi(e,(l,c)=>{const f=new It(l);if(Ay(r,c,cn(n,f)),gw(f)===".priority"&&!xM(c))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(f)}),g8(r,o)},y8=function(t,e,n){if(vy(e))throw new Error(Bc(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xM(e))throw new Error(Bc(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},DM=function(t,e,n,i){if(!RM(n))throw new Error(Bc(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},v8=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),DM(t,e,n)},Gf=function(t,e){if(Xe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},E8=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!zw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!p8(n))throw new Error(Bc(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T8{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Uw(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();n!==null&&!_w(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(r)}n&&t.eventLists_.push(n)}function NM(t,e,n){Uw(t,n),PM(t,i=>_w(i,e))}function co(t,e,n){Uw(t,n),PM(t,i=>dr(i,e)||dr(e,i))}function PM(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const o=r.path;e(o)?(b8(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function b8(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();td&&Xn("event: "+n.toString()),yh(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8="repo_interrupt",S8=25;class C8{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new T8,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=f_(),this.transactionQueueTree_=new Vw,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function A8(t,e,n){if(t.stats_=mw(t.repoInfo_),t.forceRestClient_||ij())t.server_=new h_(t.repoInfo_,(i,r,o,l)=>{Ix(t,i,r,o,l)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Rx(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Bn(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new io(t.repoInfo_,e,(i,r,o,l)=>{Ix(t,i,r,o,l)},i=>{Rx(t,i)},i=>{R8(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=lj(t.repoInfo_,()=>new aB(t.stats_,t.server_)),t.infoData_=new nB,t.infoSyncTree_=new Sx({startListening:(i,r,o,l)=>{let c=[];const f=t.infoData_.getNode(i._path);return f.isEmpty()||(c=wy(t.infoSyncTree_,i._path,f),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),jw(t,"connected",!1),t.serverSyncTree_=new Sx({startListening:(i,r,o,l)=>(t.server_.listen(i,o,r,(c,f)=>{const d=l(c,f);co(t.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function I8(t){const n=t.infoData_.getNode(new It(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Fw(t){return o8({timestamp:I8(t)})}function Ix(t,e,n,i,r){t.dataUpdateCount++;const o=new It(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let l=[];if(r)if(i){const f=o_(n,d=>Sn(d));l=t8(t.serverSyncTree_,o,f,r)}else{const f=Sn(n);l=e8(t.serverSyncTree_,o,f,r)}else if(i){const f=o_(n,d=>Sn(d));l=QB(t.serverSyncTree_,o,f)}else{const f=Sn(n);l=wy(t.serverSyncTree_,o,f)}let c=o;l.length>0&&(c=Iy(t,o)),co(t.eventQueue_,c,l)}function Rx(t,e){jw(t,"connected",e),e===!1&&D8(t)}function R8(t,e){oi(e,(n,i)=>{jw(t,n,i)})}function jw(t,e,n){const i=new It("/.info/"+e),r=Sn(n);t.infoData_.updateSnapshot(i,r);const o=wy(t.infoSyncTree_,i,r);co(t.eventQueue_,i,o)}function OM(t){return t.nextWriteId_++}function x8(t,e,n,i,r){Bw(t,"set",{path:e.toString(),value:n,priority:i});const o=Fw(t),l=Sn(n,i),c=xw(t.serverSyncTree_,e),f=SM(l,c,o),d=OM(t),p=EM(t.serverSyncTree_,e,f,d,!0);Uw(t.eventQueue_,p),t.server_.put(e.toString(),l.val(!0),(v,w)=>{const S=v==="ok";S||Di("set at "+e+" failed: "+v);const N=xl(t.serverSyncTree_,d,!S);co(t.eventQueue_,e,N),Gc(t,r,v,w)});const y=zM(t,e);Iy(t,y),co(t.eventQueue_,y,[])}function D8(t){Bw(t,"onDisconnectEvents");const e=Fw(t),n=f_();DT(t.onDisconnect_,yt(),(r,o)=>{const l=u8(r,o,t.serverSyncTree_,e);vh(n,r,l)});let i=[];DT(n,yt(),(r,o)=>{i=i.concat(wy(t.serverSyncTree_,r,o));const l=zM(t,r);Iy(t,l)}),t.onDisconnect_=f_(),co(t.eventQueue_,yt(),i)}function N8(t,e,n){t.server_.onDisconnectCancel(e.toString(),(i,r)=>{i==="ok"&&xT(t.onDisconnect_,e),Gc(t,n,i,r)})}function xx(t,e,n,i){const r=Sn(n);t.server_.onDisconnectPut(e.toString(),r.val(!0),(o,l)=>{o==="ok"&&vh(t.onDisconnect_,e,r),Gc(t,i,o,l)})}function P8(t,e,n,i,r){const o=Sn(n,i);t.server_.onDisconnectPut(e.toString(),o.val(!0),(l,c)=>{l==="ok"&&vh(t.onDisconnect_,e,o),Gc(t,r,l,c)})}function O8(t,e,n,i){if(s_(n)){Xn("onDisconnect().update() called with empty data.  Don't do anything."),Gc(t,i,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(r,o)=>{r==="ok"&&oi(n,(l,c)=>{const f=Sn(c);vh(t.onDisconnect_,cn(e,l),f)}),Gc(t,i,r,o)})}function M8(t,e,n){let i;Xe(e._path)===".info"?i=Cx(t.infoSyncTree_,e,n):i=Cx(t.serverSyncTree_,e,n),NM(t.eventQueue_,e._path,i)}function k8(t,e,n){let i;Xe(e._path)===".info"?i=VT(t.infoSyncTree_,e,n):i=VT(t.serverSyncTree_,e,n),NM(t.eventQueue_,e._path,i)}function V8(t){t.persistentConnection_&&t.persistentConnection_.interrupt(w8)}function Bw(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Xn(n,...e)}function Gc(t,e,n,i){e&&yh(()=>{if(n==="ok")e(null);else{const r=(n||"error").toUpperCase();let o=r;i&&(o+=": "+i);const l=new Error(o);l.code=r,e(l)}})}function MM(t,e,n){return xw(t.serverSyncTree_,e,n)||ze.EMPTY_NODE}function qw(t,e=t.transactionQueueTree_){if(e||Ry(t,e),Eh(e)){const n=VM(t,e);ye(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&L8(t,dm(e),n)}else AM(e)&&Cy(e,n=>{qw(t,n)})}function L8(t,e,n){const i=n.map(d=>d.currentWriteId),r=MM(t,e,i);let o=r;const l=r.hash();for(let d=0;d<n.length;d++){const p=n[d];ye(p.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),p.status=1,p.retryCount++;const y=Ii(e,p.path);o=o.updateChild(y,p.currentOutputSnapshotRaw)}const c=o.val(!0),f=e;t.server_.put(f.toString(),c,d=>{Bw(t,"transaction put response",{path:f.toString(),status:d});let p=[];if(d==="ok"){const y=[];for(let v=0;v<n.length;v++)n[v].status=2,p=p.concat(xl(t.serverSyncTree_,n[v].currentWriteId)),n[v].onComplete&&y.push(()=>n[v].onComplete(null,!0,n[v].currentOutputSnapshotResolved)),n[v].unwatcher();Ry(t,Lw(t.transactionQueueTree_,e)),qw(t,t.transactionQueueTree_),co(t.eventQueue_,e,p);for(let v=0;v<y.length;v++)yh(y[v])}else{if(d==="datastale")for(let y=0;y<n.length;y++)n[y].status===3?n[y].status=4:n[y].status=0;else{Di("transaction at "+f.toString()+" failed: "+d);for(let y=0;y<n.length;y++)n[y].status=4,n[y].abortReason=d}Iy(t,e)}},l)}function Iy(t,e){const n=kM(t,e),i=dm(n),r=VM(t,n);return z8(t,r,i),i}function z8(t,e,n){if(e.length===0)return;const i=[];let r=[];const l=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const f=e[c],d=Ii(n,f.path);let p=!1,y;if(ye(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)p=!0,y=f.abortReason,r=r.concat(xl(t.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=S8)p=!0,y="maxretry",r=r.concat(xl(t.serverSyncTree_,f.currentWriteId,!0));else{const v=MM(t,f.path,l);f.currentInputSnapshot=v;const w=e[c].update(v.val());if(w!==void 0){Ay("transaction failed: Data returned ",w,f.path);let S=Sn(w);typeof w=="object"&&w!=null&&Is(w,".priority")||(S=S.updatePriority(v.getPriority()));const O=f.currentWriteId,j=Fw(t),V=SM(S,v,j);f.currentOutputSnapshotRaw=S,f.currentOutputSnapshotResolved=V,f.currentWriteId=OM(t),l.splice(l.indexOf(O),1),r=r.concat(EM(t.serverSyncTree_,f.path,V,f.currentWriteId,f.applyLocally)),r=r.concat(xl(t.serverSyncTree_,O,!0))}else p=!0,y="nodata",r=r.concat(xl(t.serverSyncTree_,f.currentWriteId,!0))}co(t.eventQueue_,n,r),r=[],p&&(e[c].status=2,(function(v){setTimeout(v,Math.floor(0))})(e[c].unwatcher),e[c].onComplete&&(y==="nodata"?i.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):i.push(()=>e[c].onComplete(new Error(y),!1,null))))}Ry(t,t.transactionQueueTree_);for(let c=0;c<i.length;c++)yh(i[c]);qw(t,t.transactionQueueTree_)}function kM(t,e){let n,i=t.transactionQueueTree_;for(n=Xe(e);n!==null&&Eh(i)===void 0;)i=Lw(i,n),e=Mt(e),n=Xe(e);return i}function VM(t,e){const n=[];return LM(t,e,n),n.sort((i,r)=>i.order-r.order),n}function LM(t,e,n){const i=Eh(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Cy(e,r=>{LM(t,r,n)})}function Ry(t,e){const n=Eh(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,CM(e,n.length>0?n:void 0)}Cy(e,i=>{Ry(t,i)})}function zM(t,e){const n=dm(kM(t,e)),i=Lw(t.transactionQueueTree_,e);return h8(i,r=>{DE(t,r)}),DE(t,i),IM(i,r=>{DE(t,r)}),n}function DE(t,e){const n=Eh(e);if(n){const i=[];let r=[],o=-1;for(let l=0;l<n.length;l++)n[l].status===3||(n[l].status===1?(ye(o===l-1,"All SENT items should be at beginning of queue."),o=l,n[l].status=3,n[l].abortReason="set"):(ye(n[l].status===0,"Unexpected transaction status in abort"),n[l].unwatcher(),r=r.concat(xl(t.serverSyncTree_,n[l].currentWriteId,!0)),n[l].onComplete&&i.push(n[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?CM(e,void 0):n.length=o+1,co(t.eventQueue_,dm(e),r);for(let l=0;l<i.length;l++)yh(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function F8(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Di(`Invalid query segment '${n}' in query '${t}'`)}return e}const Dx=function(t,e){const n=j8(t),i=n.namespace;n.domain==="firebase.com"&&uo(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&uo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||W5();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new $O(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new It(n.pathString)}},j8=function(t){let e="",n="",i="",r="",o="",l=!0,c="https",f=443;if(typeof t=="string"){let d=t.indexOf("//");d>=0&&(c=t.substring(0,d-1),t=t.substring(d+2));let p=t.indexOf("/");p===-1&&(p=t.length);let y=t.indexOf("?");y===-1&&(y=t.length),e=t.substring(0,Math.min(p,y)),p<y&&(r=U8(t.substring(p,y)));const v=F8(t.substring(Math.min(t.length,y)));d=e.indexOf(":"),d>=0?(l=c==="https"||c==="wss",f=parseInt(e.substring(d+1),10)):d=e.length;const w=e.slice(0,d);if(w.toLowerCase()==="localhost")n="localhost";else if(w.split(".").length<=2)n=w;else{const S=e.indexOf(".");i=e.substring(0,S).toLowerCase(),n=e.substring(S+1),o=i}"ns"in v&&(o=v.ns)}return{host:e,port:f,domain:n,subdomain:i,secure:l,scheme:c,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Bn(this.snapshot.exportVal())}}class q8{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ye(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new Zs;return N8(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Gf("OnDisconnect.remove",this._path);const e=new Zs;return xx(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Gf("OnDisconnect.set",this._path),zT("OnDisconnect.set",e,this._path);const n=new Zs;return xx(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Gf("OnDisconnect.setWithPriority",this._path),zT("OnDisconnect.setWithPriority",e,this._path),y8("OnDisconnect.setWithPriority",n);const i=new Zs;return P8(this._repo,this._path,e,n,i.wrapCallback(()=>{})),i.promise}update(e){Gf("OnDisconnect.update",this._path),_8("OnDisconnect.update",e,this._path);const n=new Zs;return O8(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return tt(this._path)?null:gw(this._path)}get ref(){return new Oa(this._repo,this._path)}get _queryIdentifier(){const e=dx(this._queryParams),n=fw(e);return n==="{}"?"default":n}get _queryObject(){return dx(this._queryParams)}isEqual(e){if(e=On(e),!(e instanceof $w))return!1;const n=this._repo===e._repo,i=_w(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Nj(this._path)}}class Oa extends $w{constructor(e,n){super(e,n,new Tw,!1)}get parent(){const e=JO(this._path);return e===null?null:new Oa(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class E_{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new It(e),i=UT(this.ref,e);return new E_(this._node.getChild(n),i,Qt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new E_(r,UT(this.ref,i),Qt)))}hasChild(e){const n=new It(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Nx(t,e){return t=On(t),t._checkNotDeleted("ref"),e!==void 0?UT(t._root,e):t._root}function UT(t,e){return t=On(t),Xe(t._path)===null?v8("child","path",e):DM("child","path",e),new Oa(t._repo,cn(t._path,e))}function G8(t){return t=On(t),new H8(t._repo,t._path)}function Px(t,e){t=On(t),Gf("set",t._path),zT("set",e,t._path);const n=new Zs;return x8(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}class Hw{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new B8("value",this,new E_(e.snapshotNode,new Oa(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new q8(this,e,n):null}matches(e){return e instanceof Hw?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function K8(t,e,n,i,r){const o=new $8(n,void 0),l=new Hw(o);return M8(t._repo,t,l),()=>k8(t._repo,t,l)}function W8(t,e,n,i){return K8(t,"value",e)}BB(Oa);WB(Oa);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8="FIREBASE_DATABASE_EMULATOR_HOST",FT={};let Z8=!1;function Q8(t,e,n,i){const r=e.lastIndexOf(":"),o=e.substring(0,r),l=Pa(o);t.repoInfo_=new $O(e,l,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(t.authTokenProvider_=i)}function X8(t,e,n,i,r){let o=i||t.options.databaseURL;o===void 0&&(t.options.projectId||uo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xn("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let l=Dx(o,r),c=l.repoInfo,f;typeof process<"u"&&YR&&(f=YR[Y8]),f?(o=`http://${f}?ns=${c.namespace}`,l=Dx(o,r),c=l.repoInfo):l.repoInfo.secure;const d=new sj(t.name,t.options,e);E8("Invalid Firebase Database URL",l),tt(l.path)||uo("Database URL must point to the root of a Firebase Database (not including a child path).");const p=e7(c,t,d,new rj(t,n));return new t7(p,t)}function J8(t,e){const n=FT[e];(!n||n[t.key]!==t)&&uo(`Database ${e}(${t.repoInfo_}) has already been deleted.`),V8(t),delete n[t.key]}function e7(t,e,n,i){let r=FT[e.name];r||(r={},FT[e.name]=r);let o=r[t.toURLString()];return o&&uo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new C8(t,Z8,n,i),r[t.toURLString()]=o,o}class t7{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(A8(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Oa(this._repo,yt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(J8(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&uo("Cannot call "+e+" on a deleted database.")}}function n7(t=IO(),e){const n=yy(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=p9("database");i&&i7(n,...i)}return n}function i7(t,e,n,i={}){t=On(t),t._checkNotDeleted("useEmulator");const r=`${e}:${n}`,o=t._repoInternal;if(t._instanceStarted){if(r===t._repoInternal.repoInfo_.host&&Ta(i,o.repoInfo_.emulatorOptions))return;uo("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&uo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Pg(Pg.OWNER);else if(i.mockUserToken){const c=typeof i.mockUserToken=="string"?i.mockUserToken:g9(i.mockUserToken,t.app.options.projectId);l=new Pg(c)}Pa(e)&&(uw(e),_O("Database",!0)),Q8(o,r,i,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r7(t){B5(ou),ql(new ba("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return X8(i,r,o,n)},"PUBLIC").setMultipleInstances(!0)),vs(ZR,QR,t),vs(ZR,QR,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7={".sv":"timestamp"};function o7(){return s7}io.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};io.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};r7();var a7="firebase",l7="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vs(a7,l7,"app");function UM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const u7=UM,FM=new lm("auth","Firebase",UM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=new _y("@firebase/auth");function c7(t,...e){T_.logLevel<=st.WARN&&T_.warn(`Auth (${ou}): ${t}`,...e)}function Mg(t,...e){T_.logLevel<=st.ERROR&&T_.error(`Auth (${ou}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t,...e){throw Gw(t,...e)}function Es(t,...e){return Gw(t,...e)}function jM(t,e,n){const i={...u7(),[e]:n};return new lm("auth","Firebase",i).create(e,{appName:t.name})}function Ml(t){return jM(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gw(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return FM.create(t,...e)}function Fe(t,e,...n){if(!t)throw Gw(e,...n)}function Xs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mg(e),new Error(e)}function fo(t,e){t||Xs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(){return typeof self<"u"&&self.location?.href||""}function h7(){return Ox()==="http:"||Ox()==="https:"}function Ox(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(h7()||E9()||"connection"in navigator)?navigator.onLine:!0}function d7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n){this.shortDelay=e,this.longDelay=n,fo(n>e,"Short delay should be less than long delay!"),this.isMobile=cw()||vO()}get(){return f7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t,e){fo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p7=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],g7=new mm(3e4,6e4);function Ww(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Th(t,e,n,i,r={}){return qM(t,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=_h({key:t.config.apiKey,...l}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:f,...o};return v9()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Pa(t.emulatorConfig.host)&&(d.credentials="include"),BM.fetch()(await $M(t,t.config.apiHost,n,c),d)})}async function qM(t,e,n){t._canInitEmulator=!1;const i={...m7,...e};try{const r=new y7(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw ag(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[f,d]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw ag(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw ag(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw ag(t,"user-disabled",l);const p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw jM(t,p,d);ho(t,p)}}catch(r){if(r instanceof To)throw r;ho(t,"network-request-failed",{message:String(r)})}}async function _7(t,e,n,i,r={}){const o=await Th(t,e,n,i,r);return"mfaPendingCredential"in o&&ho(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function $M(t,e,n,i){const r=`${e}${n}?${i}`,o=t,l=o.config.emulator?Kw(t.config,r):`${t.config.apiScheme}://${r}`;return p7.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class y7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Es(this.auth,"network-request-failed")),g7.get())})}}function ag(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Es(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v7(t,e){return Th(t,"POST","/v1/accounts:delete",e)}async function b_(t,e){return Th(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function E7(t,e=!1){const n=On(t),i=await n.getIdToken(e),r=Yw(i);Fe(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o?.sign_in_provider;return{claims:r,token:i,authTime:od(NE(r.auth_time)),issuedAtTime:od(NE(r.iat)),expirationTime:od(NE(r.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function NE(t){return Number(t)*1e3}function Yw(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Mg("JWT malformed, contained fewer than 3 sections"),null;try{const r=r_(n);return r?JSON.parse(r):(Mg("Failed to decode base64 JWT payload"),null)}catch(r){return Mg("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Mx(t){const e=Yw(t);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Od(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof To&&T7(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function T7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=od(this.lastLoginAt),this.creationTime=od(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w_(t){const e=t.auth,n=await t.getIdToken(),i=await Od(t,b_(e,{idToken:n}));Fe(i?.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=r.providerUserInfo?.length?HM(r.providerUserInfo):[],l=S7(t.providerData,o),c=t.isAnonymous,f=!(t.email&&r.passwordHash)&&!l?.length,d=c?f:!1,p={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new BT(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function w7(t){const e=On(t);await w_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function S7(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function HM(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C7(t,e){const n=await qM(t,{},async()=>{const i=_h({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,l=await $M(t,r,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:i};return t.emulatorConfig&&Pa(t.emulatorConfig.host)&&(f.credentials="include"),BM.fetch()(l,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function A7(t,e){return Th(t,"POST","/v2/accounts:revokeToken",Ww(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const n=Mx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await C7(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,l=new Oc;return i&&(Fe(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Fe(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Fe(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oc,this.toJSON())}_performRefresh(){return Xs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t,e){Fe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jr{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new b7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new BT(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Od(this,this.stsTokenManager.getToken(this.auth,e));return Fe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return E7(this,e)}reload(){return w7(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await w_(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kr(this.auth.app))return Promise.reject(Ml(this.auth));const e=await this.getIdToken();return await Od(this,v7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,l=n.photoURL??void 0,c=n.tenantId??void 0,f=n._redirectEventId??void 0,d=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:S,stsTokenManager:N}=n;Fe(y&&N,e,"internal-error");const O=Oc.fromJSON(this.name,N);Fe(typeof y=="string",e,"internal-error"),na(i,e.name),na(r,e.name),Fe(typeof v=="boolean",e,"internal-error"),Fe(typeof w=="boolean",e,"internal-error"),na(o,e.name),na(l,e.name),na(c,e.name),na(f,e.name),na(d,e.name),na(p,e.name);const j=new jr({uid:y,auth:e,email:r,emailVerified:v,displayName:i,isAnonymous:w,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:O,createdAt:d,lastLoginAt:p});return S&&Array.isArray(S)&&(j.providerData=S.map(V=>({...V}))),f&&(j._redirectEventId=f),j}static async _fromIdTokenResponse(e,n,i=!1){const r=new Oc;r.updateFromServerResponse(n);const o=new jr({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await w_(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];Fe(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?HM(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!o?.length,c=new Oc;c.updateFromIdToken(i);const f=new jr({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:l}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new BT(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kx=new Map;function Js(t){fo(t instanceof Function,"Expected a class definition");let e=kx.get(t);return e?(fo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GM.type="NONE";const Vx=GM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t,e,n){return`firebase:${t}:${e}:${n}`}class Mc{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=kg(this.userKey,r.apiKey,o),this.fullPersistenceKey=kg("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await b_(this.auth,{idToken:e}).catch(()=>{});return n?jr._fromGetAccountInfoResponse(this.auth,n,e):null}return jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Mc(Js(Vx),e,i);const r=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=r[0]||Js(Vx);const l=kg(i,e.config.apiKey,e.name);let c=null;for(const d of n)try{const p=await d._get(l);if(p){let y;if(typeof p=="string"){const v=await b_(e,{idToken:p}).catch(()=>{});if(!v)break;y=await jr._fromGetAccountInfoResponse(e,v,p)}else y=jr._fromJSON(e,p);d!==o&&(c=y),o=d;break}}catch{}const f=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Mc(o,e,i):(o=f[0],c&&await o._set(l,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new Mc(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XM(e))return"Blackberry";if(JM(e))return"Webos";if(WM(e))return"Safari";if((e.includes("chrome/")||YM(e))&&!e.includes("edge/"))return"Chrome";if(QM(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function KM(t=Pn()){return/firefox\//i.test(t)}function WM(t=Pn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YM(t=Pn()){return/crios\//i.test(t)}function ZM(t=Pn()){return/iemobile/i.test(t)}function QM(t=Pn()){return/android/i.test(t)}function XM(t=Pn()){return/blackberry/i.test(t)}function JM(t=Pn()){return/webos/i.test(t)}function Zw(t=Pn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function I7(t=Pn()){return Zw(t)&&!!window.navigator?.standalone}function R7(){return T9()&&document.documentMode===10}function ek(t=Pn()){return Zw(t)||QM(t)||JM(t)||XM(t)||/windows phone/i.test(t)||ZM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tk(t,e=[]){let n;switch(t){case"Browser":n=Lx(Pn());break;case"Worker":n=`${Lx(Pn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ou}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,c)=>{try{const f=e(o);l(f)}catch(f){c(f)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D7(t,e={}){return Th(t,"GET","/v2/passwordPolicy",Ww(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N7=6;class P7{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??N7,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zx(this),this.idTokenSubscription=new zx(this),this.beforeStateQueue=new x7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Js(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Mc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await b_(this,{idToken:e}),i=await jr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(kr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&c?.user&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await w_(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=d7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kr(this.app))return Promise.reject(Ml(this));const n=e?On(e):null;return n&&Fe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kr(this.app)?Promise.reject(Ml(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kr(this.app)?Promise.reject(Ml(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Js(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await D7(this),n=new P7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new lm("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await A7(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Js(e)||this._popupRedirectResolver;Fe(n,this,"argument-error"),this.redirectPersistenceManager=await Mc.create(this,[Js(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,i,r);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(kr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&c7(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Qw(t){return On(t)}class zx{constructor(e){this.auth=e,this.observer=null,this.addObserver=D9(n=>this.observer=n)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M7(t){Xw=t}function k7(t){return Xw.loadJS(t)}function V7(){return Xw.gapiScript}function L7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z7(t,e){const n=yy(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Ta(o,e??{}))return r;ho(r,"already-initialized")}return n.initialize({options:e})}function U7(t,e){const n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(Js);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function F7(t,e,n){const i=Qw(t);Fe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=nk(e),{host:l,port:c}=j7(e),f=c===null?"":`:${c}`,d={url:`${o}//${l}${f}/`},p=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Fe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Fe(Ta(d,i.config.emulator)&&Ta(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,Pa(l)?(uw(`${o}//${l}${f}`),_O("Auth",!0)):B7()}function nk(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function j7(t){const e=nk(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:Ux(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Ux(l)}}}function Ux(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function B7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xs("not implemented")}_getIdTokenResponse(e){return Xs("not implemented")}_linkToIdToken(e,n){return Xs("not implemented")}_getReauthenticationResolver(e){return Xs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(t,e){return _7(t,"POST","/v1/accounts:signInWithIdp",Ww(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q7="http://localhost";class Wl extends ik{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ho("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const l=new Wl(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return kc(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,kc(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,kc(e,n)}buildRequest(){const e={requestUri:q7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_h(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm extends rk{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends pm{constructor(){super("facebook.com")}static credential(e){return Wl._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return la.credential(e.oauthAccessToken)}catch{return null}}}la.FACEBOOK_SIGN_IN_METHOD="facebook.com";la.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends pm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wl._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ua.credential(n,i)}catch{return null}}}ua.GOOGLE_SIGN_IN_METHOD="google.com";ua.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends pm{constructor(){super("github.com")}static credential(e){return Wl._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ca.credential(e.oauthAccessToken)}catch{return null}}}ca.GITHUB_SIGN_IN_METHOD="github.com";ca.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends pm{constructor(){super("twitter.com")}static credential(e,n){return Wl._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return ha.credential(n,i)}catch{return null}}}ha.TWITTER_SIGN_IN_METHOD="twitter.com";ha.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await jr._fromIdTokenResponse(e,i,r),l=Fx(i);return new Kc({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Fx(i);return new Kc({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Fx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_ extends To{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,S_.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new S_(e,n,i,r)}}function sk(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?S_._fromErrorAndOperation(t,o,e,i):o})}async function $7(t,e,n=!1){const i=await Od(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Kc._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H7(t,e,n=!1){const{auth:i}=t;if(kr(i.app))return Promise.reject(Ml(i));const r="reauthenticate";try{const o=await Od(t,sk(i,r,e,t),n);Fe(o.idToken,i,"internal-error");const l=Yw(o.idToken);Fe(l,i,"internal-error");const{sub:c}=l;return Fe(t.uid===c,i,"user-mismatch"),Kc._forOperation(t,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&ho(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G7(t,e,n=!1){if(kr(t.app))return Promise.reject(Ml(t));const i="signIn",r=await sk(t,i,e),o=await Kc._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K7(t,e){return On(t).setPersistence(e)}function W7(t,e,n,i){return On(t).onIdTokenChanged(e,n,i)}function Y7(t,e,n){return On(t).beforeAuthStateChanged(e,n)}const C_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(C_,"1"),this.storage.removeItem(C_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7=1e3,Q7=10;class ak extends ok{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ek(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,c,f)=>{this.notifyListeners(l,f)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);R7()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Q7):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},Z7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ak.type="LOCAL";const lk=ak;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk extends ok{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uk.type="SESSION";const ck=uk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new xy(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,l=this.handlersMap[r];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async d=>d(n.origin,o)),f=await X7(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((c,f)=>{const d=Jw("",20);r.port1.start();const p=setTimeout(()=>{f(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(y){const v=y;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(v.data.response);break;default:clearTimeout(p),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(){return window}function eq(t){Ts().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(){return typeof Ts().WorkerGlobalScope<"u"&&typeof Ts().importScripts=="function"}async function tq(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nq(){return navigator?.serviceWorker?.controller||null}function iq(){return hk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="firebaseLocalStorageDb",rq=1,A_="firebaseLocalStorage",dk="fbase_key";class gm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Dy(t,e){return t.transaction([A_],e?"readwrite":"readonly").objectStore(A_)}function sq(){const t=indexedDB.deleteDatabase(fk);return new gm(t).toPromise()}function qT(){const t=indexedDB.open(fk,rq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(A_,{keyPath:dk})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(A_)?e(i):(i.close(),await sq(),e(await qT()))})})}async function jx(t,e,n){const i=Dy(t,!0).put({[dk]:e,value:n});return new gm(i).toPromise()}async function oq(t,e){const n=Dy(t,!1).get(e),i=await new gm(n).toPromise();return i===void 0?null:i.value}function Bx(t,e){const n=Dy(t,!0).delete(e);return new gm(n).toPromise()}const aq=800,lq=3;class mk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qT(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>lq)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xy._getInstance(iq()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await tq(),!this.activeServiceWorker)return;this.sender=new J7(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qT();return await jx(e,C_,"1"),await Bx(e,C_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>jx(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>oq(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Bx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Dy(r,!1).getAll();return new gm(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mk.type="LOCAL";const uq=mk;new mm(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cq(t,e){return e?Js(e):(Fe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS extends ik{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return kc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return kc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return kc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hq(t){return G7(t.auth,new eS(t),t.bypassAuthState)}function fq(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),H7(n,new eS(t),t.bypassAuthState)}async function dq(t){const{auth:e,user:n}=t;return Fe(n,e,"internal-error"),$7(n,new eS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hq;case"linkViaPopup":case"linkViaRedirect":return dq;case"reauthViaPopup":case"reauthViaRedirect":return fq;default:ho(this.auth,"internal-error")}}resolve(e){fo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mq=new mm(2e3,1e4);class wc extends pk{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,wc.currentPopupAction&&wc.currentPopupAction.cancel(),wc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){fo(this.filter.length===1,"Popup operations only handle one event");const e=Jw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mq.get())};e()}}wc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pq="pendingRedirect",Vg=new Map;class gq extends pk{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Vg.get(this.auth._key());if(!e){try{const i=await _q(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Vg.set(this.auth._key(),e)}return this.bypassAuthState||Vg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _q(t,e){const n=Eq(e),i=vq(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function yq(t,e){Vg.set(t._key(),e)}function vq(t){return Js(t._redirectPersistence)}function Eq(t){return kg(pq,t.config.apiKey,t.name)}async function Tq(t,e,n=!1){if(kr(t.app))return Promise.reject(Ml(t));const i=Qw(t),r=cq(i,e),l=await new gq(i,r,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq=600*1e3;class wq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Sq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!gk(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Es(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bq&&this.cachedEventUids.clear(),this.cachedEventUids.has(qx(e))}saveEventToCache(e){this.cachedEventUids.add(qx(e)),this.lastProcessedEventTime=Date.now()}}function qx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gk({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Sq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gk(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cq(t,e={}){return Th(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Iq=/^https?/;async function Rq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Cq(t);for(const n of e)try{if(xq(n))return}catch{}ho(t,"unauthorized-domain")}function xq(t){const e=jT(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!Iq.test(n))return!1;if(Aq.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dq=new mm(3e4,6e4);function $x(){const t=Ts().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Nq(t){return new Promise((e,n)=>{function i(){$x(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$x(),n(Es(t,"network-request-failed"))},timeout:Dq.get()})}if(Ts().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ts().gapi?.load)i();else{const r=L7("iframefcb");return Ts()[r]=()=>{gapi.load?i():n(Es(t,"network-request-failed"))},k7(`${V7()}?onload=${r}`).catch(o=>n(o))}}).catch(e=>{throw Lg=null,e})}let Lg=null;function Pq(t){return Lg=Lg||Nq(t),Lg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oq=new mm(5e3,15e3),Mq="__/auth/iframe",kq="emulator/auth/iframe",Vq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zq(t){const e=t.config;Fe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Kw(e,kq):`https://${t.config.authDomain}/${Mq}`,i={apiKey:e.apiKey,appName:t.name,v:ou},r=Lq.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${_h(i).slice(1)}`}async function Uq(t){const e=await Pq(t),n=Ts().gapi;return Fe(n,t,"internal-error"),e.open({where:document.body,url:zq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vq,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=Es(t,"network-request-failed"),c=Ts().setTimeout(()=>{o(l)},Oq.get());function f(){Ts().clearTimeout(c),r(i)}i.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jq=500,Bq=600,qq="_blank",$q="http://localhost";class Hx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Hq(t,e,n,i=jq,r=Bq){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const f={...Fq,width:i.toString(),height:r.toString(),top:o,left:l},d=Pn().toLowerCase();n&&(c=YM(d)?qq:n),KM(d)&&(e=e||$q,f.scrollbars="yes");const p=Object.entries(f).reduce((v,[w,S])=>`${v}${w}=${S},`,"");if(I7(d)&&c!=="_self")return Gq(e||"",c),new Hx(null);const y=window.open(e||"",c,p);Fe(y,t,"popup-blocked");try{y.focus()}catch{}return new Hx(y)}function Gq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kq="__/auth/handler",Wq="emulator/auth/handler",Yq=encodeURIComponent("fac");async function Gx(t,e,n,i,r,o){Fe(t.config.authDomain,t,"auth-domain-config-required"),Fe(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ou,eventId:r};if(e instanceof rk){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",s_(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,y]of Object.entries({}))l[p]=y}if(e instanceof pm){const p=e.getScopes().filter(y=>y!=="");p.length>0&&(l.scopes=p.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const p of Object.keys(c))c[p]===void 0&&delete c[p];const f=await t._getAppCheckToken(),d=f?`#${Yq}=${encodeURIComponent(f)}`:"";return`${Zq(t)}?${_h(c).slice(1)}${d}`}function Zq({config:t}){return t.emulator?Kw(t,Wq):`https://${t.authDomain}/${Kq}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE="webStorageSupport";class Qq{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ck,this._completeRedirectFn=Tq,this._overrideRedirectResult=yq}async _openPopup(e,n,i,r){fo(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Gx(e,n,i,jT(),r);return Hq(e,o,Jw())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await Gx(e,n,i,jT(),r);return eq(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(fo(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Uq(e),i=new wq(e);return n.register("authEvent",r=>(Fe(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(PE,{type:PE},r=>{const o=r?.[0]?.[PE];o!==void 0&&n(!!o),ho(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Rq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ek()||WM()||Zw()}}const Xq=Qq;var Kx="@firebase/auth",Wx="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jq{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function t$(t){ql(new ba("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Fe(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:l,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tk(t)},d=new O7(i,r,o,f);return U7(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),ql(new ba("auth-internal",e=>{const n=Qw(e.getProvider("auth").getImmediate());return(i=>new Jq(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vs(Kx,Wx,e$(t)),vs(Kx,Wx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$=300,i$=gO("authIdTokenMaxAge")||n$;let Yx=null;const r$=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>i$)return;const r=n?.token;Yx!==r&&(Yx=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function s$(t=IO()){const e=yy(t,"auth");if(e.isInitialized())return e.getImmediate();const n=z7(t,{popupRedirectResolver:Xq,persistence:[uq,lk,ck]}),i=gO("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=r$(o.toString());Y7(n,l,()=>l(n.currentUser)),W7(n,c=>l(c))}}const r=mO("auth");return r&&F7(n,`http://${r}`),n}function o$(){return document.getElementsByTagName("head")?.[0]??document}M7({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Es("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",o$().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});t$("Browser");var Zx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ya,_k;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function P(){}P.prototype=I.prototype,x.F=I.prototype,x.prototype=new P,x.prototype.constructor=x,x.D=function(F,L,B){for(var M=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)M[Pe-2]=arguments[Pe];return I.prototype[L].apply(F,M)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(x,I,P){P||(P=0);const F=Array(16);if(typeof I=="string")for(var L=0;L<16;++L)F[L]=I.charCodeAt(P++)|I.charCodeAt(P++)<<8|I.charCodeAt(P++)<<16|I.charCodeAt(P++)<<24;else for(L=0;L<16;++L)F[L]=I[P++]|I[P++]<<8|I[P++]<<16|I[P++]<<24;I=x.g[0],P=x.g[1],L=x.g[2];let B=x.g[3],M;M=I+(B^P&(L^B))+F[0]+3614090360&4294967295,I=P+(M<<7&4294967295|M>>>25),M=B+(L^I&(P^L))+F[1]+3905402710&4294967295,B=I+(M<<12&4294967295|M>>>20),M=L+(P^B&(I^P))+F[2]+606105819&4294967295,L=B+(M<<17&4294967295|M>>>15),M=P+(I^L&(B^I))+F[3]+3250441966&4294967295,P=L+(M<<22&4294967295|M>>>10),M=I+(B^P&(L^B))+F[4]+4118548399&4294967295,I=P+(M<<7&4294967295|M>>>25),M=B+(L^I&(P^L))+F[5]+1200080426&4294967295,B=I+(M<<12&4294967295|M>>>20),M=L+(P^B&(I^P))+F[6]+2821735955&4294967295,L=B+(M<<17&4294967295|M>>>15),M=P+(I^L&(B^I))+F[7]+4249261313&4294967295,P=L+(M<<22&4294967295|M>>>10),M=I+(B^P&(L^B))+F[8]+1770035416&4294967295,I=P+(M<<7&4294967295|M>>>25),M=B+(L^I&(P^L))+F[9]+2336552879&4294967295,B=I+(M<<12&4294967295|M>>>20),M=L+(P^B&(I^P))+F[10]+4294925233&4294967295,L=B+(M<<17&4294967295|M>>>15),M=P+(I^L&(B^I))+F[11]+2304563134&4294967295,P=L+(M<<22&4294967295|M>>>10),M=I+(B^P&(L^B))+F[12]+1804603682&4294967295,I=P+(M<<7&4294967295|M>>>25),M=B+(L^I&(P^L))+F[13]+4254626195&4294967295,B=I+(M<<12&4294967295|M>>>20),M=L+(P^B&(I^P))+F[14]+2792965006&4294967295,L=B+(M<<17&4294967295|M>>>15),M=P+(I^L&(B^I))+F[15]+1236535329&4294967295,P=L+(M<<22&4294967295|M>>>10),M=I+(L^B&(P^L))+F[1]+4129170786&4294967295,I=P+(M<<5&4294967295|M>>>27),M=B+(P^L&(I^P))+F[6]+3225465664&4294967295,B=I+(M<<9&4294967295|M>>>23),M=L+(I^P&(B^I))+F[11]+643717713&4294967295,L=B+(M<<14&4294967295|M>>>18),M=P+(B^I&(L^B))+F[0]+3921069994&4294967295,P=L+(M<<20&4294967295|M>>>12),M=I+(L^B&(P^L))+F[5]+3593408605&4294967295,I=P+(M<<5&4294967295|M>>>27),M=B+(P^L&(I^P))+F[10]+38016083&4294967295,B=I+(M<<9&4294967295|M>>>23),M=L+(I^P&(B^I))+F[15]+3634488961&4294967295,L=B+(M<<14&4294967295|M>>>18),M=P+(B^I&(L^B))+F[4]+3889429448&4294967295,P=L+(M<<20&4294967295|M>>>12),M=I+(L^B&(P^L))+F[9]+568446438&4294967295,I=P+(M<<5&4294967295|M>>>27),M=B+(P^L&(I^P))+F[14]+3275163606&4294967295,B=I+(M<<9&4294967295|M>>>23),M=L+(I^P&(B^I))+F[3]+4107603335&4294967295,L=B+(M<<14&4294967295|M>>>18),M=P+(B^I&(L^B))+F[8]+1163531501&4294967295,P=L+(M<<20&4294967295|M>>>12),M=I+(L^B&(P^L))+F[13]+2850285829&4294967295,I=P+(M<<5&4294967295|M>>>27),M=B+(P^L&(I^P))+F[2]+4243563512&4294967295,B=I+(M<<9&4294967295|M>>>23),M=L+(I^P&(B^I))+F[7]+1735328473&4294967295,L=B+(M<<14&4294967295|M>>>18),M=P+(B^I&(L^B))+F[12]+2368359562&4294967295,P=L+(M<<20&4294967295|M>>>12),M=I+(P^L^B)+F[5]+4294588738&4294967295,I=P+(M<<4&4294967295|M>>>28),M=B+(I^P^L)+F[8]+2272392833&4294967295,B=I+(M<<11&4294967295|M>>>21),M=L+(B^I^P)+F[11]+1839030562&4294967295,L=B+(M<<16&4294967295|M>>>16),M=P+(L^B^I)+F[14]+4259657740&4294967295,P=L+(M<<23&4294967295|M>>>9),M=I+(P^L^B)+F[1]+2763975236&4294967295,I=P+(M<<4&4294967295|M>>>28),M=B+(I^P^L)+F[4]+1272893353&4294967295,B=I+(M<<11&4294967295|M>>>21),M=L+(B^I^P)+F[7]+4139469664&4294967295,L=B+(M<<16&4294967295|M>>>16),M=P+(L^B^I)+F[10]+3200236656&4294967295,P=L+(M<<23&4294967295|M>>>9),M=I+(P^L^B)+F[13]+681279174&4294967295,I=P+(M<<4&4294967295|M>>>28),M=B+(I^P^L)+F[0]+3936430074&4294967295,B=I+(M<<11&4294967295|M>>>21),M=L+(B^I^P)+F[3]+3572445317&4294967295,L=B+(M<<16&4294967295|M>>>16),M=P+(L^B^I)+F[6]+76029189&4294967295,P=L+(M<<23&4294967295|M>>>9),M=I+(P^L^B)+F[9]+3654602809&4294967295,I=P+(M<<4&4294967295|M>>>28),M=B+(I^P^L)+F[12]+3873151461&4294967295,B=I+(M<<11&4294967295|M>>>21),M=L+(B^I^P)+F[15]+530742520&4294967295,L=B+(M<<16&4294967295|M>>>16),M=P+(L^B^I)+F[2]+3299628645&4294967295,P=L+(M<<23&4294967295|M>>>9),M=I+(L^(P|~B))+F[0]+4096336452&4294967295,I=P+(M<<6&4294967295|M>>>26),M=B+(P^(I|~L))+F[7]+1126891415&4294967295,B=I+(M<<10&4294967295|M>>>22),M=L+(I^(B|~P))+F[14]+2878612391&4294967295,L=B+(M<<15&4294967295|M>>>17),M=P+(B^(L|~I))+F[5]+4237533241&4294967295,P=L+(M<<21&4294967295|M>>>11),M=I+(L^(P|~B))+F[12]+1700485571&4294967295,I=P+(M<<6&4294967295|M>>>26),M=B+(P^(I|~L))+F[3]+2399980690&4294967295,B=I+(M<<10&4294967295|M>>>22),M=L+(I^(B|~P))+F[10]+4293915773&4294967295,L=B+(M<<15&4294967295|M>>>17),M=P+(B^(L|~I))+F[1]+2240044497&4294967295,P=L+(M<<21&4294967295|M>>>11),M=I+(L^(P|~B))+F[8]+1873313359&4294967295,I=P+(M<<6&4294967295|M>>>26),M=B+(P^(I|~L))+F[15]+4264355552&4294967295,B=I+(M<<10&4294967295|M>>>22),M=L+(I^(B|~P))+F[6]+2734768916&4294967295,L=B+(M<<15&4294967295|M>>>17),M=P+(B^(L|~I))+F[13]+1309151649&4294967295,P=L+(M<<21&4294967295|M>>>11),M=I+(L^(P|~B))+F[4]+4149444226&4294967295,I=P+(M<<6&4294967295|M>>>26),M=B+(P^(I|~L))+F[11]+3174756917&4294967295,B=I+(M<<10&4294967295|M>>>22),M=L+(I^(B|~P))+F[2]+718787259&4294967295,L=B+(M<<15&4294967295|M>>>17),M=P+(B^(L|~I))+F[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(L+(M<<21&4294967295|M>>>11))&4294967295,x.g[2]=x.g[2]+L&4294967295,x.g[3]=x.g[3]+B&4294967295}i.prototype.v=function(x,I){I===void 0&&(I=x.length);const P=I-this.blockSize,F=this.C;let L=this.h,B=0;for(;B<I;){if(L==0)for(;B<=P;)r(this,x,B),B+=this.blockSize;if(typeof x=="string"){for(;B<I;)if(F[L++]=x.charCodeAt(B++),L==this.blockSize){r(this,F),L=0;break}}else for(;B<I;)if(F[L++]=x[B++],L==this.blockSize){r(this,F),L=0;break}}this.h=L,this.o+=I},i.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;I=this.o*8;for(var P=x.length-8;P<x.length;++P)x[P]=I&255,I/=256;for(this.v(x),x=Array(16),I=0,P=0;P<4;++P)for(let F=0;F<32;F+=8)x[I++]=this.g[P]>>>F&255;return x};function o(x,I){var P=c;return Object.prototype.hasOwnProperty.call(P,x)?P[x]:P[x]=I(x)}function l(x,I){this.h=I;const P=[];let F=!0;for(let L=x.length-1;L>=0;L--){const B=x[L]|0;F&&B==I||(P[L]=B,F=!1)}this.g=P}var c={};function f(x){return-128<=x&&x<128?o(x,function(I){return new l([I|0],I<0?-1:0)}):new l([x|0],x<0?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return y;if(x<0)return O(d(-x));const I=[];let P=1;for(let F=0;x>=P;F++)I[F]=x/P|0,P*=4294967296;return new l(I,0)}function p(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return O(p(x.substring(1),I));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=d(Math.pow(I,8));let F=y;for(let B=0;B<x.length;B+=8){var L=Math.min(8,x.length-B);const M=parseInt(x.substring(B,B+L),I);L<8?(L=d(Math.pow(I,L)),F=F.j(L).add(d(M))):(F=F.j(P),F=F.add(d(M)))}return F}var y=f(0),v=f(1),w=f(16777216);t=l.prototype,t.m=function(){if(N(this))return-O(this).m();let x=0,I=1;for(let P=0;P<this.g.length;P++){const F=this.i(P);x+=(F>=0?F:4294967296+F)*I,I*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(S(this))return"0";if(N(this))return"-"+O(this).toString(x);const I=d(Math.pow(x,6));var P=this;let F="";for(;;){const L=K(P,I).g;P=j(P,L.j(I));let B=((P.g.length>0?P.g[0]:P.h)>>>0).toString(x);if(P=L,S(P))return B+F;for(;B.length<6;)B="0"+B;F=B+F}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function S(x){if(x.h!=0)return!1;for(let I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function N(x){return x.h==-1}t.l=function(x){return x=j(this,x),N(x)?-1:S(x)?0:1};function O(x){const I=x.g.length,P=[];for(let F=0;F<I;F++)P[F]=~x.g[F];return new l(P,~x.h).add(v)}t.abs=function(){return N(this)?O(this):this},t.add=function(x){const I=Math.max(this.g.length,x.g.length),P=[];let F=0;for(let L=0;L<=I;L++){let B=F+(this.i(L)&65535)+(x.i(L)&65535),M=(B>>>16)+(this.i(L)>>>16)+(x.i(L)>>>16);F=M>>>16,B&=65535,M&=65535,P[L]=M<<16|B}return new l(P,P[P.length-1]&-2147483648?-1:0)};function j(x,I){return x.add(O(I))}t.j=function(x){if(S(this)||S(x))return y;if(N(this))return N(x)?O(this).j(O(x)):O(O(this).j(x));if(N(x))return O(this.j(O(x)));if(this.l(w)<0&&x.l(w)<0)return d(this.m()*x.m());const I=this.g.length+x.g.length,P=[];for(var F=0;F<2*I;F++)P[F]=0;for(F=0;F<this.g.length;F++)for(let L=0;L<x.g.length;L++){const B=this.i(F)>>>16,M=this.i(F)&65535,Pe=x.i(L)>>>16,Ke=x.i(L)&65535;P[2*F+2*L]+=M*Ke,V(P,2*F+2*L),P[2*F+2*L+1]+=B*Ke,V(P,2*F+2*L+1),P[2*F+2*L+1]+=M*Pe,V(P,2*F+2*L+1),P[2*F+2*L+2]+=B*Pe,V(P,2*F+2*L+2)}for(x=0;x<I;x++)P[x]=P[2*x+1]<<16|P[2*x];for(x=I;x<2*I;x++)P[x]=0;return new l(P,0)};function V(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function k(x,I){this.g=x,this.h=I}function K(x,I){if(S(I))throw Error("division by zero");if(S(x))return new k(y,y);if(N(x))return I=K(O(x),I),new k(O(I.g),O(I.h));if(N(I))return I=K(x,O(I)),new k(O(I.g),I.h);if(x.g.length>30){if(N(x)||N(I))throw Error("slowDivide_ only works with positive integers.");for(var P=v,F=I;F.l(x)<=0;)P=H(P),F=H(F);var L=ie(P,1),B=ie(F,1);for(F=ie(F,2),P=ie(P,2);!S(F);){var M=B.add(F);M.l(x)<=0&&(L=L.add(P),B=M),F=ie(F,1),P=ie(P,1)}return I=j(x,L.j(I)),new k(L,I)}for(L=y;x.l(I)>=0;){for(P=Math.max(1,Math.floor(x.m()/I.m())),F=Math.ceil(Math.log(P)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),B=d(P),M=B.j(I);N(M)||M.l(x)>0;)P-=F,B=d(P),M=B.j(I);S(B)&&(B=v),L=L.add(B),x=j(x,M)}return new k(L,x)}t.B=function(x){return K(this,x).h},t.and=function(x){const I=Math.max(this.g.length,x.g.length),P=[];for(let F=0;F<I;F++)P[F]=this.i(F)&x.i(F);return new l(P,this.h&x.h)},t.or=function(x){const I=Math.max(this.g.length,x.g.length),P=[];for(let F=0;F<I;F++)P[F]=this.i(F)|x.i(F);return new l(P,this.h|x.h)},t.xor=function(x){const I=Math.max(this.g.length,x.g.length),P=[];for(let F=0;F<I;F++)P[F]=this.i(F)^x.i(F);return new l(P,this.h^x.h)};function H(x){const I=x.g.length+1,P=[];for(let F=0;F<I;F++)P[F]=x.i(F)<<1|x.i(F-1)>>>31;return new l(P,x.h)}function ie(x,I){const P=I>>5;I%=32;const F=x.g.length-P,L=[];for(let B=0;B<F;B++)L[B]=I>0?x.i(B+P)>>>I|x.i(B+P+1)<<32-I:x.i(B+P);return new l(L,x.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,_k=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=p,ya=l}).apply(typeof Zx<"u"?Zx:typeof self<"u"?self:typeof window<"u"?window:{});var lg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yk,Kf,vk,zg,$T,Ek,Tk,bk;(function(){var t,e=Object.defineProperty;function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof lg=="object"&&lg];for(var E=0;E<m.length;++E){var b=m[E];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=n(this);function r(m,E){if(E)e:{var b=i;m=m.split(".");for(var D=0;D<m.length-1;D++){var Y=m[D];if(!(Y in b))break e;b=b[Y]}m=m[m.length-1],D=b[m],E=E(D),E!=D&&E!=null&&e(b,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var b=[],D;for(D in E)Object.prototype.hasOwnProperty.call(E,D)&&b.push([D,E[D]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function f(m,E,b){return m.call.apply(m.bind,arguments)}function d(m,E,b){return d=f,d.apply(null,arguments)}function p(m,E){var b=Array.prototype.slice.call(arguments,1);return function(){var D=b.slice();return D.push.apply(D,arguments),m.apply(this,D)}}function y(m,E){function b(){}b.prototype=E.prototype,m.Z=E.prototype,m.prototype=new b,m.prototype.constructor=m,m.Ob=function(D,Y,te){for(var ve=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)ve[Ye-2]=arguments[Ye];return E.prototype[Y].apply(D,ve)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const E=m.length;if(E>0){const b=Array(E);for(let D=0;D<E;D++)b[D]=m[D];return b}return[]}function S(m,E){for(let D=1;D<arguments.length;D++){const Y=arguments[D];var b=typeof Y;if(b=b!="object"?b:Y?Array.isArray(Y)?"array":b:"null",b=="array"||b=="object"&&typeof Y.length=="number"){b=m.length||0;const te=Y.length||0;m.length=b+te;for(let ve=0;ve<te;ve++)m[b+ve]=Y[ve]}else m.push(Y)}}class N{constructor(E,b){this.i=E,this.j=b,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function O(m){l.setTimeout(()=>{throw m},0)}function j(){var m=x;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class V{constructor(){this.h=this.g=null}add(E,b){const D=k.get();D.set(E,b),this.h?this.h.next=D:this.g=D,this.h=D}}var k=new N(()=>new K,m=>m.reset());class K{constructor(){this.next=this.g=this.h=null}set(E,b){this.h=E,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let H,ie=!1,x=new V,I=()=>{const m=Promise.resolve(void 0);H=()=>{m.then(P)}};function P(){for(var m;m=j();){try{m.h.call(m.g)}catch(b){O(b)}var E=k;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}ie=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const b=()=>{};l.addEventListener("test",b,E),l.removeEventListener("test",b,E)}catch{}return m})();function M(m){return/^[\s\xa0]*$/.test(m)}function Pe(m,E){L.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}y(Pe,L),Pe.prototype.init=function(m,E){const b=this.type=m.type,D=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(b=="mouseover"?E=m.fromElement:b=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Pe.Z.h.call(this)},Pe.prototype.h=function(){Pe.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ke="closure_listenable_"+(Math.random()*1e6|0),ee=0;function he(m,E,b,D,Y){this.listener=m,this.proxy=null,this.src=E,this.type=b,this.capture=!!D,this.ha=Y,this.key=++ee,this.da=this.fa=!1}function ge(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ke(m,E,b){for(const D in m)E.call(b,m[D],D,m)}function je(m,E){for(const b in m)E.call(void 0,m[b],b,m)}function q(m){const E={};for(const b in m)E[b]=m[b];return E}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _e(m,E){let b,D;for(let Y=1;Y<arguments.length;Y++){D=arguments[Y];for(b in D)m[b]=D[b];for(let te=0;te<oe.length;te++)b=oe[te],Object.prototype.hasOwnProperty.call(D,b)&&(m[b]=D[b])}}function Te(m){this.src=m,this.g={},this.h=0}Te.prototype.add=function(m,E,b,D,Y){const te=m.toString();m=this.g[te],m||(m=this.g[te]=[],this.h++);const ve=Ue(m,E,D,Y);return ve>-1?(E=m[ve],b||(E.fa=!1)):(E=new he(E,this.src,te,!!D,Y),E.fa=b,m.push(E)),E};function De(m,E){const b=E.type;if(b in m.g){var D=m.g[b],Y=Array.prototype.indexOf.call(D,E,void 0),te;(te=Y>=0)&&Array.prototype.splice.call(D,Y,1),te&&(ge(E),m.g[b].length==0&&(delete m.g[b],m.h--))}}function Ue(m,E,b,D){for(let Y=0;Y<m.length;++Y){const te=m[Y];if(!te.da&&te.listener==E&&te.capture==!!b&&te.ha==D)return Y}return-1}var He="closure_lm_"+(Math.random()*1e6|0),Vt={};function ct(m,E,b,D,Y){if(Array.isArray(E)){for(let te=0;te<E.length;te++)ct(m,E[te],b,D,Y);return null}return b=So(b),m&&m[Ke]?m.J(E,b,c(D)?!!D.capture:!1,Y):kn(m,E,b,!1,D,Y)}function kn(m,E,b,D,Y,te){if(!E)throw Error("Invalid event type");const ve=c(Y)?!!Y.capture:!!Y;let Ye=pi(m);if(Ye||(m[He]=Ye=new Te(m)),b=Ye.add(E,b,D,ve,te),b.proxy)return b;if(D=Pi(),b.proxy=D,D.src=m,D.listener=b,m.addEventListener)B||(Y=ve),Y===void 0&&(Y=!1),m.addEventListener(E.toString(),D,Y);else if(m.attachEvent)m.attachEvent(fn(E.toString()),D);else if(m.addListener&&m.removeListener)m.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Pi(){function m(b){return E.call(m.src,m.listener,b)}const E=ft;return m}function Jn(m,E,b,D,Y){if(Array.isArray(E))for(var te=0;te<E.length;te++)Jn(m,E[te],b,D,Y);else D=c(D)?!!D.capture:!!D,b=So(b),m&&m[Ke]?(m=m.i,te=String(E).toString(),te in m.g&&(E=m.g[te],b=Ue(E,b,D,Y),b>-1&&(ge(E[b]),Array.prototype.splice.call(E,b,1),E.length==0&&(delete m.g[te],m.h--)))):m&&(m=pi(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Ue(E,b,D,Y)),(b=m>-1?E[m]:null)&&mi(b))}function mi(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[Ke])De(E.i,m);else{var b=m.type,D=m.proxy;E.removeEventListener?E.removeEventListener(b,D,m.capture):E.detachEvent?E.detachEvent(fn(b),D):E.addListener&&E.removeListener&&E.removeListener(D),(b=pi(E))?(De(b,m),b.h==0&&(b.src=null,E[He]=null)):ge(m)}}}function fn(m){return m in Vt?Vt[m]:Vt[m]="on"+m}function ft(m,E){if(m.da)m=!0;else{E=new Pe(E,this);const b=m.listener,D=m.ha||m.src;m.fa&&mi(m),m=b.call(D,E)}return m}function pi(m){return m=m[He],m instanceof Te?m:null}var Oi="__closure_events_fn_"+(Math.random()*1e9>>>0);function So(m){return typeof m=="function"?m:(m[Oi]||(m[Oi]=function(E){return m.handleEvent(E)}),m[Oi])}function zt(){F.call(this),this.i=new Te(this),this.M=this,this.G=null}y(zt,F),zt.prototype[Ke]=!0,zt.prototype.removeEventListener=function(m,E,b,D){Jn(this,m,E,b,D)};function z(m,E){var b,D=m.G;if(D)for(b=[];D;D=D.G)b.push(D);if(m=m.M,D=E.type||E,typeof E=="string")E=new L(E,m);else if(E instanceof L)E.target=E.target||m;else{var Y=E;E=new L(D,m),_e(E,Y)}Y=!0;let te,ve;if(b)for(ve=b.length-1;ve>=0;ve--)te=E.g=b[ve],Y=Z(te,D,!0,E)&&Y;if(te=E.g=m,Y=Z(te,D,!0,E)&&Y,Y=Z(te,D,!1,E)&&Y,b)for(ve=0;ve<b.length;ve++)te=E.g=b[ve],Y=Z(te,D,!1,E)&&Y}zt.prototype.N=function(){if(zt.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const b=m.g[E];for(let D=0;D<b.length;D++)ge(b[D]);delete m.g[E],m.h--}}this.G=null},zt.prototype.J=function(m,E,b,D){return this.i.add(String(m),E,!1,b,D)},zt.prototype.K=function(m,E,b,D){return this.i.add(String(m),E,!0,b,D)};function Z(m,E,b,D){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let Y=!0;for(let te=0;te<E.length;++te){const ve=E[te];if(ve&&!ve.da&&ve.capture==b){const Ye=ve.listener,sn=ve.ha||ve.src;ve.fa&&De(m.i,ve),Y=Ye.call(sn,D)!==!1&&Y}}return Y&&!D.defaultPrevented}function re(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=d(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:l.setTimeout(m,E||0)}function we(m){m.g=re(()=>{m.g=null,m.i&&(m.i=!1,we(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class fe extends F{constructor(E,b){super(),this.m=E,this.l=b,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:we(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function de(m){F.call(this),this.h=m,this.g={}}y(de,F);var pe=[];function We(m){ke(m.g,function(E,b){this.g.hasOwnProperty(b)&&mi(E)},m),m.g={}}de.prototype.N=function(){de.Z.N.call(this),We(this)},de.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var et=l.JSON.stringify,ei=l.JSON.parse,Rs=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function Mi(){}function mu(){}var ai={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rn(){L.call(this,"d")}y(rn,L);function gi(){L.call(this,"c")}y(gi,L);var Bt={},pu=null;function xs(){return pu=pu||new zt}Bt.Ia="serverreachability";function Mm(m){L.call(this,Bt.Ia,m)}y(Mm,L);function Hr(m){const E=xs();z(E,new Mm(E))}Bt.STAT_EVENT="statevent";function Ua(m,E){L.call(this,Bt.STAT_EVENT,m),this.stat=E}y(Ua,L);function dn(m){const E=xs();z(E,new Ua(E,m))}Bt.Ja="timingevent";function Gr(m,E){L.call(this,Bt.Ja,m),this.size=E}y(Gr,L);function Kr(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},E)}function Tr(){this.g=!0}Tr.prototype.ua=function(){this.g=!1};function pv(m,E,b,D,Y,te){m.info(function(){if(m.g)if(te){var ve="",Ye=te.split("&");for(let pt=0;pt<Ye.length;pt++){var sn=Ye[pt].split("=");if(sn.length>1){const qt=sn[0];sn=sn[1];const tr=qt.split("_");ve=tr.length>=2&&tr[1]=="type"?ve+(qt+"="+sn+"&"):ve+(qt+"=redacted&")}}}else ve=null;else ve=te;return"XMLHTTP REQ ("+D+") [attempt "+Y+"]: "+E+`
`+b+`
`+ve})}function km(m,E,b,D,Y,te,ve){m.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Y+"]: "+E+`
`+b+`
`+te+" "+ve})}function Wr(m,E,b,D){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+gv(m,b)+(D?" "+D:"")})}function Fa(m,E){m.info(function(){return"TIMEOUT: "+E})}Tr.prototype.info=function(){};function gv(m,E){if(!m.g)return E;if(!E)return null;try{const te=JSON.parse(E);if(te){for(m=0;m<te.length;m++)if(Array.isArray(te[m])){var b=te[m];if(!(b.length<2)){var D=b[1];if(Array.isArray(D)&&!(D.length<1)){var Y=D[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let ve=1;ve<D.length;ve++)D[ve]=""}}}}return et(te)}catch{return E}}var ja={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Dh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nh;function Ba(){}y(Ba,Mi),Ba.prototype.g=function(){return new XMLHttpRequest},Nh=new Ba;function Ds(m){return encodeURIComponent(String(m))}function Vm(m){var E=1;m=m.split(":");const b=[];for(;E>0&&m.length;)b.push(m.shift()),E--;return m.length&&b.push(m.join(":")),b}function br(m,E,b,D){this.j=m,this.i=E,this.l=b,this.S=D||1,this.V=new de(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new wr}function wr(){this.i=null,this.g="",this.h=!1}var mn={},Vn={};function Yr(m,E,b){m.M=1,m.A=qa(gn(E)),m.u=b,m.R=!0,gu(m,null)}function gu(m,E){m.F=Date.now(),Zr(m),m.B=gn(m.A);var b=m.B,D=m.S;Array.isArray(D)||(D=[String(D)]),Eu(b.i,"t",D),m.C=0,b=m.j.L,m.h=new wr,m.g=Qm(m.j,b?E:null,!m.u),m.P>0&&(m.O=new fe(d(m.Y,m,m.g),m.P)),E=m.V,b=m.g,D=m.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(pe[0]=Y.toString()),Y=pe);for(let te=0;te<Y.length;te++){const ve=ct(b,Y[te],D||E.handleEvent,!1,E.h||E);if(!ve)break;E.g[ve.key]=ve}E=m.J?q(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),Hr(),pv(m.i,m.v,m.B,m.l,m.S,m.u)}br.prototype.ba=function(m){m=m.target;const E=this.O;E&&Ar(m)==3?E.j():this.Y(m)},br.prototype.Y=function(m){try{if(m==this.g)e:{const Ye=Ar(this.g),sn=this.g.ya(),pt=this.g.ca();if(!(Ye<3)&&(Ye!=3||this.g&&(this.h.h||this.g.la()||$n(this.g)))){this.K||Ye!=4||sn==7||(sn==8||pt<=0?Hr(3):Hr(2)),Qr(this);var E=this.g.ca();this.X=E;var b=_v(this);if(this.o=E==200,km(this.i,this.v,this.B,this.l,this.S,Ye,E),this.o){if(this.U&&!this.L){t:{if(this.g){var D,Y=this.g;if((D=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(D)){var te=D;break t}}te=null}if(m=te)Wr(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xr(this,m);else{this.o=!1,this.m=3,dn(12),ki(this),Xi(this);break e}}if(this.R){m=!0;let qt;for(;!this.K&&this.C<b.length;)if(qt=zm(this,b),qt==Vn){Ye==4&&(this.m=4,dn(14),m=!1),Wr(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==mn){this.m=4,dn(15),Wr(this.i,this.l,b,"[Invalid Chunk]"),m=!1;break}else Wr(this.i,this.l,qt,null),Xr(this,qt);if(Lm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||b.length!=0||this.h.h||(this.m=1,dn(16),m=!1),this.o=this.o&&m,!m)Wr(this.i,this.l,b,"[Invalid Chunked Response]"),ki(this),Xi(this);else if(b.length>0&&!this.W){this.W=!0;var ve=this.j;ve.g==this&&ve.aa&&!ve.P&&(ve.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),Gh(ve),ve.P=!0,dn(11))}}else Wr(this.i,this.l,b,null),Xr(this,b);Ye==4&&ki(this),this.o&&!this.K&&(Ye==4?Km(this.j,this):(this.o=!1,Zr(this)))}else Ps(this.g),E==400&&b.indexOf("Unknown SID")>0?(this.m=3,dn(12)):(this.m=0,dn(13)),ki(this),Xi(this)}}}catch{}finally{}};function _v(m){if(!Lm(m))return m.g.la();const E=$n(m.g);if(E==="")return"";let b="";const D=E.length,Y=Ar(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return ki(m),Xi(m),"";m.h.i=new l.TextDecoder}for(let te=0;te<D;te++)m.h.h=!0,b+=m.h.i.decode(E[te],{stream:!(Y&&te==D-1)});return E.length=0,m.h.g+=b,m.C=0,m.h.g}function Lm(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function zm(m,E){var b=m.C,D=E.indexOf(`
`,b);return D==-1?Vn:(b=Number(E.substring(b,D)),isNaN(b)?mn:(D+=1,D+b>E.length?Vn:(E=E.slice(D,D+b),m.C=D+b,E)))}br.prototype.cancel=function(){this.K=!0,ki(this)};function Zr(m){m.T=Date.now()+m.H,_u(m,m.H)}function _u(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Kr(d(m.aa,m),E)}function Qr(m){m.D&&(l.clearTimeout(m.D),m.D=null)}br.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Fa(this.i,this.B),this.M!=2&&(Hr(),dn(17)),ki(this),this.m=2,Xi(this)):_u(this,this.T-m)};function Xi(m){m.j.I==0||m.K||Km(m.j,m)}function ki(m){Qr(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,We(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function Xr(m,E){try{var b=m.j;if(b.I!=0&&(b.g==m||es(b.h,m))){if(!m.L&&es(b.h,m)&&b.I==3){try{var D=b.Ba.g.parse(E)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Y=D;if(Y[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<m.F)Cu(b),Po(b);else break e;Za(b),dn(18)}}else b.xa=Y[1],0<b.xa-b.K&&Y[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=Kr(d(b.Va,b),6e3));Jr(b.h)<=1&&b.ta&&(b.ta=void 0)}else os(b,11)}else if((m.L||b.g==m)&&Cu(b),!M(E))for(Y=b.Ba.g.parse(E),E=0;E<Y.length;E++){let pt=Y[E];const qt=pt[0];if(!(qt<=b.K))if(b.K=qt,pt=pt[1],b.I==2)if(pt[0]=="c"){b.M=pt[1],b.ba=pt[2];const tr=pt[3];tr!=null&&(b.ka=tr,b.j.info("VER="+b.ka));const as=pt[4];as!=null&&(b.za=as,b.j.info("SVER="+b.za));const Ir=pt[5];Ir!=null&&typeof Ir=="number"&&Ir>0&&(D=1.5*Ir,b.O=D,b.j.info("backChannelRequestTimeoutMs_="+D)),D=b;const Rr=m.g;if(Rr){const Qa=Rr.g?Rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qa){var te=D.h;te.g||Qa.indexOf("spdy")==-1&&Qa.indexOf("quic")==-1&&Qa.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Mh(te,te.h),te.h=null))}if(D.G){const Au=Rr.g?Rr.g.getResponseHeader("X-HTTP-Session-Id"):null;Au&&(D.wa=Au,Tt(D.J,D.G,Au))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-m.F,b.j.info("Handshake RTT: "+b.T+"ms")),D=b;var ve=m;if(D.na=Zm(D,D.L?D.ba:null,D.W),ve.L){kh(D.h,ve);var Ye=ve,sn=D.O;sn&&(Ye.H=sn),Ye.D&&(Qr(Ye),Zr(Ye)),D.g=ve}else Hm(D);b.i.length>0&&ss(b)}else pt[0]!="stop"&&pt[0]!="close"||os(b,7);else b.I==3&&(pt[0]=="stop"||pt[0]=="close"?pt[0]=="stop"?os(b,7):$h(b):pt[0]!="noop"&&b.l&&b.l.qa(pt),b.A=0)}}Hr(4)}catch{}}var pn=class{constructor(m,E){this.g=m,this.map=E}};function Ph(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Oh(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Jr(m){return m.h?1:m.g?m.g.size:0}function es(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Mh(m,E){m.g?m.g.add(E):m.h=E}function kh(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Ph.prototype.cancel=function(){if(this.i=Vh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Vh(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const b of m.g.values())E=E.concat(b.G);return E}return w(m.i)}var Um=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yu(m,E){if(m){m=m.split("&");for(let b=0;b<m.length;b++){const D=m[b].indexOf("=");let Y,te=null;D>=0?(Y=m[b].substring(0,D),te=m[b].substring(D+1)):Y=m[b],E(Y,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Vi(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof Vi?(this.l=m.l,Ln(this,m.j),this.o=m.o,this.g=m.g,Co(this,m.u),this.h=m.h,Lh(this,qm(m.i)),this.m=m.m):m&&(E=String(m).match(Um))?(this.l=!1,Ln(this,E[1]||"",!0),this.o=ts(E[2]||""),this.g=ts(E[3]||"",!0),Co(this,E[4]),this.h=ts(E[5]||"",!0),Lh(this,E[6]||"",!0),this.m=ts(E[7]||"")):(this.l=!1,this.i=new Io(null,this.l))}Vi.prototype.toString=function(){const m=[];var E=this.j;E&&m.push($a(E,vu,!0),":");var b=this.g;return(b||E=="file")&&(m.push("//"),(E=this.o)&&m.push($a(E,vu,!0),"@"),m.push(Ds(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&m.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&m.push("/"),m.push($a(b,b.charAt(0)=="/"?zh:Fm,!0))),(b=this.i.toString())&&m.push("?",b),(b=this.m)&&m.push("#",$a(b,jm)),m.join("")},Vi.prototype.resolve=function(m){const E=gn(this);let b=!!m.j;b?Ln(E,m.j):b=!!m.o,b?E.o=m.o:b=!!m.g,b?E.g=m.g:b=m.u!=null;var D=m.h;if(b)Co(E,m.u);else if(b=!!m.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var Y=E.h.lastIndexOf("/");Y!=-1&&(D=E.h.slice(0,Y+1)+D)}if(Y=D,Y==".."||Y==".")D="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){D=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const te=[];for(let ve=0;ve<Y.length;){const Ye=Y[ve++];Ye=="."?D&&ve==Y.length&&te.push(""):Ye==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),D&&ve==Y.length&&te.push("")):(te.push(Ye),D=!0)}D=te.join("/")}else D=Y}return b?E.h=D:b=m.i.toString()!=="",b?Lh(E,qm(m.i)):b=!!m.m,b&&(E.m=m.m),E};function gn(m){return new Vi(m)}function Ln(m,E,b){m.j=b?ts(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function Co(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function Lh(m,E,b){E instanceof Io?(m.i=E,Tu(m.i,m.l)):(b||(E=$a(E,Ao)),m.i=new Io(E,m.l))}function Tt(m,E,b){m.i.set(E,b)}function qa(m){return Tt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function ts(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function $a(m,E,b){return typeof m=="string"?(m=encodeURI(m).replace(E,_i),b&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function _i(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var vu=/[#\/\?@]/g,Fm=/[#\?:]/g,zh=/[#\?]/g,Ao=/[#\?@]/g,jm=/#/g;function Io(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function yi(m){m.g||(m.g=new Map,m.h=0,m.i&&yu(m.i,function(E,b){m.add(decodeURIComponent(E.replace(/\+/g," ")),b)}))}t=Io.prototype,t.add=function(m,E){yi(this),this.i=null,m=Ro(this,m);let b=this.g.get(m);return b||this.g.set(m,b=[]),b.push(E),this.h+=1,this};function Bm(m,E){yi(m),E=Ro(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function Uh(m,E){return yi(m),E=Ro(m,E),m.g.has(E)}t.forEach=function(m,E){yi(this),this.g.forEach(function(b,D){b.forEach(function(Y){m.call(E,Y,D,this)},this)},this)};function Fh(m,E){yi(m);let b=[];if(typeof E=="string")Uh(m,E)&&(b=b.concat(m.g.get(Ro(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)b=b.concat(m[E]);return b}t.set=function(m,E){return yi(this),this.i=null,m=Ro(this,m),Uh(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},t.get=function(m,E){return m?(m=Fh(this,m),m.length>0?String(m[0]):E):E};function Eu(m,E,b){Bm(m,E),b.length>0&&(m.i=null,m.g.set(Ro(m,E),w(b)),m.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let D=0;D<E.length;D++){var b=E[D];const Y=Ds(b);b=Fh(this,b);for(let te=0;te<b.length;te++){let ve=Y;b[te]!==""&&(ve+="="+Ds(b[te])),m.push(ve)}}return this.i=m.join("&")};function qm(m){const E=new Io;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function Ro(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function Tu(m,E){E&&!m.j&&(yi(m),m.i=null,m.g.forEach(function(b,D){const Y=D.toLowerCase();D!=Y&&(Bm(this,D),Eu(this,Y,b))},m)),m.j=E}function Sr(m,E){const b=new Tr;if(l.Image){const D=new Image;D.onload=p(Ji,b,"TestLoadImage: loaded",!0,E,D),D.onerror=p(Ji,b,"TestLoadImage: error",!1,E,D),D.onabort=p(Ji,b,"TestLoadImage: abort",!1,E,D),D.ontimeout=p(Ji,b,"TestLoadImage: timeout",!1,E,D),l.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=m}else E(!1)}function jh(m,E){const b=new Tr,D=new AbortController,Y=setTimeout(()=>{D.abort(),Ji(b,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:D.signal}).then(te=>{clearTimeout(Y),te.ok?Ji(b,"TestPingServer: ok",!0,E):Ji(b,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Y),Ji(b,"TestPingServer: error",!1,E)})}function Ji(m,E,b,D,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),D(b)}catch{}}function xo(){this.g=new Rs}function ns(m){this.i=m.Sb||null,this.h=m.ab||!1}y(ns,Mi),ns.prototype.g=function(){return new Ha(this.i,this.h)};function Ha(m,E){zt.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Ha,zt),t=Ha.prototype,t.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,Cr(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||l).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Do(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Cr(this)),this.g&&(this.readyState=3,Cr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bu(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function bu(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Do(this):Cr(this),this.readyState==3&&bu(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,Do(this))},t.Na=function(m){this.g&&(this.response=m,Do(this))},t.ga=function(){this.g&&Do(this)};function Do(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Cr(m)}t.setRequestHeader=function(m,E){this.A.append(m,E)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var b=E.next();!b.done;)b=b.value,m.push(b[0]+": "+b[1]),b=E.next();return m.join(`\r
`)};function Cr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function er(m){let E="";return ke(m,function(b,D){E+=D,E+=":",E+=b,E+=`\r
`}),E}function Ga(m,E,b){e:{for(D in b){var D=!1;break e}D=!0}D||(b=er(b),typeof m=="string"?b!=null&&Ds(b):Tt(m,E,b))}function Rt(m){zt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(Rt,zt);var is=/^https?$/i,Bh=["POST","PUT"];t=Rt.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,E,b,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nh.g(),this.g.onreadystatechange=v(d(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(te){Ka(this,te);return}if(m=b||"",b=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Y in D)b.set(Y,D[Y]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const te of D.keys())b.set(te,D.get(te));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(b.keys()).find(te=>te.toLowerCase()=="content-type"),Y=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(Bh,E,void 0)>=0)||D||Y||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,ve]of b)this.g.setRequestHeader(te,ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(te){Ka(this,te)}};function Ka(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,qh(m),Ns(m)}function qh(m){m.A||(m.A=!0,z(m,"complete"),z(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,z(this,"complete"),z(this,"abort"),Ns(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ns(this,!0)),Rt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Wa(this):this.Xa())},t.Xa=function(){Wa(this)};function Wa(m){if(m.h&&typeof o<"u"){if(m.v&&Ar(m)==4)setTimeout(m.Ca.bind(m),0);else if(z(m,"readystatechange"),Ar(m)==4){m.h=!1;try{const te=m.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var b;if(!(b=E)){var D;if(D=te===0){let ve=String(m.D).match(Um)[1]||null;!ve&&l.self&&l.self.location&&(ve=l.self.location.protocol.slice(0,-1)),D=!is.test(ve?ve.toLowerCase():"")}b=D}if(b)z(m,"complete"),z(m,"success");else{m.o=6;try{var Y=Ar(m)>2?m.g.statusText:""}catch{Y=""}m.l=Y+" ["+m.ca()+"]",qh(m)}}finally{Ns(m)}}}}function Ns(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const b=m.g;m.g=null,E||z(m,"ready");try{b.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Ar(m){return m.g?m.g.readyState:0}t.ca=function(){try{return Ar(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),ei(E)}};function $n(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ps(m){const E={};m=(m.g&&Ar(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<m.length;D++){if(M(m[D]))continue;var b=Vm(m[D]);const Y=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const te=E[Y]||[];E[Y]=te,te.push(b)}je(E,function(D){return D.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function rs(m,E,b){return b&&b.internalChannelParams&&b.internalChannelParams[m]||E}function No(m){this.za=0,this.i=[],this.j=new Tr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=rs("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=rs("baseRetryDelayMs",5e3,m),this.Za=rs("retryDelaySeedMs",1e4,m),this.Ta=rs("forwardChannelMaxRetries",2,m),this.va=rs("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Ph(m&&m.concurrentRequestLimit),this.Ba=new xo,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=No.prototype,t.ka=8,t.I=1,t.connect=function(m,E,b,D){dn(0),this.W=m,this.H=E||{},b&&D!==void 0&&(this.H.OSID=b,this.H.OAID=D),this.F=this.X,this.J=Zm(this,null,this.W),ss(this)};function $h(m){if(wu(m),m.I==3){var E=m.V++,b=gn(m.J);if(Tt(b,"SID",m.M),Tt(b,"RID",E),Tt(b,"TYPE","terminate"),Ya(m,b),E=new br(m,m.j,E),E.M=2,E.A=qa(gn(b)),b=!1,l.navigator&&l.navigator.sendBeacon)try{b=l.navigator.sendBeacon(E.A.toString(),"")}catch{}!b&&l.Image&&(new Image().src=E.A,b=!0),b||(E.g=Qm(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Zr(E)}Ym(m)}function Po(m){m.g&&(Gh(m),m.g.cancel(),m.g=null)}function wu(m){Po(m),m.v&&(l.clearTimeout(m.v),m.v=null),Cu(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function ss(m){if(!Oh(m.h)&&!m.m){m.m=!0;var E=m.Ea;H||I(),ie||(H(),ie=!0),x.add(E,m),m.D=0}}function Su(m,E){return Jr(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Kr(d(m.Ea,m,E),Wm(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Y=new br(this,this.j,m);let te=this.o;if(this.U&&(te?(te=q(te),_e(te,this.U)):te=this.U),this.u!==null||this.R||(Y.J=te,te=null),this.S)e:{for(var E=0,b=0;b<this.i.length;b++){t:{var D=this.i[b];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(E+=D,E>4096){E=b;break e}if(E===4096||b===this.i.length-1){E=b+1;break e}}E=1e3}else E=1e3;E=$m(this,Y,E),b=gn(this.J),Tt(b,"RID",m),Tt(b,"CVER",22),this.G&&Tt(b,"X-HTTP-Session-Id",this.G),Ya(this,b),te&&(this.R?E="headers="+Ds(er(te))+"&"+E:this.u&&Ga(b,this.u,te)),Mh(this.h,Y),this.Ra&&Tt(b,"TYPE","init"),this.S?(Tt(b,"$req",E),Tt(b,"SID","null"),Y.U=!0,Yr(Y,b,null)):Yr(Y,b,E),this.I=2}}else this.I==3&&(m?Hh(this,m):this.i.length==0||Oh(this.h)||Hh(this))};function Hh(m,E){var b;E?b=E.l:b=m.V++;const D=gn(m.J);Tt(D,"SID",m.M),Tt(D,"RID",b),Tt(D,"AID",m.K),Ya(m,D),m.u&&m.o&&Ga(D,m.u,m.o),b=new br(m,m.j,b,m.D+1),m.u===null&&(b.J=m.o),E&&(m.i=E.G.concat(m.i)),E=$m(m,b,1e3),b.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Mh(m.h,b),Yr(b,D,E)}function Ya(m,E){m.H&&ke(m.H,function(b,D){Tt(E,D,b)}),m.l&&ke({},function(b,D){Tt(E,D,b)})}function $m(m,E,b){b=Math.min(m.i.length,b);const D=m.l?d(m.l.Ka,m.l,m):null;e:{var Y=m.i;let Ye=-1;for(;;){const sn=["count="+b];Ye==-1?b>0?(Ye=Y[0].g,sn.push("ofs="+Ye)):Ye=0:sn.push("ofs="+Ye);let pt=!0;for(let qt=0;qt<b;qt++){var te=Y[qt].g;const tr=Y[qt].map;if(te-=Ye,te<0)Ye=Math.max(0,Y[qt].g-100),pt=!1;else try{te="req"+te+"_"||"";try{var ve=tr instanceof Map?tr:Object.entries(tr);for(const[as,Ir]of ve){let Rr=Ir;c(Ir)&&(Rr=et(Ir)),sn.push(te+as+"="+encodeURIComponent(Rr))}}catch(as){throw sn.push(te+"type="+encodeURIComponent("_badmap")),as}}catch{D&&D(tr)}}if(pt){ve=sn.join("&");break e}}ve=void 0}return m=m.i.splice(0,b),E.G=m,ve}function Hm(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;H||I(),ie||(H(),ie=!0),x.add(E,m),m.A=0}}function Za(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Kr(d(m.Da,m),Wm(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,Gm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Kr(d(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,dn(10),Po(this),Gm(this))};function Gh(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function Gm(m){m.g=new br(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=gn(m.na);Tt(E,"RID","rpc"),Tt(E,"SID",m.M),Tt(E,"AID",m.K),Tt(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&Tt(E,"TO",m.ia),Tt(E,"TYPE","xmlhttp"),Ya(m,E),m.u&&m.o&&Ga(E,m.u,m.o),m.O&&(m.g.H=m.O);var b=m.g;m=m.ba,b.M=1,b.A=qa(gn(E)),b.u=null,b.R=!0,gu(b,m)}t.Va=function(){this.C!=null&&(this.C=null,Po(this),Za(this),dn(19))};function Cu(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function Km(m,E){var b=null;if(m.g==E){Cu(m),Gh(m),m.g=null;var D=2}else if(es(m.h,E))b=E.G,kh(m.h,E),D=1;else return;if(m.I!=0){if(E.o)if(D==1){b=E.u?E.u.length:0,E=Date.now()-E.F;var Y=m.D;D=xs(),z(D,new Gr(D,b)),ss(m)}else Hm(m);else if(Y=E.m,Y==3||Y==0&&E.X>0||!(D==1&&Su(m,E)||D==2&&Za(m)))switch(b&&b.length>0&&(E=m.h,E.i=E.i.concat(b)),Y){case 1:os(m,5);break;case 4:os(m,10);break;case 3:os(m,6);break;default:os(m,2)}}}function Wm(m,E){let b=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(b*=2),b*E}function os(m,E){if(m.j.info("Error code "+E),E==2){var b=d(m.bb,m),D=m.Ua;const Y=!D;D=new Vi(D||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ln(D,"https"),qa(D),Y?Sr(D.toString(),b):jh(D.toString(),b)}else dn(2);m.I=0,m.l&&m.l.pa(E),Ym(m),wu(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),dn(2)):(this.j.info("Failed to ping google.com"),dn(1))};function Ym(m){if(m.I=0,m.ja=[],m.l){const E=Vh(m.h);(E.length!=0||m.i.length!=0)&&(S(m.ja,E),S(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function Zm(m,E,b){var D=b instanceof Vi?gn(b):new Vi(b);if(D.g!="")E&&(D.g=E+"."+D.g),Co(D,D.u);else{var Y=l.location;D=Y.protocol,E=E?E+"."+Y.hostname:Y.hostname,Y=+Y.port;const te=new Vi(null);D&&Ln(te,D),E&&(te.g=E),Y&&Co(te,Y),b&&(te.h=b),D=te}return b=m.G,E=m.wa,b&&E&&Tt(D,b,E),Tt(D,"VER",m.ka),Ya(m,D),D}function Qm(m,E,b){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new Rt(new ns({ab:b})):new Rt(m.ma),E.Fa(m.L),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xm(){}t=Xm.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Oo(){}Oo.prototype.g=function(m,E){return new li(m,E)};function li(m,E){zt.call(this),this.g=new No(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!M(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!M(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Os(this)}y(li,zt),li.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},li.prototype.close=function(){$h(this.g)},li.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var b={};b.__data__=m,m=b}else this.v&&(b={},b.__data__=et(m),m=b);E.i.push(new pn(E.Ya++,m)),E.I==3&&ss(E)},li.prototype.N=function(){this.g.l=null,delete this.j,$h(this.g),delete this.g,li.Z.N.call(this)};function Jm(m){rn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const b in E){m=b;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}y(Jm,rn);function ep(){gi.call(this),this.status=1}y(ep,gi);function Os(m){this.g=m}y(Os,Xm),Os.prototype.ra=function(){z(this.g,"a")},Os.prototype.qa=function(m){z(this.g,new Jm(m))},Os.prototype.pa=function(m){z(this.g,new ep)},Os.prototype.oa=function(){z(this.g,"b")},Oo.prototype.createWebChannel=Oo.prototype.g,li.prototype.send=li.prototype.o,li.prototype.open=li.prototype.m,li.prototype.close=li.prototype.close,bk=function(){return new Oo},Tk=function(){return xs()},Ek=Bt,$T={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ja.NO_ERROR=0,ja.TIMEOUT=8,ja.HTTP_ERROR=6,zg=ja,Dh.COMPLETE="complete",vk=Dh,mu.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",zt.prototype.listen=zt.prototype.J,Kf=mu,Rt.prototype.listenOnce=Rt.prototype.K,Rt.prototype.getLastError=Rt.prototype.Ha,Rt.prototype.getLastErrorCode=Rt.prototype.ya,Rt.prototype.getStatus=Rt.prototype.ca,Rt.prototype.getResponseJson=Rt.prototype.La,Rt.prototype.getResponseText=Rt.prototype.la,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Fa,yk=Rt}).apply(typeof lg<"u"?lg:typeof self<"u"?self:typeof window<"u"?window:{});const Qx="@firebase/firestore",Xx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ci.UNAUTHENTICATED=new ci(null),ci.GOOGLE_CREDENTIALS=new ci("google-credentials-uid"),ci.FIRST_PARTY=new ci("first-party-uid"),ci.MOCK_USER=new ci("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new _y("@firebase/firestore");function pc(){return Yl.logLevel}function me(t,...e){if(Yl.logLevel<=st.DEBUG){const n=e.map(tS);Yl.debug(`Firestore (${bh}): ${t}`,...n)}}function hi(t,...e){if(Yl.logLevel<=st.ERROR){const n=e.map(tS);Yl.error(`Firestore (${bh}): ${t}`,...n)}}function Md(t,...e){if(Yl.logLevel<=st.WARN){const n=e.map(tS);Yl.warn(`Firestore (${bh}): ${t}`,...n)}}function tS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,wk(t,i,n)}function wk(t,e,n){let i=`FIRESTORE (${bh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw hi(i),new Error(i)}function xe(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||wk(e,r,i)}function qe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends To{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ci.UNAUTHENTICATED)))}shutdown(){}}class u${constructor(e){this.t=e,this.currentUser=ci.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,n(f)):Promise.resolve();let o=new ro;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ro,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},c=f=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>c(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ro)}}),0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(xe(typeof i.accessToken=="string",31837,{l:i}),new a$(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new ci(e)}}class c${constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=ci.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class h${constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new c$(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ci.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Jx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class f${constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){xe(this.o===void 0,3512);const i=o=>{o.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,me("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Jx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Jx(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=d$(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Be(t,e){return t<e?-1:t>e?1:0}function HT(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return OE(r)===OE(o)?Be(r,o):OE(r)?1:-1}return Be(t.length,e.length)}const m$=55296,p$=57343;function OE(t){const e=t.charCodeAt(0);return e>=m$&&e<=p$}function Wc(t,e,n){return t.length===e.length&&t.every(((i,r)=>n(i,e[r])))}function Sk(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="__name__";class ms{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ae(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return ms.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ms?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=ms.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Be(e.length,n.length)}static compareSegments(e,n){const i=ms.isNumericId(e),r=ms.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?ms.extractNumericId(e).compare(ms.extractNumericId(n)):HT(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ya.fromString(e.substring(4,e.length-2))}}class _t extends ms{construct(e,n,i){return new _t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ee(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new _t(n)}static emptyPath(){return new _t([])}}const g$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends ms{construct(e,n,i){return new Yt(e,n,i)}static isValidIdentifier(e){return g$.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===e2}static keyField(){return new Yt([e2])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new Ee(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new Ee(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ee(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(o(),r++)}if(o(),l)throw new Ee(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(n)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(_t.fromString(e))}static fromName(e){return new be(_t.fromString(e).popFirst(5))}static empty(){return new be(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _t.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new _t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t,e,n){if(!n)throw new Ee(ae.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _$(t,e,n,i){if(e===!0&&i===!0)throw new Ee(ae.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function t2(t){if(!be.isDocumentKey(t))throw new Ee(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function n2(t){if(be.isDocumentKey(t))throw new Ee(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ak(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ny(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ae(12329,{type:typeof t})}function I_(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ny(t);throw new Ee(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(t,e){const n={typeString:t};return e&&(n.value=e),n}function _m(t,e){if(!Ak(t))throw new Ee(ae.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const l=t[i];if(r&&typeof l!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new Ee(ae.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=-62135596800,r2=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*r2);return new Et(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<i2)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/r2}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_m(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-i2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:Cn("string",Et._jsonSchemaVersion),seconds:Cn("number"),nanoseconds:Cn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe{static fromTimestamp(e){return new Oe(e)}static min(){return new Oe(new Et(0,0))}static max(){return new Oe(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=-1;class R_{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}}function GT(t){return t.fields.find((e=>e.kind===2))}function _l(t){return t.fields.filter((e=>e.kind!==2))}R_.UNKNOWN_ID=-1;class Ug{constructor(e,n){this.fieldPath=e,this.kind=n}}class Vd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Vd(0,Zi.min())}}function y$(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Oe.fromTimestamp(i===1e9?new Et(n+1,0):new Et(n,i));return new Zi(r,be.empty(),e)}function Ik(t){return new Zi(t.readTime,t.key,kd)}class Zi{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Zi(Oe.min(),be.empty(),kd)}static max(){return new Zi(Oe.max(),be.empty(),kd)}}function iS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(t.documentKey,e.documentKey),n!==0?n:Be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uu(t){if(t.code!==ae.FAILED_PRECONDITION||t.message!==Rk)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,i)=>{n(e)}))}static reject(e){return new W(((n,i)=>{i(e)}))}static waitFor(e){return new W(((n,i)=>{let r=0,o=0,l=!1;e.forEach((c=>{++r,c.next((()=>{++o,l&&o===r&&n()}),(f=>i(f)))})),l=!0,o===r&&n()}))}static or(e){let n=W.resolve(!1);for(const i of e)n=n.next((r=>r?W.resolve(r):i()));return n}static forEach(e,n){const i=[];return e.forEach(((r,o)=>{i.push(n.call(this,r,o))})),this.waitFor(i)}static mapArray(e,n){return new W(((i,r)=>{const o=e.length,l=new Array(o);let c=0;for(let f=0;f<o;f++){const d=f;n(e[d]).next((p=>{l[d]=p,++c,c===o&&i(l)}),(p=>r(p)))}}))}static doWhile(e,n){return new W(((i,r)=>{const o=()=>{e()===!0?n().next((()=>{o()}),r):i()};o()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="SimpleDb";class Py{static open(e,n,i,r){try{return new Py(n,e.transaction(r,i))}catch(o){throw new ad(n,o)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new ro,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new ad(e,n.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=rS(i.target.error);this.S.reject(new ad(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(me(Hi,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new E$(n)}}class va{static delete(e){return me(Hi,"Removing database:",e),bl(dO().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!bO())return!1;if(va.F())return!0;const e=Pn(),n=va.M(e),i=0<n&&n<10,r=Dk(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,n,i){this.name=e,this.version=n,this.N=i,this.B=null,va.M(Pn())===12.2&&hi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(me(Hi,"Opening database:",this.name),this.db=await new Promise(((n,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{const l=o.target.result;n(l)},r.onblocked=()=>{i(new ad(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{const l=o.target.error;l.name==="VersionError"?i(new Ee(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new Ee(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new ad(e,l))},r.onupgradeneeded=o=>{me(Hi,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,r.transaction,o.oldVersion,this.version).next((()=>{me(Hi,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,i,r){const o=n==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const c=Py.open(this.db,e,o?"readonly":"readwrite",i),f=r(c).next((d=>(c.C(),d))).catch((d=>(c.abort(d),W.reject(d)))).toPromise();return f.catch((()=>{})),await c.D,f}catch(c){const f=c,d=f.name!=="FirebaseError"&&l<3;if(me(Hi,"Transaction failed with error:",f.message,"Retrying:",d),this.close(),!d)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Dk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class v${constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return bl(this.U.delete())}}class ad extends Ee{constructor(e,n){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ma(t){return t.name==="IndexedDbTransactionError"}class E${constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(me(Hi,"PUT",this.store.name,e,n),i=this.store.put(n,e)):(me(Hi,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),bl(i)}add(e){return me(Hi,"ADD",this.store.name,e,e),bl(this.store.add(e))}get(e){return bl(this.store.get(e)).next((n=>(n===void 0&&(n=null),me(Hi,"GET",this.store.name,e,n),n)))}delete(e){return me(Hi,"DELETE",this.store.name,e),bl(this.store.delete(e))}count(){return me(Hi,"COUNT",this.store.name),bl(this.store.count())}J(e,n){const i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const o=r.getAll(i.range);return new W(((l,c)=>{o.onerror=f=>{c(f.target.error)},o.onsuccess=f=>{l(f.target.result)}}))}{const o=this.cursor(i),l=[];return this.H(o,((c,f)=>{l.push(f)})).next((()=>l))}}Y(e,n){const i=this.store.getAll(e,n===null?void 0:n);return new W(((r,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{r(l.target.result)}}))}Z(e,n){me(Hi,"DELETE ALL",this.store.name);const i=this.options(e,n);i.X=!1;const r=this.cursor(i);return this.H(r,((o,l,c)=>c.delete()))}ee(e,n){let i;n?i=e:(i={},n=e);const r=this.cursor(i);return this.H(r,n)}te(e){const n=this.cursor({});return new W(((i,r)=>{n.onerror=o=>{const l=rS(o.target.error);r(l)},n.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((c=>{c?l.continue():i()})):i()}}))}H(e,n){const i=[];return new W(((r,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void r();const f=new v$(c),d=n(c.primaryKey,c.value,f);if(d instanceof W){const p=d.catch((y=>(f.done(),W.reject(y))));i.push(p)}f.isDone?r():f.G===null?c.continue():c.continue(f.G)}})).next((()=>W.waitFor(i)))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function bl(t){return new W(((e,n)=>{t.onsuccess=i=>{const r=i.target.result;e(r)},t.onerror=i=>{const r=rS(i.target.error);n(r)}}))}let s2=!1;function rS(t){const e=va.M(Pn());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const i=new Ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return s2||(s2=!0,setTimeout((()=>{throw i}),0)),i}}return t}const ld="IndexBackfiller";class T${constructor(e,n){this.asyncQueue=e,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){me(ld,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const n=await this.ne.ie();me(ld,`Documents written: ${n}`)}catch(n){Ma(n)?me(ld,"Ignoring IndexedDB error during index backfill: ",n):await uu(n)}await this.re(6e4)}))}}class b${constructor(e,n){this.localStore=e,this.persistence=n}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,e)))}se(e,n){const i=new Set;let r=n,o=!0;return W.doWhile((()=>o===!0&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!i.has(l))return me(ld,`Processing collection: ${l}`),this.oe(e,l,r).next((c=>{r-=c,i.add(l)}));o=!1})))).next((()=>n-r))}oe(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next((r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(r,o))).next((c=>(me(ld,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,n,c)))).next((()=>l.size))}))))}_e(e,n){let i=e;return n.changes.forEach(((r,o)=>{const l=Ik(o);iS(l,i)>0&&(i=l)})),new Zi(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=-1;function Oy(t){return t==null}function Ld(t){return t===0&&1/t==-1/0}function w$(t){return typeof t=="number"&&Number.isInteger(t)&&!Ld(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="";function si(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=o2(e)),e=S$(t.get(n),e);return o2(e)}function S$(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case x_:n+="";break;default:n+=o}}return n}function o2(t){return t+x_+""}function _s(t){const e=t.length;if(xe(e>=2,64408,{path:t}),e===2)return xe(t.charAt(0)===x_&&t.charAt(1)==="",56145,{path:t}),_t.emptyPath();const n=e-2,i=[];let r="";for(let o=0;o<e;){const l=t.indexOf(x_,o);switch((l<0||l>n)&&Ae(50515,{path:t}),t.charAt(l+1)){case"":const c=t.substring(o,l);let f;r.length===0?f=c:(r+=c,f=r,r=""),i.push(f);break;case"":r+=t.substring(o,l),r+="\0";break;case"":r+=t.substring(o,l+1);break;default:Ae(61167,{path:t})}o=l+2}return new _t(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl="remoteDocuments",ym="owner",ic="owner",zd="mutationQueues",C$="userId",Mr="mutations",a2="batchId",Dl="userMutationsIndex",l2=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(t,e){return[t,si(e)]}function Nk(t,e,n){return[t,si(e),n]}const A$={},Yc="documentMutations",D_="remoteDocumentsV14",I$=["prefixPath","collectionGroup","readTime","documentId"],jg="documentKeyIndex",R$=["prefixPath","collectionGroup","documentId"],Pk="collectionGroupIndex",x$=["collectionGroup","readTime","prefixPath","documentId"],Ud="remoteDocumentGlobal",KT="remoteDocumentGlobalKey",Zc="targets",Ok="queryTargetsIndex",D$=["canonicalId","targetId"],Qc="targetDocuments",N$=["targetId","path"],sS="documentTargetsIndex",P$=["path","targetId"],N_="targetGlobalKey",Vl="targetGlobal",Fd="collectionParents",O$=["collectionId","parent"],Xc="clientMetadata",M$="clientId",My="bundles",k$="bundleId",ky="namedQueries",V$="name",oS="indexConfiguration",L$="indexId",WT="collectionGroupIndex",z$="collectionGroup",ud="indexState",U$=["indexId","uid"],Mk="sequenceNumberIndex",F$=["uid","sequenceNumber"],cd="indexEntries",j$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kk="documentKeyIndex",B$=["indexId","uid","orderedDocumentKey"],Vy="documentOverlays",q$=["userId","collectionPath","documentId"],YT="collectionPathOverlayIndex",$$=["userId","collectionPath","largestBatchId"],Vk="collectionGroupOverlayIndex",H$=["userId","collectionGroup","largestBatchId"],aS="globals",G$="name",Lk=[zd,Mr,Yc,yl,Zc,ym,Vl,Qc,Xc,Ud,Fd,My,ky],K$=[...Lk,Vy],zk=[zd,Mr,Yc,D_,Zc,ym,Vl,Qc,Xc,Ud,Fd,My,ky,Vy],Uk=zk,lS=[...Uk,oS,ud,cd],W$=lS,Fk=[...lS,aS],Y$=Fk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT extends xk{constructor(e,n){super(),this.le=e,this.currentSequenceNumber=n}}function Mn(t,e){const n=qe(t);return va.O(n.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function cu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,n){this.comparator=e,this.root=n||Qn.EMPTY}insert(e,n){return new Kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qn.BLACK,null,null))}remove(e){return new Kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ug(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ug(this.root,e,this.comparator,!1)}getReverseIterator(){return new ug(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ug(this.root,e,this.comparator,!0)}}class ug{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qn{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Qn.RED,this.left=r??Qn.EMPTY,this.right=o??Qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Qn(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Qn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Qn.EMPTY=null,Qn.RED=!0,Qn.BLACK=!1;Qn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Qn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new Kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new c2(this.data.getIterator())}getIteratorFrom(e){return new c2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class c2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rc(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new pr([])}unionWith(e){let n=new At(Yt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new pr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wc(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Bk("Invalid base64 string: "+o):o}})(e);return new Rn(n)}static fromUint8Array(e){const n=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(e);return new Rn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rn.EMPTY_BYTE_STRING=new Rn("");const Z$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mo(t){if(xe(!!t,39018),typeof t=="string"){let e=0;const n=Z$.exec(t);if(xe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ht(t.seconds),nanos:Ht(t.nanos)}}function Ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function po(t){return typeof t=="string"?Rn.fromBase64String(t):Rn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="server_timestamp",$k="__type__",Hk="__previous_value__",Gk="__local_write_time__";function uS(t){return(t?.mapValue?.fields||{})[$k]?.stringValue===qk}function Ly(t){const e=t.mapValue.fields[Hk];return uS(e)?Ly(e):e}function jd(t){const e=mo(t.mapValue.fields[Gk].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(e,n,i,r,o,l,c,f,d,p){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=p}}const P_="(default)";class Zl{constructor(e,n){this.projectId=e,this.database=n||P_}static empty(){return new Zl("","")}get isDefaultDatabase(){return this.database===P_}isEqual(e){return e instanceof Zl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="__type__",Kk="__max__",ma={mapValue:{fields:{__type__:{stringValue:Kk}}}},hS="__vector__",Jc="value",Bg={nullValue:"NULL_VALUE"};function Ca(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uS(t)?4:Wk(t)?9007199254740991:zy(t)?10:11:Ae(28295,{value:t})}function As(t,e){if(t===e)return!0;const n=Ca(t);if(n!==Ca(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return jd(t).isEqual(jd(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=mo(r.timestampValue),c=mo(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,o){return po(r.bytesValue).isEqual(po(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,o){return Ht(r.geoPointValue.latitude)===Ht(o.geoPointValue.latitude)&&Ht(r.geoPointValue.longitude)===Ht(o.geoPointValue.longitude)})(t,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return Ht(r.integerValue)===Ht(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=Ht(r.doubleValue),c=Ht(o.doubleValue);return l===c?Ld(l)===Ld(c):isNaN(l)&&isNaN(c)}return!1})(t,e);case 9:return Wc(t.arrayValue.values||[],e.arrayValue.values||[],As);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},c=o.mapValue.fields||{};if(u2(l)!==u2(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!As(l[f],c[f])))return!1;return!0})(t,e);default:return Ae(52216,{left:t})}}function Bd(t,e){return(t.values||[]).find((n=>As(n,e)))!==void 0}function Aa(t,e){if(t===e)return 0;const n=Ca(t),i=Ca(e);if(n!==i)return Be(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(t.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=Ht(o.integerValue||o.doubleValue),f=Ht(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(t,e);case 3:return h2(t.timestampValue,e.timestampValue);case 4:return h2(jd(t),jd(e));case 5:return HT(t.stringValue,e.stringValue);case 6:return(function(o,l){const c=po(o),f=po(l);return c.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),f=l.split("/");for(let d=0;d<c.length&&d<f.length;d++){const p=Be(c[d],f[d]);if(p!==0)return p}return Be(c.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Be(Ht(o.latitude),Ht(l.latitude));return c!==0?c:Be(Ht(o.longitude),Ht(l.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return f2(t.arrayValue,e.arrayValue);case 10:return(function(o,l){const c=o.fields||{},f=l.fields||{},d=c[Jc]?.arrayValue,p=f[Jc]?.arrayValue,y=Be(d?.values?.length||0,p?.values?.length||0);return y!==0?y:f2(d,p)})(t.mapValue,e.mapValue);case 11:return(function(o,l){if(o===ma.mapValue&&l===ma.mapValue)return 0;if(o===ma.mapValue)return 1;if(l===ma.mapValue)return-1;const c=o.fields||{},f=Object.keys(c),d=l.fields||{},p=Object.keys(d);f.sort(),p.sort();for(let y=0;y<f.length&&y<p.length;++y){const v=HT(f[y],p[y]);if(v!==0)return v;const w=Aa(c[f[y]],d[p[y]]);if(w!==0)return w}return Be(f.length,p.length)})(t.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function h2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Be(t,e);const n=mo(t),i=mo(e),r=Be(n.seconds,i.seconds);return r!==0?r:Be(n.nanos,i.nanos)}function f2(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Aa(n[r],i[r]);if(o)return o}return Be(n.length,i.length)}function eh(t){return QT(t)}function QT(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=mo(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return po(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return be.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=QT(o);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${QT(n.fields[l])}`;return r+"}"})(t.mapValue):Ae(61005,{value:t})}function qg(t){switch(Ca(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ly(t);return e?16+qg(e):16;case 5:return 2*t.stringValue.length;case 6:return po(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+qg(o)),0)})(t.arrayValue);case 10:case 11:return(function(i){let r=0;return cu(i.fields,((o,l)=>{r+=o.length+qg(l)})),r})(t.mapValue);default:throw Ae(13486,{value:t})}}function qd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function XT(t){return!!t&&"integerValue"in t}function $d(t){return!!t&&"arrayValue"in t}function d2(t){return!!t&&"nullValue"in t}function m2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $g(t){return!!t&&"mapValue"in t}function zy(t){return(t?.mapValue?.fields||{})[cS]?.stringValue===hS}function hd(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return cu(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=hd(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hd(t.arrayValue.values[n]);return e}return{...t}}function Wk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Kk}const Yk={mapValue:{fields:{[cS]:{stringValue:hS},[Jc]:{arrayValue:{}}}}};function X$(t){return"nullValue"in t?Bg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?qd(Zl.empty(),be.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?zy(t)?Yk:{mapValue:{}}:Ae(35942,{value:t})}function J$(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?qd(Zl.empty(),be.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Yk:"mapValue"in t?zy(t)?{mapValue:{}}:ma:Ae(61959,{value:t})}function p2(t,e){const n=Aa(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function g2(t,e){const n=Aa(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e){this.value=e}static empty(){return new Ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!$g(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hd(n)}setAll(e){let n=Yt.emptyPath(),i={},r=[];e.forEach(((l,c)=>{if(!n.isImmediateParentOf(c)){const f=this.getFieldsMap(n);this.applyChanges(f,i,r),i={},r=[],n=c.popLast()}l?i[c.lastSegment()]=hd(l):r.push(c.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());$g(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return As(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];$g(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){cu(n,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new Ai(hd(this.value))}}function Zk(t){const e=[];return cu(t.fields,((n,i)=>{const r=new Yt([n]);if($g(i)){const o=Zk(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)})),new pr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,n,i,r,o,l,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new nn(e,0,Oe.min(),Oe.min(),Oe.min(),Ai.empty(),0)}static newFoundDocument(e,n,i,r){return new nn(e,1,n,Oe.min(),i,r,0)}static newNoDocument(e,n){return new nn(e,2,n,Oe.min(),Oe.min(),Ai.empty(),0)}static newUnknownDocument(e,n){return new nn(e,3,n,Oe.min(),Oe.min(),Ai.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.position=e,this.inclusive=n}}function _2(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],l=t.position[r];if(o.field.isKeyField()?i=be.comparator(be.fromName(l.referenceValue),n.key):i=Aa(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function y2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!As(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,n="asc"){this.field=e,this.dir=n}}function eH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{}class lt extends Qk{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new tH(e,n,i):n==="array-contains"?new rH(e,i):n==="in"?new iV(e,i):n==="not-in"?new sH(e,i):n==="array-contains-any"?new oH(e,i):new lt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new nH(e,i):new iH(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Aa(n,this.value)):n!==null&&Ca(this.value)===Ca(n)&&this.matchesComparison(Aa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ct extends Qk{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ct(e,n)}matches(e){return nh(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nh(t){return t.op==="and"}function JT(t){return t.op==="or"}function fS(t){return Xk(t)&&nh(t)}function Xk(t){for(const e of t.filters)if(e instanceof Ct)return!1;return!0}function eb(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+eh(t.value);if(fS(t))return t.filters.map((e=>eb(e))).join(",");{const e=t.filters.map((n=>eb(n))).join(",");return`${t.op}(${e})`}}function Jk(t,e){return t instanceof lt?(function(i,r){return r instanceof lt&&i.op===r.op&&i.field.isEqual(r.field)&&As(i.value,r.value)})(t,e):t instanceof Ct?(function(i,r){return r instanceof Ct&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,c)=>o&&Jk(l,r.filters[c])),!0):!1})(t,e):void Ae(19439)}function eV(t,e){const n=t.filters.concat(e);return Ct.create(n,t.op)}function tV(t){return t instanceof lt?(function(n){return`${n.field.canonicalString()} ${n.op} ${eh(n.value)}`})(t):t instanceof Ct?(function(n){return n.op.toString()+" {"+n.getFilters().map(tV).join(" ,")+"}"})(t):"Filter"}class tH extends lt{constructor(e,n,i){super(e,n,i),this.key=be.fromName(i.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class nH extends lt{constructor(e,n){super(e,"in",n),this.keys=nV("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class iH extends lt{constructor(e,n){super(e,"not-in",n),this.keys=nV("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function nV(t,e){return(e.arrayValue?.values||[]).map((n=>be.fromName(n.referenceValue)))}class rH extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return $d(n)&&Bd(n.arrayValue,this.value)}}class iV extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bd(this.value.arrayValue,n)}}class sH extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bd(this.value.arrayValue,n)}}class oH extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!$d(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Bd(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aH{constructor(e,n=null,i=[],r=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function tb(t,e=null,n=[],i=[],r=null,o=null,l=null){return new aH(t,e,n,i,r,o,l)}function Ql(t){const e=qe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>eb(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),Oy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>eh(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>eh(i))).join(",")),e.Te=n}return e.Te}function vm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Jk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!y2(t.startAt,e.startAt)&&y2(t.endAt,e.endAt)}function M_(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function k_(t,e){return t.filters.filter((n=>n instanceof lt&&n.field.isEqual(e)))}function v2(t,e,n){let i=Bg,r=!0;for(const o of k_(t,e)){let l=Bg,c=!0;switch(o.op){case"<":case"<=":l=X$(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,c=!1;break;case"!=":case"not-in":l=Bg}p2({value:i,inclusive:r},{value:l,inclusive:c})<0&&(i=l,r=c)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const l=n.position[o];p2({value:i,inclusive:r},{value:l,inclusive:n.inclusive})<0&&(i=l,r=n.inclusive);break}}return{value:i,inclusive:r}}function E2(t,e,n){let i=ma,r=!0;for(const o of k_(t,e)){let l=ma,c=!0;switch(o.op){case">=":case">":l=J$(o.value),c=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,c=!1;break;case"!=":case"not-in":l=ma}g2({value:i,inclusive:r},{value:l,inclusive:c})>0&&(i=l,r=c)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const l=n.position[o];g2({value:i,inclusive:r},{value:l,inclusive:n.inclusive})>0&&(i=l,r=n.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n=null,i=[],r=[],o=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function lH(t,e,n,i,r,o,l,c){return new Em(t,e,n,i,r,o,l,c)}function dS(t){return new Em(t)}function T2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function rV(t){return t.collectionGroup!==null}function fd(t){const e=qe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new At(Yt.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new O_(o,i))})),n.has(Yt.keyField().canonicalString())||e.Ie.push(new O_(Yt.keyField(),i))}return e.Ie}function _r(t){const e=qe(t);return e.Ee||(e.Ee=uH(e,fd(t))),e.Ee}function uH(t,e){if(t.limitType==="F")return tb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new O_(r.field,o)}));const n=t.endAt?new th(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new th(t.startAt.position,t.startAt.inclusive):null;return tb(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function nb(t,e){const n=t.filters.concat([e]);return new Em(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ib(t,e,n){return new Em(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uy(t,e){return vm(_r(t),_r(e))&&t.limitType===e.limitType}function sV(t){return`${Ql(_r(t))}|lt:${t.limitType}`}function gc(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>tV(r))).join(", ")}]`),Oy(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>eh(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>eh(r))).join(",")),`Target(${i})`})(_r(t))}; limitType=${t.limitType})`}function Tm(t,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):be.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(t,e)&&(function(i,r){for(const o of fd(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(t,e)&&(function(i,r){return!(i.startAt&&!(function(l,c,f){const d=_2(l,c,f);return l.inclusive?d<=0:d<0})(i.startAt,fd(i),r)||i.endAt&&!(function(l,c,f){const d=_2(l,c,f);return l.inclusive?d>=0:d>0})(i.endAt,fd(i),r))})(t,e)}function cH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oV(t){return(e,n)=>{let i=!1;for(const r of fd(t)){const o=hH(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function hH(t,e,n){const i=t.field.isKeyField()?be.comparator(e.key,n.key):(function(o,l,c){const f=l.data.field(o),d=c.data.field(o);return f!==null&&d!==null?Aa(f,d):Ae(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ae(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){cu(this.inner,((n,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return jk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fH=new Kt(be.comparator);function Yi(){return fH}const aV=new Kt(be.comparator);function Wf(...t){let e=aV;for(const n of t)e=e.insert(n.key,n);return e}function lV(t){let e=aV;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function ys(){return dd()}function uV(){return dd()}function dd(){return new bo((t=>t.toString()),((t,e)=>t.isEqual(e)))}const dH=new Kt(be.comparator),mH=new At(be.comparator);function Je(...t){let e=mH;for(const n of t)e=e.add(n);return e}const pH=new At(Be);function gH(){return pH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ld(e)?"-0":e}}function cV(t){return{integerValue:""+t}}function _H(t,e){return w$(e)?cV(e):mS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(){this._=void 0}}function yH(t,e,n){return t instanceof ih?(function(r,o){const l={fields:{[$k]:{stringValue:qk},[Gk]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&uS(o)&&(o=Ly(o)),o&&(l.fields[Hk]=o),{mapValue:l}})(n,e):t instanceof rh?fV(t,e):t instanceof sh?dV(t,e):(function(r,o){const l=hV(r,o),c=b2(l)+b2(r.Ae);return XT(l)&&XT(r.Ae)?cV(c):mS(r.serializer,c)})(t,e)}function vH(t,e,n){return t instanceof rh?fV(t,e):t instanceof sh?dV(t,e):n}function hV(t,e){return t instanceof Hd?(function(i){return XT(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class ih extends Fy{}class rh extends Fy{constructor(e){super(),this.elements=e}}function fV(t,e){const n=mV(e);for(const i of t.elements)n.some((r=>As(r,i)))||n.push(i);return{arrayValue:{values:n}}}class sh extends Fy{constructor(e){super(),this.elements=e}}function dV(t,e){let n=mV(e);for(const i of t.elements)n=n.filter((r=>!As(r,i)));return{arrayValue:{values:n}}}class Hd extends Fy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function b2(t){return Ht(t.integerValue||t.doubleValue)}function mV(t){return $d(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,n){this.field=e,this.transform=n}}function EH(t,e){return t.field.isEqual(e.field)&&(function(i,r){return i instanceof rh&&r instanceof rh||i instanceof sh&&r instanceof sh?Wc(i.elements,r.elements,As):i instanceof Hd&&r instanceof Hd?As(i.Ae,r.Ae):i instanceof ih&&r instanceof ih})(t.transform,e.transform)}class TH{constructor(e,n){this.version=e,this.transformResults=n}}class Ri{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ri}static exists(e){return new Ri(void 0,e)}static updateTime(e){return new Ri(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class jy{}function gV(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new By(t.key,Ri.none()):new wh(t.key,t.data,Ri.none());{const n=t.data,i=Ai.empty();let r=new At(Yt.comparator);for(let o of e.fields)if(!r.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new ka(t.key,i,new pr(r.toArray()),Ri.none())}}function bH(t,e,n){t instanceof wh?(function(r,o,l){const c=r.value.clone(),f=S2(r.fieldTransforms,o,l.transformResults);c.setAll(f),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(t,e,n):t instanceof ka?(function(r,o,l){if(!Hg(r.precondition,o))return void o.convertToUnknownDocument(l.version);const c=S2(r.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(_V(r)),f.setAll(c),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(t,e,n):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,n)}function md(t,e,n,i){return t instanceof wh?(function(o,l,c,f){if(!Hg(o.precondition,l))return c;const d=o.value.clone(),p=C2(o.fieldTransforms,f,l);return d.setAll(p),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(t,e,n,i):t instanceof ka?(function(o,l,c,f){if(!Hg(o.precondition,l))return c;const d=C2(o.fieldTransforms,f,l),p=l.data;return p.setAll(_V(o)),p.setAll(d),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((y=>y.field)))})(t,e,n,i):(function(o,l,c){return Hg(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(t,e,n)}function wH(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=hV(i.transform,r||null);o!=null&&(n===null&&(n=Ai.empty()),n.set(i.field,o))}return n||null}function w2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Wc(i,r,((o,l)=>EH(o,l)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wh extends jy{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ka extends jy{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function _V(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function S2(t,e,n){const i=new Map;xe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],l=o.transform,c=e.data.field(o.field);i.set(o.field,vH(l,c,n[r]))}return i}function C2(t,e,n){const i=new Map;for(const r of t){const o=r.transform,l=n.data.field(r.field);i.set(r.field,yH(o,l,e))}return i}class By extends jy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yV extends jy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&bH(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=md(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=md(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=uV();return this.mutations.forEach((r=>{const o=e.get(r.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=n.has(r.key)?null:c;const f=gV(l,c);f!==null&&i.set(r.key,f),l.isValidDocument()||l.convertToNoDocument(Oe.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Je())}isEqual(e){return this.batchId===e.batchId&&Wc(this.mutations,e.mutations,((n,i)=>w2(n,i)))&&Wc(this.baseMutations,e.baseMutations,((n,i)=>w2(n,i)))}}class gS{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){xe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return dH})();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new gS(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SH{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bn,ht;function CH(t){switch(t){case ae.OK:return Ae(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Ae(15467,{code:t})}}function vV(t){if(t===void 0)return hi("GRPC error has no .code"),ae.UNKNOWN;switch(t){case bn.OK:return ae.OK;case bn.CANCELLED:return ae.CANCELLED;case bn.UNKNOWN:return ae.UNKNOWN;case bn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case bn.INTERNAL:return ae.INTERNAL;case bn.UNAVAILABLE:return ae.UNAVAILABLE;case bn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case bn.NOT_FOUND:return ae.NOT_FOUND;case bn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case bn.ABORTED:return ae.ABORTED;case bn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case bn.DATA_LOSS:return ae.DATA_LOSS;default:return Ae(39323,{code:t})}}(ht=bn||(bn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AH(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IH=new ya([4294967295,4294967295],0);function A2(t){const e=AH().encode(t),n=new _k;return n.update(e),new Uint8Array(n.digest())}function I2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ya([n,i],0),new ya([r,o],0)]}class yS{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Yf(`Invalid padding: ${n}`);if(i<0)throw new Yf(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Yf(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Yf(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ya.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(ya.fromNumber(i)));return r.compare(IH)===1&&(r=new ya([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=A2(e),[i,r]=I2(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,r,o);if(!this.we(l))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new yS(o,r,n);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const n=A2(e),[i,r]=I2(n);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,r,o);this.Se(l)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Yf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,bm.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new qy(Oe.min(),r,new Kt(Be),Yi(),Je())}}class bm{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new bm(i,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class EV{constructor(e,n){this.targetId=e,this.Ce=n}}class TV{constructor(e,n,i=Rn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class R2{constructor(){this.ve=0,this.Fe=x2(),this.Me=Rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),n=Je(),i=Je();return this.Fe.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Ae(38017,{changeType:o})}})),new bm(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=x2()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class RH{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yi(),this.Je=cg(),this.He=cg(),this.Ye=new Kt(Be)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(M_(o))if(i===0){const l=new be(o.path);this.et(n,l,nn.newNoDocument(l,Oe.min()))}else xe(i===1,20013,{expectedCount:i});else{const l=this._t(n);if(l!==i){const c=this.ut(e),f=c?this.ct(c,e,l):1;if(f!==0){this.it(n);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let l,c;try{l=po(i).toUint8Array()}catch(f){if(f instanceof Bk)return Md("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new yS(l,r,o)}catch(f){return Md(f instanceof Yf?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.ge===0?null:c}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach((o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(n,o,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((o,l)=>{const c=this.ot(l);if(c){if(o.current&&M_(c.target)){const f=new be(c.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,nn.newNoDocument(f,e))}o.Be&&(n.set(l,o.ke()),o.qe())}}));let i=Je();this.He.forEach(((o,l)=>{let c=!0;l.forEachWhile((f=>{const d=this.ot(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const r=new qy(e,n,this.Ye,this.je,i);return this.je=Yi(),this.Je=cg(),this.He=cg(),this.Ye=new Kt(Be),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new R2,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new At(Be),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new At(Be),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new R2),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function cg(){return new Kt(be.comparator)}function x2(){return new Kt(be.comparator)}const xH={asc:"ASCENDING",desc:"DESCENDING"},DH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},NH={and:"AND",or:"OR"};class PH{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rb(t,e){return t.useProto3Json||Oy(e)?e:{value:e}}function oh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bV(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OH(t,e){return oh(t,e.toTimestamp())}function di(t){return xe(!!t,49232),Oe.fromTimestamp((function(n){const i=mo(n);return new Et(i.seconds,i.nanos)})(t))}function vS(t,e){return sb(t,e).canonicalString()}function sb(t,e){const n=(function(r){return new _t(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function wV(t){const e=_t.fromString(t);return xe(PV(e),10190,{key:e.toString()}),e}function V_(t,e){return vS(t.databaseId,e.path)}function Ll(t,e){const n=wV(e);if(n.get(1)!==t.databaseId.projectId)throw new Ee(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ee(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new be(AV(n))}function SV(t,e){return vS(t.databaseId,e)}function CV(t){const e=wV(t);return e.length===4?_t.emptyPath():AV(e)}function ob(t){return new _t(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AV(t){return xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function D2(t,e,n){return{name:V_(t,e),fields:n.value.mapValue.fields}}function MH(t,e,n){const i=Ll(t,e.name),r=di(e.updateTime),o=e.createTime?di(e.createTime):Oe.min(),l=new Ai({mapValue:{fields:e.fields}}),c=nn.newFoundDocument(i,r,o,l);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function kH(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ae(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(d,p){return d.useProto3Json?(xe(p===void 0||typeof p=="string",58123),Rn.fromBase64String(p||"")):(xe(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),Rn.fromUint8Array(p||new Uint8Array))})(t,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(d){const p=d.code===void 0?ae.UNKNOWN:vV(d.code);return new Ee(p,d.message||"")})(l);n=new TV(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Ll(t,i.document.name),o=di(i.document.updateTime),l=i.document.createTime?di(i.document.createTime):Oe.min(),c=new Ai({mapValue:{fields:i.document.fields}}),f=nn.newFoundDocument(r,o,l,c),d=i.targetIds||[],p=i.removedTargetIds||[];n=new Gg(d,p,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Ll(t,i.document),o=i.readTime?di(i.readTime):Oe.min(),l=nn.newNoDocument(r,o),c=i.removedTargetIds||[];n=new Gg([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Ll(t,i.document),o=i.removedTargetIds||[];n=new Gg([],o,r,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new SH(r,o),c=i.targetId;n=new EV(c,l)}}return n}function L_(t,e){let n;if(e instanceof wh)n={update:D2(t,e.key,e.value)};else if(e instanceof By)n={delete:V_(t,e.key)};else if(e instanceof ka)n={update:D2(t,e.key,e.data),updateMask:jH(e.fieldMask)};else{if(!(e instanceof yV))return Ae(16599,{Vt:e.type});n={verify:V_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const c=l.transform;if(c instanceof ih)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof rh)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof sh)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Hd)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Ae(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:OH(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae(27497)})(t,e.precondition)),n}function ab(t,e){const n=e.currentDocument?(function(o){return o.updateTime!==void 0?Ri.updateTime(di(o.updateTime)):o.exists!==void 0?Ri.exists(o.exists):Ri.none()})(e.currentDocument):Ri.none(),i=e.updateTransforms?e.updateTransforms.map((r=>(function(l,c){let f=null;if("setToServerValue"in c)xe(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),f=new ih;else if("appendMissingElements"in c){const p=c.appendMissingElements.values||[];f=new rh(p)}else if("removeAllFromArray"in c){const p=c.removeAllFromArray.values||[];f=new sh(p)}else"increment"in c?f=new Hd(l,c.increment):Ae(16584,{proto:c});const d=Yt.fromServerFormat(c.fieldPath);return new pV(d,f)})(t,r))):[];if(e.update){e.update.name;const r=Ll(t,e.update.name),o=new Ai({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const d=f.fieldPaths||[];return new pr(d.map((p=>Yt.fromServerFormat(p))))})(e.updateMask);return new ka(r,o,l,n,i)}return new wh(r,o,n,i)}if(e.delete){const r=Ll(t,e.delete);return new By(r,n)}if(e.verify){const r=Ll(t,e.verify);return new yV(r,n)}return Ae(1463,{proto:e})}function VH(t,e){return t&&t.length>0?(xe(e!==void 0,14353),t.map((n=>(function(r,o){let l=r.updateTime?di(r.updateTime):di(o);return l.isEqual(Oe.min())&&(l=di(o)),new TH(l,r.transformResults||[])})(n,e)))):[]}function IV(t,e){return{documents:[SV(t,e.path)]}}function RV(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=SV(t,r);const o=(function(d){if(d.length!==0)return NV(Ct.create(d,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const l=(function(d){if(d.length!==0)return d.map((p=>(function(v){return{field:_c(v.field),direction:zH(v.dir)}})(p)))})(e.orderBy);l&&(n.structuredQuery.orderBy=l);const c=rb(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:r}}function xV(t){let e=CV(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){xe(i===1,65062);const p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=(function(y){const v=DV(y);return v instanceof Ct&&fS(v)?v.getFilters():[v]})(n.where));let l=[];n.orderBy&&(l=(function(y){return y.map((v=>(function(S){return new O_(yc(S.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(v)))})(n.orderBy));let c=null;n.limit&&(c=(function(y){let v;return v=typeof y=="object"?y.value:y,Oy(v)?null:v})(n.limit));let f=null;n.startAt&&(f=(function(y){const v=!!y.before,w=y.values||[];return new th(w,v)})(n.startAt));let d=null;return n.endAt&&(d=(function(y){const v=!y.before,w=y.values||[];return new th(w,v)})(n.endAt)),lH(e,r,l,o,c,"F",f,d)}function LH(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function DV(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=yc(n.unaryFilter.field);return lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=yc(n.unaryFilter.field);return lt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=yc(n.unaryFilter.field);return lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=yc(n.unaryFilter.field);return lt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(t):t.fieldFilter!==void 0?(function(n){return lt.create(yc(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ct.create(n.compositeFilter.filters.map((i=>DV(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(n.compositeFilter.op))})(t):Ae(30097,{filter:t})}function zH(t){return xH[t]}function UH(t){return DH[t]}function FH(t){return NH[t]}function _c(t){return{fieldPath:t.canonicalString()}}function yc(t){return Yt.fromServerFormat(t.fieldPath)}function NV(t){return t instanceof lt?(function(n){if(n.op==="=="){if(m2(n.value))return{unaryFilter:{field:_c(n.field),op:"IS_NAN"}};if(d2(n.value))return{unaryFilter:{field:_c(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(m2(n.value))return{unaryFilter:{field:_c(n.field),op:"IS_NOT_NAN"}};if(d2(n.value))return{unaryFilter:{field:_c(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_c(n.field),op:UH(n.op),value:n.value}}})(t):t instanceof Ct?(function(n){const i=n.getFilters().map((r=>NV(r)));return i.length===1?i[0]:{compositeFilter:{op:FH(n.op),filters:i}}})(t):Ae(54877,{filter:t})}function jH(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function PV(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,i,r,o=Oe.min(),l=Oe.min(),c=Rn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new eo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new eo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.yt=e}}function BH(t,e){let n;if(e.document)n=MH(t.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=be.fromSegments(e.noDocument.path),r=Jl(e.noDocument.readTime);n=nn.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ae(56709);{const i=be.fromSegments(e.unknownDocument.path),r=Jl(e.unknownDocument.version);n=nn.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime((function(r){const o=new Et(r[0],r[1]);return Oe.fromTimestamp(o)})(e.readTime)),n}function N2(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:z_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(o,l){return{name:V_(o,l.key),fields:l.data.value.mapValue.fields,updateTime:oh(o,l.version.toTimestamp()),createTime:oh(o,l.createTime.toTimestamp())}})(t.yt,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Xl(e.version)};else{if(!e.isUnknownDocument())return Ae(57904,{document:e});i.unknownDocument={path:n.path.toArray(),version:Xl(e.version)}}return i}function z_(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Xl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Jl(t){const e=new Et(t.seconds,t.nanoseconds);return Oe.fromTimestamp(e)}function wl(t,e){const n=(e.baseMutations||[]).map((o=>ab(t.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const c=e.mutations[o+1];l.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map((o=>ab(t.yt,o))),r=Et.fromMillis(e.localWriteTimeMs);return new pS(e.batchId,r,n,i)}function Zf(t){const e=Jl(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Jl(t.lastLimboFreeSnapshotVersion):Oe.min();let i;return i=(function(o){return o.documents!==void 0})(t.query)?(function(o){const l=o.documents.length;return xe(l===1,1966,{count:l}),_r(dS(CV(o.documents[0])))})(t.query):(function(o){return _r(xV(o))})(t.query),new eo(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Rn.fromBase64String(t.resumeToken))}function MV(t,e){const n=Xl(e.snapshotVersion),i=Xl(e.lastLimboFreeSnapshotVersion);let r;r=M_(e.target)?IV(t.yt,e.target):RV(t.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ql(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function kV(t){const e=xV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ib(e,e.limit,"L"):e}function ME(t,e){return new _S(e.largestBatchId,ab(t.yt,e.overlayMutation))}function P2(t,e){const n=e.path.lastSegment();return[t,si(e.path.popLast()),n]}function O2(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:Xl(i.readTime),documentKey:si(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qH{getBundleMetadata(e,n){return M2(e).get(n).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:Jl(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(e,n){return M2(e).put((function(r){return{bundleId:r.id,createTime:Xl(di(r.createTime)),version:r.version}})(n))}getNamedQuery(e,n){return k2(e).get(n).next((i=>{if(i)return(function(o){return{name:o.name,query:kV(o.bundledQuery),readTime:Jl(o.readTime)}})(i)}))}saveNamedQuery(e,n){return k2(e).put((function(r){return{name:r.name,readTime:Xl(di(r.readTime)),bundledQuery:r.bundledQuery}})(n))}}function M2(t){return Mn(t,My)}function k2(t){return Mn(t,ky)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,n){this.serializer=e,this.userId=n}static wt(e,n){const i=n.uid||"";return new $y(e,i)}getOverlay(e,n){return Lf(e).get(P2(this.userId,n)).next((i=>i?ME(this.serializer,i):null))}getOverlays(e,n){const i=ys();return W.forEach(n,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,n,i){const r=[];return i.forEach(((o,l)=>{const c=new _S(n,l);r.push(this.St(e,c))})),W.waitFor(r)}removeOverlaysForBatchId(e,n,i){const r=new Set;n.forEach((l=>r.add(si(l.getCollectionPath()))));const o=[];return r.forEach((l=>{const c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);o.push(Lf(e).Z(YT,c))})),W.waitFor(o)}getOverlaysForCollection(e,n,i){const r=ys(),o=si(n),l=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Lf(e).J(YT,l).next((c=>{for(const f of c){const d=ME(this.serializer,f);r.set(d.getKey(),d)}return r}))}getOverlaysForCollectionGroup(e,n,i,r){const o=ys();let l;const c=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Lf(e).ee({index:Vk,range:c},((f,d,p)=>{const y=ME(this.serializer,d);o.size()<r||y.largestBatchId===l?(o.set(y.getKey(),y),l=y.largestBatchId):p.done()})).next((()=>o))}St(e,n){return Lf(e).put((function(r,o,l){const[c,f,d]=P2(o,l.mutation.key);return{userId:o,collectionPath:f,documentId:d,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:L_(r.yt,l.mutation)}})(this.serializer,this.userId,n))}}function Lf(t){return Mn(t,Vy)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $H{bt(e){return Mn(e,aS)}getSessionToken(e){return this.bt(e).get("sessionToken").next((n=>{const i=n?.value;return i?Rn.fromUint8Array(i):Rn.EMPTY_BYTE_STRING}))}setSessionToken(e,n){return this.bt(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ht(e.integerValue));else if("doubleValue"in e){const i=Ht(e.doubleValue);isNaN(i)?this.Ft(n,13):(this.Ft(n,15),Ld(i)?n.Mt(0):n.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(n,20),typeof i=="string"&&(i=mo(i)),n.xt(`${i.seconds||""}`),n.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(po(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(n,45),n.Mt(i.latitude||0),n.Mt(i.longitude||0)}else"mapValue"in e?Wk(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):zy(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):Ae(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){const i=e.fields||{};this.Ft(n,55);for(const r of Object.keys(i))this.Ot(r,n),this.Ct(i[r],n)}kt(e,n){const i=e.fields||{};this.Ft(n,53);const r=Jc,o=i[r].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Ht(o)),this.Ot(r,n),this.Ct(i[r],n)}Qt(e,n){const i=e.values||[];this.Ft(n,50);for(const r of i)this.Ct(r,n)}Lt(e,n){this.Ft(n,37),be.fromName(e).path.forEach((i=>{this.Ft(n,60),this.Ut(i,n)}))}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}}Sl.Kt=new Sl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=255;function HH(t){if(t===0)return 8;let e=0;return t>>4||(e+=4,t<<=4),t>>6||(e+=2,t<<=2),t>>7||(e+=1),e}function V2(t){const e=64-(function(i){let r=0;for(let o=0;o<8;++o){const l=HH(255&i[o]);if(r+=l,l!==8)break}return r})(t);return Math.ceil(e/8)}class GH{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Gt(i.value),i=n.next();this.zt()}jt(e){const n=e[Symbol.iterator]();let i=n.next();for(;!i.done;)this.Jt(i.value),i=n.next();this.Ht()}Yt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const r=n.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(e){for(const n of e){const i=n.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const r=n.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(e){const n=this.en(e),i=V2(n);this.tn(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}nn(e){const n=this.en(e),i=V2(n);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}rn(){this.sn(sc),this.sn(255)}_n(){this.an(sc),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const n=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),i=!!(128&n[0]);n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Gt(e){const n=255&e;n===0?(this.sn(0),this.sn(255)):n===sc?(this.sn(sc),this.sn(0)):this.sn(n)}Jt(e){const n=255&e;n===0?(this.an(0),this.an(255)):n===sc?(this.an(sc),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class KH{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class WH{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class zf{constructor(){this.cn=new GH,this.ln=new KH(this.cn),this.hn=new WH(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,n,i,r){this.Tn=e,this.In=n,this.En=i,this.dn=r}An(){const e=this.dn.length,n=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.dn,0),n!==e?i.set([0],this.dn.length):++i[i.length-1],new Cl(this.Tn,this.In,this.En,i)}Rn(e,n,i){return{indexId:this.Tn,uid:e,arrayValue:Kg(this.En),directionalValue:Kg(this.dn),orderedDocumentKey:Kg(n),documentKey:i.path.toArray()}}Vn(e,n,i){const r=this.Rn(e,n,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function ia(t,e){let n=t.Tn-e.Tn;return n!==0?n:(n=L2(t.En,e.En),n!==0?n:(n=L2(t.dn,e.dn),n!==0?n:be.comparator(t.In,e.In)))}function L2(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}function Kg(t){return TO()?(function(n){let i="";for(let r=0;r<n.length;r++)i+=String.fromCharCode(n[r]);return i})(t):t}function z2(t){return typeof t!="string"?t:(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(t)}class U2{constructor(e){this.mn=new At(((n,i)=>Yt.comparator(n.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const n of e.filters){const i=n;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(xe(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=GT(e);if(n!==void 0&&!this.wn(n))return!1;const i=_l(e);let r=new Set,o=0,l=0;for(;o<i.length&&this.wn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!r.has(c.field.canonicalString())){const f=i[o];if(!this.Sn(c,f)||!this.bn(this.fn[l++],f))return!1}++o}for(;o<i.length;++o){const c=i[o];if(l>=this.fn.length||!this.bn(this.fn[l++],c))return!1}return!0}Dn(){if(this.pn)return null;let e=new At(Yt.comparator);const n=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Ug(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Ug(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Ug(i.field,i.dir==="asc"?0:1)));return new R_(R_.UNKNOWN_ID,this.collectionId,n,Vd.empty())}wn(e){for(const n of this.gn)if(this.Sn(n,e))return!0;return!1}Sn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}bn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t){if(xe(t instanceof lt||t instanceof Ct,20012),t instanceof lt){if(t instanceof iV){const n=t.value.arrayValue?.values?.map((i=>lt.create(t.field,"==",i)))||[];return Ct.create(n,"or")}return t}const e=t.filters.map((n=>VV(n)));return Ct.create(e,t.op)}function YH(t){if(t.getFilters().length===0)return[];const e=cb(VV(t));return xe(LV(e),7391),lb(e)||ub(e)?[e]:e.getFilters()}function lb(t){return t instanceof lt}function ub(t){return t instanceof Ct&&fS(t)}function LV(t){return lb(t)||ub(t)||(function(n){if(n instanceof Ct&&JT(n)){for(const i of n.getFilters())if(!lb(i)&&!ub(i))return!1;return!0}return!1})(t)}function cb(t){if(xe(t instanceof lt||t instanceof Ct,34018),t instanceof lt)return t;if(t.filters.length===1)return cb(t.filters[0]);const e=t.filters.map((i=>cb(i)));let n=Ct.create(e,t.op);return n=U_(n),LV(n)?n:(xe(n instanceof Ct,64498),xe(nh(n),40251),xe(n.filters.length>1,57927),n.filters.reduce(((i,r)=>ES(i,r))))}function ES(t,e){let n;return xe(t instanceof lt||t instanceof Ct,38388),xe(e instanceof lt||e instanceof Ct,25473),n=t instanceof lt?e instanceof lt?(function(r,o){return Ct.create([r,o],"and")})(t,e):F2(t,e):e instanceof lt?F2(e,t):(function(r,o){if(xe(r.filters.length>0&&o.filters.length>0,48005),nh(r)&&nh(o))return eV(r,o.getFilters());const l=JT(r)?r:o,c=JT(r)?o:r,f=l.filters.map((d=>ES(d,c)));return Ct.create(f,"or")})(t,e),U_(n)}function F2(t,e){if(nh(e))return eV(e,t.getFilters());{const n=e.filters.map((i=>ES(t,i)));return Ct.create(n,"or")}}function U_(t){if(xe(t instanceof lt||t instanceof Ct,11850),t instanceof lt)return t;const e=t.getFilters();if(e.length===1)return U_(e[0]);if(Xk(t))return t;const n=e.map((r=>U_(r))),i=[];return n.forEach((r=>{r instanceof lt?i.push(r):r instanceof Ct&&(r.op===t.op?i.push(...r.filters):i.push(r))})),i.length===1?i[0]:Ct.create(i,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(){this.Cn=new TS}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Zi.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Zi.min())}updateCollectionGroup(e,n,i){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class TS{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new At(_t.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new At(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2="IndexedDbIndexManager",hg=new Uint8Array(0);class QH{constructor(e,n){this.databaseId=n,this.vn=new TS,this.Fn=new bo((i=>Ql(i)),((i,r)=>vm(i,r))),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.vn.has(n)){const i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener((()=>{this.vn.add(n)}));const o={collectionId:i,parent:si(r)};return B2(e).put(o)}return W.resolve()}getCollectionParents(e,n){const i=[],r=IDBKeyRange.bound([n,""],[Sk(n),""],!1,!0);return B2(e).J(r).next((o=>{for(const l of o){if(l.collectionId!==n)break;i.push(_s(l.parent))}return i}))}addFieldIndex(e,n){const i=Uf(e),r=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(n);delete r.indexId;const o=i.add(r);if(n.indexState){const l=ac(e);return o.next((c=>{l.put(O2(c,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return o.next()}deleteFieldIndex(e,n){const i=Uf(e),r=ac(e),o=oc(e);return i.delete(n.indexId).next((()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const n=Uf(e),i=oc(e),r=ac(e);return n.Z().next((()=>i.Z())).next((()=>r.Z()))}createTargetIndexes(e,n){return W.forEach(this.Mn(n),(i=>this.getIndexType(e,i).next((r=>{if(r===0||r===1){const o=new U2(i).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,n){const i=oc(e);let r=!0;const o=new Map;return W.forEach(this.Mn(n),(l=>this.xn(e,l).next((c=>{r&&(r=!!c),o.set(l,c)})))).next((()=>{if(r){let l=Je();const c=[];return W.forEach(o,((f,d)=>{me(j2,`Using index ${(function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map((K=>`${K.fieldPath}:${K.kind}`)).join(",")}`})(f)} to execute ${Ql(n)}`);const p=(function(k,K){const H=GT(K);if(H===void 0)return null;for(const ie of k_(k,H.fieldPath))switch(ie.op){case"array-contains-any":return ie.value.arrayValue.values||[];case"array-contains":return[ie.value]}return null})(d,f),y=(function(k,K){const H=new Map;for(const ie of _l(K))for(const x of k_(k,ie.fieldPath))switch(x.op){case"==":case"in":H.set(ie.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return H.set(ie.fieldPath.canonicalString(),x.value),Array.from(H.values())}return null})(d,f),v=(function(k,K){const H=[];let ie=!0;for(const x of _l(K)){const I=x.kind===0?v2(k,x.fieldPath,k.startAt):E2(k,x.fieldPath,k.startAt);H.push(I.value),ie&&(ie=I.inclusive)}return new th(H,ie)})(d,f),w=(function(k,K){const H=[];let ie=!0;for(const x of _l(K)){const I=x.kind===0?E2(k,x.fieldPath,k.endAt):v2(k,x.fieldPath,k.endAt);H.push(I.value),ie&&(ie=I.inclusive)}return new th(H,ie)})(d,f),S=this.On(f,d,v),N=this.On(f,d,w),O=this.Nn(f,d,y),j=this.Bn(f.indexId,p,S,v.inclusive,N,w.inclusive,O);return W.forEach(j,(V=>i.Y(V,n.limit).next((k=>{k.forEach((K=>{const H=be.fromSegments(K.documentKey);l.has(H)||(l=l.add(H),c.push(H))}))}))))})).next((()=>c))}return W.resolve(null)}))}Mn(e){let n=this.Fn.get(e);return n||(e.filters.length===0?n=[e]:n=YH(Ct.create(e.filters,"and")).map((i=>tb(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,n),n)}Bn(e,n,i,r,o,l,c){const f=(n!=null?n.length:1)*Math.max(i.length,o.length),d=f/(n!=null?n.length:1),p=[];for(let y=0;y<f;++y){const v=n?this.Ln(n[y/d]):hg,w=this.kn(e,v,i[y%d],r),S=this.qn(e,v,o[y%d],l),N=c.map((O=>this.kn(e,v,O,!0)));p.push(...this.createRange(w,S,N))}return p}kn(e,n,i,r){const o=new Cl(e,be.empty(),n,i);return r?o:o.An()}qn(e,n,i,r){const o=new Cl(e,be.empty(),n,i);return r?o.An():o}xn(e,n){const i=new U2(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next((o=>{let l=null;for(const c of o)i.yn(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l}))}getIndexType(e,n){let i=2;const r=this.Mn(n);return W.forEach(r,(o=>this.xn(e,o).next((l=>{l?i!==0&&l.fields.length<(function(f){let d=new At(Yt.comparator),p=!1;for(const y of f.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?p=!0:d=d.add(v.field));for(const y of f.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(p?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(l){return l.limit!==null})(n)&&r.length>1&&i===2?1:i))}Qn(e,n){const i=new zf;for(const r of _l(e)){const o=n.data.field(r.fieldPath);if(o==null)return null;const l=i.Pn(r.kind);Sl.Kt.Dt(o,l)}return i.un()}Ln(e){const n=new zf;return Sl.Kt.Dt(e,n.Pn(0)),n.un()}$n(e,n){const i=new zf;return Sl.Kt.Dt(qd(this.databaseId,n),i.Pn((function(o){const l=_l(o);return l.length===0?0:l[l.length-1].kind})(e))),i.un()}Nn(e,n,i){if(i===null)return[];let r=[];r.push(new zf);let o=0;for(const l of _l(e)){const c=i[o++];for(const f of r)if(this.Un(n,l.fieldPath)&&$d(c))r=this.Kn(r,l,c);else{const d=f.Pn(l.kind);Sl.Kt.Dt(c,d)}}return this.Wn(r)}On(e,n,i){return this.Nn(e,n,i.position)}Wn(e){const n=[];for(let i=0;i<e.length;++i)n[i]=e[i].un();return n}Kn(e,n,i){const r=[...e],o=[];for(const l of i.arrayValue.values||[])for(const c of r){const f=new zf;f.seed(c.un()),Sl.Kt.Dt(l,f.Pn(n.kind)),o.push(f)}return o}Un(e,n){return!!e.filters.find((i=>i instanceof lt&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,n){const i=Uf(e),r=ac(e);return(n?i.J(WT,IDBKeyRange.bound(n,n)):i.J()).next((o=>{const l=[];return W.forEach(o,(c=>r.get([c.indexId,this.uid]).next((f=>{l.push((function(p,y){const v=y?new Vd(y.sequenceNumber,new Zi(Jl(y.readTime),new be(_s(y.documentKey)),y.largestBatchId)):Vd.empty(),w=p.fields.map((([S,N])=>new Ug(Yt.fromServerFormat(S),N)));return new R_(p.indexId,p.collectionGroup,w,v)})(c,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((n=>n.length===0?null:(n.sort(((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:Be(i.collectionGroup,r.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(e,n,i){const r=Uf(e),o=ac(e);return this.Gn(e).next((l=>r.J(WT,IDBKeyRange.bound(n,n)).next((c=>W.forEach(c,(f=>o.put(O2(f.indexId,this.uid,l,i))))))))}updateIndexEntries(e,n){const i=new Map;return W.forEach(n,((r,o)=>{const l=i.get(r.collectionGroup);return(l?W.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next((c=>(i.set(r.collectionGroup,c),W.forEach(c,(f=>this.zn(e,r,f).next((d=>{const p=this.jn(o,f);return d.isEqual(p)?W.resolve():this.Jn(e,o,f,d,p)})))))))}))}Hn(e,n,i,r){return oc(e).put(r.Rn(this.uid,this.$n(i,n.key),n.key))}Yn(e,n,i,r){return oc(e).delete(r.Vn(this.uid,this.$n(i,n.key),n.key))}zn(e,n,i){const r=oc(e);let o=new At(ia);return r.ee({index:kk,range:IDBKeyRange.only([i.indexId,this.uid,Kg(this.$n(i,n))])},((l,c)=>{o=o.add(new Cl(i.indexId,n,z2(c.arrayValue),z2(c.directionalValue)))})).next((()=>o))}jn(e,n){let i=new At(ia);const r=this.Qn(n,e);if(r==null)return i;const o=GT(n);if(o!=null){const l=e.data.field(o.fieldPath);if($d(l))for(const c of l.arrayValue.values||[])i=i.add(new Cl(n.indexId,e.key,this.Ln(c),r))}else i=i.add(new Cl(n.indexId,e.key,hg,r));return i}Jn(e,n,i,r,o){me(j2,"Updating index entries for document '%s'",n.key);const l=[];return(function(f,d,p,y,v){const w=f.getIterator(),S=d.getIterator();let N=rc(w),O=rc(S);for(;N||O;){let j=!1,V=!1;if(N&&O){const k=p(N,O);k<0?V=!0:k>0&&(j=!0)}else N!=null?V=!0:j=!0;j?(y(O),O=rc(S)):V?(v(N),N=rc(w)):(N=rc(w),O=rc(S))}})(r,o,ia,(c=>{l.push(this.Hn(e,n,i,c))}),(c=>{l.push(this.Yn(e,n,i,c))})),W.waitFor(l)}Gn(e){let n=1;return ac(e).ee({index:Mk,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,r,o)=>{o.done(),n=r.sequenceNumber+1})).next((()=>n))}createRange(e,n,i){i=i.sort(((l,c)=>ia(l,c))).filter(((l,c,f)=>!c||ia(l,f[c-1])!==0));const r=[];r.push(e);for(const l of i){const c=ia(l,e),f=ia(l,n);if(c===0)r[0]=e.An();else if(c>0&&f<0)r.push(l),r.push(l.An());else if(f>0)break}r.push(n);const o=[];for(let l=0;l<r.length;l+=2){if(this.Zn(r[l],r[l+1]))return[];const c=r[l].Vn(this.uid,hg,be.empty()),f=r[l+1].Vn(this.uid,hg,be.empty());o.push(IDBKeyRange.bound(c,f))}return o}Zn(e,n){return ia(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(q2)}getMinOffset(e,n){return W.mapArray(this.Mn(n),(i=>this.xn(e,i).next((r=>r||Ae(44426))))).next(q2)}}function B2(t){return Mn(t,Fd)}function oc(t){return Mn(t,cd)}function Uf(t){return Mn(t,oS)}function ac(t){return Mn(t,ud)}function q2(t){xe(t.length!==0,28825);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;iS(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Zi(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zV=41943040;class ii{static withCacheSize(e){return new ii(e,ii.DEFAULT_COLLECTION_PERCENTILE,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(t,e,n){const i=t.store(Mr),r=t.store(Yc),o=[],l=IDBKeyRange.only(n.batchId);let c=0;const f=i.ee({range:l},((p,y,v)=>(c++,v.delete())));o.push(f.next((()=>{xe(c===1,47070,{batchId:n.batchId})})));const d=[];for(const p of n.mutations){const y=Nk(e,p.key.path,n.batchId);o.push(r.delete(y)),d.push(p.key)}return W.waitFor(o).next((()=>d))}function F_(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ae(14731);e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ii.DEFAULT_COLLECTION_PERCENTILE=10,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ii.DEFAULT=new ii(zV,ii.DEFAULT_COLLECTION_PERCENTILE,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ii.DISABLED=new ii(-1,0,0);class Hy{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Xn={}}static wt(e,n,i,r){xe(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new Hy(o,n,i,r)}checkEmpty(e){let n=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ra(e).ee({index:Dl,range:i},((r,o,l)=>{n=!1,l.done()})).next((()=>n))}addMutationBatch(e,n,i,r){const o=vc(e),l=ra(e);return l.add({}).next((c=>{xe(typeof c=="number",49019);const f=new pS(c,n,i,r),d=(function(w,S,N){const O=N.baseMutations.map((V=>L_(w.yt,V))),j=N.mutations.map((V=>L_(w.yt,V)));return{userId:S,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:O,mutations:j}})(this.serializer,this.userId,f),p=[];let y=new At(((v,w)=>Be(v.canonicalString(),w.canonicalString())));for(const v of r){const w=Nk(this.userId,v.key.path,c);y=y.add(v.key.path.popLast()),p.push(l.put(d)),p.push(o.put(w,A$))}return y.forEach((v=>{p.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[c]=f.keys()})),W.waitFor(p).next((()=>f))}))}lookupMutationBatch(e,n){return ra(e).get(n).next((i=>i?(xe(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:n}),wl(this.serializer,i)):null))}er(e,n){return this.Xn[n]?W.resolve(this.Xn[n]):this.lookupMutationBatch(e,n).next((i=>{if(i){const r=i.keys();return this.Xn[n]=r,r}return null}))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return ra(e).ee({index:Dl,range:r},((l,c,f)=>{c.userId===this.userId&&(xe(c.batchId>=i,47524,{tr:i}),o=wl(this.serializer,c)),f.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=kl;return ra(e).ee({index:Dl,range:n,reverse:!0},((r,o,l)=>{i=o.batchId,l.done()})).next((()=>i))}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,kl],[this.userId,Number.POSITIVE_INFINITY]);return ra(e).J(Dl,n).next((i=>i.map((r=>wl(this.serializer,r)))))}getAllMutationBatchesAffectingDocumentKey(e,n){const i=Fg(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return vc(e).ee({range:r},((l,c,f)=>{const[d,p,y]=l,v=_s(p);if(d===this.userId&&n.path.isEqual(v))return ra(e).get(y).next((w=>{if(!w)throw Ae(61480,{nr:l,batchId:y});xe(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:y}),o.push(wl(this.serializer,w))}));f.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new At(Be);const r=[];return n.forEach((o=>{const l=Fg(this.userId,o.path),c=IDBKeyRange.lowerBound(l),f=vc(e).ee({range:c},((d,p,y)=>{const[v,w,S]=d,N=_s(w);v===this.userId&&o.path.isEqual(N)?i=i.add(S):y.done()}));r.push(f)})),W.waitFor(r).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1,o=Fg(this.userId,i),l=IDBKeyRange.lowerBound(o);let c=new At(Be);return vc(e).ee({range:l},((f,d,p)=>{const[y,v,w]=f,S=_s(v);y===this.userId&&i.isPrefixOf(S)?S.length===r&&(c=c.add(w)):p.done()})).next((()=>this.rr(e,c)))}rr(e,n){const i=[],r=[];return n.forEach((o=>{r.push(ra(e).get(o).next((l=>{if(l===null)throw Ae(35274,{batchId:o});xe(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),i.push(wl(this.serializer,l))})))})),W.waitFor(r).next((()=>i))}removeMutationBatch(e,n){return UV(e.le,this.userId,n).next((i=>(e.addOnCommittedListener((()=>{this.ir(n.batchId)})),W.forEach(i,(r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((n=>{if(!n)return W.resolve();const i=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),r=[];return vc(e).ee({range:i},((o,l,c)=>{if(o[0]===this.userId){const f=_s(o[1]);r.push(f)}else c.done()})).next((()=>{xe(r.length===0,56720,{sr:r.map((o=>o.canonicalString()))})}))}))}containsKey(e,n){return FV(e,this.userId,n)}_r(e){return jV(e).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:kl,lastStreamToken:""}))}}function FV(t,e,n){const i=Fg(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i);let l=!1;return vc(t).ee({range:o,X:!0},((c,f,d)=>{const[p,y,v]=c;p===e&&y===r&&(l=!0),d.done()})).next((()=>l))}function ra(t){return Mn(t,Mr)}function vc(t){return Mn(t,Yc)}function jV(t){return Mn(t,zd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new eu(0)}static cr(){return new eu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XH{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.lr(e).next((n=>{const i=new eu(n.highestTargetId);return n.highestTargetId=i.next(),this.hr(e,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((n=>Oe.fromTimestamp(new Et(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(e,n,i){return this.lr(e).next((r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.hr(e,r))))}addTargetData(e,n){return this.Pr(e,n).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(n,i),this.hr(e,i))))))}updateTargetData(e,n){return this.Pr(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next((()=>lc(e).delete(n.targetId))).next((()=>this.lr(e))).next((i=>(xe(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,n,i){let r=0;const o=[];return lc(e).ee(((l,c)=>{const f=Zf(c);f.sequenceNumber<=n&&i.get(f.targetId)===null&&(r++,o.push(this.removeTargetData(e,f)))})).next((()=>W.waitFor(o))).next((()=>r))}forEachTarget(e,n){return lc(e).ee(((i,r)=>{const o=Zf(r);n(o)}))}lr(e){return H2(e).get(N_).next((n=>(xe(n!==null,2888),n)))}hr(e,n){return H2(e).put(N_,n)}Pr(e,n){return lc(e).put(MV(this.serializer,n))}Tr(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((n=>n.targetCount))}getTargetData(e,n){const i=Ql(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return lc(e).ee({range:r,index:Ok},((l,c,f)=>{const d=Zf(c);vm(n,d.target)&&(o=d,f.done())})).next((()=>o))}addMatchingKeys(e,n,i){const r=[],o=fa(e);return n.forEach((l=>{const c=si(l.path);r.push(o.put({targetId:i,path:c})),r.push(this.referenceDelegate.addReference(e,i,l))})),W.waitFor(r)}removeMatchingKeys(e,n,i){const r=fa(e);return W.forEach(n,(o=>{const l=si(o.path);return W.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,o)])}))}removeMatchingKeysForTargetId(e,n){const i=fa(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){const i=IDBKeyRange.bound([n],[n+1],!1,!0),r=fa(e);let o=Je();return r.ee({range:i,X:!0},((l,c,f)=>{const d=_s(l[1]),p=new be(d);o=o.add(p)})).next((()=>o))}containsKey(e,n){const i=si(n.path),r=IDBKeyRange.bound([i],[Sk(i)],!1,!0);let o=0;return fa(e).ee({index:sS,X:!0,range:r},(([l,c],f,d)=>{l!==0&&(o++,d.done())})).next((()=>o>0))}At(e,n){return lc(e).get(n).next((i=>i?Zf(i):null))}}function lc(t){return Mn(t,Zc)}function H2(t){return Mn(t,Vl)}function fa(t){return Mn(t,Qc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2="LruGarbageCollector",BV=1048576;function K2([t,e],[n,i]){const r=Be(t,n);return r===0?Be(e,i):r}class JH{constructor(e){this.Ir=e,this.buffer=new At(K2),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();K2(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class qV{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(G2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ma(n)?me(G2,"Ignoring IndexedDB error during garbage collection: ",n):await uu(n)}await this.Vr(3e5)}))}}class eG{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return W.resolve(mr.ce);const i=new JH(n);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve($2)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$2):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,l,c,f,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),r=this.params.maximumSequenceNumbersToCollect):r=y,l=Date.now(),this.nthSequenceNumber(e,r)))).next((y=>(i=y,c=Date.now(),this.removeTargets(e,i,n)))).next((y=>(o=y,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((y=>(d=Date.now(),pc()<=st.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-p}ms
	Determined least recently used ${r} in `+(c-l)+`ms
	Removed ${o} targets in `+(f-c)+`ms
	Removed ${y} documents in `+(d-f)+`ms
Total Duration: ${d-p}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:y}))))}}function $V(t,e){return new eG(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tG{constructor(e,n){this.db=e,this.garbageCollector=$V(this,n)}gr(e){const n=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>n.next((r=>i+r))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}pr(e,n){return this.Sr(e,((i,r)=>n(r)))}addReference(e,n,i){return fg(e,i)}removeReference(e,n,i){return fg(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return fg(e,n)}br(e,n){return(function(r,o){let l=!1;return jV(r).te((c=>FV(r,c,o).next((f=>(f&&(l=!0),W.resolve(!f)))))).next((()=>l))})(e,n)}removeOrphanedDocuments(e,n){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Sr(e,((l,c)=>{if(c<=n){const f=this.br(e,l).next((d=>{if(!d)return o++,i.getEntry(e,l).next((()=>(i.removeEntry(l,Oe.min()),fa(e).delete((function(y){return[0,si(y.path)]})(l)))))}));r.push(f)}})).next((()=>W.waitFor(r))).next((()=>i.apply(e))).next((()=>o))}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return fg(e,n)}Sr(e,n){const i=fa(e);let r,o=mr.ce;return i.ee({index:sS},(([l,c],{path:f,sequenceNumber:d})=>{l===0?(o!==mr.ce&&n(new be(_s(r)),o),o=d,r=f):o=mr.ce})).next((()=>{o!==mr.ce&&n(new be(_s(r)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function fg(t,e){return fa(t).put((function(i,r){return{targetId:0,path:si(i.path),sequenceNumber:r}})(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.changes=new bo((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?W.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nG{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return dl(e).put(i)}removeEntry(e,n,i){return dl(e).delete((function(o,l){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],z_(l),c[c.length-1]]})(n,i))}updateMetadata(e,n){return this.getMetadata(e).next((i=>(i.byteSize+=n,this.Dr(e,i))))}getEntry(e,n){let i=nn.newInvalidDocument(n);return dl(e).ee({index:jg,range:IDBKeyRange.only(Ff(n))},((r,o)=>{i=this.Cr(n,o)})).next((()=>i))}vr(e,n){let i={size:0,document:nn.newInvalidDocument(n)};return dl(e).ee({index:jg,range:IDBKeyRange.only(Ff(n))},((r,o)=>{i={document:this.Cr(n,o),size:F_(o)}})).next((()=>i))}getEntries(e,n){let i=Yi();return this.Fr(e,n,((r,o)=>{const l=this.Cr(r,o);i=i.insert(r,l)})).next((()=>i))}Mr(e,n){let i=Yi(),r=new Kt(be.comparator);return this.Fr(e,n,((o,l)=>{const c=this.Cr(o,l);i=i.insert(o,c),r=r.insert(o,F_(l))})).next((()=>({documents:i,Or:r})))}Fr(e,n,i){if(n.isEmpty())return W.resolve();let r=new At(Z2);n.forEach((f=>r=r.add(f)));const o=IDBKeyRange.bound(Ff(r.first()),Ff(r.last())),l=r.getIterator();let c=l.getNext();return dl(e).ee({index:jg,range:o},((f,d,p)=>{const y=be.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;c&&Z2(c,y)<0;)i(c,null),c=l.getNext();c&&c.isEqual(y)&&(i(c,d),c=l.hasNext()?l.getNext():null),c?p.j(Ff(c)):p.done()})).next((()=>{for(;c;)i(c,null),c=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,n,i,r,o){const l=n.path,c=[l.popLast().toArray(),l.lastSegment(),z_(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dl(e).J(IDBKeyRange.bound(c,f,!0)).next((d=>{o?.incrementDocumentReadCount(d.length);let p=Yi();for(const y of d){const v=this.Cr(be.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(Tm(n,v)||r.has(v.key))&&(p=p.insert(v.key,v))}return p}))}getAllFromCollectionGroup(e,n,i,r){let o=Yi();const l=Y2(n,i),c=Y2(n,Zi.max());return dl(e).ee({index:Pk,range:IDBKeyRange.bound(l,c,!0)},((f,d,p)=>{const y=this.Cr(be.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);o=o.insert(y.key,y),o.size===r&&p.done()})).next((()=>o))}newChangeBuffer(e){return new iG(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((n=>n.byteSize))}getMetadata(e){return W2(e).get(KT).next((n=>(xe(!!n,20021),n)))}Dr(e,n){return W2(e).put(KT,n)}Cr(e,n){if(n){const i=BH(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(Oe.min())))return i}return nn.newInvalidDocument(e)}}function GV(t){return new nG(t)}class iG extends HV{constructor(e,n){super(),this.Nr=e,this.trackRemovals=n,this.Br=new bo((i=>i.toString()),((i,r)=>i.isEqual(r)))}applyChanges(e){const n=[];let i=0,r=new At(((o,l)=>Be(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const c=this.Br.get(o);if(n.push(this.Nr.removeEntry(e,o,c.readTime)),l.isValidDocument()){const f=N2(this.Nr.serializer,l);r=r.add(o.path.popLast());const d=F_(f);i+=d-c.size,n.push(this.Nr.addEntry(e,o,f))}else if(i-=c.size,this.trackRemovals){const f=N2(this.Nr.serializer,l.convertToNoDocument(Oe.min()));n.push(this.Nr.addEntry(e,o,f))}})),r.forEach((o=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),n.push(this.Nr.updateMetadata(e,i)),W.waitFor(n)}getFromCache(e,n){return this.Nr.vr(e,n).next((i=>(this.Br.set(n,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,n){return this.Nr.Mr(e,n).next((({documents:i,Or:r})=>(r.forEach(((o,l)=>{this.Br.set(o,{size:l,readTime:i.get(o).readTime})})),i)))}}function W2(t){return Mn(t,Ud)}function dl(t){return Mn(t,D_)}function Ff(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Y2(t,e){const n=e.documentKey.path.toArray();return[t,z_(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Z2(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=Be(n[o],i[o]),r)return r;return r=Be(n.length,i.length),r||(r=Be(n[n.length-2],i[i.length-2]),r||Be(n[n.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(i!==null&&md(i.mutation,r,pr.empty(),Et.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Je()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Je()){const r=ys();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,i).next((o=>{let l=Wf();return o.forEach(((c,f)=>{l=l.insert(c,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,n){const i=ys();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Je())))}populateOverlays(e,n,i){const r=[];return i.forEach((o=>{n.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((l,c)=>{n.set(l,c)}))}))}computeViews(e,n,i,r){let o=Yi();const l=dd(),c=(function(){return dd()})();return n.forEach(((f,d)=>{const p=i.get(d.key);r.has(d.key)&&(p===void 0||p.mutation instanceof ka)?o=o.insert(d.key,d):p!==void 0?(l.set(d.key,p.mutation.getFieldMask()),md(p.mutation,d,p.mutation.getFieldMask(),Et.now())):l.set(d.key,pr.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((d,p)=>l.set(d,p))),n.forEach(((d,p)=>c.set(d,new rG(p,l.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,n){const i=dd();let r=new Kt(((l,c)=>l-c)),o=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((l=>{for(const c of l)c.keys().forEach((f=>{const d=n.get(f);if(d===null)return;let p=i.get(f)||pr.empty();p=c.applyToLocalView(d,p),i.set(f,p);const y=(r.get(c.batchId)||Je()).add(f);r=r.insert(c.batchId,y)}))})).next((()=>{const l=[],c=r.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),d=f.key,p=f.value,y=uV();p.forEach((v=>{if(!o.has(v)){const w=gV(n.get(v),i.get(v));w!==null&&y.set(v,w),o=o.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,d,y))}return W.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,r){return(function(l){return be.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):W.resolve(ys());let c=kd,f=o;return l.next((d=>W.forEach(d,((p,y)=>(c<y.largestBatchId&&(c=y.largestBatchId),o.get(p)?W.resolve():this.remoteDocumentCache.getEntry(e,p).next((v=>{f=f.insert(p,v)}))))).next((()=>this.populateOverlays(e,d,o))).next((()=>this.computeViews(e,f,d,Je()))).next((p=>({batchId:c,changes:lV(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next((i=>{let r=Wf();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let l=Wf();return this.indexManager.getCollectionParents(e,o).next((c=>W.forEach(c,(f=>{const d=(function(y,v){return new Em(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(n,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next((p=>{p.forEach(((y,v)=>{l=l.insert(y,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r)))).next((l=>{o.forEach(((f,d)=>{const p=d.getKey();l.get(p)===null&&(l=l.insert(p,nn.newInvalidDocument(p)))}));let c=Wf();return l.forEach(((f,d)=>{const p=o.get(f);p!==void 0&&md(p.mutation,d,pr.empty(),Et.now()),Tm(n,d)&&(c=c.insert(f,d))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sG{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:di(r.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:kV(r.bundledQuery),readTime:di(r.readTime)}})(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(){this.overlays=new Kt(be.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const i=ys();return W.forEach(n,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((r,o)=>{this.St(e,n,o)})),W.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),W.resolve()}getOverlaysForCollection(e,n,i){const r=ys(),o=n.length+1,l=new be(n.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,d=f.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&f.largestBatchId>i&&r.set(f.getKey(),f)}return W.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Kt(((d,p)=>d-p));const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let p=o.get(d.largestBatchId);p===null&&(p=ys(),o=o.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const c=ys(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,p)=>c.set(d,p))),!(c.size()>=r)););return W.resolve(c)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new _S(n,i));let o=this.qr.get(n);o===void 0&&(o=Je(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aG{constructor(){this.sessionToken=Rn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(){this.Qr=new At(jn.$r),this.Ur=new At(jn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new jn(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new jn(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new be(new _t([])),i=new jn(n,e),r=new jn(n,e+1),o=[];return this.Ur.forEachInRange([i,r],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new be(new _t([])),i=new jn(n,e),r=new jn(n,e+1);let o=Je();return this.Ur.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(e){const n=new jn(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class jn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return be.comparator(e.key,n.key)||Be(e.Yr,n.Yr)}static Kr(e,n){return Be(e.Yr,n.Yr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new At(jn.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new pS(o,n,i,r);this.mutationQueue.push(l);for(const c of r)this.Zr=this.Zr.add(new jn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return W.resolve(l)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return W.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?kl:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new jn(n,0),r=new jn(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],(l=>{const c=this.Xr(l.Yr);o.push(c)})),W.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new At(Be);return n.forEach((r=>{const o=new jn(r,0),l=new jn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(c=>{i=i.add(c.Yr)}))})),W.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;be.isDocumentKey(o)||(o=o.child(""));const l=new jn(new be(o),0);let c=new At(Be);return this.Zr.forEachWhile((f=>{const d=f.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(c=c.add(f.Yr)),!0)}),l),W.resolve(this.ti(c))}ti(e){const n=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return W.forEach(n.mutations,(r=>{const o=new jn(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new jn(n,0),r=this.Zr.firstAfterOrEqual(i);return W.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG{constructor(e){this.ri=e,this.docs=(function(){return new Kt(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,l=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return W.resolve(i?i.document.mutableCopy():nn.newInvalidDocument(n))}getEntries(e,n){let i=Yi();return n.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():nn.newInvalidDocument(r))})),W.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Yi();const l=n.path,c=new be(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:d,value:{document:p}}=f.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||iS(Ik(p),i)<=0||(r.has(p.key)||Tm(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return W.resolve(o)}getAllFromCollectionGroup(e,n,i,r){Ae(9500)}ii(e,n){return W.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new cG(this)}getSize(e){return W.resolve(this.size)}}class cG extends HV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(e){this.persistence=e,this.si=new bo((n=>Ql(n)),vm),this.lastRemoteSnapshotVersion=Oe.min(),this.highestTargetId=0,this.oi=0,this._i=new bS,this.targetCount=0,this.ai=eu.ur()}forEachTarget(e,n){return this.si.forEach(((i,r)=>n(r))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new eu(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach(((l,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),W.waitFor(o).next((()=>r))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return W.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),W.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach((l=>{o.push(r.markPotentiallyOrphaned(e,l))})),W.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return W.resolve(i)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n){this.ui={},this.overlays={},this.ci=new mr(0),this.li=!1,this.li=!0,this.hi=new aG,this.referenceDelegate=e(this),this.Pi=new hG(this),this.indexManager=new ZH,this.remoteDocumentCache=(function(r){return new uG(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new OV(n),this.Ii=new sG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new lG(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){me("MemoryPersistence","Starting transaction:",e);const r=new fG(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(e,n){return W.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class fG extends xk{constructor(e){super(),this.currentSequenceNumber=e}}class Gy{constructor(e){this.persistence=e,this.Ri=new bS,this.Vi=null}static mi(e){return new Gy(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),W.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(i=>{const r=be.fromPath(i);return this.gi(e,r).next((o=>{o||n.removeEntry(r,Oe.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class j_{constructor(e,n){this.persistence=e,this.pi=new bo((i=>si(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=$V(this,n)}static mi(e,n){return new j_(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((r=>i+r))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return W.forEach(this.pi,((i,r)=>this.br(e,i,r).next((o=>o?W.resolve():n(r)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,(l=>this.br(e,l,n).next((c=>{c||(i++,o.removeEntry(l,Oe.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),W.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qg(e.data.value)),n}br(e,n,i){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return W.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{constructor(e){this.serializer=e}k(e,n,i,r){const o=new Py("createOrUpgrade",n);i<1&&r>=1&&((function(f){f.createObjectStore(ym)})(e),(function(f){f.createObjectStore(zd,{keyPath:C$}),f.createObjectStore(Mr,{keyPath:a2,autoIncrement:!0}).createIndex(Dl,l2,{unique:!0}),f.createObjectStore(Yc)})(e),Q2(e),(function(f){f.createObjectStore(yl)})(e));let l=W.resolve();return i<3&&r>=3&&(i!==0&&((function(f){f.deleteObjectStore(Qc),f.deleteObjectStore(Zc),f.deleteObjectStore(Vl)})(e),Q2(e)),l=l.next((()=>(function(f){const d=f.store(Vl),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Oe.min().toTimestamp(),targetCount:0};return d.put(N_,p)})(o)))),i<4&&r>=4&&(i!==0&&(l=l.next((()=>(function(f,d){return d.store(Mr).J().next((y=>{f.deleteObjectStore(Mr),f.createObjectStore(Mr,{keyPath:a2,autoIncrement:!0}).createIndex(Dl,l2,{unique:!0});const v=d.store(Mr),w=y.map((S=>v.put(S)));return W.waitFor(w)}))})(e,o)))),l=l.next((()=>{(function(f){f.createObjectStore(Xc,{keyPath:M$})})(e)}))),i<5&&r>=5&&(l=l.next((()=>this.yi(o)))),i<6&&r>=6&&(l=l.next((()=>((function(f){f.createObjectStore(Ud)})(e),this.wi(o))))),i<7&&r>=7&&(l=l.next((()=>this.Si(o)))),i<8&&r>=8&&(l=l.next((()=>this.bi(e,o)))),i<9&&r>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&r>=10&&(l=l.next((()=>this.Di(o)))),i<11&&r>=11&&(l=l.next((()=>{(function(f){f.createObjectStore(My,{keyPath:k$})})(e),(function(f){f.createObjectStore(ky,{keyPath:V$})})(e)}))),i<12&&r>=12&&(l=l.next((()=>{(function(f){const d=f.createObjectStore(Vy,{keyPath:q$});d.createIndex(YT,$$,{unique:!1}),d.createIndex(Vk,H$,{unique:!1})})(e)}))),i<13&&r>=13&&(l=l.next((()=>(function(f){const d=f.createObjectStore(D_,{keyPath:I$});d.createIndex(jg,R$),d.createIndex(Pk,x$)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(yl)))),i<14&&r>=14&&(l=l.next((()=>this.Fi(e,o)))),i<15&&r>=15&&(l=l.next((()=>(function(f){f.createObjectStore(oS,{keyPath:L$,autoIncrement:!0}).createIndex(WT,z$,{unique:!1}),f.createObjectStore(ud,{keyPath:U$}).createIndex(Mk,F$,{unique:!1}),f.createObjectStore(cd,{keyPath:j$}).createIndex(kk,B$,{unique:!1})})(e)))),i<16&&r>=16&&(l=l.next((()=>{n.objectStore(ud).clear()})).next((()=>{n.objectStore(cd).clear()}))),i<17&&r>=17&&(l=l.next((()=>{(function(f){f.createObjectStore(aS,{keyPath:G$})})(e)}))),i<18&&r>=18&&TO()&&(l=l.next((()=>{n.objectStore(ud).clear()})).next((()=>{n.objectStore(cd).clear()}))),l}wi(e){let n=0;return e.store(yl).ee(((i,r)=>{n+=F_(r)})).next((()=>{const i={byteSize:n};return e.store(Ud).put(KT,i)}))}yi(e){const n=e.store(zd),i=e.store(Mr);return n.J().next((r=>W.forEach(r,(o=>{const l=IDBKeyRange.bound([o.userId,kl],[o.userId,o.lastAcknowledgedBatchId]);return i.J(Dl,l).next((c=>W.forEach(c,(f=>{xe(f.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const d=wl(this.serializer,f);return UV(e,o.userId,d).next((()=>{}))}))))}))))}Si(e){const n=e.store(Qc),i=e.store(yl);return e.store(Vl).get(N_).next((r=>{const o=[];return i.ee(((l,c)=>{const f=new _t(l),d=(function(y){return[0,si(y)]})(f);o.push(n.get(d).next((p=>p?W.resolve():(y=>n.put({targetId:0,path:si(y),sequenceNumber:r.highestListenSequenceNumber}))(f))))})).next((()=>W.waitFor(o)))}))}bi(e,n){e.createObjectStore(Fd,{keyPath:O$});const i=n.store(Fd),r=new TS,o=l=>{if(r.add(l)){const c=l.lastSegment(),f=l.popLast();return i.put({collectionId:c,parent:si(f)})}};return n.store(yl).ee({X:!0},((l,c)=>{const f=new _t(l);return o(f.popLast())})).next((()=>n.store(Yc).ee({X:!0},(([l,c,f],d)=>{const p=_s(c);return o(p.popLast())}))))}Di(e){const n=e.store(Zc);return n.ee(((i,r)=>{const o=Zf(r),l=MV(this.serializer,o);return n.put(l)}))}Ci(e,n){const i=n.store(yl),r=[];return i.ee(((o,l)=>{const c=n.store(D_),f=(function(y){return y.document?new be(_t.fromString(y.document.name).popFirst(5)):y.noDocument?be.fromSegments(y.noDocument.path):y.unknownDocument?be.fromSegments(y.unknownDocument.path):Ae(36783)})(l).path.toArray(),d={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(c.put(d))})).next((()=>W.waitFor(r)))}Fi(e,n){const i=n.store(Mr),r=GV(this.serializer),o=new wS(Gy.mi,this.serializer.yt);return i.J().next((l=>{const c=new Map;return l.forEach((f=>{let d=c.get(f.userId)??Je();wl(this.serializer,f).keys().forEach((p=>d=d.add(p))),c.set(f.userId,d)})),W.forEach(c,((f,d)=>{const p=new ci(d),y=$y.wt(this.serializer,p),v=o.getIndexManager(p),w=Hy.wt(p,this.serializer,v,o.referenceDelegate);return new KV(r,w,y,v).recalculateAndSaveOverlaysForDocumentKeys(new ZT(n,mr.ce),f).next()}))}))}}function Q2(t){t.createObjectStore(Qc,{keyPath:N$}).createIndex(sS,P$,{unique:!0}),t.createObjectStore(Zc,{keyPath:"targetId"}).createIndex(Ok,D$,{unique:!0}),t.createObjectStore(Vl)}const sa="IndexedDbPersistence",kE=18e5,VE=5e3,LE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",mG="main";class SS{constructor(e,n,i,r,o,l,c,f,d,p,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.Mi=o,this.window=l,this.document=c,this.xi=d,this.Oi=p,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!SS.v())throw new Ee(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tG(this,r),this.$i=n+mG,this.serializer=new OV(f),this.Ui=new va(this.$i,this.Ni,new dG(this.serializer)),this.hi=new $H,this.Pi=new XH(this.referenceDelegate,this.serializer),this.remoteDocumentCache=GV(this.serializer),this.Ii=new qH,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,p===!1&&hi(sa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ee(ae.FAILED_PRECONDITION,LE);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new mr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async n=>{n.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>dg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((n=>this.isPrimary&&!n?this.Zi(e).next((()=>!1)):!!n&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ma(e))return me(sa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return me(sa,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return jf(e).get(ic).next((n=>W.resolve(this.es(n))))}ts(e){return dg(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,kE)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const i=Mn(n,Xc);return i.J().next((r=>{const o=this.ss(r,kE),l=r.filter((c=>o.indexOf(c)===-1));return W.forEach(l,(c=>i.delete(c.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const n of e)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?W.resolve(!0):jf(e).get(ic).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,VE)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new Ee(ae.FAILED_PRECONDITION,LE);return!1}}return!(!this.networkEnabled||!this.inForeground)||dg(e).J().next((i=>this.ss(i,VE).find((r=>{if(this.clientId!==r.clientId){const o=!this.networkEnabled&&r.networkEnabled,l=!this.inForeground&&r.inForeground,c=this.networkEnabled===r.networkEnabled;if(o||l&&c)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&me(sa,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[ym,Xc],(e=>{const n=new ZT(e,mr.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(e,n){return e.filter((i=>this.rs(i.updateTimeMs,n)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>dg(e).J().next((n=>this.ss(n,kE).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,n){return Hy.wt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new QH(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return $y.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,n,i){me(sa,"Starting transaction:",e);const r=n==="readonly"?"readonly":"readwrite",o=(function(f){return f===18?Y$:f===17?Fk:f===16?W$:f===15?lS:f===14?Uk:f===13?zk:f===12?K$:f===11?Lk:void Ae(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,r,o,(c=>(l=new ZT(c,this.ci?this.ci.next():mr.ce),n==="readwrite-primary"?this.Hi(l).next((f=>!!f||this.Yi(l))).next((f=>{if(!f)throw hi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Ee(ae.FAILED_PRECONDITION,Rk);return i(l)})).next((f=>this.Xi(l).next((()=>f)))):this.Is(l).next((()=>i(l)))))).then((c=>(l.raiseOnCommittedEvent(),c)))}Is(e){return jf(e).get(ic).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,VE)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Ee(ae.FAILED_PRECONDITION,LE)}))}Xi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jf(e).put(ic,n)}static v(){return va.v()}Zi(e){const n=jf(e);return n.get(ic).next((i=>this.es(i)?(me(sa,"Releasing primary lease."),n.delete(ic)):W.resolve()))}rs(e,n){const i=Date.now();return!(e<i-n)&&(!(e>i)||(hi(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;EO()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const n=this.Ki?.getItem(this._s(e))!==null;return me(sa,`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return hi(sa,"Failed to get zombied client id.",n),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){hi("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function jf(t){return Mn(t,ym)}function dg(t){return Mn(t,Xc)}function pG(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Je(),r=Je();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new CS(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return EO()?8:Dk(Pn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,n,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new gG;return this.Ss(e,n,l).next((c=>{if(o.result=c,this.Vs)return this.bs(e,n,l,c.size)}))})).next((()=>o.result))}bs(e,n,i,r){return i.documentReadCount<this.fs?(pc()<=st.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",gc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(pc()<=st.DEBUG&&me("QueryEngine","Query:",gc(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(pc()<=st.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",gc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(n))):W.resolve())}ys(e,n){if(T2(n))return W.resolve(null);let i=_r(n);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=ib(n,null,"F"),i=_r(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=Je(...o);return this.ps.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((f=>{const d=this.Ds(n,c);return this.Cs(n,d,l,f.readTime)?this.ys(e,ib(n,null,"F")):this.vs(e,d,n,f)}))))})))))}ws(e,n,i,r){return T2(n)||r.isEqual(Oe.min())?W.resolve(null):this.ps.getDocuments(e,i).next((o=>{const l=this.Ds(n,o);return this.Cs(n,l,i,r)?W.resolve(null):(pc()<=st.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gc(n)),this.vs(e,l,n,y$(r,kd)).next((c=>c)))}))}Ds(e,n){let i=new At(oV(e));return n.forEach(((r,o)=>{Tm(e,o)&&(i=i.add(o))})),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return pc()<=st.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",gc(n)),this.ps.getDocumentsMatchingQuery(e,n,Zi.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((o=>(n.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="LocalStore",_G=3e8;class yG{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Kt(Be),this.xs=new bo((o=>Ql(o)),vm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function YV(t,e,n,i){return new yG(t,e,n,i)}async function ZV(t,e){const n=qe(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],c=[];let f=Je();for(const d of r){l.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}for(const d of o){c.push(d.batchId);for(const p of d.mutations)f=f.add(p.key)}return n.localDocuments.getDocuments(i,f).next((d=>({Ls:d,removedBatchIds:l,addedBatchIds:c})))}))}))}function vG(t,e){const n=qe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,f,d,p){const y=d.batch,v=y.keys();let w=W.resolve();return v.forEach((S=>{w=w.next((()=>p.getEntry(f,S))).next((N=>{const O=d.docVersions.get(S);xe(O!==null,48541),N.version.compareTo(O)<0&&(y.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),p.addEntry(N)))}))})),w.next((()=>c.mutationQueue.removeMutationBatch(f,y)))})(n,i,e,o).next((()=>o.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let f=Je();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(f=f.add(c.batch.mutations[d].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function QV(t){const e=qe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function EG(t,e){const n=qe(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const c=[];e.targetChanges.forEach(((p,y)=>{const v=r.get(y);if(!v)return;c.push(n.Pi.removeMatchingKeys(o,p.removedDocuments,y).next((()=>n.Pi.addMatchingKeys(o,p.addedDocuments,y))));let w=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(Rn.EMPTY_BYTE_STRING,Oe.min()).withLastLimboFreeSnapshotVersion(Oe.min()):p.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(p.resumeToken,i)),r=r.insert(y,w),(function(N,O,j){return N.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=_G?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(v,w,p)&&c.push(n.Pi.updateTargetData(o,w))}));let f=Yi(),d=Je();if(e.documentUpdates.forEach((p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))})),c.push(TG(o,l,e.documentUpdates).next((p=>{f=p.ks,d=p.qs}))),!i.isEqual(Oe.min())){const p=n.Pi.getLastRemoteSnapshotVersion(o).next((y=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));c.push(p)}return W.waitFor(c).next((()=>l.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,f,d))).next((()=>f))})).then((o=>(n.Ms=r,o)))}function TG(t,e,n){let i=Je(),r=Je();return n.forEach((o=>i=i.add(o))),e.getEntries(t,i).next((o=>{let l=Yi();return n.forEach(((c,f)=>{const d=o.get(c);f.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),f.isNoDocument()&&f.version.isEqual(Oe.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):me(AS,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",f.version)})),{ks:l,qs:r}}))}function bG(t,e){const n=qe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=kl),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function wG(t,e){const n=qe(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.Pi.getTargetData(i,e).next((o=>o?(r=o,W.resolve(r)):n.Pi.allocateTargetId(i).next((l=>(r=new eo(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function hb(t,e,n){const i=qe(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Ma(l))throw l;me(AS,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function X2(t,e,n){const i=qe(t);let r=Oe.min(),o=Je();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,d,p){const y=qe(f),v=y.xs.get(p);return v!==void 0?W.resolve(y.Ms.get(v)):y.Pi.getTargetData(d,p)})(i,l,_r(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,c.targetId).next((f=>{o=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,n?r:Oe.min(),n?o:Je()))).next((c=>(SG(i,cH(e),c),{documents:c,Qs:o})))))}function SG(t,e,n){let i=t.Os.get(e)||Oe.min();n.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),t.Os.set(e,i)}class J2{constructor(){this.activeTargetIds=gH()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XV{constructor(){this.Mo=new J2,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new J2,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CG{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="ConnectivityMonitor";class tD{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(eD,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(eD,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mg=null;function fb(){return mg===null?mg=(function(){return 268435456+Math.round(2147483648*Math.random())})():mg++,"0x"+mg.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="RestConnection",AG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IG{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===P_?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const l=fb(),c=this.zo(e,n.toUriEncodedString());me(zE,`Sending RPC '${e}' ${l}:`,c,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,o);const{host:d}=new URL(c),p=Pa(d);return this.Jo(e,c,f,i,p).then((y=>(me(zE,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw Md(zE,`RPC '${e}' ${l} failed with error: `,y,"url: ",c,"request:",i),y}))}Ho(e,n,i,r,o,l){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+bh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}zo(e,n){const i=AG[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RG{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="WebChannelConnection";class xG extends IG{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const l=fb();return new Promise(((c,f)=>{const d=new yk;d.setWithCredentials(!0),d.listenOnce(vk.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case zg.NO_ERROR:const y=d.getResponseJson();me(ni,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),c(y);break;case zg.TIMEOUT:me(ni,`RPC '${e}' ${l} timed out`),f(new Ee(ae.DEADLINE_EXCEEDED,"Request time out"));break;case zg.HTTP_ERROR:const v=d.getStatus();if(me(ni,`RPC '${e}' ${l} failed with status:`,v,"response text:",d.getResponseText()),v>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const S=w?.error;if(S&&S.status&&S.message){const N=(function(j){const V=j.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(V)>=0?V:ae.UNKNOWN})(S.status);f(new Ee(N,S.message))}else f(new Ee(ae.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new Ee(ae.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{me(ni,`RPC '${e}' ${l} completed.`)}}));const p=JSON.stringify(r);me(ni,`RPC '${e}' ${l} sending request:`,r),d.send(n,"POST",p,i,15)}))}T_(e,n,i){const r=fb(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=bk(),c=Tk(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,n,i),f.encodeInitMessageHeaders=!0;const p=o.join("");me(ni,`Creating RPC '${e}' stream ${r}: ${p}`,f);const y=l.createWebChannel(p,f);this.I_(y);let v=!1,w=!1;const S=new RG({Yo:O=>{w?me(ni,`Not sending because RPC '${e}' stream ${r} is closed:`,O):(v||(me(ni,`Opening RPC '${e}' stream ${r} transport.`),y.open(),v=!0),me(ni,`RPC '${e}' stream ${r} sending:`,O),y.send(O))},Zo:()=>y.close()}),N=(O,j,V)=>{O.listen(j,(k=>{try{V(k)}catch(K){setTimeout((()=>{throw K}),0)}}))};return N(y,Kf.EventType.OPEN,(()=>{w||(me(ni,`RPC '${e}' stream ${r} transport opened.`),S.o_())})),N(y,Kf.EventType.CLOSE,(()=>{w||(w=!0,me(ni,`RPC '${e}' stream ${r} transport closed`),S.a_(),this.E_(y))})),N(y,Kf.EventType.ERROR,(O=>{w||(w=!0,Md(ni,`RPC '${e}' stream ${r} transport errored. Name:`,O.name,"Message:",O.message),S.a_(new Ee(ae.UNAVAILABLE,"The operation could not be completed")))})),N(y,Kf.EventType.MESSAGE,(O=>{if(!w){const j=O.data[0];xe(!!j,16349);const V=j,k=V?.error||V[0]?.error;if(k){me(ni,`RPC '${e}' stream ${r} received error:`,k);const K=k.status;let H=(function(I){const P=bn[I];if(P!==void 0)return vV(P)})(K),ie=k.message;H===void 0&&(H=ae.INTERNAL,ie="Unknown error status: "+K+" with message "+k.message),w=!0,S.a_(new Ee(H,ie)),y.close()}else me(ni,`RPC '${e}' stream ${r} received:`,j),S.u_(j)}})),N(c,Ek.STAT_EVENT,(O=>{O.stat===$T.PROXY?me(ni,`RPC '${e}' stream ${r} detected buffering proxy`):O.stat===$T.NOPROXY&&me(ni,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DG(){return typeof window<"u"?window:null}function Wg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(t){return new PH(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&me("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD="PersistentStream";class eL{constructor(e,n,i,r,o,l,c,f){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new JV(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ae.RESOURCE_EXHAUSTED?(hi(n.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===n&&this.G_(i,r)}),(i=>{e((()=>{const r=new Ee(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(nD,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(me(nD,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class NG extends eL{constructor(e,n,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=kH(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Oe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Oe.min():l.readTime?di(l.readTime):Oe.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=ob(this.serializer),n.addTarget=(function(o,l){let c;const f=l.target;if(c=M_(f)?{documents:IV(o,f)}:{query:RV(o,f).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=bV(o,l.resumeToken);const d=rb(o,l.expectedCount);d!==null&&(c.expectedCount=d)}else if(l.snapshotVersion.compareTo(Oe.min())>0){c.readTime=oh(o,l.snapshotVersion.toTimestamp());const d=rb(o,l.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const i=LH(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=ob(this.serializer),n.removeTarget=e,this.q_(n)}}class PG extends eL{constructor(e,n,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=VH(e.writeResults,e.commitTime),i=di(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=ob(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>L_(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG{}class MG extends OG{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ee(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,sb(n,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(ae.UNKNOWN,o.toString())}))}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Ho(e,sb(n,i),r,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ee(ae.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class kG{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hi(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu="RemoteStore";class VG{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{hu(this)&&(me(tu,"Restarting streams for network reachability change."),await(async function(f){const d=qe(f);d.Ea.add(4),await wm(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Wy(d)})(this))}))})),this.Ra=new kG(i,r)}}async function Wy(t){if(hu(t))for(const e of t.da)await e(!0)}async function wm(t){for(const e of t.da)await e(!1)}function tL(t,e){const n=qe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),DS(n)?xS(n):Sh(n).O_()&&RS(n,e))}function IS(t,e){const n=qe(t),i=Sh(n);n.Ia.delete(e),i.O_()&&nL(n,e),n.Ia.size===0&&(i.O_()?i.L_():hu(n)&&n.Ra.set("Unknown"))}function RS(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sh(t).Y_(e)}function nL(t,e){t.Va.Ue(e),Sh(t).Z_(e)}function xS(t){t.Va=new RH({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Sh(t).start(),t.Ra.ua()}function DS(t){return hu(t)&&!Sh(t).x_()&&t.Ia.size>0}function hu(t){return qe(t).Ea.size===0}function iL(t){t.Va=void 0}async function LG(t){t.Ra.set("Online")}async function zG(t){t.Ia.forEach(((e,n)=>{RS(t,e)}))}async function UG(t,e){iL(t),DS(t)?(t.Ra.ha(e),xS(t)):t.Ra.set("Unknown")}async function FG(t,e,n){if(t.Ra.set("Online"),e instanceof TV&&e.state===2&&e.cause)try{await(async function(r,o){const l=o.cause;for(const c of o.targetIds)r.Ia.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Ia.delete(c),r.Va.removeTarget(c))})(t,e)}catch(i){me(tu,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await B_(t,i)}else if(e instanceof Gg?t.Va.Ze(e):e instanceof EV?t.Va.st(e):t.Va.tt(e),!n.isEqual(Oe.min()))try{const i=await QV(t.localStore);n.compareTo(i)>=0&&await(function(o,l){const c=o.Va.Tt(l);return c.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const p=o.Ia.get(d);p&&o.Ia.set(d,p.withResumeToken(f.resumeToken,l))}})),c.targetMismatches.forEach(((f,d)=>{const p=o.Ia.get(f);if(!p)return;o.Ia.set(f,p.withResumeToken(Rn.EMPTY_BYTE_STRING,p.snapshotVersion)),nL(o,f);const y=new eo(p.target,f,d,p.sequenceNumber);RS(o,y)})),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(i){me(tu,"Failed to raise snapshot:",i),await B_(t,i)}}async function B_(t,e,n){if(!Ma(e))throw e;t.Ea.add(1),await wm(t),t.Ra.set("Offline"),n||(n=()=>QV(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{me(tu,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Wy(t)}))}function rL(t,e){return e().catch((n=>B_(t,n,e)))}async function Sm(t){const e=qe(t),n=Ia(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kl;for(;jG(e);)try{const r=await bG(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,BG(e,r)}catch(r){await B_(e,r)}sL(e)&&oL(e)}function jG(t){return hu(t)&&t.Ta.length<10}function BG(t,e){t.Ta.push(e);const n=Ia(t);n.O_()&&n.X_&&n.ea(e.mutations)}function sL(t){return hu(t)&&!Ia(t).x_()&&t.Ta.length>0}function oL(t){Ia(t).start()}async function qG(t){Ia(t).ra()}async function $G(t){const e=Ia(t);for(const n of t.Ta)e.ea(n.mutations)}async function HG(t,e,n){const i=t.Ta.shift(),r=gS.from(i,e,n);await rL(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Sm(t)}async function GG(t,e){e&&Ia(t).X_&&await(async function(i,r){if((function(l){return CH(l)&&l!==ae.ABORTED})(r.code)){const o=i.Ta.shift();Ia(i).B_(),await rL(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await Sm(i)}})(t,e),sL(t)&&oL(t)}async function iD(t,e){const n=qe(t);n.asyncQueue.verifyOperationInProgress(),me(tu,"RemoteStore received new credentials");const i=hu(n);n.Ea.add(3),await wm(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Wy(n)}async function KG(t,e){const n=qe(t);e?(n.Ea.delete(2),await Wy(n)):e||(n.Ea.add(2),await wm(n),n.Ra.set("Unknown"))}function Sh(t){return t.ma||(t.ma=(function(n,i,r){const o=qe(n);return o.sa(),new NG(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Xo:LG.bind(null,t),t_:zG.bind(null,t),r_:UG.bind(null,t),H_:FG.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),DS(t)?xS(t):t.Ra.set("Unknown")):(await t.ma.stop(),iL(t))}))),t.ma}function Ia(t){return t.fa||(t.fa=(function(n,i,r){const o=qe(n);return o.sa(),new PG(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:qG.bind(null,t),r_:GG.bind(null,t),ta:$G.bind(null,t),na:HG.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Sm(t)):(await t.fa.stop(),t.Ta.length>0&&(me(tu,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new ro,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const l=Date.now()+i,c=new NS(e,n,l,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function PS(t,e){if(hi("AsyncQueue",`${e}: ${t}`),Ma(t))return new Ee(ae.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{static emptySet(e){return new Vc(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||be.comparator(n.key,i.key):(n,i)=>be.comparator(n.key,i.key),this.keyedMap=Wf(),this.sortedSet=new Kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Vc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.ga=new Kt(be.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class ah{constructor(e,n,i,r,o,l,c,f,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,r,o){const l=[];return n.forEach((c=>{l.push({type:0,doc:c})})),new ah(e,n,Vc.emptySet(n),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WG{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class YG{constructor(){this.queries=sD(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=qe(n),o=r.queries;r.queries=sD(),o.forEach(((l,c)=>{for(const f of c.Sa)f.onError(i)}))})(this,new Ee(ae.ABORTED,"Firestore shutting down"))}}function sD(){return new bo((t=>sV(t)),Uy)}async function ZG(t,e){const n=qe(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new WG,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(l){const c=PS(l,`Initialization of query '${gc(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&OS(n)}async function QG(t,e){const n=qe(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function XG(t,e){const n=qe(t);let i=!1;for(const r of e){const o=r.query,l=n.queries.get(o);if(l){for(const c of l.Sa)c.Fa(r)&&(i=!0);l.wa=r}}i&&OS(n)}function JG(t,e,n){const i=qe(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function OS(t){t.Ca.forEach((e=>{e.next()}))}var db,oD;(oD=db||(db={})).Ma="default",oD.Cache="cache";class eK{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ah(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ah.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==db.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e){this.key=e}}class lL{constructor(e){this.key=e}}class tK{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=oV(e),this.tu=new Vc(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new rD,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,l=r,c=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((p,y)=>{const v=r.get(p),w=Tm(this.query,y)?y:null,S=!!v&&this.mutatedKeys.has(v.key),N=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let O=!1;v&&w?v.data.isEqual(w.data)?S!==N&&(i.track({type:3,doc:w}),O=!0):this.su(v,w)||(i.track({type:2,doc:w}),O=!0,(f&&this.eu(w,f)>0||d&&this.eu(w,d)<0)&&(c=!0)):!v&&w?(i.track({type:0,doc:w}),O=!0):v&&!w&&(i.track({type:1,doc:v}),O=!0,(f||d)&&(c=!0)),O&&(w?(l=l.add(w),o=N?o.add(p):o.delete(p)):(l=l.delete(p),o=o.delete(p)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const p=this.query.limitType==="F"?l.last():l.first();l=l.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{tu:l,iu:i,Cs:c,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((p,y)=>(function(w,S){const N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:O})}};return N(w)-N(S)})(p.type,y.type)||this.eu(p.doc,y.doc))),this.ou(i),r=r??!1;const c=n&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,d=f!==this.Za;return this.Za=f,l.length!==0||d?{snapshot:new ah(this.query,e.tu,o,l,e.mutatedKeys,f===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rD,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new lL(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new aL(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ah.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const MS="SyncEngine";class nK{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class iK{constructor(e){this.key=e,this.hu=!1}}class rK{constructor(e,n,i,r,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new bo((c=>sV(c)),Uy),this.Iu=new Map,this.Eu=new Set,this.du=new Kt(be.comparator),this.Au=new Map,this.Ru=new bS,this.Vu={},this.mu=new Map,this.fu=eu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function sK(t,e,n=!0){const i=mL(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await uL(i,e,n,!0),r}async function oK(t,e){const n=mL(t);await uL(n,e,!0,!1)}async function uL(t,e,n,i){const r=await wG(t.localStore,_r(e)),o=r.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let c;return i&&(c=await aK(t,e,o,l==="current",r.resumeToken)),t.isPrimaryClient&&n&&tL(t.remoteStore,r),c}async function aK(t,e,n,i,r){t.pu=(y,v,w)=>(async function(N,O,j,V){let k=O.view.ru(j);k.Cs&&(k=await X2(N.localStore,O.query,!1).then((({documents:x})=>O.view.ru(x,k))));const K=V&&V.targetChanges.get(O.targetId),H=V&&V.targetMismatches.get(O.targetId)!=null,ie=O.view.applyChanges(k,N.isPrimaryClient,K,H);return lD(N,O.targetId,ie.au),ie.snapshot})(t,y,v,w);const o=await X2(t.localStore,e,!0),l=new tK(e,o.Qs),c=l.ru(o.documents),f=bm.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),d=l.applyChanges(c,t.isPrimaryClient,f);lD(t,n,d.au);const p=new nK(e,n,l);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function lK(t,e,n){const i=qe(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter((l=>!Uy(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await hb(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&IS(i.remoteStore,r.targetId),mb(i,r.targetId)})).catch(uu)):(mb(i,r.targetId),await hb(i.localStore,r.targetId,!0))}async function uK(t,e){const n=qe(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),IS(n.remoteStore,i.targetId))}async function cK(t,e,n){const i=pL(t);try{const r=await(function(l,c){const f=qe(l),d=Et.now(),p=c.reduce(((w,S)=>w.add(S.key)),Je());let y,v;return f.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let S=Yi(),N=Je();return f.Ns.getEntries(w,p).next((O=>{S=O,S.forEach(((j,V)=>{V.isValidDocument()||(N=N.add(j))}))})).next((()=>f.localDocuments.getOverlayedDocuments(w,S))).next((O=>{y=O;const j=[];for(const V of c){const k=wH(V,y.get(V.key).overlayedDocument);k!=null&&j.push(new ka(V.key,k,Zk(k.value.mapValue),Ri.exists(!0)))}return f.mutationQueue.addMutationBatch(w,d,j,c)})).next((O=>{v=O;const j=O.applyToLocalDocumentSet(y,N);return f.documentOverlayCache.saveOverlays(w,O.batchId,j)}))})).then((()=>({batchId:v.batchId,changes:lV(y)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,c,f){let d=l.Vu[l.currentUser.toKey()];d||(d=new Kt(Be)),d=d.insert(c,f),l.Vu[l.currentUser.toKey()]=d})(i,r.batchId,n),await Cm(i,r.changes),await Sm(i.remoteStore)}catch(r){const o=PS(r,"Failed to persist write");n.reject(o)}}async function cL(t,e){const n=qe(t);try{const i=await EG(n.localStore,e);e.targetChanges.forEach(((r,o)=>{const l=n.Au.get(o);l&&(xe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?xe(l.hu,14607):r.removedDocuments.size>0&&(xe(l.hu,42227),l.hu=!1))})),await Cm(n,i,e)}catch(i){await uu(i)}}function aD(t,e,n){const i=qe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(l,c){const f=qe(l);f.onlineState=c;let d=!1;f.queries.forEach(((p,y)=>{for(const v of y.Sa)v.va(c)&&(d=!0)})),d&&OS(f)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function hK(t,e,n){const i=qe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let l=new Kt(be.comparator);l=l.insert(o,nn.newNoDocument(o,Oe.min()));const c=Je().add(o),f=new qy(Oe.min(),new Map,new Kt(Be),l,c);await cL(i,f),i.du=i.du.remove(o),i.Au.delete(e),kS(i)}else await hb(i.localStore,e,!1).then((()=>mb(i,e,n))).catch(uu)}async function fK(t,e){const n=qe(t),i=e.batch.batchId;try{const r=await vG(n.localStore,e);fL(n,i,null),hL(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Cm(n,r)}catch(r){await uu(r)}}async function dK(t,e,n){const i=qe(t);try{const r=await(function(l,c){const f=qe(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let p;return f.mutationQueue.lookupMutationBatch(d,c).next((y=>(xe(y!==null,37113),p=y.keys(),f.mutationQueue.removeMutationBatch(d,y)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,p,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p))).next((()=>f.localDocuments.getDocuments(d,p)))}))})(i.localStore,e);fL(i,e,n),hL(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Cm(i,r)}catch(r){await uu(r)}}function hL(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function fL(t,e,n){const i=qe(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function mb(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((i=>{t.Ru.containsKey(i)||dL(t,i)}))}function dL(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(IS(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),kS(t))}function lD(t,e,n){for(const i of n)i instanceof aL?(t.Ru.addReference(i.key,e),mK(t,i)):i instanceof lL?(me(MS,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||dL(t,i.key)):Ae(19791,{wu:i})}function mK(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(me(MS,"New document in limbo: "+n),t.Eu.add(i),kS(t))}function kS(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new be(_t.fromString(e)),i=t.fu.next();t.Au.set(i,new iK(n)),t.du=t.du.insert(n,i),tL(t.remoteStore,new eo(_r(dS(n.path)),i,"TargetPurposeLimboResolution",mr.ce))}}async function Cm(t,e,n){const i=qe(t),r=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((c,f)=>{l.push(i.pu(f,e,n).then((d=>{if((d||n)&&i.isPrimaryClient){const p=d?!d.fromCache:n?.targetChanges.get(f.targetId)?.current;i.sharedClientState.updateQueryState(f.targetId,p?"current":"not-current")}if(d){r.push(d);const p=CS.As(f.targetId,d);o.push(p)}})))})),await Promise.all(l),i.Pu.H_(r),await(async function(f,d){const p=qe(f);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>W.forEach(d,(v=>W.forEach(v.Es,(w=>p.persistence.referenceDelegate.addReference(y,v.targetId,w))).next((()=>W.forEach(v.ds,(w=>p.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))))))}catch(y){if(!Ma(y))throw y;me(AS,"Failed to update sequence numbers: "+y)}for(const y of d){const v=y.targetId;if(!y.fromCache){const w=p.Ms.get(v),S=w.snapshotVersion,N=w.withLastLimboFreeSnapshotVersion(S);p.Ms=p.Ms.insert(v,N)}}})(i.localStore,o))}async function pK(t,e){const n=qe(t);if(!n.currentUser.isEqual(e)){me(MS,"User change. New user:",e.toKey());const i=await ZV(n.localStore,e);n.currentUser=e,(function(o,l){o.mu.forEach((c=>{c.forEach((f=>{f.reject(new Ee(ae.CANCELLED,l))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Cm(n,i.Ls)}}function gK(t,e){const n=qe(t),i=n.Au.get(e);if(i&&i.hu)return Je().add(i.key);{let r=Je();const o=n.Iu.get(e);if(!o)return r;for(const l of o){const c=n.Tu.get(l);r=r.unionWith(c.view.nu)}return r}}function mL(t){const e=qe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hK.bind(null,e),e.Pu.H_=XG.bind(null,e.eventManager),e.Pu.yu=JG.bind(null,e.eventManager),e}function pL(t){const e=qe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dK.bind(null,e),e}class Gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ky(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return YV(this.persistence,new WV,e.initialUser,this.serializer)}Cu(e){return new wS(Gy.mi,this.serializer)}Du(e){return new XV}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gd.provider={build:()=>new Gd};class _K extends Gd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){xe(this.persistence.referenceDelegate instanceof j_,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new qV(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ii.withCacheSize(this.cacheSizeBytes):ii.DEFAULT;return new wS((i=>j_.mi(i,n)),this.serializer)}}class yK extends Gd{constructor(e,n,i){super(),this.xu=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await pL(this.xu.syncEngine),await Sm(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return YV(this.persistence,new WV,e.initialUser,this.serializer)}Fu(e,n){const i=this.persistence.referenceDelegate.garbageCollector;return new qV(i,e.asyncQueue,n)}Mu(e,n){const i=new b$(n,this.persistence);return new T$(e.asyncQueue,i)}Cu(e){const n=pG(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?ii.withCacheSize(this.cacheSizeBytes):ii.DEFAULT;return new SS(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,DG(),Wg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new XV}}class q_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>aD(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=pK.bind(null,this.syncEngine),await KG(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new YG})()}createDatastore(e){const n=Ky(e.databaseInfo.databaseId),i=(function(o){return new xG(o)})(e.databaseInfo);return(function(o,l,c,f){return new MG(o,l,c,f)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,r,o,l,c){return new VG(i,r,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>aD(this.syncEngine,n,0)),(function(){return tD.v()?new tD:new CG})())}createSyncEngine(e,n){return(function(r,o,l,c,f,d,p){const y=new rK(r,o,l,c,f,d);return p&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=qe(n);me(tu,"RemoteStore shutting down."),i.Ea.add(5),await wm(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}q_.provider={build:()=>new q_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vK{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="FirestoreClient";class EK{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ci.UNAUTHENTICATED,this.clientId=nS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{me(Ra,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(me(Ra,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ro;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=PS(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function UE(t,e){t.asyncQueue.verifyOperationInProgress(),me(Ra,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async r=>{i.isEqual(r)||(await ZV(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function uD(t,e){t.asyncQueue.verifyOperationInProgress();const n=await TK(t);me(Ra,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>iD(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,r)=>iD(e.remoteStore,r))),t._onlineComponents=e}async function TK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(Ra,"Using user provided OfflineComponentProvider");try{await UE(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ae.FAILED_PRECONDITION||r.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;Md("Error using user provided cache. Falling back to memory cache: "+n),await UE(t,new Gd)}}else me(Ra,"Using default OfflineComponentProvider"),await UE(t,new _K(void 0));return t._offlineComponents}async function gL(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(Ra,"Using user provided OnlineComponentProvider"),await uD(t,t._uninitializedComponentsProvider._online)):(me(Ra,"Using default OnlineComponentProvider"),await uD(t,new q_))),t._onlineComponents}function bK(t){return gL(t).then((e=>e.syncEngine))}async function wK(t){const e=await gL(t),n=e.eventManager;return n.onListen=sK.bind(null,e.syncEngine),n.onUnlisten=lK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uK.bind(null,e.syncEngine),n}function SK(t,e,n={}){const i=new ro;return t.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,f,d){const p=new vK({next:v=>{p.Nu(),l.enqueueAndForget((()=>QG(o,y))),v.fromCache&&f.source==="server"?d.reject(new Ee(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),y=new eK(c,p,{includeMetadataChanges:!0,qa:!0});return ZG(o,y)})(await wK(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _L(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CK="firestore.googleapis.com",hD=!0;class fD{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CK,this.ssl=hD}else this.host=e.host,this.ssl=e.ssl??hD;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=zV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BV)throw new Ee(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_L(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ee(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class VS{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fD({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fD(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new l$;switch(i.type){case"firstParty":return new h$(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ee(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=cD.get(n);i&&(me("ComponentProvider","Removing Datastore"),cD.delete(n),i.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ch(this.firestore,e,this._query)}}class qn{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ea(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}toJSON(){return{type:qn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(_m(n,qn._jsonSchema))return new qn(e,i||null,new be(_t.fromString(n.referencePath)))}}qn._jsonSchemaVersion="firestore/documentReference/1.0",qn._jsonSchema={type:Cn("string",qn._jsonSchemaVersion),referencePath:Cn("string")};class Ea extends Ch{constructor(e,n,i){super(e,n,dS(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new be(e))}withConverter(e){return new Ea(this.firestore,e,this._path)}}function Kd(t,e,...n){if(t=On(t),Ck("collection","path",e),t instanceof VS){const i=_t.fromString(e,...n);return n2(i),new Ea(t,null,i)}{if(!(t instanceof qn||t instanceof Ea))throw new Ee(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(_t.fromString(e,...n));return n2(i),new Ea(t.firestore,null,i)}}function LS(t,e,...n){if(t=On(t),arguments.length===1&&(e=nS.newId()),Ck("doc","path",e),t instanceof VS){const i=_t.fromString(e,...n);return t2(i),new qn(t,null,new be(i))}{if(!(t instanceof qn||t instanceof Ea))throw new Ee(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(_t.fromString(e,...n));return t2(i),new qn(t.firestore,t instanceof Ea?t.converter:null,new be(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD="AsyncQueue";class mD{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new JV(this,"async_queue_retry"),this._c=()=>{const i=Wg();i&&me(dD,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Wg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Wg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ro;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ma(e))throw e;me(dD,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,hi("INTERNAL UNHANDLED ERROR: ",pD(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=NS.createAndSchedule(this,e,n,i,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&Ae(47125,{Pc:pD(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function pD(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AK=-1;class Yy extends VS{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new mD,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mD(e),this._firestoreClient=void 0,await e}}}function IK(t,e,n){n||(n=P_);const i=yy(t,"firestore");if(i.isInitialized(n)){const r=i.getImmediate({identifier:n}),o=i.getOptions(n);if(Ta(o,e))return r;throw new Ee(ae.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Ee(ae.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BV)throw new Ee(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Pa(e.host)&&uw(e.host),i.initialize({options:e,instanceIdentifier:n})}function yL(t){if(t._terminated)throw new Ee(ae.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||RK(t),t._firestoreClient}function RK(t){const e=t._freezeSettings(),n=(function(r,o,l,c){return new Q$(r,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,_L(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new EK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(r){const o=r?._online.build();return{_offline:r?._offline.build(o),_online:o}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fr(Rn.fromBase64String(e))}catch(n){throw new Ee(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new fr(Rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_m(e,fr._jsonSchema))return fr.fromBase64String(e.bytes)}}fr._jsonSchemaVersion="firestore/bytes/1.0",fr._jsonSchema={type:Cn("string",fr._jsonSchemaVersion),bytes:Cn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ee(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ee(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ee(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bs._jsonSchemaVersion}}static fromJSON(e){if(_m(e,bs._jsonSchema))return new bs(e.latitude,e.longitude)}}bs._jsonSchemaVersion="firestore/geoPoint/1.0",bs._jsonSchema={type:Cn("string",bs._jsonSchemaVersion),latitude:Cn("number"),longitude:Cn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ws._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_m(e,ws._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ws(e.vectorValues);throw new Ee(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ws._jsonSchemaVersion="firestore/vectorValue/1.0",ws._jsonSchema={type:Cn("string",ws._jsonSchemaVersion),vectorValues:Cn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xK=/^__.*__$/;class DK{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ka(e,this.data,this.fieldMask,n,this.fieldTransforms):new wh(e,this.data,n,this.fieldTransforms)}}function vL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:t})}}class FS{constructor(e,n,i,r,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new FS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){const n=this.path?.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $_(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(vL(this.Ac)&&xK.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class NK{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Ky(e)}Cc(e,n,i,r=!1){return new FS({Ac:e,methodName:n,Dc:i,path:Yt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function EL(t){const e=t._freezeSettings(),n=Ky(t._databaseId);return new NK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function PK(t,e,n,i,r,o={}){const l=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);wL("Data must be an object, but it was:",l,i);const c=TL(i,l);let f,d;if(o.merge)f=new pr(l.fieldMask),d=l.fieldTransforms;else if(o.mergeFields){const p=[];for(const y of o.mergeFields){const v=MK(e,y,n);if(!l.contains(v))throw new Ee(ae.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);VK(p,v)||p.push(v)}f=new pr(p),d=l.fieldTransforms.filter((y=>f.covers(y.field)))}else f=null,d=l.fieldTransforms;return new DK(new Ai(c),f,d)}class jS extends US{_toFieldTransform(e){return new pV(e.path,new ih)}isEqual(e){return e instanceof jS}}function OK(t,e,n,i=!1){return BS(n,t.Cc(i?4:3,e))}function BS(t,e){if(bL(t=On(t)))return wL("Unsupported field value:",e,t),TL(t,e);if(t instanceof US)return(function(i,r){if(!vL(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const c of i){let f=BS(c,r.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}})(t,e)}return(function(i,r){if((i=On(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return _H(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Et.fromDate(i);return{timestampValue:oh(r.serializer,o)}}if(i instanceof Et){const o=new Et(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:oh(r.serializer,o)}}if(i instanceof bs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof fr)return{bytesValue:bV(r.serializer,i._byteString)};if(i instanceof qn){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:vS(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ws)return(function(l,c){return{mapValue:{fields:{[cS]:{stringValue:hS},[Jc]:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return mS(c.serializer,d)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${Ny(i)}`)})(t,e)}function TL(t,e){const n={};return jk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cu(t,((i,r)=>{const o=BS(r,e.mc(i));o!=null&&(n[i]=o)})),{mapValue:{fields:n}}}function bL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Et||t instanceof bs||t instanceof fr||t instanceof qn||t instanceof US||t instanceof ws)}function wL(t,e,n){if(!bL(n)||!Ak(n)){const i=Ny(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function MK(t,e,n){if((e=On(e))instanceof zS)return e._internalPath;if(typeof e=="string")return SL(t,e);throw $_("Field path arguments must be of type string or ",t,!1,void 0,n)}const kK=new RegExp("[~\\*/\\[\\]]");function SL(t,e,n){if(e.search(kK)>=0)throw $_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new zS(...e.split("."))._internalPath}catch{throw $_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $_(t,e,n,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${i}`),l&&(f+=` in document ${r}`),f+=")"),new Ee(ae.INVALID_ARGUMENT,c+t+f)}function VK(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class LK extends CL{data(){return super.data()}}function qS(t,e){return typeof e=="string"?SL(t,e):e instanceof zS?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zK(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $S{}class UK extends $S{}function FK(t,e,...n){let i=[];e instanceof $S&&i.push(e),i=i.concat(n),(function(o){const l=o.filter((f=>f instanceof HS)).length,c=o.filter((f=>f instanceof Zy)).length;if(l>1||l>0&&c>0)throw new Ee(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)t=r._apply(t);return t}class Zy extends UK{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Zy(e,n,i)}_apply(e){const n=this._parse(e);return AL(e._query,n),new Ch(e.firestore,e.converter,nb(e._query,n))}_parse(e){const n=EL(e.firestore);return(function(o,l,c,f,d,p,y){let v;if(d.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new Ee(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){_D(y,p);const S=[];for(const N of y)S.push(gD(f,o,N));v={arrayValue:{values:S}}}else v=gD(f,o,y)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||_D(y,p),v=OK(c,l,y,p==="in"||p==="not-in");return lt.create(d,p,v)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function jK(t,e,n){const i=e,r=qS("where",t);return Zy._create(r,i,n)}class HS extends $S{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new HS(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ct.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,o){let l=r;const c=o.getFlattenedFilters();for(const f of c)AL(l,f),l=nb(l,f)})(e._query,n),new Ch(e.firestore,e.converter,nb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function gD(t,e,n){if(typeof(n=On(n))=="string"){if(n==="")throw new Ee(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rV(e)&&n.indexOf("/")!==-1)throw new Ee(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(_t.fromString(n));if(!be.isDocumentKey(i))throw new Ee(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return qd(t,new be(i))}if(n instanceof qn)return qd(t,n._key);throw new Ee(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ny(n)}.`)}function _D(t,e){if(!Array.isArray(t)||t.length===0)throw new Ee(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AL(t,e){const n=(function(r,o){for(const l of r)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new Ee(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ee(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BK{convertValue(e,n="none"){switch(Ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(po(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return cu(e,((r,o)=>{i[r]=this.convertValue(o,n)})),i}convertVectorValue(e){const n=e.fields?.[Jc].arrayValue?.values?.map((i=>Ht(i.doubleValue)));return new ws(n)}convertGeoPoint(e){return new bs(Ht(e.latitude),Ht(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Ly(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(jd(e));default:return null}}convertTimestamp(e){const n=mo(e);return new Et(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=_t.fromString(e);xe(PV(i),9688,{name:e});const r=new Zl(i.get(1),i.get(3)),o=new be(i.popFirst(5));return r.isEqual(n)||hi(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qK(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class pg{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Lc extends CL{constructor(e,n,i,r,o,l){super(e,n,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(qS("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Lc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Lc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Lc._jsonSchema={type:Cn("string",Lc._jsonSchemaVersion),bundleSource:Cn("string","DocumentSnapshot"),bundleName:Cn("string"),bundle:Cn("string")};class Yg extends Lc{data(e={}){return super.data(e)}}class zc{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new pg(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new Yg(this._firestore,this._userDataWriter,i.key,i,new pg(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ee(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((c=>{const f=new Yg(r._firestore,r._userDataWriter,c.doc.key,c.doc,new pg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const f=new Yg(r._firestore,r._userDataWriter,c.doc.key,c.doc,new pg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,p=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),p=l.indexOf(c.doc.key)),{type:$K(c.type),doc:f,oldIndex:d,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ee(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $K(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:t})}}zc._jsonSchemaVersion="firestore/querySnapshot/1.0",zc._jsonSchema={type:Cn("string",zc._jsonSchemaVersion),bundleSource:Cn("string","QuerySnapshot"),bundleName:Cn("string"),bundle:Cn("string")};class HK extends BK{constructor(e){super(),this.firestore=e}convertBytes(e){return new fr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,n)}}function GS(t){t=I_(t,Ch);const e=I_(t.firestore,Yy),n=yL(e),i=new HK(e);return zK(t._query),SK(n,t._query).then((r=>new zc(e,i,t,r)))}function IL(t){return xL(I_(t.firestore,Yy),[new By(t._key,Ri.none())])}function RL(t,e){const n=I_(t.firestore,Yy),i=LS(t),r=qK(t.converter,e);return xL(n,[PK(EL(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Ri.exists(!1))]).then((()=>i))}function xL(t,e){return(function(i,r){const o=new ro;return i.asyncQueue.enqueueAndForget((async()=>cK(await bK(i),r,o))),o.promise})(yL(t),e)}class GK{constructor(e){let n;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),n=e.tabManager):(n=YK(void 0),n._initialize(e)),this._onlineComponentProvider=n._onlineComponentProvider,this._offlineComponentProvider=n._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function KK(t){return new GK(t)}class WK{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=q_.provider,this._offlineComponentProvider={build:n=>new yK(n,e?.cacheSizeBytes,this.forceOwnership)}}}function YK(t){return new WK(t?.forceOwnership)}function ZK(){return new jS("serverTimestamp")}(function(e,n=!0){(function(r){bh=r})(ou),ql(new ba("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),c=new Yy(new u$(i.getProvider("auth-internal")),new f$(l,i.getProvider("app-check-internal")),(function(d,p){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ee(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zl(d.options.projectId,p)})(l,r),l);return o={useFetchStreams:n,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),vs(Qx,Xx,e),vs(Qx,Xx,"esm2020")})();const QK={apiKey:"AIzaSyDohDZ_1IPsjgOhyzw_2dRMWAkObxE4WV4",authDomain:"project-test-d89c4.firebaseapp.com",databaseURL:"https://project-test-d89c4-default-rtdb.europe-west1.firebasedatabase.app",projectId:"project-test-d89c4",storageBucket:"project-test-d89c4.firebasestorage.app",messagingSenderId:"829539787895",appId:"1:829539787895:web:7ab849b09811e70c265272",measurementId:"G-TJHM6BSH1H"},KS=AO(QK),XK=s$(KS),yD=n7(KS);K7(XK,lk).then(()=>{console.log("Auth persistence set to 'localStorage'")}).catch(t=>{console.error("Failed to set persistence:",t)});const zl=IK(KS,{localCache:KK({cacheSizeBytes:AK})});console.log("Firebase initialized successfully");console.log("Offline persistence enabled (via localCache)");const JK=()=>{const[t,e]=A.useState(0),n=A.useRef(t);return A.useEffect(()=>{const i=Math.random().toString(36).substring(2),r=Nx(yD,`activeSessions/${i}`);Px(r,{connectedAt:o7()}),G8(r).remove();const o=Nx(yD,"activeSessions"),l=W8(o,c=>{const f=c.val(),d=f?Object.keys(f).length:0;d!==n.current&&(n.current=d,e(d))});return()=>{l(),Px(r,null).catch(console.error)}},[]),t},WS=A.createContext({});function YS(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const ZS=typeof window<"u",DL=ZS?A.useLayoutEffect:A.useEffect,Qy=A.createContext(null);function QS(t,e){t.indexOf(e)===-1&&t.push(e)}function XS(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const go=(t,e,n)=>n>e?e:n<t?t:n;let JS=()=>{};const _o={},NL=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function PL(t){return typeof t=="object"&&t!==null}const OL=t=>/^0[^.\s]+$/u.test(t);function e1(t){let e;return()=>(e===void 0&&(e=t()),e)}const yr=t=>t,eW=(t,e)=>n=>e(t(n)),Am=(...t)=>t.reduce(eW),Wd=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class t1{constructor(){this.subscriptions=[]}add(e){return QS(this.subscriptions,e),()=>XS(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const l=this.subscriptions[o];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ss=t=>t*1e3,gr=t=>t/1e3;function ML(t,e){return e?t*(1e3/e):0}const kL=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,tW=1e-7,nW=12;function iW(t,e,n,i,r){let o,l,c=0;do l=e+(n-e)/2,o=kL(l,i,r)-t,o>0?n=l:e=l;while(Math.abs(o)>tW&&++c<nW);return l}function Im(t,e,n,i){if(t===e&&n===i)return yr;const r=o=>iW(o,0,1,t,n);return o=>o===0||o===1?o:kL(r(o),e,i)}const VL=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,LL=t=>e=>1-t(1-e),zL=Im(.33,1.53,.69,.99),n1=LL(zL),UL=VL(n1),FL=t=>(t*=2)<1?.5*n1(t):.5*(2-Math.pow(2,-10*(t-1))),i1=t=>1-Math.sin(Math.acos(t)),jL=LL(i1),BL=VL(i1),rW=Im(.42,0,1,1),sW=Im(0,0,.58,1),qL=Im(.42,0,.58,1),oW=t=>Array.isArray(t)&&typeof t[0]!="number",$L=t=>Array.isArray(t)&&typeof t[0]=="number",aW={linear:yr,easeIn:rW,easeInOut:qL,easeOut:sW,circIn:i1,circInOut:BL,circOut:jL,backIn:n1,backInOut:UL,backOut:zL,anticipate:FL},lW=t=>typeof t=="string",vD=t=>{if($L(t)){JS(t.length===4);const[e,n,i,r]=t;return Im(e,n,i,r)}else if(lW(t))return aW[t];return t},gg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function uW(t,e){let n=new Set,i=new Set,r=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(p){l.has(p)&&(d.schedule(p),t()),p(c)}const d={schedule:(p,y=!1,v=!1)=>{const S=v&&r?n:i;return y&&l.add(p),S.has(p)||S.add(p),p},cancel:p=>{i.delete(p),l.delete(p)},process:p=>{if(c=p,r){o=!0;return}r=!0,[n,i]=[i,n],n.forEach(f),n.clear(),r=!1,o&&(o=!1,d.process(p))}};return d}const cW=40;function HL(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=gg.reduce((k,K)=>(k[K]=uW(o),k),{}),{setup:c,read:f,resolveKeyframes:d,preUpdate:p,update:y,preRender:v,render:w,postRender:S}=l,N=()=>{const k=_o.useManualTiming?r.timestamp:performance.now();n=!1,_o.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(k-r.timestamp,cW),1)),r.timestamp=k,r.isProcessing=!0,c.process(r),f.process(r),d.process(r),p.process(r),y.process(r),v.process(r),w.process(r),S.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(N))},O=()=>{n=!0,i=!0,r.isProcessing||t(N)};return{schedule:gg.reduce((k,K)=>{const H=l[K];return k[K]=(ie,x=!1,I=!1)=>(n||O(),H.schedule(ie,x,I)),k},{}),cancel:k=>{for(let K=0;K<gg.length;K++)l[gg[K]].cancel(k)},state:r,steps:l}}const{schedule:Gt,cancel:xa,state:Zn,steps:FE}=HL(typeof requestAnimationFrame<"u"?requestAnimationFrame:yr,!0);let Zg;function hW(){Zg=void 0}const xi={now:()=>(Zg===void 0&&xi.set(Zn.isProcessing||_o.useManualTiming?Zn.timestamp:performance.now()),Zg),set:t=>{Zg=t,queueMicrotask(hW)}},GL=t=>e=>typeof e=="string"&&e.startsWith(t),r1=GL("--"),fW=GL("var(--"),s1=t=>fW(t)?dW.test(t.split("/*")[0].trim()):!1,dW=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ah={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Yd={...Ah,transform:t=>go(0,1,t)},_g={...Ah,default:1},pd=t=>Math.round(t*1e5)/1e5,o1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function mW(t){return t==null}const pW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,a1=(t,e)=>n=>!!(typeof n=="string"&&pW.test(n)&&n.startsWith(t)||e&&!mW(n)&&Object.prototype.hasOwnProperty.call(n,e)),KL=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,l,c]=i.match(o1);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},gW=t=>go(0,255,t),jE={...Ah,transform:t=>Math.round(gW(t))},Nl={test:a1("rgb","red"),parse:KL("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+jE.transform(t)+", "+jE.transform(e)+", "+jE.transform(n)+", "+pd(Yd.transform(i))+")"};function _W(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const pb={test:a1("#"),parse:_W,transform:Nl.transform},Rm=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),oa=Rm("deg"),Cs=Rm("%"),Le=Rm("px"),yW=Rm("vh"),vW=Rm("vw"),ED={...Cs,parse:t=>Cs.parse(t)/100,transform:t=>Cs.transform(t*100)},Sc={test:a1("hsl","hue"),parse:KL("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Cs.transform(pd(e))+", "+Cs.transform(pd(n))+", "+pd(Yd.transform(i))+")"},wn={test:t=>Nl.test(t)||pb.test(t)||Sc.test(t),parse:t=>Nl.test(t)?Nl.parse(t):Sc.test(t)?Sc.parse(t):pb.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Nl.transform(t):Sc.transform(t),getAnimatableNone:t=>{const e=wn.parse(t);return e.alpha=0,wn.transform(e)}},EW=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function TW(t){return isNaN(t)&&typeof t=="string"&&(t.match(o1)?.length||0)+(t.match(EW)?.length||0)>0}const WL="number",YL="color",bW="var",wW="var(",TD="${}",SW=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Zd(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const c=e.replace(SW,f=>(wn.test(f)?(i.color.push(o),r.push(YL),n.push(wn.parse(f))):f.startsWith(wW)?(i.var.push(o),r.push(bW),n.push(f)):(i.number.push(o),r.push(WL),n.push(parseFloat(f))),++o,TD)).split(TD);return{values:n,split:c,indexes:i,types:r}}function ZL(t){return Zd(t).values}function QL(t){const{split:e,types:n}=Zd(t),i=e.length;return r=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],r[l]!==void 0){const c=n[l];c===WL?o+=pd(r[l]):c===YL?o+=wn.transform(r[l]):o+=r[l]}return o}}const CW=t=>typeof t=="number"?0:wn.test(t)?wn.getAnimatableNone(t):t;function AW(t){const e=ZL(t);return QL(t)(e.map(CW))}const Da={test:TW,parse:ZL,createTransformer:QL,getAnimatableNone:AW};function BE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function IW({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,l=0;if(!e)r=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,f=2*n-c;r=BE(f,c,t+1/3),o=BE(f,c,t),l=BE(f,c,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function H_(t,e){return n=>n>0?e:t}const Zt=(t,e,n)=>t+(e-t)*n,qE=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},RW=[pb,Nl,Sc],xW=t=>RW.find(e=>e.test(t));function bD(t){const e=xW(t);if(!e)return!1;let n=e.parse(t);return e===Sc&&(n=IW(n)),n}const wD=(t,e)=>{const n=bD(t),i=bD(e);if(!n||!i)return H_(t,e);const r={...n};return o=>(r.red=qE(n.red,i.red,o),r.green=qE(n.green,i.green,o),r.blue=qE(n.blue,i.blue,o),r.alpha=Zt(n.alpha,i.alpha,o),Nl.transform(r))},gb=new Set(["none","hidden"]);function DW(t,e){return gb.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function NW(t,e){return n=>Zt(t,e,n)}function l1(t){return typeof t=="number"?NW:typeof t=="string"?s1(t)?H_:wn.test(t)?wD:MW:Array.isArray(t)?XL:typeof t=="object"?wn.test(t)?wD:PW:H_}function XL(t,e){const n=[...t],i=n.length,r=t.map((o,l)=>l1(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)n[l]=r[l](o);return n}}function PW(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=l1(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function OW(t,e){const n=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const o=e.types[r],l=t.indexes[o][i[o]],c=t.values[l]??0;n[r]=c,i[o]++}return n}const MW=(t,e)=>{const n=Da.createTransformer(e),i=Zd(t),r=Zd(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?gb.has(t)&&!r.values.length||gb.has(e)&&!i.values.length?DW(t,e):Am(XL(OW(i,r),r.values),n):H_(t,e)};function JL(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Zt(t,e,n):l1(t)(t,e)}const kW=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Gt.update(e,n),stop:()=>xa(e),now:()=>Zn.isProcessing?Zn.timestamp:xi.now()}},e4=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=Math.round(t(o/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},G_=2e4;function u1(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<G_;)e+=n,i=t.next(e);return e>=G_?1/0:e}function VW(t,e=100,n){const i=n({...t,keyframes:[0,e]}),r=Math.min(u1(i),G_);return{type:"keyframes",ease:o=>i.next(r*o).value/e,duration:gr(r)}}const LW=5;function t4(t,e,n){const i=Math.max(e-LW,0);return ML(n-t(i),e-i)}const tn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$E=.001;function zW({duration:t=tn.duration,bounce:e=tn.bounce,velocity:n=tn.velocity,mass:i=tn.mass}){let r,o,l=1-e;l=go(tn.minDamping,tn.maxDamping,l),t=go(tn.minDuration,tn.maxDuration,gr(t)),l<1?(r=d=>{const p=d*l,y=p*t,v=p-n,w=_b(d,l),S=Math.exp(-y);return $E-v/w*S},o=d=>{const y=d*l*t,v=y*n+n,w=Math.pow(l,2)*Math.pow(d,2)*t,S=Math.exp(-y),N=_b(Math.pow(d,2),l);return(-r(d)+$E>0?-1:1)*((v-w)*S)/N}):(r=d=>{const p=Math.exp(-d*t),y=(d-n)*t+1;return-$E+p*y},o=d=>{const p=Math.exp(-d*t),y=(n-d)*(t*t);return p*y});const c=5/t,f=FW(r,o,c);if(t=Ss(t),isNaN(f))return{stiffness:tn.stiffness,damping:tn.damping,duration:t};{const d=Math.pow(f,2)*i;return{stiffness:d,damping:l*2*Math.sqrt(i*d),duration:t}}}const UW=12;function FW(t,e,n){let i=n;for(let r=1;r<UW;r++)i=i-t(i)/e(i);return i}function _b(t,e){return t*Math.sqrt(1-e*e)}const jW=["duration","bounce"],BW=["stiffness","damping","mass"];function SD(t,e){return e.some(n=>t[n]!==void 0)}function qW(t){let e={velocity:tn.velocity,stiffness:tn.stiffness,damping:tn.damping,mass:tn.mass,isResolvedFromDuration:!1,...t};if(!SD(t,BW)&&SD(t,jW))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*go(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:tn.mass,stiffness:r,damping:o}}else{const n=zW(t);e={...e,...n,mass:tn.mass},e.isResolvedFromDuration=!0}return e}function K_(t=tn.visualDuration,e=tn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:f,damping:d,mass:p,duration:y,velocity:v,isResolvedFromDuration:w}=qW({...n,velocity:-gr(n.velocity||0)}),S=v||0,N=d/(2*Math.sqrt(f*p)),O=l-o,j=gr(Math.sqrt(f/p)),V=Math.abs(O)<5;i||(i=V?tn.restSpeed.granular:tn.restSpeed.default),r||(r=V?tn.restDelta.granular:tn.restDelta.default);let k;if(N<1){const H=_b(j,N);k=ie=>{const x=Math.exp(-N*j*ie);return l-x*((S+N*j*O)/H*Math.sin(H*ie)+O*Math.cos(H*ie))}}else if(N===1)k=H=>l-Math.exp(-j*H)*(O+(S+j*O)*H);else{const H=j*Math.sqrt(N*N-1);k=ie=>{const x=Math.exp(-N*j*ie),I=Math.min(H*ie,300);return l-x*((S+N*j*O)*Math.sinh(I)+H*O*Math.cosh(I))/H}}const K={calculatedDuration:w&&y||null,next:H=>{const ie=k(H);if(w)c.done=H>=y;else{let x=H===0?S:0;N<1&&(x=H===0?Ss(S):t4(k,H,ie));const I=Math.abs(x)<=i,P=Math.abs(l-ie)<=r;c.done=I&&P}return c.value=c.done?l:ie,c},toString:()=>{const H=Math.min(u1(K),G_),ie=e4(x=>K.next(H*x).value,H,30);return H+"ms "+ie},toTransition:()=>{}};return K}K_.applyToOptions=t=>{const e=VW(t,100,K_);return t.ease=e.ease,t.duration=Ss(e.duration),t.type="keyframes",t};function yb({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:f,restDelta:d=.5,restSpeed:p}){const y=t[0],v={done:!1,value:y},w=I=>c!==void 0&&I<c||f!==void 0&&I>f,S=I=>c===void 0?f:f===void 0||Math.abs(c-I)<Math.abs(f-I)?c:f;let N=n*e;const O=y+N,j=l===void 0?O:l(O);j!==O&&(N=j-y);const V=I=>-N*Math.exp(-I/i),k=I=>j+V(I),K=I=>{const P=V(I),F=k(I);v.done=Math.abs(P)<=d,v.value=v.done?j:F};let H,ie;const x=I=>{w(v.value)&&(H=I,ie=K_({keyframes:[v.value,S(v.value)],velocity:t4(k,I,v.value),damping:r,stiffness:o,restDelta:d,restSpeed:p}))};return x(0),{calculatedDuration:null,next:I=>{let P=!1;return!ie&&H===void 0&&(P=!0,K(I),x(I)),H!==void 0&&I>=H?ie.next(I-H):(!P&&K(I),v)}}}function $W(t,e,n){const i=[],r=n||_o.mix||JL,o=t.length-1;for(let l=0;l<o;l++){let c=r(t[l],t[l+1]);if(e){const f=Array.isArray(e)?e[l]||yr:e;c=Am(f,c)}i.push(c)}return i}function HW(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(JS(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=$W(e,i,r),f=c.length,d=p=>{if(l&&p<t[0])return e[0];let y=0;if(f>1)for(;y<t.length-2&&!(p<t[y+1]);y++);const v=Wd(t[y],t[y+1],p);return c[y](v)};return n?p=>d(go(t[0],t[o-1],p)):d}function GW(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Wd(0,e,i);t.push(Zt(n,1,r))}}function KW(t){const e=[0];return GW(e,t.length-1),e}function WW(t,e){return t.map(n=>n*e)}function YW(t,e){return t.map(()=>e||qL).splice(0,t.length-1)}function gd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=oW(i)?i.map(vD):vD(i),o={done:!1,value:e[0]},l=WW(n&&n.length===e.length?n:KW(e),t),c=HW(l,e,{ease:Array.isArray(r)?r:YW(e,r)});return{calculatedDuration:t,next:f=>(o.value=c(f),o.done=f>=t,o)}}const ZW=t=>t!==null;function c1(t,{repeat:e,repeatType:n="loop"},i,r=1){const o=t.filter(ZW),c=r<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!c||i===void 0?o[c]:i}const QW={decay:yb,inertia:yb,tween:gd,keyframes:gd,spring:K_};function n4(t){typeof t.type=="string"&&(t.type=QW[t.type])}class h1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const XW=t=>t/100;class f1 extends h1{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==xi.now()&&this.tick(xi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;n4(e);const{type:n=gd,repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:l=0}=e;let{keyframes:c}=e;const f=n||gd;f!==gd&&typeof c[0]!="number"&&(this.mixKeyframes=Am(XW,JL(c[0],c[1])),c=[0,100]);const d=f({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...c].reverse(),velocity:-l})),d.calculatedDuration===null&&(d.calculatedDuration=u1(d));const{calculatedDuration:p}=d;this.calculatedDuration=p,this.resolvedDuration=p+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:r,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return i.next(0);const{delay:d=0,keyframes:p,repeat:y,repeatType:v,repeatDelay:w,type:S,onUpdate:N,finalKeyframe:O}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const j=this.currentTime-d*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?j<0:j>r;this.currentTime=Math.max(j,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let k=this.currentTime,K=i;if(y){const I=Math.min(this.currentTime,r)/c;let P=Math.floor(I),F=I%1;!F&&I>=1&&(F=1),F===1&&P--,P=Math.min(P,y+1),!!(P%2)&&(v==="reverse"?(F=1-F,w&&(F-=w/c)):v==="mirror"&&(K=l)),k=go(0,1,F)*c}const H=V?{done:!1,value:p[0]}:K.next(k);o&&(H.value=o(H.value));let{done:ie}=H;!V&&f!==null&&(ie=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const x=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ie);return x&&S!==yb&&(H.value=c1(p,this.options,O,this.speed)),N&&N(H.value),x&&this.finish(),H}then(e,n){return this.finished.then(e,n)}get duration(){return gr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+gr(e)}get time(){return gr(this.currentTime)}set time(e){e=Ss(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(xi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=gr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=kW,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(xi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function JW(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Pl=t=>t*180/Math.PI,vb=t=>{const e=Pl(Math.atan2(t[1],t[0]));return Eb(e)},eY={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:vb,rotateZ:vb,skewX:t=>Pl(Math.atan(t[1])),skewY:t=>Pl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Eb=t=>(t=t%360,t<0&&(t+=360),t),CD=vb,AD=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),ID=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),tY={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:AD,scaleY:ID,scale:t=>(AD(t)+ID(t))/2,rotateX:t=>Eb(Pl(Math.atan2(t[6],t[5]))),rotateY:t=>Eb(Pl(Math.atan2(-t[2],t[0]))),rotateZ:CD,rotate:CD,skewX:t=>Pl(Math.atan(t[4])),skewY:t=>Pl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Tb(t){return t.includes("scale")?1:0}function bb(t,e){if(!t||t==="none")return Tb(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(n)i=tY,r=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=eY,r=c}if(!r)return Tb(e);const o=i[e],l=r[1].split(",").map(iY);return typeof o=="function"?o(l):l[o]}const nY=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return bb(n,e)};function iY(t){return parseFloat(t.trim())}const Ih=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Rh=new Set(Ih),RD=t=>t===Ah||t===Le,rY=new Set(["x","y","z"]),sY=Ih.filter(t=>!rY.has(t));function oY(t){const e=[];return sY.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Ul={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>bb(e,"x"),y:(t,{transform:e})=>bb(e,"y")};Ul.translateX=Ul.x;Ul.translateY=Ul.y;const Fl=new Set;let wb=!1,Sb=!1,Cb=!1;function i4(){if(Sb){const t=Array.from(Fl).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=oY(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,l])=>{i.getValue(o)?.set(l)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Sb=!1,wb=!1,Fl.forEach(t=>t.complete(Cb)),Fl.clear()}function r4(){Fl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Sb=!0)})}function aY(){Cb=!0,r4(),i4(),Cb=!1}class d1{constructor(e,n,i,r,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Fl.add(this),wb||(wb=!0,Gt.read(r4),Gt.resolveKeyframes(i4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;if(e[0]===null){const o=r?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&n){const c=i.readValue(n,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),r&&o===void 0&&r.set(e[0])}JW(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Fl.delete(this)}cancel(){this.state==="scheduled"&&(Fl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const lY=t=>t.startsWith("--");function uY(t,e,n){lY(e)?t.style.setProperty(e,n):t.style[e]=n}const cY=e1(()=>window.ScrollTimeline!==void 0),hY={};function fY(t,e){const n=e1(t);return()=>hY[e]??n()}const s4=fY(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Qf=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,xD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qf([0,.65,.55,1]),circOut:Qf([.55,0,1,.45]),backIn:Qf([.31,.01,.66,-.59]),backOut:Qf([.33,1.53,.69,.99])};function o4(t,e){if(t)return typeof t=="function"?s4()?e4(t,e):"ease-out":$L(t)?Qf(t):Array.isArray(t)?t.map(n=>o4(n,e)||xD.easeOut):xD[t]}function dY(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:f}={},d=void 0){const p={[e]:n};f&&(p.offset=f);const y=o4(c,r);Array.isArray(y)&&(p.easing=y);const v={delay:i,duration:r,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return d&&(v.pseudoElement=d),t.animate(p,v)}function a4(t){return typeof t=="function"&&"applyToOptions"in t}function mY({type:t,...e}){return a4(t)&&s4()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class pY extends h1{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:r,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:f}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,JS(typeof e.type!="string");const d=mY(e);this.animation=dY(n,i,r,d,o),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const p=c1(r,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(p):uY(n,i,p),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return gr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+gr(e)}get time(){return gr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ss(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&cY()?(this.animation.timeline=e,yr):n(this)}}const l4={anticipate:FL,backInOut:UL,circInOut:BL};function gY(t){return t in l4}function _Y(t){typeof t.ease=="string"&&gY(t.ease)&&(t.ease=l4[t.ease])}const DD=10;class yY extends pY{constructor(e){_Y(e),n4(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:r,element:o,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new f1({...l,autoplay:!1}),f=Ss(this.finishedTime??this.time);n.setWithVelocity(c.sample(f-DD).value,c.sample(f).value,DD),c.stop()}}const ND=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Da.test(t)||t==="0")&&!t.startsWith("url("));function vY(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function EY(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=ND(r,e),c=ND(o,e);return!l||!c?!1:vY(t)||(n==="spring"||a4(n))&&i}function Ab(t){t.duration=0,t.type="keyframes"}const TY=new Set(["opacity","clipPath","filter","transform"]),bY=e1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function wY(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:r,damping:o,type:l}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:d}=e.owner.getProps();return bY()&&n&&TY.has(n)&&(n!=="transform"||!d)&&!f&&!i&&r!=="mirror"&&o!==0&&l!=="inertia"}const SY=40;class CY extends h1{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:f,motionValue:d,element:p,...y}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=xi.now();const v={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:l,name:f,motionValue:d,element:p,...y},w=p?.KeyframeResolver||d1;this.keyframeResolver=new w(c,(S,N,O)=>this.onKeyframesResolved(S,N,v,!O),f,d,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,r){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:f,isHandoff:d,onUpdate:p}=i;this.resolvedAt=xi.now(),EY(e,o,l,c)||((_o.instantAnimations||!f)&&p?.(c1(e,i,n)),e[0]=e[e.length-1],Ab(i),i.repeat=0);const v={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>SY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},w=!d&&wY(v)?new yY({...v,element:v.motionValue.owner.current}):new f1(v);w.finished.then(()=>this.notifyFinished()).catch(yr),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),aY()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const AY=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function IY(t){const e=AY.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function u4(t,e,n=1){const[i,r]=IY(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return NL(l)?parseFloat(l):l}return s1(r)?u4(r,e,n+1):r}function m1(t,e){return t?.[e]??t?.default??t}const c4=new Set(["width","height","top","left","right","bottom",...Ih]),RY={test:t=>t==="auto",parse:t=>t},h4=t=>e=>e.test(t),f4=[Ah,Le,Cs,oa,vW,yW,RY],PD=t=>f4.find(h4(t));function xY(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||OL(t):!0}const DY=new Set(["brightness","contrast","saturate","opacity"]);function NY(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(o1)||[];if(!i)return t;const r=n.replace(i,"");let o=DY.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const PY=/\b([a-z-]*)\(.*?\)/gu,Ib={...Da,getAnimatableNone:t=>{const e=t.match(PY);return e?e.map(NY).join(" "):t}},OD={...Ah,transform:Math.round},OY={rotate:oa,rotateX:oa,rotateY:oa,rotateZ:oa,scale:_g,scaleX:_g,scaleY:_g,scaleZ:_g,skew:oa,skewX:oa,skewY:oa,distance:Le,translateX:Le,translateY:Le,translateZ:Le,x:Le,y:Le,z:Le,perspective:Le,transformPerspective:Le,opacity:Yd,originX:ED,originY:ED,originZ:Le},p1={borderWidth:Le,borderTopWidth:Le,borderRightWidth:Le,borderBottomWidth:Le,borderLeftWidth:Le,borderRadius:Le,radius:Le,borderTopLeftRadius:Le,borderTopRightRadius:Le,borderBottomRightRadius:Le,borderBottomLeftRadius:Le,width:Le,maxWidth:Le,height:Le,maxHeight:Le,top:Le,right:Le,bottom:Le,left:Le,padding:Le,paddingTop:Le,paddingRight:Le,paddingBottom:Le,paddingLeft:Le,margin:Le,marginTop:Le,marginRight:Le,marginBottom:Le,marginLeft:Le,backgroundPositionX:Le,backgroundPositionY:Le,...OY,zIndex:OD,fillOpacity:Yd,strokeOpacity:Yd,numOctaves:OD},MY={...p1,color:wn,backgroundColor:wn,outlineColor:wn,fill:wn,stroke:wn,borderColor:wn,borderTopColor:wn,borderRightColor:wn,borderBottomColor:wn,borderLeftColor:wn,filter:Ib,WebkitFilter:Ib},d4=t=>MY[t];function m4(t,e){let n=d4(t);return n!==Ib&&(n=Da),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const kY=new Set(["auto","none","0"]);function VY(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!kY.has(o)&&Zd(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=m4(n,r)}class LY extends d1{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let d=e[f];if(typeof d=="string"&&(d=d.trim(),s1(d))){const p=u4(d,n.current);p!==void 0&&(e[f]=p),f===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!c4.has(i)||e.length!==2)return;const[r,o]=e,l=PD(r),c=PD(o);if(l!==c)if(RD(l)&&RD(c))for(let f=0;f<e.length;f++){const d=e[f];typeof d=="string"&&(e[f]=parseFloat(d))}else Ul[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||xY(e[r]))&&i.push(r);i.length&&VY(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ul[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=Ul[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,f])=>{e.getValue(c).set(f)}),this.resolveNoneKeyframes()}}function zY(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const r=n?.[t]??i.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const p4=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function g4(t){return PL(t)&&"offsetHeight"in t}const MD=30,UY=t=>!isNaN(parseFloat(t));class FY{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=xi.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=xi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=UY(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new t1);const i=this.events[e].add(n);return e==="change"?()=>{i(),Gt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=xi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MD)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,MD);return ML(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lh(t,e){return new FY(t,e)}const{schedule:g1}=HL(queueMicrotask,!1),Or={x:!1,y:!1};function _4(){return Or.x||Or.y}function jY(t){return t==="x"||t==="y"?Or[t]?null:(Or[t]=!0,()=>{Or[t]=!1}):Or.x||Or.y?null:(Or.x=Or.y=!0,()=>{Or.x=Or.y=!1})}function y4(t,e){const n=zY(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function kD(t){return!(t.pointerType==="touch"||_4())}function BY(t,e,n={}){const[i,r,o]=y4(t,n),l=c=>{if(!kD(c))return;const{target:f}=c,d=e(f,c);if(typeof d!="function"||!f)return;const p=y=>{kD(y)&&(d(y),f.removeEventListener("pointerleave",p))};f.addEventListener("pointerleave",p,r)};return i.forEach(c=>{c.addEventListener("pointerenter",l,r)}),o}const v4=(t,e)=>e?t===e?!0:v4(t,e.parentElement):!1,_1=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,qY=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function $Y(t){return qY.has(t.tagName)||t.tabIndex!==-1}const Qg=new WeakSet;function VD(t){return e=>{e.key==="Enter"&&t(e)}}function HE(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const HY=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=VD(()=>{if(Qg.has(n))return;HE(n,"down");const r=VD(()=>{HE(n,"up")}),o=()=>HE(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function LD(t){return _1(t)&&!_4()}function GY(t,e,n={}){const[i,r,o]=y4(t,n),l=c=>{const f=c.currentTarget;if(!LD(c))return;Qg.add(f);const d=e(f,c),p=(w,S)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),Qg.has(f)&&Qg.delete(f),LD(w)&&typeof d=="function"&&d(w,{success:S})},y=w=>{p(w,f===window||f===document||n.useGlobalTarget||v4(f,w.target))},v=w=>{p(w,!1)};window.addEventListener("pointerup",y,r),window.addEventListener("pointercancel",v,r)};return i.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,r),g4(c)&&(c.addEventListener("focus",d=>HY(d,r)),!$Y(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function E4(t){return PL(t)&&"ownerSVGElement"in t}function KY(t){return E4(t)&&t.tagName==="svg"}const ri=t=>!!(t&&t.getVelocity),WY=[...f4,wn,Da],YY=t=>WY.find(h4(t)),y1=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function zD(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ZY(...t){return e=>{let n=!1;const i=t.map(r=>{const o=zD(r,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let r=0;r<i.length;r++){const o=i[r];typeof o=="function"?o():zD(t[r],null)}}}}function QY(...t){return A.useCallback(ZY(...t),t)}class XY extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,r=g4(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=r-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function JY({children:t,isPresent:e,anchorX:n,root:i}){const r=A.useId(),o=A.useRef(null),l=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=A.useContext(y1),f=QY(o,t?.ref);return A.useInsertionEffect(()=>{const{width:d,height:p,top:y,left:v,right:w}=l.current;if(e||!o.current||!d||!p)return;const S=n==="left"?`left: ${v}`:`right: ${w}`;o.current.dataset.motionPopId=r;const N=document.createElement("style");c&&(N.nonce=c);const O=i??document.head;return O.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${p}px !important;
            ${S}px !important;
            top: ${y}px !important;
          }
        `),()=>{O.contains(N)&&O.removeChild(N)}},[e]),R.jsx(XY,{isPresent:e,childRef:o,sizeRef:l,children:A.cloneElement(t,{ref:f})})}const eZ=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:l,anchorX:c,root:f})=>{const d=YS(tZ),p=A.useId();let y=!0,v=A.useMemo(()=>(y=!1,{id:p,initial:e,isPresent:n,custom:r,onExitComplete:w=>{d.set(w,!0);for(const S of d.values())if(!S)return;i&&i()},register:w=>(d.set(w,!1),()=>d.delete(w))}),[n,d,i]);return o&&y&&(v={...v}),A.useMemo(()=>{d.forEach((w,S)=>d.set(S,!1))},[n]),A.useEffect(()=>{!n&&!d.size&&i&&i()},[n]),l==="popLayout"&&(t=R.jsx(JY,{isPresent:n,anchorX:c,root:f,children:t})),R.jsx(Qy.Provider,{value:v,children:t})};function tZ(){return new Map}function T4(t=!0){const e=A.useContext(Qy);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=A.useId();A.useEffect(()=>{if(t)return r(o)},[t]);const l=A.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,l]:[!0]}const yg=t=>t.key||"";function UD(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const nZ=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",root:f})=>{const[d,p]=T4(l),y=A.useMemo(()=>UD(t),[t]),v=l&&!d?[]:y.map(yg),w=A.useRef(!0),S=A.useRef(y),N=YS(()=>new Map),[O,j]=A.useState(y),[V,k]=A.useState(y);DL(()=>{w.current=!1,S.current=y;for(let ie=0;ie<V.length;ie++){const x=yg(V[ie]);v.includes(x)?N.delete(x):N.get(x)!==!0&&N.set(x,!1)}},[V,v.length,v.join("-")]);const K=[];if(y!==O){let ie=[...y];for(let x=0;x<V.length;x++){const I=V[x],P=yg(I);v.includes(P)||(ie.splice(x,0,I),K.push(I))}return o==="wait"&&K.length&&(ie=K),k(UD(ie)),j(y),null}const{forceRender:H}=A.useContext(WS);return R.jsx(R.Fragment,{children:V.map(ie=>{const x=yg(ie),I=l&&!d?!1:y===V||v.includes(x),P=()=>{if(N.has(x))N.set(x,!0);else return;let F=!0;N.forEach(L=>{L||(F=!1)}),F&&(H?.(),k(S.current),l&&p?.(),i&&i())};return R.jsx(eZ,{isPresent:I,initial:!w.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:o,root:f,onExitComplete:I?void 0:P,anchorX:c,children:ie},x)})})},b4=A.createContext({strict:!1}),FD={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},uh={};for(const t in FD)uh[t]={isEnabled:e=>FD[t].some(n=>!!e[n])};function iZ(t){for(const e in t)uh[e]={...uh[e],...t[e]}}const rZ=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function W_(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||rZ.has(t)}let w4=t=>!W_(t);function sZ(t){typeof t=="function"&&(w4=e=>e.startsWith("on")?!W_(e):t(e))}try{sZ(require("@emotion/is-prop-valid").default)}catch{}function oZ(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(w4(r)||n===!0&&W_(r)||!e&&!W_(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}const Xy=A.createContext({});function Jy(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Qd(t){return typeof t=="string"||Array.isArray(t)}const v1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],E1=["initial",...v1];function ev(t){return Jy(t.animate)||E1.some(e=>Qd(t[e]))}function S4(t){return!!(ev(t)||t.variants)}function aZ(t,e){if(ev(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Qd(n)?n:void 0,animate:Qd(i)?i:void 0}}return t.inherit!==!1?e:{}}function lZ(t){const{initial:e,animate:n}=aZ(t,A.useContext(Xy));return A.useMemo(()=>({initial:e,animate:n}),[jD(e),jD(n)])}function jD(t){return Array.isArray(t)?t.join(" "):t}const Xd={};function uZ(t){for(const e in t)Xd[e]=t[e],r1(e)&&(Xd[e].isCSSVariable=!0)}function C4(t,{layout:e,layoutId:n}){return Rh.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Xd[t]||t==="opacity")}const cZ={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hZ=Ih.length;function fZ(t,e,n){let i="",r=!0;for(let o=0;o<hZ;o++){const l=Ih[o],c=t[l];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(l.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||n){const d=p4(c,p1[l]);if(!f){r=!1;const p=cZ[l]||l;i+=`${p}(${d}) `}n&&(e[l]=d)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function T1(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let l=!1,c=!1;for(const f in e){const d=e[f];if(Rh.has(f)){l=!0;continue}else if(r1(f)){r[f]=d;continue}else{const p=p4(d,p1[f]);f.startsWith("origin")?(c=!0,o[f]=p):i[f]=p}}if(e.transform||(l||n?i.transform=fZ(e,t.transform,n):i.transform&&(i.transform="none")),c){const{originX:f="50%",originY:d="50%",originZ:p=0}=o;i.transformOrigin=`${f} ${d} ${p}`}}const b1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function A4(t,e,n){for(const i in e)!ri(e[i])&&!C4(i,n)&&(t[i]=e[i])}function dZ({transformTemplate:t},e){return A.useMemo(()=>{const n=b1();return T1(n,e,t),Object.assign({},n.vars,n.style)},[e])}function mZ(t,e){const n=t.style||{},i={};return A4(i,n,t),Object.assign(i,dZ(t,e)),i}function pZ(t,e){const n={},i=mZ(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const gZ={offset:"stroke-dashoffset",array:"stroke-dasharray"},_Z={offset:"strokeDashoffset",array:"strokeDasharray"};function yZ(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?gZ:_Z;t[o.offset]=Le.transform(-i);const l=Le.transform(e),c=Le.transform(n);t[o.array]=`${l} ${c}`}function I4(t,{attrX:e,attrY:n,attrScale:i,pathLength:r,pathSpacing:o=1,pathOffset:l=0,...c},f,d,p){if(T1(t,c,d),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:v}=t;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=p?.transformBox??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),i!==void 0&&(y.scale=i),r!==void 0&&yZ(y,r,o,l,!1)}const R4=()=>({...b1(),attrs:{}}),x4=t=>typeof t=="string"&&t.toLowerCase()==="svg";function vZ(t,e,n,i){const r=A.useMemo(()=>{const o=R4();return I4(o,e,x4(i),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};A4(o,t.style,t),r.style={...o,...r.style}}return r}const EZ=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function w1(t){return typeof t!="string"||t.includes("-")?!1:!!(EZ.indexOf(t)>-1||/[A-Z]/u.test(t))}function TZ(t,e,n,{latestValues:i},r,o=!1){const c=(w1(t)?vZ:pZ)(e,i,r,t),f=oZ(e,typeof t=="string",o),d=t!==A.Fragment?{...f,...c,ref:n}:{},{children:p}=e,y=A.useMemo(()=>ri(p)?p.get():p,[p]);return A.createElement(t,{...d,children:y})}function BD(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function S1(t,e,n,i){if(typeof e=="function"){const[r,o]=BD(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=BD(i);e=e(n!==void 0?n:t.custom,r,o)}return e}function Xg(t){return ri(t)?t.get():t}function bZ({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,r){return{latestValues:wZ(n,i,r,t),renderState:e()}}function wZ(t,e,n,i){const r={},o=i(t,{});for(const v in o)r[v]=Xg(o[v]);let{initial:l,animate:c}=t;const f=ev(t),d=S4(t);e&&d&&!f&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let p=n?n.initial===!1:!1;p=p||l===!1;const y=p?c:l;if(y&&typeof y!="boolean"&&!Jy(y)){const v=Array.isArray(y)?y:[y];for(let w=0;w<v.length;w++){const S=S1(t,v[w]);if(S){const{transitionEnd:N,transition:O,...j}=S;for(const V in j){let k=j[V];if(Array.isArray(k)){const K=p?k.length-1:0;k=k[K]}k!==null&&(r[V]=k)}for(const V in N)r[V]=N[V]}}}return r}const D4=t=>(e,n)=>{const i=A.useContext(Xy),r=A.useContext(Qy),o=()=>bZ(t,e,i,r);return n?o():YS(o)};function C1(t,e,n){const{style:i}=t,r={};for(const o in i)(ri(i[o])||e.style&&ri(e.style[o])||C4(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(r[o]=i[o]);return r}const SZ=D4({scrapeMotionValuesFromProps:C1,createRenderState:b1});function N4(t,e,n){const i=C1(t,e,n);for(const r in t)if(ri(t[r])||ri(e[r])){const o=Ih.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}const CZ=D4({scrapeMotionValuesFromProps:N4,createRenderState:R4}),AZ=Symbol.for("motionComponentSymbol");function Cc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function IZ(t,e,n){return A.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Cc(n)&&(n.current=i))},[e])}const A1=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),RZ="framerAppearId",P4="data-"+A1(RZ),O4=A.createContext({});function xZ(t,e,n,i,r){const{visualElement:o}=A.useContext(Xy),l=A.useContext(b4),c=A.useContext(Qy),f=A.useContext(y1).reducedMotion,d=A.useRef(null);i=i||l.renderer,!d.current&&i&&(d.current=i(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const p=d.current,y=A.useContext(O4);p&&!p.projection&&r&&(p.type==="html"||p.type==="svg")&&DZ(d.current,n,r,y);const v=A.useRef(!1);A.useInsertionEffect(()=>{p&&v.current&&p.update(n,c)});const w=n[P4],S=A.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return DL(()=>{p&&(v.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p.scheduleRenderMicrotask(),S.current&&p.animationState&&p.animationState.animateChanges())}),A.useEffect(()=>{p&&(!S.current&&p.animationState&&p.animationState.animateChanges(),S.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),S.current=!1),p.enteringChildren=void 0)}),p}function DZ(t,e,n,i){const{layoutId:r,layout:o,drag:l,dragConstraints:c,layoutScroll:f,layoutRoot:d,layoutCrossfade:p}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:M4(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!l||c&&Cc(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:p,layoutScroll:f,layoutRoot:d})}function M4(t){if(t)return t.options.allowProjection!==!1?t.projection:M4(t.parent)}function GE(t,{forwardMotionProps:e=!1}={},n,i){n&&iZ(n);const r=w1(t)?CZ:SZ;function o(c,f){let d;const p={...A.useContext(y1),...c,layoutId:NZ(c)},{isStatic:y}=p,v=lZ(c),w=r(c,y);if(!y&&ZS){PZ();const S=OZ(p);d=S.MeasureLayout,v.visualElement=xZ(t,w,p,i,S.ProjectionNode)}return R.jsxs(Xy.Provider,{value:v,children:[d&&v.visualElement?R.jsx(d,{visualElement:v.visualElement,...p}):null,TZ(t,c,IZ(w,v.visualElement,f),w,y,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=A.forwardRef(o);return l[AZ]=t,l}function NZ({layoutId:t}){const e=A.useContext(WS).id;return e&&t!==void 0?e+"-"+t:t}function PZ(t,e){A.useContext(b4).strict}function OZ(t){const{drag:e,layout:n}=uh;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function MZ(t,e){if(typeof Proxy>"u")return GE;const n=new Map,i=(o,l)=>GE(o,l,t,e),r=(o,l)=>i(o,l);return new Proxy(r,{get:(o,l)=>l==="create"?i:(n.has(l)||n.set(l,GE(l,void 0,t,e)),n.get(l))})}function k4({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function kZ({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function VZ(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function KE(t){return t===void 0||t===1}function Rb({scale:t,scaleX:e,scaleY:n}){return!KE(t)||!KE(e)||!KE(n)}function vl(t){return Rb(t)||V4(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function V4(t){return qD(t.x)||qD(t.y)}function qD(t){return t&&t!=="0%"}function Y_(t,e,n){const i=t-n,r=e*i;return n+r}function $D(t,e,n,i,r){return r!==void 0&&(t=Y_(t,r,i)),Y_(t,n,i)+e}function xb(t,e=0,n=1,i,r){t.min=$D(t.min,e,n,i,r),t.max=$D(t.max,e,n,i,r)}function L4(t,{x:e,y:n}){xb(t.x,e.translate,e.scale,e.originPoint),xb(t.y,n.translate,n.scale,n.originPoint)}const HD=.999999999999,GD=1.0000000000001;function LZ(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,l;for(let c=0;c<r;c++){o=n[c],l=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ic(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,L4(t,l)),i&&vl(o.latestValues)&&Ic(t,o.latestValues))}e.x<GD&&e.x>HD&&(e.x=1),e.y<GD&&e.y>HD&&(e.y=1)}function Ac(t,e){t.min=t.min+e,t.max=t.max+e}function KD(t,e,n,i,r=.5){const o=Zt(t.min,t.max,r);xb(t,e,n,o,i)}function Ic(t,e){KD(t.x,e.x,e.scaleX,e.scale,e.originX),KD(t.y,e.y,e.scaleY,e.scale,e.originY)}function z4(t,e){return k4(VZ(t.getBoundingClientRect(),e))}function zZ(t,e,n){const i=z4(t,n),{scroll:r}=e;return r&&(Ac(i.x,r.offset.x),Ac(i.y,r.offset.y)),i}const WD=()=>({translate:0,scale:1,origin:0,originPoint:0}),Rc=()=>({x:WD(),y:WD()}),YD=()=>({min:0,max:0}),ln=()=>({x:YD(),y:YD()}),Db={current:null},U4={current:!1};function UZ(){if(U4.current=!0,!!ZS)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Db.current=t.matches;t.addEventListener("change",e),e()}else Db.current=!1}const FZ=new WeakMap;function jZ(t,e,n){for(const i in e){const r=e[i],o=n[i];if(ri(r))t.addValue(i,r);else if(ri(o))t.addValue(i,lh(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const l=t.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=t.getStaticValue(i);t.addValue(i,lh(l!==void 0?l:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const ZD=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class BZ{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=d1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=xi.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,Gt.render(this.render,!1,!0))};const{latestValues:f,renderState:d}=l;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=ev(n),this.isVariantNode=S4(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...y}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in y){const w=y[v];f[v]!==void 0&&ri(w)&&w.set(f[v])}}mount(e){this.current=e,FZ.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),U4.current||UZ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Db.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),xa(this.notifyUpdate),xa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Rh.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&Gt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in uh){const n=uh[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ln()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<ZD.length;i++){const r=ZD[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,l=e[o];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=jZ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=lh(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(NL(i)||OL(i))?i=parseFloat(i):!YY(i)&&Da.test(n)&&(i=m4(e,n)),this.setBaseTarget(e,ri(i)?i.get():i)),ri(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=S1(this.props,n,this.presenceContext?.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!ri(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new t1),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){g1.render(this.render)}}class F4 extends BZ{constructor(){super(...arguments),this.KeyframeResolver=LY}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ri(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function j4(t,{style:e,vars:n},i,r){const o=t.style;let l;for(l in e)o[l]=e[l];r?.applyProjectionStyles(o,i);for(l in n)o.setProperty(l,n[l])}function qZ(t){return window.getComputedStyle(t)}class $Z extends F4{constructor(){super(...arguments),this.type="html",this.renderInstance=j4}readValueFromInstance(e,n){if(Rh.has(n))return this.projection?.isProjecting?Tb(n):nY(e,n);{const i=qZ(e),r=(r1(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return z4(e,n)}build(e,n,i){T1(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return C1(e,n,i)}}const B4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function HZ(t,e,n,i){j4(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(B4.has(r)?r:A1(r),e.attrs[r])}class GZ extends F4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ln}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Rh.has(n)){const i=d4(n);return i&&i.default||0}return n=B4.has(n)?n:A1(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return N4(e,n,i)}build(e,n,i){I4(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,r){HZ(e,n,i,r)}mount(e){this.isSVGTag=x4(e.tagName),super.mount(e)}}const KZ=(t,e)=>w1(t)?new GZ(e):new $Z(e,{allowProjection:t!==A.Fragment});function Uc(t,e,n){const i=t.getProps();return S1(i,e,n!==void 0?n:i.custom,t)}const Nb=t=>Array.isArray(t);function WZ(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,lh(n))}function YZ(t){return Nb(t)?t[t.length-1]||0:t}function ZZ(t,e){const n=Uc(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const l in o){const c=YZ(o[l]);WZ(t,l,c)}}function QZ(t){return!!(ri(t)&&t.add)}function Pb(t,e){const n=t.getValue("willChange");if(QZ(n))return n.add(e);if(!n&&_o.WillChange){const i=new _o.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function q4(t){return t.props[P4]}const XZ=t=>t!==null;function JZ(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(XZ),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return r[o]}const eQ={type:"spring",stiffness:500,damping:25,restSpeed:10},tQ=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),nQ={type:"keyframes",duration:.8},iQ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rQ=(t,{keyframes:e})=>e.length>2?nQ:Rh.has(t)?t.startsWith("scale")?tQ(e[1]):eQ:iQ;function sQ({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:l,repeatDelay:c,from:f,elapsed:d,...p}){return!!Object.keys(p).length}const I1=(t,e,n,i={},r,o)=>l=>{const c=m1(i,t)||{},f=c.delay||i.delay||0;let{elapsed:d=0}=i;d=d-Ss(f);const p={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:v=>{e.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:r};sQ(c)||Object.assign(p,rQ(t,p)),p.duration&&(p.duration=Ss(p.duration)),p.repeatDelay&&(p.repeatDelay=Ss(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let y=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(Ab(p),p.delay===0&&(y=!0)),(_o.instantAnimations||_o.skipAnimations)&&(y=!0,Ab(p),p.delay=0),p.allowFlatten=!c.type&&!c.ease,y&&!o&&e.get()!==void 0){const v=JZ(p.keyframes,c);if(v!==void 0){Gt.update(()=>{p.onUpdate(v),p.onComplete()});return}}return c.isSync?new f1(p):new CY(p)};function oQ({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function $4(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...c}=e;i&&(o=i);const f=[],d=r&&t.animationState&&t.animationState.getState()[r];for(const p in c){const y=t.getValue(p,t.latestValues[p]??null),v=c[p];if(v===void 0||d&&oQ(d,p))continue;const w={delay:n,...m1(o||{},p)},S=y.get();if(S!==void 0&&!y.isAnimating&&!Array.isArray(v)&&v===S&&!w.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const j=q4(t);if(j){const V=window.MotionHandoffAnimation(j,p,Gt);V!==null&&(w.startTime=V,N=!0)}}Pb(t,p),y.start(I1(p,y,v,t.shouldReduceMotion&&c4.has(p)?{type:!1}:w,t,N));const O=y.animation;O&&f.push(O)}return l&&Promise.all(f).then(()=>{Gt.update(()=>{l&&ZZ(t,l)})}),f}function H4(t,e,n,i=0,r=1){const o=Array.from(t).sort((d,p)=>d.sortNodePosition(p)).indexOf(e),l=t.size,c=(l-1)*i;return typeof n=="function"?n(o,l):r===1?o*i:c-o*i}function Ob(t,e,n={}){const i=Uc(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all($4(t,i,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:p,staggerDirection:y}=r;return aQ(t,e,f,d,p,y,n)}:()=>Promise.resolve(),{when:c}=r;if(c){const[f,d]=c==="beforeChildren"?[o,l]:[l,o];return f().then(()=>d())}else return Promise.all([o(),l(n.delay)])}function aQ(t,e,n=0,i=0,r=0,o=1,l){const c=[];for(const f of t.variantChildren)f.notify("AnimationStart",e),c.push(Ob(f,e,{...l,delay:n+(typeof i=="function"?0:i)+H4(t.variantChildren,f,i,r,o)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(c)}function lQ(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>Ob(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=Ob(t,e,n);else{const r=typeof e=="function"?Uc(t,e,n.custom):e;i=Promise.all($4(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function G4(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const uQ=E1.length;function K4(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?K4(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<uQ;n++){const i=E1[n],r=t.props[i];(Qd(r)||r===!1)&&(e[i]=r)}return e}const cQ=[...v1].reverse(),hQ=v1.length;function fQ(t){return e=>Promise.all(e.map(({animation:n,options:i})=>lQ(t,n,i)))}function dQ(t){let e=fQ(t),n=QD(),i=!0;const r=f=>(d,p)=>{const y=Uc(t,p,f==="exit"?t.presenceContext?.custom:void 0);if(y){const{transition:v,transitionEnd:w,...S}=y;d={...d,...S,...w}}return d};function o(f){e=f(t)}function l(f){const{props:d}=t,p=K4(t.parent)||{},y=[],v=new Set;let w={},S=1/0;for(let O=0;O<hQ;O++){const j=cQ[O],V=n[j],k=d[j]!==void 0?d[j]:p[j],K=Qd(k),H=j===f?V.isActive:null;H===!1&&(S=O);let ie=k===p[j]&&k!==d[j]&&K;if(ie&&i&&t.manuallyAnimateOnMount&&(ie=!1),V.protectedKeys={...w},!V.isActive&&H===null||!k&&!V.prevProp||Jy(k)||typeof k=="boolean")continue;const x=mQ(V.prevProp,k);let I=x||j===f&&V.isActive&&!ie&&K||O>S&&K,P=!1;const F=Array.isArray(k)?k:[k];let L=F.reduce(r(j),{});H===!1&&(L={});const{prevResolvedValues:B={}}=V,M={...B,...L},Pe=he=>{I=!0,v.has(he)&&(P=!0,v.delete(he)),V.needsAnimating[he]=!0;const ge=t.getValue(he);ge&&(ge.liveStyle=!1)};for(const he in M){const ge=L[he],ke=B[he];if(w.hasOwnProperty(he))continue;let je=!1;Nb(ge)&&Nb(ke)?je=!G4(ge,ke):je=ge!==ke,je?ge!=null?Pe(he):v.add(he):ge!==void 0&&v.has(he)?Pe(he):V.protectedKeys[he]=!0}V.prevProp=k,V.prevResolvedValues=L,V.isActive&&(w={...w,...L}),i&&t.blockInitialAnimation&&(I=!1);const Ke=ie&&x;I&&(!Ke||P)&&y.push(...F.map(he=>{const ge={type:j};if(typeof he=="string"&&i&&!Ke&&t.manuallyAnimateOnMount&&t.parent){const{parent:ke}=t,je=Uc(ke,he);if(ke.enteringChildren&&je){const{delayChildren:q}=je.transition||{};ge.delay=H4(ke.enteringChildren,t,q)}}return{animation:he,options:ge}}))}if(v.size){const O={};if(typeof d.initial!="boolean"){const j=Uc(t,Array.isArray(d.initial)?d.initial[0]:d.initial);j&&j.transition&&(O.transition=j.transition)}v.forEach(j=>{const V=t.getBaseTarget(j),k=t.getValue(j);k&&(k.liveStyle=!0),O[j]=V??null}),y.push({animation:O})}let N=!!y.length;return i&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(N=!1),i=!1,N?e(y):Promise.resolve()}function c(f,d){if(n[f].isActive===d)return Promise.resolve();t.variantChildren?.forEach(y=>y.animationState?.setActive(f,d)),n[f].isActive=d;const p=l(f);for(const y in n)n[y].protectedKeys={};return p}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=QD()}}}function mQ(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!G4(e,t):!1}function ml(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function QD(){return{animate:ml(!0),whileInView:ml(),whileHover:ml(),whileTap:ml(),whileDrag:ml(),whileFocus:ml(),exit:ml()}}class Va{constructor(e){this.isMounted=!1,this.node=e}update(){}}class pQ extends Va{constructor(e){super(e),e.animationState||(e.animationState=dQ(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Jy(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let gQ=0;class _Q extends Va{constructor(){super(...arguments),this.id=gQ++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const yQ={animation:{Feature:pQ},exit:{Feature:_Q}};function Jd(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function xm(t){return{point:{x:t.pageX,y:t.pageY}}}const vQ=t=>e=>_1(e)&&t(e,xm(e));function _d(t,e,n,i){return Jd(t,e,vQ(n),i)}const W4=1e-4,EQ=1-W4,TQ=1+W4,Y4=.01,bQ=0-Y4,wQ=0+Y4;function fi(t){return t.max-t.min}function SQ(t,e,n){return Math.abs(t-e)<=n}function XD(t,e,n,i=.5){t.origin=i,t.originPoint=Zt(e.min,e.max,t.origin),t.scale=fi(n)/fi(e),t.translate=Zt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=EQ&&t.scale<=TQ||isNaN(t.scale))&&(t.scale=1),(t.translate>=bQ&&t.translate<=wQ||isNaN(t.translate))&&(t.translate=0)}function yd(t,e,n,i){XD(t.x,e.x,n.x,i?i.originX:void 0),XD(t.y,e.y,n.y,i?i.originY:void 0)}function JD(t,e,n){t.min=n.min+e.min,t.max=t.min+fi(e)}function CQ(t,e,n){JD(t.x,e.x,n.x),JD(t.y,e.y,n.y)}function eN(t,e,n){t.min=e.min-n.min,t.max=t.min+fi(e)}function vd(t,e,n){eN(t.x,e.x,n.x),eN(t.y,e.y,n.y)}function hr(t){return[t("x"),t("y")]}const Z4=({current:t})=>t?t.ownerDocument.defaultView:null,tN=(t,e)=>Math.abs(t-e);function AQ(t,e){const n=tN(t.x,e.x),i=tN(t.y,e.y);return Math.sqrt(n**2+i**2)}class Q4{constructor(e,n,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=YE(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,S=AQ(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!S)return;const{point:N}=v,{timestamp:O}=Zn;this.history.push({...N,timestamp:O});const{onStart:j,onMove:V}=this.handlers;w||(j&&j(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,v)},this.handlePointerMove=(v,w)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=WE(w,this.transformPagePoint),Gt.update(this.updatePoint,!0)},this.handlePointerUp=(v,w)=>{this.end();const{onEnd:S,onSessionEnd:N,resumeAnimation:O}=this.handlers;if(this.dragSnapToOrigin&&O&&O(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const j=YE(v.type==="pointercancel"?this.lastMoveEventInfo:WE(w,this.transformPagePoint),this.history);this.startEvent&&S&&S(v,j),N&&N(v,j)},!_1(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=r||window;const c=xm(e),f=WE(c,this.transformPagePoint),{point:d}=f,{timestamp:p}=Zn;this.history=[{...d,timestamp:p}];const{onSessionStart:y}=n;y&&y(e,YE(f,this.history)),this.removeListeners=Am(_d(this.contextWindow,"pointermove",this.handlePointerMove),_d(this.contextWindow,"pointerup",this.handlePointerUp),_d(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),xa(this.updatePoint)}}function WE(t,e){return e?{point:e(t.point)}:t}function nN(t,e){return{x:t.x-e.x,y:t.y-e.y}}function YE({point:t},e){return{point:t,delta:nN(t,X4(e)),offset:nN(t,IQ(e)),velocity:RQ(e,.1)}}function IQ(t){return t[0]}function X4(t){return t[t.length-1]}function RQ(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=X4(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Ss(e)));)n--;if(!i)return{x:0,y:0};const o=gr(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function xQ(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Zt(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Zt(n,t,i.max):Math.min(t,n)),t}function iN(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function DQ(t,{top:e,left:n,bottom:i,right:r}){return{x:iN(t.x,n,r),y:iN(t.y,e,i)}}function rN(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function NQ(t,e){return{x:rN(t.x,e.x),y:rN(t.y,e.y)}}function PQ(t,e){let n=.5;const i=fi(t),r=fi(e);return r>i?n=Wd(e.min,e.max-i,t.min):i>r&&(n=Wd(t.min,t.max-r,e.min)),go(0,1,n)}function OQ(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Mb=.35;function MQ(t=Mb){return t===!1?t=0:t===!0&&(t=Mb),{x:sN(t,"left","right"),y:sN(t,"top","bottom")}}function sN(t,e,n){return{min:oN(t,e),max:oN(t,n)}}function oN(t,e){return typeof t=="number"?t:t[e]||0}const kQ=new WeakMap;class VQ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ln(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=y=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(xm(y).point)},l=(y,v)=>{const{drag:w,dragPropagation:S,onDragStart:N}=this.getProps();if(w&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=jY(w),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hr(j=>{let V=this.getAxisMotionValue(j).get()||0;if(Cs.test(V)){const{projection:k}=this.visualElement;if(k&&k.layout){const K=k.layout.layoutBox[j];K&&(V=fi(K)*(parseFloat(V)/100))}}this.originPoint[j]=V}),N&&Gt.postRender(()=>N(y,v)),Pb(this.visualElement,"transform");const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},c=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v;const{dragPropagation:w,dragDirectionLock:S,onDirectionLock:N,onDrag:O}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:j}=v;if(S&&this.currentDirection===null){this.currentDirection=LQ(j),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",v.point,j),this.updateAxis("y",v.point,j),this.visualElement.render(),O&&O(y,v)},f=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v,this.stop(y,v),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>hr(y=>this.getAnimationState(y)==="paused"&&this.getAxisMotionValue(y).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new Q4(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:i,contextWindow:Z4(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,r=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!r||!i)return;const{velocity:l}=r;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&Gt.postRender(()=>c(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!vg(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=xQ(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Cc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=DQ(i.layoutBox,e):this.constraints=!1,this.elastic=MQ(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&hr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=OQ(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Cc(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=zZ(i,r.root,this.visualElement.getTransformPagePoint());let l=NQ(r.layout.layoutBox,o);if(n){const c=n(kZ(l));this.hasMutatedConstraints=!!c,c&&(l=k4(c))}return l}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},d=hr(p=>{if(!vg(p,n,this.currentDirection))return;let y=f&&f[p]||{};l&&(y={min:0,max:0});const v=r?200:1e6,w=r?40:1e7,S={type:"inertia",velocity:i?e[p]:0,bounceStiffness:v,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...o,...y};return this.startAxisValueAnimation(p,S)});return Promise.all(d).then(c)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Pb(this.visualElement,e),i.start(I1(e,i,0,n,this.visualElement,!1))}stopAnimation(){hr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){hr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){hr(n=>{const{drag:i}=this.getProps();if(!vg(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:l,max:c}=r.layout.layoutBox[n];o.set(e[n]-Zt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Cc(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};hr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const f=c.get();r[l]=PQ({min:f,max:f},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),hr(l=>{if(!vg(l,e,null))return;const c=this.getAxisMotionValue(l),{min:f,max:d}=this.constraints[l];c.set(Zt(f,d,r[l]))})}addListeners(){if(!this.visualElement.current)return;kQ.set(this.visualElement,this);const e=this.visualElement.current,n=_d(e,"pointerdown",f=>{const{drag:d,dragListener:p=!0}=this.getProps();d&&p&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();Cc(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Gt.read(i);const l=Jd(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(hr(p=>{const y=this.getAxisMotionValue(p);y&&(this.originPoint[p]+=f[p].translate,y.set(y.get()+f[p].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:l=Mb,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function vg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function LQ(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class zQ extends Va{constructor(e){super(e),this.removeGroupControls=yr,this.removeListeners=yr,this.controls=new VQ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||yr}unmount(){this.removeGroupControls(),this.removeListeners()}}const aN=t=>(e,n)=>{t&&Gt.postRender(()=>t(e,n))};class UQ extends Va{constructor(){super(...arguments),this.removePointerDownListener=yr}onPointerDown(e){this.session=new Q4(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Z4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:aN(e),onStart:aN(n),onMove:i,onEnd:(o,l)=>{delete this.session,r&&Gt.postRender(()=>r(o,l))}}}mount(){this.removePointerDownListener=_d(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Jg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lN(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Bf={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Le.test(t))t=parseFloat(t);else return t;const n=lN(t,e.target.x),i=lN(t,e.target.y);return`${n}% ${i}%`}},FQ={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Da.parse(t);if(r.length>5)return i;const o=Da.createTransformer(t),l=typeof r[0]!="number"?1:0,c=n.x.scale*e.x,f=n.y.scale*e.y;r[0+l]/=c,r[1+l]/=f;const d=Zt(c,f,.5);return typeof r[2+l]=="number"&&(r[2+l]/=d),typeof r[3+l]=="number"&&(r[3+l]/=d),o(r)}};let ZE=!1;class jQ extends A.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;uZ(BQ),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),ZE&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Jg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,{projection:l}=i;return l&&(l.isPresent=o,ZE=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||Gt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),g1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;ZE=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function J4(t){const[e,n]=T4(),i=A.useContext(WS);return R.jsx(jQ,{...t,layoutGroup:i,switchLayoutGroup:A.useContext(O4),isPresent:e,safeToRemove:n})}const BQ={borderRadius:{...Bf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bf,borderTopRightRadius:Bf,borderBottomLeftRadius:Bf,borderBottomRightRadius:Bf,boxShadow:FQ};function qQ(t,e,n){const i=ri(t)?t:lh(t);return i.start(I1("",i,e,n)),i.animation}const $Q=(t,e)=>t.depth-e.depth;class HQ{constructor(){this.children=[],this.isDirty=!1}add(e){QS(this.children,e),this.isDirty=!0}remove(e){XS(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort($Q),this.isDirty=!1,this.children.forEach(e)}}function GQ(t,e){const n=xi.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(xa(i),t(o-e))};return Gt.setup(i,!0),()=>xa(i)}const e3=["TopLeft","TopRight","BottomLeft","BottomRight"],KQ=e3.length,uN=t=>typeof t=="string"?parseFloat(t):t,cN=t=>typeof t=="number"||Le.test(t);function WQ(t,e,n,i,r,o){r?(t.opacity=Zt(0,n.opacity??1,YQ(i)),t.opacityExit=Zt(e.opacity??1,0,ZQ(i))):o&&(t.opacity=Zt(e.opacity??1,n.opacity??1,i));for(let l=0;l<KQ;l++){const c=`border${e3[l]}Radius`;let f=hN(e,c),d=hN(n,c);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||cN(f)===cN(d)?(t[c]=Math.max(Zt(uN(f),uN(d),i),0),(Cs.test(d)||Cs.test(f))&&(t[c]+="%")):t[c]=d}(e.rotate||n.rotate)&&(t.rotate=Zt(e.rotate||0,n.rotate||0,i))}function hN(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const YQ=t3(0,.5,jL),ZQ=t3(.5,.95,yr);function t3(t,e,n){return i=>i<t?0:i>e?1:n(Wd(t,e,i))}function fN(t,e){t.min=e.min,t.max=e.max}function cr(t,e){fN(t.x,e.x),fN(t.y,e.y)}function dN(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function mN(t,e,n,i,r){return t-=e,t=Y_(t,1/n,i),r!==void 0&&(t=Y_(t,1/r,i)),t}function QQ(t,e=0,n=1,i=.5,r,o=t,l=t){if(Cs.test(e)&&(e=parseFloat(e),e=Zt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=Zt(o.min,o.max,i);t===o&&(c-=e),t.min=mN(t.min,e,n,c,r),t.max=mN(t.max,e,n,c,r)}function pN(t,e,[n,i,r],o,l){QQ(t,e[n],e[i],e[r],e.scale,o,l)}const XQ=["x","scaleX","originX"],JQ=["y","scaleY","originY"];function gN(t,e,n,i){pN(t.x,e,XQ,n?n.x:void 0,i?i.x:void 0),pN(t.y,e,JQ,n?n.y:void 0,i?i.y:void 0)}function _N(t){return t.translate===0&&t.scale===1}function n3(t){return _N(t.x)&&_N(t.y)}function yN(t,e){return t.min===e.min&&t.max===e.max}function eX(t,e){return yN(t.x,e.x)&&yN(t.y,e.y)}function vN(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function i3(t,e){return vN(t.x,e.x)&&vN(t.y,e.y)}function EN(t){return fi(t.x)/fi(t.y)}function TN(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class tX{constructor(){this.members=[]}add(e){QS(this.members,e),e.scheduleRender()}remove(e){if(XS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function nX(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,l=n?.z||0;if((r||o||l)&&(i=`translate3d(${r}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:p,rotateX:y,rotateY:v,skewX:w,skewY:S}=n;d&&(i=`perspective(${d}px) ${i}`),p&&(i+=`rotate(${p}deg) `),y&&(i+=`rotateX(${y}deg) `),v&&(i+=`rotateY(${v}deg) `),w&&(i+=`skewX(${w}deg) `),S&&(i+=`skewY(${S}deg) `)}const c=t.x.scale*e.x,f=t.y.scale*e.y;return(c!==1||f!==1)&&(i+=`scale(${c}, ${f})`),i||"none"}const QE=["","X","Y","Z"],iX=1e3;let rX=0;function XE(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function r3(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=q4(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Gt,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&r3(i)}function s3({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},c=e?.()){this.id=rX++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(aX),this.nodes.forEach(hX),this.nodes.forEach(fX),this.nodes.forEach(lX)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new HQ)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new t1),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const f=this.eventHandlers.get(l);f&&f.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=E4(l)&&!KY(l),this.instance=l;const{layoutId:c,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),t){let p,y=0;const v=()=>this.root.updateBlockedByResize=!1;Gt.read(()=>{y=window.innerWidth}),t(l,()=>{const w=window.innerWidth;w!==y&&(y=w,this.root.updateBlockedByResize=!0,p&&p(),p=GQ(v,250),Jg.hasAnimatedSinceResize&&(Jg.hasAnimatedSinceResize=!1,this.nodes.forEach(SN)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||f)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const S=this.options.transition||d.getDefaultTransition()||_X,{onLayoutAnimationStart:N,onLayoutAnimationComplete:O}=d.getProps(),j=!this.targetLayout||!i3(this.targetLayout,w),V=!y&&v;if(this.options.layoutRoot||this.resumeFrom||V||y&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...m1(S,"layout"),onPlay:N,onComplete:O};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(p,V)}else y||SN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),xa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(dX),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&r3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const y=this.path[p];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bN);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(wN);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(cX),this.nodes.forEach(sX),this.nodes.forEach(oX)):this.nodes.forEach(wN),this.clearAllSnapshots();const c=xi.now();Zn.delta=go(0,1e3/60,c-Zn.timestamp),Zn.timestamp=c,Zn.isProcessing=!0,FE.update.process(Zn),FE.preRender.process(Zn),FE.render.process(Zn),Zn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,g1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(uX),this.sharedNodes.forEach(mX)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!fi(this.snapshot.measuredBox.x)&&!fi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!n3(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,p=d!==this.prevTransformTemplateValue;l&&this.instance&&(c||vl(this.latestValues)||p)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return l&&(f=this.removeTransform(f)),yX(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return ln();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(vX))){const{scroll:d}=this.root;d&&(Ac(c.x,d.offset.x),Ac(c.y,d.offset.y))}return c}removeElementScroll(l){const c=ln();if(cr(c,l),this.scroll?.wasRoot)return c;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:p,options:y}=d;d!==this.root&&p&&y.layoutScroll&&(p.wasRoot&&cr(c,l),Ac(c.x,p.offset.x),Ac(c.y,p.offset.y))}return c}applyTransform(l,c=!1){const f=ln();cr(f,l);for(let d=0;d<this.path.length;d++){const p=this.path[d];!c&&p.options.layoutScroll&&p.scroll&&p!==p.root&&Ic(f,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),vl(p.latestValues)&&Ic(f,p.latestValues)}return vl(this.latestValues)&&Ic(f,this.latestValues),f}removeTransform(l){const c=ln();cr(c,l);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!vl(d.latestValues))continue;Rb(d.latestValues)&&d.updateSnapshot();const p=ln(),y=d.measurePageBox();cr(p,y),gN(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,p)}return vl(this.latestValues)&&gN(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:y}=this.options;if(!(!this.layout||!(p||y))){if(this.resolvedRelativeTargetAt=Zn.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),vd(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),cr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ln(),this.targetWithTransforms=ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),CQ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):cr(this.target,this.layout.layoutBox),L4(this.target,this.targetDelta)):cr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),vd(this.relativeTargetOrigin,this.target,v.target),cr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Rb(this.parent.latestValues)||V4(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Zn.timestamp&&(f=!1),f)return;const{layout:d,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||p))return;cr(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;LZ(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ln());const{target:w}=l;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(dN(this.prevProjectionDelta.x,this.projectionDelta.x),dN(this.prevProjectionDelta.y,this.projectionDelta.y)),yd(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!TN(this.projectionDelta.x,this.prevProjectionDelta.x)||!TN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Rc(),this.projectionDelta=Rc(),this.projectionDeltaWithTransform=Rc()}setAnimationOrigin(l,c=!1){const f=this.snapshot,d=f?f.latestValues:{},p={...this.latestValues},y=Rc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=ln(),w=f?f.source:void 0,S=this.layout?this.layout.source:void 0,N=w!==S,O=this.getStack(),j=!O||O.members.length<=1,V=!!(N&&!j&&this.options.crossfade===!0&&!this.path.some(gX));this.animationProgress=0;let k;this.mixTargetDelta=K=>{const H=K/1e3;CN(y.x,l.x,H),CN(y.y,l.y,H),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(vd(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),pX(this.relativeTarget,this.relativeTargetOrigin,v,H),k&&eX(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=ln()),cr(k,this.relativeTarget)),N&&(this.animationValues=p,WQ(p,d,this.latestValues,H,V,j)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(xa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Gt.update(()=>{Jg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=lh(0)),this.currentAnimation=qQ(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(iX),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:f,layout:d,latestValues:p}=l;if(!(!c||!f||!d)){if(this!==l&&this.layout&&d&&o3(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||ln();const y=fi(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+y;const v=fi(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+v}cr(c,f),Ic(c,p),yd(this.projectionDeltaWithTransform,this.layoutCorrected,c,p)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new tX),this.sharedNodes.get(l).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const d={};f.z&&XE("z",l,d,this.animationValues);for(let p=0;p<QE.length;p++)XE(`rotate${QE[p]}`,l,d,this.animationValues),XE(`skew${QE[p]}`,l,d,this.animationValues);l.render();for(const p in d)l.setStaticValue(p,d[p]),this.animationValues&&(this.animationValues[p]=d[p]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Xg(c?.pointerEvents)||"",l.transform=f?f(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Xg(c?.pointerEvents)||""),this.hasProjected&&!vl(this.latestValues)&&(l.transform=f?f({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=d.animationValues||d.latestValues;this.applyTransformsToTarget();let y=nX(this.projectionDeltaWithTransform,this.treeScale,p);f&&(y=f(p,y)),l.transform=y;const{x:v,y:w}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${w.origin*100}% 0`,d.animationValues?l.opacity=d===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const S in Xd){if(p[S]===void 0)continue;const{correct:N,applyTo:O,isCSSVariable:j}=Xd[S],V=y==="none"?p[S]:N(p[S],d);if(O){const k=O.length;for(let K=0;K<k;K++)l[O[K]]=V}else j?this.options.visualElement.renderState.vars[S]=V:l[S]=V}this.options.layoutId&&(l.pointerEvents=d===this?Xg(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(bN),this.root.sharedNodes.clear()}}}function sX(t){t.updateLayout()}function oX(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:r}=t.options,o=e.source!==t.layout.source;r==="size"?hr(p=>{const y=o?e.measuredBox[p]:e.layoutBox[p],v=fi(y);y.min=n[p].min,y.max=y.min+v}):o3(r,e.layoutBox,n)&&hr(p=>{const y=o?e.measuredBox[p]:e.layoutBox[p],v=fi(n[p]);y.max=y.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+v)});const l=Rc();yd(l,n,e.layoutBox);const c=Rc();o?yd(c,t.applyTransform(i,!0),e.measuredBox):yd(c,n,e.layoutBox);const f=!n3(l);let d=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:y,layout:v}=p;if(y&&v){const w=ln();vd(w,e.layoutBox,y.layoutBox);const S=ln();vd(S,n,v.layoutBox),i3(w,S)||(d=!0),p.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=w,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function aX(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function lX(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function uX(t){t.clearSnapshot()}function bN(t){t.clearMeasurements()}function wN(t){t.isLayoutDirty=!1}function cX(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function SN(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function hX(t){t.resolveTargetDelta()}function fX(t){t.calcProjection()}function dX(t){t.resetSkewAndRotation()}function mX(t){t.removeLeadSnapshot()}function CN(t,e,n){t.translate=Zt(e.translate,0,n),t.scale=Zt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function AN(t,e,n,i){t.min=Zt(e.min,n.min,i),t.max=Zt(e.max,n.max,i)}function pX(t,e,n,i){AN(t.x,e.x,n.x,i),AN(t.y,e.y,n.y,i)}function gX(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const _X={duration:.45,ease:[.4,0,.1,1]},IN=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),RN=IN("applewebkit/")&&!IN("chrome/")?Math.round:yr;function xN(t){t.min=RN(t.min),t.max=RN(t.max)}function yX(t){xN(t.x),xN(t.y)}function o3(t,e,n){return t==="position"||t==="preserve-aspect"&&!SQ(EN(e),EN(n),.2)}function vX(t){return t!==t.root&&t.scroll?.wasRoot}const EX=s3({attachResizeListener:(t,e)=>Jd(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),JE={current:void 0},a3=s3({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!JE.current){const t=new EX({});t.mount(window),t.setOptions({layoutScroll:!0}),JE.current=t}return JE.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),TX={pan:{Feature:UQ},drag:{Feature:zQ,ProjectionNode:a3,MeasureLayout:J4}};function DN(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&Gt.postRender(()=>o(e,xm(e)))}class bX extends Va{mount(){const{current:e}=this.node;e&&(this.unmount=BY(e,(n,i)=>(DN(this.node,i,"Start"),r=>DN(this.node,r,"End"))))}unmount(){}}class wX extends Va{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Am(Jd(this.node.current,"focus",()=>this.onFocus()),Jd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function NN(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&Gt.postRender(()=>o(e,xm(e)))}class SX extends Va{mount(){const{current:e}=this.node;e&&(this.unmount=GY(e,(n,i)=>(NN(this.node,i,"Start"),(r,{success:o})=>NN(this.node,r,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const kb=new WeakMap,eT=new WeakMap,CX=t=>{const e=kb.get(t.target);e&&e(t)},AX=t=>{t.forEach(CX)};function IX({root:t,...e}){const n=t||document;eT.has(n)||eT.set(n,{});const i=eT.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(AX,{root:t,...e})),i[r]}function RX(t,e,n){const i=IX(e);return kb.set(t,n),i.observe(t),()=>{kb.delete(t),i.unobserve(t)}}const xX={some:0,all:1};class DX extends Va{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:xX[r]},c=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:p,onViewportLeave:y}=this.node.getProps(),v=d?p:y;v&&v(f)};return RX(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(NX(e,n))&&this.startObserver()}unmount(){}}function NX({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const PX={inView:{Feature:DX},tap:{Feature:SX},focus:{Feature:wX},hover:{Feature:bX}},OX={layout:{ProjectionNode:a3,MeasureLayout:J4}},MX={...yQ,...PX,...TX,...OX},l3=MZ(MX,KZ),kX=A.memo(()=>{const t=JK(),e=A.useMemo(()=>R.jsx(nZ,{mode:"wait",children:R.jsx(l3.span,{initial:{scale:.6,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.6,opacity:0},transition:{duration:.3,type:"spring"},style:{fontWeight:"bold",color:t>0?"#28a745":"#dc3545",marginLeft:"5px"},children:t},t)}),[t]);return R.jsx("div",{children:R.jsx("div",{style:{cursor:"pointer",boxShadow:"rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset",borderRadius:"8px",display:"flex",gap:"20px",background:"#ededed",border:"solid 1px #000",padding:"9px"},children:R.jsxs("span",{style:{fontSize:"15px"},children:["Active sessions:",e]})})})}),VX=()=>{const[t,e]=A.useState(""),[n,i]=A.useState("");return A.useEffect(()=>{const r=()=>{const f=new Date,d=f.getDate(),p=f.toLocaleString("en-US",{month:"short"}).toUpperCase(),y=f.getFullYear();e(`${d} ${p}, ${y}`)},o=()=>{const f=new Date,d=String(f.getHours()).padStart(2,"0"),p=String(f.getMinutes()).padStart(2,"0");i(`${d}:${p}`)};r(),o();const l=setInterval(r,6e4),c=setInterval(o,1e3);return()=>{clearInterval(l),clearInterval(c)}},[]),R.jsx("header",{className:Pr.header,children:R.jsxs("div",{className:Pr.header__container,children:[R.jsxs("div",{className:Pr.left,children:[R.jsxs("div",{className:Pr.left_container,children:[R.jsx("img",{className:Pr.logo,src:s9,alt:"logo"}),R.jsx("span",{children:"INVENTORY"})]}),R.jsx("div",{className:Pr.center,children:R.jsx("input",{type:"text",placeholder:"Поиск...",className:Pr.search__input})}),R.jsx("span",{children:R.jsx(kX,{})})]}),R.jsxs("div",{className:Pr.right,children:[R.jsx("div",{className:Pr.data_container,children:"today"}),R.jsxs("div",{className:Pr.data_container_allDate,children:[R.jsx("span",{children:t}),R.jsxs("div",{children:[R.jsx("img",{className:Pr.clockIcon,src:o9,alt:"clock",width:12,height:12}),R.jsx("span",{children:n})]})]})]})]})})},LX="_app_wfltt_1",zX="_app__body_wfltt_11",UX="_app__nav_wfltt_21",FX="_app__link_wfltt_55",jX="_app__user_wfltt_93",BX="_app__settings_wfltt_119",qX="_app__content_wfltt_157",fs={app:LX,app__body:zX,app__nav:UX,app__link:FX,"app__link--active":"_app__link--active_wfltt_79","app__user-container":"_app__user-container_wfltt_93",app__user:jX,app__settings:BX,app__content:qX},$X="/testObject/assets/currentUser-DW_uhQFp.jpg",HX="/testObject/assets/setting-iFurRb8-.png",GX=()=>{const t=Eo(),e=({isActive:n})=>n?`${fs.app__link} ${fs["app__link--active"]}`:fs.app__link;return R.jsxs("div",{className:fs.app__body,children:[R.jsxs("nav",{className:fs.app__nav,children:[R.jsxs("div",{className:fs["app__user-container"],children:[R.jsx("img",{className:fs.app__user,src:$X,alt:"user"}),R.jsx(aw,{to:Gi.SETTINGS,children:R.jsx("img",{className:fs.app__settings,src:HX,alt:"settings"})})]}),R.jsx(mc,{to:Gi.PRIHOD,className:e,children:"Приход"}),R.jsx(mc,{to:Gi.GROUPS,className:e,children:"Группы"}),R.jsx(mc,{to:Gi.PRODUCTS,className:e,children:"Продукты"}),R.jsx(mc,{to:Gi.USERS,className:e,children:"Пользователи"}),R.jsx(mc,{to:Gi.SETTINGS,className:e,children:"Настройки"})]}),R.jsx("main",{className:fs.app__content,children:R.jsx(l3.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.5,ease:"easeInOut"},children:R.jsx(hF,{})},t.pathname)})]})},KX=()=>R.jsxs("div",{className:fs.app,children:[R.jsx(VX,{}),R.jsx(GX,{})]});function Yn(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var WX=typeof Symbol=="function"&&Symbol.observable||"@@observable",PN=WX,tT=()=>Math.random().toString(36).substring(7).split("").join("."),YX={INIT:`@@redux/INIT${tT()}`,REPLACE:`@@redux/REPLACE${tT()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${tT()}`},Z_=YX;function R1(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function u3(t,e,n){if(typeof t!="function")throw new Error(Yn(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Yn(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Yn(1));return n(u3)(t,e)}let i=t,r=e,o=new Map,l=o,c=0,f=!1;function d(){l===o&&(l=new Map,o.forEach((O,j)=>{l.set(j,O)}))}function p(){if(f)throw new Error(Yn(3));return r}function y(O){if(typeof O!="function")throw new Error(Yn(4));if(f)throw new Error(Yn(5));let j=!0;d();const V=c++;return l.set(V,O),function(){if(j){if(f)throw new Error(Yn(6));j=!1,d(),l.delete(V),o=null}}}function v(O){if(!R1(O))throw new Error(Yn(7));if(typeof O.type>"u")throw new Error(Yn(8));if(typeof O.type!="string")throw new Error(Yn(17));if(f)throw new Error(Yn(9));try{f=!0,r=i(r,O)}finally{f=!1}return(o=l).forEach(V=>{V()}),O}function w(O){if(typeof O!="function")throw new Error(Yn(10));i=O,v({type:Z_.REPLACE})}function S(){const O=y;return{subscribe(j){if(typeof j!="object"||j===null)throw new Error(Yn(11));function V(){const K=j;K.next&&K.next(p())}return V(),{unsubscribe:O(V)}},[PN](){return this}}}return v({type:Z_.INIT}),{dispatch:v,subscribe:y,getState:p,replaceReducer:w,[PN]:S}}function ZX(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Z_.INIT})>"u")throw new Error(Yn(12));if(typeof n(void 0,{type:Z_.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Yn(13))})}function QX(t){const e=Object.keys(t),n={};for(let o=0;o<e.length;o++){const l=e[o];typeof t[l]=="function"&&(n[l]=t[l])}const i=Object.keys(n);let r;try{ZX(n)}catch(o){r=o}return function(l={},c){if(r)throw r;let f=!1;const d={};for(let p=0;p<i.length;p++){const y=i[p],v=n[y],w=l[y],S=v(w,c);if(typeof S>"u")throw c&&c.type,new Error(Yn(14));d[y]=S,f=f||S!==w}return f=f||i.length!==Object.keys(l).length,f?d:l}}function Q_(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...i)=>e(n(...i)))}function XX(...t){return e=>(n,i)=>{const r=e(n,i);let o=()=>{throw new Error(Yn(15))};const l={getState:r.getState,dispatch:(f,...d)=>o(f,...d)},c=t.map(f=>f(l));return o=Q_(...c)(r.dispatch),{...r,dispatch:o}}}function JX(t){return R1(t)&&"type"in t&&typeof t.type=="string"}var c3=Symbol.for("immer-nothing"),ON=Symbol.for("immer-draftable"),Qi=Symbol.for("immer-state");function Lr(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ch=Object.getPrototypeOf;function nu(t){return!!t&&!!t[Qi]}function yo(t){return t?h3(t)||Array.isArray(t)||!!t[ON]||!!t.constructor?.[ON]||Dm(t)||nv(t):!1}var eJ=Object.prototype.constructor.toString();function h3(t){if(!t||typeof t!="object")return!1;const e=ch(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===eJ}function X_(t,e){tv(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,i)=>e(i,n,t))}function tv(t){const e=t[Qi];return e?e.type_:Array.isArray(t)?1:Dm(t)?2:nv(t)?3:0}function Vb(t,e){return tv(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function f3(t,e,n){const i=tv(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function tJ(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Dm(t){return t instanceof Map}function nv(t){return t instanceof Set}function El(t){return t.copy_||t.base_}function Lb(t,e){if(Dm(t))return new Map(t);if(nv(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=h3(t);if(e===!0||e==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[Qi];let r=Reflect.ownKeys(i);for(let o=0;o<r.length;o++){const l=r[o],c=i[l];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(i[l]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[l]})}return Object.create(ch(t),i)}else{const i=ch(t);if(i!==null&&n)return{...t};const r=Object.create(i);return Object.assign(r,t)}}function x1(t,e=!1){return iv(t)||nu(t)||!yo(t)||(tv(t)>1&&Object.defineProperties(t,{set:{value:Eg},add:{value:Eg},clear:{value:Eg},delete:{value:Eg}}),Object.freeze(t),e&&Object.values(t).forEach(n=>x1(n,!0))),t}function Eg(){Lr(2)}function iv(t){return Object.isFrozen(t)}var nJ={};function iu(t){const e=nJ[t];return e||Lr(0,t),e}var em;function d3(){return em}function iJ(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function MN(t,e){e&&(iu("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function zb(t){Ub(t),t.drafts_.forEach(rJ),t.drafts_=null}function Ub(t){t===em&&(em=t.parent_)}function kN(t){return em=iJ(em,t)}function rJ(t){const e=t[Qi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function VN(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Qi].modified_&&(zb(e),Lr(4)),yo(t)&&(t=J_(e,t),e.parent_||ey(e,t)),e.patches_&&iu("Patches").generateReplacementPatches_(n[Qi].base_,t,e.patches_,e.inversePatches_)):t=J_(e,n,[]),zb(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==c3?t:void 0}function J_(t,e,n){if(iv(e))return e;const i=e[Qi];if(!i)return X_(e,(r,o)=>LN(t,i,e,r,o,n)),e;if(i.scope_!==t)return e;if(!i.modified_)return ey(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const r=i.copy_;let o=r,l=!1;i.type_===3&&(o=new Set(r),r.clear(),l=!0),X_(o,(c,f)=>LN(t,i,r,c,f,n,l)),ey(t,r,!1),n&&t.patches_&&iu("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function LN(t,e,n,i,r,o,l){if(nu(r)){const c=o&&e&&e.type_!==3&&!Vb(e.assigned_,i)?o.concat(i):void 0,f=J_(t,r,c);if(f3(n,i,f),nu(f))t.canAutoFreeze_=!1;else return}else l&&n.add(r);if(yo(r)&&!iv(r)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;J_(t,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(Dm(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&ey(t,r)}}function ey(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&x1(e,n)}function sJ(t,e){const n=Array.isArray(t),i={type_:n?1:0,scope_:e?e.scope_:d3(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,o=D1;n&&(r=[i],o=tm);const{revoke:l,proxy:c}=Proxy.revocable(r,o);return i.draft_=c,i.revoke_=l,c}var D1={get(t,e){if(e===Qi)return t;const n=El(t);if(!Vb(n,e))return oJ(t,n,e);const i=n[e];return t.finalized_||!yo(i)?i:i===nT(t.base_,e)?(iT(t),t.copy_[e]=jb(i,t)):i},has(t,e){return e in El(t)},ownKeys(t){return Reflect.ownKeys(El(t))},set(t,e,n){const i=m3(El(t),e);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=nT(El(t),e),o=r?.[Qi];if(o&&o.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(tJ(n,r)&&(n!==void 0||Vb(t.base_,e)))return!0;iT(t),Fb(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return nT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,iT(t),Fb(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=El(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty(){Lr(11)},getPrototypeOf(t){return ch(t.base_)},setPrototypeOf(){Lr(12)}},tm={};X_(D1,(t,e)=>{tm[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});tm.deleteProperty=function(t,e){return tm.set.call(this,t,e,void 0)};tm.set=function(t,e,n){return D1.set.call(this,t[0],e,n,t[0])};function nT(t,e){const n=t[Qi];return(n?El(n):t)[e]}function oJ(t,e,n){const i=m3(e,n);return i?"value"in i?i.value:i.get?.call(t.draft_):void 0}function m3(t,e){if(!(e in t))return;let n=ch(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=ch(n)}}function Fb(t){t.modified_||(t.modified_=!0,t.parent_&&Fb(t.parent_))}function iT(t){t.copy_||(t.copy_=Lb(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var aJ=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,i)=>{if(typeof e=="function"&&typeof n!="function"){const o=n;n=e;const l=this;return function(f=o,...d){return l.produce(f,p=>n.call(this,p,...d))}}typeof n!="function"&&Lr(6),i!==void 0&&typeof i!="function"&&Lr(7);let r;if(yo(e)){const o=kN(this),l=jb(e,void 0);let c=!0;try{r=n(l),c=!1}finally{c?zb(o):Ub(o)}return MN(o,i),VN(r,o)}else if(!e||typeof e!="object"){if(r=n(e),r===void 0&&(r=e),r===c3&&(r=void 0),this.autoFreeze_&&x1(r,!0),i){const o=[],l=[];iu("Patches").generateReplacementPatches_(e,r,o,l),i(o,l)}return r}else Lr(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(l,...c)=>this.produceWithPatches(l,f=>e(f,...c));let i,r;return[this.produce(e,n,(l,c)=>{i=l,r=c}),i,r]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){yo(t)||Lr(8),nu(t)&&(t=lJ(t));const e=kN(this),n=jb(t,void 0);return n[Qi].isManual_=!0,Ub(e),n}finishDraft(t,e){const n=t&&t[Qi];(!n||!n.isManual_)&&Lr(9);const{scope_:i}=n;return MN(i,e),VN(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}n>-1&&(e=e.slice(n+1));const i=iu("Patches").applyPatches_;return nu(t)?i(t,e):this.produce(t,r=>i(r,e))}};function jb(t,e){const n=Dm(t)?iu("MapSet").proxyMap_(t,e):nv(t)?iu("MapSet").proxySet_(t,e):sJ(t,e);return(e?e.scope_:d3()).drafts_.push(n),n}function lJ(t){return nu(t)||Lr(10,t),p3(t)}function p3(t){if(!yo(t)||iv(t))return t;const e=t[Qi];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Lb(t,e.scope_.immer_.useStrictShallowCopy_)}else n=Lb(t,!0);return X_(n,(i,r)=>{f3(n,i,p3(r))}),e&&(e.finalized_=!1),n}var uJ=new aJ,g3=uJ.produce;function cJ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function hJ(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function fJ(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${n}]`)}}var zN=t=>Array.isArray(t)?t:[t];function dJ(t){const e=Array.isArray(t[0])?t[0]:t;return fJ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function mJ(t,e){const n=[],{length:i}=t;for(let r=0;r<i;r++)n.push(t[r].apply(null,e));return n}var pJ=class{constructor(t){this.value=t}deref(){return this.value}},gJ=typeof WeakRef<"u"?WeakRef:pJ,_J=0,UN=1;function Tg(){return{s:_J,v:void 0,o:null,p:null}}function _3(t,e={}){let n=Tg();const{resultEqualityCheck:i}=e;let r,o=0;function l(){let c=n;const{length:f}=arguments;for(let y=0,v=f;y<v;y++){const w=arguments[y];if(typeof w=="function"||typeof w=="object"&&w!==null){let S=c.o;S===null&&(c.o=S=new WeakMap);const N=S.get(w);N===void 0?(c=Tg(),S.set(w,c)):c=N}else{let S=c.p;S===null&&(c.p=S=new Map);const N=S.get(w);N===void 0?(c=Tg(),S.set(w,c)):c=N}}const d=c;let p;if(c.s===UN)p=c.v;else if(p=t.apply(null,arguments),o++,i){const y=r?.deref?.()??r;y!=null&&i(y,p)&&(p=y,o!==0&&o--),r=typeof p=="object"&&p!==null||typeof p=="function"?new gJ(p):p}return d.s=UN,d.v=p,p}return l.clearCache=()=>{n=Tg(),l.resetResultsCount()},l.resultsCount=()=>o,l.resetResultsCount=()=>{o=0},l}function yJ(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,i=(...r)=>{let o=0,l=0,c,f={},d=r.pop();typeof d=="object"&&(f=d,d=r.pop()),cJ(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const p={...n,...f},{memoize:y,memoizeOptions:v=[],argsMemoize:w=_3,argsMemoizeOptions:S=[]}=p,N=zN(v),O=zN(S),j=dJ(r),V=y(function(){return o++,d.apply(null,arguments)},...N),k=w(function(){l++;const H=mJ(j,arguments);return c=V.apply(null,H),c},...O);return Object.assign(k,{resultFunc:d,memoizedResultFunc:V,dependencies:j,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>c,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:y,argsMemoize:w})};return Object.assign(i,{withTypes:()=>i}),i}var y3=yJ(_3),vJ=Object.assign((t,e=y3)=>{hJ(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),i=n.map(o=>t[o]);return e(i,(...o)=>o.reduce((l,c,f)=>(l[n[f]]=c,l),{}))},{withTypes:()=>vJ});function v3(t){return({dispatch:n,getState:i})=>r=>o=>typeof o=="function"?o(n,i,t):r(o)}var EJ=v3(),TJ=v3,bJ=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Q_:Q_.apply(null,arguments)},wJ=t=>t&&typeof t.match=="function";function Ed(t,e){function n(...i){if(e){let r=e(...i);if(!r)throw new Error(so(0));return{type:t,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:t,payload:i[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=i=>JX(i)&&i.type===t,n}var E3=class Xf extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Xf.prototype)}static get[Symbol.species](){return Xf}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Xf(...e[0].concat(this)):new Xf(...e.concat(this))}};function FN(t){return yo(t)?g3(t,()=>{}):t}function bg(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function SJ(t){return typeof t=="boolean"}var CJ=()=>function(e){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:o=!0}=e??{};let l=new E3;return n&&(SJ(n)?l.push(EJ):l.push(TJ(n.extraArgument))),l},AJ="RTK_autoBatch",jN=t=>e=>{setTimeout(e,t)},IJ=(t={type:"raf"})=>e=>(...n)=>{const i=e(...n);let r=!0,o=!1,l=!1;const c=new Set,f=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:jN(10):t.type==="callback"?t.queueNotification:jN(t.timeout),d=()=>{l=!1,o&&(o=!1,c.forEach(p=>p()))};return Object.assign({},i,{subscribe(p){const y=()=>r&&p(),v=i.subscribe(y);return c.add(p),()=>{v(),c.delete(p)}},dispatch(p){try{return r=!p?.meta?.[AJ],o=!r,o&&(l||(l=!0,f(d))),i.dispatch(p)}finally{r=!0}}})},RJ=t=>function(n){const{autoBatch:i=!0}=n??{};let r=new E3(t);return i&&r.push(IJ(typeof i=="object"?i:void 0)),r};function xJ(t){const e=CJ(),{reducer:n=void 0,middleware:i,devTools:r=!0,preloadedState:o=void 0,enhancers:l=void 0}=t||{};let c;if(typeof n=="function")c=n;else if(R1(n))c=QX(n);else throw new Error(so(1));let f;typeof i=="function"?f=i(e):f=e();let d=Q_;r&&(d=bJ({trace:!1,...typeof r=="object"&&r}));const p=XX(...f),y=RJ(p);let v=typeof l=="function"?l(y):y();const w=d(...v);return u3(c,o,w)}function T3(t){const e={},n=[];let i;const r={addCase(o,l){const c=typeof o=="string"?o:o.type;if(!c)throw new Error(so(28));if(c in e)throw new Error(so(29));return e[c]=l,r},addAsyncThunk(o,l){return l.pending&&(e[o.pending.type]=l.pending),l.rejected&&(e[o.rejected.type]=l.rejected),l.fulfilled&&(e[o.fulfilled.type]=l.fulfilled),l.settled&&n.push({matcher:o.settled,reducer:l.settled}),r},addMatcher(o,l){return n.push({matcher:o,reducer:l}),r},addDefaultCase(o){return i=o,r}};return t(r),[e,n,i]}function DJ(t){return typeof t=="function"}function NJ(t,e){let[n,i,r]=T3(e),o;if(DJ(t))o=()=>FN(t());else{const c=FN(t);o=()=>c}function l(c=o(),f){let d=[n[f.type],...i.filter(({matcher:p})=>p(f)).map(({reducer:p})=>p)];return d.filter(p=>!!p).length===0&&(d=[r]),d.reduce((p,y)=>{if(y)if(nu(p)){const w=y(p,f);return w===void 0?p:w}else{if(yo(p))return g3(p,v=>y(v,f));{const v=y(p,f);if(v===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return p},c)}return l.getInitialState=o,l}var PJ=(t,e)=>wJ(t)?t.match(e):t(e);function OJ(...t){return e=>t.some(n=>PJ(n,e))}var MJ="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",kJ=(t=21)=>{let e="",n=t;for(;n--;)e+=MJ[Math.random()*64|0];return e},VJ=["name","message","stack","code"],rT=class{constructor(t,e){this.payload=t,this.meta=e}_type},BN=class{constructor(t,e){this.payload=t,this.meta=e}_type},LJ=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of VJ)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},qN="External signal was aborted",zJ=(()=>{function t(e,n,i){const r=Ed(e+"/fulfilled",(f,d,p,y)=>({payload:f,meta:{...y||{},arg:p,requestId:d,requestStatus:"fulfilled"}})),o=Ed(e+"/pending",(f,d,p)=>({payload:void 0,meta:{...p||{},arg:d,requestId:f,requestStatus:"pending"}})),l=Ed(e+"/rejected",(f,d,p,y,v)=>({payload:y,error:(i&&i.serializeError||LJ)(f||"Rejected"),meta:{...v||{},arg:p,requestId:d,rejectedWithValue:!!y,requestStatus:"rejected",aborted:f?.name==="AbortError",condition:f?.name==="ConditionError"}}));function c(f,{signal:d}={}){return(p,y,v)=>{const w=i?.idGenerator?i.idGenerator(f):kJ(),S=new AbortController;let N,O;function j(k){O=k,S.abort()}d&&(d.aborted?j(qN):d.addEventListener("abort",()=>j(qN),{once:!0}));const V=(async function(){let k;try{let H=i?.condition?.(f,{getState:y,extra:v});if(FJ(H)&&(H=await H),H===!1||S.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const ie=new Promise((x,I)=>{N=()=>{I({name:"AbortError",message:O||"Aborted"})},S.signal.addEventListener("abort",N)});p(o(w,f,i?.getPendingMeta?.({requestId:w,arg:f},{getState:y,extra:v}))),k=await Promise.race([ie,Promise.resolve(n(f,{dispatch:p,getState:y,extra:v,requestId:w,signal:S.signal,abort:j,rejectWithValue:(x,I)=>new rT(x,I),fulfillWithValue:(x,I)=>new BN(x,I)})).then(x=>{if(x instanceof rT)throw x;return x instanceof BN?r(x.payload,w,f,x.meta):r(x,w,f)})])}catch(H){k=H instanceof rT?l(null,w,f,H.payload,H.meta):l(H,w,f)}finally{N&&S.signal.removeEventListener("abort",N)}return i&&!i.dispatchConditionRejection&&l.match(k)&&k.meta.condition||p(k),k})();return Object.assign(V,{abort:j,requestId:w,arg:f,unwrap(){return V.then(UJ)}})}}return Object.assign(c,{pending:o,rejected:l,fulfilled:r,settled:OJ(l,r),typePrefix:e})}return t.withTypes=()=>t,t})();function UJ(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function FJ(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var b3=Symbol.for("rtk-slice-createasyncthunk"),jJ={[b3]:zJ};function BJ(t,e){return`${t}/${e}`}function qJ({creators:t}={}){const e=t?.asyncThunk?.[b3];return function(i){const{name:r,reducerPath:o=r}=i;if(!r)throw new Error(so(11));const l=(typeof i.reducers=="function"?i.reducers(HJ()):i.reducers)||{},c=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(k,K){const H=typeof k=="string"?k:k.type;if(!H)throw new Error(so(12));if(H in f.sliceCaseReducersByType)throw new Error(so(13));return f.sliceCaseReducersByType[H]=K,d},addMatcher(k,K){return f.sliceMatchers.push({matcher:k,reducer:K}),d},exposeAction(k,K){return f.actionCreators[k]=K,d},exposeCaseReducer(k,K){return f.sliceCaseReducersByName[k]=K,d}};c.forEach(k=>{const K=l[k],H={reducerName:k,type:BJ(r,k),createNotation:typeof i.reducers=="function"};KJ(K)?YJ(H,K,d,e):GJ(H,K,d)});function p(){const[k={},K=[],H=void 0]=typeof i.extraReducers=="function"?T3(i.extraReducers):[i.extraReducers],ie={...k,...f.sliceCaseReducersByType};return NJ(i.initialState,x=>{for(let I in ie)x.addCase(I,ie[I]);for(let I of f.sliceMatchers)x.addMatcher(I.matcher,I.reducer);for(let I of K)x.addMatcher(I.matcher,I.reducer);H&&x.addDefaultCase(H)})}const y=k=>k,v=new Map,w=new WeakMap;let S;function N(k,K){return S||(S=p()),S(k,K)}function O(){return S||(S=p()),S.getInitialState()}function j(k,K=!1){function H(x){let I=x[k];return typeof I>"u"&&K&&(I=bg(w,H,O)),I}function ie(x=y){const I=bg(v,K,()=>new WeakMap);return bg(I,x,()=>{const P={};for(const[F,L]of Object.entries(i.selectors??{}))P[F]=$J(L,x,()=>bg(w,x,O),K);return P})}return{reducerPath:k,getSelectors:ie,get selectors(){return ie(H)},selectSlice:H}}const V={name:r,reducer:N,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:O,...j(o),injectInto(k,{reducerPath:K,...H}={}){const ie=K??o;return k.inject({reducerPath:ie,reducer:N},H),{...V,...j(ie,!0)}}};return V}}function $J(t,e,n,i){function r(o,...l){let c=e(o);return typeof c>"u"&&i&&(c=n()),t(c,...l)}return r.unwrapped=t,r}function HJ(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function GJ({type:t,reducerName:e,createNotation:n},i,r){let o,l;if("reducer"in i){if(n&&!WJ(i))throw new Error(so(17));o=i.reducer,l=i.prepare}else o=i;r.addCase(t,o).exposeCaseReducer(e,o).exposeAction(e,l?Ed(t,l):Ed(t))}function KJ(t){return t._reducerDefinitionType==="asyncThunk"}function WJ(t){return t._reducerDefinitionType==="reducerWithPrepare"}function YJ({type:t,reducerName:e},n,i,r){if(!r)throw new Error(so(18));const{payloadCreator:o,fulfilled:l,pending:c,rejected:f,settled:d,options:p}=n,y=r(t,o,p);i.exposeAction(e,y),l&&i.addCase(y.fulfilled,l),c&&i.addCase(y.pending,c),f&&i.addCase(y.rejected,f),d&&i.addMatcher(y.settled,d),i.exposeCaseReducer(e,{fulfilled:l||wg,pending:c||wg,rejected:f||wg,settled:d||wg})}function wg(){}function so(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}const w3=qJ({creators:{asyncThunk:jJ}}),ZJ={products:[],status:"idle",error:null},nm=t=>{if(t==null)return t;if(t instanceof Et)return t.toDate().toISOString();if(Array.isArray(t))return t.map(e=>nm(e));if(typeof t=="object"){const e={};for(const n in t)t.hasOwnProperty(n)&&(e[n]=nm(t[n]));return e}return t},N1=w3({name:"products",initialState:ZJ,reducers:t=>({fetchProductsTC:t.asyncThunk(async(e,n)=>{try{return(await GS(Kd(zl,"products"))).docs.map(o=>{const l=o.data(),c=nm(l);return{id:o.id,...c}})}catch(i){return n.rejectWithValue(i.message??"Failed to fetch products")}},{fulfilled:(e,n)=>{e.products=n.payload,e.status="succeeded"},pending:e=>{e.status="loading",e.error=null},rejected:(e,n)=>{e.status="failed",e.error=n.payload}}),deleteProductTC:t.asyncThunk(async(e,n)=>{try{return await IL(LS(zl,"products",e)),e}catch(i){return n.rejectWithValue(i.message??"Failed to delete product")}},{fulfilled:(e,n)=>{e.products=e.products.filter(i=>i.id!==n.payload)}}),addProductTC:t.asyncThunk(async(e,n)=>{console.log("Adding product to Firebase:",e);debugger;try{const i={...e,guarantee:{start:e.guarantee.start,end:e.guarantee.end},date:ZK()};return console.log("Firebase product data:",i),{id:(await RL(Kd(zl,"products"),i)).id,...e,date:new Date().toISOString()}}catch(i){return n.rejectWithValue(i.message??"Failed to add product")}},{fulfilled:(e,n)=>{e.products.push(n.payload)}})}),selectors:{selectProducts:t=>t.products,selectStatus:t=>t.status,selectError:t=>t.error}}),{selectProducts:QJ,selectStatus:XJ,selectError:JJ}=N1.selectors,{fetchProductsTC:S3,deleteProductTC:C3,addProductTC:eee}=N1.actions,tee=N1.reducer,nee=async t=>{try{const e=Kd(zl,"products"),n=FK(e,jK("order","==",t));return(await GS(n)).docs.map(o=>({id:o.id,...o.data()}))}catch(e){return console.error("Ошибка при получении продуктов:",e),[]}},iee={orders:[],status:"idle",error:null},P1=w3({name:"orders",initialState:iee,reducers:t=>({fetchOrdersTC:t.asyncThunk(async(e,n)=>{try{const r=(await GS(Kd(zl,"orders"))).docs.map(l=>{const c=l.data(),f=nm(c);return{id:l.id,...f}});return await Promise.all(r.map(async l=>{const c=await nee(l.id);return{...l,products:nm(c)}}))}catch(i){return n.rejectWithValue(i.message??"Failed to fetch orders")}},{fulfilled:(e,n)=>{e.orders=n.payload,e.status="succeeded"},pending:e=>{e.error=null,e.status="loading"},rejected:(e,n)=>{e.status="failed",e.error=n.payload}}),deleteOrderTC:t.asyncThunk(async(e,n)=>{try{return await IL(LS(zl,"orders",e)),e}catch(i){return n.rejectWithValue(i.message??"Failed to delete order")}},{pending:e=>{e.status="loading"},fulfilled:(e,n)=>{e.orders=e.orders.filter(i=>i.id!==n.payload),e.status="succeeded"},rejected:(e,n)=>{e.status="failed",e.error=n.payload}}),addOrderTC:t.asyncThunk(async(e,n)=>{try{return{id:(await RL(Kd(zl,"orders"),e)).id,...e}}catch(i){return n.rejectWithValue(i.message??"Failed to add order")}},{fulfilled:(e,n)=>{e.orders.push(n.payload)},rejected:(e,n)=>{e.error=n.payload}})}),selectors:{selectOrders:t=>t.orders,selectStatus:t=>t.status,selectError:t=>t.error}}),{fetchOrdersTC:ree,deleteOrderTC:see,addOrderTC:oee}=P1.actions,{selectOrders:O1,selectStatus:Cle,selectError:Ale}=P1.selectors,aee=P1.reducer;var sT={exports:{}},oT={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $N;function lee(){if($N)return oT;$N=1;var t=hy();function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,r=t.useRef,o=t.useEffect,l=t.useMemo,c=t.useDebugValue;return oT.useSyncExternalStoreWithSelector=function(f,d,p,y,v){var w=r(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=l(function(){function O(H){if(!j){if(j=!0,V=H,H=y(H),v!==void 0&&S.hasValue){var ie=S.value;if(v(ie,H))return k=ie}return k=H}if(ie=k,n(V,H))return ie;var x=y(H);return v!==void 0&&v(ie,x)?(V=H,ie):(V=H,k=x)}var j=!1,V,k,K=p===void 0?null:p;return[function(){return O(d())},K===null?void 0:function(){return O(K())}]},[d,p,y,v]);var N=i(f,w[0],w[1]);return o(function(){S.hasValue=!0,S.value=N},[N]),c(N),N},oT}var HN;function uee(){return HN||(HN=1,sT.exports=lee()),sT.exports}var cee=uee();function hee(t){t()}function fee(){let t=null,e=null;return{clear(){t=null,e=null},notify(){hee(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const r=e={callback:n,next:null,prev:e};return r.prev?r.prev.next=r:t=r,function(){!i||t===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var GN={notify(){},get:()=>[]};function dee(t,e){let n,i=GN,r=0,o=!1;function l(N){p();const O=i.subscribe(N);let j=!1;return()=>{j||(j=!0,O(),y())}}function c(){i.notify()}function f(){S.onStateChange&&S.onStateChange()}function d(){return o}function p(){r++,n||(n=t.subscribe(f),i=fee())}function y(){r--,n&&r===0&&(n(),n=void 0,i.clear(),i=GN)}function v(){o||(o=!0,p())}function w(){o&&(o=!1,y())}const S={addNestedSub:l,notifyNestedSubs:c,handleChangeWrapper:f,isSubscribed:d,trySubscribe:v,tryUnsubscribe:w,getListeners:()=>i};return S}var mee=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pee=mee(),gee=()=>typeof navigator<"u"&&navigator.product==="ReactNative",_ee=gee(),yee=()=>pee||_ee?A.useLayoutEffect:A.useEffect,vee=yee(),Eee=Symbol.for("react-redux-context"),Tee=typeof globalThis<"u"?globalThis:{};function bee(){if(!A.createContext)return{};const t=Tee[Eee]??=new Map;let e=t.get(A.createContext);return e||(e=A.createContext(null),t.set(A.createContext,e)),e}var Na=bee();function wee(t){const{children:e,context:n,serverState:i,store:r}=t,o=A.useMemo(()=>{const f=dee(r);return{store:r,subscription:f,getServerState:i?()=>i:void 0}},[r,i]),l=A.useMemo(()=>r.getState(),[r]);vee(()=>{const{subscription:f}=o;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==r.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[o,l]);const c=n||Na;return A.createElement(c.Provider,{value:o},e)}var See=wee;function M1(t=Na){return function(){return A.useContext(t)}}var A3=M1();function I3(t=Na){const e=t===Na?A3:M1(t),n=()=>{const{store:i}=e();return i};return Object.assign(n,{withTypes:()=>n}),n}var Cee=I3();function Aee(t=Na){const e=t===Na?Cee:I3(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Iee=Aee(),Ree=(t,e)=>t===e;function xee(t=Na){const e=t===Na?A3:M1(t),n=(i,r={})=>{const{equalityFn:o=Ree}=typeof r=="function"?{equalityFn:r}:r,l=e(),{store:c,subscription:f,getServerState:d}=l;A.useRef(!0);const p=A.useCallback({[i.name](v){return i(v)}}[i.name],[i]),y=cee.useSyncExternalStoreWithSelector(f.addNestedSub,c.getState,d||c.getState,p,o);return A.useDebugValue(y),y};return Object.assign(n,{withTypes:()=>n}),n}var Dee=xee();const jl=Dee.withTypes(),Nee=t=>t.products.products,Pee=y3([Nee],t=>t.reduce((e,n)=>{const i=n.order.toString();return e[i]||(e[i]=[]),e[i].push(n),e},{}));var aT={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var KN;function Oee(){return KN||(KN=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var o="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(o=r(o,i(c)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var c in o)e.call(o,c)&&o[c]&&(l=r(l,c));return l}function r(o,l){return l?o?o+" "+l:o+l:o}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(aT)),aT.exports}var Mee=Oee();const kt=om(Mee);function kee(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Bb(t,e){return Bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Bb(t,e)}function Vee(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Bb(t,e)}const Lee=["xxl","xl","lg","md","sm","xs"],zee="xs",Nm=A.createContext({prefixes:{},breakpoints:Lee,minBreakpoint:zee}),{Consumer:Ile,Provider:Rle}=Nm;function xn(t,e){const{prefixes:n}=A.useContext(Nm);return t||n[e]||e}function R3(){const{breakpoints:t}=A.useContext(Nm);return t}function x3(){const{minBreakpoint:t}=A.useContext(Nm);return t}function Uee(){const{dir:t}=A.useContext(Nm);return t==="rtl"}function rv(t){return t&&t.ownerDocument||document}function Fee(t){var e=rv(t);return e&&e.defaultView||window}function jee(t,e){return Fee(t).getComputedStyle(t,e)}var Bee=/([A-Z])/g;function qee(t){return t.replace(Bee,"-$1").toLowerCase()}var $ee=/^ms-/;function Sg(t){return qee(t).replace($ee,"-ms-")}var Hee=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function Gee(t){return!!(t&&Hee.test(t))}function Bl(t,e){var n="",i="";if(typeof e=="string")return t.style.getPropertyValue(Sg(e))||jee(t).getPropertyValue(Sg(e));Object.keys(e).forEach(function(r){var o=e[r];!o&&o!==0?t.style.removeProperty(Sg(r)):Gee(r)?i+=r+"("+o+") ":n+=Sg(r)+": "+o+";"}),i&&(n+="transform: "+i+";"),t.style.cssText+=";"+n}var lT={exports:{}},uT,WN;function Kee(){if(WN)return uT;WN=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return uT=t,uT}var cT,YN;function Wee(){if(YN)return cT;YN=1;var t=Kee();function e(){}function n(){}return n.resetWarningCache=e,cT=function(){function i(l,c,f,d,p,y){if(y!==t){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}i.isRequired=i;function r(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:e};return o.PropTypes=o,o},cT}var ZN;function Yee(){return ZN||(ZN=1,lT.exports=Wee()()),lT.exports}var Zee=Yee();const oo=om(Zee),QN={disabled:!1},D3=St.createContext(null);var Qee=function(e){return e.scrollTop},Jf="unmounted",Tl="exited",aa="entering",Al="entered",qb="exiting",wo=(function(t){Vee(e,t);function e(i,r){var o;o=t.call(this,i,r)||this;var l=r,c=l&&!l.isMounting?i.enter:i.appear,f;return o.appearStatus=null,i.in?c?(f=Tl,o.appearStatus=aa):f=Al:i.unmountOnExit||i.mountOnEnter?f=Jf:f=Tl,o.state={status:f},o.nextCallback=null,o}e.getDerivedStateFromProps=function(r,o){var l=r.in;return l&&o.status===Jf?{status:Tl}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(r){var o=null;if(r!==this.props){var l=this.state.status;this.props.in?l!==aa&&l!==Al&&(o=aa):(l===aa||l===Al)&&(o=qb)}this.updateStatus(!1,o)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var r=this.props.timeout,o,l,c;return o=l=c=r,r!=null&&typeof r!="number"&&(o=r.exit,l=r.enter,c=r.appear!==void 0?r.appear:l),{exit:o,enter:l,appear:c}},n.updateStatus=function(r,o){if(r===void 0&&(r=!1),o!==null)if(this.cancelNextCallback(),o===aa){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:Tc.findDOMNode(this);l&&Qee(l)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Tl&&this.setState({status:Jf})},n.performEnter=function(r){var o=this,l=this.props.enter,c=this.context?this.context.isMounting:r,f=this.props.nodeRef?[c]:[Tc.findDOMNode(this),c],d=f[0],p=f[1],y=this.getTimeouts(),v=c?y.appear:y.enter;if(!r&&!l||QN.disabled){this.safeSetState({status:Al},function(){o.props.onEntered(d)});return}this.props.onEnter(d,p),this.safeSetState({status:aa},function(){o.props.onEntering(d,p),o.onTransitionEnd(v,function(){o.safeSetState({status:Al},function(){o.props.onEntered(d,p)})})})},n.performExit=function(){var r=this,o=this.props.exit,l=this.getTimeouts(),c=this.props.nodeRef?void 0:Tc.findDOMNode(this);if(!o||QN.disabled){this.safeSetState({status:Tl},function(){r.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:qb},function(){r.props.onExiting(c),r.onTransitionEnd(l.exit,function(){r.safeSetState({status:Tl},function(){r.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(r,o){o=this.setNextCallback(o),this.setState(r,o)},n.setNextCallback=function(r){var o=this,l=!0;return this.nextCallback=function(c){l&&(l=!1,o.nextCallback=null,r(c))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(r,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:Tc.findDOMNode(this),c=r==null&&!this.props.addEndListener;if(!l||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],d=f[0],p=f[1];this.props.addEndListener(d,p)}r!=null&&setTimeout(this.nextCallback,r)},n.render=function(){var r=this.state.status;if(r===Jf)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var c=kee(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return St.createElement(D3.Provider,{value:null},typeof l=="function"?l(r,c):St.cloneElement(St.Children.only(l),c))},e})(St.Component);wo.contextType=D3;wo.propTypes={};function uc(){}wo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:uc,onEntering:uc,onEntered:uc,onExit:uc,onExiting:uc,onExited:uc};wo.UNMOUNTED=Jf;wo.EXITED=Tl;wo.ENTERING=aa;wo.ENTERED=Al;wo.EXITING=qb;function Xee(t){return t.code==="Escape"||t.keyCode===27}function Jee(){const t=A.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}function sv(t){if(!t||typeof t=="function")return null;const{major:e}=Jee();return e>=19?t.props.ref:t.ref}const xh=!!(typeof window<"u"&&window.document&&window.document.createElement);var $b=!1,Hb=!1;try{var hT={get passive(){return $b=!0},get once(){return Hb=$b=!0}};xh&&(window.addEventListener("test",hT,hT),window.removeEventListener("test",hT,!0))}catch{}function N3(t,e,n,i){if(i&&typeof i!="boolean"&&!Hb){var r=i.once,o=i.capture,l=n;!Hb&&r&&(l=n.__once||function c(f){this.removeEventListener(e,c,o),n.call(this,f)},n.__once=l),t.addEventListener(e,l,$b?i:o)}t.addEventListener(e,n,i)}function Gb(t,e,n,i){var r=i&&typeof i!="boolean"?i.capture:i;t.removeEventListener(e,n,r),n.__once&&t.removeEventListener(e,n.__once,r)}function ty(t,e,n,i){return N3(t,e,n,i),function(){Gb(t,e,n,i)}}function ete(t,e,n,i){if(i===void 0&&(i=!0),t){var r=document.createEvent("HTMLEvents");r.initEvent(e,n,i),t.dispatchEvent(r)}}function tte(t){var e=Bl(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function nte(t,e,n){n===void 0&&(n=5);var i=!1,r=setTimeout(function(){i||ete(t,"transitionend",!0)},e+n),o=ty(t,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),o()}}function P3(t,e,n,i){n==null&&(n=tte(t)||0);var r=nte(t,n,i),o=ty(t,"transitionend",e);return function(){r(),o()}}function XN(t,e){const n=Bl(t,e)||"",i=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*i}function ite(t,e){const n=XN(t,"transitionDuration"),i=XN(t,"transitionDelay"),r=P3(t,o=>{o.target===t&&(r(),e(o))},n+i)}function rte(t){t.offsetHeight}const JN=t=>!t||typeof t=="function"?t:e=>{t.current=e};function ste(t,e){const n=JN(t),i=JN(e);return r=>{n&&n(r),i&&i(r)}}function O3(t,e){return A.useMemo(()=>ste(t,e),[t,e])}function ote(t){return t&&"setState"in t?Tc.findDOMNode(t):t??null}const M3=St.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:i,onExiting:r,onExited:o,addEndListener:l,children:c,childRef:f,...d},p)=>{const y=A.useRef(null),v=O3(y,f),w=ie=>{v(ote(ie))},S=ie=>x=>{ie&&y.current&&ie(y.current,x)},N=A.useCallback(S(t),[t]),O=A.useCallback(S(e),[e]),j=A.useCallback(S(n),[n]),V=A.useCallback(S(i),[i]),k=A.useCallback(S(r),[r]),K=A.useCallback(S(o),[o]),H=A.useCallback(S(l),[l]);return R.jsx(wo,{ref:p,...d,onEnter:N,onEntered:j,onEntering:O,onExit:V,onExited:K,onExiting:k,addEndListener:H,nodeRef:y,children:typeof c=="function"?(ie,x)=>c(ie,{...x,ref:w}):St.cloneElement(c,{ref:w})})});M3.displayName="TransitionWrapper";function ate(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t},[t]),e}function Kb(t){const e=ate(t);return A.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const lte=(t=>A.forwardRef((e,n)=>R.jsx("div",{...e,ref:n,className:kt(e.className,t)})));function ute(t){const e=A.useRef(t);return A.useEffect(()=>{e.current=t},[t]),e}function Il(t){const e=ute(t);return A.useCallback(function(...n){return e.current&&e.current(...n)},[e])}function cte(){const t=A.useRef(!0),e=A.useRef(()=>t.current);return A.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function hte(t){const e=A.useRef(null);return A.useEffect(()=>{e.current=t}),e.current}const fte=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",dte=typeof document<"u",eP=dte||fte?A.useLayoutEffect:A.useEffect,mte=["as","disabled"];function pte(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function gte(t){return!t||t.trim()==="#"}function k3({tagName:t,disabled:e,href:n,target:i,rel:r,role:o,onClick:l,tabIndex:c=0,type:f}){t||(n!=null||i!=null||r!=null?t="a":t="button");const d={tagName:t};if(t==="button")return[{type:f||"button",disabled:e},d];const p=v=>{if((e||t==="a"&&gte(n))&&v.preventDefault(),e){v.stopPropagation();return}l?.(v)},y=v=>{v.key===" "&&(v.preventDefault(),p(v))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:o??"button",disabled:void 0,tabIndex:e?void 0:c,href:n,target:t==="a"?i:void 0,"aria-disabled":e||void 0,rel:t==="a"?r:void 0,onClick:p,onKeyDown:y},d]}const _te=A.forwardRef((t,e)=>{let{as:n,disabled:i}=t,r=pte(t,mte);const[o,{tagName:l}]=k3(Object.assign({tagName:n,disabled:i},r));return R.jsx(l,Object.assign({},r,o,{ref:e}))});_te.displayName="Button";const yte={[aa]:"show",[Al]:"show"},k1=A.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:i,...r},o)=>{const l={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},c=A.useCallback((f,d)=>{rte(f),i?.(f,d)},[i]);return R.jsx(M3,{ref:o,addEndListener:ite,...l,onEnter:c,childRef:sv(e),children:(f,d)=>A.cloneElement(e,{...d,className:kt("fade",t,e.props.className,yte[f],n[f])})})});k1.displayName="Fade";const vte={"aria-label":oo.string,onClick:oo.func,variant:oo.oneOf(["white"])},V1=A.forwardRef(({className:t,variant:e,"aria-label":n="Close",...i},r)=>R.jsx("button",{ref:r,type:"button",className:kt("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...i}));V1.displayName="CloseButton";V1.propTypes=vte;const hh=A.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:i,active:r=!1,disabled:o=!1,className:l,...c},f)=>{const d=xn(e,"btn"),[p,{tagName:y}]=k3({tagName:t,disabled:o,...c}),v=y;return R.jsx(v,{...p,...c,ref:f,disabled:o,className:kt(l,d,r&&"active",n&&`${d}-${n}`,i&&`${d}-${i}`,c.href&&o&&"disabled")})});hh.displayName="Button";function Ete(t){const e=A.useRef(t);return e.current=t,e}function Tte(t){const e=Ete(t);A.useEffect(()=>()=>e.current(),[])}function bte(t,e){return A.Children.toArray(t).some(n=>A.isValidElement(n)&&n.type===e)}function wte({as:t,bsPrefix:e,className:n,...i}){e=xn(e,"col");const r=R3(),o=x3(),l=[],c=[];return r.forEach(f=>{const d=i[f];delete i[f];let p,y,v;typeof d=="object"&&d!=null?{span:p,offset:y,order:v}=d:p=d;const w=f!==o?`-${f}`:"";p&&l.push(p===!0?`${e}${w}`:`${e}${w}-${p}`),v!=null&&c.push(`order${w}-${v}`),y!=null&&c.push(`offset${w}-${y}`)}),[{...i,className:kt(n,...l,...c)},{as:t,bsPrefix:e,spans:l}]}const to=A.forwardRef((t,e)=>{const[{className:n,...i},{as:r="div",bsPrefix:o,spans:l}]=wte(t);return R.jsx(r,{...i,ref:e,className:kt(n,!l.length&&o)})});to.displayName="Col";var Ste=Function.prototype.bind.call(Function.prototype.call,[].slice);function cc(t,e){return Ste(t.querySelectorAll(e))}function tP(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}const Cte="data-rr-ui-";function Ate(t){return`${Cte}${t}`}const V3=A.createContext(xh?window:void 0);V3.Provider;function L1(){return A.useContext(V3)}const Ite={type:oo.string,tooltip:oo.bool,as:oo.elementType},ov=A.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:i=!1,...r},o)=>R.jsx(t,{...r,ref:o,className:kt(e,`${n}-${i?"tooltip":"feedback"}`)}));ov.displayName="Feedback";ov.propTypes=Ite;const vo=A.createContext({}),z1=A.forwardRef(({id:t,bsPrefix:e,className:n,type:i="checkbox",isValid:r=!1,isInvalid:o=!1,as:l="input",...c},f)=>{const{controlId:d}=A.useContext(vo);return e=xn(e,"form-check-input"),R.jsx(l,{...c,ref:f,type:i,id:t||d,className:kt(n,e,r&&"is-valid",o&&"is-invalid")})});z1.displayName="FormCheckInput";const ny=A.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...i},r)=>{const{controlId:o}=A.useContext(vo);return t=xn(t,"form-check-label"),R.jsx("label",{...i,ref:r,htmlFor:n||o,className:kt(e,t)})});ny.displayName="FormCheckLabel";const L3=A.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:i=!1,reverse:r=!1,disabled:o=!1,isValid:l=!1,isInvalid:c=!1,feedbackTooltip:f=!1,feedback:d,feedbackType:p,className:y,style:v,title:w="",type:S="checkbox",label:N,children:O,as:j="input",...V},k)=>{e=xn(e,"form-check"),n=xn(n,"form-switch");const{controlId:K}=A.useContext(vo),H=A.useMemo(()=>({controlId:t||K}),[K,t]),ie=!O&&N!=null&&N!==!1||bte(O,ny),x=R.jsx(z1,{...V,type:S==="switch"?"checkbox":S,ref:k,isValid:l,isInvalid:c,disabled:o,as:j});return R.jsx(vo.Provider,{value:H,children:R.jsx("div",{style:v,className:kt(y,ie&&e,i&&`${e}-inline`,r&&`${e}-reverse`,S==="switch"&&n),children:O||R.jsxs(R.Fragment,{children:[x,ie&&R.jsx(ny,{title:w,children:N}),d&&R.jsx(ov,{type:p,tooltip:f,children:d})]})})})});L3.displayName="FormCheck";const iy=Object.assign(L3,{Input:z1,Label:ny}),z3=A.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:i,id:r,className:o,isValid:l=!1,isInvalid:c=!1,plaintext:f,readOnly:d,as:p="input",...y},v)=>{const{controlId:w}=A.useContext(vo);return t=xn(t,"form-control"),R.jsx(p,{...y,type:e,size:i,ref:v,readOnly:d,id:r||w,className:kt(o,f?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,l&&"is-valid",c&&"is-invalid")})});z3.displayName="FormControl";const Rte=Object.assign(z3,{Feedback:ov}),U3=A.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=xn(e,"form-floating"),R.jsx(n,{ref:r,className:kt(t,e),...i})));U3.displayName="FormFloating";const U1=A.forwardRef(({controlId:t,as:e="div",...n},i)=>{const r=A.useMemo(()=>({controlId:t}),[t]);return R.jsx(vo.Provider,{value:r,children:R.jsx(e,{...n,ref:i})})});U1.displayName="FormGroup";const F3=A.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:i=!1,className:r,htmlFor:o,...l},c)=>{const{controlId:f}=A.useContext(vo);e=xn(e,"form-label");let d="col-form-label";typeof n=="string"&&(d=`${d} ${d}-${n}`);const p=kt(r,e,i&&"visually-hidden",n&&d);return o=o||f,n?R.jsx(to,{ref:c,as:"label",className:p,htmlFor:o,...l}):R.jsx(t,{ref:c,className:p,htmlFor:o,...l})});F3.displayName="FormLabel";const j3=A.forwardRef(({bsPrefix:t,className:e,id:n,...i},r)=>{const{controlId:o}=A.useContext(vo);return t=xn(t,"form-range"),R.jsx("input",{...i,type:"range",ref:r,className:kt(e,t),id:n||o})});j3.displayName="FormRange";const B3=A.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:i,isValid:r=!1,isInvalid:o=!1,id:l,...c},f)=>{const{controlId:d}=A.useContext(vo);return t=xn(t,"form-select"),R.jsx("select",{...c,size:n,ref:f,className:kt(i,t,e&&`${t}-${e}`,r&&"is-valid",o&&"is-invalid"),id:l||d})});B3.displayName="FormSelect";const q3=A.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:i,...r},o)=>(t=xn(t,"form-text"),R.jsx(n,{...r,ref:o,className:kt(e,t,i&&"text-muted")})));q3.displayName="FormText";const $3=A.forwardRef((t,e)=>R.jsx(iy,{...t,ref:e,type:"switch"}));$3.displayName="Switch";const xte=Object.assign($3,{Input:iy.Input,Label:iy.Label}),H3=A.forwardRef(({bsPrefix:t,className:e,children:n,controlId:i,label:r,...o},l)=>(t=xn(t,"form-floating"),R.jsxs(U1,{ref:l,className:kt(e,t),controlId:i,...o,children:[n,R.jsx("label",{htmlFor:i,children:r})]})));H3.displayName="FloatingLabel";const Dte={_ref:oo.any,validated:oo.bool,as:oo.elementType},F1=A.forwardRef(({className:t,validated:e,as:n="form",...i},r)=>R.jsx(n,{...i,ref:r,className:kt(t,e&&"was-validated")}));F1.displayName="Form";F1.propTypes=Dte;const Re=Object.assign(F1,{Group:U1,Control:Rte,Floating:U3,Check:iy,Switch:xte,Label:F3,Text:q3,Range:j3,Select:B3,FloatingLabel:H3}),nP=t=>!t||typeof t=="function"?t:e=>{t.current=e};function Nte(t,e){const n=nP(t),i=nP(e);return r=>{n&&n(r),i&&i(r)}}function j1(t,e){return A.useMemo(()=>Nte(t,e),[t,e])}var Cg;function iP(t){if((!Cg&&Cg!==0||t)&&xh){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Cg=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Cg}function Pte(){return A.useState(null)}function fT(t){t===void 0&&(t=rv());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function Ote(t){const e=A.useRef(t);return e.current=t,e}function Mte(t){const e=Ote(t);A.useEffect(()=>()=>e.current(),[])}function kte(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const rP=Ate("modal-open");class B1{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:i=!1}={}){this.handleContainerOverflow=n,this.isRTL=i,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return kte(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[i]:r.style[i]},e.scrollBarWidth&&(n[i]=`${parseInt(Bl(r,i)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(rP,""),Bl(r,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(rP),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const dT=(t,e)=>xh?t==null?(e||rv()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function Vte(t,e){const n=L1(),[i,r]=A.useState(()=>dT(t,n?.document));if(!i){const o=dT(t);o&&r(o)}return A.useEffect(()=>{},[e,i]),A.useEffect(()=>{const o=dT(t);o!==i&&r(o)},[t,i]),i}function Lte({children:t,in:e,onExited:n,mountOnEnter:i,unmountOnExit:r}){const o=A.useRef(null),l=A.useRef(e),c=Il(n);A.useEffect(()=>{e?l.current=!0:c(o.current)},[e,c]);const f=j1(o,sv(t)),d=A.cloneElement(t,{ref:f});return e?d:r||!l.current&&i?null:d}const zte=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Ute(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function Fte(t){let{onEnter:e,onEntering:n,onEntered:i,onExit:r,onExiting:o,onExited:l,addEndListener:c,children:f}=t,d=Ute(t,zte);const p=A.useRef(null),y=j1(p,sv(f)),v=K=>H=>{K&&p.current&&K(p.current,H)},w=A.useCallback(v(e),[e]),S=A.useCallback(v(n),[n]),N=A.useCallback(v(i),[i]),O=A.useCallback(v(r),[r]),j=A.useCallback(v(o),[o]),V=A.useCallback(v(l),[l]),k=A.useCallback(v(c),[c]);return Object.assign({},d,{nodeRef:p},e&&{onEnter:w},n&&{onEntering:S},i&&{onEntered:N},r&&{onExit:O},o&&{onExiting:j},l&&{onExited:V},c&&{addEndListener:k},{children:typeof f=="function"?(K,H)=>f(K,Object.assign({},H,{ref:y})):A.cloneElement(f,{ref:y})})}const jte=["component"];function Bte(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}const qte=A.forwardRef((t,e)=>{let{component:n}=t,i=Bte(t,jte);const r=Fte(i);return R.jsx(n,Object.assign({ref:e},r))});function $te({in:t,onTransition:e}){const n=A.useRef(null),i=A.useRef(!0),r=Il(e);return eP(()=>{if(!n.current)return;let o=!1;return r({in:t,element:n.current,initial:i.current,isStale:()=>o}),()=>{o=!0}},[t,r]),eP(()=>(i.current=!1,()=>{i.current=!0}),[]),n}function Hte({children:t,in:e,onExited:n,onEntered:i,transition:r}){const[o,l]=A.useState(!e);e&&o&&l(!1);const c=$te({in:!!e,onTransition:d=>{const p=()=>{d.isStale()||(d.in?i?.(d.element,d.initial):(l(!0),n?.(d.element)))};Promise.resolve(r(d)).then(p,y=>{throw d.in||l(!0),y})}}),f=j1(c,sv(t));return o&&!e?null:A.cloneElement(t,{ref:f})}function sP(t,e,n){return t?R.jsx(qte,Object.assign({},n,{component:t})):e?R.jsx(Hte,Object.assign({},n,{transition:e})):R.jsx(Lte,Object.assign({},n))}const Gte=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Kte(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}let mT;function Wte(t){return mT||(mT=new B1({ownerDocument:t?.document})),mT}function Yte(t){const e=L1(),n=t||Wte(e),i=A.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>n.add(i.current),remove:()=>n.remove(i.current),isTopModal:()=>n.isTopModal(i.current),setDialogRef:A.useCallback(r=>{i.current.dialog=r},[]),setBackdropRef:A.useCallback(r=>{i.current.backdrop=r},[])})}const G3=A.forwardRef((t,e)=>{let{show:n=!1,role:i="dialog",className:r,style:o,children:l,backdrop:c=!0,keyboard:f=!0,onBackdropClick:d,onEscapeKeyDown:p,transition:y,runTransition:v,backdropTransition:w,runBackdropTransition:S,autoFocus:N=!0,enforceFocus:O=!0,restoreFocus:j=!0,restoreFocusOptions:V,renderDialog:k,renderBackdrop:K=ft=>R.jsx("div",Object.assign({},ft)),manager:H,container:ie,onShow:x,onHide:I=()=>{},onExit:P,onExited:F,onExiting:L,onEnter:B,onEntering:M,onEntered:Pe}=t,Ke=Kte(t,Gte);const ee=L1(),he=Vte(ie),ge=Yte(H),ke=cte(),je=hte(n),[q,oe]=A.useState(!n),_e=A.useRef(null);A.useImperativeHandle(e,()=>ge,[ge]),xh&&!je&&n&&(_e.current=fT(ee?.document)),n&&q&&oe(!1);const Te=Il(()=>{if(ge.add(),kn.current=ty(document,"keydown",Vt),ct.current=ty(document,"focus",()=>setTimeout(Ue),!0),x&&x(),N){var ft,pi;const Oi=fT((ft=(pi=ge.dialog)==null?void 0:pi.ownerDocument)!=null?ft:ee?.document);ge.dialog&&Oi&&!tP(ge.dialog,Oi)&&(_e.current=Oi,ge.dialog.focus())}}),De=Il(()=>{if(ge.remove(),kn.current==null||kn.current(),ct.current==null||ct.current(),j){var ft;(ft=_e.current)==null||ft.focus==null||ft.focus(V),_e.current=null}});A.useEffect(()=>{!n||!he||Te()},[n,he,Te]),A.useEffect(()=>{q&&De()},[q,De]),Mte(()=>{De()});const Ue=Il(()=>{if(!O||!ke()||!ge.isTopModal())return;const ft=fT(ee?.document);ge.dialog&&ft&&!tP(ge.dialog,ft)&&ge.dialog.focus()}),He=Il(ft=>{ft.target===ft.currentTarget&&(d?.(ft),c===!0&&I())}),Vt=Il(ft=>{f&&Xee(ft)&&ge.isTopModal()&&(p?.(ft),ft.defaultPrevented||I())}),ct=A.useRef(),kn=A.useRef(),Pi=(...ft)=>{oe(!0),F?.(...ft)};if(!he)return null;const Jn=Object.assign({role:i,ref:ge.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},Ke,{style:o,className:r,tabIndex:-1});let mi=k?k(Jn):R.jsx("div",Object.assign({},Jn,{children:A.cloneElement(l,{role:"document"})}));mi=sP(y,v,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:P,onExiting:L,onExited:Pi,onEnter:B,onEntering:M,onEntered:Pe,children:mi});let fn=null;return c&&(fn=K({ref:ge.setBackdropRef,onClick:He}),fn=sP(w,S,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:fn})),R.jsx(R.Fragment,{children:Tc.createPortal(R.jsxs(R.Fragment,{children:[fn,mi]}),he)})});G3.displayName="Modal";const Zte=Object.assign(G3,{Manager:B1});function Qte(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function Xte(t,e){t.classList?t.classList.add(e):Qte(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function oP(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Jte(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=oP(t.className,e):t.setAttribute("class",oP(t.className&&t.className.baseVal||"",e))}const hc={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class ene extends B1{adjustAndStore(e,n,i){const r=n.style[e];n.dataset[e]=r,Bl(n,{[e]:`${parseFloat(Bl(n,e))+i}px`})}restore(e,n){const i=n.dataset[e];i!==void 0&&(delete n.dataset[e],Bl(n,{[e]:i}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(Xte(n,"modal-open"),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";cc(n,hc.FIXED_CONTENT).forEach(o=>this.adjustAndStore(i,o,e.scrollBarWidth)),cc(n,hc.STICKY_CONTENT).forEach(o=>this.adjustAndStore(r,o,-e.scrollBarWidth)),cc(n,hc.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(r,o,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();Jte(n,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";cc(n,hc.FIXED_CONTENT).forEach(o=>this.restore(i,o)),cc(n,hc.STICKY_CONTENT).forEach(o=>this.restore(r,o)),cc(n,hc.NAVBAR_TOGGLER).forEach(o=>this.restore(r,o))}}let pT;function tne(t){return pT||(pT=new ene(t)),pT}const K3=A.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=xn(e,"modal-body"),R.jsx(n,{ref:r,className:kt(t,e),...i})));K3.displayName="ModalBody";const W3=A.createContext({onHide(){}}),q1=A.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:i,size:r,fullscreen:o,children:l,scrollable:c,...f},d)=>{t=xn(t,"modal");const p=`${t}-dialog`,y=typeof o=="string"?`${t}-fullscreen-${o}`:`${t}-fullscreen`;return R.jsx("div",{...f,ref:d,className:kt(p,e,r&&`${t}-${r}`,i&&`${p}-centered`,c&&`${p}-scrollable`,o&&y),children:R.jsx("div",{className:kt(`${t}-content`,n),children:l})})});q1.displayName="ModalDialog";const Y3=A.forwardRef(({className:t,bsPrefix:e,as:n="div",...i},r)=>(e=xn(e,"modal-footer"),R.jsx(n,{ref:r,className:kt(t,e),...i})));Y3.displayName="ModalFooter";const Z3=A.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:i,children:r,...o},l)=>{const c=A.useContext(W3),f=Kb(()=>{c?.onHide(),i?.()});return R.jsxs("div",{ref:l,...o,children:[r,n&&R.jsx(V1,{"aria-label":t,variant:e,onClick:f})]})});Z3.displayName="AbstractModalHeader";const Q3=A.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:i=!1,...r},o)=>(t=xn(t,"modal-header"),R.jsx(Z3,{ref:o,...r,className:kt(e,t),closeLabel:n,closeButton:i})));Q3.displayName="ModalHeader";const nne=lte("h4"),X3=A.forwardRef(({className:t,bsPrefix:e,as:n=nne,...i},r)=>(e=xn(e,"modal-title"),R.jsx(n,{ref:r,className:kt(t,e),...i})));X3.displayName="ModalTitle";function ine(t){return R.jsx(k1,{...t,timeout:null})}function rne(t){return R.jsx(k1,{...t,timeout:null})}const J3=A.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:i,contentClassName:r,children:o,dialogAs:l=q1,"data-bs-theme":c,"aria-labelledby":f,"aria-describedby":d,"aria-label":p,show:y=!1,animation:v=!0,backdrop:w=!0,keyboard:S=!0,onEscapeKeyDown:N,onShow:O,onHide:j,container:V,autoFocus:k=!0,enforceFocus:K=!0,restoreFocus:H=!0,restoreFocusOptions:ie,onEntered:x,onExit:I,onExiting:P,onEnter:F,onEntering:L,onExited:B,backdropClassName:M,manager:Pe,...Ke},ee)=>{const[he,ge]=A.useState({}),[ke,je]=A.useState(!1),q=A.useRef(!1),oe=A.useRef(!1),_e=A.useRef(null),[Te,De]=Pte(),Ue=O3(ee,De),He=Kb(j),Vt=Uee();t=xn(t,"modal");const ct=A.useMemo(()=>({onHide:He}),[He]);function kn(){return Pe||tne({isRTL:Vt})}function Pi(pe){if(!xh)return;const We=kn().getScrollbarWidth()>0,et=pe.scrollHeight>rv(pe).documentElement.clientHeight;ge({paddingRight:We&&!et?iP():void 0,paddingLeft:!We&&et?iP():void 0})}const Jn=Kb(()=>{Te&&Pi(Te.dialog)});Tte(()=>{Gb(window,"resize",Jn),_e.current==null||_e.current()});const mi=()=>{q.current=!0},fn=pe=>{q.current&&Te&&pe.target===Te.dialog&&(oe.current=!0),q.current=!1},ft=()=>{je(!0),_e.current=P3(Te.dialog,()=>{je(!1)})},pi=pe=>{pe.target===pe.currentTarget&&ft()},Oi=pe=>{if(w==="static"){pi(pe);return}if(oe.current||pe.target!==pe.currentTarget){oe.current=!1;return}j?.()},So=pe=>{S?N?.(pe):(pe.preventDefault(),w==="static"&&ft())},zt=(pe,We)=>{pe&&Pi(pe),F?.(pe,We)},z=pe=>{_e.current==null||_e.current(),I?.(pe)},Z=(pe,We)=>{L?.(pe,We),N3(window,"resize",Jn)},re=pe=>{pe&&(pe.style.display=""),B?.(pe),Gb(window,"resize",Jn)},we=A.useCallback(pe=>R.jsx("div",{...pe,className:kt(`${t}-backdrop`,M,!v&&"show")}),[v,M,t]),fe={...n,...he};fe.display="block";const de=pe=>R.jsx("div",{role:"dialog",...pe,style:fe,className:kt(e,t,ke&&`${t}-static`,!v&&"show"),onClick:w?Oi:void 0,onMouseUp:fn,"data-bs-theme":c,"aria-label":p,"aria-labelledby":f,"aria-describedby":d,children:R.jsx(l,{...Ke,onMouseDown:mi,className:i,contentClassName:r,children:o})});return R.jsx(W3.Provider,{value:ct,children:R.jsx(Zte,{show:y,ref:Ue,backdrop:w,container:V,keyboard:!0,autoFocus:k,enforceFocus:K,restoreFocus:H,restoreFocusOptions:ie,onEscapeKeyDown:So,onShow:O,onHide:j,onEnter:zt,onEntering:Z,onEntered:x,onExit:z,onExiting:P,onExited:re,manager:kn(),transition:v?ine:void 0,backdropTransition:v?rne:void 0,renderBackdrop:we,renderDialog:de})})});J3.displayName="Modal";const Ki=Object.assign(J3,{Body:K3,Header:Q3,Title:X3,Footer:Y3,Dialog:q1,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),im=A.forwardRef(({bsPrefix:t,className:e,as:n="div",...i},r)=>{const o=xn(t,"row"),l=R3(),c=x3(),f=`${o}-cols`,d=[];return l.forEach(p=>{const y=i[p];delete i[p];let v;y!=null&&typeof y=="object"?{cols:v}=y:v=y;const w=p!==c?`-${p}`:"";v!=null&&d.push(`${f}${w}-${v}`)}),R.jsx(n,{ref:r,...i,className:kt(e,o,...d)})});im.displayName="Row";const La=()=>Iee(),sne="_orderContainer_1hyp0_1",one="_orderContainerCollapse_1hyp0_33",ane="_orderCard_1hyp0_63",lne="_collapse_1hyp0_93",une="_orderCard__title_1hyp0_133",cne="_orderCard__price_1hyp0_135",hne="_orderCard__actions_1hyp0_137",fne="_orderCard__products_1hyp0_145",dne="_orderCard__padding_1hyp0_157",mne="_orderCard__arrow_1hyp0_165",pne="_IoIosArrowForward_1hyp0_189",gne="_orderCard__count_1hyp0_247",_ne="_orderCard__label_1hyp0_261",yne="_orderCard__dateContainer_1hyp0_273",vne="_orderCard__dayMonth_1hyp0_291",Ene="_orderCard__fullDate_1hyp0_293",Tne="_orderCard__day_1hyp0_291",bne="_orderCard__month_1hyp0_327",wne="_orderCard__yearDay_1hyp0_329",Sne="_orderCard__monthName_1hyp0_331",Cne="_orderCard__year_1hyp0_329",Ane="_orderCard__separator_1hyp0_341",Ine="_orderCard__deleteBtn_1hyp0_387",Rne="_productsContainer_1hyp0_505",xne="_productCard_1hyp0_531",Dne="_statusIndicator_1hyp0_567",Nne="_statusDot_1hyp0_579",Pne="_available_1hyp0_591",One="_notAvailable_1hyp0_599",Mne="_productImage_1hyp0_607",kne="_productInfo_1hyp0_627",Vne="_productTitle_1hyp0_637",Lne="_productSerial_1hyp0_657",zne="_productStatus_1hyp0_675",Une="_statusText_1hyp0_685",Fne="_arrivalDate_1hyp0_711",jne="_deleteBtn_1hyp0_729",Ge={orderContainer:sne,orderContainerCollapse:one,orderCard:ane,collapse:lne,orderCard__title:une,orderCard__price:cne,orderCard__actions:hne,orderCard__products:fne,orderCard__padding:dne,orderCard__arrow:mne,IoIosArrowForward:pne,orderCard__count:gne,orderCard__label:_ne,orderCard__dateContainer:yne,orderCard__dayMonth:vne,orderCard__fullDate:Ene,orderCard__day:Tne,orderCard__month:bne,orderCard__yearDay:wne,orderCard__monthName:Sne,orderCard__year:Cne,orderCard__separator:Ane,orderCard__deleteBtn:Ine,productsContainer:Rne,productCard:xne,statusIndicator:Dne,statusDot:Nne,available:Pne,notAvailable:One,productImage:Mne,productInfo:kne,productTitle:Vne,productSerial:Lne,productStatus:zne,statusText:Une,arrivalDate:Fne,deleteBtn:jne};var e6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},aP=St.createContext&&St.createContext(e6),Bne=["attr","size","title"];function qne(t,e){if(t==null)return{};var n=$ne(t,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function $ne(t,e){if(t==null)return{};var n={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;n[i]=t[i]}return n}function ry(){return ry=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ry.apply(this,arguments)}function lP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function sy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lP(Object(n),!0).forEach(function(i){Hne(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Hne(t,e,n){return e=Gne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gne(t){var e=Kne(t,"string");return typeof e=="symbol"?e:e+""}function Kne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t6(t){return t&&t.map((e,n)=>St.createElement(e.tag,sy({key:n},e.attr),t6(e.child)))}function av(t){return e=>St.createElement(Wne,ry({attr:sy({},t.attr)},e),t6(t.child))}function Wne(t){var e=n=>{var{attr:i,size:r,title:o}=t,l=qne(t,Bne),c=r||n.size||"1em",f;return n.className&&(f=n.className),t.className&&(f=(f?f+" ":"")+t.className),St.createElement("svg",ry({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,l,{className:f,style:sy(sy({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&St.createElement("title",null,o),t.children)};return aP!==void 0?St.createElement(aP.Consumer,null,n=>e(n)):e(e6)}function Yne(t){return av({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M8 6.9834C7.44772 6.9834 7 7.43111 7 7.9834C7 8.53568 7.44772 8.9834 8 8.9834H16C16.5523 8.9834 17 8.53568 17 7.9834C17 7.43111 16.5523 6.9834 16 6.9834H8Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M7 12C7 11.4477 7.44772 11 8 11H16C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13H8C7.44772 13 7 12.5523 7 12Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M8 15.017C7.44772 15.017 7 15.4647 7 16.017C7 16.5693 7.44772 17.017 8 17.017H16C16.5523 17.017 17 16.5693 17 16.017C17 15.4647 16.5523 15.017 16 15.017H8Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12Z",fill:"currentColor"},child:[]}]})(t)}function Zne(t){return av({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"},child:[]}]})(t)}function Qne(t){return av({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(t)}function Xne(t){return av({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z",opacity:".87"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"},child:[]}]})(t)}const Jne="_backdrop_geif5_1",eie="_contained__modal_btn_cancel_geif5_19",tie="_contained__modal_btn_delete_geif5_39",gT={backdrop:Jne,contained__modal_btn_cancel:eie,contained__modal_btn_delete:tie},nie=({show:t,onHide:e,orderModelId:n,orderTitle:i})=>{const r=La();console.log(n);const o=()=>{debugger;n&&(r(see(n)),e())};return R.jsxs(R.Fragment,{children:[t&&R.jsx("div",{className:gT.backdrop,onClick:e}),R.jsxs(Ki,{backdrop:!1,show:t,onHide:e,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[R.jsx(Ki.Header,{closeButton:!0,children:R.jsx(Ki.Title,{id:"contained-modal-title-vcenter",children:"Вы уверены, что хотите удалить этот приход?"})}),R.jsx(Ki.Body,{children:R.jsx("p",{children:i})}),R.jsxs(Ki.Footer,{style:{background:"#0db561"},children:[R.jsx(hh,{className:gT.contained__modal_btn_cancel,onClick:e,children:"Отмена"}),R.jsx(hh,{className:gT.contained__modal_btn_delete,onClick:()=>{o()},children:R.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[R.jsx(Qne,{size:19.5}),"Удалить"]})})]})]})]})},iie="_customButton_1qdhy_1",rie="_customButton__icon_1qdhy_189",qf={customButton:iie,"customButton--small":"_customButton--small_1qdhy_45","customButton--medium":"_customButton--medium_1qdhy_57","customButton--large":"_customButton--large_1qdhy_73","customButton--primary":"_customButton--primary_1qdhy_85","customButton--disabled":"_customButton--disabled_1qdhy_95","customButton--secondary":"_customButton--secondary_1qdhy_105","customButton--danger":"_customButton--danger_1qdhy_125","customButton--ghost":"_customButton--ghost_1qdhy_145",customButton__icon:rie},n6=({children:t,onClick:e,variant:n="primary",size:i="medium",disabled:r=!1,type:o="button",className:l="",icon:c})=>{const f=`${qf.customButton} ${qf[`customButton--${n}`]} ${qf[`customButton--${i}`]} ${r?qf["customButton--disabled"]:""} ${l}`;return R.jsxs("button",{type:o,className:f,onClick:e,disabled:r,children:[c&&R.jsx("span",{className:qf.customButton__icon,children:c}),t]})},sie=St.memo(({productsByOrderId:t,selectedOrder:e})=>{const n=La(),i=A.useCallback(o=>{n(C3(o))},[n]),r=t[e.id]||[];return R.jsx(R.Fragment,{children:r.map(o=>R.jsxs("div",{className:Ge.productCard,children:[R.jsx("div",{className:Ge.statusIndicator,children:o.status===1?R.jsx("div",{className:`${Ge.statusDot} ${Ge.available}`}):R.jsx("div",{className:`${Ge.statusDot} ${Ge.notAvailable}`})}),R.jsx("div",{className:Ge.productImage,children:R.jsx("img",{src:o.photo,alt:o.title,width:60,height:60})}),R.jsxs("div",{className:Ge.productInfo,children:[R.jsx("div",{className:Ge.productTitle,children:o.title}),R.jsx("div",{className:Ge.productSerial,children:o.serialNumber})]}),R.jsx("div",{className:Ge.productStatus,children:o.status===1?R.jsx("span",{className:`${Ge.statusText} ${Ge.available}`,children:"свободен"}):R.jsx("span",{className:`${Ge.statusText} ${Ge.notAvailable}`,children:"В ремонте"})}),R.jsx("div",{className:Ge.arrivalDate,children:R.jsx("button",{className:Ge.deleteBtn,onClick:()=>i(o.id),children:"🗑️"})})]},o.id))})});var Pm=t=>t.type==="checkbox",Ol=t=>t instanceof Date,Ci=t=>t==null;const i6=t=>typeof t=="object";var In=t=>!Ci(t)&&!Array.isArray(t)&&i6(t)&&!Ol(t),oie=t=>In(t)&&t.target?Pm(t.target)?t.target.checked:t.target.value:t,aie=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,lie=(t,e)=>t.has(aie(e)),uie=t=>{const e=t.constructor&&t.constructor.prototype;return In(e)&&e.hasOwnProperty("isPrototypeOf")},$1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Un(t){let e;const n=Array.isArray(t),i=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!($1&&(t instanceof Blob||i))&&(n||In(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!uie(t))e=t;else for(const r in t)t.hasOwnProperty(r)&&(e[r]=Un(t[r]));else return t;return e}var lv=t=>/^\w*$/.test(t),un=t=>t===void 0,H1=t=>Array.isArray(t)?t.filter(Boolean):[],G1=t=>H1(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Ce=(t,e,n)=>{if(!e||!In(t))return n;const i=(lv(e)?[e]:G1(e)).reduce((r,o)=>Ci(r)?r:r[o],t);return un(i)||i===t?un(t[e])?n:t[e]:i},ps=t=>typeof t=="boolean",Ot=(t,e,n)=>{let i=-1;const r=lv(e)?[e]:G1(e),o=r.length,l=o-1;for(;++i<o;){const c=r[i];let f=n;if(i!==l){const d=t[c];f=In(d)||Array.isArray(d)?d:isNaN(+r[i+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=f,t=t[c]}};const uP={BLUR:"blur",FOCUS_OUT:"focusout"},zr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ys={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},cie=St.createContext(null);cie.displayName="HookFormContext";var hie=(t,e,n,i=!0)=>{const r={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(r,o,{get:()=>{const l=o;return e._proxyFormState[l]!==zr.all&&(e._proxyFormState[l]=!i||zr.all),t[l]}});return r};const fie=typeof window<"u"?St.useLayoutEffect:St.useEffect;var Wi=t=>typeof t=="string",die=(t,e,n,i,r)=>Wi(t)?(i&&e.watch.add(t),Ce(n,t,r)):Array.isArray(t)?t.map(o=>(i&&e.watch.add(o),Ce(n,o))):(i&&(e.watchAll=!0),n),Wb=t=>Ci(t)||!i6(t);function da(t,e,n=new WeakSet){if(Wb(t)||Wb(e))return t===e;if(Ol(t)&&Ol(e))return t.getTime()===e.getTime();const i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const o of i){const l=t[o];if(!r.includes(o))return!1;if(o!=="ref"){const c=e[o];if(Ol(l)&&Ol(c)||In(l)&&In(c)||Array.isArray(l)&&Array.isArray(c)?!da(l,c,n):l!==c)return!1}}return!0}var K1=(t,e,n,i,r)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[i]:r||!0}}:{},Td=t=>Array.isArray(t)?t:[t],cP=()=>{let t=[];return{get observers(){return t},next:r=>{for(const o of t)o.next&&o.next(r)},subscribe:r=>(t.push(r),{unsubscribe:()=>{t=t.filter(o=>o!==r)}}),unsubscribe:()=>{t=[]}}};function r6(t,e){const n={};for(const i in t)if(t.hasOwnProperty(i)){const r=t[i],o=e[i];if(r&&In(r)&&o){const l=r6(r,o);In(l)&&(n[i]=l)}else t[i]&&(n[i]=o)}return n}var Si=t=>In(t)&&!Object.keys(t).length,W1=t=>t.type==="file",Ur=t=>typeof t=="function",oy=t=>{if(!$1)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},s6=t=>t.type==="select-multiple",Y1=t=>t.type==="radio",mie=t=>Y1(t)||Pm(t),_T=t=>oy(t)&&t.isConnected;function pie(t,e){const n=e.slice(0,-1).length;let i=0;for(;i<n;)t=un(t)?i++:t[e[i++]];return t}function gie(t){for(const e in t)if(t.hasOwnProperty(e)&&!un(t[e]))return!1;return!0}function Tn(t,e){const n=Array.isArray(e)?e:lv(e)?[e]:G1(e),i=n.length===1?t:pie(t,n),r=n.length-1,o=n[r];return i&&delete i[o],r!==0&&(In(i)&&Si(i)||Array.isArray(i)&&gie(i))&&Tn(t,n.slice(0,-1)),t}var _ie=t=>{for(const e in t)if(Ur(t[e]))return!0;return!1};function o6(t){return Array.isArray(t)||In(t)&&!_ie(t)}function Yb(t,e={}){for(const n in t)o6(t[n])?(e[n]=Array.isArray(t[n])?[]:{},Yb(t[n],e[n])):un(t[n])||(e[n]=!0);return e}function Ec(t,e,n){n||(n=Yb(e));for(const i in t)o6(t[i])?un(e)||Wb(n[i])?n[i]=Yb(t[i],Array.isArray(t[i])?[]:{}):Ec(t[i],Ci(e)?{}:e[i],n[i]):n[i]=!da(t[i],e[i]);return n}const hP={value:!1,isValid:!1},fP={value:!0,isValid:!0};var a6=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!un(t[0].attributes.value)?un(t[0].value)||t[0].value===""?fP:{value:t[0].value,isValid:!0}:fP:hP}return hP},l6=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:i})=>un(t)?t:e?t===""?NaN:t&&+t:n&&Wi(t)?new Date(t):i?i(t):t;const dP={isValid:!1,value:null};var u6=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,dP):dP;function mP(t){const e=t.ref;return W1(e)?e.files:Y1(e)?u6(t.refs).value:s6(e)?[...e.selectedOptions].map(({value:n})=>n):Pm(e)?a6(t.refs).value:l6(un(e.value)?t.ref.value:e.value,t)}var yie=(t,e,n,i)=>{const r={};for(const o of t){const l=Ce(e,o);l&&Ot(r,o,l._f)}return{criteriaMode:n,names:[...t],fields:r,shouldUseNativeValidation:i}},ay=t=>t instanceof RegExp,$f=t=>un(t)?t:ay(t)?t.source:In(t)?ay(t.value)?t.value.source:t.value:t,pP=t=>({isOnSubmit:!t||t===zr.onSubmit,isOnBlur:t===zr.onBlur,isOnChange:t===zr.onChange,isOnAll:t===zr.all,isOnTouch:t===zr.onTouched});const gP="AsyncFunction";var vie=t=>!!t&&!!t.validate&&!!(Ur(t.validate)&&t.validate.constructor.name===gP||In(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===gP)),Eie=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),_P=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(i=>t.startsWith(i)&&/^\.\w+/.test(t.slice(i.length))));const bd=(t,e,n,i)=>{for(const r of n||Object.keys(t)){const o=Ce(t,r);if(o){const{_f:l,...c}=o;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],r)&&!i)return!0;if(l.ref&&e(l.ref,l.name)&&!i)return!0;if(bd(c,e))break}else if(In(c)&&bd(c,e))break}}};function yP(t,e,n){const i=Ce(t,n);if(i||lv(n))return{error:i,name:n};const r=n.split(".");for(;r.length;){const o=r.join("."),l=Ce(e,o),c=Ce(t,o);if(l&&!Array.isArray(l)&&n!==o)return{name:n};if(c&&c.type)return{name:o,error:c};if(c&&c.root&&c.root.type)return{name:`${o}.root`,error:c.root};r.pop()}return{name:n}}var Tie=(t,e,n,i)=>{n(t);const{name:r,...o}=t;return Si(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(l=>e[l]===(!i||zr.all))},bie=(t,e,n)=>!t||!e||t===e||Td(t).some(i=>i&&(n?i===e:i.startsWith(e)||e.startsWith(i))),wie=(t,e,n,i,r)=>r.isOnAll?!1:!n&&r.isOnTouch?!(e||t):(n?i.isOnBlur:r.isOnBlur)?!t:(n?i.isOnChange:r.isOnChange)?t:!0,Sie=(t,e)=>!H1(Ce(t,e)).length&&Tn(t,e),Cie=(t,e,n)=>{const i=Td(Ce(t,n));return Ot(i,"root",e[n]),Ot(t,n,i),t};function vP(t,e,n="validate"){if(Wi(t)||Array.isArray(t)&&t.every(Wi)||ps(t)&&!t)return{type:n,message:Wi(t)?t:"",ref:e}}var fc=t=>In(t)&&!ay(t)?t:{value:t,message:""},EP=async(t,e,n,i,r,o)=>{const{ref:l,refs:c,required:f,maxLength:d,minLength:p,min:y,max:v,pattern:w,validate:S,name:N,valueAsNumber:O,mount:j}=t._f,V=Ce(n,N);if(!j||e.has(N))return{};const k=c?c[0]:l,K=B=>{r&&k.reportValidity&&(k.setCustomValidity(ps(B)?"":B||""),k.reportValidity())},H={},ie=Y1(l),x=Pm(l),I=ie||x,P=(O||W1(l))&&un(l.value)&&un(V)||oy(l)&&l.value===""||V===""||Array.isArray(V)&&!V.length,F=K1.bind(null,N,i,H),L=(B,M,Pe,Ke=Ys.maxLength,ee=Ys.minLength)=>{const he=B?M:Pe;H[N]={type:B?Ke:ee,message:he,ref:l,...F(B?Ke:ee,he)}};if(o?!Array.isArray(V)||!V.length:f&&(!I&&(P||Ci(V))||ps(V)&&!V||x&&!a6(c).isValid||ie&&!u6(c).isValid)){const{value:B,message:M}=Wi(f)?{value:!!f,message:f}:fc(f);if(B&&(H[N]={type:Ys.required,message:M,ref:k,...F(Ys.required,M)},!i))return K(M),H}if(!P&&(!Ci(y)||!Ci(v))){let B,M;const Pe=fc(v),Ke=fc(y);if(!Ci(V)&&!isNaN(V)){const ee=l.valueAsNumber||V&&+V;Ci(Pe.value)||(B=ee>Pe.value),Ci(Ke.value)||(M=ee<Ke.value)}else{const ee=l.valueAsDate||new Date(V),he=je=>new Date(new Date().toDateString()+" "+je),ge=l.type=="time",ke=l.type=="week";Wi(Pe.value)&&V&&(B=ge?he(V)>he(Pe.value):ke?V>Pe.value:ee>new Date(Pe.value)),Wi(Ke.value)&&V&&(M=ge?he(V)<he(Ke.value):ke?V<Ke.value:ee<new Date(Ke.value))}if((B||M)&&(L(!!B,Pe.message,Ke.message,Ys.max,Ys.min),!i))return K(H[N].message),H}if((d||p)&&!P&&(Wi(V)||o&&Array.isArray(V))){const B=fc(d),M=fc(p),Pe=!Ci(B.value)&&V.length>+B.value,Ke=!Ci(M.value)&&V.length<+M.value;if((Pe||Ke)&&(L(Pe,B.message,M.message),!i))return K(H[N].message),H}if(w&&!P&&Wi(V)){const{value:B,message:M}=fc(w);if(ay(B)&&!V.match(B)&&(H[N]={type:Ys.pattern,message:M,ref:l,...F(Ys.pattern,M)},!i))return K(M),H}if(S){if(Ur(S)){const B=await S(V,n),M=vP(B,k);if(M&&(H[N]={...M,...F(Ys.validate,M.message)},!i))return K(M.message),H}else if(In(S)){let B={};for(const M in S){if(!Si(B)&&!i)break;const Pe=vP(await S[M](V,n),k,M);Pe&&(B={...Pe,...F(M,Pe.message)},K(Pe.message),i&&(H[N]=B))}if(!Si(B)&&(H[N]={ref:k,...B},!i))return H}}return K(!0),H};const Aie={mode:zr.onSubmit,reValidateMode:zr.onChange,shouldFocusError:!0};function Iie(t={}){let e={...Aie,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ur(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},i={},r=In(e.defaultValues)||In(e.values)?Un(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:Un(r),l={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,d=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y={...p};const v={array:cP(),state:cP()},w=e.criteriaMode===zr.all,S=z=>Z=>{clearTimeout(d),d=setTimeout(z,Z)},N=async z=>{if(!e.disabled&&(p.isValid||y.isValid||z)){const Z=e.resolver?Si((await x()).errors):await P(i,!0);Z!==n.isValid&&v.state.next({isValid:Z})}},O=(z,Z)=>{!e.disabled&&(p.isValidating||p.validatingFields||y.isValidating||y.validatingFields)&&((z||Array.from(c.mount)).forEach(re=>{re&&(Z?Ot(n.validatingFields,re,Z):Tn(n.validatingFields,re))}),v.state.next({validatingFields:n.validatingFields,isValidating:!Si(n.validatingFields)}))},j=(z,Z=[],re,we,fe=!0,de=!0)=>{if(we&&re&&!e.disabled){if(l.action=!0,de&&Array.isArray(Ce(i,z))){const pe=re(Ce(i,z),we.argA,we.argB);fe&&Ot(i,z,pe)}if(de&&Array.isArray(Ce(n.errors,z))){const pe=re(Ce(n.errors,z),we.argA,we.argB);fe&&Ot(n.errors,z,pe),Sie(n.errors,z)}if((p.touchedFields||y.touchedFields)&&de&&Array.isArray(Ce(n.touchedFields,z))){const pe=re(Ce(n.touchedFields,z),we.argA,we.argB);fe&&Ot(n.touchedFields,z,pe)}(p.dirtyFields||y.dirtyFields)&&(n.dirtyFields=Ec(r,o)),v.state.next({name:z,isDirty:L(z,Z),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ot(o,z,Z)},V=(z,Z)=>{Ot(n.errors,z,Z),v.state.next({errors:n.errors})},k=z=>{n.errors=z,v.state.next({errors:n.errors,isValid:!1})},K=(z,Z,re,we)=>{const fe=Ce(i,z);if(fe){const de=Ce(o,z,un(re)?Ce(r,z):re);un(de)||we&&we.defaultChecked||Z?Ot(o,z,Z?de:mP(fe._f)):Pe(z,de),l.mount&&N()}},H=(z,Z,re,we,fe)=>{let de=!1,pe=!1;const We={name:z};if(!e.disabled){if(!re||we){(p.isDirty||y.isDirty)&&(pe=n.isDirty,n.isDirty=We.isDirty=L(),de=pe!==We.isDirty);const et=da(Ce(r,z),Z);pe=!!Ce(n.dirtyFields,z),et?Tn(n.dirtyFields,z):Ot(n.dirtyFields,z,!0),We.dirtyFields=n.dirtyFields,de=de||(p.dirtyFields||y.dirtyFields)&&pe!==!et}if(re){const et=Ce(n.touchedFields,z);et||(Ot(n.touchedFields,z,re),We.touchedFields=n.touchedFields,de=de||(p.touchedFields||y.touchedFields)&&et!==re)}de&&fe&&v.state.next(We)}return de?We:{}},ie=(z,Z,re,we)=>{const fe=Ce(n.errors,z),de=(p.isValid||y.isValid)&&ps(Z)&&n.isValid!==Z;if(e.delayError&&re?(f=S(()=>V(z,re)),f(e.delayError)):(clearTimeout(d),f=null,re?Ot(n.errors,z,re):Tn(n.errors,z)),(re?!da(fe,re):fe)||!Si(we)||de){const pe={...we,...de&&ps(Z)?{isValid:Z}:{},errors:n.errors,name:z};n={...n,...pe},v.state.next(pe)}},x=async z=>{O(z,!0);const Z=await e.resolver(o,e.context,yie(z||c.mount,i,e.criteriaMode,e.shouldUseNativeValidation));return O(z),Z},I=async z=>{const{errors:Z}=await x(z);if(z)for(const re of z){const we=Ce(Z,re);we?Ot(n.errors,re,we):Tn(n.errors,re)}else n.errors=Z;return Z},P=async(z,Z,re={valid:!0})=>{for(const we in z){const fe=z[we];if(fe){const{_f:de,...pe}=fe;if(de){const We=c.array.has(de.name),et=fe._f&&vie(fe._f);et&&p.validatingFields&&O([de.name],!0);const ei=await EP(fe,c.disabled,o,w,e.shouldUseNativeValidation&&!Z,We);if(et&&p.validatingFields&&O([de.name]),ei[de.name]&&(re.valid=!1,Z))break;!Z&&(Ce(ei,de.name)?We?Cie(n.errors,ei,de.name):Ot(n.errors,de.name,ei[de.name]):Tn(n.errors,de.name))}!Si(pe)&&await P(pe,Z,re)}}return re.valid},F=()=>{for(const z of c.unMount){const Z=Ce(i,z);Z&&(Z._f.refs?Z._f.refs.every(re=>!_T(re)):!_T(Z._f.ref))&&He(z)}c.unMount=new Set},L=(z,Z)=>!e.disabled&&(z&&Z&&Ot(o,z,Z),!da(je(),r)),B=(z,Z,re)=>die(z,c,{...l.mount?o:un(Z)?r:Wi(z)?{[z]:Z}:Z},re,Z),M=z=>H1(Ce(l.mount?o:r,z,e.shouldUnregister?Ce(r,z,[]):[])),Pe=(z,Z,re={})=>{const we=Ce(i,z);let fe=Z;if(we){const de=we._f;de&&(!de.disabled&&Ot(o,z,l6(Z,de)),fe=oy(de.ref)&&Ci(Z)?"":Z,s6(de.ref)?[...de.ref.options].forEach(pe=>pe.selected=fe.includes(pe.value)):de.refs?Pm(de.ref)?de.refs.forEach(pe=>{(!pe.defaultChecked||!pe.disabled)&&(Array.isArray(fe)?pe.checked=!!fe.find(We=>We===pe.value):pe.checked=fe===pe.value||!!fe)}):de.refs.forEach(pe=>pe.checked=pe.value===fe):W1(de.ref)?de.ref.value="":(de.ref.value=fe,de.ref.type||v.state.next({name:z,values:Un(o)})))}(re.shouldDirty||re.shouldTouch)&&H(z,fe,re.shouldTouch,re.shouldDirty,!0),re.shouldValidate&&ke(z)},Ke=(z,Z,re)=>{for(const we in Z){if(!Z.hasOwnProperty(we))return;const fe=Z[we],de=z+"."+we,pe=Ce(i,de);(c.array.has(z)||In(fe)||pe&&!pe._f)&&!Ol(fe)?Ke(de,fe,re):Pe(de,fe,re)}},ee=(z,Z,re={})=>{const we=Ce(i,z),fe=c.array.has(z),de=Un(Z);Ot(o,z,de),fe?(v.array.next({name:z,values:Un(o)}),(p.isDirty||p.dirtyFields||y.isDirty||y.dirtyFields)&&re.shouldDirty&&v.state.next({name:z,dirtyFields:Ec(r,o),isDirty:L(z,de)})):we&&!we._f&&!Ci(de)?Ke(z,de,re):Pe(z,de,re),_P(z,c)&&v.state.next({...n,name:z}),v.state.next({name:l.mount?z:void 0,values:Un(o)})},he=async z=>{l.mount=!0;const Z=z.target;let re=Z.name,we=!0;const fe=Ce(i,re),de=et=>{we=Number.isNaN(et)||Ol(et)&&isNaN(et.getTime())||da(et,Ce(o,re,et))},pe=pP(e.mode),We=pP(e.reValidateMode);if(fe){let et,ei;const Rs=Z.type?mP(fe._f):oie(z),Mi=z.type===uP.BLUR||z.type===uP.FOCUS_OUT,mu=!Eie(fe._f)&&!e.resolver&&!Ce(n.errors,re)&&!fe._f.deps||wie(Mi,Ce(n.touchedFields,re),n.isSubmitted,We,pe),ai=_P(re,c,Mi);Ot(o,re,Rs),Mi?(!Z||!Z.readOnly)&&(fe._f.onBlur&&fe._f.onBlur(z),f&&f(0)):fe._f.onChange&&fe._f.onChange(z);const rn=H(re,Rs,Mi),gi=!Si(rn)||ai;if(!Mi&&v.state.next({name:re,type:z.type,values:Un(o)}),mu)return(p.isValid||y.isValid)&&(e.mode==="onBlur"?Mi&&N():Mi||N()),gi&&v.state.next({name:re,...ai?{}:rn});if(!Mi&&ai&&v.state.next({...n}),e.resolver){const{errors:Bt}=await x([re]);if(de(Rs),we){const pu=yP(n.errors,i,re),xs=yP(Bt,i,pu.name||re);et=xs.error,re=xs.name,ei=Si(Bt)}}else O([re],!0),et=(await EP(fe,c.disabled,o,w,e.shouldUseNativeValidation))[re],O([re]),de(Rs),we&&(et?ei=!1:(p.isValid||y.isValid)&&(ei=await P(i,!0)));we&&(fe._f.deps&&(!Array.isArray(fe._f.deps)||fe._f.deps.length>0)&&ke(fe._f.deps),ie(re,ei,et,rn))}},ge=(z,Z)=>{if(Ce(n.errors,Z)&&z.focus)return z.focus(),1},ke=async(z,Z={})=>{let re,we;const fe=Td(z);if(e.resolver){const de=await I(un(z)?z:fe);re=Si(de),we=z?!fe.some(pe=>Ce(de,pe)):re}else z?(we=(await Promise.all(fe.map(async de=>{const pe=Ce(i,de);return await P(pe&&pe._f?{[de]:pe}:pe)}))).every(Boolean),!(!we&&!n.isValid)&&N()):we=re=await P(i);return v.state.next({...!Wi(z)||(p.isValid||y.isValid)&&re!==n.isValid?{}:{name:z},...e.resolver||!z?{isValid:re}:{},errors:n.errors}),Z.shouldFocus&&!we&&bd(i,ge,z?fe:c.mount),we},je=(z,Z)=>{let re={...l.mount?o:r};return Z&&(re=r6(Z.dirtyFields?n.dirtyFields:n.touchedFields,re)),un(z)?re:Wi(z)?Ce(re,z):z.map(we=>Ce(re,we))},q=(z,Z)=>({invalid:!!Ce((Z||n).errors,z),isDirty:!!Ce((Z||n).dirtyFields,z),error:Ce((Z||n).errors,z),isValidating:!!Ce(n.validatingFields,z),isTouched:!!Ce((Z||n).touchedFields,z)}),oe=z=>{z&&Td(z).forEach(Z=>Tn(n.errors,Z)),v.state.next({errors:z?n.errors:{}})},_e=(z,Z,re)=>{const we=(Ce(i,z,{_f:{}})._f||{}).ref,fe=Ce(n.errors,z)||{},{ref:de,message:pe,type:We,...et}=fe;Ot(n.errors,z,{...et,...Z,ref:we}),v.state.next({name:z,errors:n.errors,isValid:!1}),re&&re.shouldFocus&&we&&we.focus&&we.focus()},Te=(z,Z)=>Ur(z)?v.state.subscribe({next:re=>"values"in re&&z(B(void 0,Z),re)}):B(z,Z,!0),De=z=>v.state.subscribe({next:Z=>{bie(z.name,Z.name,z.exact)&&Tie(Z,z.formState||p,Oi,z.reRenderRoot)&&z.callback({values:{...o},...n,...Z,defaultValues:r})}}).unsubscribe,Ue=z=>(l.mount=!0,y={...y,...z.formState},De({...z,formState:y})),He=(z,Z={})=>{for(const re of z?Td(z):c.mount)c.mount.delete(re),c.array.delete(re),Z.keepValue||(Tn(i,re),Tn(o,re)),!Z.keepError&&Tn(n.errors,re),!Z.keepDirty&&Tn(n.dirtyFields,re),!Z.keepTouched&&Tn(n.touchedFields,re),!Z.keepIsValidating&&Tn(n.validatingFields,re),!e.shouldUnregister&&!Z.keepDefaultValue&&Tn(r,re);v.state.next({values:Un(o)}),v.state.next({...n,...Z.keepDirty?{isDirty:L()}:{}}),!Z.keepIsValid&&N()},Vt=({disabled:z,name:Z})=>{(ps(z)&&l.mount||z||c.disabled.has(Z))&&(z?c.disabled.add(Z):c.disabled.delete(Z))},ct=(z,Z={})=>{let re=Ce(i,z);const we=ps(Z.disabled)||ps(e.disabled);return Ot(i,z,{...re||{},_f:{...re&&re._f?re._f:{ref:{name:z}},name:z,mount:!0,...Z}}),c.mount.add(z),re?Vt({disabled:ps(Z.disabled)?Z.disabled:e.disabled,name:z}):K(z,!0,Z.value),{...we?{disabled:Z.disabled||e.disabled}:{},...e.progressive?{required:!!Z.required,min:$f(Z.min),max:$f(Z.max),minLength:$f(Z.minLength),maxLength:$f(Z.maxLength),pattern:$f(Z.pattern)}:{},name:z,onChange:he,onBlur:he,ref:fe=>{if(fe){ct(z,Z),re=Ce(i,z);const de=un(fe.value)&&fe.querySelectorAll&&fe.querySelectorAll("input,select,textarea")[0]||fe,pe=mie(de),We=re._f.refs||[];if(pe?We.find(et=>et===de):de===re._f.ref)return;Ot(i,z,{_f:{...re._f,...pe?{refs:[...We.filter(_T),de,...Array.isArray(Ce(r,z))?[{}]:[]],ref:{type:de.type,name:z}}:{ref:de}}}),K(z,!1,void 0,de)}else re=Ce(i,z,{}),re._f&&(re._f.mount=!1),(e.shouldUnregister||Z.shouldUnregister)&&!(lie(c.array,z)&&l.action)&&c.unMount.add(z)}}},kn=()=>e.shouldFocusError&&bd(i,ge,c.mount),Pi=z=>{ps(z)&&(v.state.next({disabled:z}),bd(i,(Z,re)=>{const we=Ce(i,re);we&&(Z.disabled=we._f.disabled||z,Array.isArray(we._f.refs)&&we._f.refs.forEach(fe=>{fe.disabled=we._f.disabled||z}))},0,!1))},Jn=(z,Z)=>async re=>{let we;re&&(re.preventDefault&&re.preventDefault(),re.persist&&re.persist());let fe=Un(o);if(v.state.next({isSubmitting:!0}),e.resolver){const{errors:de,values:pe}=await x();n.errors=de,fe=Un(pe)}else await P(i);if(c.disabled.size)for(const de of c.disabled)Tn(fe,de);if(Tn(n.errors,"root"),Si(n.errors)){v.state.next({errors:{}});try{await z(fe,re)}catch(de){we=de}}else Z&&await Z({...n.errors},re),kn(),setTimeout(kn);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Si(n.errors)&&!we,submitCount:n.submitCount+1,errors:n.errors}),we)throw we},mi=(z,Z={})=>{Ce(i,z)&&(un(Z.defaultValue)?ee(z,Un(Ce(r,z))):(ee(z,Z.defaultValue),Ot(r,z,Un(Z.defaultValue))),Z.keepTouched||Tn(n.touchedFields,z),Z.keepDirty||(Tn(n.dirtyFields,z),n.isDirty=Z.defaultValue?L(z,Un(Ce(r,z))):L()),Z.keepError||(Tn(n.errors,z),p.isValid&&N()),v.state.next({...n}))},fn=(z,Z={})=>{const re=z?Un(z):r,we=Un(re),fe=Si(z),de=fe?r:we;if(Z.keepDefaultValues||(r=re),!Z.keepValues){if(Z.keepDirtyValues){const pe=new Set([...c.mount,...Object.keys(Ec(r,o))]);for(const We of Array.from(pe))Ce(n.dirtyFields,We)?Ot(de,We,Ce(o,We)):ee(We,Ce(de,We))}else{if($1&&un(z))for(const pe of c.mount){const We=Ce(i,pe);if(We&&We._f){const et=Array.isArray(We._f.refs)?We._f.refs[0]:We._f.ref;if(oy(et)){const ei=et.closest("form");if(ei){ei.reset();break}}}}if(Z.keepFieldsRef)for(const pe of c.mount)ee(pe,Ce(de,pe));else i={}}o=e.shouldUnregister?Z.keepDefaultValues?Un(r):{}:Un(de),v.array.next({values:{...de}}),v.state.next({values:{...de}})}c={mount:Z.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!p.isValid||!!Z.keepIsValid||!!Z.keepDirtyValues,l.watch=!!e.shouldUnregister,v.state.next({submitCount:Z.keepSubmitCount?n.submitCount:0,isDirty:fe?!1:Z.keepDirty?n.isDirty:!!(Z.keepDefaultValues&&!da(z,r)),isSubmitted:Z.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:fe?{}:Z.keepDirtyValues?Z.keepDefaultValues&&o?Ec(r,o):n.dirtyFields:Z.keepDefaultValues&&z?Ec(r,z):Z.keepDirty?n.dirtyFields:{},touchedFields:Z.keepTouched?n.touchedFields:{},errors:Z.keepErrors?n.errors:{},isSubmitSuccessful:Z.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:r})},ft=(z,Z)=>fn(Ur(z)?z(o):z,Z),pi=(z,Z={})=>{const re=Ce(i,z),we=re&&re._f;if(we){const fe=we.refs?we.refs[0]:we.ref;fe.focus&&(fe.focus(),Z.shouldSelect&&Ur(fe.select)&&fe.select())}},Oi=z=>{n={...n,...z}},zt={control:{register:ct,unregister:He,getFieldState:q,handleSubmit:Jn,setError:_e,_subscribe:De,_runSchema:x,_focusError:kn,_getWatch:B,_getDirty:L,_setValid:N,_setFieldArray:j,_setDisabledField:Vt,_setErrors:k,_getFieldArray:M,_reset:fn,_resetDefaultValues:()=>Ur(e.defaultValues)&&e.defaultValues().then(z=>{ft(z,e.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:F,_disableForm:Pi,_subjects:v,_proxyFormState:p,get _fields(){return i},get _formValues(){return o},get _state(){return l},set _state(z){l=z},get _defaultValues(){return r},get _names(){return c},set _names(z){c=z},get _formState(){return n},get _options(){return e},set _options(z){e={...e,...z}}},subscribe:Ue,trigger:ke,register:ct,handleSubmit:Jn,watch:Te,setValue:ee,getValues:je,reset:ft,resetField:mi,clearErrors:oe,unregister:He,setError:_e,setFocus:pi,getFieldState:q};return{...zt,formControl:zt}}function c6(t={}){const e=St.useRef(void 0),n=St.useRef(void 0),[i,r]=St.useState({isDirty:!1,isValidating:!1,isLoading:Ur(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ur(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:i},t.defaultValues&&!Ur(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...c}=Iie(t);e.current={...c,formState:i}}const o=e.current.control;return o._options=t,fie(()=>{const l=o._subscribe({formState:o._proxyFormState,callback:()=>r({...o._formState}),reRenderRoot:!0});return r(c=>({...c,isReady:!0})),o._formState.isReady=!0,l},[o]),St.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),St.useEffect(()=>{t.mode&&(o._options.mode=t.mode),t.reValidateMode&&(o._options.reValidateMode=t.reValidateMode)},[o,t.mode,t.reValidateMode]),St.useEffect(()=>{t.errors&&(o._setErrors(t.errors),o._focusError())},[o,t.errors]),St.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,t.shouldUnregister]),St.useEffect(()=>{if(o._proxyFormState.isDirty){const l=o._getDirty();l!==i.isDirty&&o._subjects.state.next({isDirty:l})}},[o,i.isDirty]),St.useEffect(()=>{t.values&&!da(t.values,n.current)?(o._reset(t.values,{keepFieldsRef:!0,...o._options.resetOptions}),n.current=t.values,r(l=>({...l}))):o._resetDefaultValues()},[o,t.values]),St.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=hie(i,o),e.current}const TP=(t,e,n)=>{if(t&&"reportValidity"in t){const i=Ce(n,e);t.setCustomValidity(i&&i.message||""),t.reportValidity()}},Zb=(t,e)=>{for(const n in e.fields){const i=e.fields[n];i&&i.ref&&"reportValidity"in i.ref?TP(i.ref,n,t):i&&i.refs&&i.refs.forEach(r=>TP(r,n,t))}},bP=(t,e)=>{e.shouldUseNativeValidation&&Zb(t,e);const n={};for(const i in t){const r=Ce(e.fields,i),o=Object.assign(t[i]||{},{ref:r&&r.ref});if(Rie(e.names||Object.keys(t),i)){const l=Object.assign({},Ce(n,i));Ot(l,"root",o),Ot(n,i,l)}else Ot(n,i,o)}return n},Rie=(t,e)=>{const n=wP(e);return t.some(i=>wP(i).match(`^${n}\\.\\d+`))};function wP(t){return t.replace(/\]|\[/g,"")}function ce(t,e,n){function i(c,f){var d;Object.defineProperty(c,"_zod",{value:c._zod??{},enumerable:!1}),(d=c._zod).traits??(d.traits=new Set),c._zod.traits.add(t),e(c,f);for(const p in l.prototype)p in c||Object.defineProperty(c,p,{value:l.prototype[p].bind(c)});c._zod.constr=l,c._zod.def=f}const r=n?.Parent??Object;class o extends r{}Object.defineProperty(o,"name",{value:t});function l(c){var f;const d=n?.Parent?new o:this;i(d,c),(f=d._zod).deferred??(f.deferred=[]);for(const p of d._zod.deferred)p();return d}return Object.defineProperty(l,"init",{value:i}),Object.defineProperty(l,Symbol.hasInstance,{value:c=>n?.Parent&&c instanceof n.Parent?!0:c?._zod?.traits?.has(t)}),Object.defineProperty(l,"name",{value:t}),l}class Fc extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class h6 extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const f6={};function ru(t){return f6}function xie(t){const e=Object.values(t).filter(i=>typeof i=="number");return Object.entries(t).filter(([i,r])=>e.indexOf(+i)===-1).map(([i,r])=>r)}function Qb(t,e){return typeof e=="bigint"?e.toString():e}function Z1(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function Q1(t){return t==null}function X1(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function Die(t,e){const n=(t.toString().split(".")[1]||"").length,i=e.toString();let r=(i.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(i)){const f=i.match(/\d?e-(\d?)/);f?.[1]&&(r=Number.parseInt(f[1]))}const o=n>r?n:r,l=Number.parseInt(t.toFixed(o).replace(".","")),c=Number.parseInt(e.toFixed(o).replace(".",""));return l%c/10**o}const SP=Symbol("evaluating");function Lt(t,e,n){let i;Object.defineProperty(t,e,{get(){if(i!==SP)return i===void 0&&(i=SP,i=n()),i},set(r){Object.defineProperty(t,e,{value:r})},configurable:!0})}function fu(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function du(...t){const e={};for(const n of t){const i=Object.getOwnPropertyDescriptors(n);Object.assign(e,i)}return Object.defineProperties({},e)}function CP(t){return JSON.stringify(t)}const d6="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function ly(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const Nie=Z1(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function rm(t){if(ly(t)===!1)return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(ly(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function m6(t){return rm(t)?{...t}:Array.isArray(t)?[...t]:t}const Pie=new Set(["string","number","symbol"]);function fh(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function za(t,e,n){const i=new t._zod.constr(e??t._zod.def);return(!e||n?.parent)&&(i._zod.parent=t),i}function Me(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Oie(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const Mie={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function kie(t,e){const n=t._zod.def,i=du(t._zod.def,{get shape(){const r={};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(r[o]=n.shape[o])}return fu(this,"shape",r),r},checks:[]});return za(t,i)}function Vie(t,e){const n=t._zod.def,i=du(t._zod.def,{get shape(){const r={...t._zod.def.shape};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete r[o]}return fu(this,"shape",r),r},checks:[]});return za(t,i)}function Lie(t,e){if(!rm(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const r=du(t._zod.def,{get shape(){const o={...t._zod.def.shape,...e};return fu(this,"shape",o),o},checks:[]});return za(t,r)}function zie(t,e){if(!rm(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const i={...t._zod.def.shape,...e};return fu(this,"shape",i),i},checks:t._zod.def.checks};return za(t,n)}function Uie(t,e){const n=du(t._zod.def,{get shape(){const i={...t._zod.def.shape,...e._zod.def.shape};return fu(this,"shape",i),i},get catchall(){return e._zod.def.catchall},checks:[]});return za(t,n)}function Fie(t,e,n){const i=du(e._zod.def,{get shape(){const r=e._zod.def.shape,o={...r};if(n)for(const l in n){if(!(l in r))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(o[l]=t?new t({type:"optional",innerType:r[l]}):r[l])}else for(const l in r)o[l]=t?new t({type:"optional",innerType:r[l]}):r[l];return fu(this,"shape",o),o},checks:[]});return za(e,i)}function jie(t,e,n){const i=du(e._zod.def,{get shape(){const r=e._zod.def.shape,o={...r};if(n)for(const l in n){if(!(l in o))throw new Error(`Unrecognized key: "${l}"`);n[l]&&(o[l]=new t({type:"nonoptional",innerType:r[l]}))}else for(const l in r)o[l]=new t({type:"nonoptional",innerType:r[l]});return fu(this,"shape",o),o},checks:[]});return za(e,i)}function xc(t,e=0){if(t.aborted===!0)return!0;for(let n=e;n<t.issues.length;n++)if(t.issues[n]?.continue!==!0)return!0;return!1}function p6(t,e){return e.map(n=>{var i;return(i=n).path??(i.path=[]),n.path.unshift(t),n})}function Ag(t){return typeof t=="string"?t:t?.message}function su(t,e,n){const i={...t,path:t.path??[]};if(!t.message){const r=Ag(t.inst?._zod.def?.error?.(t))??Ag(e?.error?.(t))??Ag(n.customError?.(t))??Ag(n.localeError?.(t))??"Invalid input";i.message=r}return delete i.inst,delete i.continue,e?.reportInput||delete i.input,i}function J1(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function sm(...t){const[e,n,i]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:i}:{...e}}const g6=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,Qb,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},eC=ce("$ZodError",g6),uv=ce("$ZodError",g6,{Parent:Error});function Bie(t,e=n=>n.message){const n={},i=[];for(const r of t.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(e(r))):i.push(e(r));return{formErrors:i,fieldErrors:n}}function qie(t,e=n=>n.message){const n={_errors:[]},i=r=>{for(const o of r.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(l=>i({issues:l}));else if(o.code==="invalid_key")i({issues:o.issues});else if(o.code==="invalid_element")i({issues:o.issues});else if(o.path.length===0)n._errors.push(e(o));else{let l=n,c=0;for(;c<o.path.length;){const f=o.path[c];c===o.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(e(o))):l[f]=l[f]||{_errors:[]},l=l[f],c++}}};return i(t),n}const cv=t=>(e,n,i,r)=>{const o=i?Object.assign(i,{async:!1}):{async:!1},l=e._zod.run({value:n,issues:[]},o);if(l instanceof Promise)throw new Fc;if(l.issues.length){const c=new(r?.Err??t)(l.issues.map(f=>su(f,o,ru())));throw d6(c,r?.callee),c}return l.value},$ie=cv(uv),hv=t=>async(e,n,i,r)=>{const o=i?Object.assign(i,{async:!0}):{async:!0};let l=e._zod.run({value:n,issues:[]},o);if(l instanceof Promise&&(l=await l),l.issues.length){const c=new(r?.Err??t)(l.issues.map(f=>su(f,o,ru())));throw d6(c,r?.callee),c}return l.value},Hie=hv(uv),fv=t=>(e,n,i)=>{const r=i?{...i,async:!1}:{async:!1},o=e._zod.run({value:n,issues:[]},r);if(o instanceof Promise)throw new Fc;return o.issues.length?{success:!1,error:new(t??eC)(o.issues.map(l=>su(l,r,ru())))}:{success:!0,data:o.value}},Gie=fv(uv),dv=t=>async(e,n,i)=>{const r=i?Object.assign(i,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},r);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(l=>su(l,r,ru())))}:{success:!0,data:o.value}},Kie=dv(uv),Wie=t=>(e,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return cv(t)(e,n,r)},Yie=t=>(e,n,i)=>cv(t)(e,n,i),Zie=t=>async(e,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return hv(t)(e,n,r)},Qie=t=>async(e,n,i)=>hv(t)(e,n,i),Xie=t=>(e,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return fv(t)(e,n,r)},Jie=t=>(e,n,i)=>fv(t)(e,n,i),ere=t=>async(e,n,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return dv(t)(e,n,r)},tre=t=>async(e,n,i)=>dv(t)(e,n,i),nre=/^[cC][^\s-]{8,}$/,ire=/^[0-9a-z]+$/,rre=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,sre=/^[0-9a-vA-V]{20}$/,ore=/^[A-Za-z0-9]{27}$/,are=/^[a-zA-Z0-9_-]{21}$/,lre=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ure=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,AP=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,cre=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,hre="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function fre(){return new RegExp(hre,"u")}const dre=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,mre=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,pre=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,gre=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,_re=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,_6=/^[A-Za-z0-9_-]*$/,yre=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,vre=/^\+(?:[0-9]){6,14}[0-9]$/,y6="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Ere=new RegExp(`^${y6}$`);function v6(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Tre(t){return new RegExp(`^${v6(t)}$`)}function bre(t){const e=v6({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${e}(?:${n.join("|")})`;return new RegExp(`^${y6}T(?:${i})$`)}const wre=t=>{const e=t?`[\\s\\S]{${t?.minimum??0},${t?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},Sre=/^-?\d+$/,Cre=/^-?\d+(?:\.\d+)?/,Are=/^[^A-Z]*$/,Ire=/^[^a-z]*$/,Ni=ce("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),E6={number:"number",bigint:"bigint",object:"date"},T6=ce("$ZodCheckLessThan",(t,e)=>{Ni.init(t,e);const n=E6[typeof e.value];t._zod.onattach.push(i=>{const r=i._zod.bag,o=(e.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?r.maximum=e.value:r.exclusiveMaximum=e.value)}),t._zod.check=i=>{(e.inclusive?i.value<=e.value:i.value<e.value)||i.issues.push({origin:n,code:"too_big",maximum:e.value,input:i.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),b6=ce("$ZodCheckGreaterThan",(t,e)=>{Ni.init(t,e);const n=E6[typeof e.value];t._zod.onattach.push(i=>{const r=i._zod.bag,o=(e.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?r.minimum=e.value:r.exclusiveMinimum=e.value)}),t._zod.check=i=>{(e.inclusive?i.value>=e.value:i.value>e.value)||i.issues.push({origin:n,code:"too_small",minimum:e.value,input:i.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Rre=ce("$ZodCheckMultipleOf",(t,e)=>{Ni.init(t,e),t._zod.onattach.push(n=>{var i;(i=n._zod.bag).multipleOf??(i.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):Die(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),xre=ce("$ZodCheckNumberFormat",(t,e)=>{Ni.init(t,e),e.format=e.format||"float64";const n=e.format?.includes("int"),i=n?"int":"number",[r,o]=Mie[e.format];t._zod.onattach.push(l=>{const c=l._zod.bag;c.format=e.format,c.minimum=r,c.maximum=o,n&&(c.pattern=Sre)}),t._zod.check=l=>{const c=l.value;if(n){if(!Number.isInteger(c)){l.issues.push({expected:i,format:e.format,code:"invalid_type",continue:!1,input:c,inst:t});return}if(!Number.isSafeInteger(c)){c>0?l.issues.push({input:c,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:i,continue:!e.abort}):l.issues.push({input:c,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:i,continue:!e.abort});return}}c<r&&l.issues.push({origin:"number",input:c,code:"too_small",minimum:r,inclusive:!0,inst:t,continue:!e.abort}),c>o&&l.issues.push({origin:"number",input:c,code:"too_big",maximum:o,inst:t})}}),Dre=ce("$ZodCheckMaxLength",(t,e)=>{var n;Ni.init(t,e),(n=t._zod.def).when??(n.when=i=>{const r=i.value;return!Q1(r)&&r.length!==void 0}),t._zod.onattach.push(i=>{const r=i._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<r&&(i._zod.bag.maximum=e.maximum)}),t._zod.check=i=>{const r=i.value;if(r.length<=e.maximum)return;const l=J1(r);i.issues.push({origin:l,code:"too_big",maximum:e.maximum,inclusive:!0,input:r,inst:t,continue:!e.abort})}}),Nre=ce("$ZodCheckMinLength",(t,e)=>{var n;Ni.init(t,e),(n=t._zod.def).when??(n.when=i=>{const r=i.value;return!Q1(r)&&r.length!==void 0}),t._zod.onattach.push(i=>{const r=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>r&&(i._zod.bag.minimum=e.minimum)}),t._zod.check=i=>{const r=i.value;if(r.length>=e.minimum)return;const l=J1(r);i.issues.push({origin:l,code:"too_small",minimum:e.minimum,inclusive:!0,input:r,inst:t,continue:!e.abort})}}),Pre=ce("$ZodCheckLengthEquals",(t,e)=>{var n;Ni.init(t,e),(n=t._zod.def).when??(n.when=i=>{const r=i.value;return!Q1(r)&&r.length!==void 0}),t._zod.onattach.push(i=>{const r=i._zod.bag;r.minimum=e.length,r.maximum=e.length,r.length=e.length}),t._zod.check=i=>{const r=i.value,o=r.length;if(o===e.length)return;const l=J1(r),c=o>e.length;i.issues.push({origin:l,...c?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:i.value,inst:t,continue:!e.abort})}}),mv=ce("$ZodCheckStringFormat",(t,e)=>{var n,i;Ni.init(t,e),t._zod.onattach.push(r=>{const o=r._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=r=>{e.pattern.lastIndex=0,!e.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:e.format,input:r.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(i=t._zod).check??(i.check=()=>{})}),Ore=ce("$ZodCheckRegex",(t,e)=>{mv.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),Mre=ce("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=Are),mv.init(t,e)}),kre=ce("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=Ire),mv.init(t,e)}),Vre=ce("$ZodCheckIncludes",(t,e)=>{Ni.init(t,e);const n=fh(e.includes),i=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=i,t._zod.onattach.push(r=>{const o=r._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(i)}),t._zod.check=r=>{r.value.includes(e.includes,e.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:r.value,inst:t,continue:!e.abort})}}),Lre=ce("$ZodCheckStartsWith",(t,e)=>{Ni.init(t,e);const n=new RegExp(`^${fh(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=i=>{i.value.startsWith(e.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:i.value,inst:t,continue:!e.abort})}}),zre=ce("$ZodCheckEndsWith",(t,e)=>{Ni.init(t,e);const n=new RegExp(`.*${fh(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(n)}),t._zod.check=i=>{i.value.endsWith(e.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:i.value,inst:t,continue:!e.abort})}}),Ure=ce("$ZodCheckOverwrite",(t,e)=>{Ni.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class Fre{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const i=e.split(`
`).filter(l=>l),r=Math.min(...i.map(l=>l.length-l.trimStart().length)),o=i.map(l=>l.slice(r)).map(l=>" ".repeat(this.indent*2)+l);for(const l of o)this.content.push(l)}compile(){const e=Function,n=this?.args,r=[...(this?.content??[""]).map(o=>`  ${o}`)];return new e(...n,r.join(`
`))}}const jre={major:4,minor:1,patch:12},hn=ce("$ZodType",(t,e)=>{var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=jre;const i=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&i.unshift(t);for(const r of i)for(const o of r._zod.onattach)o(t);if(i.length===0)(n=t._zod).deferred??(n.deferred=[]),t._zod.deferred?.push(()=>{t._zod.run=t._zod.parse});else{const r=(l,c,f)=>{let d=xc(l),p;for(const y of c){if(y._zod.def.when){if(!y._zod.def.when(l))continue}else if(d)continue;const v=l.issues.length,w=y._zod.check(l);if(w instanceof Promise&&f?.async===!1)throw new Fc;if(p||w instanceof Promise)p=(p??Promise.resolve()).then(async()=>{await w,l.issues.length!==v&&(d||(d=xc(l,v)))});else{if(l.issues.length===v)continue;d||(d=xc(l,v))}}return p?p.then(()=>l):l},o=(l,c,f)=>{if(xc(l))return l.aborted=!0,l;const d=r(c,i,f);if(d instanceof Promise){if(f.async===!1)throw new Fc;return d.then(p=>t._zod.parse(p,f))}return t._zod.parse(d,f)};t._zod.run=(l,c)=>{if(c.skipChecks)return t._zod.parse(l,c);if(c.direction==="backward"){const d=t._zod.parse({value:l.value,issues:[]},{...c,skipChecks:!0});return d instanceof Promise?d.then(p=>o(p,l,c)):o(d,l,c)}const f=t._zod.parse(l,c);if(f instanceof Promise){if(c.async===!1)throw new Fc;return f.then(d=>r(d,i,c))}return r(f,i,c)}}t["~standard"]={validate:r=>{try{const o=Gie(t,r);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return Kie(t,r).then(l=>l.success?{value:l.data}:{issues:l.error?.issues})}},vendor:"zod",version:1}}),tC=ce("$ZodString",(t,e)=>{hn.init(t,e),t._zod.pattern=[...t?._zod.bag?.patterns??[]].pop()??wre(t._zod.bag),t._zod.parse=(n,i)=>{if(e.coerce)try{n.value=String(n.value)}catch{}return typeof n.value=="string"||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:t}),n}}),Wt=ce("$ZodStringFormat",(t,e)=>{mv.init(t,e),tC.init(t,e)}),Bre=ce("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=ure),Wt.init(t,e)}),qre=ce("$ZodUUID",(t,e)=>{if(e.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(i===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=AP(i))}else e.pattern??(e.pattern=AP());Wt.init(t,e)}),$re=ce("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=cre),Wt.init(t,e)}),Hre=ce("$ZodURL",(t,e)=>{Wt.init(t,e),t._zod.check=n=>{try{const i=n.value.trim(),r=new URL(i);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:yre.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=r.href:n.value=i;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),Gre=ce("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=fre()),Wt.init(t,e)}),Kre=ce("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=are),Wt.init(t,e)}),Wre=ce("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=nre),Wt.init(t,e)}),Yre=ce("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=ire),Wt.init(t,e)}),Zre=ce("$ZodULID",(t,e)=>{e.pattern??(e.pattern=rre),Wt.init(t,e)}),Qre=ce("$ZodXID",(t,e)=>{e.pattern??(e.pattern=sre),Wt.init(t,e)}),Xre=ce("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=ore),Wt.init(t,e)}),Jre=ce("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=bre(e)),Wt.init(t,e)}),ese=ce("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=Ere),Wt.init(t,e)}),tse=ce("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=Tre(e)),Wt.init(t,e)}),nse=ce("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=lre),Wt.init(t,e)}),ise=ce("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=dre),Wt.init(t,e),t._zod.onattach.push(n=>{const i=n._zod.bag;i.format="ipv4"})}),rse=ce("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=mre),Wt.init(t,e),t._zod.onattach.push(n=>{const i=n._zod.bag;i.format="ipv6"}),t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),sse=ce("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=pre),Wt.init(t,e)}),ose=ce("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=gre),Wt.init(t,e),t._zod.check=n=>{const i=n.value.split("/");try{if(i.length!==2)throw new Error;const[r,o]=i;if(!o)throw new Error;const l=Number(o);if(`${l}`!==o)throw new Error;if(l<0||l>128)throw new Error;new URL(`http://[${r}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function w6(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const ase=ce("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=_re),Wt.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64"}),t._zod.check=n=>{w6(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function lse(t){if(!_6.test(t))return!1;const e=t.replace(/[-_]/g,i=>i==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return w6(n)}const use=ce("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=_6),Wt.init(t,e),t._zod.onattach.push(n=>{n._zod.bag.contentEncoding="base64url"}),t._zod.check=n=>{lse(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),cse=ce("$ZodE164",(t,e)=>{e.pattern??(e.pattern=vre),Wt.init(t,e)});function hse(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[i]=n;if(!i)return!1;const r=JSON.parse(atob(i));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||e&&(!("alg"in r)||r.alg!==e))}catch{return!1}}const fse=ce("$ZodJWT",(t,e)=>{Wt.init(t,e),t._zod.check=n=>{hse(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),S6=ce("$ZodNumber",(t,e)=>{hn.init(t,e),t._zod.pattern=t._zod.bag.pattern??Cre,t._zod.parse=(n,i)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const r=n.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return n;const o=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:t,...o?{received:o}:{}}),n}}),dse=ce("$ZodNumber",(t,e)=>{xre.init(t,e),S6.init(t,e)}),mse=ce("$ZodUnknown",(t,e)=>{hn.init(t,e),t._zod.parse=n=>n}),pse=ce("$ZodNever",(t,e)=>{hn.init(t,e),t._zod.parse=(n,i)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function IP(t,e,n){t.issues.length&&e.issues.push(...p6(n,t.issues)),e.value[n]=t.value}const gse=ce("$ZodArray",(t,e)=>{hn.init(t,e),t._zod.parse=(n,i)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:t}),n;n.value=Array(r.length);const o=[];for(let l=0;l<r.length;l++){const c=r[l],f=e.element._zod.run({value:c,issues:[]},i);f instanceof Promise?o.push(f.then(d=>IP(d,n,l))):IP(f,n,l)}return o.length?Promise.all(o).then(()=>n):n}});function uy(t,e,n,i){t.issues.length&&e.issues.push(...p6(n,t.issues)),t.value===void 0?n in i&&(e.value[n]=void 0):e.value[n]=t.value}function C6(t){const e=Object.keys(t.shape);for(const i of e)if(!t.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const n=Oie(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function A6(t,e,n,i,r,o){const l=[],c=r.keySet,f=r.catchall._zod,d=f.def.type;for(const p of Object.keys(e)){if(c.has(p))continue;if(d==="never"){l.push(p);continue}const y=f.run({value:e[p],issues:[]},i);y instanceof Promise?t.push(y.then(v=>uy(v,n,p,e))):uy(y,n,p,e)}return l.length&&n.issues.push({code:"unrecognized_keys",keys:l,input:e,inst:o}),t.length?Promise.all(t).then(()=>n):n}const _se=ce("$ZodObject",(t,e)=>{if(hn.init(t,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const c=e.shape;Object.defineProperty(e,"shape",{get:()=>{const f={...c};return Object.defineProperty(e,"shape",{value:f}),f}})}const i=Z1(()=>C6(e));Lt(t._zod,"propValues",()=>{const c=e.shape,f={};for(const d in c){const p=c[d]._zod;if(p.values){f[d]??(f[d]=new Set);for(const y of p.values)f[d].add(y)}}return f});const r=ly,o=e.catchall;let l;t._zod.parse=(c,f)=>{l??(l=i.value);const d=c.value;if(!r(d))return c.issues.push({expected:"object",code:"invalid_type",input:d,inst:t}),c;c.value={};const p=[],y=l.shape;for(const v of l.keys){const S=y[v]._zod.run({value:d[v],issues:[]},f);S instanceof Promise?p.push(S.then(N=>uy(N,c,v,d))):uy(S,c,v,d)}return o?A6(p,d,c,f,i.value,t):p.length?Promise.all(p).then(()=>c):c}}),yse=ce("$ZodObjectJIT",(t,e)=>{_se.init(t,e);const n=t._zod.parse,i=Z1(()=>C6(e)),r=v=>{const w=new Fre(["shape","payload","ctx"]),S=i.value,N=k=>{const K=CP(k);return`shape[${K}]._zod.run({ value: input[${K}], issues: [] }, ctx)`};w.write("const input = payload.value;");const O=Object.create(null);let j=0;for(const k of S.keys)O[k]=`key_${j++}`;w.write("const newResult = {};");for(const k of S.keys){const K=O[k],H=CP(k);w.write(`const ${K} = ${N(k)};`),w.write(`
        if (${K}.issues.length) {
          payload.issues = payload.issues.concat(${K}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${H}, ...iss.path] : [${H}]
          })));
        }
        
        
        if (${K}.value === undefined) {
          if (${H} in input) {
            newResult[${H}] = undefined;
          }
        } else {
          newResult[${H}] = ${K}.value;
        }
        
      `)}w.write("payload.value = newResult;"),w.write("return payload;");const V=w.compile();return(k,K)=>V(v,k,K)};let o;const l=ly,c=!f6.jitless,d=c&&Nie.value,p=e.catchall;let y;t._zod.parse=(v,w)=>{y??(y=i.value);const S=v.value;return l(S)?c&&d&&w?.async===!1&&w.jitless!==!0?(o||(o=r(e.shape)),v=o(v,w),p?A6([],S,v,w,y,t):v):n(v,w):(v.issues.push({expected:"object",code:"invalid_type",input:S,inst:t}),v)}});function RP(t,e,n,i){for(const o of t)if(o.issues.length===0)return e.value=o.value,e;const r=t.filter(o=>!xc(o));return r.length===1?(e.value=r[0].value,r[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(o=>o.issues.map(l=>su(l,i,ru())))}),e)}const vse=ce("$ZodUnion",(t,e)=>{hn.init(t,e),Lt(t._zod,"optin",()=>e.options.some(r=>r._zod.optin==="optional")?"optional":void 0),Lt(t._zod,"optout",()=>e.options.some(r=>r._zod.optout==="optional")?"optional":void 0),Lt(t._zod,"values",()=>{if(e.options.every(r=>r._zod.values))return new Set(e.options.flatMap(r=>Array.from(r._zod.values)))}),Lt(t._zod,"pattern",()=>{if(e.options.every(r=>r._zod.pattern)){const r=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${r.map(o=>X1(o.source)).join("|")})$`)}});const n=e.options.length===1,i=e.options[0]._zod.run;t._zod.parse=(r,o)=>{if(n)return i(r,o);let l=!1;const c=[];for(const f of e.options){const d=f._zod.run({value:r.value,issues:[]},o);if(d instanceof Promise)c.push(d),l=!0;else{if(d.issues.length===0)return d;c.push(d)}}return l?Promise.all(c).then(f=>RP(f,r,t,o)):RP(c,r,t,o)}}),Ese=ce("$ZodIntersection",(t,e)=>{hn.init(t,e),t._zod.parse=(n,i)=>{const r=n.value,o=e.left._zod.run({value:r,issues:[]},i),l=e.right._zod.run({value:r,issues:[]},i);return o instanceof Promise||l instanceof Promise?Promise.all([o,l]).then(([f,d])=>xP(n,f,d)):xP(n,o,l)}});function Xb(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(rm(t)&&rm(e)){const n=Object.keys(e),i=Object.keys(t).filter(o=>n.indexOf(o)!==-1),r={...t,...e};for(const o of i){const l=Xb(t[o],e[o]);if(!l.valid)return{valid:!1,mergeErrorPath:[o,...l.mergeErrorPath]};r[o]=l.data}return{valid:!0,data:r}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let i=0;i<t.length;i++){const r=t[i],o=e[i],l=Xb(r,o);if(!l.valid)return{valid:!1,mergeErrorPath:[i,...l.mergeErrorPath]};n.push(l.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function xP(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),xc(t))return t;const i=Xb(e.value,n.value);if(!i.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(i.mergeErrorPath)}`);return t.value=i.data,t}const Tse=ce("$ZodEnum",(t,e)=>{hn.init(t,e);const n=xie(e.entries),i=new Set(n);t._zod.values=i,t._zod.pattern=new RegExp(`^(${n.filter(r=>Pie.has(typeof r)).map(r=>typeof r=="string"?fh(r):r.toString()).join("|")})$`),t._zod.parse=(r,o)=>{const l=r.value;return i.has(l)||r.issues.push({code:"invalid_value",values:n,input:l,inst:t}),r}}),bse=ce("$ZodLiteral",(t,e)=>{if(hn.init(t,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");t._zod.values=new Set(e.values),t._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?fh(n):n?fh(n.toString()):String(n)).join("|")})$`),t._zod.parse=(n,i)=>{const r=n.value;return t._zod.values.has(r)||n.issues.push({code:"invalid_value",values:e.values,input:r,inst:t}),n}}),wse=ce("$ZodTransform",(t,e)=>{hn.init(t,e),t._zod.parse=(n,i)=>{if(i.direction==="backward")throw new h6(t.constructor.name);const r=e.transform(n.value,n);if(i.async)return(r instanceof Promise?r:Promise.resolve(r)).then(l=>(n.value=l,n));if(r instanceof Promise)throw new Fc;return n.value=r,n}});function DP(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const Sse=ce("$ZodOptional",(t,e)=>{hn.init(t,e),t._zod.optin="optional",t._zod.optout="optional",Lt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Lt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${X1(n.source)})?$`):void 0}),t._zod.parse=(n,i)=>{if(e.innerType._zod.optin==="optional"){const r=e.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>DP(o,n.value)):DP(r,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,i)}}),Cse=ce("$ZodNullable",(t,e)=>{hn.init(t,e),Lt(t._zod,"optin",()=>e.innerType._zod.optin),Lt(t._zod,"optout",()=>e.innerType._zod.optout),Lt(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${X1(n.source)}|null)$`):void 0}),Lt(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,i)=>n.value===null?n:e.innerType._zod.run(n,i)}),Ase=ce("$ZodDefault",(t,e)=>{hn.init(t,e),t._zod.optin="optional",Lt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,i)=>{if(i.direction==="backward")return e.innerType._zod.run(n,i);if(n.value===void 0)return n.value=e.defaultValue,n;const r=e.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>NP(o,e)):NP(r,e)}});function NP(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const Ise=ce("$ZodPrefault",(t,e)=>{hn.init(t,e),t._zod.optin="optional",Lt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,i)=>(i.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,i))}),Rse=ce("$ZodNonOptional",(t,e)=>{hn.init(t,e),Lt(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(i=>i!==void 0)):void 0}),t._zod.parse=(n,i)=>{const r=e.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>PP(o,t)):PP(r,t)}});function PP(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const xse=ce("$ZodCatch",(t,e)=>{hn.init(t,e),Lt(t._zod,"optin",()=>e.innerType._zod.optin),Lt(t._zod,"optout",()=>e.innerType._zod.optout),Lt(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,i)=>{if(i.direction==="backward")return e.innerType._zod.run(n,i);const r=e.innerType._zod.run(n,i);return r instanceof Promise?r.then(o=>(n.value=o.value,o.issues.length&&(n.value=e.catchValue({...n,error:{issues:o.issues.map(l=>su(l,i,ru()))},input:n.value}),n.issues=[]),n)):(n.value=r.value,r.issues.length&&(n.value=e.catchValue({...n,error:{issues:r.issues.map(o=>su(o,i,ru()))},input:n.value}),n.issues=[]),n)}}),Dse=ce("$ZodPipe",(t,e)=>{hn.init(t,e),Lt(t._zod,"values",()=>e.in._zod.values),Lt(t._zod,"optin",()=>e.in._zod.optin),Lt(t._zod,"optout",()=>e.out._zod.optout),Lt(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,i)=>{if(i.direction==="backward"){const o=e.out._zod.run(n,i);return o instanceof Promise?o.then(l=>Ig(l,e.in,i)):Ig(o,e.in,i)}const r=e.in._zod.run(n,i);return r instanceof Promise?r.then(o=>Ig(o,e.out,i)):Ig(r,e.out,i)}});function Ig(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const Nse=ce("$ZodReadonly",(t,e)=>{hn.init(t,e),Lt(t._zod,"propValues",()=>e.innerType._zod.propValues),Lt(t._zod,"values",()=>e.innerType._zod.values),Lt(t._zod,"optin",()=>e.innerType._zod.optin),Lt(t._zod,"optout",()=>e.innerType._zod.optout),t._zod.parse=(n,i)=>{if(i.direction==="backward")return e.innerType._zod.run(n,i);const r=e.innerType._zod.run(n,i);return r instanceof Promise?r.then(OP):OP(r)}});function OP(t){return t.value=Object.freeze(t.value),t}const Pse=ce("$ZodCustom",(t,e)=>{Ni.init(t,e),hn.init(t,e),t._zod.parse=(n,i)=>n,t._zod.check=n=>{const i=n.value,r=e.fn(i);if(r instanceof Promise)return r.then(o=>MP(o,n,i,t));MP(r,n,i,t)}});function MP(t,e,n,i){if(!t){const r={code:"custom",input:n,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(r.params=i._zod.def.params),e.issues.push(sm(r))}}class Ose{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const i=n[0];if(this._map.set(e,i),i&&typeof i=="object"&&"id"in i){if(this._idmap.has(i.id))throw new Error(`ID ${i.id} already exists in the registry`);this._idmap.set(i.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const i={...this.get(n)??{}};delete i.id;const r={...i,...this._map.get(e)};return Object.keys(r).length?r:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function Mse(){return new Ose}const Rg=Mse();function kse(t,e){return new t({type:"string",...Me(e)})}function Vse(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...Me(e)})}function kP(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...Me(e)})}function Lse(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...Me(e)})}function zse(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Me(e)})}function Use(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Me(e)})}function Fse(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Me(e)})}function jse(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...Me(e)})}function Bse(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...Me(e)})}function qse(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...Me(e)})}function $se(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...Me(e)})}function Hse(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...Me(e)})}function Gse(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...Me(e)})}function Kse(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...Me(e)})}function Wse(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...Me(e)})}function Yse(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...Me(e)})}function Zse(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...Me(e)})}function Qse(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Me(e)})}function Xse(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Me(e)})}function Jse(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...Me(e)})}function eoe(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...Me(e)})}function toe(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...Me(e)})}function noe(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...Me(e)})}function ioe(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Me(e)})}function roe(t,e){return new t({type:"string",format:"date",check:"string_format",...Me(e)})}function soe(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...Me(e)})}function ooe(t,e){return new t({type:"string",format:"duration",check:"string_format",...Me(e)})}function aoe(t,e){return new t({type:"number",checks:[],...Me(e)})}function loe(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...Me(e)})}function uoe(t){return new t({type:"unknown"})}function coe(t,e){return new t({type:"never",...Me(e)})}function VP(t,e){return new T6({check:"less_than",...Me(e),value:t,inclusive:!1})}function yT(t,e){return new T6({check:"less_than",...Me(e),value:t,inclusive:!0})}function LP(t,e){return new b6({check:"greater_than",...Me(e),value:t,inclusive:!1})}function vT(t,e){return new b6({check:"greater_than",...Me(e),value:t,inclusive:!0})}function zP(t,e){return new Rre({check:"multiple_of",...Me(e),value:t})}function I6(t,e){return new Dre({check:"max_length",...Me(e),maximum:t})}function cy(t,e){return new Nre({check:"min_length",...Me(e),minimum:t})}function R6(t,e){return new Pre({check:"length_equals",...Me(e),length:t})}function hoe(t,e){return new Ore({check:"string_format",format:"regex",...Me(e),pattern:t})}function foe(t){return new Mre({check:"string_format",format:"lowercase",...Me(t)})}function doe(t){return new kre({check:"string_format",format:"uppercase",...Me(t)})}function moe(t,e){return new Vre({check:"string_format",format:"includes",...Me(e),includes:t})}function poe(t,e){return new Lre({check:"string_format",format:"starts_with",...Me(e),prefix:t})}function goe(t,e){return new zre({check:"string_format",format:"ends_with",...Me(e),suffix:t})}function Om(t){return new Ure({check:"overwrite",tx:t})}function _oe(t){return Om(e=>e.normalize(t))}function yoe(){return Om(t=>t.trim())}function voe(){return Om(t=>t.toLowerCase())}function Eoe(){return Om(t=>t.toUpperCase())}function Toe(t,e,n){return new t({type:"array",element:e,...Me(n)})}function boe(t,e,n){return new t({type:"custom",check:"custom",fn:e,...Me(n)})}function woe(t){const e=Soe(n=>(n.addIssue=i=>{if(typeof i=="string")n.issues.push(sm(i,n.value,e._zod.def));else{const r=i;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=n.value),r.inst??(r.inst=e),r.continue??(r.continue=!e._zod.def.abort),n.issues.push(sm(r))}},t(n.value,n)));return e}function Soe(t,e){const n=new Ni({check:"custom",...Me(e)});return n._zod.check=t,n}function UP(t,e){try{var n=t()}catch(i){return e(i)}return n&&n.then?n.then(void 0,e):n}function Coe(t,e){for(var n={};t.length;){var i=t[0],r=i.code,o=i.message,l=i.path.join(".");if(!n[l])if("unionErrors"in i){var c=i.unionErrors[0].errors[0];n[l]={message:c.message,type:c.code}}else n[l]={message:o,type:r};if("unionErrors"in i&&i.unionErrors.forEach(function(p){return p.errors.forEach(function(y){return t.push(y)})}),e){var f=n[l].types,d=f&&f[i.code];n[l]=K1(l,e,n,r,d?[].concat(d,i.message):i.message)}t.shift()}return n}function Aoe(t,e){for(var n={};t.length;){var i=t[0],r=i.code,o=i.message,l=i.path.join(".");if(!n[l])if(i.code==="invalid_union"&&i.errors.length>0){var c=i.errors[0][0];n[l]={message:c.message,type:c.code}}else n[l]={message:o,type:r};if(i.code==="invalid_union"&&i.errors.forEach(function(p){return p.forEach(function(y){return t.push(y)})}),e){var f=n[l].types,d=f&&f[i.code];n[l]=K1(l,e,n,r,d?[].concat(d,i.message):i.message)}t.shift()}return n}function x6(t,e,n){if(n===void 0&&(n={}),(function(i){return"_def"in i&&typeof i._def=="object"&&"typeName"in i._def})(t))return function(i,r,o){try{return Promise.resolve(UP(function(){return Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](i,e)).then(function(l){return o.shouldUseNativeValidation&&Zb({},o),{errors:{},values:n.raw?Object.assign({},i):l}})},function(l){if((function(c){return Array.isArray(c?.issues)})(l))return{values:{},errors:bP(Coe(l.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw l}))}catch(l){return Promise.reject(l)}};if((function(i){return"_zod"in i&&typeof i._zod=="object"})(t))return function(i,r,o){try{return Promise.resolve(UP(function(){return Promise.resolve((n.mode==="sync"?$ie:Hie)(t,i,e)).then(function(l){return o.shouldUseNativeValidation&&Zb({},o),{errors:{},values:n.raw?Object.assign({},i):l}})},function(l){if((function(c){return c instanceof eC})(l))return{values:{},errors:bP(Aoe(l.issues,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw l}))}catch(l){return Promise.reject(l)}};throw new Error("Invalid input: not a Zod schema")}const Ioe=ce("ZodISODateTime",(t,e)=>{Jre.init(t,e),Xt.init(t,e)});function Roe(t){return ioe(Ioe,t)}const xoe=ce("ZodISODate",(t,e)=>{ese.init(t,e),Xt.init(t,e)});function Doe(t){return roe(xoe,t)}const Noe=ce("ZodISOTime",(t,e)=>{tse.init(t,e),Xt.init(t,e)});function Poe(t){return soe(Noe,t)}const Ooe=ce("ZodISODuration",(t,e)=>{nse.init(t,e),Xt.init(t,e)});function Moe(t){return ooe(Ooe,t)}const koe=(t,e)=>{eC.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>qie(t,n)},flatten:{value:n=>Bie(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,Qb,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,Qb,2)}},isEmpty:{get(){return t.issues.length===0}}})},Er=ce("ZodError",koe,{Parent:Error}),Voe=cv(Er),Loe=hv(Er),zoe=fv(Er),Uoe=dv(Er),Foe=Wie(Er),joe=Yie(Er),Boe=Zie(Er),qoe=Qie(Er),$oe=Xie(Er),Hoe=Jie(Er),Goe=ere(Er),Koe=tre(Er),Dn=ce("ZodType",(t,e)=>(hn.init(t,e),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(du(e,{checks:[...e.checks??[],...n.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]})),t.clone=(n,i)=>za(t,n,i),t.brand=()=>t,t.register=((n,i)=>(n.add(t,i),t)),t.parse=(n,i)=>Voe(t,n,i,{callee:t.parse}),t.safeParse=(n,i)=>zoe(t,n,i),t.parseAsync=async(n,i)=>Loe(t,n,i,{callee:t.parseAsync}),t.safeParseAsync=async(n,i)=>Uoe(t,n,i),t.spa=t.safeParseAsync,t.encode=(n,i)=>Foe(t,n,i),t.decode=(n,i)=>joe(t,n,i),t.encodeAsync=async(n,i)=>Boe(t,n,i),t.decodeAsync=async(n,i)=>qoe(t,n,i),t.safeEncode=(n,i)=>$oe(t,n,i),t.safeDecode=(n,i)=>Hoe(t,n,i),t.safeEncodeAsync=async(n,i)=>Goe(t,n,i),t.safeDecodeAsync=async(n,i)=>Koe(t,n,i),t.refine=(n,i)=>t.check(Lae(n,i)),t.superRefine=n=>t.check(zae(n)),t.overwrite=n=>t.check(Om(n)),t.optional=()=>$P(t),t.nullable=()=>HP(t),t.nullish=()=>$P(HP(t)),t.nonoptional=n=>Dae(t,n),t.array=()=>P6(t),t.or=n=>t_([t,n]),t.and=n=>Eae(t,n),t.transform=n=>GP(t,Sae(n)),t.default=n=>Iae(t,n),t.prefault=n=>xae(t,n),t.catch=n=>Pae(t,n),t.pipe=n=>GP(t,n),t.readonly=()=>kae(t),t.describe=n=>{const i=t.clone();return Rg.add(i,{description:n}),i},Object.defineProperty(t,"description",{get(){return Rg.get(t)?.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return Rg.get(t);const i=t.clone();return Rg.add(i,n[0]),i},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),D6=ce("_ZodString",(t,e)=>{tC.init(t,e),Dn.init(t,e);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...i)=>t.check(hoe(...i)),t.includes=(...i)=>t.check(moe(...i)),t.startsWith=(...i)=>t.check(poe(...i)),t.endsWith=(...i)=>t.check(goe(...i)),t.min=(...i)=>t.check(cy(...i)),t.max=(...i)=>t.check(I6(...i)),t.length=(...i)=>t.check(R6(...i)),t.nonempty=(...i)=>t.check(cy(1,...i)),t.lowercase=i=>t.check(foe(i)),t.uppercase=i=>t.check(doe(i)),t.trim=()=>t.check(yoe()),t.normalize=(...i)=>t.check(_oe(...i)),t.toLowerCase=()=>t.check(voe()),t.toUpperCase=()=>t.check(Eoe())}),Woe=ce("ZodString",(t,e)=>{tC.init(t,e),D6.init(t,e),t.email=n=>t.check(Vse(Yoe,n)),t.url=n=>t.check(jse(Zoe,n)),t.jwt=n=>t.check(noe(hae,n)),t.emoji=n=>t.check(Bse(Qoe,n)),t.guid=n=>t.check(kP(FP,n)),t.uuid=n=>t.check(Lse(xg,n)),t.uuidv4=n=>t.check(zse(xg,n)),t.uuidv6=n=>t.check(Use(xg,n)),t.uuidv7=n=>t.check(Fse(xg,n)),t.nanoid=n=>t.check(qse(Xoe,n)),t.guid=n=>t.check(kP(FP,n)),t.cuid=n=>t.check($se(Joe,n)),t.cuid2=n=>t.check(Hse(eae,n)),t.ulid=n=>t.check(Gse(tae,n)),t.base64=n=>t.check(Jse(lae,n)),t.base64url=n=>t.check(eoe(uae,n)),t.xid=n=>t.check(Kse(nae,n)),t.ksuid=n=>t.check(Wse(iae,n)),t.ipv4=n=>t.check(Yse(rae,n)),t.ipv6=n=>t.check(Zse(sae,n)),t.cidrv4=n=>t.check(Qse(oae,n)),t.cidrv6=n=>t.check(Xse(aae,n)),t.e164=n=>t.check(toe(cae,n)),t.datetime=n=>t.check(Roe(n)),t.date=n=>t.check(Doe(n)),t.time=n=>t.check(Poe(n)),t.duration=n=>t.check(Moe(n))});function ds(t){return kse(Woe,t)}const Xt=ce("ZodStringFormat",(t,e)=>{Wt.init(t,e),D6.init(t,e)}),Yoe=ce("ZodEmail",(t,e)=>{$re.init(t,e),Xt.init(t,e)}),FP=ce("ZodGUID",(t,e)=>{Bre.init(t,e),Xt.init(t,e)}),xg=ce("ZodUUID",(t,e)=>{qre.init(t,e),Xt.init(t,e)}),Zoe=ce("ZodURL",(t,e)=>{Hre.init(t,e),Xt.init(t,e)}),Qoe=ce("ZodEmoji",(t,e)=>{Gre.init(t,e),Xt.init(t,e)}),Xoe=ce("ZodNanoID",(t,e)=>{Kre.init(t,e),Xt.init(t,e)}),Joe=ce("ZodCUID",(t,e)=>{Wre.init(t,e),Xt.init(t,e)}),eae=ce("ZodCUID2",(t,e)=>{Yre.init(t,e),Xt.init(t,e)}),tae=ce("ZodULID",(t,e)=>{Zre.init(t,e),Xt.init(t,e)}),nae=ce("ZodXID",(t,e)=>{Qre.init(t,e),Xt.init(t,e)}),iae=ce("ZodKSUID",(t,e)=>{Xre.init(t,e),Xt.init(t,e)}),rae=ce("ZodIPv4",(t,e)=>{ise.init(t,e),Xt.init(t,e)}),sae=ce("ZodIPv6",(t,e)=>{rse.init(t,e),Xt.init(t,e)}),oae=ce("ZodCIDRv4",(t,e)=>{sse.init(t,e),Xt.init(t,e)}),aae=ce("ZodCIDRv6",(t,e)=>{ose.init(t,e),Xt.init(t,e)}),lae=ce("ZodBase64",(t,e)=>{ase.init(t,e),Xt.init(t,e)}),uae=ce("ZodBase64URL",(t,e)=>{use.init(t,e),Xt.init(t,e)}),cae=ce("ZodE164",(t,e)=>{cse.init(t,e),Xt.init(t,e)}),hae=ce("ZodJWT",(t,e)=>{fse.init(t,e),Xt.init(t,e)}),N6=ce("ZodNumber",(t,e)=>{S6.init(t,e),Dn.init(t,e),t.gt=(i,r)=>t.check(LP(i,r)),t.gte=(i,r)=>t.check(vT(i,r)),t.min=(i,r)=>t.check(vT(i,r)),t.lt=(i,r)=>t.check(VP(i,r)),t.lte=(i,r)=>t.check(yT(i,r)),t.max=(i,r)=>t.check(yT(i,r)),t.int=i=>t.check(BP(i)),t.safe=i=>t.check(BP(i)),t.positive=i=>t.check(LP(0,i)),t.nonnegative=i=>t.check(vT(0,i)),t.negative=i=>t.check(VP(0,i)),t.nonpositive=i=>t.check(yT(0,i)),t.multipleOf=(i,r)=>t.check(zP(i,r)),t.step=(i,r)=>t.check(zP(i,r)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function jP(t){return aoe(N6,t)}const fae=ce("ZodNumberFormat",(t,e)=>{dse.init(t,e),N6.init(t,e)});function BP(t){return loe(fae,t)}const dae=ce("ZodUnknown",(t,e)=>{mse.init(t,e),Dn.init(t,e)});function qP(){return uoe(dae)}const mae=ce("ZodNever",(t,e)=>{pse.init(t,e),Dn.init(t,e)});function pae(t){return coe(mae,t)}const gae=ce("ZodArray",(t,e)=>{gse.init(t,e),Dn.init(t,e),t.element=e.element,t.min=(n,i)=>t.check(cy(n,i)),t.nonempty=n=>t.check(cy(1,n)),t.max=(n,i)=>t.check(I6(n,i)),t.length=(n,i)=>t.check(R6(n,i)),t.unwrap=()=>t.element});function P6(t,e){return Toe(gae,t,e)}const _ae=ce("ZodObject",(t,e)=>{yse.init(t,e),Dn.init(t,e),Lt(t,"shape",()=>e.shape),t.keyof=()=>Tae(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:qP()}),t.loose=()=>t.clone({...t._zod.def,catchall:qP()}),t.strict=()=>t.clone({...t._zod.def,catchall:pae()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>Lie(t,n),t.safeExtend=n=>zie(t,n),t.merge=n=>Uie(t,n),t.pick=n=>kie(t,n),t.omit=n=>Vie(t,n),t.partial=(...n)=>Fie(O6,t,n[0]),t.required=(...n)=>jie(M6,t,n[0])});function e_(t,e){const n={type:"object",shape:t??{},...Me(e)};return new _ae(n)}const yae=ce("ZodUnion",(t,e)=>{vse.init(t,e),Dn.init(t,e),t.options=e.options});function t_(t,e){return new yae({type:"union",options:t,...Me(e)})}const vae=ce("ZodIntersection",(t,e)=>{Ese.init(t,e),Dn.init(t,e)});function Eae(t,e){return new vae({type:"intersection",left:t,right:e})}const Jb=ce("ZodEnum",(t,e)=>{Tse.init(t,e),Dn.init(t,e),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(i,r)=>{const o={};for(const l of i)if(n.has(l))o[l]=e.entries[l];else throw new Error(`Key ${l} not found in enum`);return new Jb({...e,checks:[],...Me(r),entries:o})},t.exclude=(i,r)=>{const o={...e.entries};for(const l of i)if(n.has(l))delete o[l];else throw new Error(`Key ${l} not found in enum`);return new Jb({...e,checks:[],...Me(r),entries:o})}});function Tae(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(i=>[i,i])):t;return new Jb({type:"enum",entries:n,...Me(e)})}const bae=ce("ZodLiteral",(t,e)=>{bse.init(t,e),Dn.init(t,e),t.values=new Set(e.values),Object.defineProperty(t,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function dc(t,e){return new bae({type:"literal",values:Array.isArray(t)?t:[t],...Me(e)})}const wae=ce("ZodTransform",(t,e)=>{wse.init(t,e),Dn.init(t,e),t._zod.parse=(n,i)=>{if(i.direction==="backward")throw new h6(t.constructor.name);n.addIssue=o=>{if(typeof o=="string")n.issues.push(sm(o,n.value,e));else{const l=o;l.fatal&&(l.continue=!1),l.code??(l.code="custom"),l.input??(l.input=n.value),l.inst??(l.inst=t),n.issues.push(sm(l))}};const r=e.transform(n.value,n);return r instanceof Promise?r.then(o=>(n.value=o,n)):(n.value=r,n)}});function Sae(t){return new wae({type:"transform",transform:t})}const O6=ce("ZodOptional",(t,e)=>{Sse.init(t,e),Dn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function $P(t){return new O6({type:"optional",innerType:t})}const Cae=ce("ZodNullable",(t,e)=>{Cse.init(t,e),Dn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function HP(t){return new Cae({type:"nullable",innerType:t})}const Aae=ce("ZodDefault",(t,e)=>{Ase.init(t,e),Dn.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function Iae(t,e){return new Aae({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():m6(e)}})}const Rae=ce("ZodPrefault",(t,e)=>{Ise.init(t,e),Dn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function xae(t,e){return new Rae({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():m6(e)}})}const M6=ce("ZodNonOptional",(t,e)=>{Rse.init(t,e),Dn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function Dae(t,e){return new M6({type:"nonoptional",innerType:t,...Me(e)})}const Nae=ce("ZodCatch",(t,e)=>{xse.init(t,e),Dn.init(t,e),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function Pae(t,e){return new Nae({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const Oae=ce("ZodPipe",(t,e)=>{Dse.init(t,e),Dn.init(t,e),t.in=e.in,t.out=e.out});function GP(t,e){return new Oae({type:"pipe",in:t,out:e})}const Mae=ce("ZodReadonly",(t,e)=>{Nse.init(t,e),Dn.init(t,e),t.unwrap=()=>t._zod.def.innerType});function kae(t){return new Mae({type:"readonly",innerType:t})}const Vae=ce("ZodCustom",(t,e)=>{Pse.init(t,e),Dn.init(t,e)});function Lae(t,e={}){return boe(Vae,t,e)}function zae(t){return woe(t)}const Uae=e_({title:ds().min(1,"Название обязательно"),serialNumber:jP().min(100,"Минимум 3 цифры (например, 100)"),isNew:t_([dc(0),dc(1)]),photo:ds().url("Неверный формат ссылки на изображение"),type:ds().optional(),specification:ds().optional(),status:t_([dc(0),dc(1)]),guarantee:e_({start:ds(),end:ds()}),price:P6(e_({value:jP().min(.01,"Цена должна быть больше 0"),symbol:ds(),isDefault:t_([dc(0),dc(1)])})).length(2,"Должно быть две валюты: USD и UAH"),name:ds().min(3,"Имя должно содержать минимум 3 символа")}).refine(t=>new Date(t.guarantee.end)>new Date(t.guarantee.start),{path:["guarantee","end"],message:"Дата окончания должна быть позже даты начала"}),Fae=({onSubmit:t})=>{const{register:e,handleSubmit:n,formState:{errors:i},watch:r}=c6({resolver:x6(Uae),defaultValues:{status:1,title:"",serialNumber:100,isNew:1,photo:"",type:"",specification:"",price:[{value:0,symbol:"USD",isDefault:1},{value:0,symbol:"UAH",isDefault:0}],name:"",guarantee:{start:new Date().toISOString().split("T")[0],end:new Date(Date.now()+31536e6).toISOString().split("T")[0]}}}),o=r("photo");return R.jsxs(Re,{onSubmit:n(t),children:[R.jsxs(im,{children:[R.jsx(to,{md:6,children:R.jsxs(Re.Group,{className:"mb-3",children:[R.jsx(Re.Label,{children:"Название продукта *"}),R.jsx(Re.Control,{type:"text",...e("title"),isInvalid:!!i.title}),R.jsx(Re.Control.Feedback,{type:"invalid",children:i.title?.message})]})}),R.jsx(to,{md:6,children:R.jsxs(Re.Group,{className:"mb-3",children:[R.jsx(Re.Label,{children:"Серийный номер *"}),R.jsx(Re.Control,{type:"number",...e("serialNumber",{valueAsNumber:!0}),isInvalid:!!i.serialNumber}),R.jsx(Re.Control.Feedback,{type:"invalid",children:i.serialNumber?.message})]})})]}),R.jsxs(Re.Group,{className:"mb-3",children:[R.jsx(Re.Label,{children:"Состояние *"}),R.jsxs(Re.Select,{...e("isNew",{valueAsNumber:!0}),children:[R.jsx("option",{value:1,children:"Новый"}),R.jsx("option",{value:0,children:"Б/у"})]})]}),R.jsxs(Re.Group,{className:"mb-3",children:[R.jsx(Re.Label,{children:"Статус *"}),R.jsxs(Re.Select,{...e("status",{valueAsNumber:!0}),children:[R.jsx("option",{value:1,children:"Свободен"}),R.jsx("option",{value:0,children:"В ремонте"})]}),i.status&&R.jsx(Re.Text,{className:"text-danger",children:i.status.message})]}),R.jsxs(Re.Group,{className:"mb-3",children:[R.jsx(Re.Label,{children:"Ссылка на фото *"}),R.jsx(Re.Control,{type:"url",...e("photo"),isInvalid:!!i.photo}),R.jsx(Re.Control.Feedback,{type:"invalid",children:i.photo?.message})]}),o&&R.jsx("div",{className:"mb-3",children:R.jsx("img",{src:o,alt:"Превью",style:{maxWidth:"200px",border:"1px solid #ccc"}})}),R.jsxs(Re.Group,{className:"mb-3",children:[R.jsx(Re.Label,{children:"Тип продукта"}),R.jsx(Re.Control,{as:"textarea",rows:2,...e("type")})]}),R.jsxs(Re.Group,{className:"mb-3",children:[R.jsx(Re.Label,{children:"Имя *"}),R.jsx(Re.Control,{type:"text",...e("name"),isInvalid:!!i.name}),R.jsx(Re.Control.Feedback,{type:"invalid",children:i.name?.message})]}),R.jsxs(im,{children:[R.jsx(to,{md:6,children:R.jsxs(Re.Group,{className:"mb-3",children:[R.jsx(Re.Label,{children:"Гарантия с *"}),R.jsx(Re.Control,{type:"date",...e("guarantee.start"),isInvalid:!!i.guarantee?.start}),R.jsx(Re.Control.Feedback,{type:"invalid",children:i.guarantee?.start?.message})]})}),R.jsx(to,{md:6,children:R.jsxs(Re.Group,{className:"mb-3",children:[R.jsx(Re.Label,{children:"Гарантия до *"}),R.jsx(Re.Control,{type:"date",...e("guarantee.end"),isInvalid:!!i.guarantee?.end}),R.jsx(Re.Control.Feedback,{type:"invalid",children:i.guarantee?.end?.message})]})})]}),R.jsxs(Re.Group,{className:"mb-3",children:[R.jsx(Re.Label,{children:"Цена в USD *"}),R.jsx(Re.Control,{type:"number",step:"0.01",...e("price.0.value",{valueAsNumber:!0}),isInvalid:!!i.price?.[0]?.value}),R.jsx(Re.Control.Feedback,{type:"invalid",children:i.price?.[0]?.value?.message})]}),R.jsxs(Re.Group,{className:"mb-3",children:[R.jsx(Re.Label,{children:"Цена в UAH *"}),R.jsx(Re.Control,{type:"number",step:"0.01",...e("price.1.value",{valueAsNumber:!0}),isInvalid:!!i.price?.[1]?.value}),R.jsx(Re.Control.Feedback,{type:"invalid",children:i.price?.[1]?.value?.message})]}),R.jsxs("div",{className:"d-flex gap-2 mt-3",children:[R.jsx(hh,{variant:"success",type:"submit",children:"Добавить продукт"}),R.jsx(hh,{variant:"secondary",type:"button",children:"Отмена"})]})]})},jae=({show:t,onHide:e,selectedOrderId:n})=>{const i=La(),r=o=>{if(console.log("Form data before submission:",o),!n){alert("Не выбран заказ для продукта");return}const l={serialNumber:o.serialNumber||0,isNew:o.isNew,photo:o.photo||"",title:o.title||"",type:o.type||"",specification:o.specification||"",guarantee:{start:o.guarantee.start||new Date().toISOString(),end:o.guarantee.end||new Date(Date.now()+365*24*60*60*1e3).toISOString()},price:[{value:o.price[0]?.value||0,symbol:"USD",isDefault:o.price[0]?.isDefault||1},{value:o.price[1]?.value||0,symbol:"UAH",isDefault:o.price[1]?.isDefault||0}],order:n,date:new Date().toISOString(),name:o.name||"",status:o.status};console.log("Product to be submitted:",l),i(eee(l)).unwrap().then(()=>{console.log("Product added successfully"),e()}).catch(c=>{console.error("Error adding product:",c),alert(`Ошибка при добавлении продукта: ${c.message}`)})};return R.jsxs(Ki,{show:t,onHide:e,size:"lg",centered:!0,children:[R.jsx(Ki.Header,{closeButton:!0,children:R.jsx(Ki.Title,{children:"Добавить продукт"})}),R.jsx(Ki.Body,{children:R.jsx(Fae,{onSubmit:r})})]})},Bae=A.memo(()=>{const t=La(),e=jl(O1),n=jl(Pee),[i,r]=A.useState(!1),[o,l]=A.useState(!1),[c,f]=A.useState(null),[d,p]=A.useState(!1);A.useEffect(()=>{t(S3())},[t]);const y=A.useCallback(()=>{p(!0)},[]),v=A.useCallback(()=>{p(!1)},[]),w=A.useCallback(k=>{f(k)},[]),S=A.useCallback(k=>{f(k),l(!0)},[]),N=A.useCallback((k,K)=>{k.stopPropagation(),f(K),r(!0)},[]),O=A.useCallback(()=>{l(!1)},[]),j=A.useCallback(()=>{r(!1)},[]),V=e.find(k=>k.id===c);return R.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[R.jsx("div",{className:o?Ge.orderContainerCollapse:Ge.orderContainer,children:e.map(k=>{const K=n[k.id]||[],H=new Date(k.date),ie=K.reduce((I,P)=>{const F=P.price.find(L=>L.isDefault===1);return I+(F?.value||0)},0),x=K.reduce((I,P)=>{const F=P.price.find(L=>L.isDefault===0);return I+(F?.value||0)},0);return R.jsxs("div",{className:o?Ge.collapse:Ge.orderCard,onClick:()=>w(k.id),children:[R.jsx("div",{className:Ge.orderCard__title,children:k.title}),R.jsxs("div",{className:Ge.orderCard__products,children:[R.jsx(Yne,{size:60,color:"#6c757d",onClick:()=>S(k.id)}),R.jsxs("div",{className:Ge.orderCard__count,children:[R.jsx("span",{style:{fontWeight:"bold",color:"#505050"},children:K.length}),R.jsx("div",{className:Ge.orderCard__label,children:"Продукта"})]})]}),R.jsxs("div",{className:Ge.orderCard__dateContainer,children:[R.jsxs("div",{className:Ge.orderCard__dayMonth,children:[R.jsx("span",{className:Ge.orderCard__day,children:H.getDate().toString().padStart(2,"0")}),R.jsx("span",{className:Ge.orderCard__separator,children:"/"}),R.jsx("span",{className:Ge.orderCard__month,children:H.getMonth()+1})]}),R.jsxs("div",{className:Ge.orderCard__fullDate,children:[R.jsx("span",{className:Ge.orderCard__yearDay,children:H.getDate().toString().padStart(2,"0")}),R.jsx("span",{className:Ge.orderCard__separator,children:"/"}),R.jsx("span",{className:Ge.orderCard__monthName,children:H.toLocaleDateString("ru-RU",{month:"short"})}),R.jsx("span",{className:Ge.orderCard__separator,children:"/"}),R.jsx("span",{className:Ge.orderCard__year,children:H.getFullYear()})]})]}),R.jsxs("div",{className:Ge.orderCard__price,children:[R.jsxs("div",{style:{fontSize:"12px",color:"#6c757d"},children:[ie," $"]}),R.jsxs("div",{style:{fontSize:"12px",color:"#6c757d"},children:[x," UAH"]})]}),k.id===c?R.jsx("div",{className:Ge.orderCard__arrow,children:R.jsx(Zne,{color:"#fff",className:Ge.IoIosArrowForward})}):o&&c!==k.id&&R.jsx("div",{className:Ge.orderCard__padding,children:R.jsx("br",{})}),R.jsx("div",{className:Ge.orderCard__actions,children:R.jsx("button",{className:Ge.orderCard__deleteBtn,onClick:I=>N(I,k.id),children:"🗑️"})})]},k.id)})}),V&&R.jsx(nie,{show:i,onHide:j,orderModelId:V.id,orderTitle:V.title}),R.jsx(jae,{show:d,onHide:v,selectedOrderId:c}),o&&V&&R.jsxs("div",{style:{background:"#fff",width:"78%",marginTop:"77px",marginRight:"2.5%",border:"1px solid #acacac",position:"relative",borderRadius:"8px"},children:[R.jsx("div",{style:{position:"absolute",right:0,padding:0,height:"30px"},children:R.jsx(Xne,{style:{marginBottom:"25px",cursor:"pointer"},color:"#acacac",onClick:O})}),R.jsxs("div",{style:{padding:"25px"},children:[R.jsx("h3",{children:V.title}),R.jsxs("div",{children:[R.jsx(n6,{size:"small",onClick:y,variant:"primary",children:"+"}),R.jsx("span",{style:{padding:"10px",color:"#0db561",fontSize:"20px",fontWeight:"500"},children:"Добавить продукт"})]})]}),R.jsx("div",{className:Ge.productsContainer,children:R.jsx(sie,{productsByOrderId:n,selectedOrder:V})})]})]})}),qae=e_({title:ds().min(3,"Заголовок должен быть не менее 3 символов"),description:ds().min(5,"Описание должно быть не менее 5 символов")}),$ae=({onSubmit:t})=>{const{register:e,handleSubmit:n,formState:{errors:i}}=c6({resolver:x6(qae),defaultValues:{title:"",description:""}});return R.jsxs(Re,{onSubmit:n(t),children:[R.jsxs(Re.Group,{className:"mb-3",controlId:"formTitle",children:[R.jsx(Re.Label,{children:"Заголовок заказа"}),R.jsx(Re.Control,{type:"text",placeholder:"Введите заголовок",isInvalid:!!i.title,...e("title")}),R.jsx(Re.Control.Feedback,{type:"invalid",children:i.title?.message})]}),R.jsxs(Re.Group,{className:"mb-3",controlId:"formDescription",children:[R.jsx(Re.Label,{children:"Описание"}),R.jsx(Re.Control,{as:"textarea",rows:3,placeholder:"Введите описание",isInvalid:!!i.description,...e("description")}),R.jsx(Re.Control.Feedback,{type:"invalid",children:i.description?.message})]}),R.jsx(hh,{variant:"success",type:"submit",children:"Добавить заказ"})]})},Hae=({show:t,onHide:e})=>{const n=La(),i=A.useCallback(r=>{const o={title:r.title,description:r.description,date:new Date().toISOString(),products:[]};console.log(r),n(oee(o)),e()},[[n,e]]);return R.jsxs(Ki,{show:t,onHide:e,size:"lg",centered:!0,children:[R.jsx(Ki.Header,{closeButton:!0,children:R.jsx(Ki.Title,{children:"Добавить заказ"})}),R.jsx(Ki.Body,{children:R.jsx($ae,{onSubmit:i})})]})},Gae=()=>{const t=jl(O1),e=La(),[n,i]=A.useState(!1);A.useEffect(()=>{e(ree())},[e]);const r=A.useCallback(()=>i(!0),[]),o=A.useCallback(()=>i(!1),[]);return R.jsxs("div",{className:"container-fluid py-4",style:{background:"#f8f9fa",marginTop:"50px"},children:[R.jsxs("div",{className:"d-flex",style:{gap:"10px"},children:[R.jsxs("div",{style:{background:"#03783dff",width:"50px",height:"50px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"},children:[R.jsx(n6,{size:"medium",onClick:r,variant:"primary",children:"+"}),R.jsx(Hae,{show:n,onHide:o})]}),R.jsxs("h1",{className:"mb-4",children:["Приходы / ",t.length]}),R.jsx("div",{className:"mb-4 d-flex",children:R.jsx(im,{className:"g-3 flex-nowrap",children:R.jsx(to,{xs:6,md:12})})})]}),R.jsx(Bae,{})]})},Kae="_formLabel_1xjzv_1",Wae="_productsContainer_1xjzv_13",Yae="_productCard_1xjzv_41",Zae="_statusIndicator_1xjzv_79",Qae="_statusDot_1xjzv_87",Xae="_available_1xjzv_153",Jae="_notAvailable_1xjzv_161",ele="_productImage_1xjzv_177",tle="_productInfo_1xjzv_193",nle="_productTitle_1xjzv_203",ile="_productSerial_1xjzv_223",rle="_productStatus_1xjzv_233",sle="_statusText_1xjzv_243",ole="_dateRange_1xjzv_275",ale="_condition_1xjzv_293",lle="_price_1xjzv_315",ule="_priceUsd_1xjzv_327",cle="_priceUah_1xjzv_339",hle="_groupName_1xjzv_349",fle="_name_1xjzv_363",dle="_probel_1xjzv_377",mle="_arrivalDate_1xjzv_427",ple="_deleteBtn_1xjzv_443",vt={formLabel:Kae,productsContainer:Wae,productCard:Yae,statusIndicator:Zae,statusDot:Qae,available:Xae,notAvailable:Jae,productImage:ele,productInfo:tle,productTitle:nle,productSerial:ile,productStatus:rle,statusText:sle,dateRange:ole,condition:ale,new:"_new_1xjzv_303",price:lle,priceUsd:ule,priceUah:cle,groupName:hle,name:fle,probel:dle,arrivalDate:mle,deleteBtn:ple},gle=A.memo(({filteredProducts:t})=>{const e=jl(O1),n=La(),i=A.useCallback(r=>{n(C3(r))},[n]);return R.jsx("div",{className:vt.productsContainer,children:t.map(r=>{const o=e.find(c=>c.id===r.order),l=()=>i(r.id);return R.jsxs("div",{className:vt.productCard,children:[R.jsx("div",{className:vt.statusIndicator,children:r.status===1?R.jsx("div",{className:`${vt.statusDot} ${vt.available}`}):R.jsx("div",{className:`${vt.statusDot} ${vt.notAvailable}`})}),R.jsx("div",{className:vt.productImage,children:R.jsx("img",{src:r.photo,alt:r.title,width:40,height:40})}),R.jsxs("div",{className:vt.productInfo,children:[R.jsx("div",{className:vt.productTitle,children:r.title}),R.jsx("div",{className:vt.productSerial,children:r.serialNumber})]}),R.jsx("div",{className:vt.productStatus,children:r.status===1?R.jsx("span",{className:`${vt.statusText} ${vt.available}`,children:"свободен"}):R.jsx("span",{className:`${vt.statusText} ${vt.notAvailable}`,children:"В ремонте"})}),R.jsxs("div",{className:vt.dateRange,children:[R.jsxs("div",{children:["c:   ",r.guarantee.start]}),R.jsxs("div",{children:["по: ",r.guarantee.end]})]}),R.jsx("div",{className:vt.condition,children:R.jsx("span",{className:vt.new,children:r.isNew===1?"новый":"Б/У"})}),R.jsxs("div",{className:vt.price,children:[R.jsxs("div",{className:vt.priceUsd,children:[r.price.find(c=>c.symbol==="USD")?.value.toLocaleString(),"$"]}),R.jsxs("div",{className:vt.priceUah,children:[r.price.find(c=>c.symbol==="UAH")?.value.toLocaleString(),"UAH"]})]}),R.jsx("div",{className:vt.groupName,children:"Длинное предлинное длиннючее название группы"}),r.name?R.jsx("div",{className:vt.name,children:r.name}):R.jsx("div",{className:vt.probel,children:"-"}),R.jsx("div",{className:vt.groupName,children:o?.title}),R.jsxs("div",{className:vt.arrivalDate,children:[R.jsx("span",{children:new Date(r.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),R.jsx("span",{children:new Date(r.date).toLocaleDateString("ru-RU",{day:"2-digit",month:"short",year:"numeric"})}),R.jsx("button",{className:vt.deleteBtn,onClick:l,children:"🗑️"})]})]},r.id)})})}),_le=()=>{const t=La(),e=jl(QJ),n=jl(XJ),i=jl(JJ),[r,o]=A.useState("");A.useEffect(()=>{t(S3())},[t]);const l=A.useMemo(()=>{const d={};return e.forEach(p=>{const y=p.type||"Без типа";d[y]=(d[y]||0)+1}),d},[e]),c=A.useMemo(()=>r?e.filter(d=>d.type===r):e,[e,r]),f=A.useCallback(d=>{o(d.currentTarget.value)},[]);return n==="loading"?R.jsx("div",{children:"Loading products..."}):n==="failed"?R.jsxs("div",{children:["Error: ",i]}):R.jsxs("div",{className:"container-fluid py-4",style:{background:"#f8f9fa"},children:[R.jsxs("div",{className:"d-flex",style:{alignItems:"flex-end",gap:"10px"},children:[R.jsx("h1",{className:"mb-4",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"200px"},children:r?`${r} / ${c.length}`:`Продукты / ${e.length}`}),R.jsx("div",{className:"mb-4 d-flex",children:R.jsxs(im,{className:"g-3 flex-nowrap",children:[R.jsx(to,{xs:6,md:12,children:R.jsxs(Re.Group,{className:"d-flex align-items-center gap-2",children:[R.jsx(Re.Label,{className:vt.formLabel,children:"Тип:"}),R.jsxs(Re.Select,{onChange:f,value:r,children:[R.jsxs("option",{value:"",children:["Все продукты (",e.length,")"]}),Object.entries(l).map(([d,p])=>R.jsxs("option",{value:d,children:[d," (",p,")"]},d))]})]})}),R.jsx(to,{xs:6,md:12,children:R.jsxs(Re.Group,{className:"d-flex align-items-center gap-2",children:[R.jsx(Re.Label,{className:vt.formLabel,children:"Спецификация:"}),R.jsx(Re.Select,{children:R.jsx("option",{})})]})})]})})]}),R.jsx(gle,{filteredProducts:c})]})},Gi={PRIHOD:"/prihod",GROUPS:"/group",PRODUCTS:"/products",USERS:"/users",SETTINGS:"/settings",ERROR:"/404"},yle=[{element:R.jsx(KX,{}),children:[{path:"/",element:R.jsx(VR,{to:Gi.PRIHOD,replace:!0})},{path:Gi.PRIHOD,element:R.jsx(Gae,{})},{path:Gi.GROUPS,element:R.jsx(HF,{})},{path:Gi.PRODUCTS,element:R.jsx(_le,{})},{path:Gi.USERS,element:R.jsx(GF,{})},{path:Gi.SETTINGS,element:R.jsx(KF,{})},{path:Gi.ERROR,element:R.jsx(WF,{})},{path:"*",element:R.jsx(VR,{to:"/404",replace:!0})}]}],vle=xJ({reducer:{orders:aee,products:tee}}),Ele=()=>XU(yle);EU.createRoot(document.getElementById("root")).render(R.jsx(St.StrictMode,{children:R.jsx(kF,{children:R.jsx(See,{store:vle,children:R.jsx(Ele,{})})})}));
