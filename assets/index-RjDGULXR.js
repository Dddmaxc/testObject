(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function Ld(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var I0={exports:{}},uf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CI;function _6(){if(CI)return uf;CI=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,o){var l=null;if(o!==void 0&&(l=""+o),r.key!==void 0&&(l=""+r.key),"key"in r){o={};for(var c in r)c!=="key"&&(o[c]=r[c])}else o=r;return r=o.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:o}}return uf.Fragment=e,uf.jsx=t,uf.jsxs=t,uf}var AI;function v6(){return AI||(AI=1,I0.exports=_6()),I0.exports}var O=v6(),R0={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var II;function E6(){if(II)return je;II=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),v=Symbol.iterator;function b(q){return q===null||typeof q!="object"?null:(q=v&&q[v]||q["@@iterator"],typeof q=="function"?q:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,N={};function B(q,oe,ge){this.props=q,this.context=oe,this.refs=N,this.updater=ge||C}B.prototype.isReactComponent={},B.prototype.setState=function(q,oe){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,oe,"setState")},B.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function V(){}V.prototype=B.prototype;function k(q,oe,ge){this.props=q,this.context=oe,this.refs=N,this.updater=ge||C}var Z=k.prototype=new V;Z.constructor=k,D(Z,B.prototype),Z.isPureReactComponent=!0;var K=Array.isArray;function ie(){}var R={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function M(q,oe,ge){var Ee=ge.ref;return{$$typeof:n,type:q,key:oe,ref:Ee!==void 0?Ee:null,props:ge}}function j(q,oe){return M(q.type,oe,q.props)}function U(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function z(q){var oe={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ge){return oe[ge]})}var P=/\/+/g;function De(q,oe){return typeof q=="object"&&q!==null&&q.key!=null?z(""+q.key):oe.toString(36)}function qe(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ie,ie):(q.status="pending",q.then(function(oe){q.status==="pending"&&(q.status="fulfilled",q.value=oe)},function(oe){q.status==="pending"&&(q.status="rejected",q.reason=oe)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function ee(q,oe,ge,Ee,Re){var ke=typeof q;(ke==="undefined"||ke==="boolean")&&(q=null);var ze=!1;if(q===null)ze=!0;else switch(ke){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(q.$$typeof){case n:case e:ze=!0;break;case g:return ze=q._init,ee(ze(q._payload),oe,ge,Ee,Re)}}if(ze)return Re=Re(q),ze=Ee===""?"."+De(q,0):Ee,K(Re)?(ge="",ze!=null&&(ge=ze.replace(P,"$&/")+"/"),ee(Re,oe,ge,"",function(In){return In})):Re!=null&&(U(Re)&&(Re=j(Re,ge+(Re.key==null||q&&q.key===Re.key?"":(""+Re.key).replace(P,"$&/")+"/")+ze)),oe.push(Re)),1;ze=0;var Mt=Ee===""?".":Ee+":";if(K(q))for(var at=0;at<q.length;at++)Ee=q[at],ke=Mt+De(Ee,at),ze+=ee(Ee,oe,ge,ke,Re);else if(at=b(q),typeof at=="function")for(q=at.call(q),at=0;!(Ee=q.next()).done;)Ee=Ee.value,ke=Mt+De(Ee,at++),ze+=ee(Ee,oe,ge,ke,Re);else if(ke==="object"){if(typeof q.then=="function")return ee(qe(q),oe,ge,Ee,Re);throw oe=String(q),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return ze}function ce(q,oe,ge){if(q==null)return q;var Ee=[],Re=0;return ee(q,Ee,"","",function(ke){return oe.call(ge,ke,Re++)}),Ee}function pe(q){if(q._status===-1){var oe=q._result;oe=oe(),oe.then(function(ge){(q._status===0||q._status===-1)&&(q._status=1,q._result=ge)},function(ge){(q._status===0||q._status===-1)&&(q._status=2,q._result=ge)}),q._status===-1&&(q._status=0,q._result=oe)}if(q._status===1)return q._result.default;throw q._result}var Me=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Ue={map:ce,forEach:function(q,oe,ge){ce(q,function(){oe.apply(this,arguments)},ge)},count:function(q){var oe=0;return ce(q,function(){oe++}),oe},toArray:function(q){return ce(q,function(oe){return oe})||[]},only:function(q){if(!U(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return je.Activity=_,je.Children=Ue,je.Component=B,je.Fragment=t,je.Profiler=r,je.PureComponent=k,je.StrictMode=i,je.Suspense=f,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,je.__COMPILER_RUNTIME={__proto__:null,c:function(q){return R.H.useMemoCache(q)}},je.cache=function(q){return function(){return q.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(q,oe,ge){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var Ee=D({},q.props),Re=q.key;if(oe!=null)for(ke in oe.key!==void 0&&(Re=""+oe.key),oe)!A.call(oe,ke)||ke==="key"||ke==="__self"||ke==="__source"||ke==="ref"&&oe.ref===void 0||(Ee[ke]=oe[ke]);var ke=arguments.length-2;if(ke===1)Ee.children=ge;else if(1<ke){for(var ze=Array(ke),Mt=0;Mt<ke;Mt++)ze[Mt]=arguments[Mt+2];Ee.children=ze}return M(q.type,Re,Ee)},je.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:o,_context:q},q},je.createElement=function(q,oe,ge){var Ee,Re={},ke=null;if(oe!=null)for(Ee in oe.key!==void 0&&(ke=""+oe.key),oe)A.call(oe,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Re[Ee]=oe[Ee]);var ze=arguments.length-2;if(ze===1)Re.children=ge;else if(1<ze){for(var Mt=Array(ze),at=0;at<ze;at++)Mt[at]=arguments[at+2];Re.children=Mt}if(q&&q.defaultProps)for(Ee in ze=q.defaultProps,ze)Re[Ee]===void 0&&(Re[Ee]=ze[Ee]);return M(q,ke,Re)},je.createRef=function(){return{current:null}},je.forwardRef=function(q){return{$$typeof:c,render:q}},je.isValidElement=U,je.lazy=function(q){return{$$typeof:g,_payload:{_status:-1,_result:q},_init:pe}},je.memo=function(q,oe){return{$$typeof:d,type:q,compare:oe===void 0?null:oe}},je.startTransition=function(q){var oe=R.T,ge={};R.T=ge;try{var Ee=q(),Re=R.S;Re!==null&&Re(ge,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(ie,Me)}catch(ke){Me(ke)}finally{oe!==null&&ge.types!==null&&(oe.types=ge.types),R.T=oe}},je.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},je.use=function(q){return R.H.use(q)},je.useActionState=function(q,oe,ge){return R.H.useActionState(q,oe,ge)},je.useCallback=function(q,oe){return R.H.useCallback(q,oe)},je.useContext=function(q){return R.H.useContext(q)},je.useDebugValue=function(){},je.useDeferredValue=function(q,oe){return R.H.useDeferredValue(q,oe)},je.useEffect=function(q,oe){return R.H.useEffect(q,oe)},je.useEffectEvent=function(q){return R.H.useEffectEvent(q)},je.useId=function(){return R.H.useId()},je.useImperativeHandle=function(q,oe,ge){return R.H.useImperativeHandle(q,oe,ge)},je.useInsertionEffect=function(q,oe){return R.H.useInsertionEffect(q,oe)},je.useLayoutEffect=function(q,oe){return R.H.useLayoutEffect(q,oe)},je.useMemo=function(q,oe){return R.H.useMemo(q,oe)},je.useOptimistic=function(q,oe){return R.H.useOptimistic(q,oe)},je.useReducer=function(q,oe,ge){return R.H.useReducer(q,oe,ge)},je.useRef=function(q){return R.H.useRef(q)},je.useState=function(q){return R.H.useState(q)},je.useSyncExternalStore=function(q,oe,ge){return R.H.useSyncExternalStore(q,oe,ge)},je.useTransition=function(){return R.H.useTransition()},je.version="19.2.0",je}var RI;function Py(){return RI||(RI=1,R0.exports=E6()),R0.exports}var I=Py();const Rt=Ld(I);var x0={exports:{}},cf={},D0={exports:{}},N0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xI;function T6(){return xI||(xI=1,(function(n){function e(ee,ce){var pe=ee.length;ee.push(ce);e:for(;0<pe;){var Me=pe-1>>>1,Ue=ee[Me];if(0<r(Ue,ce))ee[Me]=ce,ee[pe]=Ue,pe=Me;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ce=ee[0],pe=ee.pop();if(pe!==ce){ee[0]=pe;e:for(var Me=0,Ue=ee.length,q=Ue>>>1;Me<q;){var oe=2*(Me+1)-1,ge=ee[oe],Ee=oe+1,Re=ee[Ee];if(0>r(ge,pe))Ee<Ue&&0>r(Re,ge)?(ee[Me]=Re,ee[Ee]=pe,Me=Ee):(ee[Me]=ge,ee[oe]=pe,Me=oe);else if(Ee<Ue&&0>r(Re,pe))ee[Me]=Re,ee[Ee]=pe,Me=Ee;else break e}}return ce}function r(ee,ce){var pe=ee.sortIndex-ce.sortIndex;return pe!==0?pe:ee.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var f=[],d=[],g=1,_=null,v=3,b=!1,C=!1,D=!1,N=!1,B=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function Z(ee){for(var ce=t(d);ce!==null;){if(ce.callback===null)i(d);else if(ce.startTime<=ee)i(d),ce.sortIndex=ce.expirationTime,e(f,ce);else break;ce=t(d)}}function K(ee){if(D=!1,Z(ee),!C)if(t(f)!==null)C=!0,ie||(ie=!0,z());else{var ce=t(d);ce!==null&&qe(K,ce.startTime-ee)}}var ie=!1,R=-1,A=5,M=-1;function j(){return N?!0:!(n.unstable_now()-M<A)}function U(){if(N=!1,ie){var ee=n.unstable_now();M=ee;var ce=!0;try{e:{C=!1,D&&(D=!1,V(R),R=-1),b=!0;var pe=v;try{t:{for(Z(ee),_=t(f);_!==null&&!(_.expirationTime>ee&&j());){var Me=_.callback;if(typeof Me=="function"){_.callback=null,v=_.priorityLevel;var Ue=Me(_.expirationTime<=ee);if(ee=n.unstable_now(),typeof Ue=="function"){_.callback=Ue,Z(ee),ce=!0;break t}_===t(f)&&i(f),Z(ee)}else i(f);_=t(f)}if(_!==null)ce=!0;else{var q=t(d);q!==null&&qe(K,q.startTime-ee),ce=!1}}break e}finally{_=null,v=pe,b=!1}ce=void 0}}finally{ce?z():ie=!1}}}var z;if(typeof k=="function")z=function(){k(U)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,De=P.port2;P.port1.onmessage=U,z=function(){De.postMessage(null)}}else z=function(){B(U,0)};function qe(ee,ce){R=B(function(){ee(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(ee){switch(v){case 1:case 2:case 3:var ce=3;break;default:ce=v}var pe=v;v=ce;try{return ee()}finally{v=pe}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function(ee,ce){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var pe=v;v=ee;try{return ce()}finally{v=pe}},n.unstable_scheduleCallback=function(ee,ce,pe){var Me=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Me+pe:Me):pe=Me,ee){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=pe+Ue,ee={id:g++,callback:ce,priorityLevel:ee,startTime:pe,expirationTime:Ue,sortIndex:-1},pe>Me?(ee.sortIndex=pe,e(d,ee),t(f)===null&&ee===t(d)&&(D?(V(R),R=-1):D=!0,qe(K,pe-Me))):(ee.sortIndex=Ue,e(f,ee),C||b||(C=!0,ie||(ie=!0,z()))),ee},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(ee){var ce=v;return function(){var pe=v;v=ce;try{return ee.apply(this,arguments)}finally{v=pe}}}})(N0)),N0}var DI;function S6(){return DI||(DI=1,D0.exports=T6()),D0.exports}var M0={exports:{}},$n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NI;function b6(){if(NI)return $n;NI=1;var n=Py();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function o(f,d,g){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:f,containerInfo:d,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return $n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,$n.createPortal=function(f,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return o(f,d,null,g)},$n.flushSync=function(f){var d=l.T,g=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=d,i.p=g,i.d.f()}},$n.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},$n.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},$n.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var g=d.as,_=c(g,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;g==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:_,integrity:v,fetchPriority:b}):g==="script"&&i.d.X(f,{crossOrigin:_,integrity:v,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},$n.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var g=c(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},$n.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var g=d.as,_=c(g,d.crossOrigin);i.d.L(f,g,{crossOrigin:_,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},$n.preloadModule=function(f,d){if(typeof f=="string")if(d){var g=c(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},$n.requestFormReset=function(f){i.d.r(f)},$n.unstable_batchedUpdates=function(f,d){return f(d)},$n.useFormState=function(f,d,g){return l.H.useFormState(f,d,g)},$n.useFormStatus=function(){return l.H.useHostTransitionStatus()},$n.version="19.2.0",$n}var MI;function wN(){if(MI)return M0.exports;MI=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),M0.exports=b6(),M0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PI;function w6(){if(PI)return cf;PI=1;var n=S6(),e=Py(),t=wN();function i(s){var a="https://react.dev/errors/"+s;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function l(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function c(s){if(s.tag===31){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function f(s){if(o(s)!==s)throw Error(i(188))}function d(s){var a=s.alternate;if(!a){if(a=o(s),a===null)throw Error(i(188));return a!==s?null:s}for(var u=s,h=a;;){var p=u.return;if(p===null)break;var y=p.alternate;if(y===null){if(h=p.return,h!==null){u=h;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===u)return f(p),s;if(y===h)return f(p),a;y=y.sibling}throw Error(i(188))}if(u.return!==h.return)u=p,h=y;else{for(var T=!1,w=p.child;w;){if(w===u){T=!0,u=p,h=y;break}if(w===h){T=!0,h=p,u=y;break}w=w.sibling}if(!T){for(w=y.child;w;){if(w===u){T=!0,u=y,h=p;break}if(w===h){T=!0,h=y,u=p;break}w=w.sibling}if(!T)throw Error(i(189))}}if(u.alternate!==h)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:a}function g(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s;for(s=s.child;s!==null;){if(a=g(s),a!==null)return a;s=s.sibling}return null}var _=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),V=Symbol.for("react.consumer"),k=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function z(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var P=Symbol.for("react.client.reference");function De(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===P?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case B:return"Profiler";case N:return"StrictMode";case K:return"Suspense";case ie:return"SuspenseList";case M:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case C:return"Portal";case k:return s.displayName||"Context";case V:return(s._context.displayName||"Context")+".Consumer";case Z:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return a=s.displayName||null,a!==null?a:De(s.type)||"Memo";case A:a=s._payload,s=s._init;try{return De(s(a))}catch{}}return null}var qe=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Me=[],Ue=-1;function q(s){return{current:s}}function oe(s){0>Ue||(s.current=Me[Ue],Me[Ue]=null,Ue--)}function ge(s,a){Ue++,Me[Ue]=s.current,s.current=a}var Ee=q(null),Re=q(null),ke=q(null),ze=q(null);function Mt(s,a){switch(ge(ke,a),ge(Re,s),ge(Ee,null),a.nodeType){case 9:case 11:s=(s=a.documentElement)&&(s=s.namespaceURI)?WA(s):0;break;default:if(s=a.tagName,a=a.namespaceURI)a=WA(a),s=YA(a,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}oe(Ee),ge(Ee,s)}function at(){oe(Ee),oe(Re),oe(ke)}function In(s){s.memoizedState!==null&&ge(ze,s);var a=Ee.current,u=YA(a,s.type);a!==u&&(ge(Re,s),ge(Ee,u))}function wi(s){Re.current===s&&(oe(Ee),oe(Re)),ze.current===s&&(oe(ze),sf._currentValue=pe)}var Gn,ai;function sn(s){if(Gn===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);Gn=a&&a[1]||"",ai=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gn+s+ai}var ut=!1;function li(s,a){if(!s||ut)return"";ut=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(a){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ne){var J=ne}Reflect.construct(s,[],ue)}else{try{ue.call()}catch(ne){J=ne}s.call(ue.prototype)}}else{try{throw Error()}catch(ne){J=ne}(ue=s())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ne){if(ne&&J&&typeof ne.stack=="string")return[ne.stack,J.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=h.DetermineComponentFrameRoot(),T=y[0],w=y[1];if(T&&w){var F=T.split(`
`),X=w.split(`
`);for(p=h=0;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;for(;p<X.length&&!X[p].includes("DetermineComponentFrameRoot");)p++;if(h===F.length||p===X.length)for(h=F.length-1,p=X.length-1;1<=h&&0<=p&&F[h]!==X[p];)p--;for(;1<=h&&0<=p;h--,p--)if(F[h]!==X[p]){if(h!==1||p!==1)do if(h--,p--,0>p||F[h]!==X[p]){var se=`
`+F[h].replace(" at new "," at ");return s.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",s.displayName)),se}while(1<=h&&0<=p);break}}}finally{ut=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?sn(u):""}function Ci(s,a){switch(s.tag){case 26:case 27:case 5:return sn(s.type);case 16:return sn("Lazy");case 13:return s.child!==a&&a!==null?sn("Suspense Fallback"):sn("Suspense");case 19:return sn("SuspenseList");case 0:case 15:return li(s.type,!1);case 11:return li(s.type.render,!1);case 1:return li(s.type,!0);case 31:return sn("Activity");default:return""}}function fo(s){try{var a="",u=null;do a+=Ci(s,u),u=s,s=s.return;while(s);return a}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Pt=Object.prototype.hasOwnProperty,L=n.unstable_scheduleCallback,Y=n.unstable_cancelCallback,re=n.unstable_shouldYield,Se=n.unstable_requestPaint,he=n.unstable_now,fe=n.unstable_getCurrentPriorityLevel,me=n.unstable_ImmediatePriority,He=n.unstable_UserBlockingPriority,Xe=n.unstable_NormalPriority,Kn=n.unstable_LowPriority,ys=n.unstable_IdlePriority,Ai=n.log,Ql=n.unstable_setDisableYieldValue,Zn=null,Xt=null;function ui(s){if(typeof Ai=="function"&&Ql(s),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(Zn,s)}catch{}}var Lt=Math.clz32?Math.clz32:cm,Xl=Math.log,_s=Math.LN2;function cm(s){return s>>>=0,s===0?32:31-(Xl(s)/_s|0)|0}var Vr=256,Aa=262144,on=4194304;function kr(s){var a=s&42;if(a!==0)return a;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Lr(s,a,u){var h=s.pendingLanes;if(h===0)return 0;var p=0,y=s.suspendedLanes,T=s.pingedLanes;s=s.warmLanes;var w=h&134217727;return w!==0?(h=w&~y,h!==0?p=kr(h):(T&=w,T!==0?p=kr(T):u||(u=w&~s,u!==0&&(p=kr(u))))):(w=h&~y,w!==0?p=kr(w):T!==0?p=kr(T):u||(u=h&~s,u!==0&&(p=kr(u)))),p===0?0:a!==0&&a!==p&&(a&y)===0&&(y=p&-p,u=a&-a,y>=u||y===32&&(u&4194048)!==0)?a:p}function hr(s,a){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&a)===0}function N_(s,a){switch(s){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hm(){var s=on;return on<<=1,(on&62914560)===0&&(on=4194304),s}function Ur(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Ia(s,a){s.pendingLanes|=a,a!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function M_(s,a,u,h,p,y){var T=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var w=s.entanglements,F=s.expirationTimes,X=s.hiddenUpdates;for(u=T&~u;0<u;){var se=31-Lt(u),ue=1<<se;w[se]=0,F[se]=-1;var J=X[se];if(J!==null)for(X[se]=null,se=0;se<J.length;se++){var ne=J[se];ne!==null&&(ne.lane&=-536870913)}u&=~ue}h!==0&&Ra(s,h,0),y!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=y&~(T&~a))}function Ra(s,a,u){s.pendingLanes|=a,s.suspendedLanes&=~a;var h=31-Lt(a);s.entangledLanes|=a,s.entanglements[h]=s.entanglements[h]|1073741824|u&261930}function uh(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var h=31-Lt(u),p=1<<h;p&a|s[h]&a&&(s[h]|=a),u&=~p}}function ch(s,a){var u=a&-a;return u=(u&42)!==0?1:xa(u),(u&(s.suspendedLanes|a))!==0?0:u}function xa(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function vs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function fm(){var s=ce.p;return s!==0?s:(s=window.event,s===void 0?32:_I(s.type))}function fr(s,a){var u=ce.p;try{return ce.p=s,a()}finally{ce.p=u}}var dr=Math.random().toString(36).slice(2),an="__reactFiber$"+dr,Rn="__reactProps$"+dr,Fr="__reactContainer$"+dr,Jl="__reactEvents$"+dr,P_="__reactListeners$"+dr,dm="__reactHandles$"+dr,mm="__reactResources$"+dr,Br="__reactMarker$"+dr;function Zl(s){delete s[an],delete s[Rn],delete s[Jl],delete s[P_],delete s[dm]}function jr(s){var a=s[an];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Fr]||u[an]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=nI(s);s!==null;){if(u=s[an])return u;s=nI(s)}return a}s=u,u=s.parentNode}return null}function qi(s){if(s=s[an]||s[Fr]){var a=s.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return s}return null}function Ii(s){var a=s.tag;if(a===5||a===26||a===27||a===6)return s.stateNode;throw Error(i(33))}function zr(s){var a=s[mm];return a||(a=s[mm]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function ln(s){s[Br]=!0}var hh=new Set,fh={};function qr(s,a){Hr(s,a),Hr(s+"Capture",a)}function Hr(s,a){for(fh[s]=a,s=0;s<a.length;s++)hh.add(a[s])}var dh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mh={},ph={};function pm(s){return Pt.call(ph,s)?!0:Pt.call(mh,s)?!1:dh.test(s)?ph[s]=!0:(mh[s]=!0,!1)}function eu(s,a,u){if(pm(a))if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(a);return;case"boolean":var h=a.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){s.removeAttribute(a);return}}s.setAttribute(a,""+u)}}function Ri(s,a,u){if(u===null)s.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(a);return}s.setAttribute(a,""+u)}}function un(s,a,u,h){if(h===null)s.removeAttribute(u);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(a,u,""+h)}}function xn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function mo(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function gh(s,a,u){var h=Object.getOwnPropertyDescriptor(s.constructor.prototype,a);if(!s.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var p=h.get,y=h.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return p.call(this)},set:function(T){u=""+T,y.call(this,T)}}),Object.defineProperty(s,a,{enumerable:h.enumerable}),{getValue:function(){return u},setValue:function(T){u=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function _t(s){if(!s._valueTracker){var a=mo(s)?"checked":"value";s._valueTracker=gh(s,a,""+s[a])}}function Da(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),h="";return s&&(h=mo(s)?s.checked?"true":"false":s.value),s=h,s!==u?(a.setValue(s),!0):!1}function Gr(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Na=/[\n"\\]/g;function ci(s){return s.replace(Na,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function tu(s,a,u,h,p,y,T,w){s.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?s.type=T:s.removeAttribute("type"),a!=null?T==="number"?(a===0&&s.value===""||s.value!=a)&&(s.value=""+xn(a)):s.value!==""+xn(a)&&(s.value=""+xn(a)):T!=="submit"&&T!=="reset"||s.removeAttribute("value"),a!=null?yh(s,T,xn(a)):u!=null?yh(s,T,xn(u)):h!=null&&s.removeAttribute("value"),p==null&&y!=null&&(s.defaultChecked=!!y),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.name=""+xn(w):s.removeAttribute("name")}function gm(s,a,u,h,p,y,T,w){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(s.type=y),a!=null||u!=null){if(!(y!=="submit"&&y!=="reset"||a!=null)){_t(s);return}u=u!=null?""+xn(u):"",a=a!=null?""+xn(a):u,w||a===s.value||(s.value=a),s.defaultValue=a}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,s.checked=w?s.checked:!!h,s.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.name=T),_t(s)}function yh(s,a,u){a==="number"&&Gr(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function po(s,a,u,h){if(s=s.options,a){a={};for(var p=0;p<u.length;p++)a["$"+u[p]]=!0;for(u=0;u<s.length;u++)p=a.hasOwnProperty("$"+s[u].value),s[u].selected!==p&&(s[u].selected=p),p&&h&&(s[u].defaultSelected=!0)}else{for(u=""+xn(u),a=null,p=0;p<s.length;p++){if(s[p].value===u){s[p].selected=!0,h&&(s[p].defaultSelected=!0);return}a!==null||s[p].disabled||(a=s[p])}a!==null&&(a.selected=!0)}}function ym(s,a,u){if(a!=null&&(a=""+xn(a),a!==s.value&&(s.value=a),u==null)){s.defaultValue!==a&&(s.defaultValue=a);return}s.defaultValue=u!=null?""+xn(u):""}function go(s,a,u,h){if(a==null){if(h!=null){if(u!=null)throw Error(i(92));if(qe(h)){if(1<h.length)throw Error(i(93));h=h[0]}u=h}u==null&&(u=""),a=u}u=xn(a),s.defaultValue=u,h=s.textContent,h===u&&h!==""&&h!==null&&(s.value=h),_t(s)}function hi(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var _m=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _h(s,a,u){var h=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?h?s.setProperty(a,""):a==="float"?s.cssFloat="":s[a]="":h?s.setProperty(a,u):typeof u!="number"||u===0||_m.has(a)?a==="float"?s.cssFloat=u:s[a]=(""+u).trim():s[a]=u+"px"}function vh(s,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(s=s.style,u!=null){for(var h in u)!u.hasOwnProperty(h)||a!=null&&a.hasOwnProperty(h)||(h.indexOf("--")===0?s.setProperty(h,""):h==="float"?s.cssFloat="":s[h]="");for(var p in a)h=a[p],a.hasOwnProperty(p)&&u[p]!==h&&_h(s,p,h)}else for(var y in a)a.hasOwnProperty(y)&&_h(s,y,a[y])}function nu(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function iu(s){return yo.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function mr(){}var Eh=null;function Hi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var _o=null,Kr=null;function Ma(s){var a=qi(s);if(a&&(s=a.stateNode)){var u=s[Rn]||null;e:switch(s=a.stateNode,a.type){case"input":if(tu(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+ci(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var h=u[a];if(h!==s&&h.form===s.form){var p=h[Rn]||null;if(!p)throw Error(i(90));tu(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(a=0;a<u.length;a++)h=u[a],h.form===s.form&&Da(h)}break e;case"textarea":ym(s,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&po(s,!!u.multiple,a,!1)}}}var ru=!1;function vo(s,a,u){if(ru)return s(a,u);ru=!0;try{var h=s(a);return h}finally{if(ru=!1,(_o!==null||Kr!==null)&&(fp(),_o&&(a=_o,s=Kr,Kr=_o=null,Ma(a),s)))for(a=0;a<s.length;a++)Ma(s[a])}}function pr(s,a){var u=s.stateNode;if(u===null)return null;var h=u[Rn]||null;if(h===null)return null;u=h[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(s=s.type,h=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!h;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pa=!1;if(Gi)try{var wt={};Object.defineProperty(wt,"passive",{get:function(){Pa=!0}}),window.addEventListener("test",wt,wt),window.removeEventListener("test",wt,wt)}catch{Pa=!1}var $r=null,Th=null,Oa=null;function Sh(){if(Oa)return Oa;var s,a=Th,u=a.length,h,p="value"in $r?$r.value:$r.textContent,y=p.length;for(s=0;s<u&&a[s]===p[s];s++);var T=u-s;for(h=1;h<=T&&a[u-h]===p[y-h];h++);return Oa=p.slice(s,1<h?1-h:void 0)}function Va(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Es(){return!0}function gr(){return!1}function kn(s){function a(u,h,p,y,T){this._reactName=u,this._targetInst=p,this.type=h,this.nativeEvent=y,this.target=T,this.currentTarget=null;for(var w in s)s.hasOwnProperty(w)&&(u=s[w],this[w]=u?u(y):y[w]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Es:gr,this.isPropagationStopped=gr,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Es)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Es)},persist:function(){},isPersistent:Es}),a}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wr=kn(Ts),Eo=_({},Ts,{view:0,detail:0}),bh=kn(Eo),To,su,Yr,ou=_({},Eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:So,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Yr&&(Yr&&s.type==="mousemove"?(To=s.screenX-Yr.screenX,su=s.screenY-Yr.screenY):su=To=0,Yr=s),To)},movementY:function(s){return"movementY"in s?s.movementY:su}}),wh=kn(ou),ka=_({},ou,{dataTransfer:0}),Em=kn(ka),Tm=_({},Eo,{relatedTarget:0}),La=kn(Tm),Ch=_({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),Sm=kn(Ch),au=_({},Ts,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),bm=kn(au),wm=_({},Ts,{data:0}),Qr=kn(wm),Cm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Am={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Im={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rm(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=Im[s])?!!a[s]:!1}function So(){return Rm}var ei=_({},Eo,{key:function(s){if(s.key){var a=Cm[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Va(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Am[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:So,charCode:function(s){return s.type==="keypress"?Va(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Va(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),xm=kn(ei),Dm=_({},ou,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ss=kn(Dm),m=_({},Eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:So}),E=kn(m),S=_({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),x=kn(S),W=_({},ou,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),te=kn(W),_e=_({},Ts,{newState:0,oldState:0}),Ge=kn(_e),Jt=[9,13,27,32],ft=Gi&&"CompositionEvent"in window,Ut=null;Gi&&"documentMode"in document&&(Ut=document.documentMode);var Ki=Gi&&"TextEvent"in window&&!Ut,Xr=Gi&&(!ft||Ut&&8<Ut&&11>=Ut),yr=" ",_r=!1;function Ua(s,a){switch(s){case"keyup":return Jt.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lu(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var uu=!1;function z4(s,a){switch(s){case"compositionend":return lu(a);case"keypress":return a.which!==32?null:(_r=!0,yr);case"textInput":return s=a.data,s===yr&&_r?null:s;default:return null}}function q4(s,a){if(uu)return s==="compositionend"||!ft&&Ua(s,a)?(s=Sh(),Oa=Th=$r=null,uu=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Xr&&a.locale!=="ko"?null:a.data;default:return null}}var H4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function s1(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!H4[s.type]:a==="textarea"}function o1(s,a,u,h){_o?Kr?Kr.push(h):Kr=[h]:_o=h,a=vp(a,"onChange"),0<a.length&&(u=new Wr("onChange","change",null,u,h),s.push({event:u,listeners:a}))}var Ah=null,Ih=null;function G4(s){zA(s,0)}function Nm(s){var a=Ii(s);if(Da(a))return s}function a1(s,a){if(s==="change")return a}var l1=!1;if(Gi){var O_;if(Gi){var V_="oninput"in document;if(!V_){var u1=document.createElement("div");u1.setAttribute("oninput","return;"),V_=typeof u1.oninput=="function"}O_=V_}else O_=!1;l1=O_&&(!document.documentMode||9<document.documentMode)}function c1(){Ah&&(Ah.detachEvent("onpropertychange",h1),Ih=Ah=null)}function h1(s){if(s.propertyName==="value"&&Nm(Ih)){var a=[];o1(a,Ih,s,Hi(s)),vo(G4,a)}}function K4(s,a,u){s==="focusin"?(c1(),Ah=a,Ih=u,Ah.attachEvent("onpropertychange",h1)):s==="focusout"&&c1()}function $4(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Nm(Ih)}function W4(s,a){if(s==="click")return Nm(a)}function Y4(s,a){if(s==="input"||s==="change")return Nm(a)}function Q4(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var xi=typeof Object.is=="function"?Object.is:Q4;function Rh(s,a){if(xi(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),h=Object.keys(a);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var p=u[h];if(!Pt.call(a,p)||!xi(s[p],a[p]))return!1}return!0}function f1(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function d1(s,a){var u=f1(s);s=0;for(var h;u;){if(u.nodeType===3){if(h=s+u.textContent.length,s<=a&&h>=a)return{node:u,offset:a-s};s=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=f1(u)}}function m1(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?m1(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function p1(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var a=Gr(s.document);a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=Gr(s.document)}return a}function k_(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}var X4=Gi&&"documentMode"in document&&11>=document.documentMode,cu=null,L_=null,xh=null,U_=!1;function g1(s,a,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;U_||cu==null||cu!==Gr(h)||(h=cu,"selectionStart"in h&&k_(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),xh&&Rh(xh,h)||(xh=h,h=vp(L_,"onSelect"),0<h.length&&(a=new Wr("onSelect","select",null,a,u),s.push({event:a,listeners:h}),a.target=cu)))}function Fa(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var hu={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},F_={},y1={};Gi&&(y1=document.createElement("div").style,"AnimationEvent"in window||(delete hu.animationend.animation,delete hu.animationiteration.animation,delete hu.animationstart.animation),"TransitionEvent"in window||delete hu.transitionend.transition);function Ba(s){if(F_[s])return F_[s];if(!hu[s])return s;var a=hu[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in y1)return F_[s]=a[u];return s}var _1=Ba("animationend"),v1=Ba("animationiteration"),E1=Ba("animationstart"),J4=Ba("transitionrun"),Z4=Ba("transitionstart"),e3=Ba("transitioncancel"),T1=Ba("transitionend"),S1=new Map,B_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");B_.push("scrollEnd");function vr(s,a){S1.set(s,a),qr(a,[s])}var Mm=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},$i=[],fu=0,j_=0;function Pm(){for(var s=fu,a=j_=fu=0;a<s;){var u=$i[a];$i[a++]=null;var h=$i[a];$i[a++]=null;var p=$i[a];$i[a++]=null;var y=$i[a];if($i[a++]=null,h!==null&&p!==null){var T=h.pending;T===null?p.next=p:(p.next=T.next,T.next=p),h.pending=p}y!==0&&b1(u,p,y)}}function Om(s,a,u,h){$i[fu++]=s,$i[fu++]=a,$i[fu++]=u,$i[fu++]=h,j_|=h,s.lanes|=h,s=s.alternate,s!==null&&(s.lanes|=h)}function z_(s,a,u,h){return Om(s,a,u,h),Vm(s)}function ja(s,a){return Om(s,null,null,a),Vm(s)}function b1(s,a,u){s.lanes|=u;var h=s.alternate;h!==null&&(h.lanes|=u);for(var p=!1,y=s.return;y!==null;)y.childLanes|=u,h=y.alternate,h!==null&&(h.childLanes|=u),y.tag===22&&(s=y.stateNode,s===null||s._visibility&1||(p=!0)),s=y,y=y.return;return s.tag===3?(y=s.stateNode,p&&a!==null&&(p=31-Lt(u),s=y.hiddenUpdates,h=s[p],h===null?s[p]=[a]:h.push(a),a.lane=u|536870912),y):null}function Vm(s){if(50<Xh)throw Xh=0,Xv=null,Error(i(185));for(var a=s.return;a!==null;)s=a,a=s.return;return s.tag===3?s.stateNode:null}var du={};function t3(s,a,u,h){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Di(s,a,u,h){return new t3(s,a,u,h)}function q_(s){return s=s.prototype,!(!s||!s.isReactComponent)}function bs(s,a){var u=s.alternate;return u===null?(u=Di(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function w1(s,a){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=a,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,a=u.dependencies,s.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),s}function km(s,a,u,h,p,y){var T=0;if(h=s,typeof s=="function")q_(s)&&(T=1);else if(typeof s=="string")T=o6(s,u,Ee.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case M:return s=Di(31,u,a,p),s.elementType=M,s.lanes=y,s;case D:return za(u.children,p,y,a);case N:T=8,p|=24;break;case B:return s=Di(12,u,a,p|2),s.elementType=B,s.lanes=y,s;case K:return s=Di(13,u,a,p),s.elementType=K,s.lanes=y,s;case ie:return s=Di(19,u,a,p),s.elementType=ie,s.lanes=y,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:T=10;break e;case V:T=9;break e;case Z:T=11;break e;case R:T=14;break e;case A:T=16,h=null;break e}T=29,u=Error(i(130,s===null?"null":typeof s,"")),h=null}return a=Di(T,u,a,p),a.elementType=s,a.type=h,a.lanes=y,a}function za(s,a,u,h){return s=Di(7,s,h,a),s.lanes=u,s}function H_(s,a,u){return s=Di(6,s,null,a),s.lanes=u,s}function C1(s){var a=Di(18,null,null,0);return a.stateNode=s,a}function G_(s,a,u){return a=Di(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}var A1=new WeakMap;function Wi(s,a){if(typeof s=="object"&&s!==null){var u=A1.get(s);return u!==void 0?u:(a={value:s,source:a,stack:fo(a)},A1.set(s,a),a)}return{value:s,source:a,stack:fo(a)}}var mu=[],pu=0,Lm=null,Dh=0,Yi=[],Qi=0,bo=null,Jr=1,Zr="";function ws(s,a){mu[pu++]=Dh,mu[pu++]=Lm,Lm=s,Dh=a}function I1(s,a,u){Yi[Qi++]=Jr,Yi[Qi++]=Zr,Yi[Qi++]=bo,bo=s;var h=Jr;s=Zr;var p=32-Lt(h)-1;h&=~(1<<p),u+=1;var y=32-Lt(a)+p;if(30<y){var T=p-p%5;y=(h&(1<<T)-1).toString(32),h>>=T,p-=T,Jr=1<<32-Lt(a)+p|u<<p|h,Zr=y+s}else Jr=1<<y|u<<p|h,Zr=s}function K_(s){s.return!==null&&(ws(s,1),I1(s,1,0))}function $_(s){for(;s===Lm;)Lm=mu[--pu],mu[pu]=null,Dh=mu[--pu],mu[pu]=null;for(;s===bo;)bo=Yi[--Qi],Yi[Qi]=null,Zr=Yi[--Qi],Yi[Qi]=null,Jr=Yi[--Qi],Yi[Qi]=null}function R1(s,a){Yi[Qi++]=Jr,Yi[Qi++]=Zr,Yi[Qi++]=bo,Jr=a.id,Zr=a.overflow,bo=s}var Ln=null,Ot=null,ot=!1,wo=null,Xi=!1,W_=Error(i(519));function Co(s){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nh(Wi(a,s)),W_}function x1(s){var a=s.stateNode,u=s.type,h=s.memoizedProps;switch(a[an]=s,a[Rn]=h,u){case"dialog":tt("cancel",a),tt("close",a);break;case"iframe":case"object":case"embed":tt("load",a);break;case"video":case"audio":for(u=0;u<Zh.length;u++)tt(Zh[u],a);break;case"source":tt("error",a);break;case"img":case"image":case"link":tt("error",a),tt("load",a);break;case"details":tt("toggle",a);break;case"input":tt("invalid",a),gm(a,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":tt("invalid",a);break;case"textarea":tt("invalid",a),go(a,h.value,h.defaultValue,h.children)}u=h.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||h.suppressHydrationWarning===!0||KA(a.textContent,u)?(h.popover!=null&&(tt("beforetoggle",a),tt("toggle",a)),h.onScroll!=null&&tt("scroll",a),h.onScrollEnd!=null&&tt("scrollend",a),h.onClick!=null&&(a.onclick=mr),a=!0):a=!1,a||Co(s,!0)}function D1(s){for(Ln=s.return;Ln;)switch(Ln.tag){case 5:case 31:case 13:Xi=!1;return;case 27:case 3:Xi=!0;return;default:Ln=Ln.return}}function gu(s){if(s!==Ln)return!1;if(!ot)return D1(s),ot=!0,!1;var a=s.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||f0(s.type,s.memoizedProps)),u=!u),u&&Ot&&Co(s),D1(s),a===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ot=tI(s)}else if(a===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));Ot=tI(s)}else a===27?(a=Ot,Fo(s.type)?(s=y0,y0=null,Ot=s):Ot=a):Ot=Ln?Zi(s.stateNode.nextSibling):null;return!0}function qa(){Ot=Ln=null,ot=!1}function Y_(){var s=wo;return s!==null&&(pi===null?pi=s:pi.push.apply(pi,s),wo=null),s}function Nh(s){wo===null?wo=[s]:wo.push(s)}var Q_=q(null),Ha=null,Cs=null;function Ao(s,a,u){ge(Q_,a._currentValue),a._currentValue=u}function As(s){s._currentValue=Q_.current,oe(Q_)}function X_(s,a,u){for(;s!==null;){var h=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,h!==null&&(h.childLanes|=a)):h!==null&&(h.childLanes&a)!==a&&(h.childLanes|=a),s===u)break;s=s.return}}function J_(s,a,u,h){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var y=p.dependencies;if(y!==null){var T=p.child;y=y.firstContext;e:for(;y!==null;){var w=y;y=p;for(var F=0;F<a.length;F++)if(w.context===a[F]){y.lanes|=u,w=y.alternate,w!==null&&(w.lanes|=u),X_(y.return,u,s),h||(T=null);break e}y=w.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(i(341));T.lanes|=u,y=T.alternate,y!==null&&(y.lanes|=u),X_(T,u,s),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===s){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function yu(s,a,u,h){s=null;for(var p=a,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(i(387));if(T=T.memoizedProps,T!==null){var w=p.type;xi(p.pendingProps.value,T.value)||(s!==null?s.push(w):s=[w])}}else if(p===ze.current){if(T=p.alternate,T===null)throw Error(i(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(sf):s=[sf])}p=p.return}s!==null&&J_(a,s,u,h),a.flags|=262144}function Um(s){for(s=s.firstContext;s!==null;){if(!xi(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ga(s){Ha=s,Cs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Un(s){return N1(Ha,s)}function Fm(s,a){return Ha===null&&Ga(s),N1(s,a)}function N1(s,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Cs===null){if(s===null)throw Error(i(308));Cs=a,s.dependencies={lanes:0,firstContext:a},s.flags|=524288}else Cs=Cs.next=a;return u}var n3=typeof AbortController<"u"?AbortController:function(){var s=[],a=this.signal={aborted:!1,addEventListener:function(u,h){s.push(h)}};this.abort=function(){a.aborted=!0,s.forEach(function(u){return u()})}},i3=n.unstable_scheduleCallback,r3=n.unstable_NormalPriority,cn={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Z_(){return{controller:new n3,data:new Map,refCount:0}}function Mh(s){s.refCount--,s.refCount===0&&i3(r3,function(){s.controller.abort()})}var Ph=null,ev=0,_u=0,vu=null;function s3(s,a){if(Ph===null){var u=Ph=[];ev=0,_u=i0(),vu={status:"pending",value:void 0,then:function(h){u.push(h)}}}return ev++,a.then(M1,M1),a}function M1(){if(--ev===0&&Ph!==null){vu!==null&&(vu.status="fulfilled");var s=Ph;Ph=null,_u=0,vu=null;for(var a=0;a<s.length;a++)(0,s[a])()}}function o3(s,a){var u=[],h={status:"pending",value:null,reason:null,then:function(p){u.push(p)}};return s.then(function(){h.status="fulfilled",h.value=a;for(var p=0;p<u.length;p++)(0,u[p])(a)},function(p){for(h.status="rejected",h.reason=p,p=0;p<u.length;p++)(0,u[p])(void 0)}),h}var P1=ee.S;ee.S=function(s,a){gA=he(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&s3(s,a),P1!==null&&P1(s,a)};var Ka=q(null);function tv(){var s=Ka.current;return s!==null?s:xt.pooledCache}function Bm(s,a){a===null?ge(Ka,Ka.current):ge(Ka,a.pool)}function O1(){var s=tv();return s===null?null:{parent:cn._currentValue,pool:s}}var Eu=Error(i(460)),nv=Error(i(474)),jm=Error(i(542)),zm={then:function(){}};function V1(s){return s=s.status,s==="fulfilled"||s==="rejected"}function k1(s,a,u){switch(u=s[u],u===void 0?s.push(a):u!==a&&(a.then(mr,mr),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,U1(s),s;default:if(typeof a.status=="string")a.then(mr,mr);else{if(s=xt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=a,s.status="pending",s.then(function(h){if(a.status==="pending"){var p=a;p.status="fulfilled",p.value=h}},function(h){if(a.status==="pending"){var p=a;p.status="rejected",p.reason=h}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw s=a.reason,U1(s),s}throw Wa=a,Eu}}function $a(s){try{var a=s._init;return a(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Wa=u,Eu):u}}var Wa=null;function L1(){if(Wa===null)throw Error(i(459));var s=Wa;return Wa=null,s}function U1(s){if(s===Eu||s===jm)throw Error(i(483))}var Tu=null,Oh=0;function qm(s){var a=Oh;return Oh+=1,Tu===null&&(Tu=[]),k1(Tu,s,a)}function Vh(s,a){a=a.props.ref,s.ref=a!==void 0?a:null}function Hm(s,a){throw a.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(a),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s)))}function F1(s){function a(G,H){if(s){var Q=G.deletions;Q===null?(G.deletions=[H],G.flags|=16):Q.push(H)}}function u(G,H){if(!s)return null;for(;H!==null;)a(G,H),H=H.sibling;return null}function h(G){for(var H=new Map;G!==null;)G.key!==null?H.set(G.key,G):H.set(G.index,G),G=G.sibling;return H}function p(G,H){return G=bs(G,H),G.index=0,G.sibling=null,G}function y(G,H,Q){return G.index=Q,s?(Q=G.alternate,Q!==null?(Q=Q.index,Q<H?(G.flags|=67108866,H):Q):(G.flags|=67108866,H)):(G.flags|=1048576,H)}function T(G){return s&&G.alternate===null&&(G.flags|=67108866),G}function w(G,H,Q,le){return H===null||H.tag!==6?(H=H_(Q,G.mode,le),H.return=G,H):(H=p(H,Q),H.return=G,H)}function F(G,H,Q,le){var xe=Q.type;return xe===D?se(G,H,Q.props.children,le,Q.key):H!==null&&(H.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===A&&$a(xe)===H.type)?(H=p(H,Q.props),Vh(H,Q),H.return=G,H):(H=km(Q.type,Q.key,Q.props,null,G.mode,le),Vh(H,Q),H.return=G,H)}function X(G,H,Q,le){return H===null||H.tag!==4||H.stateNode.containerInfo!==Q.containerInfo||H.stateNode.implementation!==Q.implementation?(H=G_(Q,G.mode,le),H.return=G,H):(H=p(H,Q.children||[]),H.return=G,H)}function se(G,H,Q,le,xe){return H===null||H.tag!==7?(H=za(Q,G.mode,le,xe),H.return=G,H):(H=p(H,Q),H.return=G,H)}function ue(G,H,Q){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=H_(""+H,G.mode,Q),H.return=G,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case b:return Q=km(H.type,H.key,H.props,null,G.mode,Q),Vh(Q,H),Q.return=G,Q;case C:return H=G_(H,G.mode,Q),H.return=G,H;case A:return H=$a(H),ue(G,H,Q)}if(qe(H)||z(H))return H=za(H,G.mode,Q,null),H.return=G,H;if(typeof H.then=="function")return ue(G,qm(H),Q);if(H.$$typeof===k)return ue(G,Fm(G,H),Q);Hm(G,H)}return null}function J(G,H,Q,le){var xe=H!==null?H.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return xe!==null?null:w(G,H,""+Q,le);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:return Q.key===xe?F(G,H,Q,le):null;case C:return Q.key===xe?X(G,H,Q,le):null;case A:return Q=$a(Q),J(G,H,Q,le)}if(qe(Q)||z(Q))return xe!==null?null:se(G,H,Q,le,null);if(typeof Q.then=="function")return J(G,H,qm(Q),le);if(Q.$$typeof===k)return J(G,H,Fm(G,Q),le);Hm(G,Q)}return null}function ne(G,H,Q,le,xe){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return G=G.get(Q)||null,w(H,G,""+le,xe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case b:return G=G.get(le.key===null?Q:le.key)||null,F(H,G,le,xe);case C:return G=G.get(le.key===null?Q:le.key)||null,X(H,G,le,xe);case A:return le=$a(le),ne(G,H,Q,le,xe)}if(qe(le)||z(le))return G=G.get(Q)||null,se(H,G,le,xe,null);if(typeof le.then=="function")return ne(G,H,Q,qm(le),xe);if(le.$$typeof===k)return ne(G,H,Q,Fm(H,le),xe);Hm(H,le)}return null}function be(G,H,Q,le){for(var xe=null,ct=null,Ce=H,$e=H=0,rt=null;Ce!==null&&$e<Q.length;$e++){Ce.index>$e?(rt=Ce,Ce=null):rt=Ce.sibling;var ht=J(G,Ce,Q[$e],le);if(ht===null){Ce===null&&(Ce=rt);break}s&&Ce&&ht.alternate===null&&a(G,Ce),H=y(ht,H,$e),ct===null?xe=ht:ct.sibling=ht,ct=ht,Ce=rt}if($e===Q.length)return u(G,Ce),ot&&ws(G,$e),xe;if(Ce===null){for(;$e<Q.length;$e++)Ce=ue(G,Q[$e],le),Ce!==null&&(H=y(Ce,H,$e),ct===null?xe=Ce:ct.sibling=Ce,ct=Ce);return ot&&ws(G,$e),xe}for(Ce=h(Ce);$e<Q.length;$e++)rt=ne(Ce,G,$e,Q[$e],le),rt!==null&&(s&&rt.alternate!==null&&Ce.delete(rt.key===null?$e:rt.key),H=y(rt,H,$e),ct===null?xe=rt:ct.sibling=rt,ct=rt);return s&&Ce.forEach(function(Ho){return a(G,Ho)}),ot&&ws(G,$e),xe}function Pe(G,H,Q,le){if(Q==null)throw Error(i(151));for(var xe=null,ct=null,Ce=H,$e=H=0,rt=null,ht=Q.next();Ce!==null&&!ht.done;$e++,ht=Q.next()){Ce.index>$e?(rt=Ce,Ce=null):rt=Ce.sibling;var Ho=J(G,Ce,ht.value,le);if(Ho===null){Ce===null&&(Ce=rt);break}s&&Ce&&Ho.alternate===null&&a(G,Ce),H=y(Ho,H,$e),ct===null?xe=Ho:ct.sibling=Ho,ct=Ho,Ce=rt}if(ht.done)return u(G,Ce),ot&&ws(G,$e),xe;if(Ce===null){for(;!ht.done;$e++,ht=Q.next())ht=ue(G,ht.value,le),ht!==null&&(H=y(ht,H,$e),ct===null?xe=ht:ct.sibling=ht,ct=ht);return ot&&ws(G,$e),xe}for(Ce=h(Ce);!ht.done;$e++,ht=Q.next())ht=ne(Ce,G,$e,ht.value,le),ht!==null&&(s&&ht.alternate!==null&&Ce.delete(ht.key===null?$e:ht.key),H=y(ht,H,$e),ct===null?xe=ht:ct.sibling=ht,ct=ht);return s&&Ce.forEach(function(y6){return a(G,y6)}),ot&&ws(G,$e),xe}function It(G,H,Q,le){if(typeof Q=="object"&&Q!==null&&Q.type===D&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case b:e:{for(var xe=Q.key;H!==null;){if(H.key===xe){if(xe=Q.type,xe===D){if(H.tag===7){u(G,H.sibling),le=p(H,Q.props.children),le.return=G,G=le;break e}}else if(H.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===A&&$a(xe)===H.type){u(G,H.sibling),le=p(H,Q.props),Vh(le,Q),le.return=G,G=le;break e}u(G,H);break}else a(G,H);H=H.sibling}Q.type===D?(le=za(Q.props.children,G.mode,le,Q.key),le.return=G,G=le):(le=km(Q.type,Q.key,Q.props,null,G.mode,le),Vh(le,Q),le.return=G,G=le)}return T(G);case C:e:{for(xe=Q.key;H!==null;){if(H.key===xe)if(H.tag===4&&H.stateNode.containerInfo===Q.containerInfo&&H.stateNode.implementation===Q.implementation){u(G,H.sibling),le=p(H,Q.children||[]),le.return=G,G=le;break e}else{u(G,H);break}else a(G,H);H=H.sibling}le=G_(Q,G.mode,le),le.return=G,G=le}return T(G);case A:return Q=$a(Q),It(G,H,Q,le)}if(qe(Q))return be(G,H,Q,le);if(z(Q)){if(xe=z(Q),typeof xe!="function")throw Error(i(150));return Q=xe.call(Q),Pe(G,H,Q,le)}if(typeof Q.then=="function")return It(G,H,qm(Q),le);if(Q.$$typeof===k)return It(G,H,Fm(G,Q),le);Hm(G,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,H!==null&&H.tag===6?(u(G,H.sibling),le=p(H,Q),le.return=G,G=le):(u(G,H),le=H_(Q,G.mode,le),le.return=G,G=le),T(G)):u(G,H)}return function(G,H,Q,le){try{Oh=0;var xe=It(G,H,Q,le);return Tu=null,xe}catch(Ce){if(Ce===Eu||Ce===jm)throw Ce;var ct=Di(29,Ce,null,G.mode);return ct.lanes=le,ct.return=G,ct}finally{}}}var Ya=F1(!0),B1=F1(!1),Io=!1;function iv(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rv(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ro(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function xo(s,a,u){var h=s.updateQueue;if(h===null)return null;if(h=h.shared,(dt&2)!==0){var p=h.pending;return p===null?a.next=a:(a.next=p.next,p.next=a),h.pending=a,a=Vm(s),b1(s,null,u),a}return Om(s,h,a,u),Vm(s)}function kh(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,uh(s,u)}}function sv(s,a){var u=s.updateQueue,h=s.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var p=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var T={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};y===null?p=y=T:y=y.next=T,u=u.next}while(u!==null);y===null?p=y=a:y=y.next=a}else p=y=a;u={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:h.shared,callbacks:h.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}var ov=!1;function Lh(){if(ov){var s=vu;if(s!==null)throw s}}function Uh(s,a,u,h){ov=!1;var p=s.updateQueue;Io=!1;var y=p.firstBaseUpdate,T=p.lastBaseUpdate,w=p.shared.pending;if(w!==null){p.shared.pending=null;var F=w,X=F.next;F.next=null,T===null?y=X:T.next=X,T=F;var se=s.alternate;se!==null&&(se=se.updateQueue,w=se.lastBaseUpdate,w!==T&&(w===null?se.firstBaseUpdate=X:w.next=X,se.lastBaseUpdate=F))}if(y!==null){var ue=p.baseState;T=0,se=X=F=null,w=y;do{var J=w.lane&-536870913,ne=J!==w.lane;if(ne?(it&J)===J:(h&J)===J){J!==0&&J===_u&&(ov=!0),se!==null&&(se=se.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var be=s,Pe=w;J=a;var It=u;switch(Pe.tag){case 1:if(be=Pe.payload,typeof be=="function"){ue=be.call(It,ue,J);break e}ue=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Pe.payload,J=typeof be=="function"?be.call(It,ue,J):be,J==null)break e;ue=_({},ue,J);break e;case 2:Io=!0}}J=w.callback,J!==null&&(s.flags|=64,ne&&(s.flags|=8192),ne=p.callbacks,ne===null?p.callbacks=[J]:ne.push(J))}else ne={lane:J,tag:w.tag,payload:w.payload,callback:w.callback,next:null},se===null?(X=se=ne,F=ue):se=se.next=ne,T|=J;if(w=w.next,w===null){if(w=p.shared.pending,w===null)break;ne=w,w=ne.next,ne.next=null,p.lastBaseUpdate=ne,p.shared.pending=null}}while(!0);se===null&&(F=ue),p.baseState=F,p.firstBaseUpdate=X,p.lastBaseUpdate=se,y===null&&(p.shared.lanes=0),Oo|=T,s.lanes=T,s.memoizedState=ue}}function j1(s,a){if(typeof s!="function")throw Error(i(191,s));s.call(a)}function z1(s,a){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)j1(u[s],a)}var Su=q(null),Gm=q(0);function q1(s,a){s=Vs,ge(Gm,s),ge(Su,a),Vs=s|a.baseLanes}function av(){ge(Gm,Vs),ge(Su,Su.current)}function lv(){Vs=Gm.current,oe(Su),oe(Gm)}var Ni=q(null),Ji=null;function Do(s){var a=s.alternate;ge(Zt,Zt.current&1),ge(Ni,s),Ji===null&&(a===null||Su.current!==null||a.memoizedState!==null)&&(Ji=s)}function uv(s){ge(Zt,Zt.current),ge(Ni,s),Ji===null&&(Ji=s)}function H1(s){s.tag===22?(ge(Zt,Zt.current),ge(Ni,s),Ji===null&&(Ji=s)):No()}function No(){ge(Zt,Zt.current),ge(Ni,Ni.current)}function Mi(s){oe(Ni),Ji===s&&(Ji=null),oe(Zt)}var Zt=q(0);function Km(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||p0(u)||g0(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Is=0,Ke=null,Ct=null,hn=null,$m=!1,bu=!1,Qa=!1,Wm=0,Fh=0,wu=null,a3=0;function $t(){throw Error(i(321))}function cv(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!xi(s[u],a[u]))return!1;return!0}function hv(s,a,u,h,p,y){return Is=y,Ke=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ee.H=s===null||s.memoizedState===null?IC:Av,Qa=!1,y=u(h,p),Qa=!1,bu&&(y=K1(a,u,h,p)),G1(s),y}function G1(s){ee.H=zh;var a=Ct!==null&&Ct.next!==null;if(Is=0,hn=Ct=Ke=null,$m=!1,Fh=0,wu=null,a)throw Error(i(300));s===null||fn||(s=s.dependencies,s!==null&&Um(s)&&(fn=!0))}function K1(s,a,u,h){Ke=s;var p=0;do{if(bu&&(wu=null),Fh=0,bu=!1,25<=p)throw Error(i(301));if(p+=1,hn=Ct=null,s.updateQueue!=null){var y=s.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}ee.H=RC,y=a(u,h)}while(bu);return y}function l3(){var s=ee.H,a=s.useState()[0];return a=typeof a.then=="function"?Bh(a):a,s=s.useState()[0],(Ct!==null?Ct.memoizedState:null)!==s&&(Ke.flags|=1024),a}function fv(){var s=Wm!==0;return Wm=0,s}function dv(s,a,u){a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~u}function mv(s){if($m){for(s=s.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}$m=!1}Is=0,hn=Ct=Ke=null,bu=!1,Fh=Wm=0,wu=null}function ti(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Ke.memoizedState=hn=s:hn=hn.next=s,hn}function en(){if(Ct===null){var s=Ke.alternate;s=s!==null?s.memoizedState:null}else s=Ct.next;var a=hn===null?Ke.memoizedState:hn.next;if(a!==null)hn=a,Ct=s;else{if(s===null)throw Ke.alternate===null?Error(i(467)):Error(i(310));Ct=s,s={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},hn===null?Ke.memoizedState=hn=s:hn=hn.next=s}return hn}function Ym(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bh(s){var a=Fh;return Fh+=1,wu===null&&(wu=[]),s=k1(wu,s,a),a=Ke,(hn===null?a.memoizedState:hn.next)===null&&(a=a.alternate,ee.H=a===null||a.memoizedState===null?IC:Av),s}function Qm(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Bh(s);if(s.$$typeof===k)return Un(s)}throw Error(i(438,String(s)))}function pv(s){var a=null,u=Ke.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var h=Ke.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(a={data:h.data.map(function(p){return p.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Ym(),Ke.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(s),h=0;h<s;h++)u[h]=j;return a.index++,u}function Rs(s,a){return typeof a=="function"?a(s):a}function Xm(s){var a=en();return gv(a,Ct,s)}function gv(s,a,u){var h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var p=s.baseQueue,y=h.pending;if(y!==null){if(p!==null){var T=p.next;p.next=y.next,y.next=T}a.baseQueue=p=y,h.pending=null}if(y=s.baseState,p===null)s.memoizedState=y;else{a=p.next;var w=T=null,F=null,X=a,se=!1;do{var ue=X.lane&-536870913;if(ue!==X.lane?(it&ue)===ue:(Is&ue)===ue){var J=X.revertLane;if(J===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ue===_u&&(se=!0);else if((Is&J)===J){X=X.next,J===_u&&(se=!0);continue}else ue={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(w=F=ue,T=y):F=F.next=ue,Ke.lanes|=J,Oo|=J;ue=X.action,Qa&&u(y,ue),y=X.hasEagerState?X.eagerState:u(y,ue)}else J={lane:ue,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},F===null?(w=F=J,T=y):F=F.next=J,Ke.lanes|=ue,Oo|=ue;X=X.next}while(X!==null&&X!==a);if(F===null?T=y:F.next=w,!xi(y,s.memoizedState)&&(fn=!0,se&&(u=vu,u!==null)))throw u;s.memoizedState=y,s.baseState=T,s.baseQueue=F,h.lastRenderedState=y}return p===null&&(h.lanes=0),[s.memoizedState,h.dispatch]}function yv(s){var a=en(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var h=u.dispatch,p=u.pending,y=a.memoizedState;if(p!==null){u.pending=null;var T=p=p.next;do y=s(y,T.action),T=T.next;while(T!==p);xi(y,a.memoizedState)||(fn=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),u.lastRenderedState=y}return[y,h]}function $1(s,a,u){var h=Ke,p=en(),y=ot;if(y){if(u===void 0)throw Error(i(407));u=u()}else u=a();var T=!xi((Ct||p).memoizedState,u);if(T&&(p.memoizedState=u,fn=!0),p=p.queue,Ev(Q1.bind(null,h,p,s),[s]),p.getSnapshot!==a||T||hn!==null&&hn.memoizedState.tag&1){if(h.flags|=2048,Cu(9,{destroy:void 0},Y1.bind(null,h,p,u,a),null),xt===null)throw Error(i(349));y||(Is&127)!==0||W1(h,a,u)}return u}function W1(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Ke.updateQueue,a===null?(a=Ym(),Ke.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function Y1(s,a,u,h){a.value=u,a.getSnapshot=h,X1(a)&&J1(s)}function Q1(s,a,u){return u(function(){X1(a)&&J1(s)})}function X1(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!xi(s,u)}catch{return!0}}function J1(s){var a=ja(s,2);a!==null&&gi(a,s,2)}function _v(s){var a=ti();if(typeof s=="function"){var u=s;if(s=u(),Qa){ui(!0);try{u()}finally{ui(!1)}}}return a.memoizedState=a.baseState=s,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:s},a}function Z1(s,a,u,h){return s.baseState=u,gv(s,Ct,typeof h=="function"?h:Rs)}function u3(s,a,u,h,p){if(ep(s))throw Error(i(485));if(s=a.action,s!==null){var y={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){y.listeners.push(T)}};ee.T!==null?u(!0):y.isTransition=!1,h(y),u=a.pending,u===null?(y.next=a.pending=y,eC(a,y)):(y.next=u.next,a.pending=u.next=y)}}function eC(s,a){var u=a.action,h=a.payload,p=s.state;if(a.isTransition){var y=ee.T,T={};ee.T=T;try{var w=u(p,h),F=ee.S;F!==null&&F(T,w),tC(s,a,w)}catch(X){vv(s,a,X)}finally{y!==null&&T.types!==null&&(y.types=T.types),ee.T=y}}else try{y=u(p,h),tC(s,a,y)}catch(X){vv(s,a,X)}}function tC(s,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(h){nC(s,a,h)},function(h){return vv(s,a,h)}):nC(s,a,u)}function nC(s,a,u){a.status="fulfilled",a.value=u,iC(a),s.state=u,a=s.pending,a!==null&&(u=a.next,u===a?s.pending=null:(u=u.next,a.next=u,eC(s,u)))}function vv(s,a,u){var h=s.pending;if(s.pending=null,h!==null){h=h.next;do a.status="rejected",a.reason=u,iC(a),a=a.next;while(a!==h)}s.action=null}function iC(s){s=s.listeners;for(var a=0;a<s.length;a++)(0,s[a])()}function rC(s,a){return a}function sC(s,a){if(ot){var u=xt.formState;if(u!==null){e:{var h=Ke;if(ot){if(Ot){t:{for(var p=Ot,y=Xi;p.nodeType!==8;){if(!y){p=null;break t}if(p=Zi(p.nextSibling),p===null){p=null;break t}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){Ot=Zi(p.nextSibling),h=p.data==="F!";break e}}Co(h)}h=!1}h&&(a=u[0])}}return u=ti(),u.memoizedState=u.baseState=a,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rC,lastRenderedState:a},u.queue=h,u=wC.bind(null,Ke,h),h.dispatch=u,h=_v(!1),y=Cv.bind(null,Ke,!1,h.queue),h=ti(),p={state:a,dispatch:null,action:s,pending:null},h.queue=p,u=u3.bind(null,Ke,p,y,u),p.dispatch=u,h.memoizedState=s,[a,u,!1]}function oC(s){var a=en();return aC(a,Ct,s)}function aC(s,a,u){if(a=gv(s,a,rC)[0],s=Xm(Rs)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var h=Bh(a)}catch(T){throw T===Eu?jm:T}else h=a;a=en();var p=a.queue,y=p.dispatch;return u!==a.memoizedState&&(Ke.flags|=2048,Cu(9,{destroy:void 0},c3.bind(null,p,u),null)),[h,y,s]}function c3(s,a){s.action=a}function lC(s){var a=en(),u=Ct;if(u!==null)return aC(a,u,s);en(),a=a.memoizedState,u=en();var h=u.queue.dispatch;return u.memoizedState=s,[a,h,!1]}function Cu(s,a,u,h){return s={tag:s,create:u,deps:h,inst:a,next:null},a=Ke.updateQueue,a===null&&(a=Ym(),Ke.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=s.next=s:(h=u.next,u.next=s,s.next=h,a.lastEffect=s),s}function uC(){return en().memoizedState}function Jm(s,a,u,h){var p=ti();Ke.flags|=s,p.memoizedState=Cu(1|a,{destroy:void 0},u,h===void 0?null:h)}function Zm(s,a,u,h){var p=en();h=h===void 0?null:h;var y=p.memoizedState.inst;Ct!==null&&h!==null&&cv(h,Ct.memoizedState.deps)?p.memoizedState=Cu(a,y,u,h):(Ke.flags|=s,p.memoizedState=Cu(1|a,y,u,h))}function cC(s,a){Jm(8390656,8,s,a)}function Ev(s,a){Zm(2048,8,s,a)}function h3(s){Ke.flags|=4;var a=Ke.updateQueue;if(a===null)a=Ym(),Ke.updateQueue=a,a.events=[s];else{var u=a.events;u===null?a.events=[s]:u.push(s)}}function hC(s){var a=en().memoizedState;return h3({ref:a,nextImpl:s}),function(){if((dt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function fC(s,a){return Zm(4,2,s,a)}function dC(s,a){return Zm(4,4,s,a)}function mC(s,a){if(typeof a=="function"){s=s();var u=a(s);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function pC(s,a,u){u=u!=null?u.concat([s]):null,Zm(4,4,mC.bind(null,a,s),u)}function Tv(){}function gC(s,a){var u=en();a=a===void 0?null:a;var h=u.memoizedState;return a!==null&&cv(a,h[1])?h[0]:(u.memoizedState=[s,a],s)}function yC(s,a){var u=en();a=a===void 0?null:a;var h=u.memoizedState;if(a!==null&&cv(a,h[1]))return h[0];if(h=s(),Qa){ui(!0);try{s()}finally{ui(!1)}}return u.memoizedState=[h,a],h}function Sv(s,a,u){return u===void 0||(Is&1073741824)!==0&&(it&261930)===0?s.memoizedState=a:(s.memoizedState=u,s=_A(),Ke.lanes|=s,Oo|=s,u)}function _C(s,a,u,h){return xi(u,a)?u:Su.current!==null?(s=Sv(s,u,h),xi(s,a)||(fn=!0),s):(Is&42)===0||(Is&1073741824)!==0&&(it&261930)===0?(fn=!0,s.memoizedState=u):(s=_A(),Ke.lanes|=s,Oo|=s,a)}function vC(s,a,u,h,p){var y=ce.p;ce.p=y!==0&&8>y?y:8;var T=ee.T,w={};ee.T=w,Cv(s,!1,a,u);try{var F=p(),X=ee.S;if(X!==null&&X(w,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var se=o3(F,h);jh(s,a,se,Vi(s))}else jh(s,a,h,Vi(s))}catch(ue){jh(s,a,{then:function(){},status:"rejected",reason:ue},Vi())}finally{ce.p=y,T!==null&&w.types!==null&&(T.types=w.types),ee.T=T}}function f3(){}function bv(s,a,u,h){if(s.tag!==5)throw Error(i(476));var p=EC(s).queue;vC(s,p,a,pe,u===null?f3:function(){return TC(s),u(h)})}function EC(s){var a=s.memoizedState;if(a!==null)return a;a={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:pe},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:u},next:null},s.memoizedState=a,s=s.alternate,s!==null&&(s.memoizedState=a),a}function TC(s){var a=EC(s);a.next===null&&(a=s.alternate.memoizedState),jh(s,a.next.queue,{},Vi())}function wv(){return Un(sf)}function SC(){return en().memoizedState}function bC(){return en().memoizedState}function d3(s){for(var a=s.return;a!==null;){switch(a.tag){case 24:case 3:var u=Vi();s=Ro(u);var h=xo(a,s,u);h!==null&&(gi(h,a,u),kh(h,a,u)),a={cache:Z_()},s.payload=a;return}a=a.return}}function m3(s,a,u){var h=Vi();u={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ep(s)?CC(a,u):(u=z_(s,a,u,h),u!==null&&(gi(u,s,h),AC(u,a,h)))}function wC(s,a,u){var h=Vi();jh(s,a,u,h)}function jh(s,a,u,h){var p={lane:h,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(ep(s))CC(a,p);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var T=a.lastRenderedState,w=y(T,u);if(p.hasEagerState=!0,p.eagerState=w,xi(w,T))return Om(s,a,p,0),xt===null&&Pm(),!1}catch{}finally{}if(u=z_(s,a,p,h),u!==null)return gi(u,s,h),AC(u,a,h),!0}return!1}function Cv(s,a,u,h){if(h={lane:2,revertLane:i0(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},ep(s)){if(a)throw Error(i(479))}else a=z_(s,u,h,2),a!==null&&gi(a,s,2)}function ep(s){var a=s.alternate;return s===Ke||a!==null&&a===Ke}function CC(s,a){bu=$m=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function AC(s,a,u){if((u&4194048)!==0){var h=a.lanes;h&=s.pendingLanes,u|=h,a.lanes=u,uh(s,u)}}var zh={readContext:Un,use:Qm,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};zh.useEffectEvent=$t;var IC={readContext:Un,use:Qm,useCallback:function(s,a){return ti().memoizedState=[s,a===void 0?null:a],s},useContext:Un,useEffect:cC,useImperativeHandle:function(s,a,u){u=u!=null?u.concat([s]):null,Jm(4194308,4,mC.bind(null,a,s),u)},useLayoutEffect:function(s,a){return Jm(4194308,4,s,a)},useInsertionEffect:function(s,a){Jm(4,2,s,a)},useMemo:function(s,a){var u=ti();a=a===void 0?null:a;var h=s();if(Qa){ui(!0);try{s()}finally{ui(!1)}}return u.memoizedState=[h,a],h},useReducer:function(s,a,u){var h=ti();if(u!==void 0){var p=u(a);if(Qa){ui(!0);try{u(a)}finally{ui(!1)}}}else p=a;return h.memoizedState=h.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},h.queue=s,s=s.dispatch=m3.bind(null,Ke,s),[h.memoizedState,s]},useRef:function(s){var a=ti();return s={current:s},a.memoizedState=s},useState:function(s){s=_v(s);var a=s.queue,u=wC.bind(null,Ke,a);return a.dispatch=u,[s.memoizedState,u]},useDebugValue:Tv,useDeferredValue:function(s,a){var u=ti();return Sv(u,s,a)},useTransition:function(){var s=_v(!1);return s=vC.bind(null,Ke,s.queue,!0,!1),ti().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,a,u){var h=Ke,p=ti();if(ot){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),xt===null)throw Error(i(349));(it&127)!==0||W1(h,a,u)}p.memoizedState=u;var y={value:u,getSnapshot:a};return p.queue=y,cC(Q1.bind(null,h,y,s),[s]),h.flags|=2048,Cu(9,{destroy:void 0},Y1.bind(null,h,y,u,a),null),u},useId:function(){var s=ti(),a=xt.identifierPrefix;if(ot){var u=Zr,h=Jr;u=(h&~(1<<32-Lt(h)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Wm++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=a3++,a="_"+a+"r_"+u.toString(32)+"_";return s.memoizedState=a},useHostTransitionStatus:wv,useFormState:sC,useActionState:sC,useOptimistic:function(s){var a=ti();a.memoizedState=a.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Cv.bind(null,Ke,!0,u),u.dispatch=a,[s,a]},useMemoCache:pv,useCacheRefresh:function(){return ti().memoizedState=d3.bind(null,Ke)},useEffectEvent:function(s){var a=ti(),u={impl:s};return a.memoizedState=u,function(){if((dt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Av={readContext:Un,use:Qm,useCallback:gC,useContext:Un,useEffect:Ev,useImperativeHandle:pC,useInsertionEffect:fC,useLayoutEffect:dC,useMemo:yC,useReducer:Xm,useRef:uC,useState:function(){return Xm(Rs)},useDebugValue:Tv,useDeferredValue:function(s,a){var u=en();return _C(u,Ct.memoizedState,s,a)},useTransition:function(){var s=Xm(Rs)[0],a=en().memoizedState;return[typeof s=="boolean"?s:Bh(s),a]},useSyncExternalStore:$1,useId:SC,useHostTransitionStatus:wv,useFormState:oC,useActionState:oC,useOptimistic:function(s,a){var u=en();return Z1(u,Ct,s,a)},useMemoCache:pv,useCacheRefresh:bC};Av.useEffectEvent=hC;var RC={readContext:Un,use:Qm,useCallback:gC,useContext:Un,useEffect:Ev,useImperativeHandle:pC,useInsertionEffect:fC,useLayoutEffect:dC,useMemo:yC,useReducer:yv,useRef:uC,useState:function(){return yv(Rs)},useDebugValue:Tv,useDeferredValue:function(s,a){var u=en();return Ct===null?Sv(u,s,a):_C(u,Ct.memoizedState,s,a)},useTransition:function(){var s=yv(Rs)[0],a=en().memoizedState;return[typeof s=="boolean"?s:Bh(s),a]},useSyncExternalStore:$1,useId:SC,useHostTransitionStatus:wv,useFormState:lC,useActionState:lC,useOptimistic:function(s,a){var u=en();return Ct!==null?Z1(u,Ct,s,a):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:pv,useCacheRefresh:bC};RC.useEffectEvent=hC;function Iv(s,a,u,h){a=s.memoizedState,u=u(h,a),u=u==null?a:_({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Rv={enqueueSetState:function(s,a,u){s=s._reactInternals;var h=Vi(),p=Ro(h);p.payload=a,u!=null&&(p.callback=u),a=xo(s,p,h),a!==null&&(gi(a,s,h),kh(a,s,h))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var h=Vi(),p=Ro(h);p.tag=1,p.payload=a,u!=null&&(p.callback=u),a=xo(s,p,h),a!==null&&(gi(a,s,h),kh(a,s,h))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Vi(),h=Ro(u);h.tag=2,a!=null&&(h.callback=a),a=xo(s,h,u),a!==null&&(gi(a,s,u),kh(a,s,u))}};function xC(s,a,u,h,p,y,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(h,y,T):a.prototype&&a.prototype.isPureReactComponent?!Rh(u,h)||!Rh(p,y):!0}function DC(s,a,u,h){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,h),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,h),a.state!==s&&Rv.enqueueReplaceState(a,a.state,null)}function Xa(s,a){var u=a;if("ref"in a){u={};for(var h in a)h!=="ref"&&(u[h]=a[h])}if(s=s.defaultProps){u===a&&(u=_({},u));for(var p in s)u[p]===void 0&&(u[p]=s[p])}return u}function NC(s){Mm(s)}function MC(s){console.error(s)}function PC(s){Mm(s)}function tp(s,a){try{var u=s.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(h){setTimeout(function(){throw h})}}function OC(s,a,u){try{var h=s.onCaughtError;h(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function xv(s,a,u){return u=Ro(u),u.tag=3,u.payload={element:null},u.callback=function(){tp(s,a)},u}function VC(s){return s=Ro(s),s.tag=3,s}function kC(s,a,u,h){var p=u.type.getDerivedStateFromError;if(typeof p=="function"){var y=h.value;s.payload=function(){return p(y)},s.callback=function(){OC(a,u,h)}}var T=u.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(s.callback=function(){OC(a,u,h),typeof p!="function"&&(Vo===null?Vo=new Set([this]):Vo.add(this));var w=h.stack;this.componentDidCatch(h.value,{componentStack:w!==null?w:""})})}function p3(s,a,u,h,p){if(u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(a=u.alternate,a!==null&&yu(a,u,p,!0),u=Ni.current,u!==null){switch(u.tag){case 31:case 13:return Ji===null?dp():u.alternate===null&&Wt===0&&(Wt=3),u.flags&=-257,u.flags|=65536,u.lanes=p,h===zm?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([h]):a.add(h),e0(s,h,p)),!1;case 22:return u.flags|=65536,h===zm?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([h])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([h]):u.add(h)),e0(s,h,p)),!1}throw Error(i(435,u.tag))}return e0(s,h,p),dp(),!1}if(ot)return a=Ni.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=p,h!==W_&&(s=Error(i(422),{cause:h}),Nh(Wi(s,u)))):(h!==W_&&(a=Error(i(423),{cause:h}),Nh(Wi(a,u))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,h=Wi(h,u),p=xv(s.stateNode,h,p),sv(s,p),Wt!==4&&(Wt=2)),!1;var y=Error(i(520),{cause:h});if(y=Wi(y,u),Qh===null?Qh=[y]:Qh.push(y),Wt!==4&&(Wt=2),a===null)return!0;h=Wi(h,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,s=p&-p,u.lanes|=s,s=xv(u.stateNode,h,s),sv(u,s),!1;case 1:if(a=u.type,y=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Vo===null||!Vo.has(y))))return u.flags|=65536,p&=-p,u.lanes|=p,p=VC(p),kC(p,s,u,h),sv(u,p),!1}u=u.return}while(u!==null);return!1}var Dv=Error(i(461)),fn=!1;function Fn(s,a,u,h){a.child=s===null?B1(a,null,u,h):Ya(a,s.child,u,h)}function LC(s,a,u,h,p){u=u.render;var y=a.ref;if("ref"in h){var T={};for(var w in h)w!=="ref"&&(T[w]=h[w])}else T=h;return Ga(a),h=hv(s,a,u,T,y,p),w=fv(),s!==null&&!fn?(dv(s,a,p),xs(s,a,p)):(ot&&w&&K_(a),a.flags|=1,Fn(s,a,h,p),a.child)}function UC(s,a,u,h,p){if(s===null){var y=u.type;return typeof y=="function"&&!q_(y)&&y.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=y,FC(s,a,y,h,p)):(s=km(u.type,null,h,a,a.mode,p),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,!Uv(s,p)){var T=y.memoizedProps;if(u=u.compare,u=u!==null?u:Rh,u(T,h)&&s.ref===a.ref)return xs(s,a,p)}return a.flags|=1,s=bs(y,h),s.ref=a.ref,s.return=a,a.child=s}function FC(s,a,u,h,p){if(s!==null){var y=s.memoizedProps;if(Rh(y,h)&&s.ref===a.ref)if(fn=!1,a.pendingProps=h=y,Uv(s,p))(s.flags&131072)!==0&&(fn=!0);else return a.lanes=s.lanes,xs(s,a,p)}return Nv(s,a,u,h,p)}function BC(s,a,u,h){var p=h.children,y=s!==null?s.memoizedState:null;if(s===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((a.flags&128)!==0){if(y=y!==null?y.baseLanes|u:u,s!==null){for(h=a.child=s.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;h=p&~y}else h=0,a.child=null;return jC(s,a,y,u,h)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},s!==null&&Bm(a,y!==null?y.cachePool:null),y!==null?q1(a,y):av(),H1(a);else return h=a.lanes=536870912,jC(s,a,y!==null?y.baseLanes|u:u,u,h)}else y!==null?(Bm(a,y.cachePool),q1(a,y),No(),a.memoizedState=null):(s!==null&&Bm(a,null),av(),No());return Fn(s,a,p,u),a.child}function qh(s,a){return s!==null&&s.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function jC(s,a,u,h,p){var y=tv();return y=y===null?null:{parent:cn._currentValue,pool:y},a.memoizedState={baseLanes:u,cachePool:y},s!==null&&Bm(a,null),av(),H1(a),s!==null&&yu(s,a,h,!0),a.childLanes=p,null}function np(s,a){return a=rp({mode:a.mode,children:a.children},s.mode),a.ref=s.ref,s.child=a,a.return=s,a}function zC(s,a,u){return Ya(a,s.child,null,u),s=np(a,a.pendingProps),s.flags|=2,Mi(a),a.memoizedState=null,s}function g3(s,a,u){var h=a.pendingProps,p=(a.flags&128)!==0;if(a.flags&=-129,s===null){if(ot){if(h.mode==="hidden")return s=np(a,h),a.lanes=536870912,qh(null,s);if(uv(a),(s=Ot)?(s=eI(s,Xi),s=s!==null&&s.data==="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:bo!==null?{id:Jr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},u=C1(s),u.return=a,a.child=u,Ln=a,Ot=null)):s=null,s===null)throw Co(a);return a.lanes=536870912,null}return np(a,h)}var y=s.memoizedState;if(y!==null){var T=y.dehydrated;if(uv(a),p)if(a.flags&256)a.flags&=-257,a=zC(s,a,u);else if(a.memoizedState!==null)a.child=s.child,a.flags|=128,a=null;else throw Error(i(558));else if(fn||yu(s,a,u,!1),p=(u&s.childLanes)!==0,fn||p){if(h=xt,h!==null&&(T=ch(h,u),T!==0&&T!==y.retryLane))throw y.retryLane=T,ja(s,T),gi(h,s,T),Dv;dp(),a=zC(s,a,u)}else s=y.treeContext,Ot=Zi(T.nextSibling),Ln=a,ot=!0,wo=null,Xi=!1,s!==null&&R1(a,s),a=np(a,h),a.flags|=4096;return a}return s=bs(s.child,{mode:h.mode,children:h.children}),s.ref=a.ref,a.child=s,s.return=a,s}function ip(s,a){var u=a.ref;if(u===null)s!==null&&s.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(a.flags|=4194816)}}function Nv(s,a,u,h,p){return Ga(a),u=hv(s,a,u,h,void 0,p),h=fv(),s!==null&&!fn?(dv(s,a,p),xs(s,a,p)):(ot&&h&&K_(a),a.flags|=1,Fn(s,a,u,p),a.child)}function qC(s,a,u,h,p,y){return Ga(a),a.updateQueue=null,u=K1(a,h,u,p),G1(s),h=fv(),s!==null&&!fn?(dv(s,a,y),xs(s,a,y)):(ot&&h&&K_(a),a.flags|=1,Fn(s,a,u,y),a.child)}function HC(s,a,u,h,p){if(Ga(a),a.stateNode===null){var y=du,T=u.contextType;typeof T=="object"&&T!==null&&(y=Un(T)),y=new u(h,y),a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Rv,a.stateNode=y,y._reactInternals=a,y=a.stateNode,y.props=h,y.state=a.memoizedState,y.refs={},iv(a),T=u.contextType,y.context=typeof T=="object"&&T!==null?Un(T):du,y.state=a.memoizedState,T=u.getDerivedStateFromProps,typeof T=="function"&&(Iv(a,u,T,h),y.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(T=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),T!==y.state&&Rv.enqueueReplaceState(y,y.state,null),Uh(a,h,y,p),Lh(),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!0}else if(s===null){y=a.stateNode;var w=a.memoizedProps,F=Xa(u,w);y.props=F;var X=y.context,se=u.contextType;T=du,typeof se=="object"&&se!==null&&(T=Un(se));var ue=u.getDerivedStateFromProps;se=typeof ue=="function"||typeof y.getSnapshotBeforeUpdate=="function",w=a.pendingProps!==w,se||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(w||X!==T)&&DC(a,y,h,T),Io=!1;var J=a.memoizedState;y.state=J,Uh(a,h,y,p),Lh(),X=a.memoizedState,w||J!==X||Io?(typeof ue=="function"&&(Iv(a,u,ue,h),X=a.memoizedState),(F=Io||xC(a,u,F,h,J,X,T))?(se||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(a.flags|=4194308)):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=h,a.memoizedState=X),y.props=h,y.state=X,y.context=T,h=F):(typeof y.componentDidMount=="function"&&(a.flags|=4194308),h=!1)}else{y=a.stateNode,rv(s,a),T=a.memoizedProps,se=Xa(u,T),y.props=se,ue=a.pendingProps,J=y.context,X=u.contextType,F=du,typeof X=="object"&&X!==null&&(F=Un(X)),w=u.getDerivedStateFromProps,(X=typeof w=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(T!==ue||J!==F)&&DC(a,y,h,F),Io=!1,J=a.memoizedState,y.state=J,Uh(a,h,y,p),Lh();var ne=a.memoizedState;T!==ue||J!==ne||Io||s!==null&&s.dependencies!==null&&Um(s.dependencies)?(typeof w=="function"&&(Iv(a,u,w,h),ne=a.memoizedState),(se=Io||xC(a,u,se,h,J,ne,F)||s!==null&&s.dependencies!==null&&Um(s.dependencies))?(X||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(h,ne,F),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(h,ne,F)),typeof y.componentDidUpdate=="function"&&(a.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&J===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&J===s.memoizedState||(a.flags|=1024),a.memoizedProps=h,a.memoizedState=ne),y.props=h,y.state=ne,y.context=F,h=se):(typeof y.componentDidUpdate!="function"||T===s.memoizedProps&&J===s.memoizedState||(a.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||T===s.memoizedProps&&J===s.memoizedState||(a.flags|=1024),h=!1)}return y=h,ip(s,a),h=(a.flags&128)!==0,y||h?(y=a.stateNode,u=h&&typeof u.getDerivedStateFromError!="function"?null:y.render(),a.flags|=1,s!==null&&h?(a.child=Ya(a,s.child,null,p),a.child=Ya(a,null,u,p)):Fn(s,a,u,p),a.memoizedState=y.state,s=a.child):s=xs(s,a,p),s}function GC(s,a,u,h){return qa(),a.flags|=256,Fn(s,a,u,h),a.child}var Mv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pv(s){return{baseLanes:s,cachePool:O1()}}function Ov(s,a,u){return s=s!==null?s.childLanes&~u:0,a&&(s|=Oi),s}function KC(s,a,u){var h=a.pendingProps,p=!1,y=(a.flags&128)!==0,T;if((T=y)||(T=s!==null&&s.memoizedState===null?!1:(Zt.current&2)!==0),T&&(p=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,s===null){if(ot){if(p?Do(a):No(),(s=Ot)?(s=eI(s,Xi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(a.memoizedState={dehydrated:s,treeContext:bo!==null?{id:Jr,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},u=C1(s),u.return=a,a.child=u,Ln=a,Ot=null)):s=null,s===null)throw Co(a);return g0(s)?a.lanes=32:a.lanes=536870912,null}var w=h.children;return h=h.fallback,p?(No(),p=a.mode,w=rp({mode:"hidden",children:w},p),h=za(h,p,u,null),w.return=a,h.return=a,w.sibling=h,a.child=w,h=a.child,h.memoizedState=Pv(u),h.childLanes=Ov(s,T,u),a.memoizedState=Mv,qh(null,h)):(Do(a),Vv(a,w))}var F=s.memoizedState;if(F!==null&&(w=F.dehydrated,w!==null)){if(y)a.flags&256?(Do(a),a.flags&=-257,a=kv(s,a,u)):a.memoizedState!==null?(No(),a.child=s.child,a.flags|=128,a=null):(No(),w=h.fallback,p=a.mode,h=rp({mode:"visible",children:h.children},p),w=za(w,p,u,null),w.flags|=2,h.return=a,w.return=a,h.sibling=w,a.child=h,Ya(a,s.child,null,u),h=a.child,h.memoizedState=Pv(u),h.childLanes=Ov(s,T,u),a.memoizedState=Mv,a=qh(null,h));else if(Do(a),g0(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var X=T.dgst;T=X,h=Error(i(419)),h.stack="",h.digest=T,Nh({value:h,source:null,stack:null}),a=kv(s,a,u)}else if(fn||yu(s,a,u,!1),T=(u&s.childLanes)!==0,fn||T){if(T=xt,T!==null&&(h=ch(T,u),h!==0&&h!==F.retryLane))throw F.retryLane=h,ja(s,h),gi(T,s,h),Dv;p0(w)||dp(),a=kv(s,a,u)}else p0(w)?(a.flags|=192,a.child=s.child,a=null):(s=F.treeContext,Ot=Zi(w.nextSibling),Ln=a,ot=!0,wo=null,Xi=!1,s!==null&&R1(a,s),a=Vv(a,h.children),a.flags|=4096);return a}return p?(No(),w=h.fallback,p=a.mode,F=s.child,X=F.sibling,h=bs(F,{mode:"hidden",children:h.children}),h.subtreeFlags=F.subtreeFlags&65011712,X!==null?w=bs(X,w):(w=za(w,p,u,null),w.flags|=2),w.return=a,h.return=a,h.sibling=w,a.child=h,qh(null,h),h=a.child,w=s.child.memoizedState,w===null?w=Pv(u):(p=w.cachePool,p!==null?(F=cn._currentValue,p=p.parent!==F?{parent:F,pool:F}:p):p=O1(),w={baseLanes:w.baseLanes|u,cachePool:p}),h.memoizedState=w,h.childLanes=Ov(s,T,u),a.memoizedState=Mv,qh(s.child,h)):(Do(a),u=s.child,s=u.sibling,u=bs(u,{mode:"visible",children:h.children}),u.return=a,u.sibling=null,s!==null&&(T=a.deletions,T===null?(a.deletions=[s],a.flags|=16):T.push(s)),a.child=u,a.memoizedState=null,u)}function Vv(s,a){return a=rp({mode:"visible",children:a},s.mode),a.return=s,s.child=a}function rp(s,a){return s=Di(22,s,null,a),s.lanes=0,s}function kv(s,a,u){return Ya(a,s.child,null,u),s=Vv(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function $C(s,a,u){s.lanes|=a;var h=s.alternate;h!==null&&(h.lanes|=a),X_(s.return,a,u)}function Lv(s,a,u,h,p,y){var T=s.memoizedState;T===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:p,treeForkCount:y}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=h,T.tail=u,T.tailMode=p,T.treeForkCount=y)}function WC(s,a,u){var h=a.pendingProps,p=h.revealOrder,y=h.tail;h=h.children;var T=Zt.current,w=(T&2)!==0;if(w?(T=T&1|2,a.flags|=128):T&=1,ge(Zt,T),Fn(s,a,h,u),h=ot?Dh:0,!w&&s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&$C(s,u,a);else if(s.tag===19)$C(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(p){case"forwards":for(u=a.child,p=null;u!==null;)s=u.alternate,s!==null&&Km(s)===null&&(p=u),u=u.sibling;u=p,u===null?(p=a.child,a.child=null):(p=u.sibling,u.sibling=null),Lv(a,!1,p,u,y,h);break;case"backwards":case"unstable_legacy-backwards":for(u=null,p=a.child,a.child=null;p!==null;){if(s=p.alternate,s!==null&&Km(s)===null){a.child=p;break}s=p.sibling,p.sibling=u,u=p,p=s}Lv(a,!0,u,null,y,h);break;case"together":Lv(a,!1,null,null,void 0,h);break;default:a.memoizedState=null}return a.child}function xs(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),Oo|=a.lanes,(u&a.childLanes)===0)if(s!==null){if(yu(s,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(s!==null&&a.child!==s.child)throw Error(i(153));if(a.child!==null){for(s=a.child,u=bs(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=bs(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Uv(s,a){return(s.lanes&a)!==0?!0:(s=s.dependencies,!!(s!==null&&Um(s)))}function y3(s,a,u){switch(a.tag){case 3:Mt(a,a.stateNode.containerInfo),Ao(a,cn,s.memoizedState.cache),qa();break;case 27:case 5:In(a);break;case 4:Mt(a,a.stateNode.containerInfo);break;case 10:Ao(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,uv(a),null;break;case 13:var h=a.memoizedState;if(h!==null)return h.dehydrated!==null?(Do(a),a.flags|=128,null):(u&a.child.childLanes)!==0?KC(s,a,u):(Do(a),s=xs(s,a,u),s!==null?s.sibling:null);Do(a);break;case 19:var p=(s.flags&128)!==0;if(h=(u&a.childLanes)!==0,h||(yu(s,a,u,!1),h=(u&a.childLanes)!==0),p){if(h)return WC(s,a,u);a.flags|=128}if(p=a.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ge(Zt,Zt.current),h)break;return null;case 22:return a.lanes=0,BC(s,a,u,a.pendingProps);case 24:Ao(a,cn,s.memoizedState.cache)}return xs(s,a,u)}function YC(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps)fn=!0;else{if(!Uv(s,u)&&(a.flags&128)===0)return fn=!1,y3(s,a,u);fn=(s.flags&131072)!==0}else fn=!1,ot&&(a.flags&1048576)!==0&&I1(a,Dh,a.index);switch(a.lanes=0,a.tag){case 16:e:{var h=a.pendingProps;if(s=$a(a.elementType),a.type=s,typeof s=="function")q_(s)?(h=Xa(s,h),a.tag=1,a=HC(null,a,s,h,u)):(a.tag=0,a=Nv(null,a,s,h,u));else{if(s!=null){var p=s.$$typeof;if(p===Z){a.tag=11,a=LC(null,a,s,h,u);break e}else if(p===R){a.tag=14,a=UC(null,a,s,h,u);break e}}throw a=De(s)||s,Error(i(306,a,""))}}return a;case 0:return Nv(s,a,a.type,a.pendingProps,u);case 1:return h=a.type,p=Xa(h,a.pendingProps),HC(s,a,h,p,u);case 3:e:{if(Mt(a,a.stateNode.containerInfo),s===null)throw Error(i(387));h=a.pendingProps;var y=a.memoizedState;p=y.element,rv(s,a),Uh(a,h,null,u);var T=a.memoizedState;if(h=T.cache,Ao(a,cn,h),h!==y.cache&&J_(a,[cn],u,!0),Lh(),h=T.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){a=GC(s,a,h,u);break e}else if(h!==p){p=Wi(Error(i(424)),a),Nh(p),a=GC(s,a,h,u);break e}else{switch(s=a.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ot=Zi(s.firstChild),Ln=a,ot=!0,wo=null,Xi=!0,u=B1(a,null,h,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(qa(),h===p){a=xs(s,a,u);break e}Fn(s,a,h,u)}a=a.child}return a;case 26:return ip(s,a),s===null?(u=oI(a.type,null,a.pendingProps,null))?a.memoizedState=u:ot||(u=a.type,s=a.pendingProps,h=Ep(ke.current).createElement(u),h[an]=a,h[Rn]=s,Bn(h,u,s),ln(h),a.stateNode=h):a.memoizedState=oI(a.type,s.memoizedProps,a.pendingProps,s.memoizedState),null;case 27:return In(a),s===null&&ot&&(h=a.stateNode=iI(a.type,a.pendingProps,ke.current),Ln=a,Xi=!0,p=Ot,Fo(a.type)?(y0=p,Ot=Zi(h.firstChild)):Ot=p),Fn(s,a,a.pendingProps.children,u),ip(s,a),s===null&&(a.flags|=4194304),a.child;case 5:return s===null&&ot&&((p=h=Ot)&&(h=$3(h,a.type,a.pendingProps,Xi),h!==null?(a.stateNode=h,Ln=a,Ot=Zi(h.firstChild),Xi=!1,p=!0):p=!1),p||Co(a)),In(a),p=a.type,y=a.pendingProps,T=s!==null?s.memoizedProps:null,h=y.children,f0(p,y)?h=null:T!==null&&f0(p,T)&&(a.flags|=32),a.memoizedState!==null&&(p=hv(s,a,l3,null,null,u),sf._currentValue=p),ip(s,a),Fn(s,a,h,u),a.child;case 6:return s===null&&ot&&((s=u=Ot)&&(u=W3(u,a.pendingProps,Xi),u!==null?(a.stateNode=u,Ln=a,Ot=null,s=!0):s=!1),s||Co(a)),null;case 13:return KC(s,a,u);case 4:return Mt(a,a.stateNode.containerInfo),h=a.pendingProps,s===null?a.child=Ya(a,null,h,u):Fn(s,a,h,u),a.child;case 11:return LC(s,a,a.type,a.pendingProps,u);case 7:return Fn(s,a,a.pendingProps,u),a.child;case 8:return Fn(s,a,a.pendingProps.children,u),a.child;case 12:return Fn(s,a,a.pendingProps.children,u),a.child;case 10:return h=a.pendingProps,Ao(a,a.type,h.value),Fn(s,a,h.children,u),a.child;case 9:return p=a.type._context,h=a.pendingProps.children,Ga(a),p=Un(p),h=h(p),a.flags|=1,Fn(s,a,h,u),a.child;case 14:return UC(s,a,a.type,a.pendingProps,u);case 15:return FC(s,a,a.type,a.pendingProps,u);case 19:return WC(s,a,u);case 31:return g3(s,a,u);case 22:return BC(s,a,u,a.pendingProps);case 24:return Ga(a),h=Un(cn),s===null?(p=tv(),p===null&&(p=xt,y=Z_(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=u),p=y),a.memoizedState={parent:h,cache:p},iv(a),Ao(a,cn,p)):((s.lanes&u)!==0&&(rv(s,a),Uh(a,null,null,u),Lh()),p=s.memoizedState,y=a.memoizedState,p.parent!==h?(p={parent:h,cache:h},a.memoizedState=p,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=p),Ao(a,cn,h)):(h=y.cache,Ao(a,cn,h),h!==p.cache&&J_(a,[cn],u,!0))),Fn(s,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ds(s){s.flags|=4}function Fv(s,a,u,h,p){if((a=(s.mode&32)!==0)&&(a=!1),a){if(s.flags|=16777216,(p&335544128)===p)if(s.stateNode.complete)s.flags|=8192;else if(SA())s.flags|=8192;else throw Wa=zm,nv}else s.flags&=-16777217}function QC(s,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!hI(a))if(SA())s.flags|=8192;else throw Wa=zm,nv}function sp(s,a){a!==null&&(s.flags|=4),s.flags&16384&&(a=s.tag!==22?hm():536870912,s.lanes|=a,xu|=a)}function Hh(s,a){if(!ot)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:h.sibling=null}}function Vt(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,h=0;if(a)for(var p=s.child;p!==null;)u|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)u|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=h,s.childLanes=u,a}function _3(s,a,u){var h=a.pendingProps;switch($_(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(a),null;case 1:return Vt(a),null;case 3:return u=a.stateNode,h=null,s!==null&&(h=s.memoizedState.cache),a.memoizedState.cache!==h&&(a.flags|=2048),As(cn),at(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(gu(a)?Ds(a):s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Y_())),Vt(a),null;case 26:var p=a.type,y=a.memoizedState;return s===null?(Ds(a),y!==null?(Vt(a),QC(a,y)):(Vt(a),Fv(a,p,null,h,u))):y?y!==s.memoizedState?(Ds(a),Vt(a),QC(a,y)):(Vt(a),a.flags&=-16777217):(s=s.memoizedProps,s!==h&&Ds(a),Vt(a),Fv(a,p,s,h,u)),null;case 27:if(wi(a),u=ke.current,p=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Ds(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return Vt(a),null}s=Ee.current,gu(a)?x1(a):(s=iI(p,h,u),a.stateNode=s,Ds(a))}return Vt(a),null;case 5:if(wi(a),p=a.type,s!==null&&a.stateNode!=null)s.memoizedProps!==h&&Ds(a);else{if(!h){if(a.stateNode===null)throw Error(i(166));return Vt(a),null}if(y=Ee.current,gu(a))x1(a);else{var T=Ep(ke.current);switch(y){case 1:y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=T.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=T.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=T.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof h.is=="string"?T.createElement("select",{is:h.is}):T.createElement("select"),h.multiple?y.multiple=!0:h.size&&(y.size=h.size);break;default:y=typeof h.is=="string"?T.createElement(p,{is:h.is}):T.createElement(p)}}y[an]=a,y[Rn]=h;e:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)y.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break e;for(;T.sibling===null;){if(T.return===null||T.return===a)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=y;e:switch(Bn(y,p,h),p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ds(a)}}return Vt(a),Fv(a,a.type,s===null?null:s.memoizedProps,a.pendingProps,u),null;case 6:if(s&&a.stateNode!=null)s.memoizedProps!==h&&Ds(a);else{if(typeof h!="string"&&a.stateNode===null)throw Error(i(166));if(s=ke.current,gu(a)){if(s=a.stateNode,u=a.memoizedProps,h=null,p=Ln,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}s[an]=a,s=!!(s.nodeValue===u||h!==null&&h.suppressHydrationWarning===!0||KA(s.nodeValue,u)),s||Co(a,!0)}else s=Ep(s).createTextNode(h),s[an]=a,a.stateNode=s}return Vt(a),null;case 31:if(u=a.memoizedState,s===null||s.memoizedState!==null){if(h=gu(a),u!==null){if(s===null){if(!h)throw Error(i(318));if(s=a.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[an]=a}else qa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Vt(a),s=!1}else u=Y_(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return a.flags&256?(Mi(a),a):(Mi(a),null);if((a.flags&128)!==0)throw Error(i(558))}return Vt(a),null;case 13:if(h=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=gu(a),h!==null&&h.dehydrated!==null){if(s===null){if(!p)throw Error(i(318));if(p=a.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[an]=a}else qa(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Vt(a),p=!1}else p=Y_(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return a.flags&256?(Mi(a),a):(Mi(a),null)}return Mi(a),(a.flags&128)!==0?(a.lanes=u,a):(u=h!==null,s=s!==null&&s.memoizedState!==null,u&&(h=a.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool),y=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==p&&(h.flags|=2048)),u!==s&&u&&(a.child.flags|=8192),sp(a,a.updateQueue),Vt(a),null);case 4:return at(),s===null&&a0(a.stateNode.containerInfo),Vt(a),null;case 10:return As(a.type),Vt(a),null;case 19:if(oe(Zt),h=a.memoizedState,h===null)return Vt(a),null;if(p=(a.flags&128)!==0,y=h.rendering,y===null)if(p)Hh(h,!1);else{if(Wt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(y=Km(s),y!==null){for(a.flags|=128,Hh(h,!1),s=y.updateQueue,a.updateQueue=s,sp(a,s),a.subtreeFlags=0,s=u,u=a.child;u!==null;)w1(u,s),u=u.sibling;return ge(Zt,Zt.current&1|2),ot&&ws(a,h.treeForkCount),a.child}s=s.sibling}h.tail!==null&&he()>cp&&(a.flags|=128,p=!0,Hh(h,!1),a.lanes=4194304)}else{if(!p)if(s=Km(y),s!==null){if(a.flags|=128,p=!0,s=s.updateQueue,a.updateQueue=s,sp(a,s),Hh(h,!0),h.tail===null&&h.tailMode==="hidden"&&!y.alternate&&!ot)return Vt(a),null}else 2*he()-h.renderingStartTime>cp&&u!==536870912&&(a.flags|=128,p=!0,Hh(h,!1),a.lanes=4194304);h.isBackwards?(y.sibling=a.child,a.child=y):(s=h.last,s!==null?s.sibling=y:a.child=y,h.last=y)}return h.tail!==null?(s=h.tail,h.rendering=s,h.tail=s.sibling,h.renderingStartTime=he(),s.sibling=null,u=Zt.current,ge(Zt,p?u&1|2:u&1),ot&&ws(a,h.treeForkCount),s):(Vt(a),null);case 22:case 23:return Mi(a),lv(),h=a.memoizedState!==null,s!==null?s.memoizedState!==null!==h&&(a.flags|=8192):h&&(a.flags|=8192),h?(u&536870912)!==0&&(a.flags&128)===0&&(Vt(a),a.subtreeFlags&6&&(a.flags|=8192)):Vt(a),u=a.updateQueue,u!==null&&sp(a,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==u&&(a.flags|=2048),s!==null&&oe(Ka),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),As(cn),Vt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function v3(s,a){switch($_(a),a.tag){case 1:return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return As(cn),at(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 26:case 27:case 5:return wi(a),null;case 31:if(a.memoizedState!==null){if(Mi(a),a.alternate===null)throw Error(i(340));qa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 13:if(Mi(a),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(i(340));qa()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return oe(Zt),null;case 4:return at(),null;case 10:return As(a.type),null;case 22:case 23:return Mi(a),lv(),s!==null&&oe(Ka),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 24:return As(cn),null;case 25:return null;default:return null}}function XC(s,a){switch($_(a),a.tag){case 3:As(cn),at();break;case 26:case 27:case 5:wi(a);break;case 4:at();break;case 31:a.memoizedState!==null&&Mi(a);break;case 13:Mi(a);break;case 19:oe(Zt);break;case 10:As(a.type);break;case 22:case 23:Mi(a),lv(),s!==null&&oe(Ka);break;case 24:As(cn)}}function Gh(s,a){try{var u=a.updateQueue,h=u!==null?u.lastEffect:null;if(h!==null){var p=h.next;u=p;do{if((u.tag&s)===s){h=void 0;var y=u.create,T=u.inst;h=y(),T.destroy=h}u=u.next}while(u!==p)}}catch(w){Et(a,a.return,w)}}function Mo(s,a,u){try{var h=a.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var y=p.next;h=y;do{if((h.tag&s)===s){var T=h.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,p=a;var F=u,X=w;try{X()}catch(se){Et(p,F,se)}}}h=h.next}while(h!==y)}}catch(se){Et(a,a.return,se)}}function JC(s){var a=s.updateQueue;if(a!==null){var u=s.stateNode;try{z1(a,u)}catch(h){Et(s,s.return,h)}}}function ZC(s,a,u){u.props=Xa(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(h){Et(s,a,h)}}function Kh(s,a){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var h=s.stateNode;break;case 30:h=s.stateNode;break;default:h=s.stateNode}typeof u=="function"?s.refCleanup=u(h):u.current=h}}catch(p){Et(s,a,p)}}function es(s,a){var u=s.ref,h=s.refCleanup;if(u!==null)if(typeof h=="function")try{h()}catch(p){Et(s,a,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(p){Et(s,a,p)}else u.current=null}function eA(s){var a=s.type,u=s.memoizedProps,h=s.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&h.focus();break e;case"img":u.src?h.src=u.src:u.srcSet&&(h.srcset=u.srcSet)}}catch(p){Et(s,s.return,p)}}function Bv(s,a,u){try{var h=s.stateNode;j3(h,s.type,u,a),h[Rn]=a}catch(p){Et(s,s.return,p)}}function tA(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Fo(s.type)||s.tag===4}function jv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||tA(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Fo(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function zv(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(s),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=mr));else if(h!==4&&(h===27&&Fo(s.type)&&(u=s.stateNode,a=null),s=s.child,s!==null))for(zv(s,a,u),s=s.sibling;s!==null;)zv(s,a,u),s=s.sibling}function op(s,a,u){var h=s.tag;if(h===5||h===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(h!==4&&(h===27&&Fo(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(op(s,a,u),s=s.sibling;s!==null;)op(s,a,u),s=s.sibling}function nA(s){var a=s.stateNode,u=s.memoizedProps;try{for(var h=s.type,p=a.attributes;p.length;)a.removeAttributeNode(p[0]);Bn(a,h,u),a[an]=s,a[Rn]=u}catch(y){Et(s,s.return,y)}}var Ns=!1,dn=!1,qv=!1,iA=typeof WeakSet=="function"?WeakSet:Set,Dn=null;function E3(s,a){if(s=s.containerInfo,c0=Ip,s=p1(s),k_(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var p=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var T=0,w=-1,F=-1,X=0,se=0,ue=s,J=null;t:for(;;){for(var ne;ue!==u||p!==0&&ue.nodeType!==3||(w=T+p),ue!==y||h!==0&&ue.nodeType!==3||(F=T+h),ue.nodeType===3&&(T+=ue.nodeValue.length),(ne=ue.firstChild)!==null;)J=ue,ue=ne;for(;;){if(ue===s)break t;if(J===u&&++X===p&&(w=T),J===y&&++se===h&&(F=T),(ne=ue.nextSibling)!==null)break;ue=J,J=ue.parentNode}ue=ne}u=w===-1||F===-1?null:{start:w,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(h0={focusedElem:s,selectionRange:u},Ip=!1,Dn=a;Dn!==null;)if(a=Dn,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,Dn=s;else for(;Dn!==null;){switch(a=Dn,y=a.alternate,s=a.flags,a.tag){case 0:if((s&4)!==0&&(s=a.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)p=s[u],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&y!==null){s=void 0,u=a,p=y.memoizedProps,y=y.memoizedState,h=u.stateNode;try{var be=Xa(u.type,p);s=h.getSnapshotBeforeUpdate(be,y),h.__reactInternalSnapshotBeforeUpdate=s}catch(Pe){Et(u,u.return,Pe)}}break;case 3:if((s&1024)!==0){if(s=a.stateNode.containerInfo,u=s.nodeType,u===9)m0(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":m0(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=a.sibling,s!==null){s.return=a.return,Dn=s;break}Dn=a.return}}function rA(s,a,u){var h=u.flags;switch(u.tag){case 0:case 11:case 15:Ps(s,u),h&4&&Gh(5,u);break;case 1:if(Ps(s,u),h&4)if(s=u.stateNode,a===null)try{s.componentDidMount()}catch(T){Et(u,u.return,T)}else{var p=Xa(u.type,a.memoizedProps);a=a.memoizedState;try{s.componentDidUpdate(p,a,s.__reactInternalSnapshotBeforeUpdate)}catch(T){Et(u,u.return,T)}}h&64&&JC(u),h&512&&Kh(u,u.return);break;case 3:if(Ps(s,u),h&64&&(s=u.updateQueue,s!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{z1(s,a)}catch(T){Et(u,u.return,T)}}break;case 27:a===null&&h&4&&nA(u);case 26:case 5:Ps(s,u),a===null&&h&4&&eA(u),h&512&&Kh(u,u.return);break;case 12:Ps(s,u);break;case 31:Ps(s,u),h&4&&aA(s,u);break;case 13:Ps(s,u),h&4&&lA(s,u),h&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=x3.bind(null,u),Y3(s,u))));break;case 22:if(h=u.memoizedState!==null||Ns,!h){a=a!==null&&a.memoizedState!==null||dn,p=Ns;var y=dn;Ns=h,(dn=a)&&!y?Os(s,u,(u.subtreeFlags&8772)!==0):Ps(s,u),Ns=p,dn=y}break;case 30:break;default:Ps(s,u)}}function sA(s){var a=s.alternate;a!==null&&(s.alternate=null,sA(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&Zl(a)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Ft=null,fi=!1;function Ms(s,a,u){for(u=u.child;u!==null;)oA(s,a,u),u=u.sibling}function oA(s,a,u){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(Zn,u)}catch{}switch(u.tag){case 26:dn||es(u,a),Ms(s,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:dn||es(u,a);var h=Ft,p=fi;Fo(u.type)&&(Ft=u.stateNode,fi=!1),Ms(s,a,u),tf(u.stateNode),Ft=h,fi=p;break;case 5:dn||es(u,a);case 6:if(h=Ft,p=fi,Ft=null,Ms(s,a,u),Ft=h,fi=p,Ft!==null)if(fi)try{(Ft.nodeType===9?Ft.body:Ft.nodeName==="HTML"?Ft.ownerDocument.body:Ft).removeChild(u.stateNode)}catch(y){Et(u,a,y)}else try{Ft.removeChild(u.stateNode)}catch(y){Et(u,a,y)}break;case 18:Ft!==null&&(fi?(s=Ft,JA(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),Lu(s)):JA(Ft,u.stateNode));break;case 4:h=Ft,p=fi,Ft=u.stateNode.containerInfo,fi=!0,Ms(s,a,u),Ft=h,fi=p;break;case 0:case 11:case 14:case 15:Mo(2,u,a),dn||Mo(4,u,a),Ms(s,a,u);break;case 1:dn||(es(u,a),h=u.stateNode,typeof h.componentWillUnmount=="function"&&ZC(u,a,h)),Ms(s,a,u);break;case 21:Ms(s,a,u);break;case 22:dn=(h=dn)||u.memoizedState!==null,Ms(s,a,u),dn=h;break;default:Ms(s,a,u)}}function aA(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Lu(s)}catch(u){Et(a,a.return,u)}}}function lA(s,a){if(a.memoizedState===null&&(s=a.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Lu(s)}catch(u){Et(a,a.return,u)}}function T3(s){switch(s.tag){case 31:case 13:case 19:var a=s.stateNode;return a===null&&(a=s.stateNode=new iA),a;case 22:return s=s.stateNode,a=s._retryCache,a===null&&(a=s._retryCache=new iA),a;default:throw Error(i(435,s.tag))}}function ap(s,a){var u=T3(s);a.forEach(function(h){if(!u.has(h)){u.add(h);var p=D3.bind(null,s,h);h.then(p,p)}})}function di(s,a){var u=a.deletions;if(u!==null)for(var h=0;h<u.length;h++){var p=u[h],y=s,T=a,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(Fo(w.type)){Ft=w.stateNode,fi=!1;break e}break;case 5:Ft=w.stateNode,fi=!1;break e;case 3:case 4:Ft=w.stateNode.containerInfo,fi=!0;break e}w=w.return}if(Ft===null)throw Error(i(160));oA(y,T,p),Ft=null,fi=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)uA(a,s),a=a.sibling}var Er=null;function uA(s,a){var u=s.alternate,h=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:di(a,s),mi(s),h&4&&(Mo(3,s,s.return),Gh(3,s),Mo(5,s,s.return));break;case 1:di(a,s),mi(s),h&512&&(dn||u===null||es(u,u.return)),h&64&&Ns&&(s=s.updateQueue,s!==null&&(h=s.callbacks,h!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?h:u.concat(h))));break;case 26:var p=Er;if(di(a,s),mi(s),h&512&&(dn||u===null||es(u,u.return)),h&4){var y=u!==null?u.memoizedState:null;if(h=s.memoizedState,u===null)if(h===null)if(s.stateNode===null){e:{h=s.type,u=s.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Br]||y[an]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(h),p.head.insertBefore(y,p.querySelector("head > title"))),Bn(y,h,u),y[an]=s,ln(y),h=y;break e;case"link":var T=uI("link","href",p).get(h+(u.href||""));if(T){for(var w=0;w<T.length;w++)if(y=T[w],y.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&y.getAttribute("rel")===(u.rel==null?null:u.rel)&&y.getAttribute("title")===(u.title==null?null:u.title)&&y.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){T.splice(w,1);break t}}y=p.createElement(h),Bn(y,h,u),p.head.appendChild(y);break;case"meta":if(T=uI("meta","content",p).get(h+(u.content||""))){for(w=0;w<T.length;w++)if(y=T[w],y.getAttribute("content")===(u.content==null?null:""+u.content)&&y.getAttribute("name")===(u.name==null?null:u.name)&&y.getAttribute("property")===(u.property==null?null:u.property)&&y.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&y.getAttribute("charset")===(u.charSet==null?null:u.charSet)){T.splice(w,1);break t}}y=p.createElement(h),Bn(y,h,u),p.head.appendChild(y);break;default:throw Error(i(468,h))}y[an]=s,ln(y),h=y}s.stateNode=h}else cI(p,s.type,s.stateNode);else s.stateNode=lI(p,h,s.memoizedProps);else y!==h?(y===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):y.count--,h===null?cI(p,s.type,s.stateNode):lI(p,h,s.memoizedProps)):h===null&&s.stateNode!==null&&Bv(s,s.memoizedProps,u.memoizedProps)}break;case 27:di(a,s),mi(s),h&512&&(dn||u===null||es(u,u.return)),u!==null&&h&4&&Bv(s,s.memoizedProps,u.memoizedProps);break;case 5:if(di(a,s),mi(s),h&512&&(dn||u===null||es(u,u.return)),s.flags&32){p=s.stateNode;try{hi(p,"")}catch(be){Et(s,s.return,be)}}h&4&&s.stateNode!=null&&(p=s.memoizedProps,Bv(s,p,u!==null?u.memoizedProps:p)),h&1024&&(qv=!0);break;case 6:if(di(a,s),mi(s),h&4){if(s.stateNode===null)throw Error(i(162));h=s.memoizedProps,u=s.stateNode;try{u.nodeValue=h}catch(be){Et(s,s.return,be)}}break;case 3:if(bp=null,p=Er,Er=Tp(a.containerInfo),di(a,s),Er=p,mi(s),h&4&&u!==null&&u.memoizedState.isDehydrated)try{Lu(a.containerInfo)}catch(be){Et(s,s.return,be)}qv&&(qv=!1,cA(s));break;case 4:h=Er,Er=Tp(s.stateNode.containerInfo),di(a,s),mi(s),Er=h;break;case 12:di(a,s),mi(s);break;case 31:di(a,s),mi(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ap(s,h)));break;case 13:di(a,s),mi(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(up=he()),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ap(s,h)));break;case 22:p=s.memoizedState!==null;var F=u!==null&&u.memoizedState!==null,X=Ns,se=dn;if(Ns=X||p,dn=se||F,di(a,s),dn=se,Ns=X,mi(s),h&8192)e:for(a=s.stateNode,a._visibility=p?a._visibility&-2:a._visibility|1,p&&(u===null||F||Ns||dn||Ja(s)),u=null,a=s;;){if(a.tag===5||a.tag===26){if(u===null){F=u=a;try{if(y=F.stateNode,p)T=y.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=F.stateNode;var ue=F.memoizedProps.style,J=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;w.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(be){Et(F,F.return,be)}}}else if(a.tag===6){if(u===null){F=a;try{F.stateNode.nodeValue=p?"":F.memoizedProps}catch(be){Et(F,F.return,be)}}}else if(a.tag===18){if(u===null){F=a;try{var ne=F.stateNode;p?ZA(ne,!0):ZA(F.stateNode,!1)}catch(be){Et(F,F.return,be)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===s)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break e;for(;a.sibling===null;){if(a.return===null||a.return===s)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}h&4&&(h=s.updateQueue,h!==null&&(u=h.retryQueue,u!==null&&(h.retryQueue=null,ap(s,u))));break;case 19:di(a,s),mi(s),h&4&&(h=s.updateQueue,h!==null&&(s.updateQueue=null,ap(s,h)));break;case 30:break;case 21:break;default:di(a,s),mi(s)}}function mi(s){var a=s.flags;if(a&2){try{for(var u,h=s.return;h!==null;){if(tA(h)){u=h;break}h=h.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var p=u.stateNode,y=jv(s);op(s,y,p);break;case 5:var T=u.stateNode;u.flags&32&&(hi(T,""),u.flags&=-33);var w=jv(s);op(s,w,T);break;case 3:case 4:var F=u.stateNode.containerInfo,X=jv(s);zv(s,X,F);break;default:throw Error(i(161))}}catch(se){Et(s,s.return,se)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function cA(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var a=s;cA(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),s=s.sibling}}function Ps(s,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)rA(s,a.alternate,a),a=a.sibling}function Ja(s){for(s=s.child;s!==null;){var a=s;switch(a.tag){case 0:case 11:case 14:case 15:Mo(4,a,a.return),Ja(a);break;case 1:es(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&ZC(a,a.return,u),Ja(a);break;case 27:tf(a.stateNode);case 26:case 5:es(a,a.return),Ja(a);break;case 22:a.memoizedState===null&&Ja(a);break;case 30:Ja(a);break;default:Ja(a)}s=s.sibling}}function Os(s,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var h=a.alternate,p=s,y=a,T=y.flags;switch(y.tag){case 0:case 11:case 15:Os(p,y,u),Gh(4,y);break;case 1:if(Os(p,y,u),h=y,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(X){Et(h,h.return,X)}if(h=y,p=h.updateQueue,p!==null){var w=h.stateNode;try{var F=p.shared.hiddenCallbacks;if(F!==null)for(p.shared.hiddenCallbacks=null,p=0;p<F.length;p++)j1(F[p],w)}catch(X){Et(h,h.return,X)}}u&&T&64&&JC(y),Kh(y,y.return);break;case 27:nA(y);case 26:case 5:Os(p,y,u),u&&h===null&&T&4&&eA(y),Kh(y,y.return);break;case 12:Os(p,y,u);break;case 31:Os(p,y,u),u&&T&4&&aA(p,y);break;case 13:Os(p,y,u),u&&T&4&&lA(p,y);break;case 22:y.memoizedState===null&&Os(p,y,u),Kh(y,y.return);break;case 30:break;default:Os(p,y,u)}a=a.sibling}}function Hv(s,a){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(s=a.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Mh(u))}function Gv(s,a){s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Mh(s))}function Tr(s,a,u,h){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)hA(s,a,u,h),a=a.sibling}function hA(s,a,u,h){var p=a.flags;switch(a.tag){case 0:case 11:case 15:Tr(s,a,u,h),p&2048&&Gh(9,a);break;case 1:Tr(s,a,u,h);break;case 3:Tr(s,a,u,h),p&2048&&(s=null,a.alternate!==null&&(s=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==s&&(a.refCount++,s!=null&&Mh(s)));break;case 12:if(p&2048){Tr(s,a,u,h),s=a.stateNode;try{var y=a.memoizedProps,T=y.id,w=y.onPostCommit;typeof w=="function"&&w(T,a.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(F){Et(a,a.return,F)}}else Tr(s,a,u,h);break;case 31:Tr(s,a,u,h);break;case 13:Tr(s,a,u,h);break;case 23:break;case 22:y=a.stateNode,T=a.alternate,a.memoizedState!==null?y._visibility&2?Tr(s,a,u,h):$h(s,a):y._visibility&2?Tr(s,a,u,h):(y._visibility|=2,Au(s,a,u,h,(a.subtreeFlags&10256)!==0||!1)),p&2048&&Hv(T,a);break;case 24:Tr(s,a,u,h),p&2048&&Gv(a.alternate,a);break;default:Tr(s,a,u,h)}}function Au(s,a,u,h,p){for(p=p&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var y=s,T=a,w=u,F=h,X=T.flags;switch(T.tag){case 0:case 11:case 15:Au(y,T,w,F,p),Gh(8,T);break;case 23:break;case 22:var se=T.stateNode;T.memoizedState!==null?se._visibility&2?Au(y,T,w,F,p):$h(y,T):(se._visibility|=2,Au(y,T,w,F,p)),p&&X&2048&&Hv(T.alternate,T);break;case 24:Au(y,T,w,F,p),p&&X&2048&&Gv(T.alternate,T);break;default:Au(y,T,w,F,p)}a=a.sibling}}function $h(s,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=s,h=a,p=h.flags;switch(h.tag){case 22:$h(u,h),p&2048&&Hv(h.alternate,h);break;case 24:$h(u,h),p&2048&&Gv(h.alternate,h);break;default:$h(u,h)}a=a.sibling}}var Wh=8192;function Iu(s,a,u){if(s.subtreeFlags&Wh)for(s=s.child;s!==null;)fA(s,a,u),s=s.sibling}function fA(s,a,u){switch(s.tag){case 26:Iu(s,a,u),s.flags&Wh&&s.memoizedState!==null&&a6(u,Er,s.memoizedState,s.memoizedProps);break;case 5:Iu(s,a,u);break;case 3:case 4:var h=Er;Er=Tp(s.stateNode.containerInfo),Iu(s,a,u),Er=h;break;case 22:s.memoizedState===null&&(h=s.alternate,h!==null&&h.memoizedState!==null?(h=Wh,Wh=16777216,Iu(s,a,u),Wh=h):Iu(s,a,u));break;default:Iu(s,a,u)}}function dA(s){var a=s.alternate;if(a!==null&&(s=a.child,s!==null)){a.child=null;do a=s.sibling,s.sibling=null,s=a;while(s!==null)}}function Yh(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Dn=h,pA(h,s)}dA(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)mA(s),s=s.sibling}function mA(s){switch(s.tag){case 0:case 11:case 15:Yh(s),s.flags&2048&&Mo(9,s,s.return);break;case 3:Yh(s);break;case 12:Yh(s);break;case 22:var a=s.stateNode;s.memoizedState!==null&&a._visibility&2&&(s.return===null||s.return.tag!==13)?(a._visibility&=-3,lp(s)):Yh(s);break;default:Yh(s)}}function lp(s){var a=s.deletions;if((s.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var h=a[u];Dn=h,pA(h,s)}dA(s)}for(s=s.child;s!==null;){switch(a=s,a.tag){case 0:case 11:case 15:Mo(8,a,a.return),lp(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,lp(a));break;default:lp(a)}s=s.sibling}}function pA(s,a){for(;Dn!==null;){var u=Dn;switch(u.tag){case 0:case 11:case 15:Mo(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var h=u.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Mh(u.memoizedState.cache)}if(h=u.child,h!==null)h.return=u,Dn=h;else e:for(u=s;Dn!==null;){h=Dn;var p=h.sibling,y=h.return;if(sA(h),h===u){Dn=null;break e}if(p!==null){p.return=y,Dn=p;break e}Dn=y}}}var S3={getCacheForType:function(s){var a=Un(cn),u=a.data.get(s);return u===void 0&&(u=s(),a.data.set(s,u)),u},cacheSignal:function(){return Un(cn).controller.signal}},b3=typeof WeakMap=="function"?WeakMap:Map,dt=0,xt=null,et=null,it=0,vt=0,Pi=null,Po=!1,Ru=!1,Kv=!1,Vs=0,Wt=0,Oo=0,Za=0,$v=0,Oi=0,xu=0,Qh=null,pi=null,Wv=!1,up=0,gA=0,cp=1/0,hp=null,Vo=null,bn=0,ko=null,Du=null,ks=0,Yv=0,Qv=null,yA=null,Xh=0,Xv=null;function Vi(){return(dt&2)!==0&&it!==0?it&-it:ee.T!==null?i0():fm()}function _A(){if(Oi===0)if((it&536870912)===0||ot){var s=Aa;Aa<<=1,(Aa&3932160)===0&&(Aa=262144),Oi=s}else Oi=536870912;return s=Ni.current,s!==null&&(s.flags|=32),Oi}function gi(s,a,u){(s===xt&&(vt===2||vt===9)||s.cancelPendingCommit!==null)&&(Nu(s,0),Lo(s,it,Oi,!1)),Ia(s,u),((dt&2)===0||s!==xt)&&(s===xt&&((dt&2)===0&&(Za|=u),Wt===4&&Lo(s,it,Oi,!1)),ts(s))}function vA(s,a,u){if((dt&6)!==0)throw Error(i(327));var h=!u&&(a&127)===0&&(a&s.expiredLanes)===0||hr(s,a),p=h?A3(s,a):Zv(s,a,!0),y=h;do{if(p===0){Ru&&!h&&Lo(s,a,0,!1);break}else{if(u=s.current.alternate,y&&!w3(u)){p=Zv(s,a,!1),y=!1;continue}if(p===2){if(y=a,s.errorRecoveryDisabledLanes&y)var T=0;else T=s.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var w=s;p=Qh;var F=w.current.memoizedState.isDehydrated;if(F&&(Nu(w,T).flags|=256),T=Zv(w,T,!1),T!==2){if(Kv&&!F){w.errorRecoveryDisabledLanes|=y,Za|=y,p=4;break e}y=pi,pi=p,y!==null&&(pi===null?pi=y:pi.push.apply(pi,y))}p=T}if(y=!1,p!==2)continue}}if(p===1){Nu(s,0),Lo(s,a,0,!0);break}e:{switch(h=s,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:Lo(h,a,Oi,!Po);break e;case 2:pi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(p=up+300-he(),10<p)){if(Lo(h,a,Oi,!Po),Lr(h,0,!0)!==0)break e;ks=a,h.timeoutHandle=QA(EA.bind(null,h,u,pi,hp,Wv,a,Oi,Za,xu,Po,y,"Throttled",-0,0),p);break e}EA(h,u,pi,hp,Wv,a,Oi,Za,xu,Po,y,null,-0,0)}}break}while(!0);ts(s)}function EA(s,a,u,h,p,y,T,w,F,X,se,ue,J,ne){if(s.timeoutHandle=-1,ue=a.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mr},fA(a,y,ue);var be=(y&62914560)===y?up-he():(y&4194048)===y?gA-he():0;if(be=l6(ue,be),be!==null){ks=y,s.cancelPendingCommit=be(RA.bind(null,s,a,y,u,h,p,T,w,F,se,ue,null,J,ne)),Lo(s,y,T,!X);return}}RA(s,a,y,u,h,p,T,w,F)}function w3(s){for(var a=s;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var h=0;h<u.length;h++){var p=u[h],y=p.getSnapshot;p=p.value;try{if(!xi(y(),p))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Lo(s,a,u,h){a&=~$v,a&=~Za,s.suspendedLanes|=a,s.pingedLanes&=~a,h&&(s.warmLanes|=a),h=s.expirationTimes;for(var p=a;0<p;){var y=31-Lt(p),T=1<<y;h[y]=-1,p&=~T}u!==0&&Ra(s,u,a)}function fp(){return(dt&6)===0?(Jh(0),!1):!0}function Jv(){if(et!==null){if(vt===0)var s=et.return;else s=et,Cs=Ha=null,mv(s),Tu=null,Oh=0,s=et;for(;s!==null;)XC(s.alternate,s),s=s.return;et=null}}function Nu(s,a){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,H3(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),ks=0,Jv(),xt=s,et=u=bs(s.current,null),it=a,vt=0,Pi=null,Po=!1,Ru=hr(s,a),Kv=!1,xu=Oi=$v=Za=Oo=Wt=0,pi=Qh=null,Wv=!1,(a&8)!==0&&(a|=a&32);var h=s.entangledLanes;if(h!==0)for(s=s.entanglements,h&=a;0<h;){var p=31-Lt(h),y=1<<p;a|=s[p],h&=~y}return Vs=a,Pm(),u}function TA(s,a){Ke=null,ee.H=zh,a===Eu||a===jm?(a=L1(),vt=3):a===nv?(a=L1(),vt=4):vt=a===Dv?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Pi=a,et===null&&(Wt=1,tp(s,Wi(a,s.current)))}function SA(){var s=Ni.current;return s===null?!0:(it&4194048)===it?Ji===null:(it&62914560)===it||(it&536870912)!==0?s===Ji:!1}function bA(){var s=ee.H;return ee.H=zh,s===null?zh:s}function wA(){var s=ee.A;return ee.A=S3,s}function dp(){Wt=4,Po||(it&4194048)!==it&&Ni.current!==null||(Ru=!0),(Oo&134217727)===0&&(Za&134217727)===0||xt===null||Lo(xt,it,Oi,!1)}function Zv(s,a,u){var h=dt;dt|=2;var p=bA(),y=wA();(xt!==s||it!==a)&&(hp=null,Nu(s,a)),a=!1;var T=Wt;e:do try{if(vt!==0&&et!==null){var w=et,F=Pi;switch(vt){case 8:Jv(),T=6;break e;case 3:case 2:case 9:case 6:Ni.current===null&&(a=!0);var X=vt;if(vt=0,Pi=null,Mu(s,w,F,X),u&&Ru){T=0;break e}break;default:X=vt,vt=0,Pi=null,Mu(s,w,F,X)}}C3(),T=Wt;break}catch(se){TA(s,se)}while(!0);return a&&s.shellSuspendCounter++,Cs=Ha=null,dt=h,ee.H=p,ee.A=y,et===null&&(xt=null,it=0,Pm()),T}function C3(){for(;et!==null;)CA(et)}function A3(s,a){var u=dt;dt|=2;var h=bA(),p=wA();xt!==s||it!==a?(hp=null,cp=he()+500,Nu(s,a)):Ru=hr(s,a);e:do try{if(vt!==0&&et!==null){a=et;var y=Pi;t:switch(vt){case 1:vt=0,Pi=null,Mu(s,a,y,1);break;case 2:case 9:if(V1(y)){vt=0,Pi=null,AA(a);break}a=function(){vt!==2&&vt!==9||xt!==s||(vt=7),ts(s)},y.then(a,a);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:V1(y)?(vt=0,Pi=null,AA(a)):(vt=0,Pi=null,Mu(s,a,y,7));break;case 5:var T=null;switch(et.tag){case 26:T=et.memoizedState;case 5:case 27:var w=et;if(T?hI(T):w.stateNode.complete){vt=0,Pi=null;var F=w.sibling;if(F!==null)et=F;else{var X=w.return;X!==null?(et=X,mp(X)):et=null}break t}}vt=0,Pi=null,Mu(s,a,y,5);break;case 6:vt=0,Pi=null,Mu(s,a,y,6);break;case 8:Jv(),Wt=6;break e;default:throw Error(i(462))}}I3();break}catch(se){TA(s,se)}while(!0);return Cs=Ha=null,ee.H=h,ee.A=p,dt=u,et!==null?0:(xt=null,it=0,Pm(),Wt)}function I3(){for(;et!==null&&!re();)CA(et)}function CA(s){var a=YC(s.alternate,s,Vs);s.memoizedProps=s.pendingProps,a===null?mp(s):et=a}function AA(s){var a=s,u=a.alternate;switch(a.tag){case 15:case 0:a=qC(u,a,a.pendingProps,a.type,void 0,it);break;case 11:a=qC(u,a,a.pendingProps,a.type.render,a.ref,it);break;case 5:mv(a);default:XC(u,a),a=et=w1(a,Vs),a=YC(u,a,Vs)}s.memoizedProps=s.pendingProps,a===null?mp(s):et=a}function Mu(s,a,u,h){Cs=Ha=null,mv(a),Tu=null,Oh=0;var p=a.return;try{if(p3(s,p,a,u,it)){Wt=1,tp(s,Wi(u,s.current)),et=null;return}}catch(y){if(p!==null)throw et=p,y;Wt=1,tp(s,Wi(u,s.current)),et=null;return}a.flags&32768?(ot||h===1?s=!0:Ru||(it&536870912)!==0?s=!1:(Po=s=!0,(h===2||h===9||h===3||h===6)&&(h=Ni.current,h!==null&&h.tag===13&&(h.flags|=16384))),IA(a,s)):mp(a)}function mp(s){var a=s;do{if((a.flags&32768)!==0){IA(a,Po);return}s=a.return;var u=_3(a.alternate,a,Vs);if(u!==null){et=u;return}if(a=a.sibling,a!==null){et=a;return}et=a=s}while(a!==null);Wt===0&&(Wt=5)}function IA(s,a){do{var u=v3(s.alternate,s);if(u!==null){u.flags&=32767,et=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(s=s.sibling,s!==null)){et=s;return}et=s=u}while(s!==null);Wt=6,et=null}function RA(s,a,u,h,p,y,T,w,F){s.cancelPendingCommit=null;do pp();while(bn!==0);if((dt&6)!==0)throw Error(i(327));if(a!==null){if(a===s.current)throw Error(i(177));if(y=a.lanes|a.childLanes,y|=j_,M_(s,u,y,T,w,F),s===xt&&(et=xt=null,it=0),Du=a,ko=s,ks=u,Yv=y,Qv=p,yA=h,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,N3(Xe,function(){return PA(),null})):(s.callbackNode=null,s.callbackPriority=0),h=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||h){h=ee.T,ee.T=null,p=ce.p,ce.p=2,T=dt,dt|=4;try{E3(s,a,u)}finally{dt=T,ce.p=p,ee.T=h}}bn=1,xA(),DA(),NA()}}function xA(){if(bn===1){bn=0;var s=ko,a=Du,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=ee.T,ee.T=null;var h=ce.p;ce.p=2;var p=dt;dt|=4;try{uA(a,s);var y=h0,T=p1(s.containerInfo),w=y.focusedElem,F=y.selectionRange;if(T!==w&&w&&w.ownerDocument&&m1(w.ownerDocument.documentElement,w)){if(F!==null&&k_(w)){var X=F.start,se=F.end;if(se===void 0&&(se=X),"selectionStart"in w)w.selectionStart=X,w.selectionEnd=Math.min(se,w.value.length);else{var ue=w.ownerDocument||document,J=ue&&ue.defaultView||window;if(J.getSelection){var ne=J.getSelection(),be=w.textContent.length,Pe=Math.min(F.start,be),It=F.end===void 0?Pe:Math.min(F.end,be);!ne.extend&&Pe>It&&(T=It,It=Pe,Pe=T);var G=d1(w,Pe),H=d1(w,It);if(G&&H&&(ne.rangeCount!==1||ne.anchorNode!==G.node||ne.anchorOffset!==G.offset||ne.focusNode!==H.node||ne.focusOffset!==H.offset)){var Q=ue.createRange();Q.setStart(G.node,G.offset),ne.removeAllRanges(),Pe>It?(ne.addRange(Q),ne.extend(H.node,H.offset)):(Q.setEnd(H.node,H.offset),ne.addRange(Q))}}}}for(ue=[],ne=w;ne=ne.parentNode;)ne.nodeType===1&&ue.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ue.length;w++){var le=ue[w];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Ip=!!c0,h0=c0=null}finally{dt=p,ce.p=h,ee.T=u}}s.current=a,bn=2}}function DA(){if(bn===2){bn=0;var s=ko,a=Du,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=ee.T,ee.T=null;var h=ce.p;ce.p=2;var p=dt;dt|=4;try{rA(s,a.alternate,a)}finally{dt=p,ce.p=h,ee.T=u}}bn=3}}function NA(){if(bn===4||bn===3){bn=0,Se();var s=ko,a=Du,u=ks,h=yA;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?bn=5:(bn=0,Du=ko=null,MA(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(Vo=null),vs(u),a=a.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(Zn,a,void 0,(a.current.flags&128)===128)}catch{}if(h!==null){a=ee.T,p=ce.p,ce.p=2,ee.T=null;try{for(var y=s.onRecoverableError,T=0;T<h.length;T++){var w=h[T];y(w.value,{componentStack:w.stack})}}finally{ee.T=a,ce.p=p}}(ks&3)!==0&&pp(),ts(s),p=s.pendingLanes,(u&261930)!==0&&(p&42)!==0?s===Xv?Xh++:(Xh=0,Xv=s):Xh=0,Jh(0)}}function MA(s,a){(s.pooledCacheLanes&=a)===0&&(a=s.pooledCache,a!=null&&(s.pooledCache=null,Mh(a)))}function pp(){return xA(),DA(),NA(),PA()}function PA(){if(bn!==5)return!1;var s=ko,a=Yv;Yv=0;var u=vs(ks),h=ee.T,p=ce.p;try{ce.p=32>u?32:u,ee.T=null,u=Qv,Qv=null;var y=ko,T=ks;if(bn=0,Du=ko=null,ks=0,(dt&6)!==0)throw Error(i(331));var w=dt;if(dt|=4,mA(y.current),hA(y,y.current,T,u),dt=w,Jh(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(Zn,y)}catch{}return!0}finally{ce.p=p,ee.T=h,MA(s,a)}}function OA(s,a,u){a=Wi(u,a),a=xv(s.stateNode,a,2),s=xo(s,a,2),s!==null&&(Ia(s,2),ts(s))}function Et(s,a,u){if(s.tag===3)OA(s,s,u);else for(;a!==null;){if(a.tag===3){OA(a,s,u);break}else if(a.tag===1){var h=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Vo===null||!Vo.has(h))){s=Wi(u,s),u=VC(2),h=xo(a,u,2),h!==null&&(kC(u,h,a,s),Ia(h,2),ts(h));break}}a=a.return}}function e0(s,a,u){var h=s.pingCache;if(h===null){h=s.pingCache=new b3;var p=new Set;h.set(a,p)}else p=h.get(a),p===void 0&&(p=new Set,h.set(a,p));p.has(u)||(Kv=!0,p.add(u),s=R3.bind(null,s,a,u),a.then(s,s))}function R3(s,a,u){var h=s.pingCache;h!==null&&h.delete(a),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,xt===s&&(it&u)===u&&(Wt===4||Wt===3&&(it&62914560)===it&&300>he()-up?(dt&2)===0&&Nu(s,0):$v|=u,xu===it&&(xu=0)),ts(s)}function VA(s,a){a===0&&(a=hm()),s=ja(s,a),s!==null&&(Ia(s,a),ts(s))}function x3(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),VA(s,u)}function D3(s,a){var u=0;switch(s.tag){case 31:case 13:var h=s.stateNode,p=s.memoizedState;p!==null&&(u=p.retryLane);break;case 19:h=s.stateNode;break;case 22:h=s.stateNode._retryCache;break;default:throw Error(i(314))}h!==null&&h.delete(a),VA(s,u)}function N3(s,a){return L(s,a)}var gp=null,Pu=null,t0=!1,yp=!1,n0=!1,Uo=0;function ts(s){s!==Pu&&s.next===null&&(Pu===null?gp=Pu=s:Pu=Pu.next=s),yp=!0,t0||(t0=!0,P3())}function Jh(s,a){if(!n0&&yp){n0=!0;do for(var u=!1,h=gp;h!==null;){if(s!==0){var p=h.pendingLanes;if(p===0)var y=0;else{var T=h.suspendedLanes,w=h.pingedLanes;y=(1<<31-Lt(42|s)+1)-1,y&=p&~(T&~w),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(u=!0,FA(h,y))}else y=it,y=Lr(h,h===xt?y:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(y&3)===0||hr(h,y)||(u=!0,FA(h,y));h=h.next}while(u);n0=!1}}function M3(){kA()}function kA(){yp=t0=!1;var s=0;Uo!==0&&q3()&&(s=Uo);for(var a=he(),u=null,h=gp;h!==null;){var p=h.next,y=LA(h,a);y===0?(h.next=null,u===null?gp=p:u.next=p,p===null&&(Pu=u)):(u=h,(s!==0||(y&3)!==0)&&(yp=!0)),h=p}bn!==0&&bn!==5||Jh(s),Uo!==0&&(Uo=0)}function LA(s,a){for(var u=s.suspendedLanes,h=s.pingedLanes,p=s.expirationTimes,y=s.pendingLanes&-62914561;0<y;){var T=31-Lt(y),w=1<<T,F=p[T];F===-1?((w&u)===0||(w&h)!==0)&&(p[T]=N_(w,a)):F<=a&&(s.expiredLanes|=w),y&=~w}if(a=xt,u=it,u=Lr(s,s===a?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h=s.callbackNode,u===0||s===a&&(vt===2||vt===9)||s.cancelPendingCommit!==null)return h!==null&&h!==null&&Y(h),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||hr(s,u)){if(a=u&-u,a===s.callbackPriority)return a;switch(h!==null&&Y(h),vs(u)){case 2:case 8:u=He;break;case 32:u=Xe;break;case 268435456:u=ys;break;default:u=Xe}return h=UA.bind(null,s),u=L(u,h),s.callbackPriority=a,s.callbackNode=u,a}return h!==null&&h!==null&&Y(h),s.callbackPriority=2,s.callbackNode=null,2}function UA(s,a){if(bn!==0&&bn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(pp()&&s.callbackNode!==u)return null;var h=it;return h=Lr(s,s===xt?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),h===0?null:(vA(s,h,a),LA(s,he()),s.callbackNode!=null&&s.callbackNode===u?UA.bind(null,s):null)}function FA(s,a){if(pp())return null;vA(s,a,!0)}function P3(){G3(function(){(dt&6)!==0?L(me,M3):kA()})}function i0(){if(Uo===0){var s=_u;s===0&&(s=Vr,Vr<<=1,(Vr&261888)===0&&(Vr=256)),Uo=s}return Uo}function BA(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:iu(""+s)}function jA(s,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,s.id&&u.setAttribute("form",s.id),a.parentNode.insertBefore(u,a),s=new FormData(s),u.parentNode.removeChild(u),s}function O3(s,a,u,h,p){if(a==="submit"&&u&&u.stateNode===p){var y=BA((p[Rn]||null).action),T=h.submitter;T&&(a=(a=T[Rn]||null)?BA(a.formAction):T.getAttribute("formAction"),a!==null&&(y=a,T=null));var w=new Wr("action","action",null,h,p);s.push({event:w,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Uo!==0){var F=T?jA(p,T):new FormData(p);bv(u,{pending:!0,data:F,method:p.method,action:y},null,F)}}else typeof y=="function"&&(w.preventDefault(),F=T?jA(p,T):new FormData(p),bv(u,{pending:!0,data:F,method:p.method,action:y},y,F))},currentTarget:p}]})}}for(var r0=0;r0<B_.length;r0++){var s0=B_[r0],V3=s0.toLowerCase(),k3=s0[0].toUpperCase()+s0.slice(1);vr(V3,"on"+k3)}vr(_1,"onAnimationEnd"),vr(v1,"onAnimationIteration"),vr(E1,"onAnimationStart"),vr("dblclick","onDoubleClick"),vr("focusin","onFocus"),vr("focusout","onBlur"),vr(J4,"onTransitionRun"),vr(Z4,"onTransitionStart"),vr(e3,"onTransitionCancel"),vr(T1,"onTransitionEnd"),Hr("onMouseEnter",["mouseout","mouseover"]),Hr("onMouseLeave",["mouseout","mouseover"]),Hr("onPointerEnter",["pointerout","pointerover"]),Hr("onPointerLeave",["pointerout","pointerover"]),qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qr("onBeforeInput",["compositionend","keypress","textInput","paste"]),qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Zh));function zA(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var h=s[u],p=h.event;h=h.listeners;e:{var y=void 0;if(a)for(var T=h.length-1;0<=T;T--){var w=h[T],F=w.instance,X=w.currentTarget;if(w=w.listener,F!==y&&p.isPropagationStopped())break e;y=w,p.currentTarget=X;try{y(p)}catch(se){Mm(se)}p.currentTarget=null,y=F}else for(T=0;T<h.length;T++){if(w=h[T],F=w.instance,X=w.currentTarget,w=w.listener,F!==y&&p.isPropagationStopped())break e;y=w,p.currentTarget=X;try{y(p)}catch(se){Mm(se)}p.currentTarget=null,y=F}}}}function tt(s,a){var u=a[Jl];u===void 0&&(u=a[Jl]=new Set);var h=s+"__bubble";u.has(h)||(qA(a,s,2,!1),u.add(h))}function o0(s,a,u){var h=0;a&&(h|=4),qA(u,s,h,a)}var _p="_reactListening"+Math.random().toString(36).slice(2);function a0(s){if(!s[_p]){s[_p]=!0,hh.forEach(function(u){u!=="selectionchange"&&(L3.has(u)||o0(u,!1,s),o0(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[_p]||(a[_p]=!0,o0("selectionchange",!1,a))}}function qA(s,a,u,h){switch(_I(a)){case 2:var p=h6;break;case 8:p=f6;break;default:p=S0}u=p.bind(null,a,u,s),p=void 0,!Pa||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(p=!0),h?p!==void 0?s.addEventListener(a,u,{capture:!0,passive:p}):s.addEventListener(a,u,!0):p!==void 0?s.addEventListener(a,u,{passive:p}):s.addEventListener(a,u,!1)}function l0(s,a,u,h,p){var y=h;if((a&1)===0&&(a&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var w=h.stateNode.containerInfo;if(w===p)break;if(T===4)for(T=h.return;T!==null;){var F=T.tag;if((F===3||F===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;w!==null;){if(T=jr(w),T===null)return;if(F=T.tag,F===5||F===6||F===26||F===27){h=y=T;continue e}w=w.parentNode}}h=h.return}vo(function(){var X=y,se=Hi(u),ue=[];e:{var J=S1.get(s);if(J!==void 0){var ne=Wr,be=s;switch(s){case"keypress":if(Va(u)===0)break e;case"keydown":case"keyup":ne=xm;break;case"focusin":be="focus",ne=La;break;case"focusout":be="blur",ne=La;break;case"beforeblur":case"afterblur":ne=La;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=wh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Em;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=E;break;case _1:case v1:case E1:ne=Sm;break;case T1:ne=x;break;case"scroll":case"scrollend":ne=bh;break;case"wheel":ne=te;break;case"copy":case"cut":case"paste":ne=bm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Ss;break;case"toggle":case"beforetoggle":ne=Ge}var Pe=(a&4)!==0,It=!Pe&&(s==="scroll"||s==="scrollend"),G=Pe?J!==null?J+"Capture":null:J;Pe=[];for(var H=X,Q;H!==null;){var le=H;if(Q=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Q===null||G===null||(le=pr(H,G),le!=null&&Pe.push(ef(H,le,Q))),It)break;H=H.return}0<Pe.length&&(J=new ne(J,be,null,u,se),ue.push({event:J,listeners:Pe}))}}if((a&7)===0){e:{if(J=s==="mouseover"||s==="pointerover",ne=s==="mouseout"||s==="pointerout",J&&u!==Eh&&(be=u.relatedTarget||u.fromElement)&&(jr(be)||be[Fr]))break e;if((ne||J)&&(J=se.window===se?se:(J=se.ownerDocument)?J.defaultView||J.parentWindow:window,ne?(be=u.relatedTarget||u.toElement,ne=X,be=be?jr(be):null,be!==null&&(It=o(be),Pe=be.tag,be!==It||Pe!==5&&Pe!==27&&Pe!==6)&&(be=null)):(ne=null,be=X),ne!==be)){if(Pe=wh,le="onMouseLeave",G="onMouseEnter",H="mouse",(s==="pointerout"||s==="pointerover")&&(Pe=Ss,le="onPointerLeave",G="onPointerEnter",H="pointer"),It=ne==null?J:Ii(ne),Q=be==null?J:Ii(be),J=new Pe(le,H+"leave",ne,u,se),J.target=It,J.relatedTarget=Q,le=null,jr(se)===X&&(Pe=new Pe(G,H+"enter",be,u,se),Pe.target=Q,Pe.relatedTarget=It,le=Pe),It=le,ne&&be)t:{for(Pe=U3,G=ne,H=be,Q=0,le=G;le;le=Pe(le))Q++;le=0;for(var xe=H;xe;xe=Pe(xe))le++;for(;0<Q-le;)G=Pe(G),Q--;for(;0<le-Q;)H=Pe(H),le--;for(;Q--;){if(G===H||H!==null&&G===H.alternate){Pe=G;break t}G=Pe(G),H=Pe(H)}Pe=null}else Pe=null;ne!==null&&HA(ue,J,ne,Pe,!1),be!==null&&It!==null&&HA(ue,It,be,Pe,!0)}}e:{if(J=X?Ii(X):window,ne=J.nodeName&&J.nodeName.toLowerCase(),ne==="select"||ne==="input"&&J.type==="file")var ct=a1;else if(s1(J))if(l1)ct=Y4;else{ct=$4;var Ce=K4}else ne=J.nodeName,!ne||ne.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?X&&nu(X.elementType)&&(ct=a1):ct=W4;if(ct&&(ct=ct(s,X))){o1(ue,ct,u,se);break e}Ce&&Ce(s,J,X),s==="focusout"&&X&&J.type==="number"&&X.memoizedProps.value!=null&&yh(J,"number",J.value)}switch(Ce=X?Ii(X):window,s){case"focusin":(s1(Ce)||Ce.contentEditable==="true")&&(cu=Ce,L_=X,xh=null);break;case"focusout":xh=L_=cu=null;break;case"mousedown":U_=!0;break;case"contextmenu":case"mouseup":case"dragend":U_=!1,g1(ue,u,se);break;case"selectionchange":if(X4)break;case"keydown":case"keyup":g1(ue,u,se)}var $e;if(ft)e:{switch(s){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else uu?Ua(s,u)&&(rt="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(rt="onCompositionStart");rt&&(Xr&&u.locale!=="ko"&&(uu||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&uu&&($e=Sh()):($r=se,Th="value"in $r?$r.value:$r.textContent,uu=!0)),Ce=vp(X,rt),0<Ce.length&&(rt=new Qr(rt,s,null,u,se),ue.push({event:rt,listeners:Ce}),$e?rt.data=$e:($e=lu(u),$e!==null&&(rt.data=$e)))),($e=Ki?z4(s,u):q4(s,u))&&(rt=vp(X,"onBeforeInput"),0<rt.length&&(Ce=new Qr("onBeforeInput","beforeinput",null,u,se),ue.push({event:Ce,listeners:rt}),Ce.data=$e)),O3(ue,s,X,u,se)}zA(ue,a)})}function ef(s,a,u){return{instance:s,listener:a,currentTarget:u}}function vp(s,a){for(var u=a+"Capture",h=[];s!==null;){var p=s,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=pr(s,u),p!=null&&h.unshift(ef(s,p,y)),p=pr(s,a),p!=null&&h.push(ef(s,p,y))),s.tag===3)return h;s=s.return}return[]}function U3(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function HA(s,a,u,h,p){for(var y=a._reactName,T=[];u!==null&&u!==h;){var w=u,F=w.alternate,X=w.stateNode;if(w=w.tag,F!==null&&F===h)break;w!==5&&w!==26&&w!==27||X===null||(F=X,p?(X=pr(u,y),X!=null&&T.unshift(ef(u,X,F))):p||(X=pr(u,y),X!=null&&T.push(ef(u,X,F)))),u=u.return}T.length!==0&&s.push({event:a,listeners:T})}var F3=/\r\n?/g,B3=/\u0000|\uFFFD/g;function GA(s){return(typeof s=="string"?s:""+s).replace(F3,`
`).replace(B3,"")}function KA(s,a){return a=GA(a),GA(s)===a}function At(s,a,u,h,p,y){switch(u){case"children":typeof h=="string"?a==="body"||a==="textarea"&&h===""||hi(s,h):(typeof h=="number"||typeof h=="bigint")&&a!=="body"&&hi(s,""+h);break;case"className":Ri(s,"class",h);break;case"tabIndex":Ri(s,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ri(s,u,h);break;case"style":vh(s,h,y);break;case"data":if(a!=="object"){Ri(s,"data",h);break}case"src":case"href":if(h===""&&(a!=="a"||u!=="href")){s.removeAttribute(u);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=iu(""+h),s.setAttribute(u,h);break;case"action":case"formAction":if(typeof h=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(u==="formAction"?(a!=="input"&&At(s,a,"name",p.name,p,null),At(s,a,"formEncType",p.formEncType,p,null),At(s,a,"formMethod",p.formMethod,p,null),At(s,a,"formTarget",p.formTarget,p,null)):(At(s,a,"encType",p.encType,p,null),At(s,a,"method",p.method,p,null),At(s,a,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){s.removeAttribute(u);break}h=iu(""+h),s.setAttribute(u,h);break;case"onClick":h!=null&&(s.onclick=mr);break;case"onScroll":h!=null&&tt("scroll",s);break;case"onScrollEnd":h!=null&&tt("scrollend",s);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(p.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":s.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){s.removeAttribute("xlink:href");break}u=iu(""+h),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""+h):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":h===!0?s.setAttribute(u,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?s.setAttribute(u,h):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?s.setAttribute(u,h):s.removeAttribute(u);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?s.removeAttribute(u):s.setAttribute(u,h);break;case"popover":tt("beforetoggle",s),tt("toggle",s),eu(s,"popover",h);break;case"xlinkActuate":un(s,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":un(s,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":un(s,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":un(s,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":un(s,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":un(s,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":un(s,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":un(s,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":un(s,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":eu(s,"is",h);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=vm.get(u)||u,eu(s,u,h))}}function u0(s,a,u,h,p,y){switch(u){case"style":vh(s,h,y);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(i(61));if(u=h.__html,u!=null){if(p.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof h=="string"?hi(s,h):(typeof h=="number"||typeof h=="bigint")&&hi(s,""+h);break;case"onScroll":h!=null&&tt("scroll",s);break;case"onScrollEnd":h!=null&&tt("scrollend",s);break;case"onClick":h!=null&&(s.onclick=mr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fh.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(p=u.endsWith("Capture"),a=u.slice(2,p?u.length-7:void 0),y=s[Rn]||null,y=y!=null?y[u]:null,typeof y=="function"&&s.removeEventListener(a,y,p),typeof h=="function")){typeof y!="function"&&y!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(a,h,p);break e}u in s?s[u]=h:h===!0?s.setAttribute(u,""):eu(s,u,h)}}}function Bn(s,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",s),tt("load",s);var h=!1,p=!1,y;for(y in u)if(u.hasOwnProperty(y)){var T=u[y];if(T!=null)switch(y){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:At(s,a,y,T,u,null)}}p&&At(s,a,"srcSet",u.srcSet,u,null),h&&At(s,a,"src",u.src,u,null);return;case"input":tt("invalid",s);var w=y=T=p=null,F=null,X=null;for(h in u)if(u.hasOwnProperty(h)){var se=u[h];if(se!=null)switch(h){case"name":p=se;break;case"type":T=se;break;case"checked":F=se;break;case"defaultChecked":X=se;break;case"value":y=se;break;case"defaultValue":w=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,a));break;default:At(s,a,h,se,u,null)}}gm(s,y,w,F,X,T,p,!1);return;case"select":tt("invalid",s),h=T=y=null;for(p in u)if(u.hasOwnProperty(p)&&(w=u[p],w!=null))switch(p){case"value":y=w;break;case"defaultValue":T=w;break;case"multiple":h=w;default:At(s,a,p,w,u,null)}a=y,u=T,s.multiple=!!h,a!=null?po(s,!!h,a,!1):u!=null&&po(s,!!h,u,!0);return;case"textarea":tt("invalid",s),y=p=h=null;for(T in u)if(u.hasOwnProperty(T)&&(w=u[T],w!=null))switch(T){case"value":h=w;break;case"defaultValue":p=w;break;case"children":y=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:At(s,a,T,w,u,null)}go(s,h,p,y);return;case"option":for(F in u)if(u.hasOwnProperty(F)&&(h=u[F],h!=null))switch(F){case"selected":s.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:At(s,a,F,h,u,null)}return;case"dialog":tt("beforetoggle",s),tt("toggle",s),tt("cancel",s),tt("close",s);break;case"iframe":case"object":tt("load",s);break;case"video":case"audio":for(h=0;h<Zh.length;h++)tt(Zh[h],s);break;case"image":tt("error",s),tt("load",s);break;case"details":tt("toggle",s);break;case"embed":case"source":case"link":tt("error",s),tt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in u)if(u.hasOwnProperty(X)&&(h=u[X],h!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:At(s,a,X,h,u,null)}return;default:if(nu(a)){for(se in u)u.hasOwnProperty(se)&&(h=u[se],h!==void 0&&u0(s,a,se,h,u,void 0));return}}for(w in u)u.hasOwnProperty(w)&&(h=u[w],h!=null&&At(s,a,w,h,u,null))}function j3(s,a,u,h){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,T=null,w=null,F=null,X=null,se=null;for(ne in u){var ue=u[ne];if(u.hasOwnProperty(ne)&&ue!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":F=ue;default:h.hasOwnProperty(ne)||At(s,a,ne,null,h,ue)}}for(var J in h){var ne=h[J];if(ue=u[J],h.hasOwnProperty(J)&&(ne!=null||ue!=null))switch(J){case"type":y=ne;break;case"name":p=ne;break;case"checked":X=ne;break;case"defaultChecked":se=ne;break;case"value":T=ne;break;case"defaultValue":w=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,a));break;default:ne!==ue&&At(s,a,J,ne,h,ue)}}tu(s,T,w,F,X,se,y,p);return;case"select":ne=T=w=J=null;for(y in u)if(F=u[y],u.hasOwnProperty(y)&&F!=null)switch(y){case"value":break;case"multiple":ne=F;default:h.hasOwnProperty(y)||At(s,a,y,null,h,F)}for(p in h)if(y=h[p],F=u[p],h.hasOwnProperty(p)&&(y!=null||F!=null))switch(p){case"value":J=y;break;case"defaultValue":w=y;break;case"multiple":T=y;default:y!==F&&At(s,a,p,y,h,F)}a=w,u=T,h=ne,J!=null?po(s,!!u,J,!1):!!h!=!!u&&(a!=null?po(s,!!u,a,!0):po(s,!!u,u?[]:"",!1));return;case"textarea":ne=J=null;for(w in u)if(p=u[w],u.hasOwnProperty(w)&&p!=null&&!h.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:At(s,a,w,null,h,p)}for(T in h)if(p=h[T],y=u[T],h.hasOwnProperty(T)&&(p!=null||y!=null))switch(T){case"value":J=p;break;case"defaultValue":ne=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&At(s,a,T,p,h,y)}ym(s,J,ne);return;case"option":for(var be in u)if(J=u[be],u.hasOwnProperty(be)&&J!=null&&!h.hasOwnProperty(be))switch(be){case"selected":s.selected=!1;break;default:At(s,a,be,null,h,J)}for(F in h)if(J=h[F],ne=u[F],h.hasOwnProperty(F)&&J!==ne&&(J!=null||ne!=null))switch(F){case"selected":s.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:At(s,a,F,J,h,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in u)J=u[Pe],u.hasOwnProperty(Pe)&&J!=null&&!h.hasOwnProperty(Pe)&&At(s,a,Pe,null,h,J);for(X in h)if(J=h[X],ne=u[X],h.hasOwnProperty(X)&&J!==ne&&(J!=null||ne!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:At(s,a,X,J,h,ne)}return;default:if(nu(a)){for(var It in u)J=u[It],u.hasOwnProperty(It)&&J!==void 0&&!h.hasOwnProperty(It)&&u0(s,a,It,void 0,h,J);for(se in h)J=h[se],ne=u[se],!h.hasOwnProperty(se)||J===ne||J===void 0&&ne===void 0||u0(s,a,se,J,h,ne);return}}for(var G in u)J=u[G],u.hasOwnProperty(G)&&J!=null&&!h.hasOwnProperty(G)&&At(s,a,G,null,h,J);for(ue in h)J=h[ue],ne=u[ue],!h.hasOwnProperty(ue)||J===ne||J==null&&ne==null||At(s,a,ue,J,h,ne)}function $A(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function z3(){if(typeof performance.getEntriesByType=="function"){for(var s=0,a=0,u=performance.getEntriesByType("resource"),h=0;h<u.length;h++){var p=u[h],y=p.transferSize,T=p.initiatorType,w=p.duration;if(y&&w&&$A(T)){for(T=0,w=p.responseEnd,h+=1;h<u.length;h++){var F=u[h],X=F.startTime;if(X>w)break;var se=F.transferSize,ue=F.initiatorType;se&&$A(ue)&&(F=F.responseEnd,T+=se*(F<w?1:(w-X)/(F-X)))}if(--h,a+=8*(y+T)/(p.duration/1e3),s++,10<s)break}}if(0<s)return a/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var c0=null,h0=null;function Ep(s){return s.nodeType===9?s:s.ownerDocument}function WA(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function YA(s,a){if(s===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&a==="foreignObject"?0:s}function f0(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var d0=null;function q3(){var s=window.event;return s&&s.type==="popstate"?s===d0?!1:(d0=s,!0):(d0=null,!1)}var QA=typeof setTimeout=="function"?setTimeout:void 0,H3=typeof clearTimeout=="function"?clearTimeout:void 0,XA=typeof Promise=="function"?Promise:void 0,G3=typeof queueMicrotask=="function"?queueMicrotask:typeof XA<"u"?function(s){return XA.resolve(null).then(s).catch(K3)}:QA;function K3(s){setTimeout(function(){throw s})}function Fo(s){return s==="head"}function JA(s,a){var u=a,h=0;do{var p=u.nextSibling;if(s.removeChild(u),p&&p.nodeType===8)if(u=p.data,u==="/$"||u==="/&"){if(h===0){s.removeChild(p),Lu(a);return}h--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")h++;else if(u==="html")tf(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,tf(u);for(var y=u.firstChild;y;){var T=y.nextSibling,w=y.nodeName;y[Br]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&y.rel.toLowerCase()==="stylesheet"||u.removeChild(y),y=T}}else u==="body"&&tf(s.ownerDocument.body);u=p}while(u);Lu(a)}function ZA(s,a){var u=s;s=0;do{var h=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),h&&h.nodeType===8)if(u=h.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=h}while(u)}function m0(s){var a=s.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":m0(u),Zl(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function $3(s,a,u,h){for(;s.nodeType===1;){var p=u;if(s.nodeName.toLowerCase()!==a.toLowerCase()){if(!h&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(h){if(!s[Br])switch(a){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(y=s.getAttribute("rel"),y==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(y!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(y=s.getAttribute("src"),(y!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(a==="input"&&s.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===y)return s}else return s;if(s=Zi(s.nextSibling),s===null)break}return null}function W3(s,a,u){if(a==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=Zi(s.nextSibling),s===null))return null;return s}function eI(s,a){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!a||(s=Zi(s.nextSibling),s===null))return null;return s}function p0(s){return s.data==="$?"||s.data==="$~"}function g0(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function Y3(s,a){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=a;else if(s.data!=="$?"||u.readyState!=="loading")a();else{var h=function(){a(),u.removeEventListener("DOMContentLoaded",h)};u.addEventListener("DOMContentLoaded",h),s._reactRetry=h}}function Zi(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return s}var y0=null;function tI(s){s=s.nextSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(a===0)return Zi(s.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}s=s.nextSibling}return null}function nI(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return s;a--}else u!=="/$"&&u!=="/&"||a++}s=s.previousSibling}return null}function iI(s,a,u){switch(a=Ep(u),s){case"html":if(s=a.documentElement,!s)throw Error(i(452));return s;case"head":if(s=a.head,!s)throw Error(i(453));return s;case"body":if(s=a.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function tf(s){for(var a=s.attributes;a.length;)s.removeAttributeNode(a[0]);Zl(s)}var er=new Map,rI=new Set;function Tp(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ls=ce.d;ce.d={f:Q3,r:X3,D:J3,C:Z3,L:e6,m:t6,X:i6,S:n6,M:r6};function Q3(){var s=Ls.f(),a=fp();return s||a}function X3(s){var a=qi(s);a!==null&&a.tag===5&&a.type==="form"?TC(a):Ls.r(s)}var Ou=typeof document>"u"?null:document;function sI(s,a,u){var h=Ou;if(h&&typeof a=="string"&&a){var p=ci(a);p='link[rel="'+s+'"][href="'+p+'"]',typeof u=="string"&&(p+='[crossorigin="'+u+'"]'),rI.has(p)||(rI.add(p),s={rel:s,crossOrigin:u,href:a},h.querySelector(p)===null&&(a=h.createElement("link"),Bn(a,"link",s),ln(a),h.head.appendChild(a)))}}function J3(s){Ls.D(s),sI("dns-prefetch",s,null)}function Z3(s,a){Ls.C(s,a),sI("preconnect",s,a)}function e6(s,a,u){Ls.L(s,a,u);var h=Ou;if(h&&s&&a){var p='link[rel="preload"][as="'+ci(a)+'"]';a==="image"&&u&&u.imageSrcSet?(p+='[imagesrcset="'+ci(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(p+='[imagesizes="'+ci(u.imageSizes)+'"]')):p+='[href="'+ci(s)+'"]';var y=p;switch(a){case"style":y=Vu(s);break;case"script":y=ku(s)}er.has(y)||(s=_({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:s,as:a},u),er.set(y,s),h.querySelector(p)!==null||a==="style"&&h.querySelector(nf(y))||a==="script"&&h.querySelector(rf(y))||(a=h.createElement("link"),Bn(a,"link",s),ln(a),h.head.appendChild(a)))}}function t6(s,a){Ls.m(s,a);var u=Ou;if(u&&s){var h=a&&typeof a.as=="string"?a.as:"script",p='link[rel="modulepreload"][as="'+ci(h)+'"][href="'+ci(s)+'"]',y=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=ku(s)}if(!er.has(y)&&(s=_({rel:"modulepreload",href:s},a),er.set(y,s),u.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(rf(y)))return}h=u.createElement("link"),Bn(h,"link",s),ln(h),u.head.appendChild(h)}}}function n6(s,a,u){Ls.S(s,a,u);var h=Ou;if(h&&s){var p=zr(h).hoistableStyles,y=Vu(s);a=a||"default";var T=p.get(y);if(!T){var w={loading:0,preload:null};if(T=h.querySelector(nf(y)))w.loading=5;else{s=_({rel:"stylesheet",href:s,"data-precedence":a},u),(u=er.get(y))&&_0(s,u);var F=T=h.createElement("link");ln(F),Bn(F,"link",s),F._p=new Promise(function(X,se){F.onload=X,F.onerror=se}),F.addEventListener("load",function(){w.loading|=1}),F.addEventListener("error",function(){w.loading|=2}),w.loading|=4,Sp(T,a,h)}T={type:"stylesheet",instance:T,count:1,state:w},p.set(y,T)}}}function i6(s,a){Ls.X(s,a);var u=Ou;if(u&&s){var h=zr(u).hoistableScripts,p=ku(s),y=h.get(p);y||(y=u.querySelector(rf(p)),y||(s=_({src:s,async:!0},a),(a=er.get(p))&&v0(s,a),y=u.createElement("script"),ln(y),Bn(y,"link",s),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(p,y))}}function r6(s,a){Ls.M(s,a);var u=Ou;if(u&&s){var h=zr(u).hoistableScripts,p=ku(s),y=h.get(p);y||(y=u.querySelector(rf(p)),y||(s=_({src:s,async:!0,type:"module"},a),(a=er.get(p))&&v0(s,a),y=u.createElement("script"),ln(y),Bn(y,"link",s),u.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},h.set(p,y))}}function oI(s,a,u,h){var p=(p=ke.current)?Tp(p):null;if(!p)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=Vu(u.href),u=zr(p).hoistableStyles,h=u.get(a),h||(h={type:"style",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Vu(u.href);var y=zr(p).hoistableStyles,T=y.get(s);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(s,T),(y=p.querySelector(nf(s)))&&!y._p&&(T.instance=y,T.state.loading=5),er.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},er.set(s,u),y||s6(p,s,u,T.state))),a&&h===null)throw Error(i(528,""));return T}if(a&&h!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=ku(u),u=zr(p).hoistableScripts,h=u.get(a),h||(h={type:"script",instance:null,count:0,state:null},u.set(a,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function Vu(s){return'href="'+ci(s)+'"'}function nf(s){return'link[rel="stylesheet"]['+s+"]"}function aI(s){return _({},s,{"data-precedence":s.precedence,precedence:null})}function s6(s,a,u,h){s.querySelector('link[rel="preload"][as="style"]['+a+"]")?h.loading=1:(a=s.createElement("link"),h.preload=a,a.addEventListener("load",function(){return h.loading|=1}),a.addEventListener("error",function(){return h.loading|=2}),Bn(a,"link",u),ln(a),s.head.appendChild(a))}function ku(s){return'[src="'+ci(s)+'"]'}function rf(s){return"script[async]"+s}function lI(s,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var h=s.querySelector('style[data-href~="'+ci(u.href)+'"]');if(h)return a.instance=h,ln(h),h;var p=_({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return h=(s.ownerDocument||s).createElement("style"),ln(h),Bn(h,"style",p),Sp(h,u.precedence,s),a.instance=h;case"stylesheet":p=Vu(u.href);var y=s.querySelector(nf(p));if(y)return a.state.loading|=4,a.instance=y,ln(y),y;h=aI(u),(p=er.get(p))&&_0(h,p),y=(s.ownerDocument||s).createElement("link"),ln(y);var T=y;return T._p=new Promise(function(w,F){T.onload=w,T.onerror=F}),Bn(y,"link",h),a.state.loading|=4,Sp(y,u.precedence,s),a.instance=y;case"script":return y=ku(u.src),(p=s.querySelector(rf(y)))?(a.instance=p,ln(p),p):(h=u,(p=er.get(y))&&(h=_({},u),v0(h,p)),s=s.ownerDocument||s,p=s.createElement("script"),ln(p),Bn(p,"link",h),s.head.appendChild(p),a.instance=p);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(h=a.instance,a.state.loading|=4,Sp(h,u.precedence,s));return a.instance}function Sp(s,a,u){for(var h=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,y=p,T=0;T<h.length;T++){var w=h[T];if(w.dataset.precedence===a)y=w;else if(y!==p)break}y?y.parentNode.insertBefore(s,y.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(s,a.firstChild))}function _0(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.title==null&&(s.title=a.title)}function v0(s,a){s.crossOrigin==null&&(s.crossOrigin=a.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=a.referrerPolicy),s.integrity==null&&(s.integrity=a.integrity)}var bp=null;function uI(s,a,u){if(bp===null){var h=new Map,p=bp=new Map;p.set(u,h)}else p=bp,h=p.get(u),h||(h=new Map,p.set(u,h));if(h.has(s))return h;for(h.set(s,null),u=u.getElementsByTagName(s),p=0;p<u.length;p++){var y=u[p];if(!(y[Br]||y[an]||s==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var T=y.getAttribute(a)||"";T=s+T;var w=h.get(T);w?w.push(y):h.set(T,[y])}}return h}function cI(s,a,u){s=s.ownerDocument||s,s.head.insertBefore(u,a==="title"?s.querySelector("head > title"):null)}function o6(s,a,u){if(u===1||a.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return s=a.disabled,typeof a.precedence=="string"&&s==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function hI(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function a6(s,a,u,h){if(u.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var p=Vu(h.href),y=a.querySelector(nf(p));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(s.count++,s=wp.bind(s),a.then(s,s)),u.state.loading|=4,u.instance=y,ln(y);return}y=a.ownerDocument||a,h=aI(h),(p=er.get(p))&&_0(h,p),y=y.createElement("link"),ln(y);var T=y;T._p=new Promise(function(w,F){T.onload=w,T.onerror=F}),Bn(y,"link",h),u.instance=y}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=wp.bind(s),a.addEventListener("load",u),a.addEventListener("error",u))}}var E0=0;function l6(s,a){return s.stylesheets&&s.count===0&&Ap(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var h=setTimeout(function(){if(s.stylesheets&&Ap(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4+a);0<s.imgBytes&&E0===0&&(E0=62500*z3());var p=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Ap(s,s.stylesheets),s.unsuspend)){var y=s.unsuspend;s.unsuspend=null,y()}},(s.imgBytes>E0?50:800)+a);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(h),clearTimeout(p)}}:null}function wp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ap(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Cp=null;function Ap(s,a){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Cp=new Map,a.forEach(u6,s),Cp=null,wp.call(s))}function u6(s,a){if(!(a.state.loading&4)){var u=Cp.get(s);if(u)var h=u.get(null);else{u=new Map,Cp.set(s,u);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var T=p[y];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(u.set(T.dataset.precedence,T),h=T)}h&&u.set(null,h)}p=a.instance,T=p.getAttribute("data-precedence"),y=u.get(T)||h,y===h&&u.set(null,p),u.set(T,p),this.count++,h=wp.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),y?y.parentNode.insertBefore(p,y.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),a.state.loading|=4}}var sf={$$typeof:k,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function c6(s,a,u,h,p,y,T,w,F){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function fI(s,a,u,h,p,y,T,w,F,X,se,ue){return s=new c6(s,a,u,T,F,X,se,ue,w),a=1,y===!0&&(a|=24),y=Di(3,null,null,a),s.current=y,y.stateNode=s,a=Z_(),a.refCount++,s.pooledCache=a,a.refCount++,y.memoizedState={element:h,isDehydrated:u,cache:a},iv(y),s}function dI(s){return s?(s=du,s):du}function mI(s,a,u,h,p,y){p=dI(p),h.context===null?h.context=p:h.pendingContext=p,h=Ro(a),h.payload={element:u},y=y===void 0?null:y,y!==null&&(h.callback=y),u=xo(s,h,a),u!==null&&(gi(u,s,a),kh(u,s,a))}function pI(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function T0(s,a){pI(s,a),(s=s.alternate)&&pI(s,a)}function gI(s){if(s.tag===13||s.tag===31){var a=ja(s,67108864);a!==null&&gi(a,s,67108864),T0(s,67108864)}}function yI(s){if(s.tag===13||s.tag===31){var a=Vi();a=xa(a);var u=ja(s,a);u!==null&&gi(u,s,a),T0(s,a)}}var Ip=!0;function h6(s,a,u,h){var p=ee.T;ee.T=null;var y=ce.p;try{ce.p=2,S0(s,a,u,h)}finally{ce.p=y,ee.T=p}}function f6(s,a,u,h){var p=ee.T;ee.T=null;var y=ce.p;try{ce.p=8,S0(s,a,u,h)}finally{ce.p=y,ee.T=p}}function S0(s,a,u,h){if(Ip){var p=b0(h);if(p===null)l0(s,a,h,Rp,u),vI(s,h);else if(m6(p,s,a,u,h))h.stopPropagation();else if(vI(s,h),a&4&&-1<d6.indexOf(s)){for(;p!==null;){var y=qi(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var T=kr(y.pendingLanes);if(T!==0){var w=y;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var F=1<<31-Lt(T);w.entanglements[1]|=F,T&=~F}ts(y),(dt&6)===0&&(cp=he()+500,Jh(0))}}break;case 31:case 13:w=ja(y,2),w!==null&&gi(w,y,2),fp(),T0(y,2)}if(y=b0(h),y===null&&l0(s,a,h,Rp,u),y===p)break;p=y}p!==null&&h.stopPropagation()}else l0(s,a,h,null,u)}}function b0(s){return s=Hi(s),w0(s)}var Rp=null;function w0(s){if(Rp=null,s=jr(s),s!==null){var a=o(s);if(a===null)s=null;else{var u=a.tag;if(u===13){if(s=l(a),s!==null)return s;s=null}else if(u===31){if(s=c(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null)}}return Rp=s,null}function _I(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fe()){case me:return 2;case He:return 8;case Xe:case Kn:return 32;case ys:return 268435456;default:return 32}default:return 32}}var C0=!1,Bo=null,jo=null,zo=null,of=new Map,af=new Map,qo=[],d6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vI(s,a){switch(s){case"focusin":case"focusout":Bo=null;break;case"dragenter":case"dragleave":jo=null;break;case"mouseover":case"mouseout":zo=null;break;case"pointerover":case"pointerout":of.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":af.delete(a.pointerId)}}function lf(s,a,u,h,p,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:u,eventSystemFlags:h,nativeEvent:y,targetContainers:[p]},a!==null&&(a=qi(a),a!==null&&gI(a)),s):(s.eventSystemFlags|=h,a=s.targetContainers,p!==null&&a.indexOf(p)===-1&&a.push(p),s)}function m6(s,a,u,h,p){switch(a){case"focusin":return Bo=lf(Bo,s,a,u,h,p),!0;case"dragenter":return jo=lf(jo,s,a,u,h,p),!0;case"mouseover":return zo=lf(zo,s,a,u,h,p),!0;case"pointerover":var y=p.pointerId;return of.set(y,lf(of.get(y)||null,s,a,u,h,p)),!0;case"gotpointercapture":return y=p.pointerId,af.set(y,lf(af.get(y)||null,s,a,u,h,p)),!0}return!1}function EI(s){var a=jr(s.target);if(a!==null){var u=o(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){s.blockedOn=a,fr(s.priority,function(){yI(u)});return}}else if(a===31){if(a=c(u),a!==null){s.blockedOn=a,fr(s.priority,function(){yI(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function xp(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=b0(s.nativeEvent);if(u===null){u=s.nativeEvent;var h=new u.constructor(u.type,u);Eh=h,u.target.dispatchEvent(h),Eh=null}else return a=qi(u),a!==null&&gI(a),s.blockedOn=u,!1;a.shift()}return!0}function TI(s,a,u){xp(s)&&u.delete(a)}function p6(){C0=!1,Bo!==null&&xp(Bo)&&(Bo=null),jo!==null&&xp(jo)&&(jo=null),zo!==null&&xp(zo)&&(zo=null),of.forEach(TI),af.forEach(TI)}function Dp(s,a){s.blockedOn===a&&(s.blockedOn=null,C0||(C0=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,p6)))}var Np=null;function SI(s){Np!==s&&(Np=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Np===s&&(Np=null);for(var a=0;a<s.length;a+=3){var u=s[a],h=s[a+1],p=s[a+2];if(typeof h!="function"){if(w0(h||u)===null)continue;break}var y=qi(u);y!==null&&(s.splice(a,3),a-=3,bv(y,{pending:!0,data:p,method:u.method,action:h},h,p))}}))}function Lu(s){function a(F){return Dp(F,s)}Bo!==null&&Dp(Bo,s),jo!==null&&Dp(jo,s),zo!==null&&Dp(zo,s),of.forEach(a),af.forEach(a);for(var u=0;u<qo.length;u++){var h=qo[u];h.blockedOn===s&&(h.blockedOn=null)}for(;0<qo.length&&(u=qo[0],u.blockedOn===null);)EI(u),u.blockedOn===null&&qo.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(h=0;h<u.length;h+=3){var p=u[h],y=u[h+1],T=p[Rn]||null;if(typeof y=="function")T||SI(u);else if(T){var w=null;if(y&&y.hasAttribute("formAction")){if(p=y,T=y[Rn]||null)w=T.formAction;else if(w0(p)!==null)continue}else w=T.action;typeof w=="function"?u[h+1]=w:(u.splice(h,3),h-=3),SI(u)}}}function bI(){function s(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(T){return p=T})},focusReset:"manual",scroll:"manual"})}function a(){p!==null&&(p(),p=null),h||setTimeout(u,20)}function u(){if(!h&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,p=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){h=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),p!==null&&(p(),p=null)}}}function A0(s){this._internalRoot=s}Mp.prototype.render=A0.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,h=Vi();mI(u,h,s,a,null,null)},Mp.prototype.unmount=A0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;mI(s.current,2,null,s,null,null),fp(),a[Fr]=null}};function Mp(s){this._internalRoot=s}Mp.prototype.unstable_scheduleHydration=function(s){if(s){var a=fm();s={blockedOn:null,target:s,priority:a};for(var u=0;u<qo.length&&a!==0&&a<qo[u].priority;u++);qo.splice(u,0,s),u===0&&EI(s)}};var wI=e.version;if(wI!=="19.2.0")throw Error(i(527,wI,"19.2.0"));ce.findDOMNode=function(s){var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(a),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var g6={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pp.isDisabled&&Pp.supportsFiber)try{Zn=Pp.inject(g6),Xt=Pp}catch{}}return cf.createRoot=function(s,a){if(!r(s))throw Error(i(299));var u=!1,h="",p=NC,y=MC,T=PC;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(y=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=fI(s,1,!1,null,null,u,h,null,p,y,T,bI),s[Fr]=a.current,a0(s),new A0(a)},cf.hydrateRoot=function(s,a,u){if(!r(s))throw Error(i(299));var h=!1,p="",y=NC,T=MC,w=PC,F=null;return u!=null&&(u.unstable_strictMode===!0&&(h=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(y=u.onUncaughtError),u.onCaughtError!==void 0&&(T=u.onCaughtError),u.onRecoverableError!==void 0&&(w=u.onRecoverableError),u.formState!==void 0&&(F=u.formState)),a=fI(s,1,!0,a,u??null,h,p,F,y,T,w,bI),a.context=dI(null),u=a.current,h=Vi(),h=xa(h),p=Ro(h),p.callback=null,xo(u,p,h),u=h,a.current.lanes=u,Ia(a,u),ts(a),s[Fr]=a.current,a0(s),new Mp(a)},cf.version="19.2.0",cf}var OI;function C6(){if(OI)return x0.exports;OI=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),x0.exports=w6(),x0.exports}var A6=C6();const I6=Ld(A6);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var VI="popstate";function R6(n={}){function e(r,o){let{pathname:l="/",search:c="",hash:f=""}=Gc(r.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),OE("",{pathname:l,search:c,hash:f},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){let l=r.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let f=r.location.href,d=f.indexOf("#");c=d===-1?f:f.slice(0,d)}return c+"#"+(typeof o=="string"?o:nd(o))}function i(r,o){cr(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return D6(e,t,i,n)}function vn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function cr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function x6(){return Math.random().toString(36).substring(2,10)}function kI(n,e){return{usr:n.state,key:n.key,idx:e}}function OE(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Gc(e):e,state:t,key:e&&e.key||i||x6()}}function nd({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Gc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function D6(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:o=!1}=i,l=r.history,c="POP",f=null,d=g();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function g(){return(l.state||{idx:null}).idx}function _(){c="POP";let N=g(),B=N==null?null:N-d;d=N,f&&f({action:c,location:D.location,delta:B})}function v(N,B){c="PUSH";let V=OE(D.location,N,B);t&&t(V,N),d=g()+1;let k=kI(V,d),Z=D.createHref(V);try{l.pushState(k,"",Z)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;r.location.assign(Z)}o&&f&&f({action:c,location:D.location,delta:1})}function b(N,B){c="REPLACE";let V=OE(D.location,N,B);t&&t(V,N),d=g();let k=kI(V,d),Z=D.createHref(V);l.replaceState(k,"",Z),o&&f&&f({action:c,location:D.location,delta:0})}function C(N){return N6(N)}let D={get action(){return c},get location(){return n(r,l)},listen(N){if(f)throw new Error("A history only accepts one active listener");return r.addEventListener(VI,_),f=N,()=>{r.removeEventListener(VI,_),f=null}},createHref(N){return e(r,N)},createURL:C,encodeLocation(N){let B=C(N);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:v,replace:b,go(N){return l.go(N)}};return D}function N6(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),vn(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:nd(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function CN(n,e,t="/"){return M6(n,e,t,!1)}function M6(n,e,t,i){let r=typeof e=="string"?Gc(e):e,o=Qs(r.pathname||"/",t);if(o==null)return null;let l=AN(n);P6(l);let c=null;for(let f=0;c==null&&f<l.length;++f){let d=H6(o);c=z6(l[f],d,i)}return c}function AN(n,e=[],t=[],i="",r=!1){let o=(l,c,f=r,d)=>{let g={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&f)return;vn(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let _=Gs([i,g.relativePath]),v=t.concat(g);l.children&&l.children.length>0&&(vn(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),AN(l.children,e,v,_,f)),!(l.path==null&&!l.index)&&e.push({path:_,score:B6(_,l.index),routesMeta:v})};return n.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))o(l,c);else for(let f of IN(l.path))o(l,c,!0,f)}),e}function IN(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let l=IN(i.join("/")),c=[];return c.push(...l.map(f=>f===""?o:[o,f].join("/"))),r&&c.push(...l),c.map(f=>n.startsWith("/")&&f===""?"/":f)}function P6(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:j6(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var O6=/^:[\w-]+$/,V6=3,k6=2,L6=1,U6=10,F6=-2,LI=n=>n==="*";function B6(n,e){let t=n.split("/"),i=t.length;return t.some(LI)&&(i+=F6),e&&(i+=k6),t.filter(r=>!LI(r)).reduce((r,o)=>r+(O6.test(o)?V6:o===""?L6:U6),i)}function j6(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function z6(n,e,t=!1){let{routesMeta:i}=n,r={},o="/",l=[];for(let c=0;c<i.length;++c){let f=i[c],d=c===i.length-1,g=o==="/"?e:e.slice(o.length)||"/",_=Ag({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},g),v=f.route;if(!_&&d&&t&&!i[i.length-1].route.index&&(_=Ag({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!_)return null;Object.assign(r,_.params),l.push({params:r,pathname:Gs([o,_.pathname]),pathnameBase:W6(Gs([o,_.pathnameBase])),route:v}),_.pathnameBase!=="/"&&(o=Gs([o,_.pathnameBase]))}return l}function Ag(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=q6(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let o=r[0],l=o.replace(/(.)\/+$/,"$1"),c=r.slice(1);return{params:i.reduce((d,{paramName:g,isOptional:_},v)=>{if(g==="*"){let C=c[v]||"";l=o.slice(0,o.length-C.length).replace(/(.)\/+$/,"$1")}const b=c[v];return _&&!b?d[g]=void 0:d[g]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:l,pattern:n}}function q6(n,e=!1,t=!0){cr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,f)=>(i.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function H6(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Qs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function G6(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Gc(n):n;return{pathname:t?t.startsWith("/")?t:K6(t,e):e,search:Y6(i),hash:Q6(r)}}function K6(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function P0(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $6(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cS(n){let e=$6(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function hS(n,e,t,i=!1){let r;typeof n=="string"?r=Gc(n):(r={...n},vn(!r.pathname||!r.pathname.includes("?"),P0("?","pathname","search",r)),vn(!r.pathname||!r.pathname.includes("#"),P0("#","pathname","hash",r)),vn(!r.search||!r.search.includes("#"),P0("#","search","hash",r)));let o=n===""||r.pathname==="",l=o?"/":r.pathname,c;if(l==null)c=t;else{let _=e.length-1;if(!i&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),_-=1;r.pathname=v.join("/")}c=_>=0?e[_]:"/"}let f=G6(r,c),d=l&&l!=="/"&&l.endsWith("/"),g=(o||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(d||g)&&(f.pathname+="/"),f}var Gs=n=>n.join("/").replace(/\/\/+/g,"/"),W6=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Y6=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Q6=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function X6(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var RN=["POST","PUT","PATCH","DELETE"];new Set(RN);var J6=["GET",...RN];new Set(J6);var Kc=I.createContext(null);Kc.displayName="DataRouter";var Oy=I.createContext(null);Oy.displayName="DataRouterState";I.createContext(!1);var xN=I.createContext({isTransitioning:!1});xN.displayName="ViewTransition";var Z6=I.createContext(new Map);Z6.displayName="Fetchers";var e5=I.createContext(null);e5.displayName="Await";var Pr=I.createContext(null);Pr.displayName="Navigation";var Vy=I.createContext(null);Vy.displayName="Location";var Or=I.createContext({outlet:null,matches:[],isDataRoute:!1});Or.displayName="Route";var fS=I.createContext(null);fS.displayName="RouteError";function t5(n,{relative:e}={}){vn($c(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=I.useContext(Pr),{hash:r,pathname:o,search:l}=Ud(n,{relative:e}),c=o;return t!=="/"&&(c=o==="/"?t:Gs([t,o])),i.createHref({pathname:c,search:l,hash:r})}function $c(){return I.useContext(Vy)!=null}function lo(){return vn($c(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Vy).location}var DN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function NN(n){I.useContext(Pr).static||I.useLayoutEffect(n)}function MN(){let{isDataRoute:n}=I.useContext(Or);return n?g5():n5()}function n5(){vn($c(),"useNavigate() may be used only in the context of a <Router> component.");let n=I.useContext(Kc),{basename:e,navigator:t}=I.useContext(Pr),{matches:i}=I.useContext(Or),{pathname:r}=lo(),o=JSON.stringify(cS(i)),l=I.useRef(!1);return NN(()=>{l.current=!0}),I.useCallback((f,d={})=>{if(cr(l.current,DN),!l.current)return;if(typeof f=="number"){t.go(f);return}let g=hS(f,JSON.parse(o),r,d.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Gs([e,g.pathname])),(d.replace?t.replace:t.push)(g,d.state,d)},[e,t,o,r,n])}var i5=I.createContext(null);function r5(n){let e=I.useContext(Or).outlet;return I.useMemo(()=>e&&I.createElement(i5.Provider,{value:n},e),[e,n])}function Ud(n,{relative:e}={}){let{matches:t}=I.useContext(Or),{pathname:i}=lo(),r=JSON.stringify(cS(t));return I.useMemo(()=>hS(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function s5(n,e){return PN(n)}function PN(n,e,t,i,r){vn($c(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=I.useContext(Pr),{matches:l}=I.useContext(Or),c=l[l.length-1],f=c?c.params:{},d=c?c.pathname:"/",g=c?c.pathnameBase:"/",_=c&&c.route;{let V=_&&_.path||"";ON(d,!_||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let v=lo(),b;b=v;let C=b.pathname||"/",D=C;if(g!=="/"){let V=g.replace(/^\//,"").split("/");D="/"+C.replace(/^\//,"").split("/").slice(V.length).join("/")}let N=CN(n,{pathname:D});return cr(_||N!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),cr(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),c5(N&&N.map(V=>Object.assign({},V,{params:Object.assign({},f,V.params),pathname:Gs([g,o.encodeLocation?o.encodeLocation(V.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?g:Gs([g,o.encodeLocation?o.encodeLocation(V.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:V.pathnameBase])})),l,t,i,r)}function o5(){let n=p5(),e=X6(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=I.createElement(I.Fragment,null,I.createElement("p",null,"💿 Hey developer 👋"),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:o},"ErrorBoundary")," or"," ",I.createElement("code",{style:o},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:r},t):null,l)}var a5=I.createElement(o5,null),l5=class extends I.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?I.createElement(Or.Provider,{value:this.props.routeContext},I.createElement(fS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function u5({routeContext:n,match:e,children:t}){let i=I.useContext(Kc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),I.createElement(Or.Provider,{value:n},t)}function c5(n,e=[],t=null,i=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t?.errors;if(l!=null){let d=o.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);vn(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,f=-1;if(t)for(let d=0;d<o.length;d++){let g=o[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=d),g.route.id){let{loaderData:_,errors:v}=t,b=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||b){c=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((d,g,_)=>{let v,b=!1,C=null,D=null;t&&(v=l&&g.route.id?l[g.route.id]:void 0,C=g.route.errorElement||a5,c&&(f<0&&_===0?(ON("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,D=null):f===_&&(b=!0,D=g.route.hydrateFallbackElement||null)));let N=e.concat(o.slice(0,_+1)),B=()=>{let V;return v?V=C:b?V=D:g.route.Component?V=I.createElement(g.route.Component,null):g.route.element?V=g.route.element:V=d,I.createElement(u5,{match:g,routeContext:{outlet:d,matches:N,isDataRoute:t!=null},children:V})};return t&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?I.createElement(l5,{location:t.location,revalidation:t.revalidation,component:C,error:v,children:B(),routeContext:{outlet:null,matches:N,isDataRoute:!0},unstable_onError:i}):B()},null)}function dS(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h5(n){let e=I.useContext(Kc);return vn(e,dS(n)),e}function f5(n){let e=I.useContext(Oy);return vn(e,dS(n)),e}function d5(n){let e=I.useContext(Or);return vn(e,dS(n)),e}function mS(n){let e=d5(n),t=e.matches[e.matches.length-1];return vn(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function m5(){return mS("useRouteId")}function p5(){let n=I.useContext(fS),e=f5("useRouteError"),t=mS("useRouteError");return n!==void 0?n:e.errors?.[t]}function g5(){let{router:n}=h5("useNavigate"),e=mS("useNavigate"),t=I.useRef(!1);return NN(()=>{t.current=!0}),I.useCallback(async(r,o={})=>{cr(t.current,DN),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...o}))},[n,e])}var UI={};function ON(n,e,t){!e&&!UI[n]&&(UI[n]=!0,cr(!1,t))}I.memo(y5);function y5({routes:n,future:e,state:t,unstable_onError:i}){return PN(n,void 0,t,i,e)}function FI({to:n,replace:e,state:t,relative:i}){vn($c(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=I.useContext(Pr);cr(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=I.useContext(Or),{pathname:l}=lo(),c=MN(),f=hS(n,cS(o),l,i==="path"),d=JSON.stringify(f);return I.useEffect(()=>{c(JSON.parse(d),{replace:e,state:t,relative:i})},[c,d,i,e,t]),null}function _5(n){return r5(n.context)}function v5({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:o=!1}){vn(!$c(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:l,navigator:r,static:o,future:{}}),[l,r,o]);typeof t=="string"&&(t=Gc(t));let{pathname:f="/",search:d="",hash:g="",state:_=null,key:v="default"}=t,b=I.useMemo(()=>{let C=Qs(f,l);return C==null?null:{location:{pathname:C,search:d,hash:g,state:_,key:v},navigationType:i}},[l,f,d,g,_,v,i]);return cr(b!=null,`<Router basename="${l}"> is not able to match the URL "${f}${d}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:I.createElement(Pr.Provider,{value:c},I.createElement(Vy.Provider,{children:e,value:b}))}var ng="get",ig="application/x-www-form-urlencoded";function ky(n){return n!=null&&typeof n.tagName=="string"}function E5(n){return ky(n)&&n.tagName.toLowerCase()==="button"}function T5(n){return ky(n)&&n.tagName.toLowerCase()==="form"}function S5(n){return ky(n)&&n.tagName.toLowerCase()==="input"}function b5(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function w5(n,e){return n.button===0&&(!e||e==="_self")&&!b5(n)}var Op=null;function C5(){if(Op===null)try{new FormData(document.createElement("form"),0),Op=!1}catch{Op=!0}return Op}var A5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function O0(n){return n!=null&&!A5.has(n)?(cr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ig}"`),null):n}function I5(n,e){let t,i,r,o,l;if(T5(n)){let c=n.getAttribute("action");i=c?Qs(c,e):null,t=n.getAttribute("method")||ng,r=O0(n.getAttribute("enctype"))||ig,o=new FormData(n)}else if(E5(n)||S5(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||c.getAttribute("action");if(i=f?Qs(f,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||ng,r=O0(n.getAttribute("formenctype"))||O0(c.getAttribute("enctype"))||ig,o=new FormData(c,n),!C5()){let{name:d,type:g,value:_}=n;if(g==="image"){let v=d?`${d}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else d&&o.append(d,_)}}else{if(ky(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ng,i=null,r=ig,l=n}return o&&r==="text/plain"&&(l=o,o=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function pS(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function R5(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Qs(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function x5(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function D5(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function N5(n,e,t){let i=await Promise.all(n.map(async r=>{let o=e.routes[r.route.id];if(o){let l=await x5(o,t);return l.links?l.links():[]}return[]}));return V5(i.flat(1).filter(D5).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function BI(n,e,t,i,r,o){let l=(f,d)=>t[d]?f.route.id!==t[d].route.id:!0,c=(f,d)=>t[d].pathname!==f.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==f.params["*"];return o==="assets"?e.filter((f,d)=>l(f,d)||c(f,d)):o==="data"?e.filter((f,d)=>{let g=i.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(l(f,d)||c(f,d))return!0;if(f.route.shouldRevalidate){let _=f.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function M5(n,e,{includeHydrateFallback:t}={}){return P5(n.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function P5(n){return[...new Set(n)]}function O5(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function V5(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let o=JSON.stringify(O5(r));return t.has(o)||(t.add(o),i.push({key:o,link:r})),i},[])}function VN(){let n=I.useContext(Kc);return pS(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function k5(){let n=I.useContext(Oy);return pS(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var gS=I.createContext(void 0);gS.displayName="FrameworkContext";function kN(){let n=I.useContext(gS);return pS(n,"You must render this element inside a <HydratedRouter> element"),n}function L5(n,e){let t=I.useContext(gS),[i,r]=I.useState(!1),[o,l]=I.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:d,onMouseLeave:g,onTouchStart:_}=e,v=I.useRef(null);I.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let D=B=>{B.forEach(V=>{l(V.isIntersecting)})},N=new IntersectionObserver(D,{threshold:.5});return v.current&&N.observe(v.current),()=>{N.disconnect()}}},[n]),I.useEffect(()=>{if(i){let D=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(D)}}},[i]);let b=()=>{r(!0)},C=()=>{r(!1),l(!1)};return t?n!=="intent"?[o,v,{}]:[o,v,{onFocus:hf(c,b),onBlur:hf(f,C),onMouseEnter:hf(d,b),onMouseLeave:hf(g,C),onTouchStart:hf(_,b)}]:[!1,v,{}]}function hf(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function U5({page:n,...e}){let{router:t}=VN(),i=I.useMemo(()=>CN(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?I.createElement(B5,{page:n,matches:i,...e}):null}function F5(n){let{manifest:e,routeModules:t}=kN(),[i,r]=I.useState([]);return I.useEffect(()=>{let o=!1;return N5(n,e,t).then(l=>{o||r(l)}),()=>{o=!0}},[n,e,t]),i}function B5({page:n,matches:e,...t}){let i=lo(),{manifest:r,routeModules:o}=kN(),{basename:l}=VN(),{loaderData:c,matches:f}=k5(),d=I.useMemo(()=>BI(n,e,f,r,i,"data"),[n,e,f,r,i]),g=I.useMemo(()=>BI(n,e,f,r,i,"assets"),[n,e,f,r,i]),_=I.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let C=new Set,D=!1;if(e.forEach(B=>{let V=r.routes[B.route.id];!V||!V.hasLoader||(!d.some(k=>k.route.id===B.route.id)&&B.route.id in c&&o[B.route.id]?.shouldRevalidate||V.hasClientLoader?D=!0:C.add(B.route.id))}),C.size===0)return[];let N=R5(n,l,"data");return D&&C.size>0&&N.searchParams.set("_routes",e.filter(B=>C.has(B.route.id)).map(B=>B.route.id).join(",")),[N.pathname+N.search]},[l,c,i,r,d,e,n,o]),v=I.useMemo(()=>M5(g,r),[g,r]),b=F5(g);return I.createElement(I.Fragment,null,_.map(C=>I.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),v.map(C=>I.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),b.map(({key:C,link:D})=>I.createElement("link",{key:C,nonce:t.nonce,...D})))}function j5(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var LN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LN&&(window.__reactRouterVersion="7.9.4")}catch{}function z5({basename:n,children:e,window:t}){let i=I.useRef();i.current==null&&(i.current=R6({window:t,v5Compat:!0}));let r=i.current,[o,l]=I.useState({action:r.action,location:r.location}),c=I.useCallback(f=>{I.startTransition(()=>l(f))},[l]);return I.useLayoutEffect(()=>r.listen(c),[r,c]),I.createElement(v5,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:r})}var UN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yS=I.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:o,replace:l,state:c,target:f,to:d,preventScrollReset:g,viewTransition:_,...v},b){let{basename:C}=I.useContext(Pr),D=typeof d=="string"&&UN.test(d),N,B=!1;if(typeof d=="string"&&D&&(N=d,LN))try{let M=new URL(window.location.href),j=d.startsWith("//")?new URL(M.protocol+d):new URL(d),U=Qs(j.pathname,C);j.origin===M.origin&&U!=null?d=U+j.search+j.hash:B=!0}catch{cr(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=t5(d,{relative:r}),[k,Z,K]=L5(i,v),ie=G5(d,{replace:l,state:c,target:f,preventScrollReset:g,relative:r,viewTransition:_});function R(M){e&&e(M),M.defaultPrevented||ie(M)}let A=I.createElement("a",{...v,...K,href:N||V,onClick:B||o?e:R,ref:j5(b,Z),target:f,"data-discover":!D&&t==="render"?"true":void 0});return k&&!D?I.createElement(I.Fragment,null,A,I.createElement(U5,{page:V})):A});yS.displayName="Link";var Yu=I.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:o,to:l,viewTransition:c,children:f,...d},g){let _=Ud(l,{relative:d.relative}),v=lo(),b=I.useContext(Oy),{navigator:C,basename:D}=I.useContext(Pr),N=b!=null&&Q5(_)&&c===!0,B=C.encodeLocation?C.encodeLocation(_).pathname:_.pathname,V=v.pathname,k=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(V=V.toLowerCase(),k=k?k.toLowerCase():null,B=B.toLowerCase()),k&&D&&(k=Qs(k,D)||k);const Z=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let K=V===B||!r&&V.startsWith(B)&&V.charAt(Z)==="/",ie=k!=null&&(k===B||!r&&k.startsWith(B)&&k.charAt(B.length)==="/"),R={isActive:K,isPending:ie,isTransitioning:N},A=K?e:void 0,M;typeof i=="function"?M=i(R):M=[i,K?"active":null,ie?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let j=typeof o=="function"?o(R):o;return I.createElement(yS,{...d,"aria-current":A,className:M,ref:g,style:j,to:l,viewTransition:c},typeof f=="function"?f(R):f)});Yu.displayName="NavLink";var q5=I.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:o,method:l=ng,action:c,onSubmit:f,relative:d,preventScrollReset:g,viewTransition:_,...v},b)=>{let C=W5(),D=Y5(c,{relative:d}),N=l.toLowerCase()==="get"?"get":"post",B=typeof c=="string"&&UN.test(c),V=k=>{if(f&&f(k),k.defaultPrevented)return;k.preventDefault();let Z=k.nativeEvent.submitter,K=Z?.getAttribute("formmethod")||l;C(Z||k.currentTarget,{fetcherKey:e,method:K,navigate:t,replace:r,state:o,relative:d,preventScrollReset:g,viewTransition:_})};return I.createElement("form",{ref:b,method:N,action:D,onSubmit:i?f:V,...v,"data-discover":!B&&n==="render"?"true":void 0})});q5.displayName="Form";function H5(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FN(n){let e=I.useContext(Kc);return vn(e,H5(n)),e}function G5(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:o,viewTransition:l}={}){let c=MN(),f=lo(),d=Ud(n,{relative:o});return I.useCallback(g=>{if(w5(g,e)){g.preventDefault();let _=t!==void 0?t:nd(f)===nd(d);c(n,{replace:_,state:i,preventScrollReset:r,relative:o,viewTransition:l})}},[f,c,d,t,i,e,n,r,o,l])}var K5=0,$5=()=>`__${String(++K5)}__`;function W5(){let{router:n}=FN("useSubmit"),{basename:e}=I.useContext(Pr),t=m5();return I.useCallback(async(i,r={})=>{let{action:o,method:l,encType:c,formData:f,body:d}=I5(i,e);if(r.navigate===!1){let g=r.fetcherKey||$5();await n.fetch(g,t,r.action||o,{preventScrollReset:r.preventScrollReset,formData:f,body:d,formMethod:r.method||l,formEncType:r.encType||c,flushSync:r.flushSync})}else await n.navigate(r.action||o,{preventScrollReset:r.preventScrollReset,formData:f,body:d,formMethod:r.method||l,formEncType:r.encType||c,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function Y5(n,{relative:e}={}){let{basename:t}=I.useContext(Pr),i=I.useContext(Or);vn(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),o={...Ud(n||".",{relative:e})},l=lo();if(n==null){o.search=l.search;let c=new URLSearchParams(o.search),f=c.getAll("index");if(f.some(g=>g==="")){c.delete("index"),f.filter(_=>_).forEach(_=>c.append("index",_));let g=c.toString();o.search=g?`?${g}`:""}}return(!n||n===".")&&r.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Gs([t,o.pathname])),nd(o)}function Q5(n,{relative:e}={}){let t=I.useContext(xN);vn(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=FN("useViewTransitionState"),r=Ud(n,{relative:e});if(!t.isTransitioning)return!1;let o=Qs(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=Qs(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Ag(r.pathname,l)!=null||Ag(r.pathname,o)!=null}var X5=wN();const nc=Ld(X5),J5=()=>O.jsx("div",{children:"Groups"}),Z5=()=>O.jsx("div",{children:"Users"}),e9=()=>O.jsx("div",{children:"Settings"}),t9=()=>O.jsx("div",{children:O.jsx("h3",{children:"Error404"})}),n9="_header_19c6z_1",i9="_header__container_19c6z_19",r9="_logo_19c6z_35",s9="_left_container_19c6z_47",o9="_left_19c6z_47",a9="_center_19c6z_79",l9="_search__input_19c6z_89",u9="_right_19c6z_123",c9="_data_container_allDate_19c6z_141",h9="_clockIcon_19c6z_153",Sr={header:n9,header__container:i9,logo:r9,left_container:s9,left:o9,center:a9,search__input:l9,right:u9,data_container_allDate:c9,clockIcon:h9},f9="/testObject/assets/logo-CDE6t0y_.png",d9="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%2020010904//EN'%20'http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd'%3e%3csvg%20version='1.0'%20xmlns='http://www.w3.org/2000/svg'%20width='512.000000pt'%20height='512.000000pt'%20viewBox='0%200%20512.000000%20512.000000'%20preserveAspectRatio='xMidYMid%20meet'%3e%3cmetadata%3e%20Created%20by%20potrace%201.16,%20written%20by%20Peter%20Selinger%202001-2019%20%3c/metadata%3e%3cg%20transform='translate(0.000000,512.000000)%20scale(0.100000,-0.100000)'%20fill='%2345897d'%20stroke='none'%3e%3cpath%20d='M2240%205105%20c-444%20-55%20-852%20-220%20-1220%20-493%20-150%20-112%20-400%20-362%20-512%20-512%20-276%20-372%20-439%20-779%20-494%20-1230%20-17%20-148%20-17%20-472%200%20-620%2055%20-451%20218%20-858%20494%20-1230%20112%20-150%20362%20-400%20512%20-512%20372%20-276%20779%20-439%201230%20-494%20148%20-17%20472%20-17%20620%200%20451%2055%20858%20218%201230%20494%20150%20112%20400%20362%20512%20512%20276%20372%20439%20779%20494%201230%2017%20148%2017%20472%200%20620%20-55%20451%20-218%20858%20-494%201230%20-112%20150%20-362%20400%20-512%20512%20-372%20276%20-779%20439%20-1230%20494%20-143%2017%20-488%2016%20-630%20-1z%20m610%20-159%20c792%20-99%201487%20-585%201848%20-1292%20182%20-358%20262%20-692%20262%20-1094%200%20-402%20-80%20-736%20-262%20-1094%20-328%20-643%20-946%20-1114%20-1657%20-1262%20-286%20-59%20-676%20-59%20-962%200%20-710%20148%20-1329%20619%20-1656%201261%20-183%20359%20-263%20692%20-263%201095%200%20318%2052%20598%20161%20872%20331%20832%201078%201408%201964%201517%20116%2014%20441%2012%20565%20-3z'/%3e%3cpath%20d='M2240%204801%20c-418%20-63%20-812%20-236%20-1117%20-491%20-68%20-56%20-73%20-63%20-73%20-100%200%20-50%2027%20-80%2073%20-80%2026%200%2052%2015%20118%2067%20249%20197%20537%20338%20836%20409%20324%2077%20699%2073%201017%20-11%20720%20-189%201312%20-781%201501%20-1501%2087%20-332%2087%20-736%200%20-1068%20-189%20-720%20-781%20-1312%20-1501%20-1501%20-332%20-87%20-736%20-87%20-1068%200%20-720%20189%20-1312%20781%20-1501%201501%20-84%20318%20-88%20693%20-11%201017%2071%20299%20212%20587%20409%20836%2052%2066%2067%2092%2067%20118%200%2046%20-30%2073%20-80%2073%20-37%200%20-44%20-5%20-100%20-72%20-261%20-313%20-436%20-719%20-494%20-1146%20-21%20-146%20-21%20-435%20-1%20-589%20132%20-1013%20935%20-1816%201948%20-1948%20153%20-20%20441%20-20%20594%200%201013%20132%201816%20935%201948%201948%2020%20153%2020%20441%200%20594%20-132%201013%20-935%201816%20-1948%201948%20-161%2021%20-466%2019%20-617%20-4z'/%3e%3cpath%20d='M2501%204494%20c-12%20-15%20-21%20-37%20-21%20-49%200%20-12%209%20-34%2021%20-49%2016%20-20%2029%20-26%2059%20-26%2030%200%2043%206%2059%2026%2012%2015%2021%2037%2021%2049%200%2012%20-9%2034%20-21%2049%20-16%2020%20-29%2026%20-59%2026%20-30%200%20-43%20-6%20-59%20-26z'/%3e%3cpath%20d='M1562%204247%20c-59%20-63%202%20-154%2084%20-127%2058%2019%2068%20111%2015%20139%20-33%2018%20-76%2013%20-99%20-12z'/%3e%3cpath%20d='M3457%204259%20c-51%20-30%20-40%20-120%2017%20-139%2060%20-20%20106%2014%20106%2078%200%2055%20-72%2091%20-123%2061z'/%3e%3cpath%20d='M1712%203987%20c-13%20-13%20-22%20-36%20-22%20-53%200%20-21%20102%20-207%20345%20-627%20l344%20-597%20-24%20-52%20c-45%20-96%20-28%20-185%2047%20-260%2026%20-27%2054%20-48%2063%20-48%2013%200%2015%20-89%2015%20-849%200%20-843%200%20-848%2021%20-875%2029%20-37%2089%20-37%20118%200%2021%2027%2021%2032%2021%20875%200%20760%202%20849%2015%20849%209%200%2037%2021%2063%2048%2073%2072%2091%20164%2051%20252%20-38%2083%20-102%20128%20-197%20139%20l-54%206%20-343%20595%20c-189%20327%20-351%20600%20-361%20607%20-29%2021%20-78%2016%20-102%20-10z'/%3e%3cpath%20d='M872%203557%20c-59%20-63%202%20-154%2084%20-127%2058%2019%2068%20111%2015%20139%20-33%2018%20-76%2013%20-99%20-12z'/%3e%3cpath%20d='M4147%203569%20c-51%20-30%20-40%20-120%2017%20-139%2060%20-20%20106%2014%20106%2078%200%2055%20-72%2091%20-123%2061z'/%3e%3cpath%20d='M626%202619%20c-37%20-29%20-37%20-89%200%20-118%2015%20-12%2037%20-21%2049%20-21%2012%200%2034%209%2049%2021%2020%2016%2026%2029%2026%2059%200%2030%20-6%2043%20-26%2059%20-15%2012%20-37%2021%20-49%2021%20-12%200%20-34%20-9%20-49%20-21z'/%3e%3cpath%20d='M4396%202619%20c-37%20-29%20-37%20-89%200%20-118%2015%20-12%2037%20-21%2049%20-21%2012%200%2034%209%2049%2021%2037%2029%2037%2089%200%20118%20-15%2012%20-37%2021%20-49%2021%20-12%200%20-34%20-9%20-49%20-21z'/%3e%3cpath%20d='M893%201690%20c-47%20-19%20-58%20-92%20-20%20-128%2025%20-24%2066%20-28%2098%20-11%2052%2027%2043%20119%20-13%20138%20-36%2013%20-36%2013%20-65%201z'/%3e%3cpath%20d='M4158%201689%20c-52%20-20%20-58%20-112%20-9%20-138%2055%20-30%20121%206%20121%2066%200%2058%20-55%2093%20-112%2072z'/%3e%3cpath%20d='M1583%201000%20c-47%20-19%20-58%20-92%20-20%20-128%2025%20-24%2066%20-28%2098%20-11%2052%2027%2043%20119%20-13%20138%20-36%2013%20-36%2013%20-65%201z'/%3e%3cpath%20d='M3468%20999%20c-52%20-20%20-58%20-112%20-9%20-138%2055%20-30%20121%206%20121%2066%200%2058%20-55%2093%20-112%2072z'/%3e%3c/g%3e%3c/svg%3e",m9=()=>{};var jI={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye=function(n,e){if(!n)throw Wc(e)},Wc=function(n){return new Error("Firebase Database ("+BN.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},p9=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=n[t++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=n[t++],l=n[t++],c=n[t++],f=((r&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const o=n[t++],l=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|l&63)}}return e.join("")},_S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const o=n[r],l=r+1<n.length,c=l?n[r+1]:0,f=r+2<n.length,d=f?n[r+2]:0,g=o>>2,_=(o&3)<<4|c>>4;let v=(c&15)<<2|d>>6,b=d&63;f||(b=64,l||(v=64)),i.push(t[g],t[_],t[v],t[b])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(jN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):p9(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const o=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;const d=r<n.length?t[n.charAt(r)]:64;++r;const _=r<n.length?t[n.charAt(r)]:64;if(++r,o==null||c==null||d==null||_==null)throw new g9;const v=o<<2|c>>4;if(i.push(v),d!==64){const b=c<<4&240|d>>2;if(i.push(b),_!==64){const C=d<<6&192|_;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class g9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zN=function(n){const e=jN(n);return _S.encodeByteArray(e,!0)},Ig=function(n){return zN(n).replace(/\./g,"")},Rg=function(n){try{return _S.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y9(n){return qN(void 0,n)}function qN(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!_9(t)||(n[t]=qN(n[t],e[t]));return n}function _9(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=()=>HN().__FIREBASE_DEFAULTS__,E9=()=>{if(typeof process>"u"||typeof jI>"u")return;const n=jI.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},T9=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Rg(n[1]);return e&&JSON.parse(e)},Ly=()=>{try{return m9()||v9()||E9()||T9()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},GN=n=>Ly()?.emulatorHosts?.[n],S9=n=>{const e=GN(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},KN=()=>Ly()?.config,$N=n=>Ly()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vS(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b9(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ig(JSON.stringify(t)),Ig(JSON.stringify(l)),""].join(".")}const Pf={};function w9(){const n={prod:[],emulator:[]};for(const e of Object.keys(Pf))Pf[e]?n.emulator.push(e):n.prod.push(e);return n}function C9(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let zI=!1;function WN(n,e){if(typeof window>"u"||typeof document>"u"||!Ta(window.location.host)||Pf[n]===e||Pf[n]||zI)return;Pf[n]=e;function t(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=w9().prod.length>0;function l(){const v=document.getElementById(i);v&&v.remove()}function c(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function f(v,b){v.setAttribute("width","24"),v.setAttribute("id",b),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function d(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{zI=!0,l()},v}function g(v,b){v.setAttribute("id",b),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function _(){const v=C9(i),b=t("text"),C=document.getElementById(b)||document.createElement("span"),D=t("learnmore"),N=document.getElementById(D)||document.createElement("a"),B=t("preprendIcon"),V=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const k=v.element;c(k),g(N,D);const Z=d();f(V,B),k.append(V,C,N,Z),document.body.appendChild(k)}o?(C.innerText="Preview backend disconnected.",V.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(V.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ES(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function YN(){const n=Ly()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function A9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function I9(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function QN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function R9(){const n=wn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function x9(){return BN.NODE_ADMIN===!0}function XN(){return!YN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JN(){return!YN()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function ZN(){try{return typeof indexedDB=="object"}catch{return!1}}function D9(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9="FirebaseError";class uo extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=N9,Object.setPrototypeOf(this,uo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fd.prototype.create)}}class Fd{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,o=this.errors[e],l=o?M9(o,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new uo(r,c,i)}}function M9(n,e){return n.replace(P9,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const P9=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function id(n){return JSON.parse(n)}function On(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eM=function(n){let e={},t={},i={},r="";try{const o=n.split(".");e=id(Rg(o[0])||""),t=id(Rg(o[1])||""),r=o[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}},O9=function(n){const e=eM(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},V9=function(n){const e=eM(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Tc(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function xg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Dg(n,e,t){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function ca(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const o=n[r],l=e[r];if(qI(o)&&qI(l)){if(!ca(o,l))return!1}else if(o!==l)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function qI(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let _=0;_<16;_++)i[_]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let _=16;_<80;_++){const v=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(v<<1|v>>>31)&4294967295}let r=this.chain_[0],o=this.chain_[1],l=this.chain_[2],c=this.chain_[3],f=this.chain_[4],d,g;for(let _=0;_<80;_++){_<40?_<20?(d=c^o&(l^c),g=1518500249):(d=o^l^c,g=1859775393):_<60?(d=o&l|c&(o|l),g=2400959708):(d=o^l^c,g=3395469782);const v=(r<<5|r>>>27)+d+f+g+i[_]&4294967295;f=c,c=l,l=(o<<30|o>>>2)&4294967295,o=r,r=v}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let r=0;const o=this.buf_;let l=this.inbuf_;for(;r<t;){if(l===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(o[l]=e.charCodeAt(r),++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}else for(;r<t;)if(o[l]=e[r],++l,++r,l===this.blockSize){this.compress_(o),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[r]>>o&255,++i;return e}}function L9(n,e){const t=new U9(n,e);return t.subscribe.bind(t)}class U9{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");F9(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=V0),r.error===void 0&&(r.error=V0),r.complete===void 0&&(r.complete=V0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F9(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function V0(){}function Sc(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B9=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const o=r-55296;i++,ye(i<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(i)-56320;r=65536+(o<<10)+l}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Uy=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(n){return n&&n._delegate?n._delegate:n}class ha{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j9=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Fs;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(q9(e))try{this.getOrInitializeService({instanceIdentifier:nl})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=nl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=nl){return this.instances.has(e)}getOptions(e=nl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);i===c&&l.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:z9(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=nl){return this.component?this.component.multipleInstances?e:nl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function z9(n){return n===nl?void 0:n}function q9(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new j9(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(nt||(nt={}));const G9={debug:nt.DEBUG,verbose:nt.VERBOSE,info:nt.INFO,warn:nt.WARN,error:nt.ERROR,silent:nt.SILENT},K9=nt.INFO,$9={[nt.DEBUG]:"log",[nt.VERBOSE]:"log",[nt.INFO]:"info",[nt.WARN]:"warn",[nt.ERROR]:"error"},W9=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=$9[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fy{constructor(e){this.name=e,this._logLevel=K9,this._logHandler=W9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?G9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,nt.DEBUG,...e),this._logHandler(this,nt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,nt.VERBOSE,...e),this._logHandler(this,nt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,nt.INFO,...e),this._logHandler(this,nt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,nt.WARN,...e),this._logHandler(this,nt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,nt.ERROR,...e),this._logHandler(this,nt.ERROR,...e)}}const Y9=(n,e)=>e.some(t=>n instanceof t);let HI,GI;function Q9(){return HI||(HI=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X9(){return GI||(GI=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tM=new WeakMap,VE=new WeakMap,nM=new WeakMap,k0=new WeakMap,TS=new WeakMap;function J9(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(ra(n.result)),r()},l=()=>{i(n.error),r()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&tM.set(t,n)}).catch(()=>{}),TS.set(e,n),e}function Z9(n){if(VE.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),r()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});VE.set(n,e)}let kE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return VE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nM.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ra(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function eU(n){kE=n(kE)}function tU(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(L0(this),e,...t);return nM.set(i,e.sort?e.sort():[e]),ra(i)}:X9().includes(n)?function(...e){return n.apply(L0(this),e),ra(tM.get(this))}:function(...e){return ra(n.apply(L0(this),e))}}function nU(n){return typeof n=="function"?tU(n):(n instanceof IDBTransaction&&Z9(n),Y9(n,Q9())?new Proxy(n,kE):n)}function ra(n){if(n instanceof IDBRequest)return J9(n);if(k0.has(n))return k0.get(n);const e=nU(n);return e!==n&&(k0.set(n,e),TS.set(e,n)),e}const L0=n=>TS.get(n);function iU(n,e,{blocked:t,upgrade:i,blocking:r,terminated:o}={}){const l=indexedDB.open(n,e),c=ra(l);return i&&l.addEventListener("upgradeneeded",f=>{i(ra(l.result),f.oldVersion,f.newVersion,ra(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),c.then(f=>{o&&f.addEventListener("close",()=>o()),r&&f.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const rU=["get","getKey","getAll","getAllKeys","count"],sU=["put","add","delete","clear"],U0=new Map;function KI(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(U0.get(e))return U0.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=sU.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||rU.includes(t)))return;const o=async function(l,...c){const f=this.transaction(l,r?"readwrite":"readonly");let d=f.store;return i&&(d=d.index(c.shift())),(await Promise.all([d[t](...c),r&&f.done]))[0]};return U0.set(e,o),o}eU(n=>({...n,get:(e,t,i)=>KI(e,t)||n.get(e,t,i),has:(e,t)=>!!KI(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(aU(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function aU(n){return n.getComponent()?.type==="VERSION"}const LE="@firebase/app",$I="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new Fy("@firebase/app"),lU="@firebase/app-compat",uU="@firebase/analytics-compat",cU="@firebase/analytics",hU="@firebase/app-check-compat",fU="@firebase/app-check",dU="@firebase/auth",mU="@firebase/auth-compat",pU="@firebase/database",gU="@firebase/data-connect",yU="@firebase/database-compat",_U="@firebase/functions",vU="@firebase/functions-compat",EU="@firebase/installations",TU="@firebase/installations-compat",SU="@firebase/messaging",bU="@firebase/messaging-compat",wU="@firebase/performance",CU="@firebase/performance-compat",AU="@firebase/remote-config",IU="@firebase/remote-config-compat",RU="@firebase/storage",xU="@firebase/storage-compat",DU="@firebase/firestore",NU="@firebase/ai",MU="@firebase/firestore-compat",PU="firebase",OU="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="[DEFAULT]",VU={[LE]:"fire-core",[lU]:"fire-core-compat",[cU]:"fire-analytics",[uU]:"fire-analytics-compat",[fU]:"fire-app-check",[hU]:"fire-app-check-compat",[dU]:"fire-auth",[mU]:"fire-auth-compat",[pU]:"fire-rtdb",[gU]:"fire-data-connect",[yU]:"fire-rtdb-compat",[_U]:"fire-fn",[vU]:"fire-fn-compat",[EU]:"fire-iid",[TU]:"fire-iid-compat",[SU]:"fire-fcm",[bU]:"fire-fcm-compat",[wU]:"fire-perf",[CU]:"fire-perf-compat",[AU]:"fire-rc",[IU]:"fire-rc-compat",[RU]:"fire-gcs",[xU]:"fire-gcs-compat",[DU]:"fire-fst",[MU]:"fire-fst-compat",[NU]:"fire-vertex","fire-js":"fire-js",[PU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng=new Map,kU=new Map,FE=new Map;function WI(n,e){try{n.container.addComponent(e)}catch(t){Xs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xl(n){const e=n.name;if(FE.has(e))return Xs.debug(`There were multiple attempts to register component ${e}.`),!1;FE.set(e,n);for(const t of Ng.values())WI(t,n);for(const t of kU.values())WI(t,n);return!0}function By(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Cr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sa=new Fd("app","Firebase",LU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ha("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=OU;function iM(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:UE,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw sa.create("bad-app-name",{appName:String(r)});if(t||(t=KN()),!t)throw sa.create("no-options");const o=Ng.get(r);if(o){if(ca(t,o.options)&&ca(i,o.config))return o;throw sa.create("duplicate-app",{appName:r})}const l=new H9(r);for(const f of FE.values())l.addComponent(f);const c=new UU(t,i,l);return Ng.set(r,c),c}function rM(n=UE){const e=Ng.get(n);if(!e&&n===UE&&KN())return iM();if(!e)throw sa.create("no-app",{appName:n});return e}function ls(n,e,t){let i=VU[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const l=[`Unable to register library "${i}" with version "${e}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xs.warn(l.join(" "));return}xl(new ha(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FU="firebase-heartbeat-database",BU=1,rd="firebase-heartbeat-store";let F0=null;function sM(){return F0||(F0=iU(FU,BU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(rd)}catch(t){console.warn(t)}}}}).catch(n=>{throw sa.create("idb-open",{originalErrorMessage:n.message})})),F0}async function jU(n){try{const t=(await sM()).transaction(rd),i=await t.objectStore(rd).get(oM(n));return await t.done,i}catch(e){if(e instanceof uo)Xs.warn(e.message);else{const t=sa.create("idb-get",{originalErrorMessage:e?.message});Xs.warn(t.message)}}}async function YI(n,e){try{const i=(await sM()).transaction(rd,"readwrite");await i.objectStore(rd).put(e,oM(n)),await i.done}catch(t){if(t instanceof uo)Xs.warn(t.message);else{const i=sa.create("idb-set",{originalErrorMessage:t?.message});Xs.warn(i.message)}}}function oM(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU=1024,qU=30;class HU{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new KU(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=QI();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>qU){const r=$U(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Xs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=QI(),{heartbeatsToSend:t,unsentEntries:i}=GU(this._heartbeatsCache.heartbeats),r=Ig(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return Xs.warn(e),""}}}function QI(){return new Date().toISOString().substring(0,10)}function GU(n,e=zU){const t=[];let i=n.slice();for(const r of n){const o=t.find(l=>l.agent===r.agent);if(o){if(o.dates.push(r.date),XI(t)>e){o.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),XI(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class KU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZN()?D9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await jU(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return YI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return YI(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function XI(n){return Ig(JSON.stringify({version:2,heartbeats:n})).length}function $U(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(n){xl(new ha("platform-logger",e=>new oU(e),"PRIVATE")),xl(new ha("heartbeat",e=>new HU(e),"PRIVATE")),ls(LE,$I,n),ls(LE,$I,"esm2020"),ls("fire-js","")}WU("");var JI={};const ZI="@firebase/database",eR="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aM="";function YU(n){aM=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),On(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:id(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return gs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new QU(e)}}catch{}return new XU},pl=lM("localStorage"),JU=lM("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new Fy("@firebase/database"),ZU=(function(){let n=1;return function(){return n++}})(),uM=function(n){const e=B9(n),t=new k9;t.update(e);const i=t.digest();return _S.encodeByteArray(i)},Bd=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Bd.apply(null,i):typeof i=="object"?e+=On(i):e+=i,e+=" "}return e};let Of=null,tR=!0;const eF=function(n,e){ye(!0,"Can't turn on custom loggers persistently."),cc.logLevel=nt.VERBOSE,Of=cc.log.bind(cc)},Hn=function(...n){if(tR===!0&&(tR=!1,Of===null&&JU.get("logging_enabled")===!0&&eF()),Of){const e=Bd.apply(null,n);Of(e)}},jd=function(n){return function(...e){Hn(n,...e)}},BE=function(...n){const e="FIREBASE INTERNAL ERROR: "+Bd(...n);cc.error(e)},Js=function(...n){const e=`FIREBASE FATAL ERROR: ${Bd(...n)}`;throw cc.error(e),new Error(e)},bi=function(...n){const e="FIREBASE WARNING: "+Bd(...n);cc.warn(e)},tF=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&bi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},jy=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},nF=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},bc="[MIN_NAME]",Dl="[MAX_NAME]",Gl=function(n,e){if(n===e)return 0;if(n===bc||e===Dl)return-1;if(e===bc||n===Dl)return 1;{const t=nR(n),i=nR(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},iF=function(n,e){return n===e?0:n<e?-1:1},ff=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+On(e))},SS=function(n){if(typeof n!="object"||n===null)return On(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=On(e[i]),t+=":",t+=SS(n[e[i]]);return t+="}",t},cM=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function Jn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const hM=function(n){ye(!jy(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let r,o,l,c,f;n===0?(o=0,l=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(c=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=c+i,l=Math.round(n*Math.pow(2,t-c)-Math.pow(2,t))):(o=0,l=Math.round(n/Math.pow(2,1-i-t))));const d=[];for(f=t;f;f-=1)d.push(l%2?1:0),l=Math.floor(l/2);for(f=e;f;f-=1)d.push(o%2?1:0),o=Math.floor(o/2);d.push(r?1:0),d.reverse();const g=d.join("");let _="";for(f=0;f<64;f+=8){let v=parseInt(g.substr(f,8),2).toString(16);v.length===1&&(v="0"+v),_=_+v}return _.toLowerCase()},rF=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},sF=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function oF(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const aF=new RegExp("^-?(0*)\\d{1,10}$"),lF=-2147483648,uF=2147483647,nR=function(n){if(aF.test(n)){const e=Number(n);if(e>=lF&&e<=uF)return e}return null},Qc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw bi("Exception was thrown by user callback.",t),e},Math.floor(0))}},cF=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Vf=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Cr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){bi(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Hn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',bi(e)}}class rg{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}rg.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS="5",fM="v",dM="s",mM="r",pM="f",gM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yM="ls",_M="p",jE="ac",vM="websocket",EM="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,t,i,r,o=!1,l="",c=!1,f=!1,d=null){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=o,this.persistenceKey=l,this.includeNamespaceInQueryParams=c,this.isUsingEmulator=f,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pl.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&pl.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function dF(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function SM(n,e,t){ye(typeof e=="string","typeof type must == string"),ye(typeof t=="object","typeof params must == object");let i;if(e===vM)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===EM)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);dF(n)&&(t.ns=n.namespace);const r=[];return Jn(t,(o,l)=>{r.push(o+"="+l)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(){this.counters_={}}incrementCounter(e,t=1){gs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return y9(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0={},j0={};function wS(n){const e=n.toString();return B0[e]||(B0[e]=new mF),B0[e]}function pF(n,e){const t=n.toString();return j0[t]||(j0[t]=e()),j0[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Qc(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="start",yF="close",_F="pLPCommand",vF="pRTLPCB",bM="id",wM="pw",CM="ser",EF="cb",TF="seg",SF="ts",bF="d",wF="dframe",AM=1870,IM=30,CF=AM-IM,AF=25e3,IF=3e4;class ic{constructor(e,t,i,r,o,l,c){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.transportSessionId=l,this.lastSessionId=c,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jd(e),this.stats_=wS(t),this.urlFn=f=>(this.appCheckToken&&(f[jE]=this.appCheckToken),SM(t,EM,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new gF(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(IF)),nF(()=>{if(this.isClosed_)return;this.scriptTagHolder=new CS((...o)=>{const[l,c,f,d,g]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===iR)this.id=c,this.password=f;else if(l===yF)c?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(c,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...o)=>{const[l,c]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(l,c)},()=>{this.onClosed_()},this.urlFn);const i={};i[iR]="t",i[CM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[EF]=this.scriptTagHolder.uniqueCallbackIdentifier),i[fM]=bS,this.transportSessionId&&(i[dM]=this.transportSessionId),this.lastSessionId&&(i[yM]=this.lastSessionId),this.applicationId&&(i[_M]=this.applicationId),this.appCheckToken&&(i[jE]=this.appCheckToken),typeof location<"u"&&location.hostname&&gM.test(location.hostname)&&(i[mM]=pM);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ic.forceAllow_=!0}static forceDisallow(){ic.forceDisallow_=!0}static isAvailable(){return ic.forceAllow_?!0:!ic.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!rF()&&!sF()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=On(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=zN(t),r=cM(i,CF);for(let o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[wF]="t",i[bM]=e,i[wM]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=On(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class CS{constructor(e,t,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ZU(),window[_F+this.uniqueCallbackIdentifier]=e,window[vF+this.uniqueCallbackIdentifier]=t,this.myIFrame=CS.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(c){Hn("frame writing exception"),c.stack&&Hn(c.stack),Hn(c)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Hn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[bM]=this.myID,e[wM]=this.myPW,e[CM]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+IM+i.length<=AM;){const l=this.pendingSegs.shift();i=i+"&"+TF+r+"="+l.seg+"&"+SF+r+"="+l.ts+"&"+bF+r+"="+l.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(AF)),o=()=>{clearTimeout(r),i()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Hn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF=16384,xF=45e3;let Mg=null;typeof MozWebSocket<"u"?Mg=MozWebSocket:typeof WebSocket<"u"&&(Mg=WebSocket);class Ar{constructor(e,t,i,r,o,l,c){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jd(this.connId),this.stats_=wS(t),this.connURL=Ar.connectionURL_(t,l,c,r,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,r,o){const l={};return l[fM]=bS,typeof location<"u"&&location.hostname&&gM.test(location.hostname)&&(l[mM]=pM),t&&(l[dM]=t),i&&(l[yM]=i),r&&(l[jE]=r),o&&(l[_M]=o),SM(e,vM,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pl.set("previous_websocket_failure",!0);try{let i;x9(),this.mySock=new Mg(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Ar.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Mg!==null&&!Ar.forceDisallow_}static previouslyFailed(){return pl.isInMemoryStorage||pl.get("previous_websocket_failure")===!0}markConnectionHealthy(){pl.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=id(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ye(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=On(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=cM(t,RF);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(xF))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ar.responsesRequiredToBeHealthy=2;Ar.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{static get ALL_TRANSPORTS(){return[ic,Ar]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Ar&&Ar.isAvailable();let i=t&&!Ar.previouslyFailed();if(e.webSocketOnly&&(t||bi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ar];else{const r=this.transports_=[];for(const o of sd.ALL_TRANSPORTS)o&&o.isAvailable()&&r.push(o);sd.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}sd.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF=6e4,NF=5e3,MF=10*1024,PF=100*1024,z0="t",rR="d",OF="s",sR="r",VF="e",oR="o",aR="a",lR="n",uR="p",kF="h";class LF{constructor(e,t,i,r,o,l,c,f,d,g){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=o,this.onMessage_=l,this.onReady_=c,this.onDisconnect_=f,this.onKill_=d,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jd("c:"+this.id+":"),this.transportManager_=new sd(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Vf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>PF?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>MF?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(z0 in e){const t=e[z0];t===aR?this.upgradeIfSecondaryHealthy_():t===sR?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===oR&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=ff("t",e),i=ff("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:uR,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:aR,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:lR,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=ff("t",e),i=ff("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=ff(z0,e);if(rR in e){const i=e[rR];if(t===kF){const r={...i};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===lR){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===OF?this.onConnectionShutdown_(i):t===sR?this.onReset_(i):t===VF?BE("Server Error: "+i):t===oR?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):BE("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),bS!==i&&bi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Vf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(DF))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Vf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(NF))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:uR,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pl.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RM{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.allowedEvents_=e,this.listeners_={},ye(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let o=0;o<r.length;o++)if(r[o].callback===t&&(!i||i===r[o].context)){r.splice(o,1);return}}validateEventType_(e){ye(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg extends xM{static getInstance(){return new Pg}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ES()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ye(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=32,hR=768;class bt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function pt(){return new bt("")}function Ye(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function fa(n){return n.pieces_.length-n.pieceNum_}function Dt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new bt(n.pieces_,e)}function AS(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function UF(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function od(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function DM(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new bt(e,0)}function rn(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof bt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new bt(t,0)}function Je(n){return n.pieceNum_>=n.pieces_.length}function Ei(n,e){const t=Ye(n),i=Ye(e);if(t===null)return e;if(t===i)return Ei(Dt(n),Dt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function FF(n,e){const t=od(n,0),i=od(e,0);for(let r=0;r<t.length&&r<i.length;r++){const o=Gl(t[r],i[r]);if(o!==0)return o}return t.length===i.length?0:t.length<i.length?-1:1}function IS(n,e){if(fa(n)!==fa(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function rr(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(fa(n)>fa(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class BF{constructor(e,t){this.errorPrefix_=t,this.parts_=od(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Uy(this.parts_[i]);NM(this)}}function jF(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Uy(e),NM(n)}function zF(n){const e=n.parts_.pop();n.byteLength_-=Uy(e),n.parts_.length>0&&(n.byteLength_-=1)}function NM(n){if(n.byteLength_>hR)throw new Error(n.errorPrefix_+"has a key path longer than "+hR+" bytes ("+n.byteLength_+").");if(n.parts_.length>cR)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+cR+") or object contains a cycle "+il(n))}function il(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS extends xM{static getInstance(){return new RS}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return ye(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df=1e3,qF=300*1e3,fR=30*1e3,HF=1.3,GF=3e4,KF="server_kill",dR=3;class Ks extends RM{constructor(e,t,i,r,o,l,c,f){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=o,this.authTokenProvider_=l,this.appCheckTokenProvider_=c,this.authOverride_=f,this.id=Ks.nextPersistentConnectionId_++,this.log_=jd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=df,this.maxReconnectDelay_=qF,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");RS.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Pg.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const r=++this.requestNumber_,o={r,a:e,b:t};this.log_(On(o)),ye(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const t=new Fs,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const c=l.d;l.s==="ok"?t.resolve(c):t.reject(c)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,i,r){this.initConnection_();const o=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+o),this.listens.has(l)||this.listens.set(l,new Map),ye(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ye(!this.listens.get(l).has(o),"listen() called twice for same path/queryId.");const c={onComplete:r,hashFn:t,query:e,tag:i};this.listens.get(l).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+i+" for "+r);const o={p:i},l="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(l,o,c=>{const f=c.d,d=c.s;Ks.warnOnListenWarnings_(f,t),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(d,f))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&gs(e,"w")){const i=Tc(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();bi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||V9(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=fR)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=O9(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,r=>{const o=r.s,l=r.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),ye(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,t)}sendUnlisten_(e,t,i,r){this.log_("Unlisten on "+e+" for "+t);const o={p:e},l="n";r&&(o.q=i,o.t=r),this.sendRequest(l,o)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,r){const o={p:t,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,l=>{r&&setTimeout(()=>{r(l.s,l.d)},Math.floor(0))})}put(e,t,i,r){this.putInternal("p",e,t,i,r)}merge(e,t,i,r){this.putInternal("m",e,t,i,r)}putInternal(e,t,i,r,o){this.initConnection_();const l={p:t,d:i};o!==void 0&&(l.h=o),this.outstandingPuts_.push({action:e,request:l,onComplete:r}),this.outstandingPutCount_++;const c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+On(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):BE("Unrecognized action received from server: "+On(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ye(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=df,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=df,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>GF&&(this.reconnectDelay_=df),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*HF)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Ks.nextConnectionId_++,o=this.lastSessionId;let l=!1,c=null;const f=function(){c?c.close():(l=!0,i())},d=function(_){ye(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(_)};this.realtime_={close:f,sendRequest:d};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,v]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);l?Hn("getToken() completed but was canceled"):(Hn("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=v&&v.token,c=new LF(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,b=>{bi(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(KF)},o))}catch(_){this.log_("Failed to get token: "+_),l||(this.repoInfo_.nodeAdmin&&bi(_),f())}}}interrupt(e){Hn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Hn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],xg(this.interruptReasons_)&&(this.reconnectDelay_=df,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(o=>SS(o)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const i=new bt(e).toString();let r;if(this.listens.has(i)){const o=this.listens.get(i);r=o.get(t),o.delete(t),o.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,t){Hn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=dR&&(this.reconnectDelay_=fR,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Hn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=dR&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+aM.replace(/\./g,"-")]=1,ES()?e["framework.cordova"]=1:QN()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Pg.getInstance().currentlyOnline();return xg(this.interruptReasons_)&&e}}Ks.nextPersistentConnectionId_=0;Ks.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ze(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Ze(bc,e),r=new Ze(bc,t);return this.compare(i,r)!==0}minPost(){return Ze.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vp;class MM extends zy{static get __EMPTY_NODE(){return Vp}static set __EMPTY_NODE(e){Vp=e}compare(e,t){return Gl(e.name,t.name)}isDefinedOn(e){throw Wc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ze.MIN}maxPost(){return new Ze(Dl,Vp)}makePost(e,t){return ye(typeof e=="string","KeyIndex indexValue must always be a string."),new Ze(e,Vp)}toString(){return".key"}}const hc=new MM;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kp=class{constructor(e,t,i,r,o=null){this.isReverse_=r,this.resultGenerator_=o,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?i(e.key,t):1,r&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ki=class wf{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??wf.RED,this.left=r??ss.EMPTY_NODE,this.right=o??ss.EMPTY_NODE}copy(e,t,i,r,o){return new wf(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return o<0?r=r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r=r.copy(null,t,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return ss.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,r;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return ss.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,wf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,wf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};ki.RED=!0;ki.BLACK=!1;class $F{copy(e,t,i,r,o){return this}insert(e,t,i){return new ki(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let ss=class sg{constructor(e,t=sg.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new sg(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ki.BLACK,null,null))}remove(e){return new sg(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ki.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new kp(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new kp(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new kp(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new kp(this.root_,null,this.comparator_,!0,e)}};ss.EMPTY_NODE=new $F;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(n,e){return Gl(n.name,e.name)}function xS(n,e){return Gl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zE;function YF(n){zE=n}const PM=function(n){return typeof n=="number"?"number:"+hM(n):"string:"+n},OM=function(n){if(n.isLeafNode()){const e=n.val();ye(typeof e=="string"||typeof e=="number"||typeof e=="object"&&gs(e,".sv"),"Priority must be a string or number.")}else ye(n===zE||n.isEmpty(),"priority of unexpected type.");ye(n===zE||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mR;class Mn{static set __childrenNodeConstructor(e){mR=e}static get __childrenNodeConstructor(){return mR}constructor(e,t=Mn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ye(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),OM(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Mn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Mn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Je(e)?this:Ye(e)===".priority"?this.priorityNode_:Mn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Mn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Ye(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(ye(i!==".priority"||fa(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Mn.__childrenNodeConstructor.EMPTY_NODE.updateChild(Dt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+PM(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=hM(this.value_):e+=this.value_,this.lazyHash_=uM(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Mn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Mn.__childrenNodeConstructor?-1:(ye(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,r=Mn.VALUE_TYPE_ORDER.indexOf(t),o=Mn.VALUE_TYPE_ORDER.indexOf(i);return ye(r>=0,"Unknown leaf type: "+t),ye(o>=0,"Unknown leaf type: "+i),r===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Mn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VM,kM;function QF(n){VM=n}function XF(n){kM=n}class JF extends zy{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),o=i.compareTo(r);return o===0?Gl(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ze.MIN}maxPost(){return new Ze(Dl,new Mn("[PRIORITY-POST]",kM))}makePost(e,t){const i=VM(e);return new Ze(t,new Mn("[PRIORITY-POST]",i))}toString(){return".priority"}}const Kt=new JF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=Math.log(2);class eB{constructor(e){const t=o=>parseInt(Math.log(o)/ZF,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Og=function(n,e,t,i){n.sort(e);const r=function(f,d){const g=d-f;let _,v;if(g===0)return null;if(g===1)return _=n[f],v=t?t(_):_,new ki(v,_.node,ki.BLACK,null,null);{const b=parseInt(g/2,10)+f,C=r(f,b),D=r(b+1,d);return _=n[b],v=t?t(_):_,new ki(v,_.node,ki.BLACK,C,D)}},o=function(f){let d=null,g=null,_=n.length;const v=function(C,D){const N=_-C,B=_;_-=C;const V=r(N+1,B),k=n[N],Z=t?t(k):k;b(new ki(Z,k.node,D,null,V))},b=function(C){d?(d.left=C,d=C):(g=C,d=C)};for(let C=0;C<f.count;++C){const D=f.nextBitIsOne(),N=Math.pow(2,f.count-(C+1));D?v(N,ki.BLACK):(v(N,ki.BLACK),v(N,ki.RED))}return g},l=new eB(n.length),c=o(l);return new ss(i||e,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q0;const Uu={};class js{static get Default(){return ye(Uu&&Kt,"ChildrenNode.ts has not been loaded"),q0=q0||new js({".priority":Uu},{".priority":Kt}),q0}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Tc(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ss?t:null}hasIndex(e){return gs(this.indexSet_,e.toString())}addIndex(e,t){ye(e!==hc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const o=t.getIterator(Ze.Wrap);let l=o.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=o.getNext();let c;r?c=Og(i,e.getCompare()):c=Uu;const f=e.toString(),d={...this.indexSet_};d[f]=e;const g={...this.indexes_};return g[f]=c,new js(g,d)}addToIndexes(e,t){const i=Dg(this.indexes_,(r,o)=>{const l=Tc(this.indexSet_,o);if(ye(l,"Missing index implementation for "+o),r===Uu)if(l.isDefinedOn(e.node)){const c=[],f=t.getIterator(Ze.Wrap);let d=f.getNext();for(;d;)d.name!==e.name&&c.push(d),d=f.getNext();return c.push(e),Og(c,l.getCompare())}else return Uu;else{const c=t.get(e.name);let f=r;return c&&(f=f.remove(new Ze(e.name,c))),f.insert(e,e.node)}});return new js(i,this.indexSet_)}removeFromIndexes(e,t){const i=Dg(this.indexes_,r=>{if(r===Uu)return r;{const o=t.get(e.name);return o?r.remove(new Ze(e.name,o)):r}});return new js(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf;class Ve{static get EMPTY_NODE(){return mf||(mf=new Ve(new ss(xS),null,js.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&OM(this.priorityNode_),this.children_.isEmpty()&&ye(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||mf}updatePriority(e){return this.children_.isEmpty()?this:new Ve(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?mf:t}}getChild(e){const t=Ye(e);return t===null?this:this.getImmediateChild(t).getChild(Dt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ye(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Ze(e,t);let r,o;t.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(i,this.children_));const l=r.isEmpty()?mf:this.priorityNode_;return new Ve(r,l,o)}}updateChild(e,t){const i=Ye(e);if(i===null)return t;{ye(Ye(e)!==".priority"||fa(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(Dt(e),t);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,r=0,o=!0;if(this.forEachChild(Kt,(l,c)=>{t[l]=c.val(e),i++,o&&Ve.INTEGER_REGEXP_.test(l)?r=Math.max(r,Number(l)):o=!1}),!e&&o&&r<2*i){const l=[];for(const c in t)l[c]=t[c];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+PM(this.getPriority().val())+":"),this.forEachChild(Kt,(t,i)=>{const r=i.hash();r!==""&&(e+=":"+t+":"+r)}),this.lazyHash_=e===""?"":uM(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const r=this.resolveIndex_(i);if(r){const o=r.getPredecessorKey(new Ze(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ze(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ze(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>t(r.name,r.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Ze.Wrap);let o=r.peek();for(;o!=null&&t.compare(o,e)<0;)r.getNext(),o=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Ze.Wrap);let o=r.peek();for(;o!=null&&t.compare(o,e)>0;)r.getNext(),o=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===zd?-1:0}withIndex(e){if(e===hc||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Ve(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===hc||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Kt),r=t.getIterator(Kt);let o=i.getNext(),l=r.getNext();for(;o&&l;){if(o.name!==l.name||!o.node.equals(l.node))return!1;o=i.getNext(),l=r.getNext()}return o===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===hc?null:this.indexMap_.get(e.toString())}}Ve.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class tB extends Ve{constructor(){super(new ss(xS),Ve.EMPTY_NODE,js.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ve.EMPTY_NODE}isEmpty(){return!1}}const zd=new tB;Object.defineProperties(Ze,{MIN:{value:new Ze(bc,Ve.EMPTY_NODE)},MAX:{value:new Ze(Dl,zd)}});MM.__EMPTY_NODE=Ve.EMPTY_NODE;Mn.__childrenNodeConstructor=Ve;YF(zd);XF(zd);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nB=!0;function yn(n,e=null){if(n===null)return Ve.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ye(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Mn(t,yn(e))}if(!(n instanceof Array)&&nB){const t=[];let i=!1;if(Jn(n,(l,c)=>{if(l.substring(0,1)!=="."){const f=yn(c);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),t.push(new Ze(l,f)))}}),t.length===0)return Ve.EMPTY_NODE;const o=Og(t,WF,l=>l.name,xS);if(i){const l=Og(t,Kt.getCompare());return new Ve(o,yn(e),new js({".priority":l},{".priority":Kt}))}else return new Ve(o,yn(e),js.Default)}else{let t=Ve.EMPTY_NODE;return Jn(n,(i,r)=>{if(gs(n,i)&&i.substring(0,1)!=="."){const o=yn(r);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(yn(e))}}QF(yn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB extends zy{constructor(e){super(),this.indexPath_=e,ye(!Je(e)&&Ye(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),o=i.compareTo(r);return o===0?Gl(e.name,t.name):o}makePost(e,t){const i=yn(e),r=Ve.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ze(t,r)}maxPost(){const e=Ve.EMPTY_NODE.updateChild(this.indexPath_,zd);return new Ze(Dl,e)}toString(){return od(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB extends zy{compare(e,t){const i=e.node.compareTo(t.node);return i===0?Gl(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ze.MIN}maxPost(){return Ze.MAX}makePost(e,t){const i=yn(e);return new Ze(t,i)}toString(){return".value"}}const sB=new rB;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(n){return{type:"value",snapshotNode:n}}function wc(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function ad(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function ld(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function oB(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.index_=e}updateChild(e,t,i,r,o,l){ye(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const c=e.getImmediateChild(t);return c.getChild(r).equals(i.getChild(r))&&c.isEmpty()===i.isEmpty()||(l!=null&&(i.isEmpty()?e.hasChild(t)?l.trackChildChange(ad(t,c)):ye(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?l.trackChildChange(wc(t,i)):l.trackChildChange(ld(t,i,c))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Kt,(r,o)=>{t.hasChild(r)||i.trackChildChange(ad(r,o))}),t.isLeafNode()||t.forEachChild(Kt,(r,o)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(o)||i.trackChildChange(ld(r,o,l))}else i.trackChildChange(wc(r,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ve.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this.indexedFilter_=new DS(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ud.getStartPost_(e),this.endPost_=ud.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,o,l){return this.matches(new Ze(t,i))||(i=Ve.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,o,l)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Ve.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Ve.EMPTY_NODE);const o=this;return t.forEachChild(Kt,(l,c)=>{o.matches(new Ze(l,c))||(r=r.updateImmediateChild(l,Ve.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new ud(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,o,l){return this.rangedFilter_.matches(new Ze(t,i))||(i=Ve.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,o,l):this.fullLimitUpdateChild_(e,t,i,o,l)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=Ve.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=Ve.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;o.hasNext()&&l<this.limit_;){const c=o.getNext();if(this.withinDirectionalStart(c))if(this.withinDirectionalEnd(c))r=r.updateImmediateChild(c.name,c.node),l++;else break;else continue}}else{r=t.withIndex(this.index_),r=r.updatePriority(Ve.EMPTY_NODE);let o;this.reverse_?o=r.getReverseIterator(this.index_):o=r.getIterator(this.index_);let l=0;for(;o.hasNext();){const c=o.getNext();l<this.limit_&&this.withinDirectionalStart(c)&&this.withinDirectionalEnd(c)?l++:r=r.updateImmediateChild(c.name,Ve.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,o){let l;if(this.reverse_){const _=this.index_.getCompare();l=(v,b)=>_(b,v)}else l=this.index_.getCompare();const c=e;ye(c.numChildren()===this.limit_,"");const f=new Ze(t,i),d=this.reverse_?c.getFirstChild(this.index_):c.getLastChild(this.index_),g=this.rangedFilter_.matches(f);if(c.hasChild(t)){const _=c.getImmediateChild(t);let v=r.getChildAfterChild(this.index_,d,this.reverse_);for(;v!=null&&(v.name===t||c.hasChild(v.name));)v=r.getChildAfterChild(this.index_,v,this.reverse_);const b=v==null?1:l(v,f);if(g&&!i.isEmpty()&&b>=0)return o?.trackChildChange(ld(t,i,_)),c.updateImmediateChild(t,i);{o?.trackChildChange(ad(t,_));const D=c.updateImmediateChild(t,Ve.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(o?.trackChildChange(wc(v.name,v.node)),D.updateImmediateChild(v.name,v.node)):D}}else return i.isEmpty()?e:g&&l(d,f)>=0?(o!=null&&(o.trackChildChange(ad(d.name,d.node)),o.trackChildChange(wc(t,i))),c.updateImmediateChild(t,i).updateImmediateChild(d.name,Ve.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ye(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ye(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bc}hasEnd(){return this.endSet_}getIndexEndValue(){return ye(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ye(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Dl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ye(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Kt}copy(){const e=new NS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function lB(n){return n.loadsAllData()?new DS(n.getIndex()):n.hasLimit()?new aB(n):new ud(n)}function pR(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Kt?t="$priority":n.index_===sB?t="$value":n.index_===hc?t="$key":(ye(n.index_ instanceof iB,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=On(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=On(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+On(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=On(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+On(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function gR(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Kt&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg extends RM{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ye(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=jd("p:rest:"),this.listens_={}}listen(e,t,i,r){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const l=Vg.getListenId_(e,i),c={};this.listens_[l]=c;const f=pR(e._queryParams);this.restRequest_(o+".json",f,(d,g)=>{let _=g;if(d===404&&(_=null,d=null),d===null&&this.onDataUpdate_(o,_,!1,i),Tc(this.listens_,l)===c){let v;d?d===401?v="permission_denied":v="rest_error:"+d:v="ok",r(v,null)}})}unlisten(e,t){const i=Vg.getListenId_(e,t);delete this.listens_[i]}get(e){const t=pR(e._queryParams),i=e._path.toString(),r=new Fs;return this.restRequest_(i+".json",t,(o,l)=>{let c=l;o===404&&(c=null,o=null),o===null?(this.onDataUpdate_(i,c,!1,null),r.resolve(c)):r.reject(new Error(c))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,o])=>{r&&r.accessToken&&(t.auth=r.accessToken),o&&o.token&&(t.ac=o.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Yc(t);this.log_("Sending REST request for "+l);const c=new XMLHttpRequest;c.onreadystatechange=()=>{if(i&&c.readyState===4){this.log_("REST Response for "+l+" received. status:",c.status,"response:",c.responseText);let f=null;if(c.status>=200&&c.status<300){try{f=id(c.responseText)}catch{bi("Failed to parse JSON response for "+l+": "+c.responseText)}i(null,f)}else c.status!==401&&c.status!==404&&bi("Got unsuccessful REST response for "+l+" Status: "+c.status),i(c.status);i=null}},c.open("GET",l,!0),c.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uB{constructor(){this.rootNode_=Ve.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(){return{value:null,children:new Map}}function Xc(n,e,t){if(Je(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Ye(e);n.children.has(i)||n.children.set(i,kg());const r=n.children.get(i);e=Dt(e),Xc(r,e,t)}}function qE(n,e){if(Je(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Kt,(i,r)=>{Xc(n,new bt(i),r)}),qE(n,e)}}else if(n.children.size>0){const t=Ye(e);return e=Dt(e),n.children.has(t)&&qE(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function HE(n,e,t){n.value!==null?t(e,n.value):cB(n,(i,r)=>{const o=new bt(e.toString()+"/"+i);HE(r,o,t)})}function cB(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&Jn(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=10*1e3,fB=30*1e3,dB=300*1e3;class mB{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new hB(e);const i=yR+(fB-yR)*Math.random();Vf(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Jn(e,(r,o)=>{o>0&&gs(this.statsToReport_,r)&&(t[r]=o,i=!0)}),i&&this.server_.reportStats(t),Vf(this.reportStats_.bind(this),Math.floor(Math.random()*2*dB))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dr;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Dr||(Dr={}));function UM(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function MS(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function PS(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Dr.ACK_USER_WRITE,this.source=UM()}operationForChild(e){if(Je(this.path)){if(this.affectedTree.value!=null)return ye(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new bt(e));return new Lg(pt(),t,this.revert)}}else return ye(Ye(this.path)===e,"operationForChild called for unrelated child."),new Lg(Dt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.source=e,this.path=t,this.type=Dr.LISTEN_COMPLETE}operationForChild(e){return Je(this.path)?new cd(this.source,pt()):new cd(this.source,Dt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Dr.OVERWRITE}operationForChild(e){return Je(this.path)?new Nl(this.source,pt(),this.snap.getImmediateChild(e)):new Nl(this.source,Dt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Dr.MERGE}operationForChild(e){if(Je(this.path)){const t=this.children.subtree(new bt(e));return t.isEmpty()?null:t.value?new Nl(this.source,pt(),t.value):new hd(this.source,pt(),t)}else return ye(Ye(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new hd(this.source,Dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Je(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ye(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function gB(n,e,t,i){const r=[],o=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&o.push(oB(l.childName,l.snapshotNode))}),pf(n,r,"child_removed",e,i,t),pf(n,r,"child_added",e,i,t),pf(n,r,"child_moved",o,i,t),pf(n,r,"child_changed",e,i,t),pf(n,r,"value",e,i,t),r}function pf(n,e,t,i,r,o){const l=i.filter(c=>c.type===t);l.sort((c,f)=>_B(n,c,f)),l.forEach(c=>{const f=yB(n,c,o);r.forEach(d=>{d.respondsTo(c.type)&&e.push(d.createEvent(f,n.query_))})})}function yB(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function _B(n,e,t){if(e.childName==null||t.childName==null)throw Wc("Should only compare child_ events.");const i=new Ze(e.childName,e.snapshotNode),r=new Ze(t.childName,t.snapshotNode);return n.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(n,e){return{eventCache:n,serverCache:e}}function kf(n,e,t,i){return qy(new Ml(e,t,i),n.serverCache)}function FM(n,e,t,i){return qy(n.eventCache,new Ml(e,t,i))}function GE(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Pl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H0;const vB=()=>(H0||(H0=new ss(iF)),H0);class kt{static fromObject(e){let t=new kt(null);return Jn(e,(i,r)=>{t=t.set(new bt(i),r)}),t}constructor(e,t=vB()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:pt(),value:this.value};if(Je(e))return null;{const i=Ye(e),r=this.children.get(i);if(r!==null){const o=r.findRootMostMatchingPathAndValue(Dt(e),t);return o!=null?{path:rn(new bt(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Je(e))return this;{const t=Ye(e),i=this.children.get(t);return i!==null?i.subtree(Dt(e)):new kt(null)}}set(e,t){if(Je(e))return new kt(t,this.children);{const i=Ye(e),o=(this.children.get(i)||new kt(null)).set(Dt(e),t),l=this.children.insert(i,o);return new kt(this.value,l)}}remove(e){if(Je(e))return this.children.isEmpty()?new kt(null):new kt(null,this.children);{const t=Ye(e),i=this.children.get(t);if(i){const r=i.remove(Dt(e));let o;return r.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,r),this.value===null&&o.isEmpty()?new kt(null):new kt(this.value,o)}else return this}}get(e){if(Je(e))return this.value;{const t=Ye(e),i=this.children.get(t);return i?i.get(Dt(e)):null}}setTree(e,t){if(Je(e))return t;{const i=Ye(e),o=(this.children.get(i)||new kt(null)).setTree(Dt(e),t);let l;return o.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,o),new kt(this.value,l)}}fold(e){return this.fold_(pt(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,o)=>{i[r]=o.fold_(rn(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,pt(),t)}findOnPath_(e,t,i){const r=this.value?i(t,this.value):!1;if(r)return r;if(Je(e))return null;{const o=Ye(e),l=this.children.get(o);return l?l.findOnPath_(Dt(e),rn(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,pt(),t)}foreachOnPath_(e,t,i){if(Je(e))return this;{this.value&&i(t,this.value);const r=Ye(e),o=this.children.get(r);return o?o.foreachOnPath_(Dt(e),rn(t,r),i):new kt(null)}}foreach(e){this.foreach_(pt(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(rn(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.writeTree_=e}static empty(){return new Mr(new kt(null))}}function Lf(n,e,t){if(Je(e))return new Mr(new kt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let o=i.value;const l=Ei(r,e);return o=o.updateChild(l,t),new Mr(n.writeTree_.set(r,o))}else{const r=new kt(t),o=n.writeTree_.setTree(e,r);return new Mr(o)}}}function _R(n,e,t){let i=n;return Jn(t,(r,o)=>{i=Lf(i,rn(e,r),o)}),i}function vR(n,e){if(Je(e))return Mr.empty();{const t=n.writeTree_.setTree(e,new kt(null));return new Mr(t)}}function KE(n,e){return Kl(n,e)!=null}function Kl(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Ei(t.path,e)):null}function ER(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Kt,(i,r)=>{e.push(new Ze(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Ze(i,r.value))}),e}function oa(n,e){if(Je(e))return n;{const t=Kl(n,e);return t!=null?new Mr(new kt(t)):new Mr(n.writeTree_.subtree(e))}}function $E(n){return n.writeTree_.isEmpty()}function Cc(n,e){return BM(pt(),n.writeTree_,e)}function BM(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,o)=>{r===".priority"?(ye(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):t=BM(rn(n,r),o,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(rn(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(n,e){return HM(e,n)}function EB(n,e,t,i,r){ye(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Lf(n.visibleWrites,e,t)),n.lastWriteId=i}function TB(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function SB(n,e){const t=n.allWrites.findIndex(c=>c.writeId===e);ye(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,o=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const c=n.allWrites[l];c.visible&&(l>=t&&bB(c,i.path)?r=!1:rr(i.path,c.path)&&(o=!0)),l--}if(r){if(o)return wB(n),!0;if(i.snap)n.visibleWrites=vR(n.visibleWrites,i.path);else{const c=i.children;Jn(c,f=>{n.visibleWrites=vR(n.visibleWrites,rn(i.path,f))})}return!0}else return!1}function bB(n,e){if(n.snap)return rr(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&rr(rn(n.path,t),e))return!0;return!1}function wB(n){n.visibleWrites=jM(n.allWrites,CB,pt()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function CB(n){return n.visible}function jM(n,e,t){let i=Mr.empty();for(let r=0;r<n.length;++r){const o=n[r];if(e(o)){const l=o.path;let c;if(o.snap)rr(t,l)?(c=Ei(t,l),i=Lf(i,c,o.snap)):rr(l,t)&&(c=Ei(l,t),i=Lf(i,pt(),o.snap.getChild(c)));else if(o.children){if(rr(t,l))c=Ei(t,l),i=_R(i,c,o.children);else if(rr(l,t))if(c=Ei(l,t),Je(c))i=_R(i,pt(),o.children);else{const f=Tc(o.children,Ye(c));if(f){const d=f.getChild(Dt(c));i=Lf(i,pt(),d)}}}else throw Wc("WriteRecord should have .snap or .children")}}return i}function zM(n,e,t,i,r){if(!i&&!r){const o=Kl(n.visibleWrites,e);if(o!=null)return o;{const l=oa(n.visibleWrites,e);if($E(l))return t;if(t==null&&!KE(l,pt()))return null;{const c=t||Ve.EMPTY_NODE;return Cc(l,c)}}}else{const o=oa(n.visibleWrites,e);if(!r&&$E(o))return t;if(!r&&t==null&&!KE(o,pt()))return null;{const l=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(rr(d.path,e)||rr(e,d.path))},c=jM(n.allWrites,l,e),f=t||Ve.EMPTY_NODE;return Cc(c,f)}}}function AB(n,e,t){let i=Ve.EMPTY_NODE;const r=Kl(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Kt,(o,l)=>{i=i.updateImmediateChild(o,l)}),i;if(t){const o=oa(n.visibleWrites,e);return t.forEachChild(Kt,(l,c)=>{const f=Cc(oa(o,new bt(l)),c);i=i.updateImmediateChild(l,f)}),ER(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const o=oa(n.visibleWrites,e);return ER(o).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function IB(n,e,t,i,r){ye(i||r,"Either existingEventSnap or existingServerSnap must exist");const o=rn(e,t);if(KE(n.visibleWrites,o))return null;{const l=oa(n.visibleWrites,o);return $E(l)?r.getChild(t):Cc(l,r.getChild(t))}}function RB(n,e,t,i){const r=rn(e,t),o=Kl(n.visibleWrites,r);if(o!=null)return o;if(i.isCompleteForChild(t)){const l=oa(n.visibleWrites,r);return Cc(l,i.getNode().getImmediateChild(t))}else return null}function xB(n,e){return Kl(n.visibleWrites,e)}function DB(n,e,t,i,r,o,l){let c;const f=oa(n.visibleWrites,e),d=Kl(f,pt());if(d!=null)c=d;else if(t!=null)c=Cc(f,t);else return[];if(c=c.withIndex(l),!c.isEmpty()&&!c.isLeafNode()){const g=[],_=l.getCompare(),v=o?c.getReverseIteratorFrom(i,l):c.getIteratorFrom(i,l);let b=v.getNext();for(;b&&g.length<r;)_(b,i)!==0&&g.push(b),b=v.getNext();return g}else return[]}function NB(){return{visibleWrites:Mr.empty(),allWrites:[],lastWriteId:-1}}function Ug(n,e,t,i){return zM(n.writeTree,n.treePath,e,t,i)}function VS(n,e){return AB(n.writeTree,n.treePath,e)}function TR(n,e,t,i){return IB(n.writeTree,n.treePath,e,t,i)}function Fg(n,e){return xB(n.writeTree,rn(n.treePath,e))}function MB(n,e,t,i,r,o){return DB(n.writeTree,n.treePath,e,t,i,r,o)}function kS(n,e,t){return RB(n.writeTree,n.treePath,e,t)}function qM(n,e){return HM(rn(n.treePath,e),n.writeTree)}function HM(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;ye(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ye(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const o=r.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(i,ld(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(i,ad(i,r.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(i,wc(i,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(i,ld(i,e.snapshotNode,r.oldSnap));else throw Wc("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const GM=new OB;class LS{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Ml(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return kS(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Pl(this.viewCache_),o=MB(this.writes_,r,t,1,i,e);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VB(n){return{filter:n}}function kB(n,e){ye(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ye(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function LB(n,e,t,i,r){const o=new PB;let l,c;if(t.type===Dr.OVERWRITE){const d=t;d.source.fromUser?l=WE(n,e,d.path,d.snap,i,r,o):(ye(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered()&&!Je(d.path),l=Bg(n,e,d.path,d.snap,i,r,c,o))}else if(t.type===Dr.MERGE){const d=t;d.source.fromUser?l=FB(n,e,d.path,d.children,i,r,o):(ye(d.source.fromServer,"Unknown source."),c=d.source.tagged||e.serverCache.isFiltered(),l=YE(n,e,d.path,d.children,i,r,c,o))}else if(t.type===Dr.ACK_USER_WRITE){const d=t;d.revert?l=zB(n,e,d.path,i,r,o):l=BB(n,e,d.path,d.affectedTree,i,r,o)}else if(t.type===Dr.LISTEN_COMPLETE)l=jB(n,e,t.path,i,o);else throw Wc("Unknown operation type: "+t.type);const f=o.getChanges();return UB(e,l,f),{viewCache:l,changes:f}}function UB(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=GE(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(LM(GE(e)))}}function KM(n,e,t,i,r,o){const l=e.eventCache;if(Fg(i,t)!=null)return e;{let c,f;if(Je(t))if(ye(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=Pl(e),g=d instanceof Ve?d:Ve.EMPTY_NODE,_=VS(i,g);c=n.filter.updateFullNode(e.eventCache.getNode(),_,o)}else{const d=Ug(i,Pl(e));c=n.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{const d=Ye(t);if(d===".priority"){ye(fa(t)===1,"Can't have a priority with additional path components");const g=l.getNode();f=e.serverCache.getNode();const _=TR(i,t,g,f);_!=null?c=n.filter.updatePriority(g,_):c=l.getNode()}else{const g=Dt(t);let _;if(l.isCompleteForChild(d)){f=e.serverCache.getNode();const v=TR(i,t,l.getNode(),f);v!=null?_=l.getNode().getImmediateChild(d).updateChild(g,v):_=l.getNode().getImmediateChild(d)}else _=kS(i,d,e.serverCache);_!=null?c=n.filter.updateChild(l.getNode(),d,_,g,r,o):c=l.getNode()}}return kf(e,c,l.isFullyInitialized()||Je(t),n.filter.filtersNodes())}}function Bg(n,e,t,i,r,o,l,c){const f=e.serverCache;let d;const g=l?n.filter:n.filter.getIndexedFilter();if(Je(t))d=g.updateFullNode(f.getNode(),i,null);else if(g.filtersNodes()&&!f.isFiltered()){const b=f.getNode().updateChild(t,i);d=g.updateFullNode(f.getNode(),b,null)}else{const b=Ye(t);if(!f.isCompleteForPath(t)&&fa(t)>1)return e;const C=Dt(t),N=f.getNode().getImmediateChild(b).updateChild(C,i);b===".priority"?d=g.updatePriority(f.getNode(),N):d=g.updateChild(f.getNode(),b,N,C,GM,null)}const _=FM(e,d,f.isFullyInitialized()||Je(t),g.filtersNodes()),v=new LS(r,_,o);return KM(n,_,t,r,v,c)}function WE(n,e,t,i,r,o,l){const c=e.eventCache;let f,d;const g=new LS(r,e,o);if(Je(t))d=n.filter.updateFullNode(e.eventCache.getNode(),i,l),f=kf(e,d,!0,n.filter.filtersNodes());else{const _=Ye(t);if(_===".priority")d=n.filter.updatePriority(e.eventCache.getNode(),i),f=kf(e,d,c.isFullyInitialized(),c.isFiltered());else{const v=Dt(t),b=c.getNode().getImmediateChild(_);let C;if(Je(v))C=i;else{const D=g.getCompleteChild(_);D!=null?AS(v)===".priority"&&D.getChild(DM(v)).isEmpty()?C=D:C=D.updateChild(v,i):C=Ve.EMPTY_NODE}if(b.equals(C))f=e;else{const D=n.filter.updateChild(c.getNode(),_,C,v,g,l);f=kf(e,D,c.isFullyInitialized(),n.filter.filtersNodes())}}}return f}function SR(n,e){return n.eventCache.isCompleteForChild(e)}function FB(n,e,t,i,r,o,l){let c=e;return i.foreach((f,d)=>{const g=rn(t,f);SR(e,Ye(g))&&(c=WE(n,c,g,d,r,o,l))}),i.foreach((f,d)=>{const g=rn(t,f);SR(e,Ye(g))||(c=WE(n,c,g,d,r,o,l))}),c}function bR(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function YE(n,e,t,i,r,o,l,c){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f=e,d;Je(t)?d=i:d=new kt(null).setTree(t,i);const g=e.serverCache.getNode();return d.children.inorderTraversal((_,v)=>{if(g.hasChild(_)){const b=e.serverCache.getNode().getImmediateChild(_),C=bR(n,b,v);f=Bg(n,f,new bt(_),C,r,o,l,c)}}),d.children.inorderTraversal((_,v)=>{const b=!e.serverCache.isCompleteForChild(_)&&v.value===null;if(!g.hasChild(_)&&!b){const C=e.serverCache.getNode().getImmediateChild(_),D=bR(n,C,v);f=Bg(n,f,new bt(_),D,r,o,l,c)}}),f}function BB(n,e,t,i,r,o,l){if(Fg(r,t)!=null)return e;const c=e.serverCache.isFiltered(),f=e.serverCache;if(i.value!=null){if(Je(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return Bg(n,e,t,f.getNode().getChild(t),r,o,c,l);if(Je(t)){let d=new kt(null);return f.getNode().forEachChild(hc,(g,_)=>{d=d.set(new bt(g),_)}),YE(n,e,t,d,r,o,c,l)}else return e}else{let d=new kt(null);return i.foreach((g,_)=>{const v=rn(t,g);f.isCompleteForPath(v)&&(d=d.set(g,f.getNode().getChild(v)))}),YE(n,e,t,d,r,o,c,l)}}function jB(n,e,t,i,r){const o=e.serverCache,l=FM(e,o.getNode(),o.isFullyInitialized()||Je(t),o.isFiltered());return KM(n,l,t,i,GM,r)}function zB(n,e,t,i,r,o){let l;if(Fg(i,t)!=null)return e;{const c=new LS(i,e,r),f=e.eventCache.getNode();let d;if(Je(t)||Ye(t)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=Ug(i,Pl(e));else{const _=e.serverCache.getNode();ye(_ instanceof Ve,"serverChildren would be complete if leaf node"),g=VS(i,_)}g=g,d=n.filter.updateFullNode(f,g,o)}else{const g=Ye(t);let _=kS(i,g,e.serverCache);_==null&&e.serverCache.isCompleteForChild(g)&&(_=f.getImmediateChild(g)),_!=null?d=n.filter.updateChild(f,g,_,Dt(t),c,o):e.eventCache.getNode().hasChild(g)?d=n.filter.updateChild(f,g,Ve.EMPTY_NODE,Dt(t),c,o):d=f,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=Ug(i,Pl(e)),l.isLeafNode()&&(d=n.filter.updateFullNode(d,l,o)))}return l=e.serverCache.isFullyInitialized()||Fg(i,pt())!=null,kf(e,d,l,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new DS(i.getIndex()),o=lB(i);this.processor_=VB(o);const l=t.serverCache,c=t.eventCache,f=r.updateFullNode(Ve.EMPTY_NODE,l.getNode(),null),d=o.updateFullNode(Ve.EMPTY_NODE,c.getNode(),null),g=new Ml(f,l.isFullyInitialized(),r.filtersNodes()),_=new Ml(d,c.isFullyInitialized(),o.filtersNodes());this.viewCache_=qy(_,g),this.eventGenerator_=new pB(this.query_)}get query(){return this.query_}}function HB(n){return n.viewCache_.serverCache.getNode()}function GB(n,e){const t=Pl(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Je(e)&&!t.getImmediateChild(Ye(e)).isEmpty())?t.getChild(e):null}function wR(n){return n.eventRegistrations_.length===0}function KB(n,e){n.eventRegistrations_.push(e)}function CR(n,e,t){const i=[];if(t){ye(e==null,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(o=>{const l=o.createCancelEvent(t,r);l&&i.push(l)})}if(e){let r=[];for(let o=0;o<n.eventRegistrations_.length;++o){const l=n.eventRegistrations_[o];if(!l.matches(e))r.push(l);else if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(o+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function AR(n,e,t,i){e.type===Dr.MERGE&&e.source.queryId!==null&&(ye(Pl(n.viewCache_),"We should always have a full cache before handling merges"),ye(GE(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,o=LB(n.processor_,r,e,t,i);return kB(n.processor_,o.viewCache),ye(o.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,$M(n,o.changes,o.viewCache.eventCache.getNode(),null)}function $B(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Kt,(o,l)=>{i.push(wc(o,l))}),t.isFullyInitialized()&&i.push(LM(t.getNode())),$M(n,i,t.getNode(),e)}function $M(n,e,t,i){const r=i?[i]:n.eventRegistrations_;return gB(n.eventGenerator_,e,t,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jg;class WB{constructor(){this.views=new Map}}function YB(n){ye(!jg,"__referenceConstructor has already been defined"),jg=n}function QB(){return ye(jg,"Reference.ts has not been loaded"),jg}function XB(n){return n.views.size===0}function US(n,e,t,i){const r=e.source.queryId;if(r!==null){const o=n.views.get(r);return ye(o!=null,"SyncTree gave us an op for an invalid query."),AR(o,e,t,i)}else{let o=[];for(const l of n.views.values())o=o.concat(AR(l,e,t,i));return o}}function JB(n,e,t,i,r){const o=e._queryIdentifier,l=n.views.get(o);if(!l){let c=Ug(t,r?i:null),f=!1;c?f=!0:i instanceof Ve?(c=VS(t,i),f=!1):(c=Ve.EMPTY_NODE,f=!1);const d=qy(new Ml(c,f,!1),new Ml(i,r,!1));return new qB(e,d)}return l}function ZB(n,e,t,i,r,o){const l=JB(n,e,i,r,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),KB(l,t),$B(l,t)}function ej(n,e,t,i){const r=e._queryIdentifier,o=[];let l=[];const c=da(n);if(r==="default")for(const[f,d]of n.views.entries())l=l.concat(CR(d,t,i)),wR(d)&&(n.views.delete(f),d.query._queryParams.loadsAllData()||o.push(d.query));else{const f=n.views.get(r);f&&(l=l.concat(CR(f,t,i)),wR(f)&&(n.views.delete(r),f.query._queryParams.loadsAllData()||o.push(f.query)))}return c&&!da(n)&&o.push(new(QB())(e._repo,e._path)),{removed:o,events:l}}function WM(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function fc(n,e){let t=null;for(const i of n.views.values())t=t||GB(i,e);return t}function YM(n,e){if(e._queryParams.loadsAllData())return Hy(n);{const i=e._queryIdentifier;return n.views.get(i)}}function QM(n,e){return YM(n,e)!=null}function da(n){return Hy(n)!=null}function Hy(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zg;function tj(n){ye(!zg,"__referenceConstructor has already been defined"),zg=n}function nj(){return ye(zg,"Reference.ts has not been loaded"),zg}let ij=1;class IR{constructor(e){this.listenProvider_=e,this.syncPointTree_=new kt(null),this.pendingWriteTree_=NB(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function XM(n,e,t,i,r){return EB(n.pendingWriteTree_,e,t,i,r),r?qd(n,new Nl(UM(),e,t)):[]}function gl(n,e,t=!1){const i=TB(n.pendingWriteTree_,e);if(SB(n.pendingWriteTree_,e)){let o=new kt(null);return i.snap!=null?o=o.set(pt(),!0):Jn(i.children,l=>{o=o.set(new bt(l),!0)}),qd(n,new Lg(i.path,o,t))}else return[]}function Gy(n,e,t){return qd(n,new Nl(MS(),e,t))}function rj(n,e,t){const i=kt.fromObject(t);return qd(n,new hd(MS(),e,i))}function sj(n,e){return qd(n,new cd(MS(),e))}function oj(n,e,t){const i=BS(n,t);if(i){const r=jS(i),o=r.path,l=r.queryId,c=Ei(o,e),f=new cd(PS(l),c);return zS(n,o,f)}else return[]}function QE(n,e,t,i,r=!1){const o=e._path,l=n.syncPointTree_.get(o);let c=[];if(l&&(e._queryIdentifier==="default"||QM(l,e))){const f=ej(l,e,t,i);XB(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const d=f.removed;if(c=f.events,!r){const g=d.findIndex(v=>v._queryParams.loadsAllData())!==-1,_=n.syncPointTree_.findOnPath(o,(v,b)=>da(b));if(g&&!_){const v=n.syncPointTree_.subtree(o);if(!v.isEmpty()){const b=uj(v);for(let C=0;C<b.length;++C){const D=b[C],N=D.query,B=eP(n,D);n.listenProvider_.startListening(Uf(N),qg(n,N),B.hashFn,B.onComplete)}}}!_&&d.length>0&&!i&&(g?n.listenProvider_.stopListening(Uf(e),null):d.forEach(v=>{const b=n.queryToTagMap.get(Ky(v));n.listenProvider_.stopListening(Uf(v),b)}))}cj(n,d)}return c}function aj(n,e,t,i){const r=BS(n,i);if(r!=null){const o=jS(r),l=o.path,c=o.queryId,f=Ei(l,e),d=new Nl(PS(c),f,t);return zS(n,l,d)}else return[]}function lj(n,e,t,i){const r=BS(n,i);if(r){const o=jS(r),l=o.path,c=o.queryId,f=Ei(l,e),d=kt.fromObject(t),g=new hd(PS(c),f,d);return zS(n,l,g)}else return[]}function RR(n,e,t,i=!1){const r=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(r,(v,b)=>{const C=Ei(v,r);o=o||fc(b,C),l=l||da(b)});let c=n.syncPointTree_.get(r);c?(l=l||da(c),o=o||fc(c,pt())):(c=new WB,n.syncPointTree_=n.syncPointTree_.set(r,c));let f;o!=null?f=!0:(f=!1,o=Ve.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((b,C)=>{const D=fc(C,pt());D&&(o=o.updateImmediateChild(b,D))}));const d=QM(c,e);if(!d&&!e._queryParams.loadsAllData()){const v=Ky(e);ye(!n.queryToTagMap.has(v),"View does not exist, but we have a tag");const b=hj();n.queryToTagMap.set(v,b),n.tagToQueryMap.set(b,v)}const g=OS(n.pendingWriteTree_,r);let _=ZB(c,e,t,g,o,f);if(!d&&!l&&!i){const v=YM(c,e);_=_.concat(fj(n,e,v))}return _}function FS(n,e,t){const r=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(l,c)=>{const f=Ei(l,e),d=fc(c,f);if(d)return d});return zM(r,e,o,t,!0)}function qd(n,e){return JM(e,n.syncPointTree_,null,OS(n.pendingWriteTree_,pt()))}function JM(n,e,t,i){if(Je(n.path))return ZM(n,e,t,i);{const r=e.get(pt());t==null&&r!=null&&(t=fc(r,pt()));let o=[];const l=Ye(n.path),c=n.operationForChild(l),f=e.children.get(l);if(f&&c){const d=t?t.getImmediateChild(l):null,g=qM(i,l);o=o.concat(JM(c,f,d,g))}return r&&(o=o.concat(US(r,n,i,t))),o}}function ZM(n,e,t,i){const r=e.get(pt());t==null&&r!=null&&(t=fc(r,pt()));let o=[];return e.children.inorderTraversal((l,c)=>{const f=t?t.getImmediateChild(l):null,d=qM(i,l),g=n.operationForChild(l);g&&(o=o.concat(ZM(g,c,f,d)))}),r&&(o=o.concat(US(r,n,i,t))),o}function eP(n,e){const t=e.query,i=qg(n,t);return{hashFn:()=>(HB(e)||Ve.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?oj(n,t._path,i):sj(n,t._path);{const o=oF(r,t);return QE(n,t,null,o)}}}}function qg(n,e){const t=Ky(e);return n.queryToTagMap.get(t)}function Ky(n){return n._path.toString()+"$"+n._queryIdentifier}function BS(n,e){return n.tagToQueryMap.get(e)}function jS(n){const e=n.indexOf("$");return ye(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new bt(n.substr(0,e))}}function zS(n,e,t){const i=n.syncPointTree_.get(e);ye(i,"Missing sync point for query tag that we're tracking");const r=OS(n.pendingWriteTree_,e);return US(i,t,r,null)}function uj(n){return n.fold((e,t,i)=>{if(t&&da(t))return[Hy(t)];{let r=[];return t&&(r=WM(t)),Jn(i,(o,l)=>{r=r.concat(l)}),r}})}function Uf(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(nj())(n._repo,n._path):n}function cj(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=Ky(i),o=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(o)}}}function hj(){return ij++}function fj(n,e,t){const i=e._path,r=qg(n,e),o=eP(n,t),l=n.listenProvider_.startListening(Uf(e),r,o.hashFn,o.onComplete),c=n.syncPointTree_.subtree(i);if(r)ye(!da(c.value),"If we're adding a query, it shouldn't be shadowed");else{const f=c.fold((d,g,_)=>{if(!Je(d)&&g&&da(g))return[Hy(g).query];{let v=[];return g&&(v=v.concat(WM(g).map(b=>b.query))),Jn(_,(b,C)=>{v=v.concat(C)}),v}});for(let d=0;d<f.length;++d){const g=f[d];n.listenProvider_.stopListening(Uf(g),qg(n,g))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new qS(t)}node(){return this.node_}}class HS{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=rn(this.path_,e);return new HS(this.syncTree_,t)}node(){return FS(this.syncTree_,this.path_)}}const dj=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},xR=function(n,e,t){if(!n||typeof n!="object")return n;if(ye(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return mj(n[".sv"],e,t);if(typeof n[".sv"]=="object")return pj(n[".sv"],e);ye(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},mj=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ye(!1,"Unexpected server value: "+n)}},pj=function(n,e,t){n.hasOwnProperty("increment")||ye(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ye(!1,"Unexpected increment value: "+i);const r=e.node();if(ye(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return typeof l!="number"?i:l+i},gj=function(n,e,t,i){return GS(e,new HS(t,n),i)},tP=function(n,e,t){return GS(n,new qS(e),t)};function GS(n,e,t){const i=n.getPriority().val(),r=xR(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const l=n,c=xR(l.getValue(),e,t);return c!==l.getValue()||r!==l.getPriority().val()?new Mn(c,yn(r)):n}else{const l=n;return o=l,r!==l.getPriority().val()&&(o=o.updatePriority(new Mn(r))),l.forEachChild(Kt,(c,f)=>{const d=GS(f,e.getImmediateChild(c),t);d!==f&&(o=o.updateImmediateChild(c,d))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function $S(n,e){let t=e instanceof bt?e:new bt(e),i=n,r=Ye(t);for(;r!==null;){const o=Tc(i.node.children,r)||{children:{},childCount:0};i=new KS(r,i,o),t=Dt(t),r=Ye(t)}return i}function Jc(n){return n.node.value}function nP(n,e){n.node.value=e,XE(n)}function iP(n){return n.node.childCount>0}function yj(n){return Jc(n)===void 0&&!iP(n)}function $y(n,e){Jn(n.node.children,(t,i)=>{e(new KS(t,n,i))})}function rP(n,e,t,i){t&&e(n),$y(n,r=>{rP(r,e,!0)})}function _j(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Hd(n){return new bt(n.parent===null?n.name:Hd(n.parent)+"/"+n.name)}function XE(n){n.parent!==null&&vj(n.parent,n.name,n)}function vj(n,e,t){const i=yj(t),r=gs(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,XE(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,XE(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=/[\[\].#$\/\u0000-\u001F\u007F]/,Tj=/[\[\].#$\u0000-\u001F\u007F]/,G0=10*1024*1024,WS=function(n){return typeof n=="string"&&n.length!==0&&!Ej.test(n)},sP=function(n){return typeof n=="string"&&n.length!==0&&!Tj.test(n)},Sj=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sP(n)},oP=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!jy(n)||n&&typeof n=="object"&&gs(n,".sv")},JE=function(n,e,t,i){Wy(Sc(n,"value"),e,t)},Wy=function(n,e,t){const i=t instanceof bt?new BF(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+il(i));if(typeof e=="function")throw new Error(n+"contains a function "+il(i)+" with contents = "+e.toString());if(jy(e))throw new Error(n+"contains "+e.toString()+" "+il(i));if(typeof e=="string"&&e.length>G0/3&&Uy(e)>G0)throw new Error(n+"contains a string greater than "+G0+" utf8 bytes "+il(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,o=!1;if(Jn(e,(l,c)=>{if(l===".value")r=!0;else if(l!==".priority"&&l!==".sv"&&(o=!0,!WS(l)))throw new Error(n+" contains an invalid key ("+l+") "+il(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);jF(i,l),Wy(n,c,i),zF(i)}),r&&o)throw new Error(n+' contains ".value" child '+il(i)+" in addition to actual children.")}},bj=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const o=od(i);for(let l=0;l<o.length;l++)if(!(o[l]===".priority"&&l===o.length-1)){if(!WS(o[l]))throw new Error(n+"contains an invalid key ("+o[l]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(FF);let r=null;for(t=0;t<e.length;t++){if(i=e[t],r!==null&&rr(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},wj=function(n,e,t,i){const r=Sc(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const o=[];Jn(e,(l,c)=>{const f=new bt(l);if(Wy(r,c,rn(t,f)),AS(f)===".priority"&&!oP(c))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(f)}),bj(r,o)},Cj=function(n,e,t){if(jy(e))throw new Error(Sc(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!oP(e))throw new Error(Sc(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},aP=function(n,e,t,i){if(!sP(t))throw new Error(Sc(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Aj=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),aP(n,e,t)},Cf=function(n,e){if(Ye(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},Ij=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!WS(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!Sj(t))throw new Error(Sc(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function YS(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],o=r.getPath();t!==null&&!IS(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(r)}t&&n.eventLists_.push(t)}function lP(n,e,t){YS(n,t),uP(n,i=>IS(i,e))}function Zs(n,e,t){YS(n,t),uP(n,i=>rr(i,e)||rr(e,i))}function uP(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];if(r){const o=r.path;e(o)?(xj(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function xj(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Of&&Hn("event: "+t.toString()),Qc(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj="repo_interrupt",Nj=25;class Mj{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Rj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=kg(),this.transactionQueueTree_=new KS,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Pj(n,e,t){if(n.stats_=wS(n.repoInfo_),n.forceRestClient_||cF())n.server_=new Vg(n.repoInfo_,(i,r,o,l)=>{DR(n,i,r,o,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>NR(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{On(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Ks(n.repoInfo_,e,(i,r,o,l)=>{DR(n,i,r,o,l)},i=>{NR(n,i)},i=>{Vj(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=pF(n.repoInfo_,()=>new mB(n.stats_,n.server_)),n.infoData_=new uB,n.infoSyncTree_=new IR({startListening:(i,r,o,l)=>{let c=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(c=Gy(n.infoSyncTree_,i._path,f),setTimeout(()=>{l("ok")},0)),c},stopListening:()=>{}}),XS(n,"connected",!1),n.serverSyncTree_=new IR({startListening:(i,r,o,l)=>(n.server_.listen(i,o,r,(c,f)=>{const d=l(c,f);Zs(n.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function Oj(n){const t=n.infoData_.getNode(new bt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function QS(n){return dj({timestamp:Oj(n)})}function DR(n,e,t,i,r){n.dataUpdateCount++;const o=new bt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(r)if(i){const f=Dg(t,d=>yn(d));l=lj(n.serverSyncTree_,o,f,r)}else{const f=yn(t);l=aj(n.serverSyncTree_,o,f,r)}else if(i){const f=Dg(t,d=>yn(d));l=rj(n.serverSyncTree_,o,f)}else{const f=yn(t);l=Gy(n.serverSyncTree_,o,f)}let c=o;l.length>0&&(c=Yy(n,o)),Zs(n.eventQueue_,c,l)}function NR(n,e){XS(n,"connected",e),e===!1&&Lj(n)}function Vj(n,e){Jn(e,(t,i)=>{XS(n,t,i)})}function XS(n,e,t){const i=new bt("/.info/"+e),r=yn(t);n.infoData_.updateSnapshot(i,r);const o=Gy(n.infoSyncTree_,i,r);Zs(n.eventQueue_,i,o)}function cP(n){return n.nextWriteId_++}function kj(n,e,t,i,r){JS(n,"set",{path:e.toString(),value:t,priority:i});const o=QS(n),l=yn(t,i),c=FS(n.serverSyncTree_,e),f=tP(l,c,o),d=cP(n),g=XM(n.serverSyncTree_,e,f,d,!0);YS(n.eventQueue_,g),n.server_.put(e.toString(),l.val(!0),(v,b)=>{const C=v==="ok";C||bi("set at "+e+" failed: "+v);const D=gl(n.serverSyncTree_,d,!C);Zs(n.eventQueue_,e,D),Ac(n,r,v,b)});const _=pP(n,e);Yy(n,_),Zs(n.eventQueue_,_,[])}function Lj(n){JS(n,"onDisconnectEvents");const e=QS(n),t=kg();HE(n.onDisconnect_,pt(),(r,o)=>{const l=gj(r,o,n.serverSyncTree_,e);Xc(t,r,l)});let i=[];HE(t,pt(),(r,o)=>{i=i.concat(Gy(n.serverSyncTree_,r,o));const l=pP(n,r);Yy(n,l)}),n.onDisconnect_=kg(),Zs(n.eventQueue_,pt(),i)}function Uj(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{i==="ok"&&qE(n.onDisconnect_,e),Ac(n,t,i,r)})}function MR(n,e,t,i){const r=yn(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(o,l)=>{o==="ok"&&Xc(n.onDisconnect_,e,r),Ac(n,i,o,l)})}function Fj(n,e,t,i,r){const o=yn(t,i);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,c)=>{l==="ok"&&Xc(n.onDisconnect_,e,o),Ac(n,r,l,c)})}function Bj(n,e,t,i){if(xg(t)){Hn("onDisconnect().update() called with empty data.  Don't do anything."),Ac(n,i,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(r,o)=>{r==="ok"&&Jn(t,(l,c)=>{const f=yn(c);Xc(n.onDisconnect_,rn(e,l),f)}),Ac(n,i,r,o)})}function jj(n,e,t){let i;Ye(e._path)===".info"?i=RR(n.infoSyncTree_,e,t):i=RR(n.serverSyncTree_,e,t),lP(n.eventQueue_,e._path,i)}function zj(n,e,t){let i;Ye(e._path)===".info"?i=QE(n.infoSyncTree_,e,t):i=QE(n.serverSyncTree_,e,t),lP(n.eventQueue_,e._path,i)}function qj(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Dj)}function JS(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Hn(t,...e)}function Ac(n,e,t,i){e&&Qc(()=>{if(t==="ok")e(null);else{const r=(t||"error").toUpperCase();let o=r;i&&(o+=": "+i);const l=new Error(o);l.code=r,e(l)}})}function hP(n,e,t){return FS(n.serverSyncTree_,e,t)||Ve.EMPTY_NODE}function ZS(n,e=n.transactionQueueTree_){if(e||Qy(n,e),Jc(e)){const t=dP(n,e);ye(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&Hj(n,Hd(e),t)}else iP(e)&&$y(e,t=>{ZS(n,t)})}function Hj(n,e,t){const i=t.map(d=>d.currentWriteId),r=hP(n,e,i);let o=r;const l=r.hash();for(let d=0;d<t.length;d++){const g=t[d];ye(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const _=Ei(e,g.path);o=o.updateChild(_,g.currentOutputSnapshotRaw)}const c=o.val(!0),f=e;n.server_.put(f.toString(),c,d=>{JS(n,"transaction put response",{path:f.toString(),status:d});let g=[];if(d==="ok"){const _=[];for(let v=0;v<t.length;v++)t[v].status=2,g=g.concat(gl(n.serverSyncTree_,t[v].currentWriteId)),t[v].onComplete&&_.push(()=>t[v].onComplete(null,!0,t[v].currentOutputSnapshotResolved)),t[v].unwatcher();Qy(n,$S(n.transactionQueueTree_,e)),ZS(n,n.transactionQueueTree_),Zs(n.eventQueue_,e,g);for(let v=0;v<_.length;v++)Qc(_[v])}else{if(d==="datastale")for(let _=0;_<t.length;_++)t[_].status===3?t[_].status=4:t[_].status=0;else{bi("transaction at "+f.toString()+" failed: "+d);for(let _=0;_<t.length;_++)t[_].status=4,t[_].abortReason=d}Yy(n,e)}},l)}function Yy(n,e){const t=fP(n,e),i=Hd(t),r=dP(n,t);return Gj(n,r,i),i}function Gj(n,e,t){if(e.length===0)return;const i=[];let r=[];const l=e.filter(c=>c.status===0).map(c=>c.currentWriteId);for(let c=0;c<e.length;c++){const f=e[c],d=Ei(t,f.path);let g=!1,_;if(ye(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)g=!0,_=f.abortReason,r=r.concat(gl(n.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=Nj)g=!0,_="maxretry",r=r.concat(gl(n.serverSyncTree_,f.currentWriteId,!0));else{const v=hP(n,f.path,l);f.currentInputSnapshot=v;const b=e[c].update(v.val());if(b!==void 0){Wy("transaction failed: Data returned ",b,f.path);let C=yn(b);typeof b=="object"&&b!=null&&gs(b,".priority")||(C=C.updatePriority(v.getPriority()));const N=f.currentWriteId,B=QS(n),V=tP(C,v,B);f.currentOutputSnapshotRaw=C,f.currentOutputSnapshotResolved=V,f.currentWriteId=cP(n),l.splice(l.indexOf(N),1),r=r.concat(XM(n.serverSyncTree_,f.path,V,f.currentWriteId,f.applyLocally)),r=r.concat(gl(n.serverSyncTree_,N,!0))}else g=!0,_="nodata",r=r.concat(gl(n.serverSyncTree_,f.currentWriteId,!0))}Zs(n.eventQueue_,t,r),r=[],g&&(e[c].status=2,(function(v){setTimeout(v,Math.floor(0))})(e[c].unwatcher),e[c].onComplete&&(_==="nodata"?i.push(()=>e[c].onComplete(null,!1,e[c].currentInputSnapshot)):i.push(()=>e[c].onComplete(new Error(_),!1,null))))}Qy(n,n.transactionQueueTree_);for(let c=0;c<i.length;c++)Qc(i[c]);ZS(n,n.transactionQueueTree_)}function fP(n,e){let t,i=n.transactionQueueTree_;for(t=Ye(e);t!==null&&Jc(i)===void 0;)i=$S(i,t),e=Dt(e),t=Ye(e);return i}function dP(n,e){const t=[];return mP(n,e,t),t.sort((i,r)=>i.order-r.order),t}function mP(n,e,t){const i=Jc(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);$y(e,r=>{mP(n,r,t)})}function Qy(n,e){const t=Jc(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,nP(e,t.length>0?t:void 0)}$y(e,i=>{Qy(n,i)})}function pP(n,e){const t=Hd(fP(n,e)),i=$S(n.transactionQueueTree_,e);return _j(i,r=>{K0(n,r)}),K0(n,i),rP(i,r=>{K0(n,r)}),t}function K0(n,e){const t=Jc(e);if(t){const i=[];let r=[],o=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(ye(o===l-1,"All SENT items should be at beginning of queue."),o=l,t[l].status=3,t[l].abortReason="set"):(ye(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),r=r.concat(gl(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&i.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));o===-1?nP(e,void 0):t.length=o+1,Zs(n.eventQueue_,Hd(e),r);for(let l=0;l<i.length;l++)Qc(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function $j(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):bi(`Invalid query segment '${t}' in query '${n}'`)}return e}const PR=function(n,e){const t=Wj(n),i=t.namespace;t.domain==="firebase.com"&&Js(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Js("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||tF();const r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new TM(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new bt(t.pathString)}},Wj=function(n){let e="",t="",i="",r="",o="",l=!0,c="https",f=443;if(typeof n=="string"){let d=n.indexOf("//");d>=0&&(c=n.substring(0,d-1),n=n.substring(d+2));let g=n.indexOf("/");g===-1&&(g=n.length);let _=n.indexOf("?");_===-1&&(_=n.length),e=n.substring(0,Math.min(g,_)),g<_&&(r=Kj(n.substring(g,_)));const v=$j(n.substring(Math.min(n.length,_)));d=e.indexOf(":"),d>=0?(l=c==="https"||c==="wss",f=parseInt(e.substring(d+1),10)):d=e.length;const b=e.slice(0,d);if(b.toLowerCase()==="localhost")t="localhost";else if(b.split(".").length<=2)t=b;else{const C=e.indexOf(".");i=e.substring(0,C).toLowerCase(),t=e.substring(C+1),o=i}"ns"in v&&(o=v.ns)}return{host:e,port:f,domain:t,subdomain:i,secure:l,scheme:c,pathString:r,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+On(this.snapshot.exportVal())}}class Qj{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ye(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new Fs;return Uj(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Cf("OnDisconnect.remove",this._path);const e=new Fs;return MR(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Cf("OnDisconnect.set",this._path),JE("OnDisconnect.set",e,this._path);const t=new Fs;return MR(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Cf("OnDisconnect.setWithPriority",this._path),JE("OnDisconnect.setWithPriority",e,this._path),Cj("OnDisconnect.setWithPriority",t);const i=new Fs;return Fj(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Cf("OnDisconnect.update",this._path),wj("OnDisconnect.update",e,this._path);const t=new Fs;return Bj(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Je(this._path)?null:AS(this._path)}get ref(){return new Sa(this._repo,this._path)}get _queryIdentifier(){const e=gR(this._queryParams),t=SS(e);return t==="{}"?"default":t}get _queryObject(){return gR(this._queryParams)}isEqual(e){if(e=Cn(e),!(e instanceof eb))return!1;const t=this._repo===e._repo,i=IS(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+UF(this._path)}}class Sa extends eb{constructor(e,t){super(e,t,new NS,!1)}get parent(){const e=DM(this._path);return e===null?null:new Sa(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Hg{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new bt(e),i=ZE(this.ref,e);return new Hg(this._node.getChild(t),i,Kt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new Hg(r,ZE(this.ref,i),Kt)))}hasChild(e){const t=new bt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function OR(n,e){return n=Cn(n),n._checkNotDeleted("ref"),e!==void 0?ZE(n._root,e):n._root}function ZE(n,e){return n=Cn(n),Ye(n._path)===null?Aj("child","path",e):aP("child","path",e),new Sa(n._repo,rn(n._path,e))}function Zj(n){return n=Cn(n),new Jj(n._repo,n._path)}function VR(n,e){n=Cn(n),Cf("set",n._path),JE("set",e,n._path);const t=new Fs;return kj(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}class tb{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new Yj("value",this,new Hg(e.snapshotNode,new Sa(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Qj(this,e,t):null}matches(e){return e instanceof tb?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function ez(n,e,t,i,r){const o=new Xj(t,void 0),l=new tb(o);return jj(n._repo,n,l),()=>zj(n._repo,n,l)}function tz(n,e,t,i){return ez(n,"value",e)}YB(Sa);tj(Sa);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nz="FIREBASE_DATABASE_EMULATOR_HOST",eT={};let iz=!1;function rz(n,e,t,i){const r=e.lastIndexOf(":"),o=e.substring(0,r),l=Ta(o);n.repoInfo_=new TM(e,l,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function sz(n,e,t,i,r){let o=i||n.options.databaseURL;o===void 0&&(n.options.projectId||Js("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=PR(o,r),c=l.repoInfo,f;typeof process<"u"&&JI&&(f=JI[nz]),f?(o=`http://${f}?ns=${c.namespace}`,l=PR(o,r),c=l.repoInfo):l.repoInfo.secure;const d=new fF(n.name,n.options,e);Ij("Invalid Firebase Database URL",l),Je(l.path)||Js("Database URL must point to the root of a Firebase Database (not including a child path).");const g=az(c,n,d,new hF(n,t));return new lz(g,n)}function oz(n,e){const t=eT[e];(!t||t[n.key]!==n)&&Js(`Database ${e}(${n.repoInfo_}) has already been deleted.`),qj(n),delete t[n.key]}function az(n,e,t,i){let r=eT[e.name];r||(r={},eT[e.name]=r);let o=r[n.toURLString()];return o&&Js("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Mj(n,iz,t,i),r[n.toURLString()]=o,o}class lz{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Pj(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Sa(this._repo,pt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(oz(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Js("Cannot call "+e+" on a deleted database.")}}function uz(n=rM(),e){const t=By(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=S9("database");i&&cz(t,...i)}return t}function cz(n,e,t,i={}){n=Cn(n),n._checkNotDeleted("useEmulator");const r=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(r===n._repoInternal.repoInfo_.host&&ca(i,o.repoInfo_.emulatorOptions))return;Js("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&Js('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new rg(rg.OWNER);else if(i.mockUserToken){const c=typeof i.mockUserToken=="string"?i.mockUserToken:b9(i.mockUserToken,n.app.options.projectId);l=new rg(c)}Ta(e)&&(vS(e),WN("Database",!0)),rz(o,r,i,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hz(n){YU(Hl),xl(new ha("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return sz(i,r,o,t)},"PUBLIC").setMultipleInstances(!0)),ls(ZI,eR,n),ls(ZI,eR,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz={".sv":"timestamp"};function dz(){return fz}Ks.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Ks.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};hz();var mz="firebase",pz="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ls(mz,pz,"app");function gP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gz=gP,yP=new Fd("auth","Firebase",gP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=new Fy("@firebase/auth");function yz(n,...e){Gg.logLevel<=nt.WARN&&Gg.warn(`Auth (${Hl}): ${n}`,...e)}function og(n,...e){Gg.logLevel<=nt.ERROR&&Gg.error(`Auth (${Hl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(n,...e){throw nb(n,...e)}function us(n,...e){return nb(n,...e)}function _P(n,e,t){const i={...gz(),[e]:t};return new Fd("auth","Firebase",i).create(e,{appName:n.name})}function Tl(n){return _P(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nb(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return yP.create(n,...e)}function Le(n,e,...t){if(!n)throw nb(e,...t)}function zs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw og(e),new Error(e)}function to(n,e){n||zs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(){return typeof self<"u"&&self.location?.href||""}function _z(){return kR()==="http:"||kR()==="https:"}function kR(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_z()||I9()||"connection"in navigator)?navigator.onLine:!0}function Ez(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,t){this.shortDelay=e,this.longDelay=t,to(t>e,"Short delay should be less than long delay!"),this.isMobile=ES()||QN()}get(){return vz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(n,e){to(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sz=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],bz=new Gd(3e4,6e4);function rb(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Zc(n,e,t,i,r={}){return EP(n,r,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const c=Yc({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const d={method:e,headers:f,...o};return A9()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Ta(n.emulatorConfig.host)&&(d.credentials="include"),vP.fetch()(await TP(n,n.config.apiHost,t,c),d)})}async function EP(n,e,t){n._canInitEmulator=!1;const i={...Tz,...e};try{const r=new Cz(n),o=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Lp(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[f,d]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lp(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw Lp(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw Lp(n,"user-disabled",l);const g=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw _P(n,g,d);eo(n,g)}}catch(r){if(r instanceof uo)throw r;eo(n,"network-request-failed",{message:String(r)})}}async function wz(n,e,t,i,r={}){const o=await Zc(n,e,t,i,r);return"mfaPendingCredential"in o&&eo(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function TP(n,e,t,i){const r=`${e}${t}?${i}`,o=n,l=o.config.emulator?ib(n.config,r):`${n.config.apiScheme}://${r}`;return Sz.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}class Cz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(us(this.auth,"network-request-failed")),bz.get())})}}function Lp(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=us(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Az(n,e){return Zc(n,"POST","/v1/accounts:delete",e)}async function Kg(n,e){return Zc(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Iz(n,e=!1){const t=Cn(n),i=await t.getIdToken(e),r=sb(i);Le(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,l=o?.sign_in_provider;return{claims:r,token:i,authTime:Ff($0(r.auth_time)),issuedAtTime:Ff($0(r.iat)),expirationTime:Ff($0(r.exp)),signInProvider:l||null,signInSecondFactor:o?.sign_in_second_factor||null}}function $0(n){return Number(n)*1e3}function sb(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return og("JWT malformed, contained fewer than 3 sections"),null;try{const r=Rg(t);return r?JSON.parse(r):(og("Failed to decode base64 JWT payload"),null)}catch(r){return og("Caught error parsing JWT payload as JSON",r?.toString()),null}}function LR(n){const e=sb(n);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fd(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof uo&&Rz(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Rz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ff(this.lastLoginAt),this.creationTime=Ff(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $g(n){const e=n.auth,t=await n.getIdToken(),i=await fd(n,Kg(e,{idToken:t}));Le(i?.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const o=r.providerUserInfo?.length?SP(r.providerUserInfo):[],l=Nz(n.providerData,o),c=n.isAnonymous,f=!(n.email&&r.passwordHash)&&!l?.length,d=c?f:!1,g={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new nT(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(n,g)}async function Dz(n){const e=Cn(n);await $g(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Nz(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function SP(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mz(n,e){const t=await EP(n,{},async()=>{const i=Yc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=n.config,l=await TP(n,r,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:i};return n.emulatorConfig&&Ta(n.emulatorConfig.host)&&(f.credentials="include"),vP.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Pz(n,e){return Zc(n,"POST","/v2/accounts:revokeToken",rb(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=LR(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:o}=await Mz(e,t);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:o}=t,l=new dc;return i&&(Le(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Le(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),o&&(Le(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dc,this.toJSON())}_performRefresh(){return zs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(n,e){Le(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Nr{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new xz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new nT(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await fd(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Iz(this,e)}reload(){return Dz(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Nr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await $g(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cr(this.auth.app))return Promise.reject(Tl(this.auth));const e=await this.getIdToken();return await fd(this,Az(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,f=t._redirectEventId??void 0,d=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:_,emailVerified:v,isAnonymous:b,providerData:C,stsTokenManager:D}=t;Le(_&&D,e,"internal-error");const N=dc.fromJSON(this.name,D);Le(typeof _=="string",e,"internal-error"),Go(i,e.name),Go(r,e.name),Le(typeof v=="boolean",e,"internal-error"),Le(typeof b=="boolean",e,"internal-error"),Go(o,e.name),Go(l,e.name),Go(c,e.name),Go(f,e.name),Go(d,e.name),Go(g,e.name);const B=new Nr({uid:_,auth:e,email:r,emailVerified:v,displayName:i,isAnonymous:b,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:N,createdAt:d,lastLoginAt:g});return C&&Array.isArray(C)&&(B.providerData=C.map(V=>({...V}))),f&&(B._redirectEventId=f),B}static async _fromIdTokenResponse(e,t,i=!1){const r=new dc;r.updateFromServerResponse(t);const o=new Nr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await $g(o),o}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Le(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?SP(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!o?.length,c=new dc;c.updateFromIdToken(i);const f=new Nr({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:l}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new nT(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!o?.length};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=new Map;function qs(n){to(n instanceof Function,"Expected a class definition");let e=UR.get(n);return e?(to(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,UR.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}bP.type="NONE";const FR=bP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(n,e,t){return`firebase:${n}:${e}:${t}`}class mc{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=ag(this.userKey,r.apiKey,o),this.fullPersistenceKey=ag("persistence",r.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Kg(this.auth,{idToken:e}).catch(()=>{});return t?Nr._fromGetAccountInfoResponse(this.auth,t,e):null}return Nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new mc(qs(FR),e,i);const r=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let o=r[0]||qs(FR);const l=ag(i,e.config.apiKey,e.name);let c=null;for(const d of t)try{const g=await d._get(l);if(g){let _;if(typeof g=="string"){const v=await Kg(e,{idToken:g}).catch(()=>{});if(!v)break;_=await Nr._fromGetAccountInfoResponse(e,v,g)}else _=Nr._fromJSON(e,g);d!==o&&(c=_),o=d;break}}catch{}const f=r.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new mc(o,e,i):(o=f[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async d=>{if(d!==o)try{await d._remove(l)}catch{}})),new mc(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xP(e))return"Blackberry";if(DP(e))return"Webos";if(CP(e))return"Safari";if((e.includes("chrome/")||AP(e))&&!e.includes("edge/"))return"Chrome";if(RP(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function wP(n=wn()){return/firefox\//i.test(n)}function CP(n=wn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function AP(n=wn()){return/crios\//i.test(n)}function IP(n=wn()){return/iemobile/i.test(n)}function RP(n=wn()){return/android/i.test(n)}function xP(n=wn()){return/blackberry/i.test(n)}function DP(n=wn()){return/webos/i.test(n)}function ob(n=wn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Oz(n=wn()){return ob(n)&&!!window.navigator?.standalone}function Vz(){return R9()&&document.documentMode===10}function NP(n=wn()){return ob(n)||RP(n)||DP(n)||xP(n)||/windows phone/i.test(n)||IP(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(n,e=[]){let t;switch(n){case"Browser":t=BR(wn());break;case"Worker":t=`${BR(wn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Hl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((l,c)=>{try{const f=e(o);l(f)}catch(f){c(f)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lz(n,e={}){return Zc(n,"GET","/v2/passwordPolicy",rb(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uz=6;class Fz{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??Uz,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jR(this),this.idTokenSubscription=new jR(this),this.beforeStateQueue=new kz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=qs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await mc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Kg(this,{idToken:e}),i=await Nr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Cr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,l=i?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&c?.user&&(i=c.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $g(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ez()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cr(this.app))return Promise.reject(Tl(this));const t=e?Cn(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cr(this.app)?Promise.reject(Tl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cr(this.app)?Promise.reject(Tl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Lz(this),t=new Fz(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fd("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Pz(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&qs(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await mc.create(this,[qs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,r);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=MP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Cr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&yz(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ab(n){return Cn(n)}class jR{constructor(e){this.auth=e,this.observer=null,this.addObserver=L9(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jz(n){lb=n}function zz(n){return lb.loadJS(n)}function qz(){return lb.gapiScript}function Hz(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gz(n,e){const t=By(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),o=t.getOptions();if(ca(o,e??{}))return r;eo(r,"already-initialized")}return t.initialize({options:e})}function Kz(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(qs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function $z(n,e,t){const i=ab(n);Le(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=PP(e),{host:l,port:c}=Wz(e),f=c===null?"":`:${c}`,d={url:`${o}//${l}${f}/`},g=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Le(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Le(ca(d,i.config.emulator)&&ca(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,Ta(l)?(vS(`${o}//${l}${f}`),WN("Auth",!0)):Yz()}function PP(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Wz(n){const e=PP(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:zR(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:zR(l)}}}function zR(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Yz(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zs("not implemented")}_getIdTokenResponse(e){return zs("not implemented")}_linkToIdToken(e,t){return zs("not implemented")}_getReauthenticationResolver(e){return zs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(n,e){return wz(n,"POST","/v1/accounts:signInWithIdp",rb(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz="http://localhost";class Ol extends OP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ol(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):eo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=t;if(!i||!r)return null;const l=new Ol(i,r);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return pc(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,pc(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pc(e,t)}buildRequest(){const e={requestUri:Qz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd extends VP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo extends Kd{constructor(){super("facebook.com")}static credential(e){return Ol._fromParams({providerId:Xo.PROVIDER_ID,signInMethod:Xo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xo.credentialFromTaggedObject(e)}static credentialFromError(e){return Xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xo.credential(e.oauthAccessToken)}catch{return null}}}Xo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends Kd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ol._fromParams({providerId:Jo.PROVIDER_ID,signInMethod:Jo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Jo.credentialFromTaggedObject(e)}static credentialFromError(e){return Jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Jo.credential(t,i)}catch{return null}}}Jo.GOOGLE_SIGN_IN_METHOD="google.com";Jo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo extends Kd{constructor(){super("github.com")}static credential(e){return Ol._fromParams({providerId:Zo.PROVIDER_ID,signInMethod:Zo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zo.credentialFromTaggedObject(e)}static credentialFromError(e){return Zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zo.credential(e.oauthAccessToken)}catch{return null}}}Zo.GITHUB_SIGN_IN_METHOD="github.com";Zo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends Kd{constructor(){super("twitter.com")}static credential(e,t){return Ol._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ea.credential(t,i)}catch{return null}}}ea.TWITTER_SIGN_IN_METHOD="twitter.com";ea.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const o=await Nr._fromIdTokenResponse(e,i,r),l=qR(i);return new Ic({user:o,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=qR(i);return new Ic({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function qR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg extends uo{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Wg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Wg(e,t,i,r)}}function kP(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Wg._fromErrorAndOperation(n,o,e,i):o})}async function Xz(n,e,t=!1){const i=await fd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ic._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jz(n,e,t=!1){const{auth:i}=n;if(Cr(i.app))return Promise.reject(Tl(i));const r="reauthenticate";try{const o=await fd(n,kP(i,r,e,n),t);Le(o.idToken,i,"internal-error");const l=sb(o.idToken);Le(l,i,"internal-error");const{sub:c}=l;return Le(n.uid===c,i,"user-mismatch"),Ic._forOperation(n,r,o)}catch(o){throw o?.code==="auth/user-not-found"&&eo(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zz(n,e,t=!1){if(Cr(n.app))return Promise.reject(Tl(n));const i="signIn",r=await kP(n,i,e),o=await Ic._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e8(n,e){return Cn(n).setPersistence(e)}function t8(n,e,t,i){return Cn(n).onIdTokenChanged(e,t,i)}function n8(n,e,t){return Cn(n).beforeAuthStateChanged(e,t)}const Yg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yg,"1"),this.storage.removeItem(Yg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8=1e3,r8=10;class UP extends LP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,f)=>{this.notifyListeners(l,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);Vz()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,r8):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},i8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}UP.type="LOCAL";const FP=UP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP extends LP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}BP.type="SESSION";const jP=BP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new Xy(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:o}=t.data,l=this.handlersMap[r];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async d=>d(t.origin,o)),f=await s8(c);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,l;return new Promise((c,f)=>{const d=ub("",20);r.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(_){const v=_;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(g),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(v.data.response);break;default:clearTimeout(g),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(){return window}function a8(n){cs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zP(){return typeof cs().WorkerGlobalScope<"u"&&typeof cs().importScripts=="function"}async function l8(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u8(){return navigator?.serviceWorker?.controller||null}function c8(){return zP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qP="firebaseLocalStorageDb",h8=1,Qg="firebaseLocalStorage",HP="fbase_key";class $d{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jy(n,e){return n.transaction([Qg],e?"readwrite":"readonly").objectStore(Qg)}function f8(){const n=indexedDB.deleteDatabase(qP);return new $d(n).toPromise()}function iT(){const n=indexedDB.open(qP,h8);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Qg,{keyPath:HP})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Qg)?e(i):(i.close(),await f8(),e(await iT()))})})}async function HR(n,e,t){const i=Jy(n,!0).put({[HP]:e,value:t});return new $d(i).toPromise()}async function d8(n,e){const t=Jy(n,!1).get(e),i=await new $d(t).toPromise();return i===void 0?null:i.value}function GR(n,e){const t=Jy(n,!0).delete(e);return new $d(t).toPromise()}const m8=800,p8=3;class GP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await iT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>p8)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xy._getInstance(c8()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await l8(),!this.activeServiceWorker)return;this.sender=new o8(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||u8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await iT();return await HR(e,Yg,"1"),await GR(e,Yg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>HR(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>d8(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>GR(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Jy(r,!1).getAll();return new $d(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),m8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GP.type="LOCAL";const g8=GP;new Gd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8(n,e){return e?qs(e):(Le(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb extends OP{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _8(n){return Zz(n.auth,new cb(n),n.bypassAuthState)}function v8(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),Jz(t,new cb(n),n.bypassAuthState)}async function E8(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),Xz(t,new cb(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _8;case"linkViaPopup":case"linkViaRedirect":return E8;case"reauthViaPopup":case"reauthViaRedirect":return v8;default:eo(this.auth,"internal-error")}}resolve(e){to(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){to(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8=new Gd(2e3,1e4);class rc extends KP{constructor(e,t,i,r,o){super(e,t,r,o),this.provider=i,this.authWindow=null,this.pollId=null,rc.currentPopupAction&&rc.currentPopupAction.cancel(),rc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){to(this.filter.length===1,"Popup operations only handle one event");const e=ub();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(us(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(us(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rc.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(us(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T8.get())};e()}}rc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S8="pendingRedirect",lg=new Map;class b8 extends KP{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=lg.get(this.auth._key());if(!e){try{const i=await w8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}lg.set(this.auth._key(),e)}return this.bypassAuthState||lg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function w8(n,e){const t=I8(e),i=A8(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function C8(n,e){lg.set(n._key(),e)}function A8(n){return qs(n._redirectPersistence)}function I8(n){return ag(S8,n.config.apiKey,n.name)}async function R8(n,e,t=!1){if(Cr(n.app))return Promise.reject(Tl(n));const i=ab(n),r=y8(i,e),l=await new b8(i,r,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x8=600*1e3;class D8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!$P(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(us(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=x8&&this.cachedEventUids.clear(),this.cachedEventUids.has(KR(e))}saveEventToCache(e){this.cachedEventUids.add(KR(e)),this.lastProcessedEventTime=Date.now()}}function KR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function $P({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function N8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $P(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M8(n,e={}){return Zc(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O8=/^https?/;async function V8(n){if(n.config.emulator)return;const{authorizedDomains:e}=await M8(n);for(const t of e)try{if(k8(t))return}catch{}eo(n,"unauthorized-domain")}function k8(n){const e=tT(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!O8.test(t))return!1;if(P8.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8=new Gd(3e4,6e4);function $R(){const n=cs().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function U8(n){return new Promise((e,t)=>{function i(){$R(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$R(),t(us(n,"network-request-failed"))},timeout:L8.get()})}if(cs().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(cs().gapi?.load)i();else{const r=Hz("iframefcb");return cs()[r]=()=>{gapi.load?i():t(us(n,"network-request-failed"))},zz(`${qz()}?onload=${r}`).catch(o=>t(o))}}).catch(e=>{throw ug=null,e})}let ug=null;function F8(n){return ug=ug||U8(n),ug}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B8=new Gd(5e3,15e3),j8="__/auth/iframe",z8="emulator/auth/iframe",q8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function G8(n){const e=n.config;Le(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ib(e,z8):`https://${n.config.authDomain}/${j8}`,i={apiKey:e.apiKey,appName:n.name,v:Hl},r=H8.get(n.config.apiHost);r&&(i.eid=r);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${Yc(i).slice(1)}`}async function K8(n){const e=await F8(n),t=cs().gapi;return Le(t,n,"internal-error"),e.open({where:document.body,url:G8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:q8,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const l=us(n,"network-request-failed"),c=cs().setTimeout(()=>{o(l)},B8.get());function f(){cs().clearTimeout(c),r(i)}i.ping(f).then(f,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W8=500,Y8=600,Q8="_blank",X8="http://localhost";class WR{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function J8(n,e,t,i=W8,r=Y8){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const f={...$8,width:i.toString(),height:r.toString(),top:o,left:l},d=wn().toLowerCase();t&&(c=AP(d)?Q8:t),wP(d)&&(e=e||X8,f.scrollbars="yes");const g=Object.entries(f).reduce((v,[b,C])=>`${v}${b}=${C},`,"");if(Oz(d)&&c!=="_self")return Z8(e||"",c),new WR(null);const _=window.open(e||"",c,g);Le(_,n,"popup-blocked");try{_.focus()}catch{}return new WR(_)}function Z8(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e7="__/auth/handler",t7="emulator/auth/handler",n7=encodeURIComponent("fac");async function YR(n,e,t,i,r,o){Le(n.config.authDomain,n,"auth-domain-config-required"),Le(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Hl,eventId:r};if(e instanceof VP){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",xg(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,_]of Object.entries({}))l[g]=_}if(e instanceof Kd){const g=e.getScopes().filter(_=>_!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const g of Object.keys(c))c[g]===void 0&&delete c[g];const f=await n._getAppCheckToken(),d=f?`#${n7}=${encodeURIComponent(f)}`:"";return`${i7(n)}?${Yc(c).slice(1)}${d}`}function i7({config:n}){return n.emulator?ib(n,t7):`https://${n.authDomain}/${e7}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="webStorageSupport";class r7{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jP,this._completeRedirectFn=R8,this._overrideRedirectResult=C8}async _openPopup(e,t,i,r){to(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await YR(e,t,i,tT(),r);return J8(e,o,ub())}async _openRedirect(e,t,i,r){await this._originValidation(e);const o=await YR(e,t,i,tT(),r);return a8(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:o}=this.eventManagers[t];return r?Promise.resolve(r):(to(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await K8(e),i=new D8(e);return t.register("authEvent",r=>(Le(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(W0,{type:W0},r=>{const o=r?.[0]?.[W0];o!==void 0&&t(!!o),eo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=V8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return NP()||CP()||ob()}}const s7=r7;var QR="@firebase/auth",XR="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a7(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function l7(n){xl(new ha("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;Le(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:MP(n)},d=new Bz(i,r,o,f);return Kz(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),xl(new ha("auth-internal",e=>{const t=ab(e.getProvider("auth").getImmediate());return(i=>new o7(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ls(QR,XR,a7(n)),ls(QR,XR,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u7=300,c7=$N("authIdTokenMaxAge")||u7;let JR=null;const h7=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>c7)return;const r=t?.token;JR!==r&&(JR=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function f7(n=rM()){const e=By(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Gz(n,{popupRedirectResolver:s7,persistence:[g8,FP,jP]}),i=$N("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=h7(o.toString());n8(t,l,()=>l(t.currentUser)),t8(t,c=>l(c))}}const r=GN("auth");return r&&$z(t,`http://${r}`),t}function d7(){return document.getElementsByTagName("head")?.[0]??document}jz({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const o=us("internal-error");o.customData=r,t(o)},i.type="text/javascript",i.charset="UTF-8",d7().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});l7("Browser");var ZR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aa,WP;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,A){function M(){}M.prototype=A.prototype,R.F=A.prototype,R.prototype=new M,R.prototype.constructor=R,R.D=function(j,U,z){for(var P=Array(arguments.length-2),De=2;De<arguments.length;De++)P[De-2]=arguments[De];return A.prototype[U].apply(j,P)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,A,M){M||(M=0);const j=Array(16);if(typeof A=="string")for(var U=0;U<16;++U)j[U]=A.charCodeAt(M++)|A.charCodeAt(M++)<<8|A.charCodeAt(M++)<<16|A.charCodeAt(M++)<<24;else for(U=0;U<16;++U)j[U]=A[M++]|A[M++]<<8|A[M++]<<16|A[M++]<<24;A=R.g[0],M=R.g[1],U=R.g[2];let z=R.g[3],P;P=A+(z^M&(U^z))+j[0]+3614090360&4294967295,A=M+(P<<7&4294967295|P>>>25),P=z+(U^A&(M^U))+j[1]+3905402710&4294967295,z=A+(P<<12&4294967295|P>>>20),P=U+(M^z&(A^M))+j[2]+606105819&4294967295,U=z+(P<<17&4294967295|P>>>15),P=M+(A^U&(z^A))+j[3]+3250441966&4294967295,M=U+(P<<22&4294967295|P>>>10),P=A+(z^M&(U^z))+j[4]+4118548399&4294967295,A=M+(P<<7&4294967295|P>>>25),P=z+(U^A&(M^U))+j[5]+1200080426&4294967295,z=A+(P<<12&4294967295|P>>>20),P=U+(M^z&(A^M))+j[6]+2821735955&4294967295,U=z+(P<<17&4294967295|P>>>15),P=M+(A^U&(z^A))+j[7]+4249261313&4294967295,M=U+(P<<22&4294967295|P>>>10),P=A+(z^M&(U^z))+j[8]+1770035416&4294967295,A=M+(P<<7&4294967295|P>>>25),P=z+(U^A&(M^U))+j[9]+2336552879&4294967295,z=A+(P<<12&4294967295|P>>>20),P=U+(M^z&(A^M))+j[10]+4294925233&4294967295,U=z+(P<<17&4294967295|P>>>15),P=M+(A^U&(z^A))+j[11]+2304563134&4294967295,M=U+(P<<22&4294967295|P>>>10),P=A+(z^M&(U^z))+j[12]+1804603682&4294967295,A=M+(P<<7&4294967295|P>>>25),P=z+(U^A&(M^U))+j[13]+4254626195&4294967295,z=A+(P<<12&4294967295|P>>>20),P=U+(M^z&(A^M))+j[14]+2792965006&4294967295,U=z+(P<<17&4294967295|P>>>15),P=M+(A^U&(z^A))+j[15]+1236535329&4294967295,M=U+(P<<22&4294967295|P>>>10),P=A+(U^z&(M^U))+j[1]+4129170786&4294967295,A=M+(P<<5&4294967295|P>>>27),P=z+(M^U&(A^M))+j[6]+3225465664&4294967295,z=A+(P<<9&4294967295|P>>>23),P=U+(A^M&(z^A))+j[11]+643717713&4294967295,U=z+(P<<14&4294967295|P>>>18),P=M+(z^A&(U^z))+j[0]+3921069994&4294967295,M=U+(P<<20&4294967295|P>>>12),P=A+(U^z&(M^U))+j[5]+3593408605&4294967295,A=M+(P<<5&4294967295|P>>>27),P=z+(M^U&(A^M))+j[10]+38016083&4294967295,z=A+(P<<9&4294967295|P>>>23),P=U+(A^M&(z^A))+j[15]+3634488961&4294967295,U=z+(P<<14&4294967295|P>>>18),P=M+(z^A&(U^z))+j[4]+3889429448&4294967295,M=U+(P<<20&4294967295|P>>>12),P=A+(U^z&(M^U))+j[9]+568446438&4294967295,A=M+(P<<5&4294967295|P>>>27),P=z+(M^U&(A^M))+j[14]+3275163606&4294967295,z=A+(P<<9&4294967295|P>>>23),P=U+(A^M&(z^A))+j[3]+4107603335&4294967295,U=z+(P<<14&4294967295|P>>>18),P=M+(z^A&(U^z))+j[8]+1163531501&4294967295,M=U+(P<<20&4294967295|P>>>12),P=A+(U^z&(M^U))+j[13]+2850285829&4294967295,A=M+(P<<5&4294967295|P>>>27),P=z+(M^U&(A^M))+j[2]+4243563512&4294967295,z=A+(P<<9&4294967295|P>>>23),P=U+(A^M&(z^A))+j[7]+1735328473&4294967295,U=z+(P<<14&4294967295|P>>>18),P=M+(z^A&(U^z))+j[12]+2368359562&4294967295,M=U+(P<<20&4294967295|P>>>12),P=A+(M^U^z)+j[5]+4294588738&4294967295,A=M+(P<<4&4294967295|P>>>28),P=z+(A^M^U)+j[8]+2272392833&4294967295,z=A+(P<<11&4294967295|P>>>21),P=U+(z^A^M)+j[11]+1839030562&4294967295,U=z+(P<<16&4294967295|P>>>16),P=M+(U^z^A)+j[14]+4259657740&4294967295,M=U+(P<<23&4294967295|P>>>9),P=A+(M^U^z)+j[1]+2763975236&4294967295,A=M+(P<<4&4294967295|P>>>28),P=z+(A^M^U)+j[4]+1272893353&4294967295,z=A+(P<<11&4294967295|P>>>21),P=U+(z^A^M)+j[7]+4139469664&4294967295,U=z+(P<<16&4294967295|P>>>16),P=M+(U^z^A)+j[10]+3200236656&4294967295,M=U+(P<<23&4294967295|P>>>9),P=A+(M^U^z)+j[13]+681279174&4294967295,A=M+(P<<4&4294967295|P>>>28),P=z+(A^M^U)+j[0]+3936430074&4294967295,z=A+(P<<11&4294967295|P>>>21),P=U+(z^A^M)+j[3]+3572445317&4294967295,U=z+(P<<16&4294967295|P>>>16),P=M+(U^z^A)+j[6]+76029189&4294967295,M=U+(P<<23&4294967295|P>>>9),P=A+(M^U^z)+j[9]+3654602809&4294967295,A=M+(P<<4&4294967295|P>>>28),P=z+(A^M^U)+j[12]+3873151461&4294967295,z=A+(P<<11&4294967295|P>>>21),P=U+(z^A^M)+j[15]+530742520&4294967295,U=z+(P<<16&4294967295|P>>>16),P=M+(U^z^A)+j[2]+3299628645&4294967295,M=U+(P<<23&4294967295|P>>>9),P=A+(U^(M|~z))+j[0]+4096336452&4294967295,A=M+(P<<6&4294967295|P>>>26),P=z+(M^(A|~U))+j[7]+1126891415&4294967295,z=A+(P<<10&4294967295|P>>>22),P=U+(A^(z|~M))+j[14]+2878612391&4294967295,U=z+(P<<15&4294967295|P>>>17),P=M+(z^(U|~A))+j[5]+4237533241&4294967295,M=U+(P<<21&4294967295|P>>>11),P=A+(U^(M|~z))+j[12]+1700485571&4294967295,A=M+(P<<6&4294967295|P>>>26),P=z+(M^(A|~U))+j[3]+2399980690&4294967295,z=A+(P<<10&4294967295|P>>>22),P=U+(A^(z|~M))+j[10]+4293915773&4294967295,U=z+(P<<15&4294967295|P>>>17),P=M+(z^(U|~A))+j[1]+2240044497&4294967295,M=U+(P<<21&4294967295|P>>>11),P=A+(U^(M|~z))+j[8]+1873313359&4294967295,A=M+(P<<6&4294967295|P>>>26),P=z+(M^(A|~U))+j[15]+4264355552&4294967295,z=A+(P<<10&4294967295|P>>>22),P=U+(A^(z|~M))+j[6]+2734768916&4294967295,U=z+(P<<15&4294967295|P>>>17),P=M+(z^(U|~A))+j[13]+1309151649&4294967295,M=U+(P<<21&4294967295|P>>>11),P=A+(U^(M|~z))+j[4]+4149444226&4294967295,A=M+(P<<6&4294967295|P>>>26),P=z+(M^(A|~U))+j[11]+3174756917&4294967295,z=A+(P<<10&4294967295|P>>>22),P=U+(A^(z|~M))+j[2]+718787259&4294967295,U=z+(P<<15&4294967295|P>>>17),P=M+(z^(U|~A))+j[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(U+(P<<21&4294967295|P>>>11))&4294967295,R.g[2]=R.g[2]+U&4294967295,R.g[3]=R.g[3]+z&4294967295}i.prototype.v=function(R,A){A===void 0&&(A=R.length);const M=A-this.blockSize,j=this.C;let U=this.h,z=0;for(;z<A;){if(U==0)for(;z<=M;)r(this,R,z),z+=this.blockSize;if(typeof R=="string"){for(;z<A;)if(j[U++]=R.charCodeAt(z++),U==this.blockSize){r(this,j),U=0;break}}else for(;z<A;)if(j[U++]=R[z++],U==this.blockSize){r(this,j),U=0;break}}this.h=U,this.o+=A},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;A=this.o*8;for(var M=R.length-8;M<R.length;++M)R[M]=A&255,A/=256;for(this.v(R),R=Array(16),A=0,M=0;M<4;++M)for(let j=0;j<32;j+=8)R[A++]=this.g[M]>>>j&255;return R};function o(R,A){var M=c;return Object.prototype.hasOwnProperty.call(M,R)?M[R]:M[R]=A(R)}function l(R,A){this.h=A;const M=[];let j=!0;for(let U=R.length-1;U>=0;U--){const z=R[U]|0;j&&z==A||(M[U]=z,j=!1)}this.g=M}var c={};function f(R){return-128<=R&&R<128?o(R,function(A){return new l([A|0],A<0?-1:0)}):new l([R|0],R<0?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return _;if(R<0)return N(d(-R));const A=[];let M=1;for(let j=0;R>=M;j++)A[j]=R/M|0,M*=4294967296;return new l(A,0)}function g(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return N(g(R.substring(1),A));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=d(Math.pow(A,8));let j=_;for(let z=0;z<R.length;z+=8){var U=Math.min(8,R.length-z);const P=parseInt(R.substring(z,z+U),A);U<8?(U=d(Math.pow(A,U)),j=j.j(U).add(d(P))):(j=j.j(M),j=j.add(d(P)))}return j}var _=f(0),v=f(1),b=f(16777216);n=l.prototype,n.m=function(){if(D(this))return-N(this).m();let R=0,A=1;for(let M=0;M<this.g.length;M++){const j=this.i(M);R+=(j>=0?j:4294967296+j)*A,A*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C(this))return"0";if(D(this))return"-"+N(this).toString(R);const A=d(Math.pow(R,6));var M=this;let j="";for(;;){const U=Z(M,A).g;M=B(M,U.j(A));let z=((M.g.length>0?M.g[0]:M.h)>>>0).toString(R);if(M=U,C(M))return z+j;for(;z.length<6;)z="0"+z;j=z+j}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function C(R){if(R.h!=0)return!1;for(let A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function D(R){return R.h==-1}n.l=function(R){return R=B(this,R),D(R)?-1:C(R)?0:1};function N(R){const A=R.g.length,M=[];for(let j=0;j<A;j++)M[j]=~R.g[j];return new l(M,~R.h).add(v)}n.abs=function(){return D(this)?N(this):this},n.add=function(R){const A=Math.max(this.g.length,R.g.length),M=[];let j=0;for(let U=0;U<=A;U++){let z=j+(this.i(U)&65535)+(R.i(U)&65535),P=(z>>>16)+(this.i(U)>>>16)+(R.i(U)>>>16);j=P>>>16,z&=65535,P&=65535,M[U]=P<<16|z}return new l(M,M[M.length-1]&-2147483648?-1:0)};function B(R,A){return R.add(N(A))}n.j=function(R){if(C(this)||C(R))return _;if(D(this))return D(R)?N(this).j(N(R)):N(N(this).j(R));if(D(R))return N(this.j(N(R)));if(this.l(b)<0&&R.l(b)<0)return d(this.m()*R.m());const A=this.g.length+R.g.length,M=[];for(var j=0;j<2*A;j++)M[j]=0;for(j=0;j<this.g.length;j++)for(let U=0;U<R.g.length;U++){const z=this.i(j)>>>16,P=this.i(j)&65535,De=R.i(U)>>>16,qe=R.i(U)&65535;M[2*j+2*U]+=P*qe,V(M,2*j+2*U),M[2*j+2*U+1]+=z*qe,V(M,2*j+2*U+1),M[2*j+2*U+1]+=P*De,V(M,2*j+2*U+1),M[2*j+2*U+2]+=z*De,V(M,2*j+2*U+2)}for(R=0;R<A;R++)M[R]=M[2*R+1]<<16|M[2*R];for(R=A;R<2*A;R++)M[R]=0;return new l(M,0)};function V(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function k(R,A){this.g=R,this.h=A}function Z(R,A){if(C(A))throw Error("division by zero");if(C(R))return new k(_,_);if(D(R))return A=Z(N(R),A),new k(N(A.g),N(A.h));if(D(A))return A=Z(R,N(A)),new k(N(A.g),A.h);if(R.g.length>30){if(D(R)||D(A))throw Error("slowDivide_ only works with positive integers.");for(var M=v,j=A;j.l(R)<=0;)M=K(M),j=K(j);var U=ie(M,1),z=ie(j,1);for(j=ie(j,2),M=ie(M,2);!C(j);){var P=z.add(j);P.l(R)<=0&&(U=U.add(M),z=P),j=ie(j,1),M=ie(M,1)}return A=B(R,U.j(A)),new k(U,A)}for(U=_;R.l(A)>=0;){for(M=Math.max(1,Math.floor(R.m()/A.m())),j=Math.ceil(Math.log(M)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),z=d(M),P=z.j(A);D(P)||P.l(R)>0;)M-=j,z=d(M),P=z.j(A);C(z)&&(z=v),U=U.add(z),R=B(R,P)}return new k(U,R)}n.B=function(R){return Z(this,R).h},n.and=function(R){const A=Math.max(this.g.length,R.g.length),M=[];for(let j=0;j<A;j++)M[j]=this.i(j)&R.i(j);return new l(M,this.h&R.h)},n.or=function(R){const A=Math.max(this.g.length,R.g.length),M=[];for(let j=0;j<A;j++)M[j]=this.i(j)|R.i(j);return new l(M,this.h|R.h)},n.xor=function(R){const A=Math.max(this.g.length,R.g.length),M=[];for(let j=0;j<A;j++)M[j]=this.i(j)^R.i(j);return new l(M,this.h^R.h)};function K(R){const A=R.g.length+1,M=[];for(let j=0;j<A;j++)M[j]=R.i(j)<<1|R.i(j-1)>>>31;return new l(M,R.h)}function ie(R,A){const M=A>>5;A%=32;const j=R.g.length-M,U=[];for(let z=0;z<j;z++)U[z]=A>0?R.i(z+M)>>>A|R.i(z+M+1)<<32-A:R.i(z+M);return new l(U,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,WP=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=g,aa=l}).apply(typeof ZR<"u"?ZR:typeof self<"u"?self:typeof window<"u"?window:{});var Up=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YP,Af,QP,cg,rT,XP,JP,ZP;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Up=="object"&&Up];for(var E=0;E<m.length;++E){var S=m[E];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=t(this);function r(m,E){if(E)e:{var S=i;m=m.split(".");for(var x=0;x<m.length-1;x++){var W=m[x];if(!(W in S))break e;S=S[W]}m=m[m.length-1],x=S[m],E=E(x),E!=x&&E!=null&&e(S,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var S=[],x;for(x in E)Object.prototype.hasOwnProperty.call(E,x)&&S.push([x,E[x]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function f(m,E,S){return m.call.apply(m.bind,arguments)}function d(m,E,S){return d=f,d.apply(null,arguments)}function g(m,E){var S=Array.prototype.slice.call(arguments,1);return function(){var x=S.slice();return x.push.apply(x,arguments),m.apply(this,x)}}function _(m,E){function S(){}S.prototype=E.prototype,m.Z=E.prototype,m.prototype=new S,m.prototype.constructor=m,m.Ob=function(x,W,te){for(var _e=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)_e[Ge-2]=arguments[Ge];return E.prototype[W].apply(x,_e)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function b(m){const E=m.length;if(E>0){const S=Array(E);for(let x=0;x<E;x++)S[x]=m[x];return S}return[]}function C(m,E){for(let x=1;x<arguments.length;x++){const W=arguments[x];var S=typeof W;if(S=S!="object"?S:W?Array.isArray(W)?"array":S:"null",S=="array"||S=="object"&&typeof W.length=="number"){S=m.length||0;const te=W.length||0;m.length=S+te;for(let _e=0;_e<te;_e++)m[S+_e]=W[_e]}else m.push(W)}}class D{constructor(E,S){this.i=E,this.j=S,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function N(m){l.setTimeout(()=>{throw m},0)}function B(){var m=R;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class V{constructor(){this.h=this.g=null}add(E,S){const x=k.get();x.set(E,S),this.h?this.h.next=x:this.g=x,this.h=x}}var k=new D(()=>new Z,m=>m.reset());class Z{constructor(){this.next=this.g=this.h=null}set(E,S){this.h=E,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let K,ie=!1,R=new V,A=()=>{const m=Promise.resolve(void 0);K=()=>{m.then(M)}};function M(){for(var m;m=B();){try{m.h.call(m.g)}catch(S){N(S)}var E=k;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}ie=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const S=()=>{};l.addEventListener("test",S,E),l.removeEventListener("test",S,E)}catch{}return m})();function P(m){return/^[\s\xa0]*$/.test(m)}function De(m,E){U.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}_(De,U),De.prototype.init=function(m,E){const S=this.type=m.type,x=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(S=="mouseover"?E=m.fromElement:S=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&De.Z.h.call(this)},De.prototype.h=function(){De.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var qe="closure_listenable_"+(Math.random()*1e6|0),ee=0;function ce(m,E,S,x,W){this.listener=m,this.proxy=null,this.src=E,this.type=S,this.capture=!!x,this.ha=W,this.key=++ee,this.da=this.fa=!1}function pe(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Me(m,E,S){for(const x in m)E.call(S,m[x],x,m)}function Ue(m,E){for(const S in m)E.call(void 0,m[S],S,m)}function q(m){const E={};for(const S in m)E[S]=m[S];return E}const oe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ge(m,E){let S,x;for(let W=1;W<arguments.length;W++){x=arguments[W];for(S in x)m[S]=x[S];for(let te=0;te<oe.length;te++)S=oe[te],Object.prototype.hasOwnProperty.call(x,S)&&(m[S]=x[S])}}function Ee(m){this.src=m,this.g={},this.h=0}Ee.prototype.add=function(m,E,S,x,W){const te=m.toString();m=this.g[te],m||(m=this.g[te]=[],this.h++);const _e=ke(m,E,x,W);return _e>-1?(E=m[_e],S||(E.fa=!1)):(E=new ce(E,this.src,te,!!x,W),E.fa=S,m.push(E)),E};function Re(m,E){const S=E.type;if(S in m.g){var x=m.g[S],W=Array.prototype.indexOf.call(x,E,void 0),te;(te=W>=0)&&Array.prototype.splice.call(x,W,1),te&&(pe(E),m.g[S].length==0&&(delete m.g[S],m.h--))}}function ke(m,E,S,x){for(let W=0;W<m.length;++W){const te=m[W];if(!te.da&&te.listener==E&&te.capture==!!S&&te.ha==x)return W}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Mt={};function at(m,E,S,x,W){if(Array.isArray(E)){for(let te=0;te<E.length;te++)at(m,E[te],S,x,W);return null}return S=fo(S),m&&m[qe]?m.J(E,S,c(x)?!!x.capture:!1,W):In(m,E,S,!1,x,W)}function In(m,E,S,x,W,te){if(!E)throw Error("Invalid event type");const _e=c(W)?!!W.capture:!!W;let Ge=li(m);if(Ge||(m[ze]=Ge=new Ee(m)),S=Ge.add(E,S,x,_e,te),S.proxy)return S;if(x=wi(),S.proxy=x,x.src=m,x.listener=S,m.addEventListener)z||(W=_e),W===void 0&&(W=!1),m.addEventListener(E.toString(),x,W);else if(m.attachEvent)m.attachEvent(sn(E.toString()),x);else if(m.addListener&&m.removeListener)m.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return S}function wi(){function m(S){return E.call(m.src,m.listener,S)}const E=ut;return m}function Gn(m,E,S,x,W){if(Array.isArray(E))for(var te=0;te<E.length;te++)Gn(m,E[te],S,x,W);else x=c(x)?!!x.capture:!!x,S=fo(S),m&&m[qe]?(m=m.i,te=String(E).toString(),te in m.g&&(E=m.g[te],S=ke(E,S,x,W),S>-1&&(pe(E[S]),Array.prototype.splice.call(E,S,1),E.length==0&&(delete m.g[te],m.h--)))):m&&(m=li(m))&&(E=m.g[E.toString()],m=-1,E&&(m=ke(E,S,x,W)),(S=m>-1?E[m]:null)&&ai(S))}function ai(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[qe])Re(E.i,m);else{var S=m.type,x=m.proxy;E.removeEventListener?E.removeEventListener(S,x,m.capture):E.detachEvent?E.detachEvent(sn(S),x):E.addListener&&E.removeListener&&E.removeListener(x),(S=li(E))?(Re(S,m),S.h==0&&(S.src=null,E[ze]=null)):pe(m)}}}function sn(m){return m in Mt?Mt[m]:Mt[m]="on"+m}function ut(m,E){if(m.da)m=!0;else{E=new De(E,this);const S=m.listener,x=m.ha||m.src;m.fa&&ai(m),m=S.call(x,E)}return m}function li(m){return m=m[ze],m instanceof Ee?m:null}var Ci="__closure_events_fn_"+(Math.random()*1e9>>>0);function fo(m){return typeof m=="function"?m:(m[Ci]||(m[Ci]=function(E){return m.handleEvent(E)}),m[Ci])}function Pt(){j.call(this),this.i=new Ee(this),this.M=this,this.G=null}_(Pt,j),Pt.prototype[qe]=!0,Pt.prototype.removeEventListener=function(m,E,S,x){Gn(this,m,E,S,x)};function L(m,E){var S,x=m.G;if(x)for(S=[];x;x=x.G)S.push(x);if(m=m.M,x=E.type||E,typeof E=="string")E=new U(E,m);else if(E instanceof U)E.target=E.target||m;else{var W=E;E=new U(x,m),ge(E,W)}W=!0;let te,_e;if(S)for(_e=S.length-1;_e>=0;_e--)te=E.g=S[_e],W=Y(te,x,!0,E)&&W;if(te=E.g=m,W=Y(te,x,!0,E)&&W,W=Y(te,x,!1,E)&&W,S)for(_e=0;_e<S.length;_e++)te=E.g=S[_e],W=Y(te,x,!1,E)&&W}Pt.prototype.N=function(){if(Pt.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const S=m.g[E];for(let x=0;x<S.length;x++)pe(S[x]);delete m.g[E],m.h--}}this.G=null},Pt.prototype.J=function(m,E,S,x){return this.i.add(String(m),E,!1,S,x)},Pt.prototype.K=function(m,E,S,x){return this.i.add(String(m),E,!0,S,x)};function Y(m,E,S,x){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let W=!0;for(let te=0;te<E.length;++te){const _e=E[te];if(_e&&!_e.da&&_e.capture==S){const Ge=_e.listener,Jt=_e.ha||_e.src;_e.fa&&Re(m.i,_e),W=Ge.call(Jt,x)!==!1&&W}}return W&&!x.defaultPrevented}function re(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=d(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:l.setTimeout(m,E||0)}function Se(m){m.g=re(()=>{m.g=null,m.i&&(m.i=!1,Se(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class he extends j{constructor(E,S){super(),this.m=E,this.l=S,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Se(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fe(m){j.call(this),this.h=m,this.g={}}_(fe,j);var me=[];function He(m){Me(m.g,function(E,S){this.g.hasOwnProperty(S)&&ai(E)},m),m.g={}}fe.prototype.N=function(){fe.Z.N.call(this),He(this)},fe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xe=l.JSON.stringify,Kn=l.JSON.parse,ys=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function Ai(){}function Ql(){}var Zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xt(){U.call(this,"d")}_(Xt,U);function ui(){U.call(this,"c")}_(ui,U);var Lt={},Xl=null;function _s(){return Xl=Xl||new Pt}Lt.Ia="serverreachability";function cm(m){U.call(this,Lt.Ia,m)}_(cm,U);function Vr(m){const E=_s();L(E,new cm(E))}Lt.STAT_EVENT="statevent";function Aa(m,E){U.call(this,Lt.STAT_EVENT,m),this.stat=E}_(Aa,U);function on(m){const E=_s();L(E,new Aa(E,m))}Lt.Ja="timingevent";function kr(m,E){U.call(this,Lt.Ja,m),this.size=E}_(kr,U);function Lr(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},E)}function hr(){this.g=!0}hr.prototype.ua=function(){this.g=!1};function N_(m,E,S,x,W,te){m.info(function(){if(m.g)if(te){var _e="",Ge=te.split("&");for(let ft=0;ft<Ge.length;ft++){var Jt=Ge[ft].split("=");if(Jt.length>1){const Ut=Jt[0];Jt=Jt[1];const Ki=Ut.split("_");_e=Ki.length>=2&&Ki[1]=="type"?_e+(Ut+"="+Jt+"&"):_e+(Ut+"=redacted&")}}}else _e=null;else _e=te;return"XMLHTTP REQ ("+x+") [attempt "+W+"]: "+E+`
`+S+`
`+_e})}function hm(m,E,S,x,W,te,_e){m.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+W+"]: "+E+`
`+S+`
`+te+" "+_e})}function Ur(m,E,S,x){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+M_(m,S)+(x?" "+x:"")})}function Ia(m,E){m.info(function(){return"TIMEOUT: "+E})}hr.prototype.info=function(){};function M_(m,E){if(!m.g)return E;if(!E)return null;try{const te=JSON.parse(E);if(te){for(m=0;m<te.length;m++)if(Array.isArray(te[m])){var S=te[m];if(!(S.length<2)){var x=S[1];if(Array.isArray(x)&&!(x.length<1)){var W=x[0];if(W!="noop"&&W!="stop"&&W!="close")for(let _e=1;_e<x.length;_e++)x[_e]=""}}}}return Xe(te)}catch{return E}}var Ra={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},uh={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ch;function xa(){}_(xa,Ai),xa.prototype.g=function(){return new XMLHttpRequest},ch=new xa;function vs(m){return encodeURIComponent(String(m))}function fm(m){var E=1;m=m.split(":");const S=[];for(;E>0&&m.length;)S.push(m.shift()),E--;return m.length&&S.push(m.join(":")),S}function fr(m,E,S,x){this.j=m,this.i=E,this.l=S,this.S=x||1,this.V=new fe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new dr}function dr(){this.i=null,this.g="",this.h=!1}var an={},Rn={};function Fr(m,E,S){m.M=1,m.A=Da(un(E)),m.u=S,m.R=!0,Jl(m,null)}function Jl(m,E){m.F=Date.now(),Br(m),m.B=un(m.A);var S=m.B,x=m.S;Array.isArray(x)||(x=[String(x)]),nu(S.i,"t",x),m.C=0,S=m.j.L,m.h=new dr,m.g=Im(m.j,S?E:null,!m.u),m.P>0&&(m.O=new he(d(m.Y,m,m.g),m.P)),E=m.V,S=m.g,x=m.ba;var W="readystatechange";Array.isArray(W)||(W&&(me[0]=W.toString()),W=me);for(let te=0;te<W.length;te++){const _e=at(S,W[te],x||E.handleEvent,!1,E.h||E);if(!_e)break;E.g[_e.key]=_e}E=m.J?q(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),Vr(),N_(m.i,m.v,m.B,m.l,m.S,m.u)}fr.prototype.ba=function(m){m=m.target;const E=this.O;E&&gr(m)==3?E.j():this.Y(m)},fr.prototype.Y=function(m){try{if(m==this.g)e:{const Ge=gr(this.g),Jt=this.g.ya(),ft=this.g.ca();if(!(Ge<3)&&(Ge!=3||this.g&&(this.h.h||this.g.la()||kn(this.g)))){this.K||Ge!=4||Jt==7||(Jt==8||ft<=0?Vr(3):Vr(2)),jr(this);var E=this.g.ca();this.X=E;var S=P_(this);if(this.o=E==200,hm(this.i,this.v,this.B,this.l,this.S,Ge,E),this.o){if(this.U&&!this.L){t:{if(this.g){var x,W=this.g;if((x=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(x)){var te=x;break t}}te=null}if(m=te)Ur(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zr(this,m);else{this.o=!1,this.m=3,on(12),Ii(this),qi(this);break e}}if(this.R){m=!0;let Ut;for(;!this.K&&this.C<S.length;)if(Ut=mm(this,S),Ut==Rn){Ge==4&&(this.m=4,on(14),m=!1),Ur(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==an){this.m=4,on(15),Ur(this.i,this.l,S,"[Invalid Chunk]"),m=!1;break}else Ur(this.i,this.l,Ut,null),zr(this,Ut);if(dm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ge!=4||S.length!=0||this.h.h||(this.m=1,on(16),m=!1),this.o=this.o&&m,!m)Ur(this.i,this.l,S,"[Invalid Chunked Response]"),Ii(this),qi(this);else if(S.length>0&&!this.W){this.W=!0;var _e=this.j;_e.g==this&&_e.aa&&!_e.P&&(_e.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),Ch(_e),_e.P=!0,on(11))}}else Ur(this.i,this.l,S,null),zr(this,S);Ge==4&&Ii(this),this.o&&!this.K&&(Ge==4?bm(this.j,this):(this.o=!1,Br(this)))}else Ts(this.g),E==400&&S.indexOf("Unknown SID")>0?(this.m=3,on(12)):(this.m=0,on(13)),Ii(this),qi(this)}}}catch{}finally{}};function P_(m){if(!dm(m))return m.g.la();const E=kn(m.g);if(E==="")return"";let S="";const x=E.length,W=gr(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Ii(m),qi(m),"";m.h.i=new l.TextDecoder}for(let te=0;te<x;te++)m.h.h=!0,S+=m.h.i.decode(E[te],{stream:!(W&&te==x-1)});return E.length=0,m.h.g+=S,m.C=0,m.h.g}function dm(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function mm(m,E){var S=m.C,x=E.indexOf(`
`,S);return x==-1?Rn:(S=Number(E.substring(S,x)),isNaN(S)?an:(x+=1,x+S>E.length?Rn:(E=E.slice(x,x+S),m.C=x+S,E)))}fr.prototype.cancel=function(){this.K=!0,Ii(this)};function Br(m){m.T=Date.now()+m.H,Zl(m,m.H)}function Zl(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Lr(d(m.aa,m),E)}function jr(m){m.D&&(l.clearTimeout(m.D),m.D=null)}fr.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Ia(this.i,this.B),this.M!=2&&(Vr(),on(17)),Ii(this),this.m=2,qi(this)):Zl(this,this.T-m)};function qi(m){m.j.I==0||m.K||bm(m.j,m)}function Ii(m){jr(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,He(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function zr(m,E){try{var S=m.j;if(S.I!=0&&(S.g==m||Hr(S.h,m))){if(!m.L&&Hr(S.h,m)&&S.I==3){try{var x=S.Ba.g.parse(E)}catch{x=null}if(Array.isArray(x)&&x.length==3){var W=x;if(W[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<m.F)au(S),To(S);else break e;La(S),on(18)}}else S.xa=W[1],0<S.xa-S.K&&W[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=Lr(d(S.Va,S),6e3));qr(S.h)<=1&&S.ta&&(S.ta=void 0)}else Qr(S,11)}else if((m.L||S.g==m)&&au(S),!P(E))for(W=S.Ba.g.parse(E),E=0;E<W.length;E++){let ft=W[E];const Ut=ft[0];if(!(Ut<=S.K))if(S.K=Ut,ft=ft[1],S.I==2)if(ft[0]=="c"){S.M=ft[1],S.ba=ft[2];const Ki=ft[3];Ki!=null&&(S.ka=Ki,S.j.info("VER="+S.ka));const Xr=ft[4];Xr!=null&&(S.za=Xr,S.j.info("SVER="+S.za));const yr=ft[5];yr!=null&&typeof yr=="number"&&yr>0&&(x=1.5*yr,S.O=x,S.j.info("backChannelRequestTimeoutMs_="+x)),x=S;const _r=m.g;if(_r){const Ua=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ua){var te=x.h;te.g||Ua.indexOf("spdy")==-1&&Ua.indexOf("quic")==-1&&Ua.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(dh(te,te.h),te.h=null))}if(x.G){const lu=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;lu&&(x.wa=lu,_t(x.J,x.G,lu))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-m.F,S.j.info("Handshake RTT: "+S.T+"ms")),x=S;var _e=m;if(x.na=Am(x,x.L?x.ba:null,x.W),_e.L){mh(x.h,_e);var Ge=_e,Jt=x.O;Jt&&(Ge.H=Jt),Ge.D&&(jr(Ge),Br(Ge)),x.g=_e}else Tm(x);S.i.length>0&&Yr(S)}else ft[0]!="stop"&&ft[0]!="close"||Qr(S,7);else S.I==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?Qr(S,7):bh(S):ft[0]!="noop"&&S.l&&S.l.qa(ft),S.A=0)}}Vr(4)}catch{}}var ln=class{constructor(m,E){this.g=m,this.map=E}};function hh(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fh(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function qr(m){return m.h?1:m.g?m.g.size:0}function Hr(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function dh(m,E){m.g?m.g.add(E):m.h=E}function mh(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}hh.prototype.cancel=function(){if(this.i=ph(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ph(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const S of m.g.values())E=E.concat(S.G);return E}return b(m.i)}var pm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eu(m,E){if(m){m=m.split("&");for(let S=0;S<m.length;S++){const x=m[S].indexOf("=");let W,te=null;x>=0?(W=m[S].substring(0,x),te=m[S].substring(x+1)):W=m[S],E(W,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Ri(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof Ri?(this.l=m.l,xn(this,m.j),this.o=m.o,this.g=m.g,mo(this,m.u),this.h=m.h,gh(this,vm(m.i)),this.m=m.m):m&&(E=String(m).match(pm))?(this.l=!1,xn(this,E[1]||"",!0),this.o=Gr(E[2]||""),this.g=Gr(E[3]||"",!0),mo(this,E[4]),this.h=Gr(E[5]||"",!0),gh(this,E[6]||"",!0),this.m=Gr(E[7]||"")):(this.l=!1,this.i=new go(null,this.l))}Ri.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(Na(E,tu,!0),":");var S=this.g;return(S||E=="file")&&(m.push("//"),(E=this.o)&&m.push(Na(E,tu,!0),"@"),m.push(vs(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&m.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&m.push("/"),m.push(Na(S,S.charAt(0)=="/"?yh:gm,!0))),(S=this.i.toString())&&m.push("?",S),(S=this.m)&&m.push("#",Na(S,ym)),m.join("")},Ri.prototype.resolve=function(m){const E=un(this);let S=!!m.j;S?xn(E,m.j):S=!!m.o,S?E.o=m.o:S=!!m.g,S?E.g=m.g:S=m.u!=null;var x=m.h;if(S)mo(E,m.u);else if(S=!!m.h){if(x.charAt(0)!="/")if(this.g&&!this.h)x="/"+x;else{var W=E.h.lastIndexOf("/");W!=-1&&(x=E.h.slice(0,W+1)+x)}if(W=x,W==".."||W==".")x="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){x=W.lastIndexOf("/",0)==0,W=W.split("/");const te=[];for(let _e=0;_e<W.length;){const Ge=W[_e++];Ge=="."?x&&_e==W.length&&te.push(""):Ge==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),x&&_e==W.length&&te.push("")):(te.push(Ge),x=!0)}x=te.join("/")}else x=W}return S?E.h=x:S=m.i.toString()!=="",S?gh(E,vm(m.i)):S=!!m.m,S&&(E.m=m.m),E};function un(m){return new Ri(m)}function xn(m,E,S){m.j=S?Gr(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function mo(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function gh(m,E,S){E instanceof go?(m.i=E,iu(m.i,m.l)):(S||(E=Na(E,po)),m.i=new go(E,m.l))}function _t(m,E,S){m.i.set(E,S)}function Da(m){return _t(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Gr(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Na(m,E,S){return typeof m=="string"?(m=encodeURI(m).replace(E,ci),S&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function ci(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var tu=/[#\/\?@]/g,gm=/[#\?:]/g,yh=/[#\?]/g,po=/[#\?@]/g,ym=/#/g;function go(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function hi(m){m.g||(m.g=new Map,m.h=0,m.i&&eu(m.i,function(E,S){m.add(decodeURIComponent(E.replace(/\+/g," ")),S)}))}n=go.prototype,n.add=function(m,E){hi(this),this.i=null,m=yo(this,m);let S=this.g.get(m);return S||this.g.set(m,S=[]),S.push(E),this.h+=1,this};function _m(m,E){hi(m),E=yo(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function _h(m,E){return hi(m),E=yo(m,E),m.g.has(E)}n.forEach=function(m,E){hi(this),this.g.forEach(function(S,x){S.forEach(function(W){m.call(E,W,x,this)},this)},this)};function vh(m,E){hi(m);let S=[];if(typeof E=="string")_h(m,E)&&(S=S.concat(m.g.get(yo(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)S=S.concat(m[E]);return S}n.set=function(m,E){return hi(this),this.i=null,m=yo(this,m),_h(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},n.get=function(m,E){return m?(m=vh(this,m),m.length>0?String(m[0]):E):E};function nu(m,E,S){_m(m,E),S.length>0&&(m.i=null,m.g.set(yo(m,E),b(S)),m.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let x=0;x<E.length;x++){var S=E[x];const W=vs(S);S=vh(this,S);for(let te=0;te<S.length;te++){let _e=W;S[te]!==""&&(_e+="="+vs(S[te])),m.push(_e)}}return this.i=m.join("&")};function vm(m){const E=new go;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function yo(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function iu(m,E){E&&!m.j&&(hi(m),m.i=null,m.g.forEach(function(S,x){const W=x.toLowerCase();x!=W&&(_m(this,x),nu(this,W,S))},m)),m.j=E}function mr(m,E){const S=new hr;if(l.Image){const x=new Image;x.onload=g(Hi,S,"TestLoadImage: loaded",!0,E,x),x.onerror=g(Hi,S,"TestLoadImage: error",!1,E,x),x.onabort=g(Hi,S,"TestLoadImage: abort",!1,E,x),x.ontimeout=g(Hi,S,"TestLoadImage: timeout",!1,E,x),l.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=m}else E(!1)}function Eh(m,E){const S=new hr,x=new AbortController,W=setTimeout(()=>{x.abort(),Hi(S,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:x.signal}).then(te=>{clearTimeout(W),te.ok?Hi(S,"TestPingServer: ok",!0,E):Hi(S,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(W),Hi(S,"TestPingServer: error",!1,E)})}function Hi(m,E,S,x,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),x(S)}catch{}}function _o(){this.g=new ys}function Kr(m){this.i=m.Sb||null,this.h=m.ab||!1}_(Kr,Ai),Kr.prototype.g=function(){return new Ma(this.i,this.h)};function Ma(m,E){Pt.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Ma,Pt),n=Ma.prototype,n.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,pr(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||l).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vo(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,pr(this)),this.g&&(this.readyState=3,pr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ru(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function ru(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?vo(this):pr(this),this.readyState==3&&ru(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,vo(this))},n.Na=function(m){this.g&&(this.response=m,vo(this))},n.ga=function(){this.g&&vo(this)};function vo(m){m.readyState=4,m.l=null,m.j=null,m.B=null,pr(m)}n.setRequestHeader=function(m,E){this.A.append(m,E)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var S=E.next();!S.done;)S=S.value,m.push(S[0]+": "+S[1]),S=E.next();return m.join(`\r
`)};function pr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Gi(m){let E="";return Me(m,function(S,x){E+=x,E+=":",E+=S,E+=`\r
`}),E}function Pa(m,E,S){e:{for(x in S){var x=!1;break e}x=!0}x||(S=Gi(S),typeof m=="string"?S!=null&&vs(S):_t(m,E,S))}function wt(m){Pt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(wt,Pt);var $r=/^https?$/i,Th=["POST","PUT"];n=wt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,E,S,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ch.g(),this.g.onreadystatechange=v(d(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(te){Oa(this,te);return}if(m=S||"",S=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var W in x)S.set(W,x[W]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const te of x.keys())S.set(te,x.get(te));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(S.keys()).find(te=>te.toLowerCase()=="content-type"),W=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(Th,E,void 0)>=0)||x||W||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,_e]of S)this.g.setRequestHeader(te,_e);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(te){Oa(this,te)}};function Oa(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,Sh(m),Es(m)}function Sh(m){m.A||(m.A=!0,L(m,"complete"),L(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,L(this,"complete"),L(this,"abort"),Es(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Es(this,!0)),wt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Va(this):this.Xa())},n.Xa=function(){Va(this)};function Va(m){if(m.h&&typeof o<"u"){if(m.v&&gr(m)==4)setTimeout(m.Ca.bind(m),0);else if(L(m,"readystatechange"),gr(m)==4){m.h=!1;try{const te=m.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var S;if(!(S=E)){var x;if(x=te===0){let _e=String(m.D).match(pm)[1]||null;!_e&&l.self&&l.self.location&&(_e=l.self.location.protocol.slice(0,-1)),x=!$r.test(_e?_e.toLowerCase():"")}S=x}if(S)L(m,"complete"),L(m,"success");else{m.o=6;try{var W=gr(m)>2?m.g.statusText:""}catch{W=""}m.l=W+" ["+m.ca()+"]",Sh(m)}}finally{Es(m)}}}}function Es(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const S=m.g;m.g=null,E||L(m,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function gr(m){return m.g?m.g.readyState:0}n.ca=function(){try{return gr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Kn(E)}};function kn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Ts(m){const E={};m=(m.g&&gr(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<m.length;x++){if(P(m[x]))continue;var S=fm(m[x]);const W=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const te=E[W]||[];E[W]=te,te.push(S)}Ue(E,function(x){return x.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(m,E,S){return S&&S.internalChannelParams&&S.internalChannelParams[m]||E}function Eo(m){this.za=0,this.i=[],this.j=new hr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wr("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wr("baseRetryDelayMs",5e3,m),this.Za=Wr("retryDelaySeedMs",1e4,m),this.Ta=Wr("forwardChannelMaxRetries",2,m),this.va=Wr("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new hh(m&&m.concurrentRequestLimit),this.Ba=new _o,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Eo.prototype,n.ka=8,n.I=1,n.connect=function(m,E,S,x){on(0),this.W=m,this.H=E||{},S&&x!==void 0&&(this.H.OSID=S,this.H.OAID=x),this.F=this.X,this.J=Am(this,null,this.W),Yr(this)};function bh(m){if(su(m),m.I==3){var E=m.V++,S=un(m.J);if(_t(S,"SID",m.M),_t(S,"RID",E),_t(S,"TYPE","terminate"),ka(m,S),E=new fr(m,m.j,E),E.M=2,E.A=Da(un(S)),S=!1,l.navigator&&l.navigator.sendBeacon)try{S=l.navigator.sendBeacon(E.A.toString(),"")}catch{}!S&&l.Image&&(new Image().src=E.A,S=!0),S||(E.g=Im(E.j,null),E.g.ea(E.A)),E.F=Date.now(),Br(E)}Cm(m)}function To(m){m.g&&(Ch(m),m.g.cancel(),m.g=null)}function su(m){To(m),m.v&&(l.clearTimeout(m.v),m.v=null),au(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function Yr(m){if(!fh(m.h)&&!m.m){m.m=!0;var E=m.Ea;K||A(),ie||(K(),ie=!0),R.add(E,m),m.D=0}}function ou(m,E){return qr(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Lr(d(m.Ea,m,E),wm(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const W=new fr(this,this.j,m);let te=this.o;if(this.U&&(te?(te=q(te),ge(te,this.U)):te=this.U),this.u!==null||this.R||(W.J=te,te=null),this.S)e:{for(var E=0,S=0;S<this.i.length;S++){t:{var x=this.i[S];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(E+=x,E>4096){E=S;break e}if(E===4096||S===this.i.length-1){E=S+1;break e}}E=1e3}else E=1e3;E=Em(this,W,E),S=un(this.J),_t(S,"RID",m),_t(S,"CVER",22),this.G&&_t(S,"X-HTTP-Session-Id",this.G),ka(this,S),te&&(this.R?E="headers="+vs(Gi(te))+"&"+E:this.u&&Pa(S,this.u,te)),dh(this.h,W),this.Ra&&_t(S,"TYPE","init"),this.S?(_t(S,"$req",E),_t(S,"SID","null"),W.U=!0,Fr(W,S,null)):Fr(W,S,E),this.I=2}}else this.I==3&&(m?wh(this,m):this.i.length==0||fh(this.h)||wh(this))};function wh(m,E){var S;E?S=E.l:S=m.V++;const x=un(m.J);_t(x,"SID",m.M),_t(x,"RID",S),_t(x,"AID",m.K),ka(m,x),m.u&&m.o&&Pa(x,m.u,m.o),S=new fr(m,m.j,S,m.D+1),m.u===null&&(S.J=m.o),E&&(m.i=E.G.concat(m.i)),E=Em(m,S,1e3),S.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),dh(m.h,S),Fr(S,x,E)}function ka(m,E){m.H&&Me(m.H,function(S,x){_t(E,x,S)}),m.l&&Me({},function(S,x){_t(E,x,S)})}function Em(m,E,S){S=Math.min(m.i.length,S);const x=m.l?d(m.l.Ka,m.l,m):null;e:{var W=m.i;let Ge=-1;for(;;){const Jt=["count="+S];Ge==-1?S>0?(Ge=W[0].g,Jt.push("ofs="+Ge)):Ge=0:Jt.push("ofs="+Ge);let ft=!0;for(let Ut=0;Ut<S;Ut++){var te=W[Ut].g;const Ki=W[Ut].map;if(te-=Ge,te<0)Ge=Math.max(0,W[Ut].g-100),ft=!1;else try{te="req"+te+"_"||"";try{var _e=Ki instanceof Map?Ki:Object.entries(Ki);for(const[Xr,yr]of _e){let _r=yr;c(yr)&&(_r=Xe(yr)),Jt.push(te+Xr+"="+encodeURIComponent(_r))}}catch(Xr){throw Jt.push(te+"type="+encodeURIComponent("_badmap")),Xr}}catch{x&&x(Ki)}}if(ft){_e=Jt.join("&");break e}}_e=void 0}return m=m.i.splice(0,S),E.G=m,_e}function Tm(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;K||A(),ie||(K(),ie=!0),R.add(E,m),m.A=0}}function La(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Lr(d(m.Da,m),wm(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Sm(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Lr(d(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,on(10),To(this),Sm(this))};function Ch(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function Sm(m){m.g=new fr(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=un(m.na);_t(E,"RID","rpc"),_t(E,"SID",m.M),_t(E,"AID",m.K),_t(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&_t(E,"TO",m.ia),_t(E,"TYPE","xmlhttp"),ka(m,E),m.u&&m.o&&Pa(E,m.u,m.o),m.O&&(m.g.H=m.O);var S=m.g;m=m.ba,S.M=1,S.A=Da(un(E)),S.u=null,S.R=!0,Jl(S,m)}n.Va=function(){this.C!=null&&(this.C=null,To(this),La(this),on(19))};function au(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function bm(m,E){var S=null;if(m.g==E){au(m),Ch(m),m.g=null;var x=2}else if(Hr(m.h,E))S=E.G,mh(m.h,E),x=1;else return;if(m.I!=0){if(E.o)if(x==1){S=E.u?E.u.length:0,E=Date.now()-E.F;var W=m.D;x=_s(),L(x,new kr(x,S)),Yr(m)}else Tm(m);else if(W=E.m,W==3||W==0&&E.X>0||!(x==1&&ou(m,E)||x==2&&La(m)))switch(S&&S.length>0&&(E=m.h,E.i=E.i.concat(S)),W){case 1:Qr(m,5);break;case 4:Qr(m,10);break;case 3:Qr(m,6);break;default:Qr(m,2)}}}function wm(m,E){let S=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(S*=2),S*E}function Qr(m,E){if(m.j.info("Error code "+E),E==2){var S=d(m.bb,m),x=m.Ua;const W=!x;x=new Ri(x||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||xn(x,"https"),Da(x),W?mr(x.toString(),S):Eh(x.toString(),S)}else on(2);m.I=0,m.l&&m.l.pa(E),Cm(m),su(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function Cm(m){if(m.I=0,m.ja=[],m.l){const E=ph(m.h);(E.length!=0||m.i.length!=0)&&(C(m.ja,E),C(m.ja,m.i),m.h.i.length=0,b(m.i),m.i.length=0),m.l.oa()}}function Am(m,E,S){var x=S instanceof Ri?un(S):new Ri(S);if(x.g!="")E&&(x.g=E+"."+x.g),mo(x,x.u);else{var W=l.location;x=W.protocol,E=E?E+"."+W.hostname:W.hostname,W=+W.port;const te=new Ri(null);x&&xn(te,x),E&&(te.g=E),W&&mo(te,W),S&&(te.h=S),x=te}return S=m.G,E=m.wa,S&&E&&_t(x,S,E),_t(x,"VER",m.ka),ka(m,x),x}function Im(m,E,S){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new wt(new Kr({ab:S})):new wt(m.ma),E.Fa(m.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rm(){}n=Rm.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function So(){}So.prototype.g=function(m,E){return new ei(m,E)};function ei(m,E){Pt.call(this),this.g=new Eo(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!P(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!P(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Ss(this)}_(ei,Pt),ei.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ei.prototype.close=function(){bh(this.g)},ei.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var S={};S.__data__=m,m=S}else this.v&&(S={},S.__data__=Xe(m),m=S);E.i.push(new ln(E.Ya++,m)),E.I==3&&Yr(E)},ei.prototype.N=function(){this.g.l=null,delete this.j,bh(this.g),delete this.g,ei.Z.N.call(this)};function xm(m){Xt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const S in E){m=S;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}_(xm,Xt);function Dm(){ui.call(this),this.status=1}_(Dm,ui);function Ss(m){this.g=m}_(Ss,Rm),Ss.prototype.ra=function(){L(this.g,"a")},Ss.prototype.qa=function(m){L(this.g,new xm(m))},Ss.prototype.pa=function(m){L(this.g,new Dm)},Ss.prototype.oa=function(){L(this.g,"b")},So.prototype.createWebChannel=So.prototype.g,ei.prototype.send=ei.prototype.o,ei.prototype.open=ei.prototype.m,ei.prototype.close=ei.prototype.close,ZP=function(){return new So},JP=function(){return _s()},XP=Lt,rT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ra.NO_ERROR=0,Ra.TIMEOUT=8,Ra.HTTP_ERROR=6,cg=Ra,uh.COMPLETE="complete",QP=uh,Ql.EventType=Zn,Zn.OPEN="a",Zn.CLOSE="b",Zn.ERROR="c",Zn.MESSAGE="d",Pt.prototype.listen=Pt.prototype.J,Af=Ql,wt.prototype.listenOnce=wt.prototype.K,wt.prototype.getLastError=wt.prototype.Ha,wt.prototype.getLastErrorCode=wt.prototype.ya,wt.prototype.getStatus=wt.prototype.ca,wt.prototype.getResponseJson=wt.prototype.La,wt.prototype.getResponseText=wt.prototype.la,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Fa,YP=wt}).apply(typeof Up<"u"?Up:typeof self<"u"?self:typeof window<"u"?window:{});const e2="@firebase/firestore",t2="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ii.UNAUTHENTICATED=new ii(null),ii.GOOGLE_CREDENTIALS=new ii("google-credentials-uid"),ii.FIRST_PARTY=new ii("first-party-uid"),ii.MOCK_USER=new ii("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eh="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=new Fy("@firebase/firestore");function Qu(){return Vl.logLevel}function de(n,...e){if(Vl.logLevel<=nt.DEBUG){const t=e.map(hb);Vl.debug(`Firestore (${eh}): ${n}`,...t)}}function ri(n,...e){if(Vl.logLevel<=nt.ERROR){const t=e.map(hb);Vl.error(`Firestore (${eh}): ${n}`,...t)}}function dd(n,...e){if(Vl.logLevel<=nt.WARN){const t=e.map(hb);Vl.warn(`Firestore (${eh}): ${n}`,...t)}}function hb(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,eO(n,i,t)}function eO(n,e,t){let i=`FIRESTORE (${eh}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ri(i),new Error(i)}function Ie(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||eO(e,r,i)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends uo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ii.UNAUTHENTICATED)))}shutdown(){}}class g7{constructor(e){this.t=e,this.currentUser=ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ie(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let o=new $s;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new $s,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const f=o;e.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},c=f=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>c(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new $s)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ie(typeof i.accessToken=="string",31837,{l:i}),new m7(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new ii(e)}}class y7{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=ii.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _7{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new y7(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ii.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class n2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class v7{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ie(this.o===void 0,3512);const i=o=>{o.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,de("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>i(o)))};const r=o=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>r(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new n2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ie(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new n2(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E7(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=E7(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<t&&(i+=e.charAt(r[o]%62))}return i}}function Fe(n,e){return n<e?-1:n>e?1:0}function sT(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),o=e.charAt(i);if(r!==o)return Y0(r)===Y0(o)?Fe(r,o):Y0(r)?1:-1}return Fe(n.length,e.length)}const T7=55296,S7=57343;function Y0(n){const e=n.charCodeAt(0);return e>=T7&&e<=S7}function Rc(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}function tO(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="__name__";class is{constructor(e,t,i){t===void 0?t=0:t>e.length&&we(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&we(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return is.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof is?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const o=is.compareSegments(e.get(r),t.get(r));if(o!==0)return o}return Fe(e.length,t.length)}static compareSegments(e,t){const i=is.isNumericId(e),r=is.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?is.extractNumericId(e).compare(is.extractNumericId(t)):sT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return aa.fromString(e.substring(4,e.length-2))}}class mt extends is{construct(e,t,i){return new mt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ve(ae.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const b7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends is{construct(e,t,i){return new Ht(e,t,i)}static isValidIdentifier(e){return b7.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===i2}static keyField(){return new Ht([i2])}static fromServerFormat(e){const t=[];let i="",r=0;const o=()=>{if(i.length===0)throw new ve(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new ve(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ve(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(o(),r++)}if(o(),l)throw new ve(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(t)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(mt.fromString(e))}static fromName(e){return new Te(mt.fromString(e).popFirst(5))}static empty(){return new Te(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(n,e,t){if(!t)throw new ve(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function w7(n,e,t,i){if(e===!0&&i===!0)throw new ve(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function r2(n){if(!Te.isDocumentKey(n))throw new ve(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function s2(n){if(Te.isDocumentKey(n))throw new ve(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function iO(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Zy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":we(12329,{type:typeof n})}function Xg(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ve(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zy(n);throw new ve(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(n,e){const t={typeString:n};return e&&(t.value=e),t}function Wd(n,e){if(!iO(n))throw new ve(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(r&&typeof l!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${i}' field to equal '${o.value}'`;break}}if(t)throw new ve(ae.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=-62135596800,a2=1e6;class yt{static now(){return yt.fromMillis(Date.now())}static fromDate(e){return yt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*a2);return new yt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<o2)throw new ve(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a2}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wd(e,yt._jsonSchema))return new yt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-o2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}yt._jsonSchemaVersion="firestore/timestamp/1.0",yt._jsonSchema={type:_n("string",yt._jsonSchemaVersion),seconds:_n("number"),nanoseconds:_n("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new yt(0,0))}static max(){return new Ne(new yt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=-1;class Jg{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function oT(n){return n.fields.find((e=>e.kind===2))}function rl(n){return n.fields.filter((e=>e.kind!==2))}Jg.UNKNOWN_ID=-1;class hg{constructor(e,t){this.fieldPath=e,this.kind=t}}class pd{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new pd(0,ji.min())}}function C7(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ne.fromTimestamp(i===1e9?new yt(t+1,0):new yt(t,i));return new ji(r,Te.empty(),e)}function rO(n){return new ji(n.readTime,n.key,md)}class ji{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new ji(Ne.min(),Te.empty(),md)}static max(){return new ji(Ne.max(),Te.empty(),md)}}function db(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==sO)throw n;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $(((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof $?t:$.resolve(t)}catch(t){return $.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):$.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):$.reject(t)}static resolve(e){return new $(((t,i)=>{t(e)}))}static reject(e){return new $(((t,i)=>{i(e)}))}static waitFor(e){return new $(((t,i)=>{let r=0,o=0,l=!1;e.forEach((c=>{++r,c.next((()=>{++o,l&&o===r&&t()}),(f=>i(f)))})),l=!0,o===r&&t()}))}static or(e){let t=$.resolve(!1);for(const i of e)t=t.next((r=>r?$.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,o)=>{i.push(t.call(this,r,o))})),this.waitFor(i)}static mapArray(e,t){return new $(((i,r)=>{const o=e.length,l=new Array(o);let c=0;for(let f=0;f<o;f++){const d=f;t(e[d]).next((g=>{l[d]=g,++c,c===o&&i(l)}),(g=>r(g)))}}))}static doWhile(e,t){return new $(((i,r)=>{const o=()=>{e()===!0?t().next((()=>{o()}),r):i()};o()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li="SimpleDb";class e_{static open(e,t,i,r){try{return new e_(t,e.transaction(r,i))}catch(o){throw new Bf(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new $s,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Bf(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=mb(i.target.error);this.S.reject(new Bf(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(de(Li,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new I7(t)}}class la{static delete(e){return de(Li,"Removing database:",e),ul(HN().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!ZN())return!1;if(la.F())return!0;const e=wn(),t=la.M(e),i=0<t&&t<10,r=aO(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,la.M(wn())===12.2&&ri("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(de(Li,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{const l=o.target.result;t(l)},r.onblocked=()=>{i(new Bf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{const l=o.target.error;l.name==="VersionError"?i(new ve(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new ve(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new Bf(e,l))},r.onupgradeneeded=o=>{de(Li,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,r.transaction,o.oldVersion,this.version).next((()=>{de(Li,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,r){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const c=e_.open(this.db,e,o?"readonly":"readwrite",i),f=r(c).next((d=>(c.C(),d))).catch((d=>(c.abort(d),$.reject(d)))).toPromise();return f.catch((()=>{})),await c.D,f}catch(c){const f=c,d=f.name!=="FirebaseError"&&l<3;if(de(Li,"Transaction failed with error:",f.message,"Retrying:",d),this.close(),!d)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function aO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class A7{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ul(this.U.delete())}}class Bf extends ve{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ba(n){return n.name==="IndexedDbTransactionError"}class I7{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(de(Li,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(de(Li,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ul(i)}add(e){return de(Li,"ADD",this.store.name,e,e),ul(this.store.add(e))}get(e){return ul(this.store.get(e)).next((t=>(t===void 0&&(t=null),de(Li,"GET",this.store.name,e,t),t)))}delete(e){return de(Li,"DELETE",this.store.name,e),ul(this.store.delete(e))}count(){return de(Li,"COUNT",this.store.name),ul(this.store.count())}J(e,t){const i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const o=r.getAll(i.range);return new $(((l,c)=>{o.onerror=f=>{c(f.target.error)},o.onsuccess=f=>{l(f.target.result)}}))}{const o=this.cursor(i),l=[];return this.H(o,((c,f)=>{l.push(f)})).next((()=>l))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new $(((r,o)=>{i.onerror=l=>{o(l.target.error)},i.onsuccess=l=>{r(l.target.result)}}))}Z(e,t){de(Li,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const r=this.cursor(i);return this.H(r,((o,l,c)=>c.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.H(r,t)}te(e){const t=this.cursor({});return new $(((i,r)=>{t.onerror=o=>{const l=mb(o.target.error);r(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((c=>{c?l.continue():i()})):i()}}))}H(e,t){const i=[];return new $(((r,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void r();const f=new A7(c),d=t(c.primaryKey,c.value,f);if(d instanceof $){const g=d.catch((_=>(f.done(),$.reject(_))));i.push(g)}f.isDone?r():f.G===null?c.continue():c.continue(f.G)}})).next((()=>$.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ul(n){return new $(((e,t)=>{n.onsuccess=i=>{const r=i.target.result;e(r)},n.onerror=i=>{const r=mb(i.target.error);t(r)}}))}let l2=!1;function mb(n){const e=la.M(wn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return l2||(l2=!0,setTimeout((()=>{throw i}),0)),i}}return n}const jf="IndexBackfiller";class R7{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){de(jf,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();de(jf,`Documents written: ${t}`)}catch(t){ba(t)?de(jf,"Ignoring IndexedDB error during index backfill: ",t):await $l(t)}await this.re(6e4)}))}}class x7{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let r=t,o=!0;return $.doWhile((()=>o===!0&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!i.has(l))return de(jf,`Processing collection: ${l}`),this.oe(e,l,r).next((c=>{r-=c,i.add(l)}));o=!1})))).next((()=>t-r))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(r,o))).next((c=>(de(jf,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c)))).next((()=>l.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((r,o)=>{const l=rO(o);db(l,i)>0&&(i=l)})),new ji(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=-1;function t_(n){return n==null}function gd(n){return n===0&&1/n==-1/0}function D7(n){return typeof n=="number"&&Number.isInteger(n)&&!gd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="";function Xn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=u2(e)),e=N7(n.get(t),e);return u2(e)}function N7(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const o=n.charAt(r);switch(o){case"\0":t+="";break;case Zg:t+="";break;default:t+=o}}return t}function u2(n){return n+Zg+""}function os(n){const e=n.length;if(Ie(e>=2,64408,{path:n}),e===2)return Ie(n.charAt(0)===Zg&&n.charAt(1)==="",56145,{path:n}),mt.emptyPath();const t=e-2,i=[];let r="";for(let o=0;o<e;){const l=n.indexOf(Zg,o);switch((l<0||l>t)&&we(50515,{path:n}),n.charAt(l+1)){case"":const c=n.substring(o,l);let f;r.length===0?f=c:(r+=c,f=r,r=""),i.push(f);break;case"":r+=n.substring(o,l),r+="\0";break;case"":r+=n.substring(o,l+1);break;default:we(61167,{path:n})}o=l+2}return new mt(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl="remoteDocuments",Yd="owner",Fu="owner",yd="mutationQueues",M7="userId",wr="mutations",c2="batchId",yl="userMutationsIndex",h2=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(n,e){return[n,Xn(e)]}function lO(n,e,t){return[n,Xn(e),t]}const P7={},xc="documentMutations",ey="remoteDocumentsV14",O7=["prefixPath","collectionGroup","readTime","documentId"],dg="documentKeyIndex",V7=["prefixPath","collectionGroup","documentId"],uO="collectionGroupIndex",k7=["collectionGroup","readTime","prefixPath","documentId"],_d="remoteDocumentGlobal",aT="remoteDocumentGlobalKey",Dc="targets",cO="queryTargetsIndex",L7=["canonicalId","targetId"],Nc="targetDocuments",U7=["targetId","path"],pb="documentTargetsIndex",F7=["path","targetId"],ty="targetGlobalKey",bl="targetGlobal",vd="collectionParents",B7=["collectionId","parent"],Mc="clientMetadata",j7="clientId",n_="bundles",z7="bundleId",i_="namedQueries",q7="name",gb="indexConfiguration",H7="indexId",lT="collectionGroupIndex",G7="collectionGroup",zf="indexState",K7=["indexId","uid"],hO="sequenceNumberIndex",$7=["uid","sequenceNumber"],qf="indexEntries",W7=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fO="documentKeyIndex",Y7=["indexId","uid","orderedDocumentKey"],r_="documentOverlays",Q7=["userId","collectionPath","documentId"],uT="collectionPathOverlayIndex",X7=["userId","collectionPath","largestBatchId"],dO="collectionGroupOverlayIndex",J7=["userId","collectionGroup","largestBatchId"],yb="globals",Z7="name",mO=[yd,wr,xc,sl,Dc,Yd,bl,Nc,Mc,_d,vd,n_,i_],eq=[...mO,r_],pO=[yd,wr,xc,ey,Dc,Yd,bl,Nc,Mc,_d,vd,n_,i_,r_],gO=pO,_b=[...gO,gb,zf,qf],tq=_b,yO=[..._b,yb],nq=yO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT extends oO{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function An(n,e){const t=Be(n);return la.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _O(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,t){this.comparator=e,this.root=t||qn.EMPTY}insert(e,t){return new qt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qn.BLACK,null,null))}remove(e){return new qt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fp(this.root,e,this.comparator,!0)}}class Fp{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qn{constructor(e,t,i,r,o){this.key=e,this.value=t,this.color=i??qn.RED,this.left=r??qn.EMPTY,this.right=o??qn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,o){return new qn(e??this.key,t??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,t,i),null):o===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return qn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return qn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}qn.EMPTY=null,qn.RED=!0,qn.BLACK=!1;qn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,t,i,r,o){return this}insert(e,t,i){return new qn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new d2(this.data.getIterator())}getIteratorFrom(e){return new d2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new St(this.comparator);return t.data=e,t}}class d2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Bu(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new or([])}unionWith(e){let t=new St(Ht.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new or(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Rc(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new vO("Invalid base64 string: "+o):o}})(e);return new Tn(t)}static fromUint8Array(e){const t=(function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o})(e);return new Tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const iq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(n){if(Ie(!!n,39018),typeof n=="string"){let e=0;const t=iq.exec(n);if(Ie(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:jt(n.seconds),nanos:jt(n.nanos)}}function jt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function io(n){return typeof n=="string"?Tn.fromBase64String(n):Tn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO="server_timestamp",TO="__type__",SO="__previous_value__",bO="__local_write_time__";function vb(n){return(n?.mapValue?.fields||{})[TO]?.stringValue===EO}function s_(n){const e=n.mapValue.fields[SO];return vb(e)?s_(e):e}function Ed(n){const e=no(n.mapValue.fields[bO].timestampValue);return new yt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{constructor(e,t,i,r,o,l,c,f,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=g}}const ny="(default)";class kl{constructor(e,t){this.projectId=e,this.database=t||ny}static empty(){return new kl("","")}get isDefaultDatabase(){return this.database===ny}isEqual(e){return e instanceof kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb="__type__",wO="__max__",ia={mapValue:{fields:{__type__:{stringValue:wO}}}},Tb="__vector__",Pc="value",mg={nullValue:"NULL_VALUE"};function ma(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vb(n)?4:CO(n)?9007199254740991:o_(n)?10:11:we(28295,{value:n})}function ps(n,e){if(n===e)return!0;const t=ma(n);if(t!==ma(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ed(n).isEqual(Ed(e));case 3:return(function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=no(r.timestampValue),c=no(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,o){return io(r.bytesValue).isEqual(io(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,o){return jt(r.geoPointValue.latitude)===jt(o.geoPointValue.latitude)&&jt(r.geoPointValue.longitude)===jt(o.geoPointValue.longitude)})(n,e);case 2:return(function(r,o){if("integerValue"in r&&"integerValue"in o)return jt(r.integerValue)===jt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=jt(r.doubleValue),c=jt(o.doubleValue);return l===c?gd(l)===gd(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return Rc(n.arrayValue.values||[],e.arrayValue.values||[],ps);case 10:case 11:return(function(r,o){const l=r.mapValue.fields||{},c=o.mapValue.fields||{};if(f2(l)!==f2(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!ps(l[f],c[f])))return!1;return!0})(n,e);default:return we(52216,{left:n})}}function Td(n,e){return(n.values||[]).find((t=>ps(t,e)))!==void 0}function pa(n,e){if(n===e)return 0;const t=ma(n),i=ma(e);if(t!==i)return Fe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=jt(o.integerValue||o.doubleValue),f=jt(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(n,e);case 3:return m2(n.timestampValue,e.timestampValue);case 4:return m2(Ed(n),Ed(e));case 5:return sT(n.stringValue,e.stringValue);case 6:return(function(o,l){const c=io(o),f=io(l);return c.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),f=l.split("/");for(let d=0;d<c.length&&d<f.length;d++){const g=Fe(c[d],f[d]);if(g!==0)return g}return Fe(c.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Fe(jt(o.latitude),jt(l.latitude));return c!==0?c:Fe(jt(o.longitude),jt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return p2(n.arrayValue,e.arrayValue);case 10:return(function(o,l){const c=o.fields||{},f=l.fields||{},d=c[Pc]?.arrayValue,g=f[Pc]?.arrayValue,_=Fe(d?.values?.length||0,g?.values?.length||0);return _!==0?_:p2(d,g)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===ia.mapValue&&l===ia.mapValue)return 0;if(o===ia.mapValue)return 1;if(l===ia.mapValue)return-1;const c=o.fields||{},f=Object.keys(c),d=l.fields||{},g=Object.keys(d);f.sort(),g.sort();for(let _=0;_<f.length&&_<g.length;++_){const v=sT(f[_],g[_]);if(v!==0)return v;const b=pa(c[f[_]],d[g[_]]);if(b!==0)return b}return Fe(f.length,g.length)})(n.mapValue,e.mapValue);default:throw we(23264,{he:t})}}function m2(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=no(n),i=no(e),r=Fe(t.seconds,i.seconds);return r!==0?r:Fe(t.nanos,i.nanos)}function p2(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const o=pa(t[r],i[r]);if(o)return o}return Fe(t.length,i.length)}function Oc(n){return hT(n)}function hT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=no(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return io(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Te.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const o of t.values||[])r?r=!1:i+=",",i+=hT(o);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",o=!0;for(const l of i)o?o=!1:r+=",",r+=`${l}:${hT(t.fields[l])}`;return r+"}"})(n.mapValue):we(61005,{value:n})}function pg(n){switch(ma(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=s_(n);return e?16+pg(e):16;case 5:return 2*n.stringValue.length;case 6:return io(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,o)=>r+pg(o)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return Wl(i.fields,((o,l)=>{r+=o.length+pg(l)})),r})(n.mapValue);default:throw we(13486,{value:n})}}function Sd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fT(n){return!!n&&"integerValue"in n}function bd(n){return!!n&&"arrayValue"in n}function g2(n){return!!n&&"nullValue"in n}function y2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gg(n){return!!n&&"mapValue"in n}function o_(n){return(n?.mapValue?.fields||{})[Eb]?.stringValue===Tb}function Hf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Wl(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Hf(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hf(n.arrayValue.values[t]);return e}return{...n}}function CO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===wO}const AO={mapValue:{fields:{[Eb]:{stringValue:Tb},[Pc]:{arrayValue:{}}}}};function sq(n){return"nullValue"in n?mg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sd(kl.empty(),Te.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?o_(n)?AO:{mapValue:{}}:we(35942,{value:n})}function oq(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sd(kl.empty(),Te.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?AO:"mapValue"in n?o_(n)?{mapValue:{}}:ia:we(61959,{value:n})}function _2(n,e){const t=pa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function v2(n,e){const t=pa(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.value=e}static empty(){return new vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!gg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hf(t)}setAll(e){let t=Ht.emptyPath(),i={},r=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const f=this.getFieldsMap(t);this.applyChanges(f,i,r),i={},r=[],t=c.popLast()}l?i[c.lastSegment()]=Hf(l):r.push(c.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,i,r)}delete(e){const t=this.field(e.popLast());gg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ps(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];gg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Wl(t,((r,o)=>e[r]=o));for(const r of i)delete e[r]}clone(){return new vi(Hf(this.value))}}function IO(n){const e=[];return Wl(n.fields,((t,i)=>{const r=new Ht([t]);if(gg(i)){const o=IO(i.mapValue).fields;if(o.length===0)e.push(r);else for(const l of o)e.push(r.child(l))}else e.push(r)})),new or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,t,i,r,o,l,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Qt(e,0,Ne.min(),Ne.min(),Ne.min(),vi.empty(),0)}static newFoundDocument(e,t,i,r){return new Qt(e,1,t,Ne.min(),i,r,0)}static newNoDocument(e,t){return new Qt(e,2,t,Ne.min(),Ne.min(),vi.empty(),0)}static newUnknownDocument(e,t){return new Qt(e,3,t,Ne.min(),Ne.min(),vi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t){this.position=e,this.inclusive=t}}function E2(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const o=e[r],l=n.position[r];if(o.field.isKeyField()?i=Te.comparator(Te.fromName(l.referenceValue),t.key):i=pa(l,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function T2(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ps(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,t="asc"){this.field=e,this.dir=t}}function aq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{}class st extends RO{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new lq(e,t,i):t==="array-contains"?new hq(e,i):t==="in"?new OO(e,i):t==="not-in"?new fq(e,i):t==="array-contains-any"?new dq(e,i):new st(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new uq(e,i):new cq(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(pa(t,this.value)):t!==null&&ma(this.value)===ma(t)&&this.matchesComparison(pa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tt extends RO{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Tt(e,t)}matches(e){return kc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kc(n){return n.op==="and"}function dT(n){return n.op==="or"}function Sb(n){return xO(n)&&kc(n)}function xO(n){for(const e of n.filters)if(e instanceof Tt)return!1;return!0}function mT(n){if(n instanceof st)return n.field.canonicalString()+n.op.toString()+Oc(n.value);if(Sb(n))return n.filters.map((e=>mT(e))).join(",");{const e=n.filters.map((t=>mT(t))).join(",");return`${n.op}(${e})`}}function DO(n,e){return n instanceof st?(function(i,r){return r instanceof st&&i.op===r.op&&i.field.isEqual(r.field)&&ps(i.value,r.value)})(n,e):n instanceof Tt?(function(i,r){return r instanceof Tt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((o,l,c)=>o&&DO(l,r.filters[c])),!0):!1})(n,e):void we(19439)}function NO(n,e){const t=n.filters.concat(e);return Tt.create(t,n.op)}function MO(n){return n instanceof st?(function(t){return`${t.field.canonicalString()} ${t.op} ${Oc(t.value)}`})(n):n instanceof Tt?(function(t){return t.op.toString()+" {"+t.getFilters().map(MO).join(" ,")+"}"})(n):"Filter"}class lq extends st{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class uq extends st{constructor(e,t){super(e,"in",t),this.keys=PO("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cq extends st{constructor(e,t){super(e,"not-in",t),this.keys=PO("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function PO(n,e){return(e.arrayValue?.values||[]).map((t=>Te.fromName(t.referenceValue)))}class hq extends st{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bd(t)&&Td(t.arrayValue,this.value)}}class OO extends st{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Td(this.value.arrayValue,t)}}class fq extends st{constructor(e,t){super(e,"not-in",t)}matches(e){if(Td(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Td(this.value.arrayValue,t)}}class dq extends st{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Td(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(e,t=null,i=[],r=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function pT(n,e=null,t=[],i=[],r=null,o=null,l=null){return new mq(n,e,t,i,r,o,l)}function Ll(n){const e=Be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>mT(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(o){return o.field.canonicalString()+o.dir})(i))).join(","),t_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Oc(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Oc(i))).join(",")),e.Te=t}return e.Te}function Qd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!aq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!DO(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!T2(n.startAt,e.startAt)&&T2(n.endAt,e.endAt)}function ry(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function sy(n,e){return n.filters.filter((t=>t instanceof st&&t.field.isEqual(e)))}function S2(n,e,t){let i=mg,r=!0;for(const o of sy(n,e)){let l=mg,c=!0;switch(o.op){case"<":case"<=":l=sq(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,c=!1;break;case"!=":case"not-in":l=mg}_2({value:i,inclusive:r},{value:l,inclusive:c})<0&&(i=l,r=c)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];_2({value:i,inclusive:r},{value:l,inclusive:t.inclusive})<0&&(i=l,r=t.inclusive);break}}return{value:i,inclusive:r}}function b2(n,e,t){let i=ia,r=!0;for(const o of sy(n,e)){let l=ia,c=!0;switch(o.op){case">=":case">":l=oq(o.value),c=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,c=!1;break;case"!=":case"not-in":l=ia}v2({value:i,inclusive:r},{value:l,inclusive:c})>0&&(i=l,r=c)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];v2({value:i,inclusive:r},{value:l,inclusive:t.inclusive})>0&&(i=l,r=t.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t=null,i=[],r=[],o=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pq(n,e,t,i,r,o,l,c){return new Xd(n,e,t,i,r,o,l,c)}function bb(n){return new Xd(n)}function w2(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function VO(n){return n.collectionGroup!==null}function Gf(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new St(Ht.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new iy(o,i))})),t.has(Ht.keyField().canonicalString())||e.Ie.push(new iy(Ht.keyField(),i))}return e.Ie}function lr(n){const e=Be(n);return e.Ee||(e.Ee=gq(e,Gf(n))),e.Ee}function gq(n,e){if(n.limitType==="F")return pT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const o=r.dir==="desc"?"asc":"desc";return new iy(r.field,o)}));const t=n.endAt?new Vc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Vc(n.startAt.position,n.startAt.inclusive):null;return pT(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function gT(n,e){const t=n.filters.concat([e]);return new Xd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function yT(n,e,t){return new Xd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function a_(n,e){return Qd(lr(n),lr(e))&&n.limitType===e.limitType}function kO(n){return`${Ll(lr(n))}|lt:${n.limitType}`}function Xu(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>MO(r))).join(", ")}]`),t_(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Oc(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Oc(r))).join(",")),`Target(${i})`})(lr(n))}; limitType=${n.limitType})`}function Jd(n,e){return e.isFoundDocument()&&(function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Te.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)})(n,e)&&(function(i,r){for(const o of Gf(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(l,c,f){const d=E2(l,c,f);return l.inclusive?d<=0:d<0})(i.startAt,Gf(i),r)||i.endAt&&!(function(l,c,f){const d=E2(l,c,f);return l.inclusive?d>=0:d>0})(i.endAt,Gf(i),r))})(n,e)}function yq(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LO(n){return(e,t)=>{let i=!1;for(const r of Gf(n)){const o=_q(r,e,t);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function _q(n,e,t){const i=n.field.isKeyField()?Te.comparator(e.key,t.key):(function(o,l,c){const f=l.data.field(o),d=c.data.field(o);return f!==null&&d!==null?pa(f,d):we(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return we(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Wl(this.inner,((t,i)=>{for(const[r,o]of i)e(r,o)}))}isEmpty(){return _O(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vq=new qt(Te.comparator);function Bi(){return vq}const UO=new qt(Te.comparator);function If(...n){let e=UO;for(const t of n)e=e.insert(t.key,t);return e}function FO(n){let e=UO;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function as(){return Kf()}function BO(){return Kf()}function Kf(){return new co((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Eq=new qt(Te.comparator),Tq=new St(Te.comparator);function Qe(...n){let e=Tq;for(const t of n)e=e.add(t);return e}const Sq=new St(Fe);function bq(){return Sq}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gd(e)?"-0":e}}function jO(n){return{integerValue:""+n}}function wq(n,e){return D7(e)?jO(e):wb(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(){this._=void 0}}function Cq(n,e,t){return n instanceof Lc?(function(r,o){const l={fields:{[TO]:{stringValue:EO},[bO]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&vb(o)&&(o=s_(o)),o&&(l.fields[SO]=o),{mapValue:l}})(t,e):n instanceof Uc?qO(n,e):n instanceof Fc?HO(n,e):(function(r,o){const l=zO(r,o),c=C2(l)+C2(r.Ae);return fT(l)&&fT(r.Ae)?jO(c):wb(r.serializer,c)})(n,e)}function Aq(n,e,t){return n instanceof Uc?qO(n,e):n instanceof Fc?HO(n,e):t}function zO(n,e){return n instanceof wd?(function(i){return fT(i)||(function(o){return!!o&&"doubleValue"in o})(i)})(e)?e:{integerValue:0}:null}class Lc extends l_{}class Uc extends l_{constructor(e){super(),this.elements=e}}function qO(n,e){const t=GO(e);for(const i of n.elements)t.some((r=>ps(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Fc extends l_{constructor(e){super(),this.elements=e}}function HO(n,e){let t=GO(e);for(const i of n.elements)t=t.filter((r=>!ps(r,i)));return{arrayValue:{values:t}}}class wd extends l_{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function C2(n){return jt(n.integerValue||n.doubleValue)}function GO(n){return bd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,t){this.field=e,this.transform=t}}function Iq(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Uc&&r instanceof Uc||i instanceof Fc&&r instanceof Fc?Rc(i.elements,r.elements,ps):i instanceof wd&&r instanceof wd?ps(i.Ae,r.Ae):i instanceof Lc&&r instanceof Lc})(n.transform,e.transform)}class Rq{constructor(e,t){this.version=e,this.transformResults=t}}class Ti{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ti}static exists(e){return new Ti(void 0,e)}static updateTime(e){return new Ti(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class u_{}function $O(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new c_(n.key,Ti.none()):new th(n.key,n.data,Ti.none());{const t=n.data,i=vi.empty();let r=new St(Ht.comparator);for(let o of e.fields)if(!r.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?i.delete(o):i.set(o,l),r=r.add(o)}return new wa(n.key,i,new or(r.toArray()),Ti.none())}}function xq(n,e,t){n instanceof th?(function(r,o,l){const c=r.value.clone(),f=I2(r.fieldTransforms,o,l.transformResults);c.setAll(f),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof wa?(function(r,o,l){if(!yg(r.precondition,o))return void o.convertToUnknownDocument(l.version);const c=I2(r.fieldTransforms,o,l.transformResults),f=o.data;f.setAll(WO(r)),f.setAll(c),o.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(r,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function $f(n,e,t,i){return n instanceof th?(function(o,l,c,f){if(!yg(o.precondition,l))return c;const d=o.value.clone(),g=R2(o.fieldTransforms,f,l);return d.setAll(g),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(n,e,t,i):n instanceof wa?(function(o,l,c,f){if(!yg(o.precondition,l))return c;const d=R2(o.fieldTransforms,f,l),g=l.data;return g.setAll(WO(o)),g.setAll(d),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((_=>_.field)))})(n,e,t,i):(function(o,l,c){return yg(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function Dq(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),o=zO(i.transform,r||null);o!=null&&(t===null&&(t=vi.empty()),t.set(i.field,o))}return t||null}function A2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Rc(i,r,((o,l)=>Iq(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class th extends u_{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class wa extends u_{constructor(e,t,i,r,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function WO(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function I2(n,e,t){const i=new Map;Ie(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const o=n[r],l=o.transform,c=e.data.field(o.field);i.set(o.field,Aq(l,c,t[r]))}return i}function R2(n,e,t){const i=new Map;for(const r of n){const o=r.transform,l=t.data.field(r.field);i.set(r.field,Cq(o,l,e))}return i}class c_ extends u_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YO extends u_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&xq(o,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=$f(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=$f(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=BO();return this.mutations.forEach((r=>{const o=e.get(r.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(r.key)?null:c;const f=$O(l,c);f!==null&&i.set(r.key,f),l.isValidDocument()||l.convertToNoDocument(Ne.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Qe())}isEqual(e){return this.batchId===e.batchId&&Rc(this.mutations,e.mutations,((t,i)=>A2(t,i)))&&Rc(this.baseMutations,e.baseMutations,((t,i)=>A2(t,i)))}}class Ab{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ie(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return Eq})();const o=e.mutations;for(let l=0;l<o.length;l++)r=r.insert(o[l].key,i[l].version);return new Ab(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nq{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pn,lt;function Mq(n){switch(n){case ae.OK:return we(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return we(15467,{code:n})}}function QO(n){if(n===void 0)return ri("GRPC error has no .code"),ae.UNKNOWN;switch(n){case pn.OK:return ae.OK;case pn.CANCELLED:return ae.CANCELLED;case pn.UNKNOWN:return ae.UNKNOWN;case pn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case pn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case pn.INTERNAL:return ae.INTERNAL;case pn.UNAVAILABLE:return ae.UNAVAILABLE;case pn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case pn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case pn.NOT_FOUND:return ae.NOT_FOUND;case pn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case pn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case pn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case pn.ABORTED:return ae.ABORTED;case pn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case pn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case pn.DATA_LOSS:return ae.DATA_LOSS;default:return we(39323,{code:n})}}(lt=pn||(pn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oq=new aa([4294967295,4294967295],0);function x2(n){const e=Pq().encode(n),t=new WP;return t.update(e),new Uint8Array(t.digest())}function D2(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new aa([t,i],0),new aa([r,o],0)]}class Rb{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Rf(`Invalid padding: ${t}`);if(i<0)throw new Rf(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Rf(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Rf(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=aa.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(aa.fromNumber(i)));return r.compare(Oq)===1&&(r=new aa([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=x2(e),[i,r]=D2(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,r,o);if(!this.we(l))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new Rb(o,r,t);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=x2(e),[i,r]=D2(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(i,r,o);this.Se(l)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Rf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,t,i,r,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Zd.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new h_(Ne.min(),r,new qt(Fe),Bi(),Qe())}}class Zd{constructor(e,t,i,r,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Zd(i,t,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}}class XO{constructor(e,t){this.targetId=e,this.Ce=t}}class JO{constructor(e,t,i=Tn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class N2{constructor(){this.ve=0,this.Fe=M2(),this.Me=Tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qe(),t=Qe(),i=Qe();return this.Fe.forEach(((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:we(38017,{changeType:o})}})),new Zd(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=M2()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ie(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Vq{constructor(e){this.Ge=e,this.ze=new Map,this.je=Bi(),this.Je=Bp(),this.He=Bp(),this.Ye=new qt(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(ry(o))if(i===0){const l=new Te(o.path);this.et(t,l,Qt.newNoDocument(l,Ne.min()))}else Ie(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const c=this.ut(e),f=c?this.ct(c,e,l):1;if(f!==0){this.it(t);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=t;let l,c;try{l=io(i).toUint8Array()}catch(f){if(f instanceof vO)return dd("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new Rb(l,r,o)}catch(f){return dd(f instanceof Rf?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.ge===0?null:c}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const c=this.ot(l);if(c){if(o.current&&ry(c.target)){const f=new Te(c.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,Qt.newNoDocument(f,e))}o.Be&&(t.set(l,o.ke()),o.qe())}}));let i=Qe();this.He.forEach(((o,l)=>{let c=!0;l.forEachWhile((f=>{const d=this.ot(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const r=new h_(e,t,this.Ye,this.je,i);return this.je=Bi(),this.Je=Bp(),this.He=Bp(),this.Ye=new qt(Fe),r}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new N2,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new St(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new St(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new N2),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Bp(){return new qt(Te.comparator)}function M2(){return new qt(Te.comparator)}const kq={asc:"ASCENDING",desc:"DESCENDING"},Lq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uq={and:"AND",or:"OR"};class Fq{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _T(n,e){return n.useProto3Json||t_(e)?e:{value:e}}function Bc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Bq(n,e){return Bc(n,e.toTimestamp())}function oi(n){return Ie(!!n,49232),Ne.fromTimestamp((function(t){const i=no(t);return new yt(i.seconds,i.nanos)})(n))}function xb(n,e){return vT(n,e).canonicalString()}function vT(n,e){const t=(function(r){return new mt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function eV(n){const e=mt.fromString(n);return Ie(uV(e),10190,{key:e.toString()}),e}function oy(n,e){return xb(n.databaseId,e.path)}function wl(n,e){const t=eV(e);if(t.get(1)!==n.databaseId.projectId)throw new ve(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ve(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(iV(t))}function tV(n,e){return xb(n.databaseId,e)}function nV(n){const e=eV(n);return e.length===4?mt.emptyPath():iV(e)}function ET(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function iV(n){return Ie(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function P2(n,e,t){return{name:oy(n,e),fields:t.value.mapValue.fields}}function jq(n,e,t){const i=wl(n,e.name),r=oi(e.updateTime),o=e.createTime?oi(e.createTime):Ne.min(),l=new vi({mapValue:{fields:e.fields}}),c=Qt.newFoundDocument(i,r,o,l);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function zq(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:we(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=(function(d,g){return d.useProto3Json?(Ie(g===void 0||typeof g=="string",58123),Tn.fromBase64String(g||"")):(Ie(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Tn.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(d){const g=d.code===void 0?ae.UNKNOWN:QO(d.code);return new ve(g,d.message||"")})(l);t=new JO(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=wl(n,i.document.name),o=oi(i.document.updateTime),l=i.document.createTime?oi(i.document.createTime):Ne.min(),c=new vi({mapValue:{fields:i.document.fields}}),f=Qt.newFoundDocument(r,o,l,c),d=i.targetIds||[],g=i.removedTargetIds||[];t=new _g(d,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=wl(n,i.document),o=i.readTime?oi(i.readTime):Ne.min(),l=Qt.newNoDocument(r,o),c=i.removedTargetIds||[];t=new _g([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=wl(n,i.document),o=i.removedTargetIds||[];t=new _g([],o,r,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,l=new Nq(r,o),c=i.targetId;t=new XO(c,l)}}return t}function ay(n,e){let t;if(e instanceof th)t={update:P2(n,e.key,e.value)};else if(e instanceof c_)t={delete:oy(n,e.key)};else if(e instanceof wa)t={update:P2(n,e.key,e.data),updateMask:Wq(e.fieldMask)};else{if(!(e instanceof YO))return we(16599,{Vt:e.type});t={verify:oy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(o,l){const c=l.transform;if(c instanceof Lc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Uc)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Fc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof wd)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw we(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,o){return o.updateTime!==void 0?{updateTime:Bq(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we(27497)})(n,e.precondition)),t}function TT(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?Ti.updateTime(oi(o.updateTime)):o.exists!==void 0?Ti.exists(o.exists):Ti.none()})(e.currentDocument):Ti.none(),i=e.updateTransforms?e.updateTransforms.map((r=>(function(l,c){let f=null;if("setToServerValue"in c)Ie(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),f=new Lc;else if("appendMissingElements"in c){const g=c.appendMissingElements.values||[];f=new Uc(g)}else if("removeAllFromArray"in c){const g=c.removeAllFromArray.values||[];f=new Fc(g)}else"increment"in c?f=new wd(l,c.increment):we(16584,{proto:c});const d=Ht.fromServerFormat(c.fieldPath);return new KO(d,f)})(n,r))):[];if(e.update){e.update.name;const r=wl(n,e.update.name),o=new vi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const d=f.fieldPaths||[];return new or(d.map((g=>Ht.fromServerFormat(g))))})(e.updateMask);return new wa(r,o,l,t,i)}return new th(r,o,t,i)}if(e.delete){const r=wl(n,e.delete);return new c_(r,t)}if(e.verify){const r=wl(n,e.verify);return new YO(r,t)}return we(1463,{proto:e})}function qq(n,e){return n&&n.length>0?(Ie(e!==void 0,14353),n.map((t=>(function(r,o){let l=r.updateTime?oi(r.updateTime):oi(o);return l.isEqual(Ne.min())&&(l=oi(o)),new Rq(l,r.transformResults||[])})(t,e)))):[]}function rV(n,e){return{documents:[tV(n,e.path)]}}function sV(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=tV(n,r);const o=(function(d){if(d.length!==0)return lV(Tt.create(d,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(d){if(d.length!==0)return d.map((g=>(function(v){return{field:Ju(v.field),direction:Gq(v.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=_T(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:r}}function oV(n){let e=nV(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Ie(i===1,65062);const g=t.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=(function(_){const v=aV(_);return v instanceof Tt&&Sb(v)?v.getFilters():[v]})(t.where));let l=[];t.orderBy&&(l=(function(_){return _.map((v=>(function(C){return new iy(Zu(C.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(v)))})(t.orderBy));let c=null;t.limit&&(c=(function(_){let v;return v=typeof _=="object"?_.value:_,t_(v)?null:v})(t.limit));let f=null;t.startAt&&(f=(function(_){const v=!!_.before,b=_.values||[];return new Vc(b,v)})(t.startAt));let d=null;return t.endAt&&(d=(function(_){const v=!_.before,b=_.values||[];return new Vc(b,v)})(t.endAt)),pq(e,r,l,o,c,"F",f,d)}function Hq(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aV(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Zu(t.unaryFilter.field);return st.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Zu(t.unaryFilter.field);return st.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Zu(t.unaryFilter.field);return st.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Zu(t.unaryFilter.field);return st.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(n):n.fieldFilter!==void 0?(function(t){return st.create(Zu(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Tt.create(t.compositeFilter.filters.map((i=>aV(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(t.compositeFilter.op))})(n):we(30097,{filter:n})}function Gq(n){return kq[n]}function Kq(n){return Lq[n]}function $q(n){return Uq[n]}function Ju(n){return{fieldPath:n.canonicalString()}}function Zu(n){return Ht.fromServerFormat(n.fieldPath)}function lV(n){return n instanceof st?(function(t){if(t.op==="=="){if(y2(t.value))return{unaryFilter:{field:Ju(t.field),op:"IS_NAN"}};if(g2(t.value))return{unaryFilter:{field:Ju(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(y2(t.value))return{unaryFilter:{field:Ju(t.field),op:"IS_NOT_NAN"}};if(g2(t.value))return{unaryFilter:{field:Ju(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ju(t.field),op:Kq(t.op),value:t.value}}})(n):n instanceof Tt?(function(t){const i=t.getFilters().map((r=>lV(r)));return i.length===1?i[0]:{compositeFilter:{op:$q(t.op),filters:i}}})(n):we(54877,{filter:n})}function Wq(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function uV(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t,i,r,o=Ne.min(),l=Ne.min(),c=Tn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new Hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.yt=e}}function Yq(n,e){let t;if(e.document)t=jq(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Te.fromSegments(e.noDocument.path),r=Fl(e.noDocument.readTime);t=Qt.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return we(56709);{const i=Te.fromSegments(e.unknownDocument.path),r=Fl(e.unknownDocument.version);t=Qt.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime((function(r){const o=new yt(r[0],r[1]);return Ne.fromTimestamp(o)})(e.readTime)),t}function O2(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ly(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(o,l){return{name:oy(o,l.key),fields:l.data.value.mapValue.fields,updateTime:Bc(o,l.version.toTimestamp()),createTime:Bc(o,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Ul(e.version)};else{if(!e.isUnknownDocument())return we(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Ul(e.version)}}return i}function ly(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ul(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fl(n){const e=new yt(n.seconds,n.nanoseconds);return Ne.fromTimestamp(e)}function cl(n,e){const t=(e.baseMutations||[]).map((o=>TT(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const c=e.mutations[o+1];l.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const i=e.mutations.map((o=>TT(n.yt,o))),r=yt.fromMillis(e.localWriteTimeMs);return new Cb(e.batchId,r,t,i)}function xf(n){const e=Fl(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Fl(n.lastLimboFreeSnapshotVersion):Ne.min();let i;return i=(function(o){return o.documents!==void 0})(n.query)?(function(o){const l=o.documents.length;return Ie(l===1,1966,{count:l}),lr(bb(nV(o.documents[0])))})(n.query):(function(o){return lr(oV(o))})(n.query),new Hs(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Tn.fromBase64String(n.resumeToken))}function hV(n,e){const t=Ul(e.snapshotVersion),i=Ul(e.lastLimboFreeSnapshotVersion);let r;r=ry(e.target)?rV(n.yt,e.target):sV(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ll(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function fV(n){const e=oV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?yT(e,e.limit,"L"):e}function Q0(n,e){return new Ib(e.largestBatchId,TT(n.yt,e.overlayMutation))}function V2(n,e){const t=e.path.lastSegment();return[n,Xn(e.path.popLast()),t]}function k2(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ul(i.readTime),documentKey:Xn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qq{getBundleMetadata(e,t){return L2(e).get(t).next((i=>{if(i)return(function(o){return{id:o.bundleId,createTime:Fl(o.createTime),version:o.version}})(i)}))}saveBundleMetadata(e,t){return L2(e).put((function(r){return{bundleId:r.id,createTime:Ul(oi(r.createTime)),version:r.version}})(t))}getNamedQuery(e,t){return U2(e).get(t).next((i=>{if(i)return(function(o){return{name:o.name,query:fV(o.bundledQuery),readTime:Fl(o.readTime)}})(i)}))}saveNamedQuery(e,t){return U2(e).put((function(r){return{name:r.name,readTime:Ul(oi(r.readTime)),bundledQuery:r.bundledQuery}})(t))}}function L2(n){return An(n,n_)}function U2(n){return An(n,i_)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new f_(e,i)}getOverlay(e,t){return gf(e).get(V2(this.userId,t)).next((i=>i?Q0(this.serializer,i):null))}getOverlays(e,t){const i=as();return $.forEach(t,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,t,i){const r=[];return i.forEach(((o,l)=>{const c=new Ib(t,l);r.push(this.St(e,c))})),$.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach((l=>r.add(Xn(l.getCollectionPath()))));const o=[];return r.forEach((l=>{const c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);o.push(gf(e).Z(uT,c))})),$.waitFor(o)}getOverlaysForCollection(e,t,i){const r=as(),o=Xn(t),l=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return gf(e).J(uT,l).next((c=>{for(const f of c){const d=Q0(this.serializer,f);r.set(d.getKey(),d)}return r}))}getOverlaysForCollectionGroup(e,t,i,r){const o=as();let l;const c=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return gf(e).ee({index:dO,range:c},((f,d,g)=>{const _=Q0(this.serializer,d);o.size()<r||_.largestBatchId===l?(o.set(_.getKey(),_),l=_.largestBatchId):g.done()})).next((()=>o))}St(e,t){return gf(e).put((function(r,o,l){const[c,f,d]=V2(o,l.mutation.key);return{userId:o,collectionPath:f,documentId:d,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:ay(r.yt,l.mutation)}})(this.serializer,this.userId,t))}}function gf(n){return An(n,r_)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xq{bt(e){return An(e,yb)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?Tn.fromUint8Array(i):Tn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(jt(e.integerValue));else if("doubleValue"in e){const i=jt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),gd(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=no(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(io(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?CO(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):o_(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):we(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const r of Object.keys(i))this.Ot(r,t),this.Ct(i[r],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const r=Pc,o=i[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(jt(o)),this.Ot(r,t),this.Ct(i[r],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const r of i)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),Te.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}hl.Kt=new hl;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=255;function Jq(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function F2(n){const e=64-(function(i){let r=0;for(let o=0;o<8;++o){const l=Jq(255&i[o]);if(r+=l,l!==8)break}return r})(n);return Math.ceil(e/8)}class Zq{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const r=t.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const r=t.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(e){const t=this.en(e),i=F2(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}nn(e){const t=this.en(e),i=F2(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}rn(){this.sn(ju),this.sn(255)}_n(){this.an(ju),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===ju?(this.sn(ju),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===ju?(this.an(ju),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class eH{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class tH{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class yf{constructor(){this.cn=new Zq,this.ln=new eH(this.cn),this.hn=new tH(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t,i,r){this.Tn=e,this.In=t,this.En=i,this.dn=r}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new fl(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:vg(this.En),directionalValue:vg(this.dn),orderedDocumentKey:vg(t),documentKey:i.path.toArray()}}Vn(e,t,i){const r=this.Rn(e,t,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Ko(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=B2(n.En,e.En),t!==0?t:(t=B2(n.dn,e.dn),t!==0?t:Te.comparator(n.In,e.In)))}function B2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function vg(n){return JN()?(function(t){let i="";for(let r=0;r<t.length;r++)i+=String.fromCharCode(t[r]);return i})(n):n}function j2(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(n)}class z2{constructor(e){this.mn=new St(((t,i)=>Ht.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(Ie(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=oT(e);if(t!==void 0&&!this.wn(t))return!1;const i=rl(e);let r=new Set,o=0,l=0;for(;o<i.length&&this.wn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.mn.size>0){const c=this.mn.getIterator().getNext();if(!r.has(c.field.canonicalString())){const f=i[o];if(!this.Sn(c,f)||!this.bn(this.fn[l++],f))return!1}++o}for(;o<i.length;++o){const c=i[o];if(l>=this.fn.length||!this.bn(this.fn[l++],c))return!1}return!0}Dn(){if(this.pn)return null;let e=new St(Ht.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new hg(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new hg(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new hg(i.field,i.dir==="asc"?0:1)));return new Jg(Jg.UNKNOWN_ID,this.collectionId,t,pd.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dV(n){if(Ie(n instanceof st||n instanceof Tt,20012),n instanceof st){if(n instanceof OO){const t=n.value.arrayValue?.values?.map((i=>st.create(n.field,"==",i)))||[];return Tt.create(t,"or")}return n}const e=n.filters.map((t=>dV(t)));return Tt.create(e,n.op)}function nH(n){if(n.getFilters().length===0)return[];const e=wT(dV(n));return Ie(mV(e),7391),ST(e)||bT(e)?[e]:e.getFilters()}function ST(n){return n instanceof st}function bT(n){return n instanceof Tt&&Sb(n)}function mV(n){return ST(n)||bT(n)||(function(t){if(t instanceof Tt&&dT(t)){for(const i of t.getFilters())if(!ST(i)&&!bT(i))return!1;return!0}return!1})(n)}function wT(n){if(Ie(n instanceof st||n instanceof Tt,34018),n instanceof st)return n;if(n.filters.length===1)return wT(n.filters[0]);const e=n.filters.map((i=>wT(i)));let t=Tt.create(e,n.op);return t=uy(t),mV(t)?t:(Ie(t instanceof Tt,64498),Ie(kc(t),40251),Ie(t.filters.length>1,57927),t.filters.reduce(((i,r)=>Db(i,r))))}function Db(n,e){let t;return Ie(n instanceof st||n instanceof Tt,38388),Ie(e instanceof st||e instanceof Tt,25473),t=n instanceof st?e instanceof st?(function(r,o){return Tt.create([r,o],"and")})(n,e):q2(n,e):e instanceof st?q2(e,n):(function(r,o){if(Ie(r.filters.length>0&&o.filters.length>0,48005),kc(r)&&kc(o))return NO(r,o.getFilters());const l=dT(r)?r:o,c=dT(r)?o:r,f=l.filters.map((d=>Db(d,c)));return Tt.create(f,"or")})(n,e),uy(t)}function q2(n,e){if(kc(e))return NO(e,n.getFilters());{const t=e.filters.map((i=>Db(n,i)));return Tt.create(t,"or")}}function uy(n){if(Ie(n instanceof st||n instanceof Tt,11850),n instanceof st)return n;const e=n.getFilters();if(e.length===1)return uy(e[0]);if(xO(n))return n;const t=e.map((r=>uy(r))),i=[];return t.forEach((r=>{r instanceof st?i.push(r):r instanceof Tt&&(r.op===n.op?i.push(...r.filters):i.push(r))})),i.length===1?i[0]:Tt.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(){this.Cn=new Nb}addToCollectionParentIndex(e,t){return this.Cn.add(t),$.resolve()}getCollectionParents(e,t){return $.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return $.resolve()}deleteFieldIndex(e,t){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,t){return $.resolve()}getDocumentsMatchingTarget(e,t){return $.resolve(null)}getIndexType(e,t){return $.resolve(0)}getFieldIndexes(e,t){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,t){return $.resolve(ji.min())}getMinOffsetFromCollectionGroup(e,t){return $.resolve(ji.min())}updateCollectionGroup(e,t,i){return $.resolve()}updateIndexEntries(e,t){return $.resolve()}}class Nb{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new St(mt.comparator),o=!r.has(i);return this.index[t]=r.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new St(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="IndexedDbIndexManager",jp=new Uint8Array(0);class rH{constructor(e,t){this.databaseId=t,this.vn=new Nb,this.Fn=new co((i=>Ll(i)),((i,r)=>Qd(i,r))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const o={collectionId:i,parent:Xn(r)};return G2(e).put(o)}return $.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[tO(t),""],!1,!0);return G2(e).J(r).next((o=>{for(const l of o){if(l.collectionId!==t)break;i.push(os(l.parent))}return i}))}addFieldIndex(e,t){const i=_f(e),r=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete r.indexId;const o=i.add(r);if(t.indexState){const l=qu(e);return o.next((c=>{l.put(k2(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const i=_f(e),r=qu(e),o=zu(e);return i.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=_f(e),i=zu(e),r=qu(e);return t.Z().next((()=>i.Z())).next((()=>r.Z()))}createTargetIndexes(e,t){return $.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((r=>{if(r===0||r===1){const o=new z2(i).Dn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const i=zu(e);let r=!0;const o=new Map;return $.forEach(this.Mn(t),(l=>this.xn(e,l).next((c=>{r&&(r=!!c),o.set(l,c)})))).next((()=>{if(r){let l=Qe();const c=[];return $.forEach(o,((f,d)=>{de(H2,`Using index ${(function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map((Z=>`${Z.fieldPath}:${Z.kind}`)).join(",")}`})(f)} to execute ${Ll(t)}`);const g=(function(k,Z){const K=oT(Z);if(K===void 0)return null;for(const ie of sy(k,K.fieldPath))switch(ie.op){case"array-contains-any":return ie.value.arrayValue.values||[];case"array-contains":return[ie.value]}return null})(d,f),_=(function(k,Z){const K=new Map;for(const ie of rl(Z))for(const R of sy(k,ie.fieldPath))switch(R.op){case"==":case"in":K.set(ie.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return K.set(ie.fieldPath.canonicalString(),R.value),Array.from(K.values())}return null})(d,f),v=(function(k,Z){const K=[];let ie=!0;for(const R of rl(Z)){const A=R.kind===0?S2(k,R.fieldPath,k.startAt):b2(k,R.fieldPath,k.startAt);K.push(A.value),ie&&(ie=A.inclusive)}return new Vc(K,ie)})(d,f),b=(function(k,Z){const K=[];let ie=!0;for(const R of rl(Z)){const A=R.kind===0?b2(k,R.fieldPath,k.endAt):S2(k,R.fieldPath,k.endAt);K.push(A.value),ie&&(ie=A.inclusive)}return new Vc(K,ie)})(d,f),C=this.On(f,d,v),D=this.On(f,d,b),N=this.Nn(f,d,_),B=this.Bn(f.indexId,g,C,v.inclusive,D,b.inclusive,N);return $.forEach(B,(V=>i.Y(V,t.limit).next((k=>{k.forEach((Z=>{const K=Te.fromSegments(Z.documentKey);l.has(K)||(l=l.add(K),c.push(K))}))}))))})).next((()=>c))}return $.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=nH(Tt.create(e.filters,"and")).map((i=>pT(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,r,o,l,c){const f=(t!=null?t.length:1)*Math.max(i.length,o.length),d=f/(t!=null?t.length:1),g=[];for(let _=0;_<f;++_){const v=t?this.Ln(t[_/d]):jp,b=this.kn(e,v,i[_%d],r),C=this.qn(e,v,o[_%d],l),D=c.map((N=>this.kn(e,v,N,!0)));g.push(...this.createRange(b,C,D))}return g}kn(e,t,i,r){const o=new fl(e,Te.empty(),t,i);return r?o:o.An()}qn(e,t,i,r){const o=new fl(e,Te.empty(),t,i);return r?o.An():o}xn(e,t){const i=new z2(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((o=>{let l=null;for(const c of o)i.yn(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l}))}getIndexType(e,t){let i=2;const r=this.Mn(t);return $.forEach(r,(o=>this.xn(e,o).next((l=>{l?i!==0&&l.fields.length<(function(f){let d=new St(Ht.comparator),g=!1;for(const _ of f.filters)for(const v of _.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?g=!0:d=d.add(v.field));for(const _ of f.orderBy)_.field.isKeyField()||(d=d.add(_.field));return d.size+(g?1:0)})(o)&&(i=1):i=0})))).next((()=>(function(l){return l.limit!==null})(t)&&r.length>1&&i===2?1:i))}Qn(e,t){const i=new yf;for(const r of rl(e)){const o=t.data.field(r.fieldPath);if(o==null)return null;const l=i.Pn(r.kind);hl.Kt.Dt(o,l)}return i.un()}Ln(e){const t=new yf;return hl.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new yf;return hl.Kt.Dt(Sd(this.databaseId,t),i.Pn((function(o){const l=rl(o);return l.length===0?0:l[l.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let r=[];r.push(new yf);let o=0;for(const l of rl(e)){const c=i[o++];for(const f of r)if(this.Un(t,l.fieldPath)&&bd(c))r=this.Kn(r,l,c);else{const d=f.Pn(l.kind);hl.Kt.Dt(c,d)}}return this.Wn(r)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const r=[...e],o=[];for(const l of i.arrayValue.values||[])for(const c of r){const f=new yf;f.seed(c.un()),hl.Kt.Dt(l,f.Pn(t.kind)),o.push(f)}return o}Un(e,t){return!!e.filters.find((i=>i instanceof st&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=_f(e),r=qu(e);return(t?i.J(lT,IDBKeyRange.bound(t,t)):i.J()).next((o=>{const l=[];return $.forEach(o,(c=>r.get([c.indexId,this.uid]).next((f=>{l.push((function(g,_){const v=_?new pd(_.sequenceNumber,new ji(Fl(_.readTime),new Te(os(_.documentKey)),_.largestBatchId)):pd.empty(),b=g.fields.map((([C,D])=>new hg(Ht.fromServerFormat(C),D)));return new Jg(g.indexId,g.collectionGroup,b,v)})(c,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,r)=>{const o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:Fe(i.collectionGroup,r.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const r=_f(e),o=qu(e);return this.Gn(e).next((l=>r.J(lT,IDBKeyRange.bound(t,t)).next((c=>$.forEach(c,(f=>o.put(k2(f.indexId,this.uid,l,i))))))))}updateIndexEntries(e,t){const i=new Map;return $.forEach(t,((r,o)=>{const l=i.get(r.collectionGroup);return(l?$.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next((c=>(i.set(r.collectionGroup,c),$.forEach(c,(f=>this.zn(e,r,f).next((d=>{const g=this.jn(o,f);return d.isEqual(g)?$.resolve():this.Jn(e,o,f,d,g)})))))))}))}Hn(e,t,i,r){return zu(e).put(r.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,r){return zu(e).delete(r.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const r=zu(e);let o=new St(Ko);return r.ee({index:fO,range:IDBKeyRange.only([i.indexId,this.uid,vg(this.$n(i,t))])},((l,c)=>{o=o.add(new fl(i.indexId,t,j2(c.arrayValue),j2(c.directionalValue)))})).next((()=>o))}jn(e,t){let i=new St(Ko);const r=this.Qn(t,e);if(r==null)return i;const o=oT(t);if(o!=null){const l=e.data.field(o.fieldPath);if(bd(l))for(const c of l.arrayValue.values||[])i=i.add(new fl(t.indexId,e.key,this.Ln(c),r))}else i=i.add(new fl(t.indexId,e.key,jp,r));return i}Jn(e,t,i,r,o){de(H2,"Updating index entries for document '%s'",t.key);const l=[];return(function(f,d,g,_,v){const b=f.getIterator(),C=d.getIterator();let D=Bu(b),N=Bu(C);for(;D||N;){let B=!1,V=!1;if(D&&N){const k=g(D,N);k<0?V=!0:k>0&&(B=!0)}else D!=null?V=!0:B=!0;B?(_(N),N=Bu(C)):V?(v(D),D=Bu(b)):(D=Bu(b),N=Bu(C))}})(r,o,Ko,(c=>{l.push(this.Hn(e,t,i,c))}),(c=>{l.push(this.Yn(e,t,i,c))})),$.waitFor(l)}Gn(e){let t=1;return qu(e).ee({index:hO,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,r,o)=>{o.done(),t=r.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((l,c)=>Ko(l,c))).filter(((l,c,f)=>!c||Ko(l,f[c-1])!==0));const r=[];r.push(e);for(const l of i){const c=Ko(l,e),f=Ko(l,t);if(c===0)r[0]=e.An();else if(c>0&&f<0)r.push(l),r.push(l.An());else if(f>0)break}r.push(t);const o=[];for(let l=0;l<r.length;l+=2){if(this.Zn(r[l],r[l+1]))return[];const c=r[l].Vn(this.uid,jp,Te.empty()),f=r[l+1].Vn(this.uid,jp,Te.empty());o.push(IDBKeyRange.bound(c,f))}return o}Zn(e,t){return Ko(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(K2)}getMinOffset(e,t){return $.mapArray(this.Mn(t),(i=>this.xn(e,i).next((r=>r||we(44426))))).next(K2)}}function G2(n){return An(n,vd)}function zu(n){return An(n,qf)}function _f(n){return An(n,gb)}function qu(n){return An(n,zf)}function K2(n){Ie(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;db(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new ji(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pV=41943040;class Yn{static withCacheSize(e){return new Yn(e,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(n,e,t){const i=n.store(wr),r=n.store(xc),o=[],l=IDBKeyRange.only(t.batchId);let c=0;const f=i.ee({range:l},((g,_,v)=>(c++,v.delete())));o.push(f.next((()=>{Ie(c===1,47070,{batchId:t.batchId})})));const d=[];for(const g of t.mutations){const _=lO(e,g.key.path,t.batchId);o.push(r.delete(_)),d.push(g.key)}return $.waitFor(o).next((()=>d))}function cy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw we(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn.DEFAULT_COLLECTION_PERCENTILE=10,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yn.DEFAULT=new Yn(pV,Yn.DEFAULT_COLLECTION_PERCENTILE,Yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yn.DISABLED=new Yn(-1,0,0);class d_{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Xn={}}static wt(e,t,i,r){Ie(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new d_(o,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $o(e).ee({index:yl,range:i},((r,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,i,r){const o=ec(e),l=$o(e);return l.add({}).next((c=>{Ie(typeof c=="number",49019);const f=new Cb(c,t,i,r),d=(function(b,C,D){const N=D.baseMutations.map((V=>ay(b.yt,V))),B=D.mutations.map((V=>ay(b.yt,V)));return{userId:C,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:N,mutations:B}})(this.serializer,this.userId,f),g=[];let _=new St(((v,b)=>Fe(v.canonicalString(),b.canonicalString())));for(const v of r){const b=lO(this.userId,v.key.path,c);_=_.add(v.key.path.popLast()),g.push(l.put(d)),g.push(o.put(b,P7))}return _.forEach((v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[c]=f.keys()})),$.waitFor(g).next((()=>f))}))}lookupMutationBatch(e,t){return $o(e).get(t).next((i=>i?(Ie(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),cl(this.serializer,i)):null))}er(e,t){return this.Xn[t]?$.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const r=i.keys();return this.Xn[t]=r,r}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let o=null;return $o(e).ee({index:yl,range:r},((l,c,f)=>{c.userId===this.userId&&(Ie(c.batchId>=i,47524,{tr:i}),o=cl(this.serializer,c)),f.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Sl;return $o(e).ee({index:yl,range:t,reverse:!0},((r,o,l)=>{i=o.batchId,l.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Sl],[this.userId,Number.POSITIVE_INFINITY]);return $o(e).J(yl,t).next((i=>i.map((r=>cl(this.serializer,r)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=fg(this.userId,t.path),r=IDBKeyRange.lowerBound(i),o=[];return ec(e).ee({range:r},((l,c,f)=>{const[d,g,_]=l,v=os(g);if(d===this.userId&&t.path.isEqual(v))return $o(e).get(_).next((b=>{if(!b)throw we(61480,{nr:l,batchId:_});Ie(b.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:b.userId,batchId:_}),o.push(cl(this.serializer,b))}));f.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new St(Fe);const r=[];return t.forEach((o=>{const l=fg(this.userId,o.path),c=IDBKeyRange.lowerBound(l),f=ec(e).ee({range:c},((d,g,_)=>{const[v,b,C]=d,D=os(b);v===this.userId&&o.path.isEqual(D)?i=i.add(C):_.done()}));r.push(f)})),$.waitFor(r).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,o=fg(this.userId,i),l=IDBKeyRange.lowerBound(o);let c=new St(Fe);return ec(e).ee({range:l},((f,d,g)=>{const[_,v,b]=f,C=os(v);_===this.userId&&i.isPrefixOf(C)?C.length===r&&(c=c.add(b)):g.done()})).next((()=>this.rr(e,c)))}rr(e,t){const i=[],r=[];return t.forEach((o=>{r.push($o(e).get(o).next((l=>{if(l===null)throw we(35274,{batchId:o});Ie(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),i.push(cl(this.serializer,l))})))})),$.waitFor(r).next((()=>i))}removeMutationBatch(e,t){return gV(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),$.forEach(i,(r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return $.resolve();const i=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),r=[];return ec(e).ee({range:i},((o,l,c)=>{if(o[0]===this.userId){const f=os(o[1]);r.push(f)}else c.done()})).next((()=>{Ie(r.length===0,56720,{sr:r.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return yV(e,this.userId,t)}_r(e){return _V(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Sl,lastStreamToken:""}))}}function yV(n,e,t){const i=fg(e,t.path),r=i[1],o=IDBKeyRange.lowerBound(i);let l=!1;return ec(n).ee({range:o,X:!0},((c,f,d)=>{const[g,_,v]=c;g===e&&_===r&&(l=!0),d.done()})).next((()=>l))}function $o(n){return An(n,wr)}function ec(n){return An(n,xc)}function _V(n){return An(n,yd)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bl(0)}static cr(){return new Bl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new Bl(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ne.fromTimestamp(new yt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.hr(e,r))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Hu(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(Ie(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let r=0;const o=[];return Hu(e).ee(((l,c)=>{const f=xf(c);f.sequenceNumber<=t&&i.get(f.targetId)===null&&(r++,o.push(this.removeTargetData(e,f)))})).next((()=>$.waitFor(o))).next((()=>r))}forEachTarget(e,t){return Hu(e).ee(((i,r)=>{const o=xf(r);t(o)}))}lr(e){return W2(e).get(ty).next((t=>(Ie(t!==null,2888),t)))}hr(e,t){return W2(e).put(ty,t)}Pr(e,t){return Hu(e).put(hV(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Ll(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let o=null;return Hu(e).ee({range:r,index:cO},((l,c,f)=>{const d=xf(c);Qd(t,d.target)&&(o=d,f.done())})).next((()=>o))}addMatchingKeys(e,t,i){const r=[],o=ta(e);return t.forEach((l=>{const c=Xn(l.path);r.push(o.put({targetId:i,path:c})),r.push(this.referenceDelegate.addReference(e,i,l))})),$.waitFor(r)}removeMatchingKeys(e,t,i){const r=ta(e);return $.forEach(t,(o=>{const l=Xn(o.path);return $.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,o)])}))}removeMatchingKeysForTargetId(e,t){const i=ta(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=ta(e);let o=Qe();return r.ee({range:i,X:!0},((l,c,f)=>{const d=os(l[1]),g=new Te(d);o=o.add(g)})).next((()=>o))}containsKey(e,t){const i=Xn(t.path),r=IDBKeyRange.bound([i],[tO(i)],!1,!0);let o=0;return ta(e).ee({index:pb,X:!0,range:r},(([l,c],f,d)=>{l!==0&&(o++,d.done())})).next((()=>o>0))}At(e,t){return Hu(e).get(t).next((i=>i?xf(i):null))}}function Hu(n){return An(n,Dc)}function W2(n){return An(n,bl)}function ta(n){return An(n,Nc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="LruGarbageCollector",vV=1048576;function Q2([n,e],[t,i]){const r=Fe(n,t);return r===0?Fe(e,i):r}class oH{constructor(e){this.Ir=e,this.buffer=new St(Q2),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Q2(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class EV{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(Y2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ba(t)?de(Y2,"Ignoring IndexedDB error during garbage collection: ",t):await $l(t)}await this.Vr(3e5)}))}}class aH{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return $.resolve(sr.ce);const i=new oH(t);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve($2)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$2):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,o,l,c,f,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,l=Date.now(),this.nthSequenceNumber(e,r)))).next((_=>(i=_,c=Date.now(),this.removeTargets(e,i,t)))).next((_=>(o=_,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((_=>(d=Date.now(),Qu()<=nt.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${r} in `+(c-l)+`ms
	Removed ${o} targets in `+(f-c)+`ms
	Removed ${_} documents in `+(d-f)+`ms
Total Duration: ${d-g}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_}))))}}function TV(n,e){return new aH(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e,t){this.db=e,this.garbageCollector=TV(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,r)=>t(r)))}addReference(e,t,i){return zp(e,i)}removeReference(e,t,i){return zp(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return zp(e,t)}br(e,t){return(function(r,o){let l=!1;return _V(r).te((c=>yV(r,c,o).next((f=>(f&&(l=!0),$.resolve(!f)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let o=0;return this.Sr(e,((l,c)=>{if(c<=t){const f=this.br(e,l).next((d=>{if(!d)return o++,i.getEntry(e,l).next((()=>(i.removeEntry(l,Ne.min()),ta(e).delete((function(_){return[0,Xn(_.path)]})(l)))))}));r.push(f)}})).next((()=>$.waitFor(r))).next((()=>i.apply(e))).next((()=>o))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return zp(e,t)}Sr(e,t){const i=ta(e);let r,o=sr.ce;return i.ee({index:pb},(([l,c],{path:f,sequenceNumber:d})=>{l===0?(o!==sr.ce&&t(new Te(os(r)),o),o=d,r=f):o=sr.ce})).next((()=>{o!==sr.ce&&t(new Te(os(r)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function zp(n,e){return ta(n).put((function(i,r){return{targetId:0,path:Xn(i.path),sequenceNumber:r}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(){this.changes=new co((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?$.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uH{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return el(e).put(i)}removeEntry(e,t,i){return el(e).delete((function(o,l){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ly(l),c[c.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=Qt.newInvalidDocument(t);return el(e).ee({index:dg,range:IDBKeyRange.only(vf(t))},((r,o)=>{i=this.Cr(t,o)})).next((()=>i))}vr(e,t){let i={size:0,document:Qt.newInvalidDocument(t)};return el(e).ee({index:dg,range:IDBKeyRange.only(vf(t))},((r,o)=>{i={document:this.Cr(t,o),size:cy(o)}})).next((()=>i))}getEntries(e,t){let i=Bi();return this.Fr(e,t,((r,o)=>{const l=this.Cr(r,o);i=i.insert(r,l)})).next((()=>i))}Mr(e,t){let i=Bi(),r=new qt(Te.comparator);return this.Fr(e,t,((o,l)=>{const c=this.Cr(o,l);i=i.insert(o,c),r=r.insert(o,cy(l))})).next((()=>({documents:i,Or:r})))}Fr(e,t,i){if(t.isEmpty())return $.resolve();let r=new St(Z2);t.forEach((f=>r=r.add(f)));const o=IDBKeyRange.bound(vf(r.first()),vf(r.last())),l=r.getIterator();let c=l.getNext();return el(e).ee({index:dg,range:o},((f,d,g)=>{const _=Te.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;c&&Z2(c,_)<0;)i(c,null),c=l.getNext();c&&c.isEqual(_)&&(i(c,d),c=l.hasNext()?l.getNext():null),c?g.j(vf(c)):g.done()})).next((()=>{for(;c;)i(c,null),c=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,i,r,o){const l=t.path,c=[l.popLast().toArray(),l.lastSegment(),ly(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return el(e).J(IDBKeyRange.bound(c,f,!0)).next((d=>{o?.incrementDocumentReadCount(d.length);let g=Bi();for(const _ of d){const v=this.Cr(Te.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);v.isFoundDocument()&&(Jd(t,v)||r.has(v.key))&&(g=g.insert(v.key,v))}return g}))}getAllFromCollectionGroup(e,t,i,r){let o=Bi();const l=J2(t,i),c=J2(t,ji.max());return el(e).ee({index:uO,range:IDBKeyRange.bound(l,c,!0)},((f,d,g)=>{const _=this.Cr(Te.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);o=o.insert(_.key,_),o.size===r&&g.done()})).next((()=>o))}newChangeBuffer(e){return new cH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return X2(e).get(aT).next((t=>(Ie(!!t,20021),t)))}Dr(e,t){return X2(e).put(aT,t)}Cr(e,t){if(t){const i=Yq(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ne.min())))return i}return Qt.newInvalidDocument(e)}}function bV(n){return new uH(n)}class cH extends SV{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new co((i=>i.toString()),((i,r)=>i.isEqual(r)))}applyChanges(e){const t=[];let i=0,r=new St(((o,l)=>Fe(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const c=this.Br.get(o);if(t.push(this.Nr.removeEntry(e,o,c.readTime)),l.isValidDocument()){const f=O2(this.Nr.serializer,l);r=r.add(o.path.popLast());const d=cy(f);i+=d-c.size,t.push(this.Nr.addEntry(e,o,f))}else if(i-=c.size,this.trackRemovals){const f=O2(this.Nr.serializer,l.convertToNoDocument(Ne.min()));t.push(this.Nr.addEntry(e,o,f))}})),r.forEach((o=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Nr.updateMetadata(e,i)),$.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:r})=>(r.forEach(((o,l)=>{this.Br.set(o,{size:l,readTime:i.get(o).readTime})})),i)))}}function X2(n){return An(n,_d)}function el(n){return An(n,ey)}function vf(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function J2(n,e){const t=e.documentKey.path.toArray();return[n,ly(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Z2(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let o=0;o<t.length-2&&o<i.length-2;++o)if(r=Fe(t[o],i[o]),r)return r;return r=Fe(t.length,i.length),r||(r=Fe(t[t.length-2],i[i.length-2]),r||Fe(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hH{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&$f(i.mutation,r,or.empty(),yt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Qe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Qe()){const r=as();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((o=>{let l=If();return o.forEach(((c,f)=>{l=l.insert(c,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=as();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Qe())))}populateOverlays(e,t,i){const r=[];return i.forEach((o=>{t.has(o)||r.push(o)})),this.documentOverlayCache.getOverlays(e,r).next((o=>{o.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,i,r){let o=Bi();const l=Kf(),c=(function(){return Kf()})();return t.forEach(((f,d)=>{const g=i.get(d.key);r.has(d.key)&&(g===void 0||g.mutation instanceof wa)?o=o.insert(d.key,d):g!==void 0?(l.set(d.key,g.mutation.getFieldMask()),$f(g.mutation,d,g.mutation.getFieldMask(),yt.now())):l.set(d.key,or.empty())})),this.recalculateAndSaveOverlays(e,o).next((f=>(f.forEach(((d,g)=>l.set(d,g))),t.forEach(((d,g)=>c.set(d,new hH(g,l.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,t){const i=Kf();let r=new qt(((l,c)=>l-c)),o=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((f=>{const d=t.get(f);if(d===null)return;let g=i.get(f)||or.empty();g=c.applyToLocalView(d,g),i.set(f,g);const _=(r.get(c.batchId)||Qe()).add(f);r=r.insert(c.batchId,_)}))})).next((()=>{const l=[],c=r.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),d=f.key,g=f.value,_=BO();g.forEach((v=>{if(!o.has(v)){const b=$O(t.get(v),i.get(v));b!==null&&_.set(v,b),o=o.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,d,_))}return $.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(l){return Te.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):VO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((o=>{const l=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-o.size):$.resolve(as());let c=md,f=o;return l.next((d=>$.forEach(d,((g,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),o.get(g)?$.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{f=f.insert(g,v)}))))).next((()=>this.populateOverlays(e,d,o))).next((()=>this.computeViews(e,f,d,Qe()))).next((g=>({batchId:c,changes:FO(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next((i=>{let r=If();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const o=t.collectionGroup;let l=If();return this.indexManager.getCollectionParents(e,o).next((c=>$.forEach(c,(f=>{const d=(function(_,v){return new Xd(v,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next((g=>{g.forEach(((_,v)=>{l=l.insert(_,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,r)))).next((l=>{o.forEach(((f,d)=>{const g=d.getKey();l.get(g)===null&&(l=l.insert(g,Qt.newInvalidDocument(g)))}));let c=If();return l.forEach(((f,d)=>{const g=o.get(f);g!==void 0&&$f(g.mutation,d,or.empty(),yt.now()),Jd(t,d)&&(c=c.insert(f,d))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return $.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:oi(r.createTime)}})(t)),$.resolve()}getNamedQuery(e,t){return $.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:fV(r.bundledQuery),readTime:oi(r.readTime)}})(t)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dH{constructor(){this.overlays=new qt(Te.comparator),this.qr=new Map}getOverlay(e,t){return $.resolve(this.overlays.get(t))}getOverlays(e,t){const i=as();return $.forEach(t,(r=>this.getOverlay(e,r).next((o=>{o!==null&&i.set(r,o)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,o)=>{this.St(e,t,o)})),$.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(i)),$.resolve()}getOverlaysForCollection(e,t,i){const r=as(),o=t.length+1,l=new Te(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,d=f.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&f.largestBatchId>i&&r.set(f.getKey(),f)}return $.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let o=new qt(((d,g)=>d-g));const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>i){let g=o.get(d.largestBatchId);g===null&&(g=as(),o=o.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const c=as(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,g)=>c.set(d,g))),!(c.size()>=r)););return $.resolve(c)}St(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new Ib(t,i));let o=this.qr.get(t);o===void 0&&(o=Qe(),this.qr.set(t,o)),this.qr.set(t,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mH{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(){this.Qr=new St(Pn.$r),this.Ur=new St(Pn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Pn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Pn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Te(new mt([])),i=new Pn(t,e),r=new Pn(t,e+1),o=[];return this.Ur.forEachInRange([i,r],(l=>{this.Gr(l),o.push(l.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Te(new mt([])),i=new Pn(t,e),r=new Pn(t,e+1);let o=Qe();return this.Ur.forEachInRange([i,r],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Pn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Pn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Te.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pH{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new St(Pn.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Cb(o,t,i,r);this.mutationQueue.push(l);for(const c of r)this.Zr=this.Zr.add(new Pn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return $.resolve(l)}lookupMutationBatch(e,t){return $.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ei(i),o=r<0?0:r;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Sl:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Pn(t,0),r=new Pn(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],(l=>{const c=this.Xr(l.Yr);o.push(c)})),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new St(Fe);return t.forEach((r=>{const o=new Pn(r,0),l=new Pn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,l],(c=>{i=i.add(c.Yr)}))})),$.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let o=i;Te.isDocumentKey(o)||(o=o.child(""));const l=new Pn(new Te(o),0);let c=new St(Fe);return this.Zr.forEachWhile((f=>{const d=f.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(c=c.add(f.Yr)),!0)}),l),$.resolve(this.ti(c))}ti(e){const t=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Ie(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return $.forEach(t.mutations,(r=>{const o=new Pn(r.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Pn(t,0),r=this.Zr.firstAfterOrEqual(i);return $.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gH{constructor(e){this.ri=e,this.docs=(function(){return new qt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),o=r?r.size:0,l=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return $.resolve(i?i.document.mutableCopy():Qt.newInvalidDocument(t))}getEntries(e,t){let i=Bi();return t.forEach((r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Qt.newInvalidDocument(r))})),$.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let o=Bi();const l=t.path,c=new Te(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:d,value:{document:g}}=f.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||db(rO(g),i)<=0||(r.has(g.key)||Jd(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,t,i,r){we(9500)}ii(e,t){return $.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new yH(this)}getSize(e){return $.resolve(this.size)}}class yH extends SV{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),$.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(e){this.persistence=e,this.si=new co((t=>Ll(t)),Qd),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new Mb,this.targetCount=0,this.ai=Bl.ur()}forEachTarget(e,t){return this.si.forEach(((i,r)=>t(r))),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),$.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Bl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,$.resolve()}updateTargetData(e,t){return this.Pr(t),$.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,t,i){let r=0;const o=[];return this.si.forEach(((l,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.si.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),$.waitFor(o).next((()=>r))}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return $.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),$.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const r=this.persistence.referenceDelegate,o=[];return r&&t.forEach((l=>{o.push(r.markPotentiallyOrphaned(e,l))})),$.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),$.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return $.resolve(i)}containsKey(e,t){return $.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,t){this.ui={},this.overlays={},this.ci=new sr(0),this.li=!1,this.li=!0,this.hi=new mH,this.referenceDelegate=e(this),this.Pi=new _H(this),this.indexManager=new iH,this.remoteDocumentCache=(function(r){return new gH(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new cV(t),this.Ii=new fH(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dH,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new pH(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){de("MemoryPersistence","Starting transaction:",e);const r=new vH(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((o=>this.referenceDelegate.di(r).next((()=>o)))).toPromise().then((o=>(r.raiseOnCommittedEvent(),o)))}Ai(e,t){return $.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class vH extends oO{constructor(e){super(),this.currentSequenceNumber=e}}class m_{constructor(e){this.persistence=e,this.Ri=new Mb,this.Vi=null}static mi(e){return new m_(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),$.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),$.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),$.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((o=>this.fi.add(o.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,(i=>{const r=Te.fromPath(i);return this.gi(e,r).next((o=>{o||t.removeEntry(r,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return $.or([()=>$.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class hy{constructor(e,t){this.persistence=e,this.pi=new co((i=>Xn(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=TV(this,t)}static mi(e,t){return new hy(e,t)}Ei(){}di(e){return $.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return $.forEach(this.pi,((i,r)=>this.br(e,i,r).next((o=>o?$.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,(l=>this.br(e,l,t).next((c=>{c||(i++,o.removeEntry(l,Ne.min()))})))).next((()=>o.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),$.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=pg(e.data.value)),t}br(e,t,i){return $.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return $.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EH{constructor(e){this.serializer=e}k(e,t,i,r){const o=new e_("createOrUpgrade",t);i<1&&r>=1&&((function(f){f.createObjectStore(Yd)})(e),(function(f){f.createObjectStore(yd,{keyPath:M7}),f.createObjectStore(wr,{keyPath:c2,autoIncrement:!0}).createIndex(yl,h2,{unique:!0}),f.createObjectStore(xc)})(e),ex(e),(function(f){f.createObjectStore(sl)})(e));let l=$.resolve();return i<3&&r>=3&&(i!==0&&((function(f){f.deleteObjectStore(Nc),f.deleteObjectStore(Dc),f.deleteObjectStore(bl)})(e),ex(e)),l=l.next((()=>(function(f){const d=f.store(bl),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return d.put(ty,g)})(o)))),i<4&&r>=4&&(i!==0&&(l=l.next((()=>(function(f,d){return d.store(wr).J().next((_=>{f.deleteObjectStore(wr),f.createObjectStore(wr,{keyPath:c2,autoIncrement:!0}).createIndex(yl,h2,{unique:!0});const v=d.store(wr),b=_.map((C=>v.put(C)));return $.waitFor(b)}))})(e,o)))),l=l.next((()=>{(function(f){f.createObjectStore(Mc,{keyPath:j7})})(e)}))),i<5&&r>=5&&(l=l.next((()=>this.yi(o)))),i<6&&r>=6&&(l=l.next((()=>((function(f){f.createObjectStore(_d)})(e),this.wi(o))))),i<7&&r>=7&&(l=l.next((()=>this.Si(o)))),i<8&&r>=8&&(l=l.next((()=>this.bi(e,o)))),i<9&&r>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&r>=10&&(l=l.next((()=>this.Di(o)))),i<11&&r>=11&&(l=l.next((()=>{(function(f){f.createObjectStore(n_,{keyPath:z7})})(e),(function(f){f.createObjectStore(i_,{keyPath:q7})})(e)}))),i<12&&r>=12&&(l=l.next((()=>{(function(f){const d=f.createObjectStore(r_,{keyPath:Q7});d.createIndex(uT,X7,{unique:!1}),d.createIndex(dO,J7,{unique:!1})})(e)}))),i<13&&r>=13&&(l=l.next((()=>(function(f){const d=f.createObjectStore(ey,{keyPath:O7});d.createIndex(dg,V7),d.createIndex(uO,k7)})(e))).next((()=>this.Ci(e,o))).next((()=>e.deleteObjectStore(sl)))),i<14&&r>=14&&(l=l.next((()=>this.Fi(e,o)))),i<15&&r>=15&&(l=l.next((()=>(function(f){f.createObjectStore(gb,{keyPath:H7,autoIncrement:!0}).createIndex(lT,G7,{unique:!1}),f.createObjectStore(zf,{keyPath:K7}).createIndex(hO,$7,{unique:!1}),f.createObjectStore(qf,{keyPath:W7}).createIndex(fO,Y7,{unique:!1})})(e)))),i<16&&r>=16&&(l=l.next((()=>{t.objectStore(zf).clear()})).next((()=>{t.objectStore(qf).clear()}))),i<17&&r>=17&&(l=l.next((()=>{(function(f){f.createObjectStore(yb,{keyPath:Z7})})(e)}))),i<18&&r>=18&&JN()&&(l=l.next((()=>{t.objectStore(zf).clear()})).next((()=>{t.objectStore(qf).clear()}))),l}wi(e){let t=0;return e.store(sl).ee(((i,r)=>{t+=cy(r)})).next((()=>{const i={byteSize:t};return e.store(_d).put(aT,i)}))}yi(e){const t=e.store(yd),i=e.store(wr);return t.J().next((r=>$.forEach(r,(o=>{const l=IDBKeyRange.bound([o.userId,Sl],[o.userId,o.lastAcknowledgedBatchId]);return i.J(yl,l).next((c=>$.forEach(c,(f=>{Ie(f.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const d=cl(this.serializer,f);return gV(e,o.userId,d).next((()=>{}))}))))}))))}Si(e){const t=e.store(Nc),i=e.store(sl);return e.store(bl).get(ty).next((r=>{const o=[];return i.ee(((l,c)=>{const f=new mt(l),d=(function(_){return[0,Xn(_)]})(f);o.push(t.get(d).next((g=>g?$.resolve():(_=>t.put({targetId:0,path:Xn(_),sequenceNumber:r.highestListenSequenceNumber}))(f))))})).next((()=>$.waitFor(o)))}))}bi(e,t){e.createObjectStore(vd,{keyPath:B7});const i=t.store(vd),r=new Nb,o=l=>{if(r.add(l)){const c=l.lastSegment(),f=l.popLast();return i.put({collectionId:c,parent:Xn(f)})}};return t.store(sl).ee({X:!0},((l,c)=>{const f=new mt(l);return o(f.popLast())})).next((()=>t.store(xc).ee({X:!0},(([l,c,f],d)=>{const g=os(c);return o(g.popLast())}))))}Di(e){const t=e.store(Dc);return t.ee(((i,r)=>{const o=xf(r),l=hV(this.serializer,o);return t.put(l)}))}Ci(e,t){const i=t.store(sl),r=[];return i.ee(((o,l)=>{const c=t.store(ey),f=(function(_){return _.document?new Te(mt.fromString(_.document.name).popFirst(5)):_.noDocument?Te.fromSegments(_.noDocument.path):_.unknownDocument?Te.fromSegments(_.unknownDocument.path):we(36783)})(l).path.toArray(),d={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(c.put(d))})).next((()=>$.waitFor(r)))}Fi(e,t){const i=t.store(wr),r=bV(this.serializer),o=new Pb(m_.mi,this.serializer.yt);return i.J().next((l=>{const c=new Map;return l.forEach((f=>{let d=c.get(f.userId)??Qe();cl(this.serializer,f).keys().forEach((g=>d=d.add(g))),c.set(f.userId,d)})),$.forEach(c,((f,d)=>{const g=new ii(d),_=f_.wt(this.serializer,g),v=o.getIndexManager(g),b=d_.wt(g,this.serializer,v,o.referenceDelegate);return new wV(r,b,_,v).recalculateAndSaveOverlaysForDocumentKeys(new cT(t,sr.ce),f).next()}))}))}}function ex(n){n.createObjectStore(Nc,{keyPath:U7}).createIndex(pb,F7,{unique:!0}),n.createObjectStore(Dc,{keyPath:"targetId"}).createIndex(cO,L7,{unique:!0}),n.createObjectStore(bl)}const Wo="IndexedDbPersistence",X0=18e5,J0=5e3,Z0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",TH="main";class Ob{constructor(e,t,i,r,o,l,c,f,d,g,_=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=o,this.window=l,this.document=c,this.xi=d,this.Oi=g,this.Ni=_,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!Ob.v())throw new ve(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new lH(this,r),this.$i=t+TH,this.serializer=new cV(f),this.Ui=new la(this.$i,this.Ni,new EH(this.serializer)),this.hi=new Xq,this.Pi=new sH(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bV(this.serializer),this.Ii=new Qq,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&ri(Wo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ve(ae.FAILED_PRECONDITION,Z0);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new sr(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>qp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ba(e))return de(Wo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return de(Wo,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Ef(e).get(Fu).next((t=>$.resolve(this.es(t))))}ts(e){return qp(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,X0)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=An(t,Mc);return i.J().next((r=>{const o=this.ss(r,X0),l=r.filter((c=>o.indexOf(c)===-1));return $.forEach(l,(c=>i.delete(c.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?$.resolve(!0):Ef(e).get(Fu).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,J0)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ve(ae.FAILED_PRECONDITION,Z0);return!1}}return!(!this.networkEnabled||!this.inForeground)||qp(e).J().next((i=>this.ss(i,J0).find((r=>{if(this.clientId!==r.clientId){const o=!this.networkEnabled&&r.networkEnabled,l=!this.inForeground&&r.inForeground,c=this.networkEnabled===r.networkEnabled;if(o||l&&c)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&de(Wo,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Yd,Mc],(e=>{const t=new cT(e,sr.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>qp(e).J().next((t=>this.ss(t,X0).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return d_.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new rH(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return f_.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){de(Wo,"Starting transaction:",e);const r=t==="readonly"?"readonly":"readwrite",o=(function(f){return f===18?nq:f===17?yO:f===16?tq:f===15?_b:f===14?gO:f===13?pO:f===12?eq:f===11?mO:void we(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,r,o,(c=>(l=new cT(c,this.ci?this.ci.next():sr.ce),t==="readwrite-primary"?this.Hi(l).next((f=>!!f||this.Yi(l))).next((f=>{if(!f)throw ri(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ve(ae.FAILED_PRECONDITION,sO);return i(l)})).next((f=>this.Xi(l).next((()=>f)))):this.Is(l).next((()=>i(l)))))).then((c=>(l.raiseOnCommittedEvent(),c)))}Is(e){return Ef(e).get(Fu).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,J0)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ve(ae.FAILED_PRECONDITION,Z0)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ef(e).put(Fu,t)}static v(){return la.v()}Zi(e){const t=Ef(e);return t.get(Fu).next((i=>this.es(i)?(de(Wo,"Releasing primary lease."),t.delete(Fu)):$.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(ri(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;XN()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return de(Wo,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return ri(Wo,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ri("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ef(n){return An(n,Yd)}function qp(n){return An(n,Mc)}function SH(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=Qe(),r=Qe();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new Vb(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bH{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return XN()?8:aO(wn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const o={result:null};return this.ys(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ws(e,t,r,i).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new bH;return this.Ss(e,t,l).next((c=>{if(o.result=c,this.Vs)return this.bs(e,t,l,c.size)}))})).next((()=>o.result))}bs(e,t,i,r){return i.documentReadCount<this.fs?(Qu()<=nt.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Xu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Qu()<=nt.DEBUG&&de("QueryEngine","Query:",Xu(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Qu()<=nt.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Xu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):$.resolve())}ys(e,t){if(w2(t))return $.resolve(null);let i=lr(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=yT(t,null,"F"),i=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((o=>{const l=Qe(...o);return this.ps.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((f=>{const d=this.Ds(t,c);return this.Cs(t,d,l,f.readTime)?this.ys(e,yT(t,null,"F")):this.vs(e,d,t,f)}))))})))))}ws(e,t,i,r){return w2(t)||r.isEqual(Ne.min())?$.resolve(null):this.ps.getDocuments(e,i).next((o=>{const l=this.Ds(t,o);return this.Cs(t,l,i,r)?$.resolve(null):(Qu()<=nt.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xu(t)),this.vs(e,l,t,C7(r,md)).next((c=>c)))}))}Ds(e,t){let i=new St(LO(e));return t.forEach(((r,o)=>{Jd(e,o)&&(i=i.add(o))})),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,t,i){return Qu()<=nt.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Xu(t)),this.ps.getDocumentsMatchingQuery(e,t,ji.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="LocalStore",wH=3e8;class CH{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new qt(Fe),this.xs=new co((o=>Ll(o)),Qd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function AV(n,e,t,i){return new CH(n,e,t,i)}async function IV(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((o=>(r=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((o=>{const l=[],c=[];let f=Qe();for(const d of r){l.push(d.batchId);for(const g of d.mutations)f=f.add(g.key)}for(const d of o){c.push(d.batchId);for(const g of d.mutations)f=f.add(g.key)}return t.localDocuments.getDocuments(i,f).next((d=>({Ls:d,removedBatchIds:l,addedBatchIds:c})))}))}))}function AH(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,f,d,g){const _=d.batch,v=_.keys();let b=$.resolve();return v.forEach((C=>{b=b.next((()=>g.getEntry(f,C))).next((D=>{const N=d.docVersions.get(C);Ie(N!==null,48541),D.version.compareTo(N)<0&&(_.applyToRemoteDocument(D,d),D.isValidDocument()&&(D.setReadTime(d.commitVersion),g.addEntry(D)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(f,_)))})(t,i,e,o).next((()=>o.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let f=Qe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(f=f.add(c.batch.mutations[d].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function RV(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function IH(n,e){const t=Be(n),i=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const c=[];e.targetChanges.forEach(((g,_)=>{const v=r.get(_);if(!v)return;c.push(t.Pi.removeMatchingKeys(o,g.removedDocuments,_).next((()=>t.Pi.addMatchingKeys(o,g.addedDocuments,_))));let b=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?b=b.withResumeToken(Tn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):g.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(g.resumeToken,i)),r=r.insert(_,b),(function(D,N,B){return D.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=wH?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(v,b,g)&&c.push(t.Pi.updateTargetData(o,b))}));let f=Bi(),d=Qe();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))})),c.push(RH(o,l,e.documentUpdates).next((g=>{f=g.ks,d=g.qs}))),!i.isEqual(Ne.min())){const g=t.Pi.getLastRemoteSnapshotVersion(o).next((_=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i)));c.push(g)}return $.waitFor(c).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,f,d))).next((()=>f))})).then((o=>(t.Ms=r,o)))}function RH(n,e,t){let i=Qe(),r=Qe();return t.forEach((o=>i=i.add(o))),e.getEntries(n,i).next((o=>{let l=Bi();return t.forEach(((c,f)=>{const d=o.get(c);f.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),f.isNoDocument()&&f.version.isEqual(Ne.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):de(kb,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",f.version)})),{ks:l,qs:r}}))}function xH(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Sl),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function DH(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.Pi.getTargetData(i,e).next((o=>o?(r=o,$.resolve(r)):t.Pi.allocateTargetId(i).next((l=>(r=new Hs(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function CT(n,e,t){const i=Be(n),r=i.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!ba(l))throw l;de(kb,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function tx(n,e,t){const i=Be(n);let r=Ne.min(),o=Qe();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,d,g){const _=Be(f),v=_.xs.get(g);return v!==void 0?$.resolve(_.Ms.get(v)):_.Pi.getTargetData(d,g)})(i,l,lr(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,c.targetId).next((f=>{o=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,t?r:Ne.min(),t?o:Qe()))).next((c=>(NH(i,yq(e),c),{documents:c,Qs:o})))))}function NH(n,e,t){let i=n.Os.get(e)||Ne.min();t.forEach(((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)})),n.Os.set(e,i)}class nx{constructor(){this.activeTargetIds=bq()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xV{constructor(){this.Mo=new nx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new nx,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MH{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="ConnectivityMonitor";class rx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(ix,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(ix,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hp=null;function AT(){return Hp===null?Hp=(function(){return 268435456+Math.round(2147483648*Math.random())})():Hp++,"0x"+Hp.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="RestConnection",PH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OH{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===ny?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,o){const l=AT(),c=this.zo(e,t.toUriEncodedString());de(eE,`Sending RPC '${e}' ${l}:`,c,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,o);const{host:d}=new URL(c),g=Ta(d);return this.Jo(e,c,f,i,g).then((_=>(de(eE,`Received RPC '${e}' ${l}: `,_),_)),(_=>{throw dd(eE,`RPC '${e}' ${l} failed with error: `,_,"url: ",c,"request:",i),_}))}Ho(e,t,i,r,o,l){return this.Go(e,t,i,r,o)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+eh})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,o)=>e[o]=r)),i&&i.headers.forEach(((r,o)=>e[o]=r))}zo(e,t){const i=PH[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn="WebChannelConnection";class kH extends OH{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,o){const l=AT();return new Promise(((c,f)=>{const d=new YP;d.setWithCredentials(!0),d.listenOnce(QP.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case cg.NO_ERROR:const _=d.getResponseJson();de(Wn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case cg.TIMEOUT:de(Wn,`RPC '${e}' ${l} timed out`),f(new ve(ae.DEADLINE_EXCEEDED,"Request time out"));break;case cg.HTTP_ERROR:const v=d.getStatus();if(de(Wn,`RPC '${e}' ${l} failed with status:`,v,"response text:",d.getResponseText()),v>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const C=b?.error;if(C&&C.status&&C.message){const D=(function(B){const V=B.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(V)>=0?V:ae.UNKNOWN})(C.status);f(new ve(D,C.message))}else f(new ve(ae.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new ve(ae.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{de(Wn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(r);de(Wn,`RPC '${e}' ${l} sending request:`,r),d.send(t,"POST",g,i,15)}))}T_(e,t,i){const r=AT(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=ZP(),c=JP(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const g=o.join("");de(Wn,`Creating RPC '${e}' stream ${r}: ${g}`,f);const _=l.createWebChannel(g,f);this.I_(_);let v=!1,b=!1;const C=new VH({Yo:N=>{b?de(Wn,`Not sending because RPC '${e}' stream ${r} is closed:`,N):(v||(de(Wn,`Opening RPC '${e}' stream ${r} transport.`),_.open(),v=!0),de(Wn,`RPC '${e}' stream ${r} sending:`,N),_.send(N))},Zo:()=>_.close()}),D=(N,B,V)=>{N.listen(B,(k=>{try{V(k)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return D(_,Af.EventType.OPEN,(()=>{b||(de(Wn,`RPC '${e}' stream ${r} transport opened.`),C.o_())})),D(_,Af.EventType.CLOSE,(()=>{b||(b=!0,de(Wn,`RPC '${e}' stream ${r} transport closed`),C.a_(),this.E_(_))})),D(_,Af.EventType.ERROR,(N=>{b||(b=!0,dd(Wn,`RPC '${e}' stream ${r} transport errored. Name:`,N.name,"Message:",N.message),C.a_(new ve(ae.UNAVAILABLE,"The operation could not be completed")))})),D(_,Af.EventType.MESSAGE,(N=>{if(!b){const B=N.data[0];Ie(!!B,16349);const V=B,k=V?.error||V[0]?.error;if(k){de(Wn,`RPC '${e}' stream ${r} received error:`,k);const Z=k.status;let K=(function(A){const M=pn[A];if(M!==void 0)return QO(M)})(Z),ie=k.message;K===void 0&&(K=ae.INTERNAL,ie="Unknown error status: "+Z+" with message "+k.message),b=!0,C.a_(new ve(K,ie)),_.close()}else de(Wn,`RPC '${e}' stream ${r} received:`,B),C.u_(B)}})),D(c,XP.STAT_EVENT,(N=>{N.stat===rT.PROXY?de(Wn,`RPC '${e}' stream ${r} detected buffering proxy`):N.stat===rT.NOPROXY&&de(Wn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LH(){return typeof window<"u"?window:null}function Eg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(n){return new Fq(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e,t,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&de("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="PersistentStream";class NV{constructor(e,t,i,r,o,l,c,f){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new DV(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(ri(t.toString()),ri("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new ve(ae.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(sx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(sx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class UH extends NV{constructor(e,t,i,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=zq(this.serializer,e),i=(function(o){if(!("targetChange"in o))return Ne.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ne.min():l.readTime?oi(l.readTime):Ne.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=ET(this.serializer),t.addTarget=(function(o,l){let c;const f=l.target;if(c=ry(f)?{documents:rV(o,f)}:{query:sV(o,f).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=ZO(o,l.resumeToken);const d=_T(o,l.expectedCount);d!==null&&(c.expectedCount=d)}else if(l.snapshotVersion.compareTo(Ne.min())>0){c.readTime=Bc(o,l.snapshotVersion.toTimestamp());const d=_T(o,l.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const i=Hq(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=ET(this.serializer),t.removeTarget=e,this.q_(t)}}class FH extends NV{constructor(e,t,i,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=qq(e.writeResults,e.commitTime),i=oi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=ET(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>ay(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BH{}class jH extends BH{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ve(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Go(e,vT(t,i),r,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ve(ae.UNKNOWN,o.toString())}))}Ho(e,t,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Ho(e,vT(t,i),r,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ve(ae.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class zH{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ri(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl="RemoteStore";class qH{constructor(e,t,i,r,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{Yl(this)&&(de(jl,"Restarting streams for network reachability change."),await(async function(f){const d=Be(f);d.Ea.add(4),await em(d),d.Ra.set("Unknown"),d.Ea.delete(4),await g_(d)})(this))}))})),this.Ra=new zH(i,r)}}async function g_(n){if(Yl(n))for(const e of n.da)await e(!0)}async function em(n){for(const e of n.da)await e(!1)}function MV(n,e){const t=Be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Bb(t)?Fb(t):nh(t).O_()&&Ub(t,e))}function Lb(n,e){const t=Be(n),i=nh(t);t.Ia.delete(e),i.O_()&&PV(t,e),t.Ia.size===0&&(i.O_()?i.L_():Yl(t)&&t.Ra.set("Unknown"))}function Ub(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nh(n).Y_(e)}function PV(n,e){n.Va.Ue(e),nh(n).Z_(e)}function Fb(n){n.Va=new Vq({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),nh(n).start(),n.Ra.ua()}function Bb(n){return Yl(n)&&!nh(n).x_()&&n.Ia.size>0}function Yl(n){return Be(n).Ea.size===0}function OV(n){n.Va=void 0}async function HH(n){n.Ra.set("Online")}async function GH(n){n.Ia.forEach(((e,t)=>{Ub(n,e)}))}async function KH(n,e){OV(n),Bb(n)?(n.Ra.ha(e),Fb(n)):n.Ra.set("Unknown")}async function $H(n,e,t){if(n.Ra.set("Online"),e instanceof JO&&e.state===2&&e.cause)try{await(async function(r,o){const l=o.cause;for(const c of o.targetIds)r.Ia.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Ia.delete(c),r.Va.removeTarget(c))})(n,e)}catch(i){de(jl,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await fy(n,i)}else if(e instanceof _g?n.Va.Ze(e):e instanceof XO?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ne.min()))try{const i=await RV(n.localStore);t.compareTo(i)>=0&&await(function(o,l){const c=o.Va.Tt(l);return c.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const g=o.Ia.get(d);g&&o.Ia.set(d,g.withResumeToken(f.resumeToken,l))}})),c.targetMismatches.forEach(((f,d)=>{const g=o.Ia.get(f);if(!g)return;o.Ia.set(f,g.withResumeToken(Tn.EMPTY_BYTE_STRING,g.snapshotVersion)),PV(o,f);const _=new Hs(g.target,f,d,g.sequenceNumber);Ub(o,_)})),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(i){de(jl,"Failed to raise snapshot:",i),await fy(n,i)}}async function fy(n,e,t){if(!ba(e))throw e;n.Ea.add(1),await em(n),n.Ra.set("Offline"),t||(t=()=>RV(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{de(jl,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await g_(n)}))}function VV(n,e){return e().catch((t=>fy(n,t,e)))}async function tm(n){const e=Be(n),t=ga(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sl;for(;WH(e);)try{const r=await xH(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,YH(e,r)}catch(r){await fy(e,r)}kV(e)&&LV(e)}function WH(n){return Yl(n)&&n.Ta.length<10}function YH(n,e){n.Ta.push(e);const t=ga(n);t.O_()&&t.X_&&t.ea(e.mutations)}function kV(n){return Yl(n)&&!ga(n).x_()&&n.Ta.length>0}function LV(n){ga(n).start()}async function QH(n){ga(n).ra()}async function XH(n){const e=ga(n);for(const t of n.Ta)e.ea(t.mutations)}async function JH(n,e,t){const i=n.Ta.shift(),r=Ab.from(i,e,t);await VV(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await tm(n)}async function ZH(n,e){e&&ga(n).X_&&await(async function(i,r){if((function(l){return Mq(l)&&l!==ae.ABORTED})(r.code)){const o=i.Ta.shift();ga(i).B_(),await VV(i,(()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r))),await tm(i)}})(n,e),kV(n)&&LV(n)}async function ox(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),de(jl,"RemoteStore received new credentials");const i=Yl(t);t.Ea.add(3),await em(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await g_(t)}async function eG(n,e){const t=Be(n);e?(t.Ea.delete(2),await g_(t)):e||(t.Ea.add(2),await em(t),t.Ra.set("Unknown"))}function nh(n){return n.ma||(n.ma=(function(t,i,r){const o=Be(t);return o.sa(),new UH(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:HH.bind(null,n),t_:GH.bind(null,n),r_:KH.bind(null,n),H_:$H.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Bb(n)?Fb(n):n.Ra.set("Unknown")):(await n.ma.stop(),OV(n))}))),n.ma}function ga(n){return n.fa||(n.fa=(function(t,i,r){const o=Be(t);return o.sa(),new FH(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:QH.bind(null,n),r_:ZH.bind(null,n),ta:XH.bind(null,n),na:JH.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await tm(n)):(await n.fa.stop(),n.Ta.length>0&&(de(jl,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,t,i,r,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new $s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,o){const l=Date.now()+i,c=new jb(e,t,l,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zb(n,e){if(ri("AsyncQueue",`${e}: ${n}`),ba(n))return new ve(ae.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{static emptySet(e){return new gc(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=If(),this.sortedSet=new qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gc)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new gc;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.ga=new qt(Te.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class jc{constructor(e,t,i,r,o,l,c,f,d){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(e,t,i,r,o){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new jc(e,t,gc.emptySet(t),l,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&a_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tG{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class nG{constructor(){this.queries=lx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Be(t),o=r.queries;r.queries=lx(),o.forEach(((l,c)=>{for(const f of c.Sa)f.onError(i)}))})(this,new ve(ae.ABORTED,"Firestore shutting down"))}}function lx(){return new co((n=>kO(n)),a_)}async function iG(n,e){const t=Be(n);let i=3;const r=e.query;let o=t.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new tG,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await t.onListen(r,!0);break;case 1:o.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(l){const c=zb(l,`Initialization of query '${Xu(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&qb(t)}async function rG(n,e){const t=Be(n),i=e.query;let r=3;const o=t.queries.get(i);if(o){const l=o.Sa.indexOf(e);l>=0&&(o.Sa.splice(l,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function sG(n,e){const t=Be(n);let i=!1;for(const r of e){const o=r.query,l=t.queries.get(o);if(l){for(const c of l.Sa)c.Fa(r)&&(i=!0);l.wa=r}}i&&qb(t)}function oG(n,e,t){const i=Be(n),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(t);i.queries.delete(e)}function qb(n){n.Ca.forEach((e=>{e.next()}))}var IT,ux;(ux=IT||(IT={})).Ma="default",ux.Cache="cache";class aG{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new jc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=jc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==IT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e){this.key=e}}class FV{constructor(e){this.key=e}}class lG{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Qe(),this.mutatedKeys=Qe(),this.eu=LO(e),this.tu=new gc(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new ax,r=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=r,c=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((g,_)=>{const v=r.get(g),b=Jd(this.query,_)?_:null,C=!!v&&this.mutatedKeys.has(v.key),D=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let N=!1;v&&b?v.data.isEqual(b.data)?C!==D&&(i.track({type:3,doc:b}),N=!0):this.su(v,b)||(i.track({type:2,doc:b}),N=!0,(f&&this.eu(b,f)>0||d&&this.eu(b,d)<0)&&(c=!0)):!v&&b?(i.track({type:0,doc:b}),N=!0):v&&!b&&(i.track({type:1,doc:v}),N=!0,(f||d)&&(c=!0)),N&&(b?(l=l.add(b),o=D?o.add(g):o.delete(g)):(l=l.delete(g),o=o.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),o=o.delete(g.key),i.track({type:1,doc:g})}return{tu:l,iu:i,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,_)=>(function(b,C){const D=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:N})}};return D(b)-D(C)})(g.type,_.type)||this.eu(g.doc,_.doc))),this.ou(i),r=r??!1;const c=t&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,d=f!==this.Za;return this.Za=f,l.length!==0||d?{snapshot:new jc(this.query,e.tu,o,l,e.mutatedKeys,f===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ax,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Qe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new FV(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new UV(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return jc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Hb="SyncEngine";class uG{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class cG{constructor(e){this.key=e,this.hu=!1}}class hG{constructor(e,t,i,r,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new co((c=>kO(c)),a_),this.Iu=new Map,this.Eu=new Set,this.du=new qt(Te.comparator),this.Au=new Map,this.Ru=new Mb,this.Vu={},this.mu=new Map,this.fu=Bl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fG(n,e,t=!0){const i=GV(n);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await BV(i,e,t,!0),r}async function dG(n,e){const t=GV(n);await BV(t,e,!0,!1)}async function BV(n,e,t,i){const r=await DH(n.localStore,lr(e)),o=r.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return i&&(c=await mG(n,e,o,l==="current",r.resumeToken)),n.isPrimaryClient&&t&&MV(n.remoteStore,r),c}async function mG(n,e,t,i,r){n.pu=(_,v,b)=>(async function(D,N,B,V){let k=N.view.ru(B);k.Cs&&(k=await tx(D.localStore,N.query,!1).then((({documents:R})=>N.view.ru(R,k))));const Z=V&&V.targetChanges.get(N.targetId),K=V&&V.targetMismatches.get(N.targetId)!=null,ie=N.view.applyChanges(k,D.isPrimaryClient,Z,K);return hx(D,N.targetId,ie.au),ie.snapshot})(n,_,v,b);const o=await tx(n.localStore,e,!0),l=new lG(e,o.Qs),c=l.ru(o.documents),f=Zd.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),d=l.applyChanges(c,n.isPrimaryClient,f);hx(n,t,d.au);const g=new uG(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function pG(n,e,t){const i=Be(n),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter((l=>!a_(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await CT(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Lb(i.remoteStore,r.targetId),RT(i,r.targetId)})).catch($l)):(RT(i,r.targetId),await CT(i.localStore,r.targetId,!0))}async function gG(n,e){const t=Be(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Lb(t.remoteStore,i.targetId))}async function yG(n,e,t){const i=KV(n);try{const r=await(function(l,c){const f=Be(l),d=yt.now(),g=c.reduce(((b,C)=>b.add(C.key)),Qe());let _,v;return f.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let C=Bi(),D=Qe();return f.Ns.getEntries(b,g).next((N=>{C=N,C.forEach(((B,V)=>{V.isValidDocument()||(D=D.add(B))}))})).next((()=>f.localDocuments.getOverlayedDocuments(b,C))).next((N=>{_=N;const B=[];for(const V of c){const k=Dq(V,_.get(V.key).overlayedDocument);k!=null&&B.push(new wa(V.key,k,IO(k.value.mapValue),Ti.exists(!0)))}return f.mutationQueue.addMutationBatch(b,d,B,c)})).next((N=>{v=N;const B=N.applyToLocalDocumentSet(_,D);return f.documentOverlayCache.saveOverlays(b,N.batchId,B)}))})).then((()=>({batchId:v.batchId,changes:FO(_)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,c,f){let d=l.Vu[l.currentUser.toKey()];d||(d=new qt(Fe)),d=d.insert(c,f),l.Vu[l.currentUser.toKey()]=d})(i,r.batchId,t),await nm(i,r.changes),await tm(i.remoteStore)}catch(r){const o=zb(r,"Failed to persist write");t.reject(o)}}async function jV(n,e){const t=Be(n);try{const i=await IH(t.localStore,e);e.targetChanges.forEach(((r,o)=>{const l=t.Au.get(o);l&&(Ie(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?Ie(l.hu,14607):r.removedDocuments.size>0&&(Ie(l.hu,42227),l.hu=!1))})),await nm(t,i,e)}catch(i){await $l(i)}}function cx(n,e,t){const i=Be(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(l,c){const f=Be(l);f.onlineState=c;let d=!1;f.queries.forEach(((g,_)=>{for(const v of _.Sa)v.va(c)&&(d=!0)})),d&&qb(f)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function _G(n,e,t){const i=Be(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),o=r&&r.key;if(o){let l=new qt(Te.comparator);l=l.insert(o,Qt.newNoDocument(o,Ne.min()));const c=Qe().add(o),f=new h_(Ne.min(),new Map,new qt(Fe),l,c);await jV(i,f),i.du=i.du.remove(o),i.Au.delete(e),Gb(i)}else await CT(i.localStore,e,!1).then((()=>RT(i,e,t))).catch($l)}async function vG(n,e){const t=Be(n),i=e.batch.batchId;try{const r=await AH(t.localStore,e);qV(t,i,null),zV(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await nm(t,r)}catch(r){await $l(r)}}async function EG(n,e,t){const i=Be(n);try{const r=await(function(l,c){const f=Be(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let g;return f.mutationQueue.lookupMutationBatch(d,c).next((_=>(Ie(_!==null,37113),g=_.keys(),f.mutationQueue.removeMutationBatch(d,_)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,g,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g))).next((()=>f.localDocuments.getDocuments(d,g)))}))})(i.localStore,e);qV(i,e,t),zV(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await nm(i,r)}catch(r){await $l(r)}}function zV(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function qV(n,e,t){const i=Be(n);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(t?o.reject(t):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function RT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||HV(n,i)}))}function HV(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Lb(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Gb(n))}function hx(n,e,t){for(const i of t)i instanceof UV?(n.Ru.addReference(i.key,e),TG(n,i)):i instanceof FV?(de(Hb,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||HV(n,i.key)):we(19791,{wu:i})}function TG(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(de(Hb,"New document in limbo: "+t),n.Eu.add(i),Gb(n))}function Gb(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Te(mt.fromString(e)),i=n.fu.next();n.Au.set(i,new cG(t)),n.du=n.du.insert(t,i),MV(n.remoteStore,new Hs(lr(bb(t.path)),i,"TargetPurposeLimboResolution",sr.ce))}}async function nm(n,e,t){const i=Be(n),r=[],o=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((c,f)=>{l.push(i.pu(f,e,t).then((d=>{if((d||t)&&i.isPrimaryClient){const g=d?!d.fromCache:t?.targetChanges.get(f.targetId)?.current;i.sharedClientState.updateQueryState(f.targetId,g?"current":"not-current")}if(d){r.push(d);const g=Vb.As(f.targetId,d);o.push(g)}})))})),await Promise.all(l),i.Pu.H_(r),await(async function(f,d){const g=Be(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>$.forEach(d,(v=>$.forEach(v.Es,(b=>g.persistence.referenceDelegate.addReference(_,v.targetId,b))).next((()=>$.forEach(v.ds,(b=>g.persistence.referenceDelegate.removeReference(_,v.targetId,b)))))))))}catch(_){if(!ba(_))throw _;de(kb,"Failed to update sequence numbers: "+_)}for(const _ of d){const v=_.targetId;if(!_.fromCache){const b=g.Ms.get(v),C=b.snapshotVersion,D=b.withLastLimboFreeSnapshotVersion(C);g.Ms=g.Ms.insert(v,D)}}})(i.localStore,o))}async function SG(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){de(Hb,"User change. New user:",e.toKey());const i=await IV(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((c=>{c.forEach((f=>{f.reject(new ve(ae.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await nm(t,i.Ls)}}function bG(n,e){const t=Be(n),i=t.Au.get(e);if(i&&i.hu)return Qe().add(i.key);{let r=Qe();const o=t.Iu.get(e);if(!o)return r;for(const l of o){const c=t.Tu.get(l);r=r.unionWith(c.view.nu)}return r}}function GV(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_G.bind(null,e),e.Pu.H_=sG.bind(null,e.eventManager),e.Pu.yu=oG.bind(null,e.eventManager),e}function KV(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=vG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EG.bind(null,e),e}class Cd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=p_(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return AV(this.persistence,new CV,e.initialUser,this.serializer)}Cu(e){return new Pb(m_.mi,this.serializer)}Du(e){return new xV}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cd.provider={build:()=>new Cd};class wG extends Cd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ie(this.persistence.referenceDelegate instanceof hy,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new EV(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new Pb((i=>hy.mi(i,t)),this.serializer)}}class CG extends Cd{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await KV(this.xu.syncEngine),await tm(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return AV(this.persistence,new CV,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new EV(i,e.asyncQueue,t)}Mu(e,t){const i=new x7(t,this.persistence);return new R7(e.asyncQueue,i)}Cu(e){const t=SH(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Yn.withCacheSize(this.cacheSizeBytes):Yn.DEFAULT;return new Ob(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,LH(),Eg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new xV}}class dy{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>cx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=SG.bind(null,this.syncEngine),await eG(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nG})()}createDatastore(e){const t=p_(e.databaseInfo.databaseId),i=(function(o){return new kH(o)})(e.databaseInfo);return(function(o,l,c,f){return new jH(o,l,c,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,o,l,c){return new qH(i,r,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>cx(this.syncEngine,t,0)),(function(){return rx.v()?new rx:new MH})())}createSyncEngine(e,t){return(function(r,o,l,c,f,d,g){const _=new hG(r,o,l,c,f,d);return g&&(_.gu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Be(t);de(jl,"RemoteStore shutting down."),i.Ea.add(5),await em(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}dy.provider={build:()=>new dy};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AG{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ri("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="FirestoreClient";class IG{constructor(e,t,i,r,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=ii.UNAUTHENTICATED,this.clientId=fb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,(async l=>{de(ya,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(de(ya,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=zb(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function tE(n,e){n.asyncQueue.verifyOperationInProgress(),de(ya,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await IV(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function fx(n,e){n.asyncQueue.verifyOperationInProgress();const t=await RG(n);de(ya,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>ox(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>ox(e.remoteStore,r))),n._onlineComponents=e}async function RG(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){de(ya,"Using user provided OfflineComponentProvider");try{await tE(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ae.FAILED_PRECONDITION||r.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;dd("Error using user provided cache. Falling back to memory cache: "+t),await tE(n,new Cd)}}else de(ya,"Using default OfflineComponentProvider"),await tE(n,new wG(void 0));return n._offlineComponents}async function $V(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(de(ya,"Using user provided OnlineComponentProvider"),await fx(n,n._uninitializedComponentsProvider._online)):(de(ya,"Using default OnlineComponentProvider"),await fx(n,new dy))),n._onlineComponents}function xG(n){return $V(n).then((e=>e.syncEngine))}async function DG(n){const e=await $V(n),t=e.eventManager;return t.onListen=fG.bind(null,e.syncEngine),t.onUnlisten=pG.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=dG.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=gG.bind(null,e.syncEngine),t}function NG(n,e,t={}){const i=new $s;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,f,d){const g=new AG({next:v=>{g.Nu(),l.enqueueAndForget((()=>rG(o,_))),v.fromCache&&f.source==="server"?d.reject(new ve(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),_=new aG(c,g,{includeMetadataChanges:!0,qa:!0});return iG(o,_)})(await DG(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MG="firestore.googleapis.com",mx=!0;class px{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MG,this.ssl=mx}else this.host=e.host,this.ssl=e.ssl??mx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pV;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vV)throw new ve(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}w7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=WV(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kb{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new px({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new px(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new p7;switch(i.type){case"firstParty":return new _7(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ve(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=dx.get(t);i&&(de("ComponentProvider","Removing Datastore"),dx.delete(t),i.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ih(this.firestore,e,this._query)}}class Vn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}toJSON(){return{type:Vn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Wd(t,Vn._jsonSchema))return new Vn(e,i||null,new Te(mt.fromString(t.referencePath)))}}Vn._jsonSchemaVersion="firestore/documentReference/1.0",Vn._jsonSchema={type:_n("string",Vn._jsonSchemaVersion),referencePath:_n("string")};class ua extends ih{constructor(e,t,i){super(e,t,bb(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new Te(e))}withConverter(e){return new ua(this.firestore,e,this._path)}}function Ad(n,e,...t){if(n=Cn(n),nO("collection","path",e),n instanceof Kb){const i=mt.fromString(e,...t);return s2(i),new ua(n,null,i)}{if(!(n instanceof Vn||n instanceof ua))throw new ve(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(mt.fromString(e,...t));return s2(i),new ua(n.firestore,null,i)}}function $b(n,e,...t){if(n=Cn(n),arguments.length===1&&(e=fb.newId()),nO("doc","path",e),n instanceof Kb){const i=mt.fromString(e,...t);return r2(i),new Vn(n,null,new Te(i))}{if(!(n instanceof Vn||n instanceof ua))throw new ve(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(mt.fromString(e,...t));return r2(i),new Vn(n.firestore,n instanceof ua?n.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="AsyncQueue";class yx{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new DV(this,"async_queue_retry"),this._c=()=>{const i=Eg();i&&de(gx,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Eg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Eg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new $s;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ba(e))throw e;de(gx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ri("INTERNAL UNHANDLED ERROR: ",_x(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=jb.createAndSchedule(this,e,t,i,(o=>this.hc(o)));return this.tc.push(r),r}uc(){this.nc&&we(47125,{Pc:_x(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function _x(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PG=-1;class y_ extends Kb{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new yx,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yx(e),this._firestoreClient=void 0,await e}}}function OG(n,e,t){t||(t=ny);const i=By(n,"firestore");if(i.isInitialized(t)){const r=i.getImmediate({identifier:t}),o=i.getOptions(t);if(ca(o,e))return r;throw new ve(ae.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ve(ae.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vV)throw new ve(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Ta(e.host)&&vS(e.host),i.initialize({options:e,instanceIdentifier:t})}function YV(n){if(n._terminated)throw new ve(ae.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||VG(n),n._firestoreClient}function VG(n){const e=n._freezeSettings(),t=(function(r,o,l,c){return new rq(r,o,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,WV(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new IG(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(r){const o=r?._online.build();return{_offline:r?._offline.build(o),_online:o}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ir(Tn.fromBase64String(e))}catch(t){throw new ve(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ir(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ir._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wd(e,ir._jsonSchema))return ir.fromBase64String(e.bytes)}}ir._jsonSchemaVersion="firestore/bytes/1.0",ir._jsonSchema={type:_n("string",ir._jsonSchemaVersion),bytes:_n("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hs._jsonSchemaVersion}}static fromJSON(e){if(Wd(e,hs._jsonSchema))return new hs(e.latitude,e.longitude)}}hs._jsonSchemaVersion="firestore/geoPoint/1.0",hs._jsonSchema={type:_n("string",hs._jsonSchemaVersion),latitude:_n("number"),longitude:_n("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:fs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wd(e,fs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new fs(e.vectorValues);throw new ve(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fs._jsonSchemaVersion="firestore/vectorValue/1.0",fs._jsonSchema={type:_n("string",fs._jsonSchemaVersion),vectorValues:_n("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kG=/^__.*__$/;class LG{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new wa(e,this.data,this.fieldMask,t,this.fieldTransforms):new th(e,this.data,t,this.fieldTransforms)}}function QV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:n})}}class Qb{constructor(e,t,i,r,o,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Qb({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return my(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(QV(this.Ac)&&kG.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class UG{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||p_(e)}Cc(e,t,i,r=!1){return new Qb({Ac:e,methodName:t,Dc:i,path:Ht.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function XV(n){const e=n._freezeSettings(),t=p_(n._databaseId);return new UG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function FG(n,e,t,i,r,o={}){const l=n.Cc(o.merge||o.mergeFields?2:0,e,t,r);ek("Data must be an object, but it was:",l,i);const c=JV(i,l);let f,d;if(o.merge)f=new or(l.fieldMask),d=l.fieldTransforms;else if(o.mergeFields){const g=[];for(const _ of o.mergeFields){const v=jG(e,_,t);if(!l.contains(v))throw new ve(ae.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);qG(g,v)||g.push(v)}f=new or(g),d=l.fieldTransforms.filter((_=>f.covers(_.field)))}else f=null,d=l.fieldTransforms;return new LG(new vi(c),f,d)}class Xb extends Yb{_toFieldTransform(e){return new KO(e.path,new Lc)}isEqual(e){return e instanceof Xb}}function BG(n,e,t,i=!1){return Jb(t,n.Cc(i?4:3,e))}function Jb(n,e){if(ZV(n=Cn(n)))return ek("Unsupported field value:",e,n),JV(n,e);if(n instanceof Yb)return(function(i,r){if(!QV(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const o=[];let l=0;for(const c of i){let f=Jb(c,r.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),l++}return{arrayValue:{values:o}}})(n,e)}return(function(i,r){if((i=Cn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return wq(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=yt.fromDate(i);return{timestampValue:Bc(r.serializer,o)}}if(i instanceof yt){const o=new yt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Bc(r.serializer,o)}}if(i instanceof hs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ir)return{bytesValue:ZO(r.serializer,i._byteString)};if(i instanceof Vn){const o=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw r.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:xb(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof fs)return(function(l,c){return{mapValue:{fields:{[Eb]:{stringValue:Tb},[Pc]:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return wb(c.serializer,d)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${Zy(i)}`)})(n,e)}function JV(n,e){const t={};return _O(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wl(n,((i,r)=>{const o=Jb(r,e.mc(i));o!=null&&(t[i]=o)})),{mapValue:{fields:t}}}function ZV(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof yt||n instanceof hs||n instanceof ir||n instanceof Vn||n instanceof Yb||n instanceof fs)}function ek(n,e,t){if(!ZV(t)||!iO(t)){const i=Zy(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function jG(n,e,t){if((e=Cn(e))instanceof Wb)return e._internalPath;if(typeof e=="string")return tk(n,e);throw my("Field path arguments must be of type string or ",n,!1,void 0,t)}const zG=new RegExp("[~\\*/\\[\\]]");function tk(n,e,t){if(e.search(zG)>=0)throw my(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wb(...e.split("."))._internalPath}catch{throw my(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function my(n,e,t,i,r){const o=i&&!i.isEmpty(),l=r!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(o||l)&&(f+=" (found",o&&(f+=` in field ${i}`),l&&(f+=` in document ${r}`),f+=")"),new ve(ae.INVALID_ARGUMENT,c+n+f)}function qG(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,t,i,r,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class HG extends nk{data(){return super.data()}}function Zb(n,e){return typeof e=="string"?tk(n,e):e instanceof Wb?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GG(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ve(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ew{}class KG extends ew{}function $G(n,e,...t){let i=[];e instanceof ew&&i.push(e),i=i.concat(t),(function(o){const l=o.filter((f=>f instanceof tw)).length,c=o.filter((f=>f instanceof __)).length;if(l>1||l>0&&c>0)throw new ve(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class __ extends KG{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new __(e,t,i)}_apply(e){const t=this._parse(e);return ik(e._query,t),new ih(e.firestore,e.converter,gT(e._query,t))}_parse(e){const t=XV(e.firestore);return(function(o,l,c,f,d,g,_){let v;if(d.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ve(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Ex(_,g);const C=[];for(const D of _)C.push(vx(f,o,D));v={arrayValue:{values:C}}}else v=vx(f,o,_)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Ex(_,g),v=BG(c,l,_,g==="in"||g==="not-in");return st.create(d,g,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function WG(n,e,t){const i=e,r=Zb("where",n);return __._create(r,i,t)}class tw extends ew{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new tw(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Tt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,o){let l=r;const c=o.getFlattenedFilters();for(const f of c)ik(l,f),l=gT(l,f)})(e._query,t),new ih(e.firestore,e.converter,gT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function vx(n,e,t){if(typeof(t=Cn(t))=="string"){if(t==="")throw new ve(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VO(e)&&t.indexOf("/")!==-1)throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(mt.fromString(t));if(!Te.isDocumentKey(i))throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Sd(n,new Te(i))}if(t instanceof Vn)return Sd(n,t._key);throw new ve(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Zy(t)}.`)}function Ex(n,e){if(!Array.isArray(n)||n.length===0)throw new ve(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ik(n,e){const t=(function(r,o){for(const l of r)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ve(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ve(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class YG{convertValue(e,t="none"){switch(ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Wl(e,((r,o)=>{i[r]=this.convertValue(o,t)})),i}convertVectorValue(e){const t=e.fields?.[Pc].arrayValue?.values?.map((i=>jt(i.doubleValue)));return new fs(t)}convertGeoPoint(e){return new hs(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=s_(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ed(e));default:return null}}convertTimestamp(e){const t=no(e);return new yt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=mt.fromString(e);Ie(uV(i),9688,{name:e});const r=new kl(i.get(1),i.get(3)),o=new Te(i.popFirst(5));return r.isEqual(t)||ri(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QG(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class Gp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yc extends nk{constructor(e,t,i,r,o,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Tg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Zb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=yc._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}yc._jsonSchemaVersion="firestore/documentSnapshot/1.0",yc._jsonSchema={type:_n("string",yc._jsonSchemaVersion),bundleSource:_n("string","DocumentSnapshot"),bundleName:_n("string"),bundle:_n("string")};class Tg extends yc{data(e={}){return super.data(e)}}class _c{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Gp(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Tg(this._firestore,this._userDataWriter,i.key,i,new Gp(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((c=>{const f=new Tg(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Gp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const f=new Tg(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Gp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,g=-1;return c.type!==0&&(d=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),g=l.indexOf(c.doc.key)),{type:XG(c.type),doc:f,oldIndex:d,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_c._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fb.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:n})}}_c._jsonSchemaVersion="firestore/querySnapshot/1.0",_c._jsonSchema={type:_n("string",_c._jsonSchemaVersion),bundleSource:_n("string","QuerySnapshot"),bundleName:_n("string"),bundle:_n("string")};class JG extends YG{constructor(e){super(),this.firestore=e}convertBytes(e){return new ir(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}function nw(n){n=Xg(n,ih);const e=Xg(n.firestore,y_),t=YV(e),i=new JG(e);return GG(n._query),NG(t,n._query).then((r=>new _c(e,i,n,r)))}function rk(n){return ok(Xg(n.firestore,y_),[new c_(n._key,Ti.none())])}function sk(n,e){const t=Xg(n.firestore,y_),i=$b(n),r=QG(n.converter,e);return ok(t,[FG(XV(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Ti.exists(!1))]).then((()=>i))}function ok(n,e){return(function(i,r){const o=new $s;return i.asyncQueue.enqueueAndForget((async()=>yG(await xG(i),r,o))),o.promise})(YV(n),e)}class ZG{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=nK(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function eK(n){return new ZG(n)}class tK{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=dy.provider,this._offlineComponentProvider={build:t=>new CG(t,e?.cacheSizeBytes,this.forceOwnership)}}}function nK(n){return new tK(n?.forceOwnership)}function iK(){return new Xb("serverTimestamp")}(function(e,t=!0){(function(r){eh=r})(Hl),xl(new ha("firestore",((i,{instanceIdentifier:r,options:o})=>{const l=i.getProvider("app").getImmediate(),c=new y_(new g7(i.getProvider("auth-internal")),new v7(l,i.getProvider("app-check-internal")),(function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ve(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kl(d.options.projectId,g)})(l,r),l);return o={useFetchStreams:t,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),ls(e2,t2,e),ls(e2,t2,"esm2020")})();const rK={apiKey:"AIzaSyDohDZ_1IPsjgOhyzw_2dRMWAkObxE4WV4",authDomain:"project-test-d89c4.firebaseapp.com",databaseURL:"https://project-test-d89c4-default-rtdb.europe-west1.firebasedatabase.app",projectId:"project-test-d89c4",storageBucket:"project-test-d89c4.firebasestorage.app",messagingSenderId:"829539787895",appId:"1:829539787895:web:7ab849b09811e70c265272",measurementId:"G-TJHM6BSH1H"},iw=iM(rK),sK=f7(iw),Tx=uz(iw);e8(sK,FP).then(()=>{console.log("Auth persistence set to 'localStorage'")}).catch(n=>{console.error("Failed to set persistence:",n)});const Cl=OG(iw,{localCache:eK({cacheSizeBytes:PG})});console.log("Firebase initialized successfully");console.log("Offline persistence enabled (via localCache)");const oK=()=>{const[n,e]=I.useState(0),t=I.useRef(n);return I.useEffect(()=>{const i=Math.random().toString(36).substring(2),r=OR(Tx,`activeSessions/${i}`);VR(r,{connectedAt:dz()}),Zj(r).remove();const o=OR(Tx,"activeSessions"),l=tz(o,c=>{const f=c.val(),d=f?Object.keys(f).length:0;d!==t.current&&(t.current=d,e(d))});return()=>{l(),VR(r,null).catch(console.error)}},[]),n},rw=I.createContext({});function sw(n){const e=I.useRef(null);return e.current===null&&(e.current=n()),e.current}const ow=typeof window<"u",ak=ow?I.useLayoutEffect:I.useEffect,v_=I.createContext(null);function aw(n,e){n.indexOf(e)===-1&&n.push(e)}function lw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ro=(n,e,t)=>t>e?e:t<n?n:t;let uw=()=>{};const so={},lk=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function uk(n){return typeof n=="object"&&n!==null}const ck=n=>/^0[^.\s]+$/u.test(n);function cw(n){let e;return()=>(e===void 0&&(e=n()),e)}const ur=n=>n,aK=(n,e)=>t=>e(n(t)),im=(...n)=>n.reduce(aK),Id=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class hw{constructor(){this.subscriptions=[]}add(e){return aw(this.subscriptions,e),()=>lw(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let o=0;o<r;o++){const l=this.subscriptions[o];l&&l(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ds=n=>n*1e3,ar=n=>n/1e3;function hk(n,e){return e?n*(1e3/e):0}const fk=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,lK=1e-7,uK=12;function cK(n,e,t,i,r){let o,l,c=0;do l=e+(t-e)/2,o=fk(l,i,r)-n,o>0?t=l:e=l;while(Math.abs(o)>lK&&++c<uK);return l}function rm(n,e,t,i){if(n===e&&t===i)return ur;const r=o=>cK(o,0,1,n,t);return o=>o===0||o===1?o:fk(r(o),e,i)}const dk=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,mk=n=>e=>1-n(1-e),pk=rm(.33,1.53,.69,.99),fw=mk(pk),gk=dk(fw),yk=n=>(n*=2)<1?.5*fw(n):.5*(2-Math.pow(2,-10*(n-1))),dw=n=>1-Math.sin(Math.acos(n)),_k=mk(dw),vk=dk(dw),hK=rm(.42,0,1,1),fK=rm(0,0,.58,1),Ek=rm(.42,0,.58,1),dK=n=>Array.isArray(n)&&typeof n[0]!="number",Tk=n=>Array.isArray(n)&&typeof n[0]=="number",mK={linear:ur,easeIn:hK,easeInOut:Ek,easeOut:fK,circIn:dw,circInOut:vk,circOut:_k,backIn:fw,backInOut:gk,backOut:pk,anticipate:yk},pK=n=>typeof n=="string",Sx=n=>{if(Tk(n)){uw(n.length===4);const[e,t,i,r]=n;return rm(e,t,i,r)}else if(pK(n))return mK[n];return n},Kp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function gK(n,e){let t=new Set,i=new Set,r=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function f(g){l.has(g)&&(d.schedule(g),n()),g(c)}const d={schedule:(g,_=!1,v=!1)=>{const C=v&&r?t:i;return _&&l.add(g),C.has(g)||C.add(g),g},cancel:g=>{i.delete(g),l.delete(g)},process:g=>{if(c=g,r){o=!0;return}r=!0,[t,i]=[i,t],t.forEach(f),t.clear(),r=!1,o&&(o=!1,d.process(g))}};return d}const yK=40;function Sk(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,l=Kp.reduce((k,Z)=>(k[Z]=gK(o),k),{}),{setup:c,read:f,resolveKeyframes:d,preUpdate:g,update:_,preRender:v,render:b,postRender:C}=l,D=()=>{const k=so.useManualTiming?r.timestamp:performance.now();t=!1,so.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(k-r.timestamp,yK),1)),r.timestamp=k,r.isProcessing=!0,c.process(r),f.process(r),d.process(r),g.process(r),_.process(r),v.process(r),b.process(r),C.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(D))},N=()=>{t=!0,i=!0,r.isProcessing||n(D)};return{schedule:Kp.reduce((k,Z)=>{const K=l[Z];return k[Z]=(ie,R=!1,A=!1)=>(t||N(),K.schedule(ie,R,A)),k},{}),cancel:k=>{for(let Z=0;Z<Kp.length;Z++)l[Kp[Z]].cancel(k)},state:r,steps:l}}const{schedule:zt,cancel:_a,state:zn,steps:nE}=Sk(typeof requestAnimationFrame<"u"?requestAnimationFrame:ur,!0);let Sg;function _K(){Sg=void 0}const Si={now:()=>(Sg===void 0&&Si.set(zn.isProcessing||so.useManualTiming?zn.timestamp:performance.now()),Sg),set:n=>{Sg=n,queueMicrotask(_K)}},bk=n=>e=>typeof e=="string"&&e.startsWith(n),mw=bk("--"),vK=bk("var(--"),pw=n=>vK(n)?EK.test(n.split("/*")[0].trim()):!1,EK=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,rh={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Rd={...rh,transform:n=>ro(0,1,n)},$p={...rh,default:1},Wf=n=>Math.round(n*1e5)/1e5,gw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function TK(n){return n==null}const SK=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yw=(n,e)=>t=>!!(typeof t=="string"&&SK.test(t)&&t.startsWith(n)||e&&!TK(t)&&Object.prototype.hasOwnProperty.call(t,e)),wk=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,o,l,c]=i.match(gw);return{[n]:parseFloat(r),[e]:parseFloat(o),[t]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},bK=n=>ro(0,255,n),iE={...rh,transform:n=>Math.round(bK(n))},_l={test:yw("rgb","red"),parse:wk("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+iE.transform(n)+", "+iE.transform(e)+", "+iE.transform(t)+", "+Wf(Rd.transform(i))+")"};function wK(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const xT={test:yw("#"),parse:wK,transform:_l.transform},sm=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Yo=sm("deg"),ms=sm("%"),Oe=sm("px"),CK=sm("vh"),AK=sm("vw"),bx={...ms,parse:n=>ms.parse(n)/100,transform:n=>ms.transform(n*100)},sc={test:yw("hsl","hue"),parse:wk("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+ms.transform(Wf(e))+", "+ms.transform(Wf(t))+", "+Wf(Rd.transform(i))+")"},gn={test:n=>_l.test(n)||xT.test(n)||sc.test(n),parse:n=>_l.test(n)?_l.parse(n):sc.test(n)?sc.parse(n):xT.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?_l.transform(n):sc.transform(n),getAnimatableNone:n=>{const e=gn.parse(n);return e.alpha=0,gn.transform(e)}},IK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function RK(n){return isNaN(n)&&typeof n=="string"&&(n.match(gw)?.length||0)+(n.match(IK)?.length||0)>0}const Ck="number",Ak="color",xK="var",DK="var(",wx="${}",NK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function xd(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let o=0;const c=e.replace(NK,f=>(gn.test(f)?(i.color.push(o),r.push(Ak),t.push(gn.parse(f))):f.startsWith(DK)?(i.var.push(o),r.push(xK),t.push(f)):(i.number.push(o),r.push(Ck),t.push(parseFloat(f))),++o,wx)).split(wx);return{values:t,split:c,indexes:i,types:r}}function Ik(n){return xd(n).values}function Rk(n){const{split:e,types:t}=xd(n),i=e.length;return r=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],r[l]!==void 0){const c=t[l];c===Ck?o+=Wf(r[l]):c===Ak?o+=gn.transform(r[l]):o+=r[l]}return o}}const MK=n=>typeof n=="number"?0:gn.test(n)?gn.getAnimatableNone(n):n;function PK(n){const e=Ik(n);return Rk(n)(e.map(MK))}const va={test:RK,parse:Ik,createTransformer:Rk,getAnimatableNone:PK};function rE(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function OK({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,o=0,l=0;if(!e)r=o=l=t;else{const c=t<.5?t*(1+e):t+e-t*e,f=2*t-c;r=rE(f,c,n+1/3),o=rE(f,c,n),l=rE(f,c,n-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function py(n,e){return t=>t>0?e:n}const Gt=(n,e,t)=>n+(e-n)*t,sE=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},VK=[xT,_l,sc],kK=n=>VK.find(e=>e.test(n));function Cx(n){const e=kK(n);if(!e)return!1;let t=e.parse(n);return e===sc&&(t=OK(t)),t}const Ax=(n,e)=>{const t=Cx(n),i=Cx(e);if(!t||!i)return py(n,e);const r={...t};return o=>(r.red=sE(t.red,i.red,o),r.green=sE(t.green,i.green,o),r.blue=sE(t.blue,i.blue,o),r.alpha=Gt(t.alpha,i.alpha,o),_l.transform(r))},DT=new Set(["none","hidden"]);function LK(n,e){return DT.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function UK(n,e){return t=>Gt(n,e,t)}function _w(n){return typeof n=="number"?UK:typeof n=="string"?pw(n)?py:gn.test(n)?Ax:jK:Array.isArray(n)?xk:typeof n=="object"?gn.test(n)?Ax:FK:py}function xk(n,e){const t=[...n],i=t.length,r=n.map((o,l)=>_w(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)t[l]=r[l](o);return t}}function FK(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=_w(n[r])(n[r],e[r]));return r=>{for(const o in i)t[o]=i[o](r);return t}}function BK(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const o=e.types[r],l=n.indexes[o][i[o]],c=n.values[l]??0;t[r]=c,i[o]++}return t}const jK=(n,e)=>{const t=va.createTransformer(e),i=xd(n),r=xd(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?DT.has(n)&&!r.values.length||DT.has(e)&&!i.values.length?LK(n,e):im(xk(BK(i,r),r.values),t):py(n,e)};function Dk(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Gt(n,e,t):_w(n)(n,e)}const zK=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>zt.update(e,t),stop:()=>_a(e),now:()=>zn.isProcessing?zn.timestamp:Si.now()}},Nk=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let o=0;o<r;o++)i+=Math.round(n(o/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},gy=2e4;function vw(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<gy;)e+=t,i=n.next(e);return e>=gy?1/0:e}function qK(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(vw(i),gy);return{type:"keyframes",ease:o=>i.next(r*o).value/e,duration:ar(r)}}const HK=5;function Mk(n,e,t){const i=Math.max(e-HK,0);return hk(t-n(i),e-i)}const Yt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},oE=.001;function GK({duration:n=Yt.duration,bounce:e=Yt.bounce,velocity:t=Yt.velocity,mass:i=Yt.mass}){let r,o,l=1-e;l=ro(Yt.minDamping,Yt.maxDamping,l),n=ro(Yt.minDuration,Yt.maxDuration,ar(n)),l<1?(r=d=>{const g=d*l,_=g*n,v=g-t,b=NT(d,l),C=Math.exp(-_);return oE-v/b*C},o=d=>{const _=d*l*n,v=_*t+t,b=Math.pow(l,2)*Math.pow(d,2)*n,C=Math.exp(-_),D=NT(Math.pow(d,2),l);return(-r(d)+oE>0?-1:1)*((v-b)*C)/D}):(r=d=>{const g=Math.exp(-d*n),_=(d-t)*n+1;return-oE+g*_},o=d=>{const g=Math.exp(-d*n),_=(t-d)*(n*n);return g*_});const c=5/n,f=$K(r,o,c);if(n=ds(n),isNaN(f))return{stiffness:Yt.stiffness,damping:Yt.damping,duration:n};{const d=Math.pow(f,2)*i;return{stiffness:d,damping:l*2*Math.sqrt(i*d),duration:n}}}const KK=12;function $K(n,e,t){let i=t;for(let r=1;r<KK;r++)i=i-n(i)/e(i);return i}function NT(n,e){return n*Math.sqrt(1-e*e)}const WK=["duration","bounce"],YK=["stiffness","damping","mass"];function Ix(n,e){return e.some(t=>n[t]!==void 0)}function QK(n){let e={velocity:Yt.velocity,stiffness:Yt.stiffness,damping:Yt.damping,mass:Yt.mass,isResolvedFromDuration:!1,...n};if(!Ix(n,YK)&&Ix(n,WK))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,o=2*ro(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:Yt.mass,stiffness:r,damping:o}}else{const t=GK(n);e={...e,...t,mass:Yt.mass},e.isResolvedFromDuration=!0}return e}function yy(n=Yt.visualDuration,e=Yt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const o=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],c={done:!1,value:o},{stiffness:f,damping:d,mass:g,duration:_,velocity:v,isResolvedFromDuration:b}=QK({...t,velocity:-ar(t.velocity||0)}),C=v||0,D=d/(2*Math.sqrt(f*g)),N=l-o,B=ar(Math.sqrt(f/g)),V=Math.abs(N)<5;i||(i=V?Yt.restSpeed.granular:Yt.restSpeed.default),r||(r=V?Yt.restDelta.granular:Yt.restDelta.default);let k;if(D<1){const K=NT(B,D);k=ie=>{const R=Math.exp(-D*B*ie);return l-R*((C+D*B*N)/K*Math.sin(K*ie)+N*Math.cos(K*ie))}}else if(D===1)k=K=>l-Math.exp(-B*K)*(N+(C+B*N)*K);else{const K=B*Math.sqrt(D*D-1);k=ie=>{const R=Math.exp(-D*B*ie),A=Math.min(K*ie,300);return l-R*((C+D*B*N)*Math.sinh(A)+K*N*Math.cosh(A))/K}}const Z={calculatedDuration:b&&_||null,next:K=>{const ie=k(K);if(b)c.done=K>=_;else{let R=K===0?C:0;D<1&&(R=K===0?ds(C):Mk(k,K,ie));const A=Math.abs(R)<=i,M=Math.abs(l-ie)<=r;c.done=A&&M}return c.value=c.done?l:ie,c},toString:()=>{const K=Math.min(vw(Z),gy),ie=Nk(R=>Z.next(K*R).value,K,30);return K+"ms "+ie},toTransition:()=>{}};return Z}yy.applyToOptions=n=>{const e=qK(n,100,yy);return n.ease=e.ease,n.duration=ds(e.duration),n.type="keyframes",n};function MT({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:f,restDelta:d=.5,restSpeed:g}){const _=n[0],v={done:!1,value:_},b=A=>c!==void 0&&A<c||f!==void 0&&A>f,C=A=>c===void 0?f:f===void 0||Math.abs(c-A)<Math.abs(f-A)?c:f;let D=t*e;const N=_+D,B=l===void 0?N:l(N);B!==N&&(D=B-_);const V=A=>-D*Math.exp(-A/i),k=A=>B+V(A),Z=A=>{const M=V(A),j=k(A);v.done=Math.abs(M)<=d,v.value=v.done?B:j};let K,ie;const R=A=>{b(v.value)&&(K=A,ie=yy({keyframes:[v.value,C(v.value)],velocity:Mk(k,A,v.value),damping:r,stiffness:o,restDelta:d,restSpeed:g}))};return R(0),{calculatedDuration:null,next:A=>{let M=!1;return!ie&&K===void 0&&(M=!0,Z(A),R(A)),K!==void 0&&A>=K?ie.next(A-K):(!M&&Z(A),v)}}}function XK(n,e,t){const i=[],r=t||so.mix||Dk,o=n.length-1;for(let l=0;l<o;l++){let c=r(n[l],n[l+1]);if(e){const f=Array.isArray(e)?e[l]||ur:e;c=im(f,c)}i.push(c)}return i}function JK(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const o=n.length;if(uw(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const c=XK(e,i,r),f=c.length,d=g=>{if(l&&g<n[0])return e[0];let _=0;if(f>1)for(;_<n.length-2&&!(g<n[_+1]);_++);const v=Id(n[_],n[_+1],g);return c[_](v)};return t?g=>d(ro(n[0],n[o-1],g)):d}function ZK(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Id(0,e,i);n.push(Gt(t,1,r))}}function e$(n){const e=[0];return ZK(e,n.length-1),e}function t$(n,e){return n.map(t=>t*e)}function n$(n,e){return n.map(()=>e||Ek).splice(0,n.length-1)}function Yf({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=dK(i)?i.map(Sx):Sx(i),o={done:!1,value:e[0]},l=t$(t&&t.length===e.length?t:e$(e),n),c=JK(l,e,{ease:Array.isArray(r)?r:n$(e,r)});return{calculatedDuration:n,next:f=>(o.value=c(f),o.done=f>=n,o)}}const i$=n=>n!==null;function Ew(n,{repeat:e,repeatType:t="loop"},i,r=1){const o=n.filter(i$),c=r<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!c||i===void 0?o[c]:i}const r$={decay:MT,inertia:MT,tween:Yf,keyframes:Yf,spring:yy};function Pk(n){typeof n.type=="string"&&(n.type=r$[n.type])}class Tw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const s$=n=>n/100;class Sw extends Tw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Si.now()&&this.tick(Si.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Pk(e);const{type:t=Yf,repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:l=0}=e;let{keyframes:c}=e;const f=t||Yf;f!==Yf&&typeof c[0]!="number"&&(this.mixKeyframes=im(s$,Dk(c[0],c[1])),c=[0,100]);const d=f({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...c].reverse(),velocity:-l})),d.calculatedDuration===null&&(d.calculatedDuration=vw(d));const{calculatedDuration:g}=d;this.calculatedDuration=g,this.resolvedDuration=g+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=d}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:f}=this;if(this.startTime===null)return i.next(0);const{delay:d=0,keyframes:g,repeat:_,repeatType:v,repeatDelay:b,type:C,onUpdate:D,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const B=this.currentTime-d*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?B<0:B>r;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let k=this.currentTime,Z=i;if(_){const A=Math.min(this.currentTime,r)/c;let M=Math.floor(A),j=A%1;!j&&A>=1&&(j=1),j===1&&M--,M=Math.min(M,_+1),!!(M%2)&&(v==="reverse"?(j=1-j,b&&(j-=b/c)):v==="mirror"&&(Z=l)),k=ro(0,1,j)*c}const K=V?{done:!1,value:g[0]}:Z.next(k);o&&(K.value=o(K.value));let{done:ie}=K;!V&&f!==null&&(ie=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ie);return R&&C!==MT&&(K.value=Ew(g,this.options,N,this.speed)),D&&D(K.value),R&&this.finish(),K}then(e,t){return this.finished.then(e,t)}get duration(){return ar(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ar(e)}get time(){return ar(this.currentTime)}set time(e){e=ds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Si.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ar(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=zK,startTime:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Si.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function o$(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const vl=n=>n*180/Math.PI,PT=n=>{const e=vl(Math.atan2(n[1],n[0]));return OT(e)},a$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:PT,rotateZ:PT,skewX:n=>vl(Math.atan(n[1])),skewY:n=>vl(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},OT=n=>(n=n%360,n<0&&(n+=360),n),Rx=PT,xx=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Dx=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),l$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:xx,scaleY:Dx,scale:n=>(xx(n)+Dx(n))/2,rotateX:n=>OT(vl(Math.atan2(n[6],n[5]))),rotateY:n=>OT(vl(Math.atan2(-n[2],n[0]))),rotateZ:Rx,rotate:Rx,skewX:n=>vl(Math.atan(n[4])),skewY:n=>vl(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function VT(n){return n.includes("scale")?1:0}function kT(n,e){if(!n||n==="none")return VT(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=l$,r=t;else{const c=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=a$,r=c}if(!r)return VT(e);const o=i[e],l=r[1].split(",").map(c$);return typeof o=="function"?o(l):l[o]}const u$=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return kT(t,e)};function c$(n){return parseFloat(n.trim())}const sh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],oh=new Set(sh),Nx=n=>n===rh||n===Oe,h$=new Set(["x","y","z"]),f$=sh.filter(n=>!h$.has(n));function d$(n){const e=[];return f$.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Al={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>kT(e,"x"),y:(n,{transform:e})=>kT(e,"y")};Al.translateX=Al.x;Al.translateY=Al.y;const Il=new Set;let LT=!1,UT=!1,FT=!1;function Ok(){if(UT){const n=Array.from(Il).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=d$(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([o,l])=>{i.getValue(o)?.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}UT=!1,LT=!1,Il.forEach(n=>n.complete(FT)),Il.clear()}function Vk(){Il.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(UT=!0)})}function m$(){FT=!0,Vk(),Ok(),FT=!1}class bw{constructor(e,t,i,r,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Il.add(this),LT||(LT=!0,zt.read(Vk),zt.resolveKeyframes(Ok))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const o=r?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const c=i.readValue(t,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),r&&o===void 0&&r.set(e[0])}o$(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Il.delete(this)}cancel(){this.state==="scheduled"&&(Il.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const p$=n=>n.startsWith("--");function g$(n,e,t){p$(e)?n.style.setProperty(e,t):n.style[e]=t}const y$=cw(()=>window.ScrollTimeline!==void 0),_$={};function v$(n,e){const t=cw(n);return()=>_$[e]??t()}const kk=v$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Df=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,Mx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Df([0,.65,.55,1]),circOut:Df([.55,0,1,.45]),backIn:Df([.31,.01,.66,-.59]),backOut:Df([.33,1.53,.69,.99])};function Lk(n,e){if(n)return typeof n=="function"?kk()?Nk(n,e):"ease-out":Tk(n)?Df(n):Array.isArray(n)?n.map(t=>Lk(t,e)||Mx.easeOut):Mx[n]}function E$(n,e,t,{delay:i=0,duration:r=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:f}={},d=void 0){const g={[e]:t};f&&(g.offset=f);const _=Lk(c,r);Array.isArray(_)&&(g.easing=_);const v={delay:i,duration:r,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return d&&(v.pseudoElement=d),n.animate(g,v)}function Uk(n){return typeof n=="function"&&"applyToOptions"in n}function T$({type:n,...e}){return Uk(n)&&kk()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class S$ extends Tw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:f}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,uw(typeof e.type!="string");const d=T$(e);this.animation=E$(t,i,r,d,o),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const g=Ew(r,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(g):g$(t,i,g),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return ar(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+ar(e)}get time(){return ar(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&y$()?(this.animation.timeline=e,ur):t(this)}}const Fk={anticipate:yk,backInOut:gk,circInOut:vk};function b$(n){return n in Fk}function w$(n){typeof n.ease=="string"&&b$(n.ease)&&(n.ease=Fk[n.ease])}const Px=10;class C$ extends S${constructor(e){w$(e),Pk(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:o,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const c=new Sw({...l,autoplay:!1}),f=ds(this.finishedTime??this.time);t.setWithVelocity(c.sample(f-Px).value,c.sample(f).value,Px),c.stop()}}const Ox=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(va.test(n)||n==="0")&&!n.startsWith("url("));function A$(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function I$(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],l=Ox(r,e),c=Ox(o,e);return!l||!c?!1:A$(n)||(t==="spring"||Uk(t))&&i}function BT(n){n.duration=0,n.type="keyframes"}const R$=new Set(["opacity","clipPath","filter","transform"]),x$=cw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function D$(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:o,type:l}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:d}=e.owner.getProps();return x$()&&t&&R$.has(t)&&(t!=="transform"||!d)&&!f&&!i&&r!=="mirror"&&o!==0&&l!=="inertia"}const N$=40;class M$ extends Tw{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:f,motionValue:d,element:g,..._}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Si.now();const v={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:o,repeatType:l,name:f,motionValue:d,element:g,..._},b=g?.KeyframeResolver||bw;this.keyframeResolver=new b(c,(C,D,N)=>this.onKeyframesResolved(C,D,v,!N),f,d,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:f,isHandoff:d,onUpdate:g}=i;this.resolvedAt=Si.now(),I$(e,o,l,c)||((so.instantAnimations||!f)&&g?.(Ew(e,i,t)),e[0]=e[e.length-1],BT(i),i.repeat=0);const v={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>N$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},b=!d&&D$(v)?new C$({...v,element:v.motionValue.owner.current}):new Sw(v);b.finished.then(()=>this.notifyFinished()).catch(ur),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),m$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const P$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function O$(n){const e=P$.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function Bk(n,e,t=1){const[i,r]=O$(n);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return lk(l)?parseFloat(l):l}return pw(r)?Bk(r,e,t+1):r}function ww(n,e){return n?.[e]??n?.default??n}const jk=new Set(["width","height","top","left","right","bottom",...sh]),V$={test:n=>n==="auto",parse:n=>n},zk=n=>e=>e.test(n),qk=[rh,Oe,ms,Yo,AK,CK,V$],Vx=n=>qk.find(zk(n));function k$(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||ck(n):!0}const L$=new Set(["brightness","contrast","saturate","opacity"]);function U$(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(gw)||[];if(!i)return n;const r=t.replace(i,"");let o=L$.has(e)?1:0;return i!==t&&(o*=100),e+"("+o+r+")"}const F$=/\b([a-z-]*)\(.*?\)/gu,jT={...va,getAnimatableNone:n=>{const e=n.match(F$);return e?e.map(U$).join(" "):n}},kx={...rh,transform:Math.round},B$={rotate:Yo,rotateX:Yo,rotateY:Yo,rotateZ:Yo,scale:$p,scaleX:$p,scaleY:$p,scaleZ:$p,skew:Yo,skewX:Yo,skewY:Yo,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:Rd,originX:bx,originY:bx,originZ:Oe},Cw={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,backgroundPositionX:Oe,backgroundPositionY:Oe,...B$,zIndex:kx,fillOpacity:Rd,strokeOpacity:Rd,numOctaves:kx},j$={...Cw,color:gn,backgroundColor:gn,outlineColor:gn,fill:gn,stroke:gn,borderColor:gn,borderTopColor:gn,borderRightColor:gn,borderBottomColor:gn,borderLeftColor:gn,filter:jT,WebkitFilter:jT},Hk=n=>j$[n];function Gk(n,e){let t=Hk(n);return t!==jT&&(t=va),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const z$=new Set(["auto","none","0"]);function q$(n,e,t){let i=0,r;for(;i<n.length&&!r;){const o=n[i];typeof o=="string"&&!z$.has(o)&&xd(o).values.length&&(r=n[i]),i++}if(r&&t)for(const o of e)n[o]=Gk(t,r)}class H$ extends bw{constructor(e,t,i,r,o){super(e,t,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let d=e[f];if(typeof d=="string"&&(d=d.trim(),pw(d))){const g=Bk(d,t.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!jk.has(i)||e.length!==2)return;const[r,o]=e,l=Vx(r),c=Vx(o);if(l!==c)if(Nx(l)&&Nx(c))for(let f=0;f<e.length;f++){const d=e[f];typeof d=="string"&&(e[f]=parseFloat(d))}else Al[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||k$(e[r]))&&i.push(r);i.length&&q$(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Al[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=Al[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,f])=>{e.getValue(c).set(f)}),this.resolveNoneKeyframes()}}function G$(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=t?.[n]??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const Kk=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function $k(n){return uk(n)&&"offsetHeight"in n}const Lx=30,K$=n=>!isNaN(parseFloat(n));class $${constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=Si.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Si.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=K$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new hw);const i=this.events[e].add(t);return e==="change"?()=>{i(),zt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Si.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Lx)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Lx);return hk(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function zc(n,e){return new $$(n,e)}const{schedule:Aw}=Sk(queueMicrotask,!1),br={x:!1,y:!1};function Wk(){return br.x||br.y}function W$(n){return n==="x"||n==="y"?br[n]?null:(br[n]=!0,()=>{br[n]=!1}):br.x||br.y?null:(br.x=br.y=!0,()=>{br.x=br.y=!1})}function Yk(n,e){const t=G$(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function Ux(n){return!(n.pointerType==="touch"||Wk())}function Y$(n,e,t={}){const[i,r,o]=Yk(n,t),l=c=>{if(!Ux(c))return;const{target:f}=c,d=e(f,c);if(typeof d!="function"||!f)return;const g=_=>{Ux(_)&&(d(_),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,r)};return i.forEach(c=>{c.addEventListener("pointerenter",l,r)}),o}const Qk=(n,e)=>e?n===e?!0:Qk(n,e.parentElement):!1,Iw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Q$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function X$(n){return Q$.has(n.tagName)||n.tabIndex!==-1}const bg=new WeakSet;function Fx(n){return e=>{e.key==="Enter"&&n(e)}}function aE(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const J$=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=Fx(()=>{if(bg.has(t))return;aE(t,"down");const r=Fx(()=>{aE(t,"up")}),o=()=>aE(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function Bx(n){return Iw(n)&&!Wk()}function Z$(n,e,t={}){const[i,r,o]=Yk(n,t),l=c=>{const f=c.currentTarget;if(!Bx(c))return;bg.add(f);const d=e(f,c),g=(b,C)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",v),bg.has(f)&&bg.delete(f),Bx(b)&&typeof d=="function"&&d(b,{success:C})},_=b=>{g(b,f===window||f===document||t.useGlobalTarget||Qk(f,b.target))},v=b=>{g(b,!1)};window.addEventListener("pointerup",_,r),window.addEventListener("pointercancel",v,r)};return i.forEach(c=>{(t.useGlobalTarget?window:c).addEventListener("pointerdown",l,r),$k(c)&&(c.addEventListener("focus",d=>J$(d,r)),!X$(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function Xk(n){return uk(n)&&"ownerSVGElement"in n}function eW(n){return Xk(n)&&n.tagName==="svg"}const Qn=n=>!!(n&&n.getVelocity),tW=[...qk,gn,va],nW=n=>tW.find(zk(n)),Rw=I.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function jx(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function iW(...n){return e=>{let t=!1;const i=n.map(r=>{const o=jx(r,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let r=0;r<i.length;r++){const o=i[r];typeof o=="function"?o():jx(n[r],null)}}}}function rW(...n){return I.useCallback(iW(...n),n)}class sW extends I.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,r=$k(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=t.offsetHeight||0,o.width=t.offsetWidth||0,o.top=t.offsetTop,o.left=t.offsetLeft,o.right=r-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function oW({children:n,isPresent:e,anchorX:t,root:i}){const r=I.useId(),o=I.useRef(null),l=I.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=I.useContext(Rw),f=rW(o,n?.ref);return I.useInsertionEffect(()=>{const{width:d,height:g,top:_,left:v,right:b}=l.current;if(e||!o.current||!d||!g)return;const C=t==="left"?`left: ${v}`:`right: ${b}`;o.current.dataset.motionPopId=r;const D=document.createElement("style");c&&(D.nonce=c);const N=i??document.head;return N.appendChild(D),D.sheet&&D.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${g}px !important;
            ${C}px !important;
            top: ${_}px !important;
          }
        `),()=>{N.contains(D)&&N.removeChild(D)}},[e]),O.jsx(sW,{isPresent:e,childRef:o,sizeRef:l,children:I.cloneElement(n,{ref:f})})}const aW=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:l,anchorX:c,root:f})=>{const d=sw(lW),g=I.useId();let _=!0,v=I.useMemo(()=>(_=!1,{id:g,initial:e,isPresent:t,custom:r,onExitComplete:b=>{d.set(b,!0);for(const C of d.values())if(!C)return;i&&i()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[t,d,i]);return o&&_&&(v={...v}),I.useMemo(()=>{d.forEach((b,C)=>d.set(C,!1))},[t]),I.useEffect(()=>{!t&&!d.size&&i&&i()},[t]),l==="popLayout"&&(n=O.jsx(oW,{isPresent:t,anchorX:c,root:f,children:n})),O.jsx(v_.Provider,{value:v,children:n})};function lW(){return new Map}function Jk(n=!0){const e=I.useContext(v_);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,o=I.useId();I.useEffect(()=>{if(n)return r(o)},[n]);const l=I.useCallback(()=>n&&i&&i(o),[o,i,n]);return!t&&i?[!1,l]:[!0]}const Wp=n=>n.key||"";function zx(n){const e=[];return I.Children.forEach(n,t=>{I.isValidElement(t)&&e.push(t)}),e}const uW=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",root:f})=>{const[d,g]=Jk(l),_=I.useMemo(()=>zx(n),[n]),v=l&&!d?[]:_.map(Wp),b=I.useRef(!0),C=I.useRef(_),D=sw(()=>new Map),[N,B]=I.useState(_),[V,k]=I.useState(_);ak(()=>{b.current=!1,C.current=_;for(let ie=0;ie<V.length;ie++){const R=Wp(V[ie]);v.includes(R)?D.delete(R):D.get(R)!==!0&&D.set(R,!1)}},[V,v.length,v.join("-")]);const Z=[];if(_!==N){let ie=[..._];for(let R=0;R<V.length;R++){const A=V[R],M=Wp(A);v.includes(M)||(ie.splice(R,0,A),Z.push(A))}return o==="wait"&&Z.length&&(ie=Z),k(zx(ie)),B(_),null}const{forceRender:K}=I.useContext(rw);return O.jsx(O.Fragment,{children:V.map(ie=>{const R=Wp(ie),A=l&&!d?!1:_===V||v.includes(R),M=()=>{if(D.has(R))D.set(R,!0);else return;let j=!0;D.forEach(U=>{U||(j=!1)}),j&&(K?.(),k(C.current),l&&g?.(),i&&i())};return O.jsx(aW,{isPresent:A,initial:!b.current||t?void 0:!1,custom:e,presenceAffectsLayout:r,mode:o,root:f,onExitComplete:A?void 0:M,anchorX:c,children:ie},R)})})},Zk=I.createContext({strict:!1}),qx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qc={};for(const n in qx)qc[n]={isEnabled:e=>qx[n].some(t=>!!e[t])};function cW(n){for(const e in n)qc[e]={...qc[e],...n[e]}}const hW=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _y(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||hW.has(n)}let eL=n=>!_y(n);function fW(n){typeof n=="function"&&(eL=e=>e.startsWith("on")?!_y(e):n(e))}try{fW(require("@emotion/is-prop-valid").default)}catch{}function dW(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(eL(r)||t===!0&&_y(r)||!e&&!_y(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}const E_=I.createContext({});function T_(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Dd(n){return typeof n=="string"||Array.isArray(n)}const xw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Dw=["initial",...xw];function S_(n){return T_(n.animate)||Dw.some(e=>Dd(n[e]))}function tL(n){return!!(S_(n)||n.variants)}function mW(n,e){if(S_(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Dd(t)?t:void 0,animate:Dd(i)?i:void 0}}return n.inherit!==!1?e:{}}function pW(n){const{initial:e,animate:t}=mW(n,I.useContext(E_));return I.useMemo(()=>({initial:e,animate:t}),[Hx(e),Hx(t)])}function Hx(n){return Array.isArray(n)?n.join(" "):n}const Nd={};function gW(n){for(const e in n)Nd[e]=n[e],mw(e)&&(Nd[e].isCSSVariable=!0)}function nL(n,{layout:e,layoutId:t}){return oh.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Nd[n]||n==="opacity")}const yW={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_W=sh.length;function vW(n,e,t){let i="",r=!0;for(let o=0;o<_W;o++){const l=sh[o],c=n[l];if(c===void 0)continue;let f=!0;if(typeof c=="number"?f=c===(l.startsWith("scale")?1:0):f=parseFloat(c)===0,!f||t){const d=Kk(c,Cw[l]);if(!f){r=!1;const g=yW[l]||l;i+=`${g}(${d}) `}t&&(e[l]=d)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function Nw(n,e,t){const{style:i,vars:r,transformOrigin:o}=n;let l=!1,c=!1;for(const f in e){const d=e[f];if(oh.has(f)){l=!0;continue}else if(mw(f)){r[f]=d;continue}else{const g=Kk(d,Cw[f]);f.startsWith("origin")?(c=!0,o[f]=g):i[f]=g}}if(e.transform||(l||t?i.transform=vW(e,n.transform,t):i.transform&&(i.transform="none")),c){const{originX:f="50%",originY:d="50%",originZ:g=0}=o;i.transformOrigin=`${f} ${d} ${g}`}}const Mw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function iL(n,e,t){for(const i in e)!Qn(e[i])&&!nL(i,t)&&(n[i]=e[i])}function EW({transformTemplate:n},e){return I.useMemo(()=>{const t=Mw();return Nw(t,e,n),Object.assign({},t.vars,t.style)},[e])}function TW(n,e){const t=n.style||{},i={};return iL(i,t,n),Object.assign(i,EW(n,e)),i}function SW(n,e){const t={},i=TW(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const bW={offset:"stroke-dashoffset",array:"stroke-dasharray"},wW={offset:"strokeDashoffset",array:"strokeDasharray"};function CW(n,e,t=1,i=0,r=!0){n.pathLength=1;const o=r?bW:wW;n[o.offset]=Oe.transform(-i);const l=Oe.transform(e),c=Oe.transform(t);n[o.array]=`${l} ${c}`}function rL(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:o=1,pathOffset:l=0,...c},f,d,g){if(Nw(n,c,d),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:_,style:v}=n;_.transform&&(v.transform=_.transform,delete _.transform),(v.transform||_.transformOrigin)&&(v.transformOrigin=_.transformOrigin??"50% 50%",delete _.transformOrigin),v.transform&&(v.transformBox=g?.transformBox??"fill-box",delete _.transformBox),e!==void 0&&(_.x=e),t!==void 0&&(_.y=t),i!==void 0&&(_.scale=i),r!==void 0&&CW(_,r,o,l,!1)}const sL=()=>({...Mw(),attrs:{}}),oL=n=>typeof n=="string"&&n.toLowerCase()==="svg";function AW(n,e,t,i){const r=I.useMemo(()=>{const o=sL();return rL(o,e,oL(i),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};iL(o,n.style,n),r.style={...o,...r.style}}return r}const IW=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Pw(n){return typeof n!="string"||n.includes("-")?!1:!!(IW.indexOf(n)>-1||/[A-Z]/u.test(n))}function RW(n,e,t,{latestValues:i},r,o=!1){const c=(Pw(n)?AW:SW)(e,i,r,n),f=dW(e,typeof n=="string",o),d=n!==I.Fragment?{...f,...c,ref:t}:{},{children:g}=e,_=I.useMemo(()=>Qn(g)?g.get():g,[g]);return I.createElement(n,{...d,children:_})}function Gx(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function Ow(n,e,t,i){if(typeof e=="function"){const[r,o]=Gx(i);e=e(t!==void 0?t:n.custom,r,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,o]=Gx(i);e=e(t!==void 0?t:n.custom,r,o)}return e}function wg(n){return Qn(n)?n.get():n}function xW({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:DW(t,i,r,n),renderState:e()}}function DW(n,e,t,i){const r={},o=i(n,{});for(const v in o)r[v]=wg(o[v]);let{initial:l,animate:c}=n;const f=S_(n),d=tL(n);e&&d&&!f&&n.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const _=g?c:l;if(_&&typeof _!="boolean"&&!T_(_)){const v=Array.isArray(_)?_:[_];for(let b=0;b<v.length;b++){const C=Ow(n,v[b]);if(C){const{transitionEnd:D,transition:N,...B}=C;for(const V in B){let k=B[V];if(Array.isArray(k)){const Z=g?k.length-1:0;k=k[Z]}k!==null&&(r[V]=k)}for(const V in D)r[V]=D[V]}}}return r}const aL=n=>(e,t)=>{const i=I.useContext(E_),r=I.useContext(v_),o=()=>xW(n,e,i,r);return t?o():sw(o)};function Vw(n,e,t){const{style:i}=n,r={};for(const o in i)(Qn(i[o])||e.style&&Qn(e.style[o])||nL(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(r[o]=i[o]);return r}const NW=aL({scrapeMotionValuesFromProps:Vw,createRenderState:Mw});function lL(n,e,t){const i=Vw(n,e,t);for(const r in n)if(Qn(n[r])||Qn(e[r])){const o=sh.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=n[r]}return i}const MW=aL({scrapeMotionValuesFromProps:lL,createRenderState:sL}),PW=Symbol.for("motionComponentSymbol");function oc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function OW(n,e,t){return I.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):oc(t)&&(t.current=i))},[e])}const kw=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),VW="framerAppearId",uL="data-"+kw(VW),cL=I.createContext({});function kW(n,e,t,i,r){const{visualElement:o}=I.useContext(E_),l=I.useContext(Zk),c=I.useContext(v_),f=I.useContext(Rw).reducedMotion,d=I.useRef(null);i=i||l.renderer,!d.current&&i&&(d.current=i(n,{visualState:e,parent:o,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const g=d.current,_=I.useContext(cL);g&&!g.projection&&r&&(g.type==="html"||g.type==="svg")&&LW(d.current,t,r,_);const v=I.useRef(!1);I.useInsertionEffect(()=>{g&&v.current&&g.update(t,c)});const b=t[uL],C=I.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return ak(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),C.current&&g.animationState&&g.animationState.animateChanges())}),I.useEffect(()=>{g&&(!C.current&&g.animationState&&g.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),C.current=!1),g.enteringChildren=void 0)}),g}function LW(n,e,t,i){const{layoutId:r,layout:o,drag:l,dragConstraints:c,layoutScroll:f,layoutRoot:d,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:hL(n.parent)),n.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!l||c&&oc(c),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:f,layoutRoot:d})}function hL(n){if(n)return n.options.allowProjection!==!1?n.projection:hL(n.parent)}function lE(n,{forwardMotionProps:e=!1}={},t,i){t&&cW(t);const r=Pw(n)?MW:NW;function o(c,f){let d;const g={...I.useContext(Rw),...c,layoutId:UW(c)},{isStatic:_}=g,v=pW(c),b=r(c,_);if(!_&&ow){FW();const C=BW(g);d=C.MeasureLayout,v.visualElement=kW(n,b,g,i,C.ProjectionNode)}return O.jsxs(E_.Provider,{value:v,children:[d&&v.visualElement?O.jsx(d,{visualElement:v.visualElement,...g}):null,RW(n,c,OW(b,v.visualElement,f),b,_,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=I.forwardRef(o);return l[PW]=n,l}function UW({layoutId:n}){const e=I.useContext(rw).id;return e&&n!==void 0?e+"-"+n:n}function FW(n,e){I.useContext(Zk).strict}function BW(n){const{drag:e,layout:t}=qc;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function jW(n,e){if(typeof Proxy>"u")return lE;const t=new Map,i=(o,l)=>lE(o,l,n,e),r=(o,l)=>i(o,l);return new Proxy(r,{get:(o,l)=>l==="create"?i:(t.has(l)||t.set(l,lE(l,void 0,n,e)),t.get(l))})}function fL({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function zW({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function qW(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function uE(n){return n===void 0||n===1}function zT({scale:n,scaleX:e,scaleY:t}){return!uE(n)||!uE(e)||!uE(t)}function ol(n){return zT(n)||dL(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function dL(n){return Kx(n.x)||Kx(n.y)}function Kx(n){return n&&n!=="0%"}function vy(n,e,t){const i=n-t,r=e*i;return t+r}function $x(n,e,t,i,r){return r!==void 0&&(n=vy(n,r,i)),vy(n,t,i)+e}function qT(n,e=0,t=1,i,r){n.min=$x(n.min,e,t,i,r),n.max=$x(n.max,e,t,i,r)}function mL(n,{x:e,y:t}){qT(n.x,e.translate,e.scale,e.originPoint),qT(n.y,t.translate,t.scale,t.originPoint)}const Wx=.999999999999,Yx=1.0000000000001;function HW(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let o,l;for(let c=0;c<r;c++){o=t[c],l=o.projectionDelta;const{visualElement:f}=o.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&lc(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,mL(n,l)),i&&ol(o.latestValues)&&lc(n,o.latestValues))}e.x<Yx&&e.x>Wx&&(e.x=1),e.y<Yx&&e.y>Wx&&(e.y=1)}function ac(n,e){n.min=n.min+e,n.max=n.max+e}function Qx(n,e,t,i,r=.5){const o=Gt(n.min,n.max,r);qT(n,e,t,o,i)}function lc(n,e){Qx(n.x,e.x,e.scaleX,e.scale,e.originX),Qx(n.y,e.y,e.scaleY,e.scale,e.originY)}function pL(n,e){return fL(qW(n.getBoundingClientRect(),e))}function GW(n,e,t){const i=pL(n,t),{scroll:r}=e;return r&&(ac(i.x,r.offset.x),ac(i.y,r.offset.y)),i}const Xx=()=>({translate:0,scale:1,origin:0,originPoint:0}),uc=()=>({x:Xx(),y:Xx()}),Jx=()=>({min:0,max:0}),tn=()=>({x:Jx(),y:Jx()}),HT={current:null},gL={current:!1};function KW(){if(gL.current=!0,!!ow)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>HT.current=n.matches;n.addEventListener("change",e),e()}else HT.current=!1}const $W=new WeakMap;function WW(n,e,t){for(const i in e){const r=e[i],o=t[i];if(Qn(r))n.addValue(i,r);else if(Qn(o))n.addValue(i,zc(r,{owner:n}));else if(o!==r)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=n.getStaticValue(i);n.addValue(i,zc(l!==void 0?l:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const Zx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class YW{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=bw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Si.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,zt.render(this.render,!1,!0))};const{latestValues:f,renderState:d}=l;this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=S_(t),this.isVariantNode=tL(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,..._}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in _){const b=_[v];f[v]!==void 0&&Qn(b)&&b.set(f[v])}}mount(e){this.current=e,$W.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),gL.current||KW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:HT.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),_a(this.notifyUpdate),_a(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=oh.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&zt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in qc){const t=qc[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<Zx.length;i++){const r=Zx[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,l=e[o];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=WW(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=zc(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(lk(i)||ck(i))?i=parseFloat(i):!nW(i)&&va.test(t)&&(i=Gk(e,t)),this.setBaseTarget(e,Qn(i)?i.get():i)),Qn(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const o=Ow(this.props,t,this.presenceContext?.custom);o&&(i=o[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Qn(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new hw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Aw.render(this.render)}}class yL extends YW{constructor(){super(...arguments),this.KeyframeResolver=H$}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Qn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function _L(n,{style:e,vars:t},i,r){const o=n.style;let l;for(l in e)o[l]=e[l];r?.applyProjectionStyles(o,i);for(l in t)o.setProperty(l,t[l])}function QW(n){return window.getComputedStyle(n)}class XW extends yL{constructor(){super(...arguments),this.type="html",this.renderInstance=_L}readValueFromInstance(e,t){if(oh.has(t))return this.projection?.isProjecting?VT(t):u$(e,t);{const i=QW(e),r=(mw(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return pL(e,t)}build(e,t,i){Nw(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return Vw(e,t,i)}}const vL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function JW(n,e,t,i){_L(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(vL.has(r)?r:kw(r),e.attrs[r])}class ZW extends yL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(oh.has(t)){const i=Hk(t);return i&&i.default||0}return t=vL.has(t)?t:kw(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return lL(e,t,i)}build(e,t,i){rL(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){JW(e,t,i,r)}mount(e){this.isSVGTag=oL(e.tagName),super.mount(e)}}const eY=(n,e)=>Pw(n)?new ZW(e):new XW(e,{allowProjection:n!==I.Fragment});function vc(n,e,t){const i=n.getProps();return Ow(i,e,t!==void 0?t:i.custom,n)}const GT=n=>Array.isArray(n);function tY(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,zc(t))}function nY(n){return GT(n)?n[n.length-1]||0:n}function iY(n,e){const t=vc(n,e);let{transitionEnd:i={},transition:r={},...o}=t||{};o={...o,...i};for(const l in o){const c=nY(o[l]);tY(n,l,c)}}function rY(n){return!!(Qn(n)&&n.add)}function KT(n,e){const t=n.getValue("willChange");if(rY(t))return t.add(e);if(!t&&so.WillChange){const i=new so.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function EL(n){return n.props[uL]}const sY=n=>n!==null;function oY(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(sY),o=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[o]}const aY={type:"spring",stiffness:500,damping:25,restSpeed:10},lY=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),uY={type:"keyframes",duration:.8},cY={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hY=(n,{keyframes:e})=>e.length>2?uY:oh.has(n)?n.startsWith("scale")?lY(e[1]):aY:cY;function fY({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:l,repeatDelay:c,from:f,elapsed:d,...g}){return!!Object.keys(g).length}const Lw=(n,e,t,i={},r,o)=>l=>{const c=ww(i,n)||{},f=c.delay||i.delay||0;let{elapsed:d=0}=i;d=d-ds(f);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-d,onUpdate:v=>{e.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:n,motionValue:e,element:o?void 0:r};fY(c)||Object.assign(g,hY(n,g)),g.duration&&(g.duration=ds(g.duration)),g.repeatDelay&&(g.repeatDelay=ds(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let _=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(BT(g),g.delay===0&&(_=!0)),(so.instantAnimations||so.skipAnimations)&&(_=!0,BT(g),g.delay=0),g.allowFlatten=!c.type&&!c.ease,_&&!o&&e.get()!==void 0){const v=oY(g.keyframes,c);if(v!==void 0){zt.update(()=>{g.onUpdate(v),g.onComplete()});return}}return c.isSync?new Sw(g):new M$(g)};function dY({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function TL(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:l,...c}=e;i&&(o=i);const f=[],d=r&&n.animationState&&n.animationState.getState()[r];for(const g in c){const _=n.getValue(g,n.latestValues[g]??null),v=c[g];if(v===void 0||d&&dY(d,g))continue;const b={delay:t,...ww(o||{},g)},C=_.get();if(C!==void 0&&!_.isAnimating&&!Array.isArray(v)&&v===C&&!b.velocity)continue;let D=!1;if(window.MotionHandoffAnimation){const B=EL(n);if(B){const V=window.MotionHandoffAnimation(B,g,zt);V!==null&&(b.startTime=V,D=!0)}}KT(n,g),_.start(Lw(g,_,v,n.shouldReduceMotion&&jk.has(g)?{type:!1}:b,n,D));const N=_.animation;N&&f.push(N)}return l&&Promise.all(f).then(()=>{zt.update(()=>{l&&iY(n,l)})}),f}function SL(n,e,t,i=0,r=1){const o=Array.from(n).sort((d,g)=>d.sortNodePosition(g)).indexOf(e),l=n.size,c=(l-1)*i;return typeof t=="function"?t(o,l):r===1?o*i:c-o*i}function $T(n,e,t={}){const i=vc(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const o=i?()=>Promise.all(TL(n,i,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:g,staggerDirection:_}=r;return mY(n,e,f,d,g,_,t)}:()=>Promise.resolve(),{when:c}=r;if(c){const[f,d]=c==="beforeChildren"?[o,l]:[l,o];return f().then(()=>d())}else return Promise.all([o(),l(t.delay)])}function mY(n,e,t=0,i=0,r=0,o=1,l){const c=[];for(const f of n.variantChildren)f.notify("AnimationStart",e),c.push($T(f,e,{...l,delay:t+(typeof i=="function"?0:i)+SL(n.variantChildren,f,i,r,o)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(c)}function pY(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>$T(n,o,t));i=Promise.all(r)}else if(typeof e=="string")i=$T(n,e,t);else{const r=typeof e=="function"?vc(n,e,t.custom):e;i=Promise.all(TL(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function bL(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const gY=Dw.length;function wL(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?wL(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<gY;t++){const i=Dw[t],r=n.props[i];(Dd(r)||r===!1)&&(e[i]=r)}return e}const yY=[...xw].reverse(),_Y=xw.length;function vY(n){return e=>Promise.all(e.map(({animation:t,options:i})=>pY(n,t,i)))}function EY(n){let e=vY(n),t=eD(),i=!0;const r=f=>(d,g)=>{const _=vc(n,g,f==="exit"?n.presenceContext?.custom:void 0);if(_){const{transition:v,transitionEnd:b,...C}=_;d={...d,...C,...b}}return d};function o(f){e=f(n)}function l(f){const{props:d}=n,g=wL(n.parent)||{},_=[],v=new Set;let b={},C=1/0;for(let N=0;N<_Y;N++){const B=yY[N],V=t[B],k=d[B]!==void 0?d[B]:g[B],Z=Dd(k),K=B===f?V.isActive:null;K===!1&&(C=N);let ie=k===g[B]&&k!==d[B]&&Z;if(ie&&i&&n.manuallyAnimateOnMount&&(ie=!1),V.protectedKeys={...b},!V.isActive&&K===null||!k&&!V.prevProp||T_(k)||typeof k=="boolean")continue;const R=TY(V.prevProp,k);let A=R||B===f&&V.isActive&&!ie&&Z||N>C&&Z,M=!1;const j=Array.isArray(k)?k:[k];let U=j.reduce(r(B),{});K===!1&&(U={});const{prevResolvedValues:z={}}=V,P={...z,...U},De=ce=>{A=!0,v.has(ce)&&(M=!0,v.delete(ce)),V.needsAnimating[ce]=!0;const pe=n.getValue(ce);pe&&(pe.liveStyle=!1)};for(const ce in P){const pe=U[ce],Me=z[ce];if(b.hasOwnProperty(ce))continue;let Ue=!1;GT(pe)&&GT(Me)?Ue=!bL(pe,Me):Ue=pe!==Me,Ue?pe!=null?De(ce):v.add(ce):pe!==void 0&&v.has(ce)?De(ce):V.protectedKeys[ce]=!0}V.prevProp=k,V.prevResolvedValues=U,V.isActive&&(b={...b,...U}),i&&n.blockInitialAnimation&&(A=!1);const qe=ie&&R;A&&(!qe||M)&&_.push(...j.map(ce=>{const pe={type:B};if(typeof ce=="string"&&i&&!qe&&n.manuallyAnimateOnMount&&n.parent){const{parent:Me}=n,Ue=vc(Me,ce);if(Me.enteringChildren&&Ue){const{delayChildren:q}=Ue.transition||{};pe.delay=SL(Me.enteringChildren,n,q)}}return{animation:ce,options:pe}}))}if(v.size){const N={};if(typeof d.initial!="boolean"){const B=vc(n,Array.isArray(d.initial)?d.initial[0]:d.initial);B&&B.transition&&(N.transition=B.transition)}v.forEach(B=>{const V=n.getBaseTarget(B),k=n.getValue(B);k&&(k.liveStyle=!0),N[B]=V??null}),_.push({animation:N})}let D=!!_.length;return i&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(D=!1),i=!1,D?e(_):Promise.resolve()}function c(f,d){if(t[f].isActive===d)return Promise.resolve();n.variantChildren?.forEach(_=>_.animationState?.setActive(f,d)),t[f].isActive=d;const g=l(f);for(const _ in t)t[_].protectedKeys={};return g}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>t,reset:()=>{t=eD()}}}function TY(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!bL(e,n):!1}function tl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function eD(){return{animate:tl(!0),whileInView:tl(),whileHover:tl(),whileTap:tl(),whileDrag:tl(),whileFocus:tl(),exit:tl()}}class Ca{constructor(e){this.isMounted=!1,this.node=e}update(){}}class SY extends Ca{constructor(e){super(e),e.animationState||(e.animationState=EY(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();T_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let bY=0;class wY extends Ca{constructor(){super(...arguments),this.id=bY++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const CY={animation:{Feature:SY},exit:{Feature:wY}};function Md(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function om(n){return{point:{x:n.pageX,y:n.pageY}}}const AY=n=>e=>Iw(e)&&n(e,om(e));function Qf(n,e,t,i){return Md(n,e,AY(t),i)}const CL=1e-4,IY=1-CL,RY=1+CL,AL=.01,xY=0-AL,DY=0+AL;function si(n){return n.max-n.min}function NY(n,e,t){return Math.abs(n-e)<=t}function tD(n,e,t,i=.5){n.origin=i,n.originPoint=Gt(e.min,e.max,n.origin),n.scale=si(t)/si(e),n.translate=Gt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=IY&&n.scale<=RY||isNaN(n.scale))&&(n.scale=1),(n.translate>=xY&&n.translate<=DY||isNaN(n.translate))&&(n.translate=0)}function Xf(n,e,t,i){tD(n.x,e.x,t.x,i?i.originX:void 0),tD(n.y,e.y,t.y,i?i.originY:void 0)}function nD(n,e,t){n.min=t.min+e.min,n.max=n.min+si(e)}function MY(n,e,t){nD(n.x,e.x,t.x),nD(n.y,e.y,t.y)}function iD(n,e,t){n.min=e.min-t.min,n.max=n.min+si(e)}function Jf(n,e,t){iD(n.x,e.x,t.x),iD(n.y,e.y,t.y)}function nr(n){return[n("x"),n("y")]}const IL=({current:n})=>n?n.ownerDocument.defaultView:null,rD=(n,e)=>Math.abs(n-e);function PY(n,e){const t=rD(n.x,e.x),i=rD(n.y,e.y);return Math.sqrt(t**2+i**2)}class RL{constructor(e,t,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=hE(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,C=PY(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!C)return;const{point:D}=v,{timestamp:N}=zn;this.history.push({...D,timestamp:N});const{onStart:B,onMove:V}=this.handlers;b||(B&&B(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,v)},this.handlePointerMove=(v,b)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=cE(b,this.transformPagePoint),zt.update(this.updatePoint,!0)},this.handlePointerUp=(v,b)=>{this.end();const{onEnd:C,onSessionEnd:D,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=hE(v.type==="pointercancel"?this.lastMoveEventInfo:cE(b,this.transformPagePoint),this.history);this.startEvent&&C&&C(v,B),D&&D(v,B)},!Iw(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=r||window;const c=om(e),f=cE(c,this.transformPagePoint),{point:d}=f,{timestamp:g}=zn;this.history=[{...d,timestamp:g}];const{onSessionStart:_}=t;_&&_(e,hE(f,this.history)),this.removeListeners=im(Qf(this.contextWindow,"pointermove",this.handlePointerMove),Qf(this.contextWindow,"pointerup",this.handlePointerUp),Qf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_a(this.updatePoint)}}function cE(n,e){return e?{point:e(n.point)}:n}function sD(n,e){return{x:n.x-e.x,y:n.y-e.y}}function hE({point:n},e){return{point:n,delta:sD(n,xL(e)),offset:sD(n,OY(e)),velocity:VY(e,.1)}}function OY(n){return n[0]}function xL(n){return n[n.length-1]}function VY(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=xL(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>ds(e)));)t--;if(!i)return{x:0,y:0};const o=ar(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function kY(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Gt(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Gt(t,n,i.max):Math.min(n,t)),n}function oD(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function LY(n,{top:e,left:t,bottom:i,right:r}){return{x:oD(n.x,t,r),y:oD(n.y,e,i)}}function aD(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function UY(n,e){return{x:aD(n.x,e.x),y:aD(n.y,e.y)}}function FY(n,e){let t=.5;const i=si(n),r=si(e);return r>i?t=Id(e.min,e.max-i,n.min):i>r&&(t=Id(n.min,n.max-r,e.min)),ro(0,1,t)}function BY(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const WT=.35;function jY(n=WT){return n===!1?n=0:n===!0&&(n=WT),{x:lD(n,"left","right"),y:lD(n,"top","bottom")}}function lD(n,e,t){return{min:uD(n,e),max:uD(n,t)}}function uD(n,e){return typeof n=="number"?n:n[e]||0}const zY=new WeakMap;class qY{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=_=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(om(_).point)},l=(_,v)=>{const{drag:b,dragPropagation:C,onDragStart:D}=this.getProps();if(b&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=W$(b),!this.openDragLock))return;this.latestPointerEvent=_,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nr(B=>{let V=this.getAxisMotionValue(B).get()||0;if(ms.test(V)){const{projection:k}=this.visualElement;if(k&&k.layout){const Z=k.layout.layoutBox[B];Z&&(V=si(Z)*(parseFloat(V)/100))}}this.originPoint[B]=V}),D&&zt.postRender(()=>D(_,v)),KT(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},c=(_,v)=>{this.latestPointerEvent=_,this.latestPanInfo=v;const{dragPropagation:b,dragDirectionLock:C,onDirectionLock:D,onDrag:N}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:B}=v;if(C&&this.currentDirection===null){this.currentDirection=HY(B),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",v.point,B),this.updateAxis("y",v.point,B),this.visualElement.render(),N&&N(_,v)},f=(_,v)=>{this.latestPointerEvent=_,this.latestPanInfo=v,this.stop(_,v),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>nr(_=>this.getAnimationState(_)==="paused"&&this.getAxisMotionValue(_).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new RL(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:IL(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,r=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!r||!i)return;const{velocity:l}=r;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&zt.postRender(()=>c(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!Yp(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=kY(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&oc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=LY(i.layoutBox,e):this.constraints=!1,this.elastic=jY(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&nr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=BY(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!oc(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=GW(i,r.root,this.visualElement.getTransformPagePoint());let l=UY(r.layout.layoutBox,o);if(t){const c=t(zW(l));this.hasMutatedConstraints=!!c,c&&(l=fL(c))}return l}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),f=this.constraints||{},d=nr(g=>{if(!Yp(g,t,this.currentDirection))return;let _=f&&f[g]||{};l&&(_={min:0,max:0});const v=r?200:1e6,b=r?40:1e7,C={type:"inertia",velocity:i?e[g]:0,bounceStiffness:v,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...o,..._};return this.startAxisValueAnimation(g,C)});return Promise.all(d).then(c)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return KT(this.visualElement,e),i.start(Lw(e,i,0,t,this.visualElement,!1))}stopAnimation(){nr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nr(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){nr(t=>{const{drag:i}=this.getProps();if(!Yp(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(t);if(r&&r.layout){const{min:l,max:c}=r.layout.layoutBox[t];o.set(e[t]-Gt(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!oc(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};nr(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const f=c.get();r[l]=FY({min:f,max:f},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),nr(l=>{if(!Yp(l,e,null))return;const c=this.getAxisMotionValue(l),{min:f,max:d}=this.constraints[l];c.set(Gt(f,d,r[l]))})}addListeners(){if(!this.visualElement.current)return;zY.set(this.visualElement,this);const e=this.visualElement.current,t=Qf(e,"pointerdown",f=>{const{drag:d,dragListener:g=!0}=this.getProps();d&&g&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();oc(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),zt.read(i);const l=Md(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(nr(g=>{const _=this.getAxisMotionValue(g);_&&(this.originPoint[g]+=f[g].translate,_.set(_.get()+f[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:l=WT,dragMomentum:c=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Yp(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function HY(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class GY extends Ca{constructor(e){super(e),this.removeGroupControls=ur,this.removeListeners=ur,this.controls=new qY(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ur}unmount(){this.removeGroupControls(),this.removeListeners()}}const cD=n=>(e,t)=>{n&&zt.postRender(()=>n(e,t))};class KY extends Ca{constructor(){super(...arguments),this.removePointerDownListener=ur}onPointerDown(e){this.session=new RL(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:IL(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:cD(e),onStart:cD(t),onMove:i,onEnd:(o,l)=>{delete this.session,r&&zt.postRender(()=>r(o,l))}}}mount(){this.removePointerDownListener=Qf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Cg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function hD(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Tf={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Oe.test(n))n=parseFloat(n);else return n;const t=hD(n,e.target.x),i=hD(n,e.target.y);return`${t}% ${i}%`}},$Y={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=va.parse(n);if(r.length>5)return i;const o=va.createTransformer(n),l=typeof r[0]!="number"?1:0,c=t.x.scale*e.x,f=t.y.scale*e.y;r[0+l]/=c,r[1+l]/=f;const d=Gt(c,f,.5);return typeof r[2+l]=="number"&&(r[2+l]/=d),typeof r[3+l]=="number"&&(r[3+l]/=d),o(r)}};let fE=!1;class WY extends I.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;gW(YY),o&&(t.group&&t.group.add(o),i&&i.register&&r&&i.register(o),fE&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Cg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:o}=this.props,{projection:l}=i;return l&&(l.isPresent=o,fE=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||zt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Aw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;fE=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function DL(n){const[e,t]=Jk(),i=I.useContext(rw);return O.jsx(WY,{...n,layoutGroup:i,switchLayoutGroup:I.useContext(cL),isPresent:e,safeToRemove:t})}const YY={borderRadius:{...Tf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tf,borderTopRightRadius:Tf,borderBottomLeftRadius:Tf,borderBottomRightRadius:Tf,boxShadow:$Y};function QY(n,e,t){const i=Qn(n)?n:zc(n);return i.start(Lw("",i,e,t)),i.animation}const XY=(n,e)=>n.depth-e.depth;class JY{constructor(){this.children=[],this.isDirty=!1}add(e){aw(this.children,e),this.isDirty=!0}remove(e){lw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(XY),this.isDirty=!1,this.children.forEach(e)}}function ZY(n,e){const t=Si.now(),i=({timestamp:r})=>{const o=r-t;o>=e&&(_a(i),n(o-e))};return zt.setup(i,!0),()=>_a(i)}const NL=["TopLeft","TopRight","BottomLeft","BottomRight"],eQ=NL.length,fD=n=>typeof n=="string"?parseFloat(n):n,dD=n=>typeof n=="number"||Oe.test(n);function tQ(n,e,t,i,r,o){r?(n.opacity=Gt(0,t.opacity??1,nQ(i)),n.opacityExit=Gt(e.opacity??1,0,iQ(i))):o&&(n.opacity=Gt(e.opacity??1,t.opacity??1,i));for(let l=0;l<eQ;l++){const c=`border${NL[l]}Radius`;let f=mD(e,c),d=mD(t,c);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||dD(f)===dD(d)?(n[c]=Math.max(Gt(fD(f),fD(d),i),0),(ms.test(d)||ms.test(f))&&(n[c]+="%")):n[c]=d}(e.rotate||t.rotate)&&(n.rotate=Gt(e.rotate||0,t.rotate||0,i))}function mD(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const nQ=ML(0,.5,_k),iQ=ML(.5,.95,ur);function ML(n,e,t){return i=>i<n?0:i>e?1:t(Id(n,e,i))}function pD(n,e){n.min=e.min,n.max=e.max}function tr(n,e){pD(n.x,e.x),pD(n.y,e.y)}function gD(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function yD(n,e,t,i,r){return n-=e,n=vy(n,1/t,i),r!==void 0&&(n=vy(n,1/r,i)),n}function rQ(n,e=0,t=1,i=.5,r,o=n,l=n){if(ms.test(e)&&(e=parseFloat(e),e=Gt(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=Gt(o.min,o.max,i);n===o&&(c-=e),n.min=yD(n.min,e,t,c,r),n.max=yD(n.max,e,t,c,r)}function _D(n,e,[t,i,r],o,l){rQ(n,e[t],e[i],e[r],e.scale,o,l)}const sQ=["x","scaleX","originX"],oQ=["y","scaleY","originY"];function vD(n,e,t,i){_D(n.x,e,sQ,t?t.x:void 0,i?i.x:void 0),_D(n.y,e,oQ,t?t.y:void 0,i?i.y:void 0)}function ED(n){return n.translate===0&&n.scale===1}function PL(n){return ED(n.x)&&ED(n.y)}function TD(n,e){return n.min===e.min&&n.max===e.max}function aQ(n,e){return TD(n.x,e.x)&&TD(n.y,e.y)}function SD(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function OL(n,e){return SD(n.x,e.x)&&SD(n.y,e.y)}function bD(n){return si(n.x)/si(n.y)}function wD(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class lQ{constructor(){this.members=[]}add(e){aw(this.members,e),e.scheduleRender()}remove(e){if(lw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function uQ(n,e,t){let i="";const r=n.x.translate/e.x,o=n.y.translate/e.y,l=t?.z||0;if((r||o||l)&&(i=`translate3d(${r}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:g,rotateX:_,rotateY:v,skewX:b,skewY:C}=t;d&&(i=`perspective(${d}px) ${i}`),g&&(i+=`rotate(${g}deg) `),_&&(i+=`rotateX(${_}deg) `),v&&(i+=`rotateY(${v}deg) `),b&&(i+=`skewX(${b}deg) `),C&&(i+=`skewY(${C}deg) `)}const c=n.x.scale*e.x,f=n.y.scale*e.y;return(c!==1||f!==1)&&(i+=`scale(${c}, ${f})`),i||"none"}const dE=["","X","Y","Z"],cQ=1e3;let hQ=0;function mE(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function VL(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=EL(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",zt,!(r||o))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&VL(i)}function kL({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},c=e?.()){this.id=hQ++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(mQ),this.nodes.forEach(_Q),this.nodes.forEach(vQ),this.nodes.forEach(pQ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new JY)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new hw),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const f=this.eventHandlers.get(l);f&&f.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=Xk(l)&&!eW(l),this.instance=l;const{layoutId:c,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||c)&&(this.isLayoutDirty=!0),n){let g,_=0;const v=()=>this.root.updateBlockedByResize=!1;zt.read(()=>{_=window.innerWidth}),n(l,()=>{const b=window.innerWidth;b!==_&&(_=b,this.root.updateBlockedByResize=!0,g&&g(),g=ZY(v,250),Cg.hasAnimatedSinceResize&&(Cg.hasAnimatedSinceResize=!1,this.nodes.forEach(ID)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:_,hasRelativeLayoutChanged:v,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||d.getDefaultTransition()||wQ,{onLayoutAnimationStart:D,onLayoutAnimationComplete:N}=d.getProps(),B=!this.targetLayout||!OL(this.targetLayout,b),V=!_&&v;if(this.options.layoutRoot||this.resumeFrom||V||_&&(B||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...ww(C,"layout"),onPlay:D,onComplete:N};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(g,V)}else _||ID(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_a(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(EQ),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&VL(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const _=this.path[g];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:c,layout:f}=this.options;if(c===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(CD);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(AD);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(yQ),this.nodes.forEach(fQ),this.nodes.forEach(dQ)):this.nodes.forEach(AD),this.clearAllSnapshots();const c=Si.now();zn.delta=ro(0,1e3/60,c-zn.timestamp),zn.timestamp=c,zn.isProcessing=!0,nE.update.process(zn),nE.preRender.process(zn),nE.render.process(zn),zn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Aw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(gQ),this.sharedNodes.forEach(TQ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,zt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){zt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!si(this.snapshot.measuredBox.x)&&!si(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=tn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!PL(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,g=d!==this.prevTransformTemplateValue;l&&this.instance&&(c||ol(this.latestValues)||g)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let f=this.removeElementScroll(c);return l&&(f=this.removeTransform(f)),CQ(f),{animationId:this.root.animationId,measuredBox:c,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return tn();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(AQ))){const{scroll:d}=this.root;d&&(ac(c.x,d.offset.x),ac(c.y,d.offset.y))}return c}removeElementScroll(l){const c=tn();if(tr(c,l),this.scroll?.wasRoot)return c;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:g,options:_}=d;d!==this.root&&g&&_.layoutScroll&&(g.wasRoot&&tr(c,l),ac(c.x,g.offset.x),ac(c.y,g.offset.y))}return c}applyTransform(l,c=!1){const f=tn();tr(f,l);for(let d=0;d<this.path.length;d++){const g=this.path[d];!c&&g.options.layoutScroll&&g.scroll&&g!==g.root&&lc(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),ol(g.latestValues)&&lc(f,g.latestValues)}return ol(this.latestValues)&&lc(f,this.latestValues),f}removeTransform(l){const c=tn();tr(c,l);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!ol(d.latestValues))continue;zT(d.latestValues)&&d.updateSnapshot();const g=tn(),_=d.measurePageBox();tr(g,_),vD(c,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,g)}return ol(this.latestValues)&&vD(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==zn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==c;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:_}=this.options;if(!(!this.layout||!(g||_))){if(this.resolvedRelativeTargetAt=zn.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),Jf(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=tn(),this.targetWithTransforms=tn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),MY(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tr(this.target,this.layout.layoutBox),mL(this.target,this.targetDelta)):tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tn(),this.relativeTargetOrigin=tn(),Jf(this.relativeTargetOrigin,this.target,v.target),tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||zT(this.parent.latestValues)||dL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===zn.timestamp&&(f=!1),f)return;const{layout:d,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||g))return;tr(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,v=this.treeScale.y;HW(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=tn());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(gD(this.prevProjectionDelta.x,this.projectionDelta.x),gD(this.prevProjectionDelta.y,this.projectionDelta.y)),Xf(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==v||!wD(this.projectionDelta.x,this.prevProjectionDelta.x)||!wD(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=uc(),this.projectionDelta=uc(),this.projectionDeltaWithTransform=uc()}setAnimationOrigin(l,c=!1){const f=this.snapshot,d=f?f.latestValues:{},g={...this.latestValues},_=uc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=tn(),b=f?f.source:void 0,C=this.layout?this.layout.source:void 0,D=b!==C,N=this.getStack(),B=!N||N.members.length<=1,V=!!(D&&!B&&this.options.crossfade===!0&&!this.path.some(bQ));this.animationProgress=0;let k;this.mixTargetDelta=Z=>{const K=Z/1e3;RD(_.x,l.x,K),RD(_.y,l.y,K),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jf(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SQ(this.relativeTarget,this.relativeTargetOrigin,v,K),k&&aQ(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=tn()),tr(k,this.relativeTarget)),D&&(this.animationValues=g,tQ(g,d,this.latestValues,K,V,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=K},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(_a(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=zt.update(()=>{Cg.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=zc(0)),this.currentAnimation=QY(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(cQ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:f,layout:d,latestValues:g}=l;if(!(!c||!f||!d)){if(this!==l&&this.layout&&d&&LL(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||tn();const _=si(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+_;const v=si(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+v}tr(c,f),lc(c,g),Xf(this.projectionDeltaWithTransform,this.layoutCorrected,c,g)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new lQ),this.sharedNodes.get(l).add(c);const d=c.options.initialPromotionConfig;c.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(c=!0),!c)return;const d={};f.z&&mE("z",l,d,this.animationValues);for(let g=0;g<dE.length;g++)mE(`rotate${dE[g]}`,l,d,this.animationValues),mE(`skew${dE[g]}`,l,d,this.animationValues);l.render();for(const g in d)l.setStaticValue(g,d[g]),this.animationValues&&(this.animationValues[g]=d[g]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=wg(c?.pointerEvents)||"",l.transform=f?f(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=wg(c?.pointerEvents)||""),this.hasProjected&&!ol(this.latestValues)&&(l.transform=f?f({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=d.animationValues||d.latestValues;this.applyTransformsToTarget();let _=uQ(this.projectionDeltaWithTransform,this.treeScale,g);f&&(_=f(g,_)),l.transform=_;const{x:v,y:b}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${b.origin*100}% 0`,d.animationValues?l.opacity=d===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=d===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const C in Nd){if(g[C]===void 0)continue;const{correct:D,applyTo:N,isCSSVariable:B}=Nd[C],V=_==="none"?g[C]:D(g[C],d);if(N){const k=N.length;for(let Z=0;Z<k;Z++)l[N[Z]]=V}else B?this.options.visualElement.renderState.vars[C]=V:l[C]=V}this.options.layoutId&&(l.pointerEvents=d===this?wg(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(CD),this.root.sharedNodes.clear()}}}function fQ(n){n.updateLayout()}function dQ(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:r}=n.options,o=e.source!==n.layout.source;r==="size"?nr(g=>{const _=o?e.measuredBox[g]:e.layoutBox[g],v=si(_);_.min=t[g].min,_.max=_.min+v}):LL(r,e.layoutBox,t)&&nr(g=>{const _=o?e.measuredBox[g]:e.layoutBox[g],v=si(t[g]);_.max=_.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+v)});const l=uc();Xf(l,t,e.layoutBox);const c=uc();o?Xf(c,n.applyTransform(i,!0),e.measuredBox):Xf(c,t,e.layoutBox);const f=!PL(l);let d=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:_,layout:v}=g;if(_&&v){const b=tn();Jf(b,e.layoutBox,_.layoutBox);const C=tn();Jf(C,t,v.layoutBox),OL(b,C)||(d=!0),g.options.layoutRoot&&(n.relativeTarget=C,n.relativeTargetOrigin=b,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function mQ(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function pQ(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function gQ(n){n.clearSnapshot()}function CD(n){n.clearMeasurements()}function AD(n){n.isLayoutDirty=!1}function yQ(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function ID(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function _Q(n){n.resolveTargetDelta()}function vQ(n){n.calcProjection()}function EQ(n){n.resetSkewAndRotation()}function TQ(n){n.removeLeadSnapshot()}function RD(n,e,t){n.translate=Gt(e.translate,0,t),n.scale=Gt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function xD(n,e,t,i){n.min=Gt(e.min,t.min,i),n.max=Gt(e.max,t.max,i)}function SQ(n,e,t,i){xD(n.x,e.x,t.x,i),xD(n.y,e.y,t.y,i)}function bQ(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const wQ={duration:.45,ease:[.4,0,.1,1]},DD=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),ND=DD("applewebkit/")&&!DD("chrome/")?Math.round:ur;function MD(n){n.min=ND(n.min),n.max=ND(n.max)}function CQ(n){MD(n.x),MD(n.y)}function LL(n,e,t){return n==="position"||n==="preserve-aspect"&&!NY(bD(e),bD(t),.2)}function AQ(n){return n!==n.root&&n.scroll?.wasRoot}const IQ=kL({attachResizeListener:(n,e)=>Md(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),pE={current:void 0},UL=kL({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!pE.current){const n=new IQ({});n.mount(window),n.setOptions({layoutScroll:!0}),pE.current=n}return pE.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),RQ={pan:{Feature:KY},drag:{Feature:GY,ProjectionNode:UL,MeasureLayout:DL}};function PD(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,o=i[r];o&&zt.postRender(()=>o(e,om(e)))}class xQ extends Ca{mount(){const{current:e}=this.node;e&&(this.unmount=Y$(e,(t,i)=>(PD(this.node,i,"Start"),r=>PD(this.node,r,"End"))))}unmount(){}}class DQ extends Ca{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=im(Md(this.node.current,"focus",()=>this.onFocus()),Md(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function OD(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),o=i[r];o&&zt.postRender(()=>o(e,om(e)))}class NQ extends Ca{mount(){const{current:e}=this.node;e&&(this.unmount=Z$(e,(t,i)=>(OD(this.node,i,"Start"),(r,{success:o})=>OD(this.node,r,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const YT=new WeakMap,gE=new WeakMap,MQ=n=>{const e=YT.get(n.target);e&&e(n)},PQ=n=>{n.forEach(MQ)};function OQ({root:n,...e}){const t=n||document;gE.has(t)||gE.set(t,{});const i=gE.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(PQ,{root:n,...e})),i[r]}function VQ(n,e,t){const i=OQ(e);return YT.set(n,t),i.observe(n),()=>{YT.delete(n),i.unobserve(n)}}const kQ={some:0,all:1};class LQ extends Ca{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:o}=e,l={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:kQ[r]},c=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:g,onViewportLeave:_}=this.node.getProps(),v=d?g:_;v&&v(f)};return VQ(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(UQ(e,t))&&this.startObserver()}unmount(){}}function UQ({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const FQ={inView:{Feature:LQ},tap:{Feature:NQ},focus:{Feature:DQ},hover:{Feature:xQ}},BQ={layout:{ProjectionNode:UL,MeasureLayout:DL}},jQ={...CY,...FQ,...RQ,...BQ},FL=jW(jQ,eY),zQ=I.memo(()=>{const n=oK(),e=I.useMemo(()=>O.jsx(uW,{mode:"wait",children:O.jsx(FL.span,{initial:{scale:.6,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.6,opacity:0},transition:{duration:.3,type:"spring"},style:{fontWeight:"bold",color:n>0?"#28a745":"#dc3545",marginLeft:"5px"},children:n},n)}),[n]);return O.jsx("div",{children:O.jsx("div",{style:{cursor:"pointer",boxShadow:"rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset",borderRadius:"8px",display:"flex",gap:"20px",background:"#ededed",border:"solid 1px #000",padding:"9px"},children:O.jsxs("span",{style:{fontSize:"15px"},children:["Active sessions:",e]})})})}),qQ=()=>{const[n,e]=I.useState(""),[t,i]=I.useState("");return I.useEffect(()=>{const r=()=>{const f=new Date,d=f.getDate(),g=f.toLocaleString("en-US",{month:"short"}).toUpperCase(),_=f.getFullYear();e(`${d} ${g}, ${_}`)},o=()=>{const f=new Date,d=String(f.getHours()).padStart(2,"0"),g=String(f.getMinutes()).padStart(2,"0");i(`${d}:${g}`)};r(),o();const l=setInterval(r,6e4),c=setInterval(o,1e3);return()=>{clearInterval(l),clearInterval(c)}},[]),O.jsx("header",{className:Sr.header,children:O.jsxs("div",{className:Sr.header__container,children:[O.jsxs("div",{className:Sr.left,children:[O.jsxs("div",{className:Sr.left_container,children:[O.jsx("img",{className:Sr.logo,src:f9,alt:"logo"}),O.jsx("span",{children:"INVENTORY"})]}),O.jsx("div",{className:Sr.center,children:O.jsx("input",{type:"text",placeholder:"Поиск...",className:Sr.search__input})}),O.jsx("span",{children:O.jsx(zQ,{})})]}),O.jsxs("div",{className:Sr.right,children:[O.jsx("div",{className:Sr.data_container,children:"today"}),O.jsxs("div",{className:Sr.data_container_allDate,children:[O.jsx("span",{children:n}),O.jsxs("div",{children:[O.jsx("img",{className:Sr.clockIcon,src:d9,alt:"clock",width:12,height:12}),O.jsx("span",{children:t})]})]})]})]})})},HQ="_app_wfltt_1",GQ="_app__body_wfltt_11",KQ="_app__nav_wfltt_21",$Q="_app__link_wfltt_55",WQ="_app__user_wfltt_93",YQ="_app__settings_wfltt_119",QQ="_app__content_wfltt_157",ns={app:HQ,app__body:GQ,app__nav:KQ,app__link:$Q,"app__link--active":"_app__link--active_wfltt_79","app__user-container":"_app__user-container_wfltt_93",app__user:WQ,app__settings:YQ,app__content:QQ},XQ="/testObject/assets/currentUser-DW_uhQFp.jpg",JQ="/testObject/assets/setting-iFurRb8-.png",ZQ=()=>{const n=lo(),e=({isActive:t})=>t?`${ns.app__link} ${ns["app__link--active"]}`:ns.app__link;return O.jsxs("div",{className:ns.app__body,children:[O.jsxs("nav",{className:ns.app__nav,children:[O.jsxs("div",{className:ns["app__user-container"],children:[O.jsx("img",{className:ns.app__user,src:XQ,alt:"user"}),O.jsx(yS,{to:Ui.SETTINGS,children:O.jsx("img",{className:ns.app__settings,src:JQ,alt:"settings"})})]}),O.jsx(Yu,{to:Ui.PRIHOD,className:e,children:"Приход"}),O.jsx(Yu,{to:Ui.GROUPS,className:e,children:"Группы"}),O.jsx(Yu,{to:Ui.PRODUCTS,className:e,children:"Продукты"}),O.jsx(Yu,{to:Ui.USERS,className:e,children:"Пользователи"}),O.jsx(Yu,{to:Ui.SETTINGS,className:e,children:"Настройки"})]}),O.jsx("main",{className:ns.app__content,children:O.jsx(FL.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.5,ease:"easeInOut"},children:O.jsx(_5,{})},n.pathname)})]})},eX=()=>O.jsxs("div",{className:ns.app,children:[O.jsx(qQ,{}),O.jsx(ZQ,{})]});function jn(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var tX=typeof Symbol=="function"&&Symbol.observable||"@@observable",VD=tX,yE=()=>Math.random().toString(36).substring(7).split("").join("."),nX={INIT:`@@redux/INIT${yE()}`,REPLACE:`@@redux/REPLACE${yE()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${yE()}`},Ey=nX;function Uw(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function BL(n,e,t){if(typeof n!="function")throw new Error(jn(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(jn(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(jn(1));return t(BL)(n,e)}let i=n,r=e,o=new Map,l=o,c=0,f=!1;function d(){l===o&&(l=new Map,o.forEach((N,B)=>{l.set(B,N)}))}function g(){if(f)throw new Error(jn(3));return r}function _(N){if(typeof N!="function")throw new Error(jn(4));if(f)throw new Error(jn(5));let B=!0;d();const V=c++;return l.set(V,N),function(){if(B){if(f)throw new Error(jn(6));B=!1,d(),l.delete(V),o=null}}}function v(N){if(!Uw(N))throw new Error(jn(7));if(typeof N.type>"u")throw new Error(jn(8));if(typeof N.type!="string")throw new Error(jn(17));if(f)throw new Error(jn(9));try{f=!0,r=i(r,N)}finally{f=!1}return(o=l).forEach(V=>{V()}),N}function b(N){if(typeof N!="function")throw new Error(jn(10));i=N,v({type:Ey.REPLACE})}function C(){const N=_;return{subscribe(B){if(typeof B!="object"||B===null)throw new Error(jn(11));function V(){const Z=B;Z.next&&Z.next(g())}return V(),{unsubscribe:N(V)}},[VD](){return this}}}return v({type:Ey.INIT}),{dispatch:v,subscribe:_,getState:g,replaceReducer:b,[VD]:C}}function iX(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Ey.INIT})>"u")throw new Error(jn(12));if(typeof t(void 0,{type:Ey.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(jn(13))})}function rX(n){const e=Object.keys(n),t={};for(let o=0;o<e.length;o++){const l=e[o];typeof n[l]=="function"&&(t[l]=n[l])}const i=Object.keys(t);let r;try{iX(t)}catch(o){r=o}return function(l={},c){if(r)throw r;let f=!1;const d={};for(let g=0;g<i.length;g++){const _=i[g],v=t[_],b=l[_],C=v(b,c);if(typeof C>"u")throw c&&c.type,new Error(jn(14));d[_]=C,f=f||C!==b}return f=f||i.length!==Object.keys(l).length,f?d:l}}function Ty(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function sX(...n){return e=>(t,i)=>{const r=e(t,i);let o=()=>{throw new Error(jn(15))};const l={getState:r.getState,dispatch:(f,...d)=>o(f,...d)},c=n.map(f=>f(l));return o=Ty(...c)(r.dispatch),{...r,dispatch:o}}}function oX(n){return Uw(n)&&"type"in n&&typeof n.type=="string"}var jL=Symbol.for("immer-nothing"),kD=Symbol.for("immer-draftable"),zi=Symbol.for("immer-state");function Ir(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Hc=Object.getPrototypeOf;function zl(n){return!!n&&!!n[zi]}function oo(n){return n?zL(n)||Array.isArray(n)||!!n[kD]||!!n.constructor?.[kD]||am(n)||w_(n):!1}var aX=Object.prototype.constructor.toString();function zL(n){if(!n||typeof n!="object")return!1;const e=Hc(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===aX}function Sy(n,e){b_(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,i)=>e(i,t,n))}function b_(n){const e=n[zi];return e?e.type_:Array.isArray(n)?1:am(n)?2:w_(n)?3:0}function QT(n,e){return b_(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function qL(n,e,t){const i=b_(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function lX(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function am(n){return n instanceof Map}function w_(n){return n instanceof Set}function al(n){return n.copy_||n.base_}function XT(n,e){if(am(n))return new Map(n);if(w_(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=zL(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[zi];let r=Reflect.ownKeys(i);for(let o=0;o<r.length;o++){const l=r[o],c=i[l];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(i[l]={configurable:!0,writable:!0,enumerable:c.enumerable,value:n[l]})}return Object.create(Hc(n),i)}else{const i=Hc(n);if(i!==null&&t)return{...n};const r=Object.create(i);return Object.assign(r,n)}}function Fw(n,e=!1){return C_(n)||zl(n)||!oo(n)||(b_(n)>1&&Object.defineProperties(n,{set:{value:Qp},add:{value:Qp},clear:{value:Qp},delete:{value:Qp}}),Object.freeze(n),e&&Object.values(n).forEach(t=>Fw(t,!0))),n}function Qp(){Ir(2)}function C_(n){return Object.isFrozen(n)}var uX={};function ql(n){const e=uX[n];return e||Ir(0,n),e}var Pd;function HL(){return Pd}function cX(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function LD(n,e){e&&(ql("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function JT(n){ZT(n),n.drafts_.forEach(hX),n.drafts_=null}function ZT(n){n===Pd&&(Pd=n.parent_)}function UD(n){return Pd=cX(Pd,n)}function hX(n){const e=n[zi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function FD(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[zi].modified_&&(JT(e),Ir(4)),oo(n)&&(n=by(e,n),e.parent_||wy(e,n)),e.patches_&&ql("Patches").generateReplacementPatches_(t[zi].base_,n,e.patches_,e.inversePatches_)):n=by(e,t,[]),JT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==jL?n:void 0}function by(n,e,t){if(C_(e))return e;const i=e[zi];if(!i)return Sy(e,(r,o)=>BD(n,i,e,r,o,t)),e;if(i.scope_!==n)return e;if(!i.modified_)return wy(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const r=i.copy_;let o=r,l=!1;i.type_===3&&(o=new Set(r),r.clear(),l=!0),Sy(o,(c,f)=>BD(n,i,r,c,f,t,l)),wy(n,r,!1),t&&n.patches_&&ql("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function BD(n,e,t,i,r,o,l){if(zl(r)){const c=o&&e&&e.type_!==3&&!QT(e.assigned_,i)?o.concat(i):void 0,f=by(n,r,c);if(qL(t,i,f),zl(f))n.canAutoFreeze_=!1;else return}else l&&t.add(r);if(oo(r)&&!C_(r)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;by(n,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(am(t)?t.has(i):Object.prototype.propertyIsEnumerable.call(t,i))&&wy(n,r)}}function wy(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&Fw(e,t)}function fX(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:HL(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,o=Bw;t&&(r=[i],o=Od);const{revoke:l,proxy:c}=Proxy.revocable(r,o);return i.draft_=c,i.revoke_=l,c}var Bw={get(n,e){if(e===zi)return n;const t=al(n);if(!QT(t,e))return dX(n,t,e);const i=t[e];return n.finalized_||!oo(i)?i:i===_E(n.base_,e)?(vE(n),n.copy_[e]=tS(i,n)):i},has(n,e){return e in al(n)},ownKeys(n){return Reflect.ownKeys(al(n))},set(n,e,t){const i=GL(al(n),e);if(i?.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const r=_E(al(n),e),o=r?.[zi];if(o&&o.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(lX(t,r)&&(t!==void 0||QT(n.base_,e)))return!0;vE(n),eS(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return _E(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,vE(n),eS(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=al(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){Ir(11)},getPrototypeOf(n){return Hc(n.base_)},setPrototypeOf(){Ir(12)}},Od={};Sy(Bw,(n,e)=>{Od[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Od.deleteProperty=function(n,e){return Od.set.call(this,n,e,void 0)};Od.set=function(n,e,t){return Bw.set.call(this,n[0],e,t,n[0])};function _E(n,e){const t=n[zi];return(t?al(t):n)[e]}function dX(n,e,t){const i=GL(e,t);return i?"value"in i?i.value:i.get?.call(n.draft_):void 0}function GL(n,e){if(!(e in n))return;let t=Hc(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Hc(t)}}function eS(n){n.modified_||(n.modified_=!0,n.parent_&&eS(n.parent_))}function vE(n){n.copy_||(n.copy_=XT(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var mX=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const o=t;t=e;const l=this;return function(f=o,...d){return l.produce(f,g=>t.call(this,g,...d))}}typeof t!="function"&&Ir(6),i!==void 0&&typeof i!="function"&&Ir(7);let r;if(oo(e)){const o=UD(this),l=tS(e,void 0);let c=!0;try{r=t(l),c=!1}finally{c?JT(o):ZT(o)}return LD(o,i),FD(r,o)}else if(!e||typeof e!="object"){if(r=t(e),r===void 0&&(r=e),r===jL&&(r=void 0),this.autoFreeze_&&Fw(r,!0),i){const o=[],l=[];ql("Patches").generateReplacementPatches_(e,r,o,l),i(o,l)}return r}else Ir(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(l,...c)=>this.produceWithPatches(l,f=>e(f,...c));let i,r;return[this.produce(e,t,(l,c)=>{i=l,r=c}),i,r]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){oo(n)||Ir(8),zl(n)&&(n=pX(n));const e=UD(this),t=tS(n,void 0);return t[zi].isManual_=!0,ZT(e),t}finishDraft(n,e){const t=n&&n[zi];(!t||!t.isManual_)&&Ir(9);const{scope_:i}=t;return LD(i,e),FD(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const r=e[t];if(r.path.length===0&&r.op==="replace"){n=r.value;break}}t>-1&&(e=e.slice(t+1));const i=ql("Patches").applyPatches_;return zl(n)?i(n,e):this.produce(n,r=>i(r,e))}};function tS(n,e){const t=am(n)?ql("MapSet").proxyMap_(n,e):w_(n)?ql("MapSet").proxySet_(n,e):fX(n,e);return(e?e.scope_:HL()).drafts_.push(t),t}function pX(n){return zl(n)||Ir(10,n),KL(n)}function KL(n){if(!oo(n)||C_(n))return n;const e=n[zi];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=XT(n,e.scope_.immer_.useStrictShallowCopy_)}else t=XT(n,!0);return Sy(t,(i,r)=>{qL(t,i,KL(r))}),e&&(e.finalized_=!1),t}var gX=new mX,$L=gX.produce;function yX(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function _X(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function vX(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${t}]`)}}var jD=n=>Array.isArray(n)?n:[n];function EX(n){const e=Array.isArray(n[0])?n[0]:n;return vX(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function TX(n,e){const t=[],{length:i}=n;for(let r=0;r<i;r++)t.push(n[r].apply(null,e));return t}var SX=class{constructor(n){this.value=n}deref(){return this.value}},bX=typeof WeakRef<"u"?WeakRef:SX,wX=0,zD=1;function Xp(){return{s:wX,v:void 0,o:null,p:null}}function WL(n,e={}){let t=Xp();const{resultEqualityCheck:i}=e;let r,o=0;function l(){let c=t;const{length:f}=arguments;for(let _=0,v=f;_<v;_++){const b=arguments[_];if(typeof b=="function"||typeof b=="object"&&b!==null){let C=c.o;C===null&&(c.o=C=new WeakMap);const D=C.get(b);D===void 0?(c=Xp(),C.set(b,c)):c=D}else{let C=c.p;C===null&&(c.p=C=new Map);const D=C.get(b);D===void 0?(c=Xp(),C.set(b,c)):c=D}}const d=c;let g;if(c.s===zD)g=c.v;else if(g=n.apply(null,arguments),o++,i){const _=r?.deref?.()??r;_!=null&&i(_,g)&&(g=_,o!==0&&o--),r=typeof g=="object"&&g!==null||typeof g=="function"?new bX(g):g}return d.s=zD,d.v=g,g}return l.clearCache=()=>{t=Xp(),l.resetResultsCount()},l.resultsCount=()=>o,l.resetResultsCount=()=>{o=0},l}function CX(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,i=(...r)=>{let o=0,l=0,c,f={},d=r.pop();typeof d=="object"&&(f=d,d=r.pop()),yX(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const g={...t,...f},{memoize:_,memoizeOptions:v=[],argsMemoize:b=WL,argsMemoizeOptions:C=[]}=g,D=jD(v),N=jD(C),B=EX(r),V=_(function(){return o++,d.apply(null,arguments)},...D),k=b(function(){l++;const K=TX(B,arguments);return c=V.apply(null,K),c},...N);return Object.assign(k,{resultFunc:d,memoizedResultFunc:V,dependencies:B,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>c,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:_,argsMemoize:b})};return Object.assign(i,{withTypes:()=>i}),i}var YL=CX(WL),AX=Object.assign((n,e=YL)=>{_X(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),i=t.map(o=>n[o]);return e(i,(...o)=>o.reduce((l,c,f)=>(l[t[f]]=c,l),{}))},{withTypes:()=>AX});function QL(n){return({dispatch:t,getState:i})=>r=>o=>typeof o=="function"?o(t,i,n):r(o)}var IX=QL(),RX=QL,xX=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Ty:Ty.apply(null,arguments)},DX=n=>n&&typeof n.match=="function";function Zf(n,e){function t(...i){if(e){let r=e(...i);if(!r)throw new Error(Ws(0));return{type:n,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>oX(i)&&i.type===n,t}var XL=class Nf extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Nf.prototype)}static get[Symbol.species](){return Nf}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Nf(...e[0].concat(this)):new Nf(...e.concat(this))}};function qD(n){return oo(n)?$L(n,()=>{}):n}function Jp(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function NX(n){return typeof n=="boolean"}var MX=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:o=!0}=e??{};let l=new XL;return t&&(NX(t)?l.push(IX):l.push(RX(t.extraArgument))),l},PX="RTK_autoBatch",HD=n=>e=>{setTimeout(e,n)},OX=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let r=!0,o=!1,l=!1;const c=new Set,f=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:HD(10):n.type==="callback"?n.queueNotification:HD(n.timeout),d=()=>{l=!1,o&&(o=!1,c.forEach(g=>g()))};return Object.assign({},i,{subscribe(g){const _=()=>r&&g(),v=i.subscribe(_);return c.add(g),()=>{v(),c.delete(g)}},dispatch(g){try{return r=!g?.meta?.[PX],o=!r,o&&(l||(l=!0,f(d))),i.dispatch(g)}finally{r=!0}}})},VX=n=>function(t){const{autoBatch:i=!0}=t??{};let r=new XL(n);return i&&r.push(OX(typeof i=="object"?i:void 0)),r};function kX(n){const e=MX(),{reducer:t=void 0,middleware:i,devTools:r=!0,preloadedState:o=void 0,enhancers:l=void 0}=n||{};let c;if(typeof t=="function")c=t;else if(Uw(t))c=rX(t);else throw new Error(Ws(1));let f;typeof i=="function"?f=i(e):f=e();let d=Ty;r&&(d=xX({trace:!1,...typeof r=="object"&&r}));const g=sX(...f),_=VX(g);let v=typeof l=="function"?l(_):_();const b=d(...v);return BL(c,o,b)}function JL(n){const e={},t=[];let i;const r={addCase(o,l){const c=typeof o=="string"?o:o.type;if(!c)throw new Error(Ws(28));if(c in e)throw new Error(Ws(29));return e[c]=l,r},addAsyncThunk(o,l){return l.pending&&(e[o.pending.type]=l.pending),l.rejected&&(e[o.rejected.type]=l.rejected),l.fulfilled&&(e[o.fulfilled.type]=l.fulfilled),l.settled&&t.push({matcher:o.settled,reducer:l.settled}),r},addMatcher(o,l){return t.push({matcher:o,reducer:l}),r},addDefaultCase(o){return i=o,r}};return n(r),[e,t,i]}function LX(n){return typeof n=="function"}function UX(n,e){let[t,i,r]=JL(e),o;if(LX(n))o=()=>qD(n());else{const c=qD(n);o=()=>c}function l(c=o(),f){let d=[t[f.type],...i.filter(({matcher:g})=>g(f)).map(({reducer:g})=>g)];return d.filter(g=>!!g).length===0&&(d=[r]),d.reduce((g,_)=>{if(_)if(zl(g)){const b=_(g,f);return b===void 0?g:b}else{if(oo(g))return $L(g,v=>_(v,f));{const v=_(g,f);if(v===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return g},c)}return l.getInitialState=o,l}var FX=(n,e)=>DX(n)?n.match(e):n(e);function BX(...n){return e=>n.some(t=>FX(t,e))}var jX="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",zX=(n=21)=>{let e="",t=n;for(;t--;)e+=jX[Math.random()*64|0];return e},qX=["name","message","stack","code"],EE=class{constructor(n,e){this.payload=n,this.meta=e}_type},GD=class{constructor(n,e){this.payload=n,this.meta=e}_type},HX=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of qX)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},KD="External signal was aborted",GX=(()=>{function n(e,t,i){const r=Zf(e+"/fulfilled",(f,d,g,_)=>({payload:f,meta:{..._||{},arg:g,requestId:d,requestStatus:"fulfilled"}})),o=Zf(e+"/pending",(f,d,g)=>({payload:void 0,meta:{...g||{},arg:d,requestId:f,requestStatus:"pending"}})),l=Zf(e+"/rejected",(f,d,g,_,v)=>({payload:_,error:(i&&i.serializeError||HX)(f||"Rejected"),meta:{...v||{},arg:g,requestId:d,rejectedWithValue:!!_,requestStatus:"rejected",aborted:f?.name==="AbortError",condition:f?.name==="ConditionError"}}));function c(f,{signal:d}={}){return(g,_,v)=>{const b=i?.idGenerator?i.idGenerator(f):zX(),C=new AbortController;let D,N;function B(k){N=k,C.abort()}d&&(d.aborted?B(KD):d.addEventListener("abort",()=>B(KD),{once:!0}));const V=(async function(){let k;try{let K=i?.condition?.(f,{getState:_,extra:v});if($X(K)&&(K=await K),K===!1||C.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const ie=new Promise((R,A)=>{D=()=>{A({name:"AbortError",message:N||"Aborted"})},C.signal.addEventListener("abort",D)});g(o(b,f,i?.getPendingMeta?.({requestId:b,arg:f},{getState:_,extra:v}))),k=await Promise.race([ie,Promise.resolve(t(f,{dispatch:g,getState:_,extra:v,requestId:b,signal:C.signal,abort:B,rejectWithValue:(R,A)=>new EE(R,A),fulfillWithValue:(R,A)=>new GD(R,A)})).then(R=>{if(R instanceof EE)throw R;return R instanceof GD?r(R.payload,b,f,R.meta):r(R,b,f)})])}catch(K){k=K instanceof EE?l(null,b,f,K.payload,K.meta):l(K,b,f)}finally{D&&C.signal.removeEventListener("abort",D)}return i&&!i.dispatchConditionRejection&&l.match(k)&&k.meta.condition||g(k),k})();return Object.assign(V,{abort:B,requestId:b,arg:f,unwrap(){return V.then(KX)}})}}return Object.assign(c,{pending:o,rejected:l,fulfilled:r,settled:BX(l,r),typePrefix:e})}return n.withTypes=()=>n,n})();function KX(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function $X(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var ZL=Symbol.for("rtk-slice-createasyncthunk"),WX={[ZL]:GX};function YX(n,e){return`${n}/${e}`}function QX({creators:n}={}){const e=n?.asyncThunk?.[ZL];return function(i){const{name:r,reducerPath:o=r}=i;if(!r)throw new Error(Ws(11));const l=(typeof i.reducers=="function"?i.reducers(JX()):i.reducers)||{},c=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(k,Z){const K=typeof k=="string"?k:k.type;if(!K)throw new Error(Ws(12));if(K in f.sliceCaseReducersByType)throw new Error(Ws(13));return f.sliceCaseReducersByType[K]=Z,d},addMatcher(k,Z){return f.sliceMatchers.push({matcher:k,reducer:Z}),d},exposeAction(k,Z){return f.actionCreators[k]=Z,d},exposeCaseReducer(k,Z){return f.sliceCaseReducersByName[k]=Z,d}};c.forEach(k=>{const Z=l[k],K={reducerName:k,type:YX(r,k),createNotation:typeof i.reducers=="function"};eJ(Z)?nJ(K,Z,d,e):ZX(K,Z,d)});function g(){const[k={},Z=[],K=void 0]=typeof i.extraReducers=="function"?JL(i.extraReducers):[i.extraReducers],ie={...k,...f.sliceCaseReducersByType};return UX(i.initialState,R=>{for(let A in ie)R.addCase(A,ie[A]);for(let A of f.sliceMatchers)R.addMatcher(A.matcher,A.reducer);for(let A of Z)R.addMatcher(A.matcher,A.reducer);K&&R.addDefaultCase(K)})}const _=k=>k,v=new Map,b=new WeakMap;let C;function D(k,Z){return C||(C=g()),C(k,Z)}function N(){return C||(C=g()),C.getInitialState()}function B(k,Z=!1){function K(R){let A=R[k];return typeof A>"u"&&Z&&(A=Jp(b,K,N)),A}function ie(R=_){const A=Jp(v,Z,()=>new WeakMap);return Jp(A,R,()=>{const M={};for(const[j,U]of Object.entries(i.selectors??{}))M[j]=XX(U,R,()=>Jp(b,R,N),Z);return M})}return{reducerPath:k,getSelectors:ie,get selectors(){return ie(K)},selectSlice:K}}const V={name:r,reducer:D,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:N,...B(o),injectInto(k,{reducerPath:Z,...K}={}){const ie=Z??o;return k.inject({reducerPath:ie,reducer:D},K),{...V,...B(ie,!0)}}};return V}}function XX(n,e,t,i){function r(o,...l){let c=e(o);return typeof c>"u"&&i&&(c=t()),n(c,...l)}return r.unwrapped=n,r}function JX(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function ZX({type:n,reducerName:e,createNotation:t},i,r){let o,l;if("reducer"in i){if(t&&!tJ(i))throw new Error(Ws(17));o=i.reducer,l=i.prepare}else o=i;r.addCase(n,o).exposeCaseReducer(e,o).exposeAction(e,l?Zf(n,l):Zf(n))}function eJ(n){return n._reducerDefinitionType==="asyncThunk"}function tJ(n){return n._reducerDefinitionType==="reducerWithPrepare"}function nJ({type:n,reducerName:e},t,i,r){if(!r)throw new Error(Ws(18));const{payloadCreator:o,fulfilled:l,pending:c,rejected:f,settled:d,options:g}=t,_=r(n,o,g);i.exposeAction(e,_),l&&i.addCase(_.fulfilled,l),c&&i.addCase(_.pending,c),f&&i.addCase(_.rejected,f),d&&i.addMatcher(_.settled,d),i.exposeCaseReducer(e,{fulfilled:l||Zp,pending:c||Zp,rejected:f||Zp,settled:d||Zp})}function Zp(){}function Ws(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const e4=QX({creators:{asyncThunk:WX}}),iJ={products:[],status:"idle",error:null},Vd=n=>{if(n==null)return n;if(n instanceof yt)return n.toDate().toISOString();if(Array.isArray(n))return n.map(e=>Vd(e));if(typeof n=="object"){const e={};for(const t in n)n.hasOwnProperty(t)&&(e[t]=Vd(n[t]));return e}return n},jw=e4({name:"products",initialState:iJ,reducers:n=>({fetchProductsTC:n.asyncThunk(async(e,t)=>{try{return(await nw(Ad(Cl,"products"))).docs.map(o=>{const l=o.data(),c=Vd(l);return{id:o.id,...c}})}catch(i){return t.rejectWithValue(i.message??"Failed to fetch products")}},{fulfilled:(e,t)=>{e.products=t.payload,e.status="succeeded"},pending:e=>{e.status="loading",e.error=null},rejected:(e,t)=>{e.status="failed",e.error=t.payload}}),deleteProductTC:n.asyncThunk(async(e,t)=>{try{return await rk($b(Cl,"products",e)),e}catch(i){return t.rejectWithValue(i.message??"Failed to delete product")}},{fulfilled:(e,t)=>{e.products=e.products.filter(i=>i.id!==t.payload)}}),addProductTC:n.asyncThunk(async(e,t)=>{try{const i={...e,guarantee:{start:e.guarantee.start,end:e.guarantee.end},date:iK()};return{id:(await sk(Ad(Cl,"products"),i)).id,...e,date:new Date().toISOString()}}catch(i){return t.rejectWithValue(i.message??"Failed to add product")}},{fulfilled:(e,t)=>{e.products.push(t.payload)}})}),selectors:{selectProducts:n=>n.products,selectStatus:n=>n.status,selectError:n=>n.error}}),{selectProducts:rJ,selectStatus:sJ,selectError:oJ}=jw.selectors,{fetchProductsTC:t4,deleteProductTC:n4,addProductTC:aJ}=jw.actions,lJ=jw.reducer,uJ=async n=>{try{const e=Ad(Cl,"products"),t=$G(e,WG("order","==",n));return(await nw(t)).docs.map(o=>({id:o.id,...o.data()}))}catch(e){return console.error("Ошибка при получении продуктов:",e),[]}},cJ={orders:[],status:"idle",error:null},zw=e4({name:"orders",initialState:cJ,reducers:n=>({fetchOrdersTC:n.asyncThunk(async(e,t)=>{try{const r=(await nw(Ad(Cl,"orders"))).docs.map(l=>{const c=l.data(),f=Vd(c);return{id:l.id,...f}});return await Promise.all(r.map(async l=>{const c=await uJ(l.id);return{...l,products:Vd(c)}}))}catch(i){return t.rejectWithValue(i.message??"Failed to fetch orders")}},{fulfilled:(e,t)=>{e.orders=t.payload,e.status="succeeded"},pending:e=>{e.error=null,e.status="loading"},rejected:(e,t)=>{e.status="failed",e.error=t.payload}}),deleteOrderTC:n.asyncThunk(async(e,t)=>{try{return await rk($b(Cl,"orders",e)),e}catch(i){return t.rejectWithValue(i.message??"Failed to delete order")}},{pending:e=>{e.status="loading"},fulfilled:(e,t)=>{e.orders=e.orders.filter(i=>i.id!==t.payload),e.status="succeeded"},rejected:(e,t)=>{e.status="failed",e.error=t.payload}}),addOrderTC:n.asyncThunk(async(e,t)=>{try{return{id:(await sk(Ad(Cl,"orders"),e)).id,...e}}catch(i){return t.rejectWithValue(i.message??"Failed to add order")}},{fulfilled:(e,t)=>{e.orders.push(t.payload)},rejected:(e,t)=>{e.error=t.payload}})}),selectors:{selectOrders:n=>n.orders,selectStatus:n=>n.status,selectError:n=>n.error}}),{fetchOrdersTC:hJ,deleteOrderTC:fJ,addOrderTC:dJ}=zw.actions,{selectOrders:i4,selectStatus:_ne,selectError:vne}=zw.selectors,mJ=zw.reducer;var TE={exports:{}},SE={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $D;function pJ(){if($D)return SE;$D=1;var n=Py();function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,r=n.useRef,o=n.useEffect,l=n.useMemo,c=n.useDebugValue;return SE.useSyncExternalStoreWithSelector=function(f,d,g,_,v){var b=r(null);if(b.current===null){var C={hasValue:!1,value:null};b.current=C}else C=b.current;b=l(function(){function N(K){if(!B){if(B=!0,V=K,K=_(K),v!==void 0&&C.hasValue){var ie=C.value;if(v(ie,K))return k=ie}return k=K}if(ie=k,t(V,K))return ie;var R=_(K);return v!==void 0&&v(ie,R)?(V=K,ie):(V=K,k=R)}var B=!1,V,k,Z=g===void 0?null:g;return[function(){return N(d())},Z===null?void 0:function(){return N(Z())}]},[d,g,_,v]);var D=i(f,b[0],b[1]);return o(function(){C.hasValue=!0,C.value=D},[D]),c(D),D},SE}var WD;function gJ(){return WD||(WD=1,TE.exports=pJ()),TE.exports}var yJ=gJ();function _J(n){n()}function vJ(){let n=null,e=null;return{clear(){n=null,e=null},notify(){_J(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const r=e={callback:t,next:null,prev:e};return r.prev?r.prev.next=r:n=r,function(){!i||n===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:n=r.next)}}}}var YD={notify(){},get:()=>[]};function EJ(n,e){let t,i=YD,r=0,o=!1;function l(D){g();const N=i.subscribe(D);let B=!1;return()=>{B||(B=!0,N(),_())}}function c(){i.notify()}function f(){C.onStateChange&&C.onStateChange()}function d(){return o}function g(){r++,t||(t=n.subscribe(f),i=vJ())}function _(){r--,t&&r===0&&(t(),t=void 0,i.clear(),i=YD)}function v(){o||(o=!0,g())}function b(){o&&(o=!1,_())}const C={addNestedSub:l,notifyNestedSubs:c,handleChangeWrapper:f,isSubscribed:d,trySubscribe:v,tryUnsubscribe:b,getListeners:()=>i};return C}var TJ=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SJ=TJ(),bJ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",wJ=bJ(),CJ=()=>SJ||wJ?I.useLayoutEffect:I.useEffect,AJ=CJ(),IJ=Symbol.for("react-redux-context"),RJ=typeof globalThis<"u"?globalThis:{};function xJ(){if(!I.createContext)return{};const n=RJ[IJ]??=new Map;let e=n.get(I.createContext);return e||(e=I.createContext(null),n.set(I.createContext,e)),e}var Ea=xJ();function DJ(n){const{children:e,context:t,serverState:i,store:r}=n,o=I.useMemo(()=>{const f=EJ(r);return{store:r,subscription:f,getServerState:i?()=>i:void 0}},[r,i]),l=I.useMemo(()=>r.getState(),[r]);AJ(()=>{const{subscription:f}=o;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==r.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[o,l]);const c=t||Ea;return I.createElement(c.Provider,{value:o},e)}var NJ=DJ;function qw(n=Ea){return function(){return I.useContext(n)}}var r4=qw();function s4(n=Ea){const e=n===Ea?r4:qw(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var MJ=s4();function PJ(n=Ea){const e=n===Ea?MJ:s4(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var OJ=PJ(),VJ=(n,e)=>n===e;function kJ(n=Ea){const e=n===Ea?r4:qw(n),t=(i,r={})=>{const{equalityFn:o=VJ}=typeof r=="function"?{equalityFn:r}:r,l=e(),{store:c,subscription:f,getServerState:d}=l;I.useRef(!0);const g=I.useCallback({[i.name](v){return i(v)}}[i.name],[i]),_=yJ.useSyncExternalStoreWithSelector(f.addNestedSub,c.getState,d||c.getState,g,o);return I.useDebugValue(_),_};return Object.assign(t,{withTypes:()=>t}),t}var LJ=kJ();const Ec=LJ.withTypes(),UJ=n=>n.products.products,FJ=YL([UJ],n=>n.reduce((e,t)=>{const i=t.order.toString();return e[i]||(e[i]=[]),e[i].push(t),e},{}));var bE={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var QD;function BJ(){return QD||(QD=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var o="",l=0;l<arguments.length;l++){var c=arguments[l];c&&(o=r(o,i(c)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var l="";for(var c in o)e.call(o,c)&&o[c]&&(l=r(l,c));return l}function r(o,l){return l?o?o+" "+l:o+l:o}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(bE)),bE.exports}var jJ=BJ();const Nt=Ld(jJ);function zJ(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)!==-1)continue;t[i]=n[i]}return t}function nS(n,e){return nS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},nS(n,e)}function qJ(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,nS(n,e)}const HJ=["xxl","xl","lg","md","sm","xs"],GJ="xs",lm=I.createContext({prefixes:{},breakpoints:HJ,minBreakpoint:GJ}),{Consumer:Ene,Provider:Tne}=lm;function Sn(n,e){const{prefixes:t}=I.useContext(lm);return n||t[e]||e}function o4(){const{breakpoints:n}=I.useContext(lm);return n}function a4(){const{minBreakpoint:n}=I.useContext(lm);return n}function KJ(){const{dir:n}=I.useContext(lm);return n==="rtl"}function A_(n){return n&&n.ownerDocument||document}function $J(n){var e=A_(n);return e&&e.defaultView||window}function WJ(n,e){return $J(n).getComputedStyle(n,e)}var YJ=/([A-Z])/g;function QJ(n){return n.replace(YJ,"-$1").toLowerCase()}var XJ=/^ms-/;function eg(n){return QJ(n).replace(XJ,"-ms-")}var JJ=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function ZJ(n){return!!(n&&JJ.test(n))}function Rl(n,e){var t="",i="";if(typeof e=="string")return n.style.getPropertyValue(eg(e))||WJ(n).getPropertyValue(eg(e));Object.keys(e).forEach(function(r){var o=e[r];!o&&o!==0?n.style.removeProperty(eg(r)):ZJ(r)?i+=r+"("+o+") ":t+=eg(r)+": "+o+";"}),i&&(t+="transform: "+i+";"),n.style.cssText+=";"+t}var wE={exports:{}},CE,XD;function eZ(){if(XD)return CE;XD=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return CE=n,CE}var AE,JD;function tZ(){if(JD)return AE;JD=1;var n=eZ();function e(){}function t(){}return t.resetWarningCache=e,AE=function(){function i(l,c,f,d,g,_){if(_!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}i.isRequired=i;function r(){return i}var o={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return o.PropTypes=o,o},AE}var ZD;function nZ(){return ZD||(ZD=1,wE.exports=tZ()()),wE.exports}var iZ=nZ();const Ys=Ld(iZ),eN={disabled:!1},l4=Rt.createContext(null);var rZ=function(e){return e.scrollTop},Mf="unmounted",ll="exited",Qo="entering",dl="entered",iS="exiting",ho=(function(n){qJ(e,n);function e(i,r){var o;o=n.call(this,i,r)||this;var l=r,c=l&&!l.isMounting?i.enter:i.appear,f;return o.appearStatus=null,i.in?c?(f=ll,o.appearStatus=Qo):f=dl:i.unmountOnExit||i.mountOnEnter?f=Mf:f=ll,o.state={status:f},o.nextCallback=null,o}e.getDerivedStateFromProps=function(r,o){var l=r.in;return l&&o.status===Mf?{status:ll}:null};var t=e.prototype;return t.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},t.componentDidUpdate=function(r){var o=null;if(r!==this.props){var l=this.state.status;this.props.in?l!==Qo&&l!==dl&&(o=Qo):(l===Qo||l===dl)&&(o=iS)}this.updateStatus(!1,o)},t.componentWillUnmount=function(){this.cancelNextCallback()},t.getTimeouts=function(){var r=this.props.timeout,o,l,c;return o=l=c=r,r!=null&&typeof r!="number"&&(o=r.exit,l=r.enter,c=r.appear!==void 0?r.appear:l),{exit:o,enter:l,appear:c}},t.updateStatus=function(r,o){if(r===void 0&&(r=!1),o!==null)if(this.cancelNextCallback(),o===Qo){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:nc.findDOMNode(this);l&&rZ(l)}this.performEnter(r)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ll&&this.setState({status:Mf})},t.performEnter=function(r){var o=this,l=this.props.enter,c=this.context?this.context.isMounting:r,f=this.props.nodeRef?[c]:[nc.findDOMNode(this),c],d=f[0],g=f[1],_=this.getTimeouts(),v=c?_.appear:_.enter;if(!r&&!l||eN.disabled){this.safeSetState({status:dl},function(){o.props.onEntered(d)});return}this.props.onEnter(d,g),this.safeSetState({status:Qo},function(){o.props.onEntering(d,g),o.onTransitionEnd(v,function(){o.safeSetState({status:dl},function(){o.props.onEntered(d,g)})})})},t.performExit=function(){var r=this,o=this.props.exit,l=this.getTimeouts(),c=this.props.nodeRef?void 0:nc.findDOMNode(this);if(!o||eN.disabled){this.safeSetState({status:ll},function(){r.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:iS},function(){r.props.onExiting(c),r.onTransitionEnd(l.exit,function(){r.safeSetState({status:ll},function(){r.props.onExited(c)})})})},t.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},t.safeSetState=function(r,o){o=this.setNextCallback(o),this.setState(r,o)},t.setNextCallback=function(r){var o=this,l=!0;return this.nextCallback=function(c){l&&(l=!1,o.nextCallback=null,r(c))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},t.onTransitionEnd=function(r,o){this.setNextCallback(o);var l=this.props.nodeRef?this.props.nodeRef.current:nc.findDOMNode(this),c=r==null&&!this.props.addEndListener;if(!l||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var f=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],d=f[0],g=f[1];this.props.addEndListener(d,g)}r!=null&&setTimeout(this.nextCallback,r)},t.render=function(){var r=this.state.status;if(r===Mf)return null;var o=this.props,l=o.children;o.in,o.mountOnEnter,o.unmountOnExit,o.appear,o.enter,o.exit,o.timeout,o.addEndListener,o.onEnter,o.onEntering,o.onEntered,o.onExit,o.onExiting,o.onExited,o.nodeRef;var c=zJ(o,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Rt.createElement(l4.Provider,{value:null},typeof l=="function"?l(r,c):Rt.cloneElement(Rt.Children.only(l),c))},e})(Rt.Component);ho.contextType=l4;ho.propTypes={};function Gu(){}ho.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Gu,onEntering:Gu,onEntered:Gu,onExit:Gu,onExiting:Gu,onExited:Gu};ho.UNMOUNTED=Mf;ho.EXITED=ll;ho.ENTERING=Qo;ho.ENTERED=dl;ho.EXITING=iS;function sZ(n){return n.code==="Escape"||n.keyCode===27}function oZ(){const n=I.version.split(".");return{major:+n[0],minor:+n[1],patch:+n[2]}}function I_(n){if(!n||typeof n=="function")return null;const{major:e}=oZ();return e>=19?n.props.ref:n.ref}const ah=!!(typeof window<"u"&&window.document&&window.document.createElement);var rS=!1,sS=!1;try{var IE={get passive(){return rS=!0},get once(){return sS=rS=!0}};ah&&(window.addEventListener("test",IE,IE),window.removeEventListener("test",IE,!0))}catch{}function u4(n,e,t,i){if(i&&typeof i!="boolean"&&!sS){var r=i.once,o=i.capture,l=t;!sS&&r&&(l=t.__once||function c(f){this.removeEventListener(e,c,o),t.call(this,f)},t.__once=l),n.addEventListener(e,l,rS?i:o)}n.addEventListener(e,t,i)}function oS(n,e,t,i){var r=i&&typeof i!="boolean"?i.capture:i;n.removeEventListener(e,t,r),t.__once&&n.removeEventListener(e,t.__once,r)}function Cy(n,e,t,i){return u4(n,e,t,i),function(){oS(n,e,t,i)}}function aZ(n,e,t,i){if(i===void 0&&(i=!0),n){var r=document.createEvent("HTMLEvents");r.initEvent(e,t,i),n.dispatchEvent(r)}}function lZ(n){var e=Rl(n,"transitionDuration")||"",t=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*t}function uZ(n,e,t){t===void 0&&(t=5);var i=!1,r=setTimeout(function(){i||aZ(n,"transitionend",!0)},e+t),o=Cy(n,"transitionend",function(){i=!0},{once:!0});return function(){clearTimeout(r),o()}}function c4(n,e,t,i){t==null&&(t=lZ(n)||0);var r=uZ(n,t,i),o=Cy(n,"transitionend",e);return function(){r(),o()}}function tN(n,e){const t=Rl(n,e)||"",i=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*i}function cZ(n,e){const t=tN(n,"transitionDuration"),i=tN(n,"transitionDelay"),r=c4(n,o=>{o.target===n&&(r(),e(o))},t+i)}function hZ(n){n.offsetHeight}const nN=n=>!n||typeof n=="function"?n:e=>{n.current=e};function fZ(n,e){const t=nN(n),i=nN(e);return r=>{t&&t(r),i&&i(r)}}function h4(n,e){return I.useMemo(()=>fZ(n,e),[n,e])}function dZ(n){return n&&"setState"in n?nc.findDOMNode(n):n??null}const f4=Rt.forwardRef(({onEnter:n,onEntering:e,onEntered:t,onExit:i,onExiting:r,onExited:o,addEndListener:l,children:c,childRef:f,...d},g)=>{const _=I.useRef(null),v=h4(_,f),b=ie=>{v(dZ(ie))},C=ie=>R=>{ie&&_.current&&ie(_.current,R)},D=I.useCallback(C(n),[n]),N=I.useCallback(C(e),[e]),B=I.useCallback(C(t),[t]),V=I.useCallback(C(i),[i]),k=I.useCallback(C(r),[r]),Z=I.useCallback(C(o),[o]),K=I.useCallback(C(l),[l]);return O.jsx(ho,{ref:g,...d,onEnter:D,onEntered:B,onEntering:N,onExit:V,onExited:Z,onExiting:k,addEndListener:K,nodeRef:_,children:typeof c=="function"?(ie,R)=>c(ie,{...R,ref:b}):Rt.cloneElement(c,{ref:b})})});f4.displayName="TransitionWrapper";function mZ(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n},[n]),e}function aS(n){const e=mZ(n);return I.useCallback(function(...t){return e.current&&e.current(...t)},[e])}const pZ=(n=>I.forwardRef((e,t)=>O.jsx("div",{...e,ref:t,className:Nt(e.className,n)})));function gZ(n){const e=I.useRef(n);return I.useEffect(()=>{e.current=n},[n]),e}function ml(n){const e=gZ(n);return I.useCallback(function(...t){return e.current&&e.current(...t)},[e])}function yZ(){const n=I.useRef(!0),e=I.useRef(()=>n.current);return I.useEffect(()=>(n.current=!0,()=>{n.current=!1}),[]),e.current}function _Z(n){const e=I.useRef(null);return I.useEffect(()=>{e.current=n}),e.current}const vZ=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",EZ=typeof document<"u",iN=EZ||vZ?I.useLayoutEffect:I.useEffect,TZ=["as","disabled"];function SZ(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function bZ(n){return!n||n.trim()==="#"}function d4({tagName:n,disabled:e,href:t,target:i,rel:r,role:o,onClick:l,tabIndex:c=0,type:f}){n||(t!=null||i!=null||r!=null?n="a":n="button");const d={tagName:n};if(n==="button")return[{type:f||"button",disabled:e},d];const g=v=>{if((e||n==="a"&&bZ(t))&&v.preventDefault(),e){v.stopPropagation();return}l?.(v)},_=v=>{v.key===" "&&(v.preventDefault(),g(v))};return n==="a"&&(t||(t="#"),e&&(t=void 0)),[{role:o??"button",disabled:void 0,tabIndex:e?void 0:c,href:t,target:n==="a"?i:void 0,"aria-disabled":e||void 0,rel:n==="a"?r:void 0,onClick:g,onKeyDown:_},d]}const wZ=I.forwardRef((n,e)=>{let{as:t,disabled:i}=n,r=SZ(n,TZ);const[o,{tagName:l}]=d4(Object.assign({tagName:t,disabled:i},r));return O.jsx(l,Object.assign({},r,o,{ref:e}))});wZ.displayName="Button";const CZ={[Qo]:"show",[dl]:"show"},Hw=I.forwardRef(({className:n,children:e,transitionClasses:t={},onEnter:i,...r},o)=>{const l={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...r},c=I.useCallback((f,d)=>{hZ(f),i?.(f,d)},[i]);return O.jsx(f4,{ref:o,addEndListener:cZ,...l,onEnter:c,childRef:I_(e),children:(f,d)=>I.cloneElement(e,{...d,className:Nt("fade",n,e.props.className,CZ[f],t[f])})})});Hw.displayName="Fade";const AZ={"aria-label":Ys.string,onClick:Ys.func,variant:Ys.oneOf(["white"])},Gw=I.forwardRef(({className:n,variant:e,"aria-label":t="Close",...i},r)=>O.jsx("button",{ref:r,type:"button",className:Nt("btn-close",e&&`btn-close-${e}`,n),"aria-label":t,...i}));Gw.displayName="CloseButton";Gw.propTypes=AZ;const Ay=I.forwardRef(({as:n,bsPrefix:e,variant:t="primary",size:i,active:r=!1,disabled:o=!1,className:l,...c},f)=>{const d=Sn(e,"btn"),[g,{tagName:_}]=d4({tagName:n,disabled:o,...c}),v=_;return O.jsx(v,{...g,...c,ref:f,disabled:o,className:Nt(l,d,r&&"active",t&&`${d}-${t}`,i&&`${d}-${i}`,c.href&&o&&"disabled")})});Ay.displayName="Button";function IZ(n){const e=I.useRef(n);return e.current=n,e}function RZ(n){const e=IZ(n);I.useEffect(()=>()=>e.current(),[])}function xZ(n,e){return I.Children.toArray(n).some(t=>I.isValidElement(t)&&t.type===e)}function DZ({as:n,bsPrefix:e,className:t,...i}){e=Sn(e,"col");const r=o4(),o=a4(),l=[],c=[];return r.forEach(f=>{const d=i[f];delete i[f];let g,_,v;typeof d=="object"&&d!=null?{span:g,offset:_,order:v}=d:g=d;const b=f!==o?`-${f}`:"";g&&l.push(g===!0?`${e}${b}`:`${e}${b}-${g}`),v!=null&&c.push(`order${b}-${v}`),_!=null&&c.push(`offset${b}-${_}`)}),[{...i,className:Nt(t,...l,...c)},{as:n,bsPrefix:e,spans:l}]}const kd=I.forwardRef((n,e)=>{const[{className:t,...i},{as:r="div",bsPrefix:o,spans:l}]=DZ(n);return O.jsx(r,{...i,ref:e,className:Nt(t,!l.length&&o)})});kd.displayName="Col";var NZ=Function.prototype.bind.call(Function.prototype.call,[].slice);function Ku(n,e){return NZ(n.querySelectorAll(e))}function rN(n,e){if(n.contains)return n.contains(e);if(n.compareDocumentPosition)return n===e||!!(n.compareDocumentPosition(e)&16)}const MZ="data-rr-ui-";function PZ(n){return`${MZ}${n}`}const m4=I.createContext(ah?window:void 0);m4.Provider;function Kw(){return I.useContext(m4)}const OZ={type:Ys.string,tooltip:Ys.bool,as:Ys.elementType},R_=I.forwardRef(({as:n="div",className:e,type:t="valid",tooltip:i=!1,...r},o)=>O.jsx(n,{...r,ref:o,className:Nt(e,`${t}-${i?"tooltip":"feedback"}`)}));R_.displayName="Feedback";R_.propTypes=OZ;const ao=I.createContext({}),$w=I.forwardRef(({id:n,bsPrefix:e,className:t,type:i="checkbox",isValid:r=!1,isInvalid:o=!1,as:l="input",...c},f)=>{const{controlId:d}=I.useContext(ao);return e=Sn(e,"form-check-input"),O.jsx(l,{...c,ref:f,type:i,id:n||d,className:Nt(t,e,r&&"is-valid",o&&"is-invalid")})});$w.displayName="FormCheckInput";const Iy=I.forwardRef(({bsPrefix:n,className:e,htmlFor:t,...i},r)=>{const{controlId:o}=I.useContext(ao);return n=Sn(n,"form-check-label"),O.jsx("label",{...i,ref:r,htmlFor:t||o,className:Nt(e,n)})});Iy.displayName="FormCheckLabel";const p4=I.forwardRef(({id:n,bsPrefix:e,bsSwitchPrefix:t,inline:i=!1,reverse:r=!1,disabled:o=!1,isValid:l=!1,isInvalid:c=!1,feedbackTooltip:f=!1,feedback:d,feedbackType:g,className:_,style:v,title:b="",type:C="checkbox",label:D,children:N,as:B="input",...V},k)=>{e=Sn(e,"form-check"),t=Sn(t,"form-switch");const{controlId:Z}=I.useContext(ao),K=I.useMemo(()=>({controlId:n||Z}),[Z,n]),ie=!N&&D!=null&&D!==!1||xZ(N,Iy),R=O.jsx($w,{...V,type:C==="switch"?"checkbox":C,ref:k,isValid:l,isInvalid:c,disabled:o,as:B});return O.jsx(ao.Provider,{value:K,children:O.jsx("div",{style:v,className:Nt(_,ie&&e,i&&`${e}-inline`,r&&`${e}-reverse`,C==="switch"&&t),children:N||O.jsxs(O.Fragment,{children:[R,ie&&O.jsx(Iy,{title:b,children:D}),d&&O.jsx(R_,{type:g,tooltip:f,children:d})]})})})});p4.displayName="FormCheck";const Ry=Object.assign(p4,{Input:$w,Label:Iy}),g4=I.forwardRef(({bsPrefix:n,type:e,size:t,htmlSize:i,id:r,className:o,isValid:l=!1,isInvalid:c=!1,plaintext:f,readOnly:d,as:g="input",..._},v)=>{const{controlId:b}=I.useContext(ao);return n=Sn(n,"form-control"),O.jsx(g,{..._,type:e,size:i,ref:v,readOnly:d,id:r||b,className:Nt(o,f?`${n}-plaintext`:n,t&&`${n}-${t}`,e==="color"&&`${n}-color`,l&&"is-valid",c&&"is-invalid")})});g4.displayName="FormControl";const VZ=Object.assign(g4,{Feedback:R_}),y4=I.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},r)=>(e=Sn(e,"form-floating"),O.jsx(t,{ref:r,className:Nt(n,e),...i})));y4.displayName="FormFloating";const Ww=I.forwardRef(({controlId:n,as:e="div",...t},i)=>{const r=I.useMemo(()=>({controlId:n}),[n]);return O.jsx(ao.Provider,{value:r,children:O.jsx(e,{...t,ref:i})})});Ww.displayName="FormGroup";const _4=I.forwardRef(({as:n="label",bsPrefix:e,column:t=!1,visuallyHidden:i=!1,className:r,htmlFor:o,...l},c)=>{const{controlId:f}=I.useContext(ao);e=Sn(e,"form-label");let d="col-form-label";typeof t=="string"&&(d=`${d} ${d}-${t}`);const g=Nt(r,e,i&&"visually-hidden",t&&d);return o=o||f,t?O.jsx(kd,{ref:c,as:"label",className:g,htmlFor:o,...l}):O.jsx(n,{ref:c,className:g,htmlFor:o,...l})});_4.displayName="FormLabel";const v4=I.forwardRef(({bsPrefix:n,className:e,id:t,...i},r)=>{const{controlId:o}=I.useContext(ao);return n=Sn(n,"form-range"),O.jsx("input",{...i,type:"range",ref:r,className:Nt(e,n),id:t||o})});v4.displayName="FormRange";const E4=I.forwardRef(({bsPrefix:n,size:e,htmlSize:t,className:i,isValid:r=!1,isInvalid:o=!1,id:l,...c},f)=>{const{controlId:d}=I.useContext(ao);return n=Sn(n,"form-select"),O.jsx("select",{...c,size:t,ref:f,className:Nt(i,n,e&&`${n}-${e}`,r&&"is-valid",o&&"is-invalid"),id:l||d})});E4.displayName="FormSelect";const T4=I.forwardRef(({bsPrefix:n,className:e,as:t="small",muted:i,...r},o)=>(n=Sn(n,"form-text"),O.jsx(t,{...r,ref:o,className:Nt(e,n,i&&"text-muted")})));T4.displayName="FormText";const S4=I.forwardRef((n,e)=>O.jsx(Ry,{...n,ref:e,type:"switch"}));S4.displayName="Switch";const kZ=Object.assign(S4,{Input:Ry.Input,Label:Ry.Label}),b4=I.forwardRef(({bsPrefix:n,className:e,children:t,controlId:i,label:r,...o},l)=>(n=Sn(n,"form-floating"),O.jsxs(Ww,{ref:l,className:Nt(e,n),controlId:i,...o,children:[t,O.jsx("label",{htmlFor:i,children:r})]})));b4.displayName="FloatingLabel";const LZ={_ref:Ys.any,validated:Ys.bool,as:Ys.elementType},Yw=I.forwardRef(({className:n,validated:e,as:t="form",...i},r)=>O.jsx(t,{...i,ref:r,className:Nt(n,e&&"was-validated")}));Yw.displayName="Form";Yw.propTypes=LZ;const ni=Object.assign(Yw,{Group:Ww,Control:VZ,Floating:y4,Check:Ry,Switch:kZ,Label:_4,Text:T4,Range:v4,Select:E4,FloatingLabel:b4}),sN=n=>!n||typeof n=="function"?n:e=>{n.current=e};function UZ(n,e){const t=sN(n),i=sN(e);return r=>{t&&t(r),i&&i(r)}}function Qw(n,e){return I.useMemo(()=>UZ(n,e),[n,e])}var tg;function oN(n){if((!tg&&tg!==0||n)&&ah){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),tg=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return tg}function FZ(){return I.useState(null)}function RE(n){n===void 0&&(n=A_());try{var e=n.activeElement;return!e||!e.nodeName?null:e}catch{return n.body}}function BZ(n){const e=I.useRef(n);return e.current=n,e}function jZ(n){const e=BZ(n);I.useEffect(()=>()=>e.current(),[])}function zZ(n=document){const e=n.defaultView;return Math.abs(e.innerWidth-n.documentElement.clientWidth)}const aN=PZ("modal-open");class Xw{constructor({ownerDocument:e,handleContainerOverflow:t=!0,isRTL:i=!1}={}){this.handleContainerOverflow=t,this.isRTL=i,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return zZ(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},i=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[i]:r.style[i]},e.scrollBarWidth&&(t[i]=`${parseInt(Rl(r,i)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(aN,""),Rl(r,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(aN),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return t!==-1||(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(e){const t=this.modals.indexOf(e);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const xE=(n,e)=>ah?n==null?(e||A_()).body:(typeof n=="function"&&(n=n()),n&&"current"in n&&(n=n.current),n&&("nodeType"in n||n.getBoundingClientRect)?n:null):null;function qZ(n,e){const t=Kw(),[i,r]=I.useState(()=>xE(n,t?.document));if(!i){const o=xE(n);o&&r(o)}return I.useEffect(()=>{},[e,i]),I.useEffect(()=>{const o=xE(n);o!==i&&r(o)},[n,i]),i}function HZ({children:n,in:e,onExited:t,mountOnEnter:i,unmountOnExit:r}){const o=I.useRef(null),l=I.useRef(e),c=ml(t);I.useEffect(()=>{e?l.current=!0:c(o.current)},[e,c]);const f=Qw(o,I_(n)),d=I.cloneElement(n,{ref:f});return e?d:r||!l.current&&i?null:d}const GZ=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function KZ(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function $Z(n){let{onEnter:e,onEntering:t,onEntered:i,onExit:r,onExiting:o,onExited:l,addEndListener:c,children:f}=n,d=KZ(n,GZ);const g=I.useRef(null),_=Qw(g,I_(f)),v=Z=>K=>{Z&&g.current&&Z(g.current,K)},b=I.useCallback(v(e),[e]),C=I.useCallback(v(t),[t]),D=I.useCallback(v(i),[i]),N=I.useCallback(v(r),[r]),B=I.useCallback(v(o),[o]),V=I.useCallback(v(l),[l]),k=I.useCallback(v(c),[c]);return Object.assign({},d,{nodeRef:g},e&&{onEnter:b},t&&{onEntering:C},i&&{onEntered:D},r&&{onExit:N},o&&{onExiting:B},l&&{onExited:V},c&&{addEndListener:k},{children:typeof f=="function"?(Z,K)=>f(Z,Object.assign({},K,{ref:_})):I.cloneElement(f,{ref:_})})}const WZ=["component"];function YZ(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}const QZ=I.forwardRef((n,e)=>{let{component:t}=n,i=YZ(n,WZ);const r=$Z(i);return O.jsx(t,Object.assign({ref:e},r))});function XZ({in:n,onTransition:e}){const t=I.useRef(null),i=I.useRef(!0),r=ml(e);return iN(()=>{if(!t.current)return;let o=!1;return r({in:n,element:t.current,initial:i.current,isStale:()=>o}),()=>{o=!0}},[n,r]),iN(()=>(i.current=!1,()=>{i.current=!0}),[]),t}function JZ({children:n,in:e,onExited:t,onEntered:i,transition:r}){const[o,l]=I.useState(!e);e&&o&&l(!1);const c=XZ({in:!!e,onTransition:d=>{const g=()=>{d.isStale()||(d.in?i?.(d.element,d.initial):(l(!0),t?.(d.element)))};Promise.resolve(r(d)).then(g,_=>{throw d.in||l(!0),_})}}),f=Qw(c,I_(n));return o&&!e?null:I.cloneElement(n,{ref:f})}function lN(n,e,t){return n?O.jsx(QZ,Object.assign({},t,{component:n})):e?O.jsx(JZ,Object.assign({},t,{transition:e})):O.jsx(HZ,Object.assign({},t))}const ZZ=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function eee(n,e){if(n==null)return{};var t={};for(var i in n)if({}.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}let DE;function tee(n){return DE||(DE=new Xw({ownerDocument:n?.document})),DE}function nee(n){const e=Kw(),t=n||tee(e),i=I.useRef({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>t.add(i.current),remove:()=>t.remove(i.current),isTopModal:()=>t.isTopModal(i.current),setDialogRef:I.useCallback(r=>{i.current.dialog=r},[]),setBackdropRef:I.useCallback(r=>{i.current.backdrop=r},[])})}const w4=I.forwardRef((n,e)=>{let{show:t=!1,role:i="dialog",className:r,style:o,children:l,backdrop:c=!0,keyboard:f=!0,onBackdropClick:d,onEscapeKeyDown:g,transition:_,runTransition:v,backdropTransition:b,runBackdropTransition:C,autoFocus:D=!0,enforceFocus:N=!0,restoreFocus:B=!0,restoreFocusOptions:V,renderDialog:k,renderBackdrop:Z=ut=>O.jsx("div",Object.assign({},ut)),manager:K,container:ie,onShow:R,onHide:A=()=>{},onExit:M,onExited:j,onExiting:U,onEnter:z,onEntering:P,onEntered:De}=n,qe=eee(n,ZZ);const ee=Kw(),ce=qZ(ie),pe=nee(K),Me=yZ(),Ue=_Z(t),[q,oe]=I.useState(!t),ge=I.useRef(null);I.useImperativeHandle(e,()=>pe,[pe]),ah&&!Ue&&t&&(ge.current=RE(ee?.document)),t&&q&&oe(!1);const Ee=ml(()=>{if(pe.add(),In.current=Cy(document,"keydown",Mt),at.current=Cy(document,"focus",()=>setTimeout(ke),!0),R&&R(),D){var ut,li;const Ci=RE((ut=(li=pe.dialog)==null?void 0:li.ownerDocument)!=null?ut:ee?.document);pe.dialog&&Ci&&!rN(pe.dialog,Ci)&&(ge.current=Ci,pe.dialog.focus())}}),Re=ml(()=>{if(pe.remove(),In.current==null||In.current(),at.current==null||at.current(),B){var ut;(ut=ge.current)==null||ut.focus==null||ut.focus(V),ge.current=null}});I.useEffect(()=>{!t||!ce||Ee()},[t,ce,Ee]),I.useEffect(()=>{q&&Re()},[q,Re]),jZ(()=>{Re()});const ke=ml(()=>{if(!N||!Me()||!pe.isTopModal())return;const ut=RE(ee?.document);pe.dialog&&ut&&!rN(pe.dialog,ut)&&pe.dialog.focus()}),ze=ml(ut=>{ut.target===ut.currentTarget&&(d?.(ut),c===!0&&A())}),Mt=ml(ut=>{f&&sZ(ut)&&pe.isTopModal()&&(g?.(ut),ut.defaultPrevented||A())}),at=I.useRef(),In=I.useRef(),wi=(...ut)=>{oe(!0),j?.(...ut)};if(!ce)return null;const Gn=Object.assign({role:i,ref:pe.setDialogRef,"aria-modal":i==="dialog"?!0:void 0},qe,{style:o,className:r,tabIndex:-1});let ai=k?k(Gn):O.jsx("div",Object.assign({},Gn,{children:I.cloneElement(l,{role:"document"})}));ai=lN(_,v,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:M,onExiting:U,onExited:wi,onEnter:z,onEntering:P,onEntered:De,children:ai});let sn=null;return c&&(sn=Z({ref:pe.setBackdropRef,onClick:ze}),sn=lN(b,C,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:sn})),O.jsx(O.Fragment,{children:nc.createPortal(O.jsxs(O.Fragment,{children:[sn,ai]}),ce)})});w4.displayName="Modal";const iee=Object.assign(w4,{Manager:Xw});function ree(n,e){return n.classList?n.classList.contains(e):(" "+(n.className.baseVal||n.className)+" ").indexOf(" "+e+" ")!==-1}function see(n,e){n.classList?n.classList.add(e):ree(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function uN(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function oee(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=uN(n.className,e):n.setAttribute("class",uN(n.className&&n.className.baseVal||"",e))}const $u={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class aee extends Xw{adjustAndStore(e,t,i){const r=t.style[e];t.dataset[e]=r,Rl(t,{[e]:`${parseFloat(Rl(t,e))+i}px`})}restore(e,t){const i=t.dataset[e];i!==void 0&&(delete t.dataset[e],Rl(t,{[e]:i}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if(see(t,"modal-open"),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";Ku(t,$u.FIXED_CONTENT).forEach(o=>this.adjustAndStore(i,o,e.scrollBarWidth)),Ku(t,$u.STICKY_CONTENT).forEach(o=>this.adjustAndStore(r,o,-e.scrollBarWidth)),Ku(t,$u.NAVBAR_TOGGLER).forEach(o=>this.adjustAndStore(r,o,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();oee(t,"modal-open");const i=this.isRTL?"paddingLeft":"paddingRight",r=this.isRTL?"marginLeft":"marginRight";Ku(t,$u.FIXED_CONTENT).forEach(o=>this.restore(i,o)),Ku(t,$u.STICKY_CONTENT).forEach(o=>this.restore(r,o)),Ku(t,$u.NAVBAR_TOGGLER).forEach(o=>this.restore(r,o))}}let NE;function lee(n){return NE||(NE=new aee(n)),NE}const C4=I.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},r)=>(e=Sn(e,"modal-body"),O.jsx(t,{ref:r,className:Nt(n,e),...i})));C4.displayName="ModalBody";const A4=I.createContext({onHide(){}}),Jw=I.forwardRef(({bsPrefix:n,className:e,contentClassName:t,centered:i,size:r,fullscreen:o,children:l,scrollable:c,...f},d)=>{n=Sn(n,"modal");const g=`${n}-dialog`,_=typeof o=="string"?`${n}-fullscreen-${o}`:`${n}-fullscreen`;return O.jsx("div",{...f,ref:d,className:Nt(g,e,r&&`${n}-${r}`,i&&`${g}-centered`,c&&`${g}-scrollable`,o&&_),children:O.jsx("div",{className:Nt(`${n}-content`,t),children:l})})});Jw.displayName="ModalDialog";const I4=I.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},r)=>(e=Sn(e,"modal-footer"),O.jsx(t,{ref:r,className:Nt(n,e),...i})));I4.displayName="ModalFooter";const R4=I.forwardRef(({closeLabel:n="Close",closeVariant:e,closeButton:t=!1,onHide:i,children:r,...o},l)=>{const c=I.useContext(A4),f=aS(()=>{c?.onHide(),i?.()});return O.jsxs("div",{ref:l,...o,children:[r,t&&O.jsx(Gw,{"aria-label":n,variant:e,onClick:f})]})});R4.displayName="AbstractModalHeader";const x4=I.forwardRef(({bsPrefix:n,className:e,closeLabel:t="Close",closeButton:i=!1,...r},o)=>(n=Sn(n,"modal-header"),O.jsx(R4,{ref:o,...r,className:Nt(e,n),closeLabel:t,closeButton:i})));x4.displayName="ModalHeader";const uee=pZ("h4"),D4=I.forwardRef(({className:n,bsPrefix:e,as:t=uee,...i},r)=>(e=Sn(e,"modal-title"),O.jsx(t,{ref:r,className:Nt(n,e),...i})));D4.displayName="ModalTitle";function cee(n){return O.jsx(Hw,{...n,timeout:null})}function hee(n){return O.jsx(Hw,{...n,timeout:null})}const N4=I.forwardRef(({bsPrefix:n,className:e,style:t,dialogClassName:i,contentClassName:r,children:o,dialogAs:l=Jw,"data-bs-theme":c,"aria-labelledby":f,"aria-describedby":d,"aria-label":g,show:_=!1,animation:v=!0,backdrop:b=!0,keyboard:C=!0,onEscapeKeyDown:D,onShow:N,onHide:B,container:V,autoFocus:k=!0,enforceFocus:Z=!0,restoreFocus:K=!0,restoreFocusOptions:ie,onEntered:R,onExit:A,onExiting:M,onEnter:j,onEntering:U,onExited:z,backdropClassName:P,manager:De,...qe},ee)=>{const[ce,pe]=I.useState({}),[Me,Ue]=I.useState(!1),q=I.useRef(!1),oe=I.useRef(!1),ge=I.useRef(null),[Ee,Re]=FZ(),ke=h4(ee,Re),ze=aS(B),Mt=KJ();n=Sn(n,"modal");const at=I.useMemo(()=>({onHide:ze}),[ze]);function In(){return De||lee({isRTL:Mt})}function wi(me){if(!ah)return;const He=In().getScrollbarWidth()>0,Xe=me.scrollHeight>A_(me).documentElement.clientHeight;pe({paddingRight:He&&!Xe?oN():void 0,paddingLeft:!He&&Xe?oN():void 0})}const Gn=aS(()=>{Ee&&wi(Ee.dialog)});RZ(()=>{oS(window,"resize",Gn),ge.current==null||ge.current()});const ai=()=>{q.current=!0},sn=me=>{q.current&&Ee&&me.target===Ee.dialog&&(oe.current=!0),q.current=!1},ut=()=>{Ue(!0),ge.current=c4(Ee.dialog,()=>{Ue(!1)})},li=me=>{me.target===me.currentTarget&&ut()},Ci=me=>{if(b==="static"){li(me);return}if(oe.current||me.target!==me.currentTarget){oe.current=!1;return}B?.()},fo=me=>{C?D?.(me):(me.preventDefault(),b==="static"&&ut())},Pt=(me,He)=>{me&&wi(me),j?.(me,He)},L=me=>{ge.current==null||ge.current(),A?.(me)},Y=(me,He)=>{U?.(me,He),u4(window,"resize",Gn)},re=me=>{me&&(me.style.display=""),z?.(me),oS(window,"resize",Gn)},Se=I.useCallback(me=>O.jsx("div",{...me,className:Nt(`${n}-backdrop`,P,!v&&"show")}),[v,P,n]),he={...t,...ce};he.display="block";const fe=me=>O.jsx("div",{role:"dialog",...me,style:he,className:Nt(e,n,Me&&`${n}-static`,!v&&"show"),onClick:b?Ci:void 0,onMouseUp:sn,"data-bs-theme":c,"aria-label":g,"aria-labelledby":f,"aria-describedby":d,children:O.jsx(l,{...qe,onMouseDown:ai,className:i,contentClassName:r,children:o})});return O.jsx(A4.Provider,{value:at,children:O.jsx(iee,{show:_,ref:ke,backdrop:b,container:V,keyboard:!0,autoFocus:k,enforceFocus:Z,restoreFocus:K,restoreFocusOptions:ie,onEscapeKeyDown:fo,onShow:N,onHide:B,onEnter:Pt,onEntering:Y,onEntered:R,onExit:L,onExiting:M,onExited:re,manager:In(),transition:v?cee:void 0,backdropTransition:v?hee:void 0,renderBackdrop:Se,renderDialog:fe})})});N4.displayName="Modal";const Bs=Object.assign(N4,{Body:C4,Header:x4,Title:D4,Footer:I4,Dialog:Jw,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),Zw=I.forwardRef(({bsPrefix:n,className:e,as:t="div",...i},r)=>{const o=Sn(n,"row"),l=o4(),c=a4(),f=`${o}-cols`,d=[];return l.forEach(g=>{const _=i[g];delete i[g];let v;_!=null&&typeof _=="object"?{cols:v}=_:v=_;const b=g!==c?`-${g}`:"";v!=null&&d.push(`${f}${b}-${v}`)}),O.jsx(t,{ref:r,...i,className:Nt(e,o,...d)})});Zw.displayName="Row";const lh=()=>OJ(),fee="_orderContainer_1m8rx_1",dee="_orderContainerCollapse_1m8rx_33",mee="_orderCard_1m8rx_63",pee="_collapse_1m8rx_93",gee="_orderCard__title_1m8rx_133",yee="_orderCard__price_1m8rx_135",_ee="_orderCard__actions_1m8rx_137",vee="_orderCard__products_1m8rx_145",Eee="_orderCard__padding_1m8rx_157",Tee="_orderCard__arrow_1m8rx_165",See="_IoIosArrowForward_1m8rx_189",bee="_orderCard__count_1m8rx_247",wee="_orderCard__label_1m8rx_261",Cee="_orderCard__dateContainer_1m8rx_273",Aee="_orderCard__dayMonth_1m8rx_291",Iee="_orderCard__fullDate_1m8rx_293",Ree="_orderCard__day_1m8rx_291",xee="_orderCard__month_1m8rx_327",Dee="_orderCard__yearDay_1m8rx_329",Nee="_orderCard__monthName_1m8rx_331",Mee="_orderCard__year_1m8rx_329",Pee="_orderCard__separator_1m8rx_341",Oee="_orderCard__deleteBtn_1m8rx_387",Vee="_productsContainer_1m8rx_505",kee="_productCard_1m8rx_531",Lee="_statusIndicator_1m8rx_567",Uee="_statusDot_1m8rx_579",Fee="_available_1m8rx_591",Bee="_notAvailable_1m8rx_599",jee="_productImage_1m8rx_607",zee="_productInfo_1m8rx_627",qee="_productTitle_1m8rx_637",Hee="_productSerial_1m8rx_657",Gee="_productStatus_1m8rx_675",Kee="_statusText_1m8rx_685",$ee="_arrivalDate_1m8rx_711",Wee="_deleteBtn_1m8rx_729",We={orderContainer:fee,orderContainerCollapse:dee,orderCard:mee,collapse:pee,orderCard__title:gee,orderCard__price:yee,orderCard__actions:_ee,orderCard__products:vee,orderCard__padding:Eee,orderCard__arrow:Tee,IoIosArrowForward:See,orderCard__count:bee,orderCard__label:wee,orderCard__dateContainer:Cee,orderCard__dayMonth:Aee,orderCard__fullDate:Iee,orderCard__day:Ree,orderCard__month:xee,orderCard__yearDay:Dee,orderCard__monthName:Nee,orderCard__year:Mee,orderCard__separator:Pee,orderCard__deleteBtn:Oee,productsContainer:Vee,productCard:kee,statusIndicator:Lee,statusDot:Uee,available:Fee,notAvailable:Bee,productImage:jee,productInfo:zee,productTitle:qee,productSerial:Hee,productStatus:Gee,statusText:Kee,arrivalDate:$ee,deleteBtn:Wee};var M4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},cN=Rt.createContext&&Rt.createContext(M4),Yee=["attr","size","title"];function Qee(n,e){if(n==null)return{};var t=Xee(n,e),i,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)i=o[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Xee(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function xy(){return xy=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},xy.apply(this,arguments)}function hN(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Dy(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?hN(Object(t),!0).forEach(function(i){Jee(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):hN(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Jee(n,e,t){return e=Zee(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Zee(n){var e=ete(n,"string");return typeof e=="symbol"?e:e+""}function ete(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function P4(n){return n&&n.map((e,t)=>Rt.createElement(e.tag,Dy({key:t},e.attr),P4(e.child)))}function x_(n){return e=>Rt.createElement(tte,xy({attr:Dy({},n.attr)},e),P4(n.child))}function tte(n){var e=t=>{var{attr:i,size:r,title:o}=n,l=Qee(n,Yee),c=r||t.size||"1em",f;return t.className&&(f=t.className),n.className&&(f=(f?f+" ":"")+n.className),Rt.createElement("svg",xy({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,l,{className:f,style:Dy(Dy({color:n.color||t.color},t.style),n.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),o&&Rt.createElement("title",null,o),n.children)};return cN!==void 0?Rt.createElement(cN.Consumer,null,t=>e(t)):e(M4)}function nte(n){return x_({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M8 6.9834C7.44772 6.9834 7 7.43111 7 7.9834C7 8.53568 7.44772 8.9834 8 8.9834H16C16.5523 8.9834 17 8.53568 17 7.9834C17 7.43111 16.5523 6.9834 16 6.9834H8Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M7 12C7 11.4477 7.44772 11 8 11H16C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13H8C7.44772 13 7 12.5523 7 12Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M8 15.017C7.44772 15.017 7 15.4647 7 16.017C7 16.5693 7.44772 17.017 8 17.017H16C16.5523 17.017 17 16.5693 17 16.017C17 15.4647 16.5523 15.017 16 15.017H8Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12Z",fill:"currentColor"},child:[]}]})(n)}function ite(n){return x_({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"},child:[]}]})(n)}function rte(n){return x_({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(n)}function ste(n){return x_({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z",opacity:".87"},child:[]},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.59-13L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z"},child:[]}]})(n)}const ote="_backdrop_geif5_1",ate="_contained__modal_btn_cancel_geif5_19",lte="_contained__modal_btn_delete_geif5_39",ME={backdrop:ote,contained__modal_btn_cancel:ate,contained__modal_btn_delete:lte},ute=({show:n,onHide:e,orderModelId:t,orderTitle:i})=>{const r=lh();console.log(t);const o=()=>{debugger;t&&(r(fJ(t)),e())};return O.jsxs(O.Fragment,{children:[n&&O.jsx("div",{className:ME.backdrop,onClick:e}),O.jsxs(Bs,{backdrop:!1,show:n,onHide:e,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[O.jsx(Bs.Header,{closeButton:!0,children:O.jsx(Bs.Title,{id:"contained-modal-title-vcenter",children:"Вы уверены, что хотите удалить этот приход?"})}),O.jsx(Bs.Body,{children:O.jsx("p",{children:i})}),O.jsxs(Bs.Footer,{style:{background:"#0db561"},children:[O.jsx(Ay,{className:ME.contained__modal_btn_cancel,onClick:e,children:"Отмена"}),O.jsx(Ay,{className:ME.contained__modal_btn_delete,onClick:()=>{o()},children:O.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[O.jsx(rte,{size:19.5}),"Удалить"]})})]})]})]})},cte="_customButton_1qdhy_1",hte="_customButton__icon_1qdhy_189",Sf={customButton:cte,"customButton--small":"_customButton--small_1qdhy_45","customButton--medium":"_customButton--medium_1qdhy_57","customButton--large":"_customButton--large_1qdhy_73","customButton--primary":"_customButton--primary_1qdhy_85","customButton--disabled":"_customButton--disabled_1qdhy_95","customButton--secondary":"_customButton--secondary_1qdhy_105","customButton--danger":"_customButton--danger_1qdhy_125","customButton--ghost":"_customButton--ghost_1qdhy_145",customButton__icon:hte},O4=({children:n,onClick:e,variant:t="primary",size:i="medium",disabled:r=!1,type:o="button",className:l="",icon:c})=>{const f=`${Sf.customButton} ${Sf[`customButton--${t}`]} ${Sf[`customButton--${i}`]} ${r?Sf["customButton--disabled"]:""} ${l}`;return O.jsxs("button",{type:o,className:f,onClick:e,disabled:r,children:[c&&O.jsx("span",{className:Sf.customButton__icon,children:c}),n]})},fte=()=>{const n=lh(),e=Ec(i4),t=Ec(FJ),[i,r]=I.useState(!1),[o,l]=I.useState(!1),[c,f]=I.useState(null);I.useEffect(()=>{n(t4())},[n]);const d=b=>{f(b),l(!0)},g=()=>{const b={serialNumber:123459,isNew:1,photo:"https://baproar.vtexassets.com/arquivos/ids/2069005/image-928323e59f2040b0b9d00210d52a6b6b.jpg?v=638932927540630000",title:"Barcelona",type:"Table",specification:"Specs here",guarantee:{start:"2025-01-01",end:"2026-01-01"},price:[{value:100,symbol:"USD",isDefault:1}],order:c??"",date:new Date().toISOString(),name:"Кто-то",status:!0};n(aJ(b))},_=b=>{n(n4(b))},v=e.find(b=>b.id===c);return O.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[O.jsx("div",{className:o?We.orderContainerCollapse:We.orderContainer,children:e.map(b=>{const C=t[b.id]||[],D=new Date(b.date),N=C.reduce((B,V)=>{const k=V.price.find(Z=>Z.isDefault===1);return B+(k?.value||0)},0);return O.jsxs("div",{className:o?We.collapse:We.orderCard,onClick:()=>f(b.id),children:[O.jsx("div",{className:We.orderCard__title,children:b.title}),O.jsxs("div",{className:We.orderCard__products,children:[O.jsx(nte,{size:60,color:"#6c757d",onClick:()=>d(b.id)}),O.jsxs("div",{className:We.orderCard__count,children:[O.jsx("span",{style:{fontWeight:"bold",color:"#505050"},children:C.length}),O.jsx("div",{className:We.orderCard__label,children:"Продукта"})]})]}),O.jsxs("div",{className:We.orderCard__dateContainer,children:[O.jsxs("div",{className:We.orderCard__dayMonth,children:[O.jsx("span",{className:We.orderCard__day,children:D.getDate().toString().padStart(2,"0")}),O.jsx("span",{className:We.orderCard__separator,children:"/"}),O.jsx("span",{className:We.orderCard__month,children:D.getMonth()+1})]}),O.jsxs("div",{className:We.orderCard__fullDate,children:[O.jsx("span",{className:We.orderCard__yearDay,children:D.getDate().toString().padStart(2,"0")}),O.jsx("span",{className:We.orderCard__separator,children:"/"}),O.jsx("span",{className:We.orderCard__monthName,children:D.toLocaleDateString("ru-RU",{month:"short"})}),O.jsx("span",{className:We.orderCard__separator,children:"/"}),O.jsx("span",{className:We.orderCard__year,children:D.getFullYear()})]})]}),O.jsx("div",{className:We.orderCard__price,children:O.jsxs("div",{style:{fontSize:"12px",color:"#6c757d"},children:[N," $"]})}),b.id===c?O.jsx("div",{className:We.orderCard__arrow,children:O.jsx(ite,{color:"#fff",className:We.IoIosArrowForward})}):o&&c!==b.id&&O.jsx("div",{className:We.orderCard__padding,children:O.jsx("br",{})}),O.jsx("div",{className:We.orderCard__actions,children:O.jsx("button",{className:We.orderCard__deleteBtn,onClick:B=>{B.stopPropagation(),f(b.id),r(!0)},children:"🗑️"})})]},b.id)})}),v&&O.jsx(ute,{show:i,onHide:()=>r(!1),orderModelId:v.id,orderTitle:v.title}),o&&v&&O.jsxs("div",{style:{background:"#fff",width:"78%",marginTop:"77px",marginRight:"2.5%",border:"1px solid #acacac",position:"relative",borderRadius:"8px"},children:[O.jsx("div",{style:{position:"absolute",right:0,padding:0,height:"30px"},children:O.jsx(ste,{style:{marginBottom:"25px",cursor:"pointer"},color:"#acacac",onClick:()=>l(!1)})}),O.jsxs("div",{style:{padding:"25px"},children:[O.jsx("h3",{children:v.title}),O.jsxs("div",{children:[O.jsx(O4,{size:"small",onClick:g,variant:"primary",children:"+"}),O.jsx("span",{style:{padding:"10px",color:"#0db561",fontSize:"20px",fontWeight:"500"},children:"Добавить продукт"})]})]}),O.jsx("div",{className:We.productsContainer,children:t[v.id]?.map(b=>O.jsxs("div",{className:We.productCard,children:[O.jsx("div",{className:We.statusIndicator,children:O.jsx("div",{className:`${We.statusDot} ${b.status?We.available:We.notAvailable}`})}),O.jsx("div",{className:We.productImage,children:O.jsx("img",{src:b.photo,alt:b.title,width:60,height:60})}),O.jsxs("div",{className:We.productInfo,children:[O.jsx("div",{className:We.productTitle,children:b.title}),O.jsx("div",{className:We.productSerial,children:b.serialNumber})]}),O.jsx("div",{className:We.productStatus,children:O.jsx("span",{className:`${We.statusText} ${b.status?We.available:We.notAvailable}`,children:b.status?"Свободен":"В ремонте"})}),O.jsx("div",{className:We.arrivalDate,children:O.jsx("button",{className:We.deleteBtn,onClick:()=>_(b.id),children:"🗑️"})})]},b.id))})]})]})};var um=n=>n.type==="checkbox",El=n=>n instanceof Date,_i=n=>n==null;const V4=n=>typeof n=="object";var En=n=>!_i(n)&&!Array.isArray(n)&&V4(n)&&!El(n),dte=n=>En(n)&&n.target?um(n.target)?n.target.checked:n.target.value:n,mte=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,pte=(n,e)=>n.has(mte(e)),gte=n=>{const e=n.constructor&&n.constructor.prototype;return En(e)&&e.hasOwnProperty("isPrototypeOf")},e1=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Nn(n){let e;const t=Array.isArray(n),i=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)e=new Date(n);else if(!(e1&&(n instanceof Blob||i))&&(t||En(n)))if(e=t?[]:Object.create(Object.getPrototypeOf(n)),!t&&!gte(n))e=n;else for(const r in n)n.hasOwnProperty(r)&&(e[r]=Nn(n[r]));else return n;return e}var D_=n=>/^\w*$/.test(n),nn=n=>n===void 0,t1=n=>Array.isArray(n)?n.filter(Boolean):[],n1=n=>t1(n.replace(/["|']|\]/g,"").split(/\.|\[/)),Ae=(n,e,t)=>{if(!e||!En(n))return t;const i=(D_(e)?[e]:n1(e)).reduce((r,o)=>_i(r)?r:r[o],n);return nn(i)||i===n?nn(n[e])?t:n[e]:i},rs=n=>typeof n=="boolean",Bt=(n,e,t)=>{let i=-1;const r=D_(e)?[e]:n1(e),o=r.length,l=o-1;for(;++i<o;){const c=r[i];let f=t;if(i!==l){const d=n[c];f=En(d)||Array.isArray(d)?d:isNaN(+r[i+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;n[c]=f,n=n[c]}};const fN={BLUR:"blur",FOCUS_OUT:"focusout"},Rr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Us={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},yte=Rt.createContext(null);yte.displayName="HookFormContext";var _te=(n,e,t,i=!0)=>{const r={defaultValues:e._defaultValues};for(const o in n)Object.defineProperty(r,o,{get:()=>{const l=o;return e._proxyFormState[l]!==Rr.all&&(e._proxyFormState[l]=!i||Rr.all),n[l]}});return r};const vte=typeof window<"u"?Rt.useLayoutEffect:Rt.useEffect;var Fi=n=>typeof n=="string",Ete=(n,e,t,i,r)=>Fi(n)?(i&&e.watch.add(n),Ae(t,n,r)):Array.isArray(n)?n.map(o=>(i&&e.watch.add(o),Ae(t,o))):(i&&(e.watchAll=!0),t),lS=n=>_i(n)||!V4(n);function na(n,e,t=new WeakSet){if(lS(n)||lS(e))return n===e;if(El(n)&&El(e))return n.getTime()===e.getTime();const i=Object.keys(n),r=Object.keys(e);if(i.length!==r.length)return!1;if(t.has(n)||t.has(e))return!0;t.add(n),t.add(e);for(const o of i){const l=n[o];if(!r.includes(o))return!1;if(o!=="ref"){const c=e[o];if(El(l)&&El(c)||En(l)&&En(c)||Array.isArray(l)&&Array.isArray(c)?!na(l,c,t):l!==c)return!1}}return!0}var Tte=(n,e,t,i,r)=>e?{...t[n],types:{...t[n]&&t[n].types?t[n].types:{},[i]:r||!0}}:{},ed=n=>Array.isArray(n)?n:[n],dN=()=>{let n=[];return{get observers(){return n},next:r=>{for(const o of n)o.next&&o.next(r)},subscribe:r=>(n.push(r),{unsubscribe:()=>{n=n.filter(o=>o!==r)}}),unsubscribe:()=>{n=[]}}};function k4(n,e){const t={};for(const i in n)if(n.hasOwnProperty(i)){const r=n[i],o=e[i];if(r&&En(r)&&o){const l=k4(r,o);En(l)&&(t[i]=l)}else n[i]&&(t[i]=o)}return t}var yi=n=>En(n)&&!Object.keys(n).length,i1=n=>n.type==="file",xr=n=>typeof n=="function",Ny=n=>{if(!e1)return!1;const e=n?n.ownerDocument:0;return n instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},L4=n=>n.type==="select-multiple",r1=n=>n.type==="radio",Ste=n=>r1(n)||um(n),PE=n=>Ny(n)&&n.isConnected;function bte(n,e){const t=e.slice(0,-1).length;let i=0;for(;i<t;)n=nn(n)?i++:n[e[i++]];return n}function wte(n){for(const e in n)if(n.hasOwnProperty(e)&&!nn(n[e]))return!1;return!0}function mn(n,e){const t=Array.isArray(e)?e:D_(e)?[e]:n1(e),i=t.length===1?n:bte(n,t),r=t.length-1,o=t[r];return i&&delete i[o],r!==0&&(En(i)&&yi(i)||Array.isArray(i)&&wte(i))&&mn(n,t.slice(0,-1)),n}var Cte=n=>{for(const e in n)if(xr(n[e]))return!0;return!1};function U4(n){return Array.isArray(n)||En(n)&&!Cte(n)}function uS(n,e={}){for(const t in n)U4(n[t])?(e[t]=Array.isArray(n[t])?[]:{},uS(n[t],e[t])):nn(n[t])||(e[t]=!0);return e}function tc(n,e,t){t||(t=uS(e));for(const i in n)U4(n[i])?nn(e)||lS(t[i])?t[i]=uS(n[i],Array.isArray(n[i])?[]:{}):tc(n[i],_i(e)?{}:e[i],t[i]):t[i]=!na(n[i],e[i]);return t}const mN={value:!1,isValid:!1},pN={value:!0,isValid:!0};var F4=n=>{if(Array.isArray(n)){if(n.length>1){const e=n.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!nn(n[0].attributes.value)?nn(n[0].value)||n[0].value===""?pN:{value:n[0].value,isValid:!0}:pN:mN}return mN},B4=(n,{valueAsNumber:e,valueAsDate:t,setValueAs:i})=>nn(n)?n:e?n===""?NaN:n&&+n:t&&Fi(n)?new Date(n):i?i(n):n;const gN={isValid:!1,value:null};var j4=n=>Array.isArray(n)?n.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,gN):gN;function yN(n){const e=n.ref;return i1(e)?e.files:r1(e)?j4(n.refs).value:L4(e)?[...e.selectedOptions].map(({value:t})=>t):um(e)?F4(n.refs).value:B4(nn(e.value)?n.ref.value:e.value,n)}var Ate=(n,e,t,i)=>{const r={};for(const o of n){const l=Ae(e,o);l&&Bt(r,o,l._f)}return{criteriaMode:t,names:[...n],fields:r,shouldUseNativeValidation:i}},My=n=>n instanceof RegExp,bf=n=>nn(n)?n:My(n)?n.source:En(n)?My(n.value)?n.value.source:n.value:n,_N=n=>({isOnSubmit:!n||n===Rr.onSubmit,isOnBlur:n===Rr.onBlur,isOnChange:n===Rr.onChange,isOnAll:n===Rr.all,isOnTouch:n===Rr.onTouched});const vN="AsyncFunction";var Ite=n=>!!n&&!!n.validate&&!!(xr(n.validate)&&n.validate.constructor.name===vN||En(n.validate)&&Object.values(n.validate).find(e=>e.constructor.name===vN)),Rte=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),EN=(n,e,t)=>!t&&(e.watchAll||e.watch.has(n)||[...e.watch].some(i=>n.startsWith(i)&&/^\.\w+/.test(n.slice(i.length))));const td=(n,e,t,i)=>{for(const r of t||Object.keys(n)){const o=Ae(n,r);if(o){const{_f:l,...c}=o;if(l){if(l.refs&&l.refs[0]&&e(l.refs[0],r)&&!i)return!0;if(l.ref&&e(l.ref,l.name)&&!i)return!0;if(td(c,e))break}else if(En(c)&&td(c,e))break}}};function TN(n,e,t){const i=Ae(n,t);if(i||D_(t))return{error:i,name:t};const r=t.split(".");for(;r.length;){const o=r.join("."),l=Ae(e,o),c=Ae(n,o);if(l&&!Array.isArray(l)&&t!==o)return{name:t};if(c&&c.type)return{name:o,error:c};if(c&&c.root&&c.root.type)return{name:`${o}.root`,error:c.root};r.pop()}return{name:t}}var xte=(n,e,t,i)=>{t(n);const{name:r,...o}=n;return yi(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(l=>e[l]===(!i||Rr.all))},Dte=(n,e,t)=>!n||!e||n===e||ed(n).some(i=>i&&(t?i===e:i.startsWith(e)||e.startsWith(i))),Nte=(n,e,t,i,r)=>r.isOnAll?!1:!t&&r.isOnTouch?!(e||n):(t?i.isOnBlur:r.isOnBlur)?!n:(t?i.isOnChange:r.isOnChange)?n:!0,Mte=(n,e)=>!t1(Ae(n,e)).length&&mn(n,e),Pte=(n,e,t)=>{const i=ed(Ae(n,t));return Bt(i,"root",e[t]),Bt(n,t,i),n};function SN(n,e,t="validate"){if(Fi(n)||Array.isArray(n)&&n.every(Fi)||rs(n)&&!n)return{type:t,message:Fi(n)?n:"",ref:e}}var Wu=n=>En(n)&&!My(n)?n:{value:n,message:""},bN=async(n,e,t,i,r,o)=>{const{ref:l,refs:c,required:f,maxLength:d,minLength:g,min:_,max:v,pattern:b,validate:C,name:D,valueAsNumber:N,mount:B}=n._f,V=Ae(t,D);if(!B||e.has(D))return{};const k=c?c[0]:l,Z=z=>{r&&k.reportValidity&&(k.setCustomValidity(rs(z)?"":z||""),k.reportValidity())},K={},ie=r1(l),R=um(l),A=ie||R,M=(N||i1(l))&&nn(l.value)&&nn(V)||Ny(l)&&l.value===""||V===""||Array.isArray(V)&&!V.length,j=Tte.bind(null,D,i,K),U=(z,P,De,qe=Us.maxLength,ee=Us.minLength)=>{const ce=z?P:De;K[D]={type:z?qe:ee,message:ce,ref:l,...j(z?qe:ee,ce)}};if(o?!Array.isArray(V)||!V.length:f&&(!A&&(M||_i(V))||rs(V)&&!V||R&&!F4(c).isValid||ie&&!j4(c).isValid)){const{value:z,message:P}=Fi(f)?{value:!!f,message:f}:Wu(f);if(z&&(K[D]={type:Us.required,message:P,ref:k,...j(Us.required,P)},!i))return Z(P),K}if(!M&&(!_i(_)||!_i(v))){let z,P;const De=Wu(v),qe=Wu(_);if(!_i(V)&&!isNaN(V)){const ee=l.valueAsNumber||V&&+V;_i(De.value)||(z=ee>De.value),_i(qe.value)||(P=ee<qe.value)}else{const ee=l.valueAsDate||new Date(V),ce=Ue=>new Date(new Date().toDateString()+" "+Ue),pe=l.type=="time",Me=l.type=="week";Fi(De.value)&&V&&(z=pe?ce(V)>ce(De.value):Me?V>De.value:ee>new Date(De.value)),Fi(qe.value)&&V&&(P=pe?ce(V)<ce(qe.value):Me?V<qe.value:ee<new Date(qe.value))}if((z||P)&&(U(!!z,De.message,qe.message,Us.max,Us.min),!i))return Z(K[D].message),K}if((d||g)&&!M&&(Fi(V)||o&&Array.isArray(V))){const z=Wu(d),P=Wu(g),De=!_i(z.value)&&V.length>+z.value,qe=!_i(P.value)&&V.length<+P.value;if((De||qe)&&(U(De,z.message,P.message),!i))return Z(K[D].message),K}if(b&&!M&&Fi(V)){const{value:z,message:P}=Wu(b);if(My(z)&&!V.match(z)&&(K[D]={type:Us.pattern,message:P,ref:l,...j(Us.pattern,P)},!i))return Z(P),K}if(C){if(xr(C)){const z=await C(V,t),P=SN(z,k);if(P&&(K[D]={...P,...j(Us.validate,P.message)},!i))return Z(P.message),K}else if(En(C)){let z={};for(const P in C){if(!yi(z)&&!i)break;const De=SN(await C[P](V,t),k,P);De&&(z={...De,...j(P,De.message)},Z(De.message),i&&(K[D]=z))}if(!yi(z)&&(K[D]={ref:k,...z},!i))return K}}return Z(!0),K};const Ote={mode:Rr.onSubmit,reValidateMode:Rr.onChange,shouldFocusError:!0};function Vte(n={}){let e={...Ote,...n},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:xr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},i={},r=En(e.defaultValues)||En(e.values)?Nn(e.defaultValues||e.values)||{}:{},o=e.shouldUnregister?{}:Nn(r),l={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},f,d=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let _={...g};const v={array:dN(),state:dN()},b=e.criteriaMode===Rr.all,C=L=>Y=>{clearTimeout(d),d=setTimeout(L,Y)},D=async L=>{if(!e.disabled&&(g.isValid||_.isValid||L)){const Y=e.resolver?yi((await R()).errors):await M(i,!0);Y!==t.isValid&&v.state.next({isValid:Y})}},N=(L,Y)=>{!e.disabled&&(g.isValidating||g.validatingFields||_.isValidating||_.validatingFields)&&((L||Array.from(c.mount)).forEach(re=>{re&&(Y?Bt(t.validatingFields,re,Y):mn(t.validatingFields,re))}),v.state.next({validatingFields:t.validatingFields,isValidating:!yi(t.validatingFields)}))},B=(L,Y=[],re,Se,he=!0,fe=!0)=>{if(Se&&re&&!e.disabled){if(l.action=!0,fe&&Array.isArray(Ae(i,L))){const me=re(Ae(i,L),Se.argA,Se.argB);he&&Bt(i,L,me)}if(fe&&Array.isArray(Ae(t.errors,L))){const me=re(Ae(t.errors,L),Se.argA,Se.argB);he&&Bt(t.errors,L,me),Mte(t.errors,L)}if((g.touchedFields||_.touchedFields)&&fe&&Array.isArray(Ae(t.touchedFields,L))){const me=re(Ae(t.touchedFields,L),Se.argA,Se.argB);he&&Bt(t.touchedFields,L,me)}(g.dirtyFields||_.dirtyFields)&&(t.dirtyFields=tc(r,o)),v.state.next({name:L,isDirty:U(L,Y),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else Bt(o,L,Y)},V=(L,Y)=>{Bt(t.errors,L,Y),v.state.next({errors:t.errors})},k=L=>{t.errors=L,v.state.next({errors:t.errors,isValid:!1})},Z=(L,Y,re,Se)=>{const he=Ae(i,L);if(he){const fe=Ae(o,L,nn(re)?Ae(r,L):re);nn(fe)||Se&&Se.defaultChecked||Y?Bt(o,L,Y?fe:yN(he._f)):De(L,fe),l.mount&&D()}},K=(L,Y,re,Se,he)=>{let fe=!1,me=!1;const He={name:L};if(!e.disabled){if(!re||Se){(g.isDirty||_.isDirty)&&(me=t.isDirty,t.isDirty=He.isDirty=U(),fe=me!==He.isDirty);const Xe=na(Ae(r,L),Y);me=!!Ae(t.dirtyFields,L),Xe?mn(t.dirtyFields,L):Bt(t.dirtyFields,L,!0),He.dirtyFields=t.dirtyFields,fe=fe||(g.dirtyFields||_.dirtyFields)&&me!==!Xe}if(re){const Xe=Ae(t.touchedFields,L);Xe||(Bt(t.touchedFields,L,re),He.touchedFields=t.touchedFields,fe=fe||(g.touchedFields||_.touchedFields)&&Xe!==re)}fe&&he&&v.state.next(He)}return fe?He:{}},ie=(L,Y,re,Se)=>{const he=Ae(t.errors,L),fe=(g.isValid||_.isValid)&&rs(Y)&&t.isValid!==Y;if(e.delayError&&re?(f=C(()=>V(L,re)),f(e.delayError)):(clearTimeout(d),f=null,re?Bt(t.errors,L,re):mn(t.errors,L)),(re?!na(he,re):he)||!yi(Se)||fe){const me={...Se,...fe&&rs(Y)?{isValid:Y}:{},errors:t.errors,name:L};t={...t,...me},v.state.next(me)}},R=async L=>{N(L,!0);const Y=await e.resolver(o,e.context,Ate(L||c.mount,i,e.criteriaMode,e.shouldUseNativeValidation));return N(L),Y},A=async L=>{const{errors:Y}=await R(L);if(L)for(const re of L){const Se=Ae(Y,re);Se?Bt(t.errors,re,Se):mn(t.errors,re)}else t.errors=Y;return Y},M=async(L,Y,re={valid:!0})=>{for(const Se in L){const he=L[Se];if(he){const{_f:fe,...me}=he;if(fe){const He=c.array.has(fe.name),Xe=he._f&&Ite(he._f);Xe&&g.validatingFields&&N([fe.name],!0);const Kn=await bN(he,c.disabled,o,b,e.shouldUseNativeValidation&&!Y,He);if(Xe&&g.validatingFields&&N([fe.name]),Kn[fe.name]&&(re.valid=!1,Y))break;!Y&&(Ae(Kn,fe.name)?He?Pte(t.errors,Kn,fe.name):Bt(t.errors,fe.name,Kn[fe.name]):mn(t.errors,fe.name))}!yi(me)&&await M(me,Y,re)}}return re.valid},j=()=>{for(const L of c.unMount){const Y=Ae(i,L);Y&&(Y._f.refs?Y._f.refs.every(re=>!PE(re)):!PE(Y._f.ref))&&ze(L)}c.unMount=new Set},U=(L,Y)=>!e.disabled&&(L&&Y&&Bt(o,L,Y),!na(Ue(),r)),z=(L,Y,re)=>Ete(L,c,{...l.mount?o:nn(Y)?r:Fi(L)?{[L]:Y}:Y},re,Y),P=L=>t1(Ae(l.mount?o:r,L,e.shouldUnregister?Ae(r,L,[]):[])),De=(L,Y,re={})=>{const Se=Ae(i,L);let he=Y;if(Se){const fe=Se._f;fe&&(!fe.disabled&&Bt(o,L,B4(Y,fe)),he=Ny(fe.ref)&&_i(Y)?"":Y,L4(fe.ref)?[...fe.ref.options].forEach(me=>me.selected=he.includes(me.value)):fe.refs?um(fe.ref)?fe.refs.forEach(me=>{(!me.defaultChecked||!me.disabled)&&(Array.isArray(he)?me.checked=!!he.find(He=>He===me.value):me.checked=he===me.value||!!he)}):fe.refs.forEach(me=>me.checked=me.value===he):i1(fe.ref)?fe.ref.value="":(fe.ref.value=he,fe.ref.type||v.state.next({name:L,values:Nn(o)})))}(re.shouldDirty||re.shouldTouch)&&K(L,he,re.shouldTouch,re.shouldDirty,!0),re.shouldValidate&&Me(L)},qe=(L,Y,re)=>{for(const Se in Y){if(!Y.hasOwnProperty(Se))return;const he=Y[Se],fe=L+"."+Se,me=Ae(i,fe);(c.array.has(L)||En(he)||me&&!me._f)&&!El(he)?qe(fe,he,re):De(fe,he,re)}},ee=(L,Y,re={})=>{const Se=Ae(i,L),he=c.array.has(L),fe=Nn(Y);Bt(o,L,fe),he?(v.array.next({name:L,values:Nn(o)}),(g.isDirty||g.dirtyFields||_.isDirty||_.dirtyFields)&&re.shouldDirty&&v.state.next({name:L,dirtyFields:tc(r,o),isDirty:U(L,fe)})):Se&&!Se._f&&!_i(fe)?qe(L,fe,re):De(L,fe,re),EN(L,c)&&v.state.next({...t,name:L}),v.state.next({name:l.mount?L:void 0,values:Nn(o)})},ce=async L=>{l.mount=!0;const Y=L.target;let re=Y.name,Se=!0;const he=Ae(i,re),fe=Xe=>{Se=Number.isNaN(Xe)||El(Xe)&&isNaN(Xe.getTime())||na(Xe,Ae(o,re,Xe))},me=_N(e.mode),He=_N(e.reValidateMode);if(he){let Xe,Kn;const ys=Y.type?yN(he._f):dte(L),Ai=L.type===fN.BLUR||L.type===fN.FOCUS_OUT,Ql=!Rte(he._f)&&!e.resolver&&!Ae(t.errors,re)&&!he._f.deps||Nte(Ai,Ae(t.touchedFields,re),t.isSubmitted,He,me),Zn=EN(re,c,Ai);Bt(o,re,ys),Ai?(!Y||!Y.readOnly)&&(he._f.onBlur&&he._f.onBlur(L),f&&f(0)):he._f.onChange&&he._f.onChange(L);const Xt=K(re,ys,Ai),ui=!yi(Xt)||Zn;if(!Ai&&v.state.next({name:re,type:L.type,values:Nn(o)}),Ql)return(g.isValid||_.isValid)&&(e.mode==="onBlur"?Ai&&D():Ai||D()),ui&&v.state.next({name:re,...Zn?{}:Xt});if(!Ai&&Zn&&v.state.next({...t}),e.resolver){const{errors:Lt}=await R([re]);if(fe(ys),Se){const Xl=TN(t.errors,i,re),_s=TN(Lt,i,Xl.name||re);Xe=_s.error,re=_s.name,Kn=yi(Lt)}}else N([re],!0),Xe=(await bN(he,c.disabled,o,b,e.shouldUseNativeValidation))[re],N([re]),fe(ys),Se&&(Xe?Kn=!1:(g.isValid||_.isValid)&&(Kn=await M(i,!0)));Se&&(he._f.deps&&(!Array.isArray(he._f.deps)||he._f.deps.length>0)&&Me(he._f.deps),ie(re,Kn,Xe,Xt))}},pe=(L,Y)=>{if(Ae(t.errors,Y)&&L.focus)return L.focus(),1},Me=async(L,Y={})=>{let re,Se;const he=ed(L);if(e.resolver){const fe=await A(nn(L)?L:he);re=yi(fe),Se=L?!he.some(me=>Ae(fe,me)):re}else L?(Se=(await Promise.all(he.map(async fe=>{const me=Ae(i,fe);return await M(me&&me._f?{[fe]:me}:me)}))).every(Boolean),!(!Se&&!t.isValid)&&D()):Se=re=await M(i);return v.state.next({...!Fi(L)||(g.isValid||_.isValid)&&re!==t.isValid?{}:{name:L},...e.resolver||!L?{isValid:re}:{},errors:t.errors}),Y.shouldFocus&&!Se&&td(i,pe,L?he:c.mount),Se},Ue=(L,Y)=>{let re={...l.mount?o:r};return Y&&(re=k4(Y.dirtyFields?t.dirtyFields:t.touchedFields,re)),nn(L)?re:Fi(L)?Ae(re,L):L.map(Se=>Ae(re,Se))},q=(L,Y)=>({invalid:!!Ae((Y||t).errors,L),isDirty:!!Ae((Y||t).dirtyFields,L),error:Ae((Y||t).errors,L),isValidating:!!Ae(t.validatingFields,L),isTouched:!!Ae((Y||t).touchedFields,L)}),oe=L=>{L&&ed(L).forEach(Y=>mn(t.errors,Y)),v.state.next({errors:L?t.errors:{}})},ge=(L,Y,re)=>{const Se=(Ae(i,L,{_f:{}})._f||{}).ref,he=Ae(t.errors,L)||{},{ref:fe,message:me,type:He,...Xe}=he;Bt(t.errors,L,{...Xe,...Y,ref:Se}),v.state.next({name:L,errors:t.errors,isValid:!1}),re&&re.shouldFocus&&Se&&Se.focus&&Se.focus()},Ee=(L,Y)=>xr(L)?v.state.subscribe({next:re=>"values"in re&&L(z(void 0,Y),re)}):z(L,Y,!0),Re=L=>v.state.subscribe({next:Y=>{Dte(L.name,Y.name,L.exact)&&xte(Y,L.formState||g,Ci,L.reRenderRoot)&&L.callback({values:{...o},...t,...Y,defaultValues:r})}}).unsubscribe,ke=L=>(l.mount=!0,_={..._,...L.formState},Re({...L,formState:_})),ze=(L,Y={})=>{for(const re of L?ed(L):c.mount)c.mount.delete(re),c.array.delete(re),Y.keepValue||(mn(i,re),mn(o,re)),!Y.keepError&&mn(t.errors,re),!Y.keepDirty&&mn(t.dirtyFields,re),!Y.keepTouched&&mn(t.touchedFields,re),!Y.keepIsValidating&&mn(t.validatingFields,re),!e.shouldUnregister&&!Y.keepDefaultValue&&mn(r,re);v.state.next({values:Nn(o)}),v.state.next({...t,...Y.keepDirty?{isDirty:U()}:{}}),!Y.keepIsValid&&D()},Mt=({disabled:L,name:Y})=>{(rs(L)&&l.mount||L||c.disabled.has(Y))&&(L?c.disabled.add(Y):c.disabled.delete(Y))},at=(L,Y={})=>{let re=Ae(i,L);const Se=rs(Y.disabled)||rs(e.disabled);return Bt(i,L,{...re||{},_f:{...re&&re._f?re._f:{ref:{name:L}},name:L,mount:!0,...Y}}),c.mount.add(L),re?Mt({disabled:rs(Y.disabled)?Y.disabled:e.disabled,name:L}):Z(L,!0,Y.value),{...Se?{disabled:Y.disabled||e.disabled}:{},...e.progressive?{required:!!Y.required,min:bf(Y.min),max:bf(Y.max),minLength:bf(Y.minLength),maxLength:bf(Y.maxLength),pattern:bf(Y.pattern)}:{},name:L,onChange:ce,onBlur:ce,ref:he=>{if(he){at(L,Y),re=Ae(i,L);const fe=nn(he.value)&&he.querySelectorAll&&he.querySelectorAll("input,select,textarea")[0]||he,me=Ste(fe),He=re._f.refs||[];if(me?He.find(Xe=>Xe===fe):fe===re._f.ref)return;Bt(i,L,{_f:{...re._f,...me?{refs:[...He.filter(PE),fe,...Array.isArray(Ae(r,L))?[{}]:[]],ref:{type:fe.type,name:L}}:{ref:fe}}}),Z(L,!1,void 0,fe)}else re=Ae(i,L,{}),re._f&&(re._f.mount=!1),(e.shouldUnregister||Y.shouldUnregister)&&!(pte(c.array,L)&&l.action)&&c.unMount.add(L)}}},In=()=>e.shouldFocusError&&td(i,pe,c.mount),wi=L=>{rs(L)&&(v.state.next({disabled:L}),td(i,(Y,re)=>{const Se=Ae(i,re);Se&&(Y.disabled=Se._f.disabled||L,Array.isArray(Se._f.refs)&&Se._f.refs.forEach(he=>{he.disabled=Se._f.disabled||L}))},0,!1))},Gn=(L,Y)=>async re=>{let Se;re&&(re.preventDefault&&re.preventDefault(),re.persist&&re.persist());let he=Nn(o);if(v.state.next({isSubmitting:!0}),e.resolver){const{errors:fe,values:me}=await R();t.errors=fe,he=Nn(me)}else await M(i);if(c.disabled.size)for(const fe of c.disabled)mn(he,fe);if(mn(t.errors,"root"),yi(t.errors)){v.state.next({errors:{}});try{await L(he,re)}catch(fe){Se=fe}}else Y&&await Y({...t.errors},re),In(),setTimeout(In);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:yi(t.errors)&&!Se,submitCount:t.submitCount+1,errors:t.errors}),Se)throw Se},ai=(L,Y={})=>{Ae(i,L)&&(nn(Y.defaultValue)?ee(L,Nn(Ae(r,L))):(ee(L,Y.defaultValue),Bt(r,L,Nn(Y.defaultValue))),Y.keepTouched||mn(t.touchedFields,L),Y.keepDirty||(mn(t.dirtyFields,L),t.isDirty=Y.defaultValue?U(L,Nn(Ae(r,L))):U()),Y.keepError||(mn(t.errors,L),g.isValid&&D()),v.state.next({...t}))},sn=(L,Y={})=>{const re=L?Nn(L):r,Se=Nn(re),he=yi(L),fe=he?r:Se;if(Y.keepDefaultValues||(r=re),!Y.keepValues){if(Y.keepDirtyValues){const me=new Set([...c.mount,...Object.keys(tc(r,o))]);for(const He of Array.from(me))Ae(t.dirtyFields,He)?Bt(fe,He,Ae(o,He)):ee(He,Ae(fe,He))}else{if(e1&&nn(L))for(const me of c.mount){const He=Ae(i,me);if(He&&He._f){const Xe=Array.isArray(He._f.refs)?He._f.refs[0]:He._f.ref;if(Ny(Xe)){const Kn=Xe.closest("form");if(Kn){Kn.reset();break}}}}if(Y.keepFieldsRef)for(const me of c.mount)ee(me,Ae(fe,me));else i={}}o=e.shouldUnregister?Y.keepDefaultValues?Nn(r):{}:Nn(fe),v.array.next({values:{...fe}}),v.state.next({values:{...fe}})}c={mount:Y.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!g.isValid||!!Y.keepIsValid||!!Y.keepDirtyValues,l.watch=!!e.shouldUnregister,v.state.next({submitCount:Y.keepSubmitCount?t.submitCount:0,isDirty:he?!1:Y.keepDirty?t.isDirty:!!(Y.keepDefaultValues&&!na(L,r)),isSubmitted:Y.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:he?{}:Y.keepDirtyValues?Y.keepDefaultValues&&o?tc(r,o):t.dirtyFields:Y.keepDefaultValues&&L?tc(r,L):Y.keepDirty?t.dirtyFields:{},touchedFields:Y.keepTouched?t.touchedFields:{},errors:Y.keepErrors?t.errors:{},isSubmitSuccessful:Y.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:r})},ut=(L,Y)=>sn(xr(L)?L(o):L,Y),li=(L,Y={})=>{const re=Ae(i,L),Se=re&&re._f;if(Se){const he=Se.refs?Se.refs[0]:Se.ref;he.focus&&(he.focus(),Y.shouldSelect&&xr(he.select)&&he.select())}},Ci=L=>{t={...t,...L}},Pt={control:{register:at,unregister:ze,getFieldState:q,handleSubmit:Gn,setError:ge,_subscribe:Re,_runSchema:R,_focusError:In,_getWatch:z,_getDirty:U,_setValid:D,_setFieldArray:B,_setDisabledField:Mt,_setErrors:k,_getFieldArray:P,_reset:sn,_resetDefaultValues:()=>xr(e.defaultValues)&&e.defaultValues().then(L=>{ut(L,e.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:j,_disableForm:wi,_subjects:v,_proxyFormState:g,get _fields(){return i},get _formValues(){return o},get _state(){return l},set _state(L){l=L},get _defaultValues(){return r},get _names(){return c},set _names(L){c=L},get _formState(){return t},get _options(){return e},set _options(L){e={...e,...L}}},subscribe:ke,trigger:Me,register:at,handleSubmit:Gn,watch:Ee,setValue:ee,getValues:Ue,reset:ut,resetField:ai,clearErrors:oe,unregister:ze,setError:ge,setFocus:li,getFieldState:q};return{...Pt,formControl:Pt}}function kte(n={}){const e=Rt.useRef(void 0),t=Rt.useRef(void 0),[i,r]=Rt.useState({isDirty:!1,isValidating:!1,isLoading:xr(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:xr(n.defaultValues)?void 0:n.defaultValues});if(!e.current)if(n.formControl)e.current={...n.formControl,formState:i},n.defaultValues&&!xr(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions);else{const{formControl:l,...c}=Vte(n);e.current={...c,formState:i}}const o=e.current.control;return o._options=n,vte(()=>{const l=o._subscribe({formState:o._proxyFormState,callback:()=>r({...o._formState}),reRenderRoot:!0});return r(c=>({...c,isReady:!0})),o._formState.isReady=!0,l},[o]),Rt.useEffect(()=>o._disableForm(n.disabled),[o,n.disabled]),Rt.useEffect(()=>{n.mode&&(o._options.mode=n.mode),n.reValidateMode&&(o._options.reValidateMode=n.reValidateMode)},[o,n.mode,n.reValidateMode]),Rt.useEffect(()=>{n.errors&&(o._setErrors(n.errors),o._focusError())},[o,n.errors]),Rt.useEffect(()=>{n.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,n.shouldUnregister]),Rt.useEffect(()=>{if(o._proxyFormState.isDirty){const l=o._getDirty();l!==i.isDirty&&o._subjects.state.next({isDirty:l})}},[o,i.isDirty]),Rt.useEffect(()=>{n.values&&!na(n.values,t.current)?(o._reset(n.values,{keepFieldsRef:!0,...o._options.resetOptions}),t.current=n.values,r(l=>({...l}))):o._resetDefaultValues()},[o,n.values]),Rt.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),e.current.formState=_te(i,o),e.current}const Lte=({onSubmit:n})=>{const{register:e,handleSubmit:t,reset:i,formState:{errors:r}}=kte({defaultValues:{title:"",description:""}});return O.jsxs(ni,{onSubmit:t(n),children:[O.jsxs(ni.Group,{className:"mb-3",controlId:"formTitle",children:[O.jsx(ni.Label,{children:"Заголовок заказа"}),O.jsx(ni.Control,{type:"text",placeholder:"Введите заголовок",isInvalid:!!r.title,...e("title",{required:"Введите заголовок"})}),O.jsx(ni.Control.Feedback,{type:"invalid",children:r.title?.message})]}),O.jsxs(ni.Group,{className:"mb-3",controlId:"formDescription",children:[O.jsx(ni.Label,{children:"Описание"}),O.jsx(ni.Control,{as:"textarea",rows:3,placeholder:"Введите описание",isInvalid:!!r.description,...e("description",{required:"Введите описание"})}),O.jsx(ni.Control.Feedback,{type:"invalid",children:r.description?.message})]}),O.jsx(Ay,{variant:"success",type:"submit",children:"Добавить заказ"})]})},Ute=({show:n,onHide:e})=>{const t=lh(),i=r=>{const o={title:r.title,description:r.description,date:new Date().toISOString(),products:[]};console.log(r),t(dJ(o)),e()};return O.jsxs(Bs,{show:n,onHide:e,size:"lg",centered:!0,children:[O.jsx(Bs.Header,{closeButton:!0,children:O.jsx(Bs.Title,{children:"Добавить заказ"})}),O.jsx(Bs.Body,{children:O.jsx(Lte,{onSubmit:i})})]})},Fte=()=>{const n=Ec(i4),e=lh(),[t,i]=I.useState(!1);return I.useEffect(()=>{e(hJ())},[]),O.jsxs("div",{className:"container-fluid py-4",style:{background:"#f8f9fa",marginTop:"50px"},children:[O.jsxs("div",{className:"d-flex",style:{gap:"10px"},children:[O.jsxs("div",{style:{background:"#03783dff",width:"50px",height:"50px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"},children:[O.jsx(O4,{size:"medium",onClick:()=>i(!0),variant:"primary",children:"+"}),O.jsx(Ute,{show:t,onHide:()=>i(!1)})]}),O.jsxs("h1",{className:"mb-4",children:["Приходы / ",n.length]}),O.jsx("div",{className:"mb-4 d-flex",children:O.jsx(Zw,{className:"g-3 flex-nowrap",children:O.jsx(kd,{xs:6,md:12})})})]}),O.jsx(fte,{})]})},Bte="_formLabel_49n1e_1",jte="_productsContainer_49n1e_13",zte="_productCard_49n1e_37",qte="_statusIndicator_49n1e_75",Hte="_statusDot_49n1e_83",Gte="_available_49n1e_149",Kte="_notAvailable_49n1e_157",$te="_productImage_49n1e_173",Wte="_productInfo_49n1e_189",Yte="_productTitle_49n1e_199",Qte="_productSerial_49n1e_219",Xte="_productStatus_49n1e_229",Jte="_statusText_49n1e_239",Zte="_dateRange_49n1e_271",ene="_condition_49n1e_289",tne="_price_49n1e_311",nne="_priceUsd_49n1e_323",ine="_priceUah_49n1e_335",rne="_groupName_49n1e_345",sne="_name_49n1e_359",one="_probel_49n1e_373",ane="_arrivalDate_49n1e_423",lne="_deleteBtn_49n1e_439",gt={formLabel:Bte,productsContainer:jte,productCard:zte,statusIndicator:qte,statusDot:Hte,available:Gte,notAvailable:Kte,productImage:$te,productInfo:Wte,productTitle:Yte,productSerial:Qte,productStatus:Xte,statusText:Jte,dateRange:Zte,condition:ene,new:"_new_49n1e_299",price:tne,priceUsd:nne,priceUah:ine,groupName:rne,name:sne,probel:one,arrivalDate:ane,deleteBtn:lne},une=({filteredProducts:n})=>{const e=lh(),t=i=>{e(n4(i))};return O.jsx(O.Fragment,{children:O.jsx("div",{className:gt.productsContainer,children:n.map(i=>O.jsxs("div",{className:gt.productCard,children:[O.jsx("div",{className:gt.statusIndicator,children:i.status?O.jsx("div",{className:`${gt.statusDot} ${gt.available}`}):O.jsx("div",{className:`${gt.statusDot} ${gt.notAvailable}`})}),O.jsx("div",{className:gt.productImage,children:O.jsx("img",{src:i.photo,alt:i.title,width:40,height:40})}),O.jsxs("div",{className:gt.productInfo,children:[O.jsx("div",{className:gt.productTitle,children:i.title}),O.jsx("div",{className:gt.productSerial,children:i.serialNumber})]}),O.jsx("div",{className:gt.productStatus,children:i.status?O.jsx("span",{className:`${gt.statusText} ${gt.available}`,children:"свободен"}):O.jsx("span",{className:`${gt.statusText} ${gt.notAvailable}`,children:"В ремонте"})}),O.jsxs("div",{className:gt.dateRange,children:[O.jsxs("div",{children:["c:    ",i.guarantee.start]}),O.jsxs("div",{children:["по: ",i.guarantee.end]})]}),O.jsx("div",{className:gt.condition,children:O.jsx("span",{className:gt.new,children:i.isNew===1?"новый":"Б/У"})}),O.jsxs("div",{className:gt.price,children:[O.jsx("div",{className:gt.priceUsd,children:"2 500 $"}),O.jsx("div",{className:gt.priceUah,children:"250 000. 50 UAH"})]}),O.jsx("div",{className:gt.groupName,children:"Длинное предлинное длиннючее название группы"}),i.name?O.jsx("div",{className:gt.name,children:i.name}):O.jsx("div",{className:gt.probel,children:"-"}),O.jsx("div",{className:gt.groupName,children:"Длинное предлинное длиннючее название прихода"}),O.jsxs("div",{className:gt.arrivalDate,children:[O.jsx("span",{children:new Date(i.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),O.jsx("span",{children:new Date(i.date).toLocaleDateString("ru-RU",{day:"2-digit",month:"short",year:"numeric"})}),O.jsx("button",{className:gt.deleteBtn,onClick:()=>t(i.id),children:"🗑️"})]})]},i.id))})})},cne=()=>{const n=lh(),e=Ec(rJ),t=Ec(sJ),i=Ec(oJ),[r,o]=I.useState("");console.log("products",e),I.useEffect(()=>{n(t4())},[]);const l=r?e.filter(f=>f.type===r):e,c=f=>{o(f.currentTarget.value)};return t==="loading"?O.jsx("div",{children:"Loading products..."}):t==="failed"?O.jsxs("div",{children:["Error: ",i]}):O.jsxs("div",{className:"container-fluid py-4",style:{background:"#f8f9fa"},children:[O.jsxs("div",{className:"d-flex",style:{alignItems:"flex-end",gap:"10px"},children:[O.jsxs("h1",{className:"mb-4",children:["Продукты / ",l.length]}),O.jsx("div",{className:"mb-4 d-flex",children:O.jsxs(Zw,{className:"g-3 flex-nowrap",children:[O.jsx(kd,{xs:6,md:12,children:O.jsxs(ni.Group,{className:"d-flex align-items-center gap-2",children:[O.jsx(ni.Label,{className:gt.formLabel,children:"Тип:"}),O.jsxs(ni.Select,{onChange:c,children:[O.jsx("option",{value:"",children:"All"}),O.jsx("option",{value:"Monitors",children:"Monitors"}),O.jsx("option",{value:"Some Think",children:"Some Think"})]})]})}),O.jsx(kd,{xs:6,md:12,children:O.jsxs(ni.Group,{className:"d-flex align-items-center gap-2",children:[O.jsx(ni.Label,{className:gt.formLabel,children:"Спецификация:"}),O.jsx(ni.Select,{children:O.jsx("option",{})})]})})]})})]}),O.jsx(une,{filteredProducts:l})]})},Ui={PRIHOD:"/prihod",GROUPS:"/group",PRODUCTS:"/products",USERS:"/users",SETTINGS:"/settings",ERROR:"/404"},hne=[{element:O.jsx(eX,{}),children:[{path:"/",element:O.jsx(FI,{to:Ui.PRIHOD,replace:!0})},{path:Ui.PRIHOD,element:O.jsx(Fte,{})},{path:Ui.GROUPS,element:O.jsx(J5,{})},{path:Ui.PRODUCTS,element:O.jsx(cne,{})},{path:Ui.USERS,element:O.jsx(Z5,{})},{path:Ui.SETTINGS,element:O.jsx(e9,{})},{path:Ui.ERROR,element:O.jsx(t9,{})},{path:"*",element:O.jsx(FI,{to:"/404",replace:!0})}]}],fne=kX({reducer:{orders:mJ,products:lJ}}),dne=()=>s5(hne);I6.createRoot(document.getElementById("root")).render(O.jsx(Rt.StrictMode,{children:O.jsx(z5,{children:O.jsx(NJ,{store:fne,children:O.jsx(dne,{})})})}));
