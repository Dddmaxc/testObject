(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function Bg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vv={exports:{}},Ah={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uC;function u4(){if(uC)return Ah;uC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:a}}return Ah.Fragment=e,Ah.jsx=t,Ah.jsxs=t,Ah}var cC;function c4(){return cC||(cC=1,Vv.exports=u4()),Vv.exports}var H=c4(),kv={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hC;function h4(){if(hC)return xe;hC=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w(B){return B===null||typeof B!="object"?null:(B=v&&B[v]||B["@@iterator"],typeof B=="function"?B:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,D={};function U(B,re,de){this.props=B,this.context=re,this.refs=D,this.updater=de||C}U.prototype.isReactComponent={},U.prototype.setState=function(B,re){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,re,"setState")},U.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function z(){}z.prototype=U.prototype;function k(B,re,de){this.props=B,this.context=re,this.refs=D,this.updater=de||C}var Z=k.prototype=new z;Z.constructor=k,N(Z,U.prototype),Z.isPureReactComponent=!0;var Q=Array.isArray;function oe(){}var R={H:null,A:null,T:null,S:null},A=Object.prototype.hasOwnProperty;function x(B,re,de){var me=de.ref;return{$$typeof:n,type:B,key:re,ref:me!==void 0?me:null,props:de}}function L(B,re){return x(B.type,re,B.props)}function V(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function q(B){var re={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(de){return re[de]})}var M=/\/+/g;function dt(B,re){return typeof B=="object"&&B!==null&&B.key!=null?q(""+B.key):re.toString(36)}function Rt(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(oe,oe):(B.status="pending",B.then(function(re){B.status==="pending"&&(B.status="fulfilled",B.value=re)},function(re){B.status==="pending"&&(B.status="rejected",B.reason=re)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function te(B,re,de,me,Ce){var Me=typeof B;(Me==="undefined"||Me==="boolean")&&(B=null);var $e=!1;if(B===null)$e=!0;else switch(Me){case"bigint":case"string":case"number":$e=!0;break;case"object":switch(B.$$typeof){case n:case e:$e=!0;break;case g:return $e=B._init,te($e(B._payload),re,de,me,Ce)}}if($e)return Ce=Ce(B),$e=me===""?"."+dt(B,0):me,Q(Ce)?(de="",$e!=null&&(de=$e.replace(M,"$&/")+"/"),te(Ce,re,de,"",function(Ho){return Ho})):Ce!=null&&(V(Ce)&&(Ce=L(Ce,de+(Ce.key==null||B&&B.key===Ce.key?"":(""+Ce.key).replace(M,"$&/")+"/")+$e)),re.push(Ce)),1;$e=0;var tn=me===""?".":me+":";if(Q(B))for(var vt=0;vt<B.length;vt++)me=B[vt],Me=tn+dt(me,vt),$e+=te(me,re,de,Me,Ce);else if(vt=w(B),typeof vt=="function")for(B=vt.call(B),vt=0;!(me=B.next()).done;)me=me.value,Me=tn+dt(me,vt++),$e+=te(me,re,de,Me,Ce);else if(Me==="object"){if(typeof B.then=="function")return te(Rt(B),re,de,me,Ce);throw re=String(B),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return $e}function ae(B,re,de){if(B==null)return B;var me=[],Ce=0;return te(B,me,"","",function(Me){return re.call(de,Me,Ce++)}),me}function pe(B){if(B._status===-1){var re=B._result;re=re(),re.then(function(de){(B._status===0||B._status===-1)&&(B._status=1,B._result=de)},function(de){(B._status===0||B._status===-1)&&(B._status=2,B._result=de)}),B._status===-1&&(B._status=0,B._result=re)}if(B._status===1)return B._result.default;throw B._result}var Pe=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},je={map:ae,forEach:function(B,re,de){ae(B,function(){re.apply(this,arguments)},de)},count:function(B){var re=0;return ae(B,function(){re++}),re},toArray:function(B){return ae(B,function(re){return re})||[]},only:function(B){if(!V(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return xe.Activity=y,xe.Children=je,xe.Component=U,xe.Fragment=t,xe.Profiler=r,xe.PureComponent=k,xe.StrictMode=i,xe.Suspense=f,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,xe.__COMPILER_RUNTIME={__proto__:null,c:function(B){return R.H.useMemoCache(B)}},xe.cache=function(B){return function(){return B.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(B,re,de){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var me=N({},B.props),Ce=B.key;if(re!=null)for(Me in re.key!==void 0&&(Ce=""+re.key),re)!A.call(re,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&re.ref===void 0||(me[Me]=re[Me]);var Me=arguments.length-2;if(Me===1)me.children=de;else if(1<Me){for(var $e=Array(Me),tn=0;tn<Me;tn++)$e[tn]=arguments[tn+2];me.children=$e}return x(B.type,Ce,me)},xe.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},xe.createElement=function(B,re,de){var me,Ce={},Me=null;if(re!=null)for(me in re.key!==void 0&&(Me=""+re.key),re)A.call(re,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ce[me]=re[me]);var $e=arguments.length-2;if($e===1)Ce.children=de;else if(1<$e){for(var tn=Array($e),vt=0;vt<$e;vt++)tn[vt]=arguments[vt+2];Ce.children=tn}if(B&&B.defaultProps)for(me in $e=B.defaultProps,$e)Ce[me]===void 0&&(Ce[me]=$e[me]);return x(B,Me,Ce)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(B){return{$$typeof:h,render:B}},xe.isValidElement=V,xe.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:pe}},xe.memo=function(B,re){return{$$typeof:d,type:B,compare:re===void 0?null:re}},xe.startTransition=function(B){var re=R.T,de={};R.T=de;try{var me=B(),Ce=R.S;Ce!==null&&Ce(de,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(oe,Pe)}catch(Me){Pe(Me)}finally{re!==null&&de.types!==null&&(re.types=de.types),R.T=re}},xe.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},xe.use=function(B){return R.H.use(B)},xe.useActionState=function(B,re,de){return R.H.useActionState(B,re,de)},xe.useCallback=function(B,re){return R.H.useCallback(B,re)},xe.useContext=function(B){return R.H.useContext(B)},xe.useDebugValue=function(){},xe.useDeferredValue=function(B,re){return R.H.useDeferredValue(B,re)},xe.useEffect=function(B,re){return R.H.useEffect(B,re)},xe.useEffectEvent=function(B){return R.H.useEffectEvent(B)},xe.useId=function(){return R.H.useId()},xe.useImperativeHandle=function(B,re,de){return R.H.useImperativeHandle(B,re,de)},xe.useInsertionEffect=function(B,re){return R.H.useInsertionEffect(B,re)},xe.useLayoutEffect=function(B,re){return R.H.useLayoutEffect(B,re)},xe.useMemo=function(B,re){return R.H.useMemo(B,re)},xe.useOptimistic=function(B,re){return R.H.useOptimistic(B,re)},xe.useReducer=function(B,re,de){return R.H.useReducer(B,re,de)},xe.useRef=function(B){return R.H.useRef(B)},xe.useState=function(B){return R.H.useState(B)},xe.useSyncExternalStore=function(B,re,de){return R.H.useSyncExternalStore(B,re,de)},xe.useTransition=function(){return R.H.useTransition()},xe.version="19.2.0",xe}var fC;function zg(){return fC||(fC=1,kv.exports=h4()),kv.exports}var P=zg();const Eo=Bg(P);var Lv={exports:{}},Ch={},Uv={exports:{}},Fv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dC;function f4(){return dC||(dC=1,(function(n){function e(te,ae){var pe=te.length;te.push(ae);e:for(;0<pe;){var Pe=pe-1>>>1,je=te[Pe];if(0<r(je,ae))te[Pe]=ae,te[pe]=je,pe=Pe;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var ae=te[0],pe=te.pop();if(pe!==ae){te[0]=pe;e:for(var Pe=0,je=te.length,B=je>>>1;Pe<B;){var re=2*(Pe+1)-1,de=te[re],me=re+1,Ce=te[me];if(0>r(de,pe))me<je&&0>r(Ce,de)?(te[Pe]=Ce,te[me]=pe,Pe=me):(te[Pe]=de,te[re]=pe,Pe=re);else if(me<je&&0>r(Ce,pe))te[Pe]=Ce,te[me]=pe,Pe=me;else break e}}return ae}function r(te,ae){var pe=te.sortIndex-ae.sortIndex;return pe!==0?pe:te.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();n.unstable_now=function(){return l.now()-h}}var f=[],d=[],g=1,y=null,v=3,w=!1,C=!1,N=!1,D=!1,U=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function Z(te){for(var ae=t(d);ae!==null;){if(ae.callback===null)i(d);else if(ae.startTime<=te)i(d),ae.sortIndex=ae.expirationTime,e(f,ae);else break;ae=t(d)}}function Q(te){if(N=!1,Z(te),!C)if(t(f)!==null)C=!0,oe||(oe=!0,q());else{var ae=t(d);ae!==null&&Rt(Q,ae.startTime-te)}}var oe=!1,R=-1,A=5,x=-1;function L(){return D?!0:!(n.unstable_now()-x<A)}function V(){if(D=!1,oe){var te=n.unstable_now();x=te;var ae=!0;try{e:{C=!1,N&&(N=!1,z(R),R=-1),w=!0;var pe=v;try{t:{for(Z(te),y=t(f);y!==null&&!(y.expirationTime>te&&L());){var Pe=y.callback;if(typeof Pe=="function"){y.callback=null,v=y.priorityLevel;var je=Pe(y.expirationTime<=te);if(te=n.unstable_now(),typeof je=="function"){y.callback=je,Z(te),ae=!0;break t}y===t(f)&&i(f),Z(te)}else i(f);y=t(f)}if(y!==null)ae=!0;else{var B=t(d);B!==null&&Rt(Q,B.startTime-te),ae=!1}}break e}finally{y=null,v=pe,w=!1}ae=void 0}}finally{ae?q():oe=!1}}}var q;if(typeof k=="function")q=function(){k(V)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,dt=M.port2;M.port1.onmessage=V,q=function(){dt.postMessage(null)}}else q=function(){U(V,0)};function Rt(te,ae){R=U(function(){te(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_next=function(te){switch(v){case 1:case 2:case 3:var ae=3;break;default:ae=v}var pe=v;v=ae;try{return te()}finally{v=pe}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(te,ae){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var pe=v;v=te;try{return ae()}finally{v=pe}},n.unstable_scheduleCallback=function(te,ae,pe){var Pe=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Pe+pe:Pe):pe=Pe,te){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=pe+je,te={id:g++,callback:ae,priorityLevel:te,startTime:pe,expirationTime:je,sortIndex:-1},pe>Pe?(te.sortIndex=pe,e(d,te),t(f)===null&&te===t(d)&&(N?(z(R),R=-1):N=!0,Rt(Q,pe-Pe))):(te.sortIndex=je,e(f,te),C||w||(C=!0,oe||(oe=!0,q()))),te},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(te){var ae=v;return function(){var pe=v;v=ae;try{return te.apply(this,arguments)}finally{v=pe}}}})(Fv)),Fv}var mC;function d4(){return mC||(mC=1,Uv.exports=f4()),Uv.exports}var Bv={exports:{}},An={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pC;function m4(){if(pC)return An;pC=1;var n=zg();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(f,d,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:f,containerInfo:d,implementation:g}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return An.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,An.createPortal=function(f,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,g)},An.flushSync=function(f){var d=l.T,g=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=d,i.p=g,i.d.f()}},An.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},An.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},An.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var g=d.as,y=h(g,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,w=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;g==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):g==="script"&&i.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},An.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var g=h(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},An.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var g=d.as,y=h(g,d.crossOrigin);i.d.L(f,g,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},An.preloadModule=function(f,d){if(typeof f=="string")if(d){var g=h(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:g,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},An.requestFormReset=function(f){i.d.r(f)},An.unstable_batchedUpdates=function(f,d){return f(d)},An.useFormState=function(f,d,g){return l.H.useFormState(f,d,g)},An.useFormStatus=function(){return l.H.useHostTransitionStatus()},An.version="19.2.0",An}var gC;function p4(){if(gC)return Bv.exports;gC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bv.exports=m4(),Bv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _C;function g4(){if(_C)return Ch;_C=1;var n=d4(),e=zg(),t=p4();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function l(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function h(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function f(s){if(a(s)!==s)throw Error(i(188))}function d(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var u=s,c=o;;){var p=u.return;if(p===null)break;var _=p.alternate;if(_===null){if(c=p.return,c!==null){u=c;continue}break}if(p.child===_.child){for(_=p.child;_;){if(_===u)return f(p),s;if(_===c)return f(p),o;_=_.sibling}throw Error(i(188))}if(u.return!==c.return)u=p,c=_;else{for(var E=!1,b=p.child;b;){if(b===u){E=!0,u=p,c=_;break}if(b===c){E=!0,c=p,u=_;break}b=b.sibling}if(!E){for(b=_.child;b;){if(b===u){E=!0,u=_,c=p;break}if(b===c){E=!0,c=_,u=p;break}b=b.sibling}if(!E)throw Error(i(189))}}if(u.alternate!==c)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:o}function g(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=g(s),o!==null)return o;s=s.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),k=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),oe=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=V&&s[V]||s["@@iterator"],typeof s=="function"?s:null)}var M=Symbol.for("react.client.reference");function dt(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===M?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case U:return"Profiler";case D:return"StrictMode";case Q:return"Suspense";case oe:return"SuspenseList";case x:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case C:return"Portal";case k:return s.displayName||"Context";case z:return(s._context.displayName||"Context")+".Consumer";case Z:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return o=s.displayName||null,o!==null?o:dt(s.type)||"Memo";case A:o=s._payload,s=s._init;try{return dt(s(o))}catch{}}return null}var Rt=Array.isArray,te=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Pe=[],je=-1;function B(s){return{current:s}}function re(s){0>je||(s.current=Pe[je],Pe[je]=null,je--)}function de(s,o){je++,Pe[je]=s.current,s.current=o}var me=B(null),Ce=B(null),Me=B(null),$e=B(null);function tn(s,o){switch(de(Me,o),de(Ce,s),de(me,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?PA(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=PA(o),s=MA(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}re(me),de(me,s)}function vt(){re(me),re(Ce),re(Me)}function Ho(s){s.memoizedState!==null&&de($e,s);var o=me.current,u=MA(o,s.type);o!==u&&(de(Ce,s),de(me,u))}function dl(s){Ce.current===s&&(re(me),re(Ce)),$e.current===s&&(re($e),Eh._currentValue=pe)}var ml,pl;function rs(s){if(ml===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);ml=o&&o[1]||"",pl=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ml+s+pl}var Ec=!1;function Go(s,o){if(!s||Ec)return"";Ec=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(J){var W=J}Reflect.construct(s,[],se)}else{try{se.call()}catch(J){W=J}s.call(se.prototype)}}else{try{throw Error()}catch(J){W=J}(se=s())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(J){if(J&&W&&typeof J.stack=="string")return[J.stack,W.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=c.DetermineComponentFrameRoot(),E=_[0],b=_[1];if(E&&b){var O=E.split(`
`),Y=b.split(`
`);for(p=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;p<Y.length&&!Y[p].includes("DetermineComponentFrameRoot");)p++;if(c===O.length||p===Y.length)for(c=O.length-1,p=Y.length-1;1<=c&&0<=p&&O[c]!==Y[p];)p--;for(;1<=c&&0<=p;c--,p--)if(O[c]!==Y[p]){if(c!==1||p!==1)do if(c--,p--,0>p||O[c]!==Y[p]){var ee=`
`+O[c].replace(" at new "," at ");return s.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",s.displayName)),ee}while(1<=c&&0<=p);break}}}finally{Ec=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?rs(u):""}function Sc(s,o){switch(s.tag){case 26:case 27:case 5:return rs(s.type);case 16:return rs("Lazy");case 13:return s.child!==o&&o!==null?rs("Suspense Fallback"):rs("Suspense");case 19:return rs("SuspenseList");case 0:case 15:return Go(s.type,!1);case 11:return Go(s.type.render,!1);case 1:return Go(s.type,!0);case 31:return rs("Activity");default:return""}}function wc(s){try{var o="",u=null;do o+=Sc(s,u),u=s,s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Ft=Object.prototype.hasOwnProperty,nn=n.unstable_scheduleCallback,Dr=n.unstable_cancelCallback,L_=n.unstable_shouldYield,yd=n.unstable_requestPaint,Nn=n.unstable_now,Ko=n.unstable_getCurrentPriorityLevel,bc=n.unstable_ImmediatePriority,Ac=n.unstable_UserBlockingPriority,Nr=n.unstable_NormalPriority,U_=n.unstable_LowPriority,vd=n.unstable_IdlePriority,Td=n.log,Ed=n.unstable_setDisableYieldValue,ki=null,pn=null;function di(s){if(typeof Td=="function"&&Ed(s),pn&&typeof pn.setStrictMode=="function")try{pn.setStrictMode(ki,s)}catch{}}var Mt=Math.clz32?Math.clz32:wd,Sd=Math.log,gl=Math.LN2;function wd(s){return s>>>=0,s===0?32:31-(Sd(s)/gl|0)|0}var os=256,$o=262144,Bt=4194304;function as(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function ls(s,o,u){var c=s.pendingLanes;if(c===0)return 0;var p=0,_=s.suspendedLanes,E=s.pingedLanes;s=s.warmLanes;var b=c&134217727;return b!==0?(c=b&~_,c!==0?p=as(c):(E&=b,E!==0?p=as(E):u||(u=b&~s,u!==0&&(p=as(u))))):(b=c&~_,b!==0?p=as(b):E!==0?p=as(E):u||(u=c&~s,u!==0&&(p=as(u)))),p===0?0:o!==0&&o!==p&&(o&_)===0&&(_=p&-p,u=o&-o,_>=u||_===32&&(u&4194048)!==0)?o:p}function Li(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function F_(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bd(){var s=Bt;return Bt<<=1,(Bt&62914560)===0&&(Bt=4194304),s}function us(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function Yo(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function B_(s,o,u,c,p,_){var E=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var b=s.entanglements,O=s.expirationTimes,Y=s.hiddenUpdates;for(u=E&~u;0<u;){var ee=31-Mt(u),se=1<<ee;b[ee]=0,O[ee]=-1;var W=Y[ee];if(W!==null)for(Y[ee]=null,ee=0;ee<W.length;ee++){var J=W[ee];J!==null&&(J.lane&=-536870913)}u&=~se}c!==0&&Wo(s,c,0),_!==0&&p===0&&s.tag!==0&&(s.suspendedLanes|=_&~(E&~o))}function Wo(s,o,u){s.pendingLanes|=o,s.suspendedLanes&=~o;var c=31-Mt(o);s.entangledLanes|=o,s.entanglements[c]=s.entanglements[c]|1073741824|u&261930}function Cc(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var c=31-Mt(u),p=1<<c;p&o|s[c]&o&&(s[c]|=o),u&=~p}}function Ic(s,o){var u=o&-o;return u=(u&42)!==0?1:Qo(u),(u&(s.suspendedLanes|o))!==0?0:u}function Qo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function zs(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Ad(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:nC(s.type))}function Ui(s,o){var u=ae.p;try{return ae.p=s,o()}finally{ae.p=u}}var Fi=Math.random().toString(36).slice(2),zt="__reactFiber$"+Fi,ln="__reactProps$"+Fi,cs="__reactContainer$"+Fi,_l="__reactEvents$"+Fi,z_="__reactListeners$"+Fi,Cd="__reactHandles$"+Fi,Id="__reactResources$"+Fi,hs="__reactMarker$"+Fi;function yl(s){delete s[zt],delete s[ln],delete s[_l],delete s[z_],delete s[Cd]}function fs(s){var o=s[zt];if(o)return o;for(var u=s.parentNode;u;){if(o=u[cs]||u[zt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=BA(s);s!==null;){if(u=s[zt])return u;s=BA(s)}return o}s=u,u=s.parentNode}return null}function mi(s){if(s=s[zt]||s[cs]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function Xn(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function ds(s){var o=s[Id];return o||(o=s[Id]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function jt(s){s[hs]=!0}var Rc=new Set,xc={};function ms(s,o){ps(s,o),ps(s+"Capture",o)}function ps(s,o){for(xc[s]=o,s=0;s<o.length;s++)Rc.add(o[s])}var Dc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nc={},Pc={};function Rd(s){return Ft.call(Pc,s)?!0:Ft.call(Nc,s)?!1:Dc.test(s)?Pc[s]=!0:(Nc[s]=!0,!1)}function vl(s,o,u){if(Rd(o))if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+u)}}function Jn(s,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+u)}}function qt(s,o,u,c){if(c===null)s.removeAttribute(u);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(o,u,""+c)}}function un(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Pr(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Mc(s,o,u){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,_=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return p.call(this)},set:function(E){u=""+E,_.call(this,E)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function it(s){if(!s._valueTracker){var o=Pr(s)?"checked":"value";s._valueTracker=Mc(s,o,""+s[o])}}function Xo(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),c="";return s&&(c=Pr(s)?s.checked?"true":"false":s.value),s=c,s!==u?(o.setValue(s),!0):!1}function gs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Jo=/[\n"\\]/g;function Fn(s){return s.replace(Jo,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Tl(s,o,u,c,p,_,E,b){s.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?s.type=E:s.removeAttribute("type"),o!=null?E==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+un(o)):s.value!==""+un(o)&&(s.value=""+un(o)):E!=="submit"&&E!=="reset"||s.removeAttribute("value"),o!=null?Oc(s,E,un(o)):u!=null?Oc(s,E,un(u)):c!=null&&s.removeAttribute("value"),p==null&&_!=null&&(s.defaultChecked=!!_),p!=null&&(s.checked=p&&typeof p!="function"&&typeof p!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?s.name=""+un(b):s.removeAttribute("name")}function xd(s,o,u,c,p,_,E,b){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),o!=null||u!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){it(s);return}u=u!=null?""+un(u):"",o=o!=null?""+un(o):u,b||o===s.value||(s.value=o),s.defaultValue=o}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=b?s.checked:!!c,s.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.name=E),it(s)}function Oc(s,o,u){o==="number"&&gs(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function Mr(s,o,u,c){if(s=s.options,o){o={};for(var p=0;p<u.length;p++)o["$"+u[p]]=!0;for(u=0;u<s.length;u++)p=o.hasOwnProperty("$"+s[u].value),s[u].selected!==p&&(s[u].selected=p),p&&c&&(s[u].defaultSelected=!0)}else{for(u=""+un(u),o=null,p=0;p<s.length;p++){if(s[p].value===u){s[p].selected=!0,c&&(s[p].defaultSelected=!0);return}o!==null||s[p].disabled||(o=s[p])}o!==null&&(o.selected=!0)}}function Dd(s,o,u){if(o!=null&&(o=""+un(o),o!==s.value&&(s.value=o),u==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=u!=null?""+un(u):""}function Or(s,o,u,c){if(o==null){if(c!=null){if(u!=null)throw Error(i(92));if(Rt(c)){if(1<c.length)throw Error(i(93));c=c[0]}u=c}u==null&&(u=""),o=u}u=un(o),s.defaultValue=u,c=s.textContent,c===u&&c!==""&&c!==null&&(s.value=c),it(s)}function Bn(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var Nd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vc(s,o,u){var c=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?c?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":c?s.setProperty(o,u):typeof u!="number"||u===0||Nd.has(o)?o==="float"?s.cssFloat=u:s[o]=(""+u).trim():s[o]=u+"px"}function kc(s,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,u!=null){for(var c in u)!u.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var p in o)c=o[p],o.hasOwnProperty(p)&&u[p]!==c&&Vc(s,p,c)}else for(var _ in o)o.hasOwnProperty(_)&&Vc(s,_,o[_])}function El(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Sl(s){return Vr.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Bi(){}var Lc=null;function pi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var kr=null,_s=null;function Zo(s){var o=mi(s);if(o&&(s=o.stateNode)){var u=s[ln]||null;e:switch(s=o.stateNode,o.type){case"input":if(Tl(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Fn(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var c=u[o];if(c!==s&&c.form===s.form){var p=c[ln]||null;if(!p)throw Error(i(90));Tl(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(o=0;o<u.length;o++)c=u[o],c.form===s.form&&Xo(c)}break e;case"textarea":Dd(s,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&Mr(s,!!u.multiple,o,!1)}}}var wl=!1;function Lr(s,o,u){if(wl)return s(o,u);wl=!0;try{var c=s(o);return c}finally{if(wl=!1,(kr!==null||_s!==null)&&(Am(),kr&&(o=kr,s=_s,_s=kr=null,Zo(o),s)))for(o=0;o<s.length;o++)Zo(s[o])}}function zi(s,o){var u=s.stateNode;if(u===null)return null;var c=u[ln]||null;if(c===null)return null;u=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ea=!1;if(gi)try{var ut={};Object.defineProperty(ut,"passive",{get:function(){ea=!0}}),window.addEventListener("test",ut,ut),window.removeEventListener("test",ut,ut)}catch{ea=!1}var ys=null,Uc=null,ta=null;function Fc(){if(ta)return ta;var s,o=Uc,u=o.length,c,p="value"in ys?ys.value:ys.textContent,_=p.length;for(s=0;s<u&&o[s]===p[s];s++);var E=u-s;for(c=1;c<=E&&o[u-c]===p[_-c];c++);return ta=p.slice(s,1<c?1-c:void 0)}function na(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function js(){return!0}function ji(){return!1}function gn(s){function o(u,c,p,_,E){this._reactName=u,this._targetInst=p,this.type=c,this.nativeEvent=_,this.target=E,this.currentTarget=null;for(var b in s)s.hasOwnProperty(b)&&(u=s[b],this[b]=u?u(_):_[b]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?js:ji,this.isPropagationStopped=ji,this}return y(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=js)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=js)},persist:function(){},isPersistent:js}),o}var qs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vs=gn(qs),Ur=y({},qs,{view:0,detail:0}),Bc=gn(Ur),Fr,bl,Ts,Al=y({},Ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Br,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ts&&(Ts&&s.type==="mousemove"?(Fr=s.screenX-Ts.screenX,bl=s.screenY-Ts.screenY):bl=Fr=0,Ts=s),Fr)},movementY:function(s){return"movementY"in s?s.movementY:bl}}),zc=gn(Al),ia=y({},Al,{dataTransfer:0}),Md=gn(ia),Od=y({},Ur,{relatedTarget:0}),sa=gn(Od),jc=y({},qs,{animationName:0,elapsedTime:0,pseudoElement:0}),Vd=gn(jc),Cl=y({},qs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),kd=gn(Cl),Ld=y({},qs,{data:0}),Es=gn(Ld),Ud={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zd(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Bd[s])?!!o[s]:!1}function Br(){return zd}var Pn=y({},Ur,{key:function(s){if(s.key){var o=Ud[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=na(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Fd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Br,charCode:function(s){return s.type==="keypress"?na(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?na(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),jd=gn(Pn),qd=y({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hs=gn(qd),m=y({},Ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Br}),T=gn(m),S=y({},qs,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=gn(S),K=y({},Al,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),X=gn(K),ce=y({},qs,{newState:0,oldState:0}),De=gn(ce),Ot=[9,13,27,32],Xe=gi&&"CompositionEvent"in window,Tt=null;gi&&"documentMode"in document&&(Tt=document.documentMode);var _i=gi&&"TextEvent"in window&&!Tt,Ss=gi&&(!Xe||Tt&&8<Tt&&11>=Tt),qi=" ",Hi=!1;function ra(s,o){switch(s){case"keyup":return Ot.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Il(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Rl=!1;function Mk(s,o){switch(s){case"compositionend":return Il(o);case"keypress":return o.which!==32?null:(Hi=!0,qi);case"textInput":return s=o.data,s===qi&&Hi?null:s;default:return null}}function Ok(s,o){if(Rl)return s==="compositionend"||!Xe&&ra(s,o)?(s=Fc(),ta=Uc=ys=null,Rl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Ss&&o.locale!=="ko"?null:o.data;default:return null}}var Vk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qw(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!Vk[s.type]:o==="textarea"}function Hw(s,o,u,c){kr?_s?_s.push(c):_s=[c]:kr=c,o=Pm(o,"onChange"),0<o.length&&(u=new vs("onChange","change",null,u,c),s.push({event:u,listeners:o}))}var qc=null,Hc=null;function kk(s){CA(s,0)}function Hd(s){var o=Xn(s);if(Xo(o))return s}function Gw(s,o){if(s==="change")return o}var Kw=!1;if(gi){var j_;if(gi){var q_="oninput"in document;if(!q_){var $w=document.createElement("div");$w.setAttribute("oninput","return;"),q_=typeof $w.oninput=="function"}j_=q_}else j_=!1;Kw=j_&&(!document.documentMode||9<document.documentMode)}function Yw(){qc&&(qc.detachEvent("onpropertychange",Ww),Hc=qc=null)}function Ww(s){if(s.propertyName==="value"&&Hd(Hc)){var o=[];Hw(o,Hc,s,pi(s)),Lr(kk,o)}}function Lk(s,o,u){s==="focusin"?(Yw(),qc=o,Hc=u,qc.attachEvent("onpropertychange",Ww)):s==="focusout"&&Yw()}function Uk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Hd(Hc)}function Fk(s,o){if(s==="click")return Hd(o)}function Bk(s,o){if(s==="input"||s==="change")return Hd(o)}function zk(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Zn=typeof Object.is=="function"?Object.is:zk;function Gc(s,o){if(Zn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),c=Object.keys(o);if(u.length!==c.length)return!1;for(c=0;c<u.length;c++){var p=u[c];if(!Ft.call(o,p)||!Zn(s[p],o[p]))return!1}return!0}function Qw(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Xw(s,o){var u=Qw(s);s=0;for(var c;u;){if(u.nodeType===3){if(c=s+u.textContent.length,s<=o&&c>=o)return{node:u,offset:o-s};s=c}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Qw(u)}}function Jw(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?Jw(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function Zw(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=gs(s.document);o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=gs(s.document)}return o}function H_(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var jk=gi&&"documentMode"in document&&11>=document.documentMode,xl=null,G_=null,Kc=null,K_=!1;function eb(s,o,u){var c=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;K_||xl==null||xl!==gs(c)||(c=xl,"selectionStart"in c&&H_(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Kc&&Gc(Kc,c)||(Kc=c,c=Pm(G_,"onSelect"),0<c.length&&(o=new vs("onSelect","select",null,o,u),s.push({event:o,listeners:c}),o.target=xl)))}function oa(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Dl={animationend:oa("Animation","AnimationEnd"),animationiteration:oa("Animation","AnimationIteration"),animationstart:oa("Animation","AnimationStart"),transitionrun:oa("Transition","TransitionRun"),transitionstart:oa("Transition","TransitionStart"),transitioncancel:oa("Transition","TransitionCancel"),transitionend:oa("Transition","TransitionEnd")},$_={},tb={};gi&&(tb=document.createElement("div").style,"AnimationEvent"in window||(delete Dl.animationend.animation,delete Dl.animationiteration.animation,delete Dl.animationstart.animation),"TransitionEvent"in window||delete Dl.transitionend.transition);function aa(s){if($_[s])return $_[s];if(!Dl[s])return s;var o=Dl[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in tb)return $_[s]=o[u];return s}var nb=aa("animationend"),ib=aa("animationiteration"),sb=aa("animationstart"),qk=aa("transitionrun"),Hk=aa("transitionstart"),Gk=aa("transitioncancel"),rb=aa("transitionend"),ob=new Map,Y_="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Y_.push("scrollEnd");function Gi(s,o){ob.set(s,o),ms(o,[s])}var Gd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},yi=[],Nl=0,W_=0;function Kd(){for(var s=Nl,o=W_=Nl=0;o<s;){var u=yi[o];yi[o++]=null;var c=yi[o];yi[o++]=null;var p=yi[o];yi[o++]=null;var _=yi[o];if(yi[o++]=null,c!==null&&p!==null){var E=c.pending;E===null?p.next=p:(p.next=E.next,E.next=p),c.pending=p}_!==0&&ab(u,p,_)}}function $d(s,o,u,c){yi[Nl++]=s,yi[Nl++]=o,yi[Nl++]=u,yi[Nl++]=c,W_|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Q_(s,o,u,c){return $d(s,o,u,c),Yd(s)}function la(s,o){return $d(s,null,null,o),Yd(s)}function ab(s,o,u){s.lanes|=u;var c=s.alternate;c!==null&&(c.lanes|=u);for(var p=!1,_=s.return;_!==null;)_.childLanes|=u,c=_.alternate,c!==null&&(c.childLanes|=u),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(p=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,p&&o!==null&&(p=31-Mt(u),s=_.hiddenUpdates,c=s[p],c===null?s[p]=[o]:c.push(o),o.lane=u|536870912),_):null}function Yd(s){if(50<mh)throw mh=0,rv=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Pl={};function Kk(s,o,u,c){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(s,o,u,c){return new Kk(s,o,u,c)}function X_(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Gs(s,o){var u=s.alternate;return u===null?(u=ei(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function lb(s,o){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,o=u.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Wd(s,o,u,c,p,_){var E=0;if(c=s,typeof s=="function")X_(s)&&(E=1);else if(typeof s=="string")E=XL(s,u,me.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case x:return s=ei(31,u,o,p),s.elementType=x,s.lanes=_,s;case N:return ua(u.children,p,_,o);case D:E=8,p|=24;break;case U:return s=ei(12,u,o,p|2),s.elementType=U,s.lanes=_,s;case Q:return s=ei(13,u,o,p),s.elementType=Q,s.lanes=_,s;case oe:return s=ei(19,u,o,p),s.elementType=oe,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case k:E=10;break e;case z:E=9;break e;case Z:E=11;break e;case R:E=14;break e;case A:E=16,c=null;break e}E=29,u=Error(i(130,s===null?"null":typeof s,"")),c=null}return o=ei(E,u,o,p),o.elementType=s,o.type=c,o.lanes=_,o}function ua(s,o,u,c){return s=ei(7,s,c,o),s.lanes=u,s}function J_(s,o,u){return s=ei(6,s,null,o),s.lanes=u,s}function ub(s){var o=ei(18,null,null,0);return o.stateNode=s,o}function Z_(s,o,u){return o=ei(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var cb=new WeakMap;function vi(s,o){if(typeof s=="object"&&s!==null){var u=cb.get(s);return u!==void 0?u:(o={value:s,source:o,stack:wc(o)},cb.set(s,o),o)}return{value:s,source:o,stack:wc(o)}}var Ml=[],Ol=0,Qd=null,$c=0,Ti=[],Ei=0,zr=null,ws=1,bs="";function Ks(s,o){Ml[Ol++]=$c,Ml[Ol++]=Qd,Qd=s,$c=o}function hb(s,o,u){Ti[Ei++]=ws,Ti[Ei++]=bs,Ti[Ei++]=zr,zr=s;var c=ws;s=bs;var p=32-Mt(c)-1;c&=~(1<<p),u+=1;var _=32-Mt(o)+p;if(30<_){var E=p-p%5;_=(c&(1<<E)-1).toString(32),c>>=E,p-=E,ws=1<<32-Mt(o)+p|u<<p|c,bs=_+s}else ws=1<<_|u<<p|c,bs=s}function ey(s){s.return!==null&&(Ks(s,1),hb(s,1,0))}function ty(s){for(;s===Qd;)Qd=Ml[--Ol],Ml[Ol]=null,$c=Ml[--Ol],Ml[Ol]=null;for(;s===zr;)zr=Ti[--Ei],Ti[Ei]=null,bs=Ti[--Ei],Ti[Ei]=null,ws=Ti[--Ei],Ti[Ei]=null}function fb(s,o){Ti[Ei++]=ws,Ti[Ei++]=bs,Ti[Ei++]=zr,ws=o.id,bs=o.overflow,zr=s}var _n=null,gt=null,Ke=!1,jr=null,Si=!1,ny=Error(i(519));function qr(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yc(vi(o,s)),ny}function db(s){var o=s.stateNode,u=s.type,c=s.memoizedProps;switch(o[zt]=s,o[ln]=c,u){case"dialog":Be("cancel",o),Be("close",o);break;case"iframe":case"object":case"embed":Be("load",o);break;case"video":case"audio":for(u=0;u<gh.length;u++)Be(gh[u],o);break;case"source":Be("error",o);break;case"img":case"image":case"link":Be("error",o),Be("load",o);break;case"details":Be("toggle",o);break;case"input":Be("invalid",o),xd(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Be("invalid",o);break;case"textarea":Be("invalid",o),Or(o,c.value,c.defaultValue,c.children)}u=c.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||c.suppressHydrationWarning===!0||DA(o.textContent,u)?(c.popover!=null&&(Be("beforetoggle",o),Be("toggle",o)),c.onScroll!=null&&Be("scroll",o),c.onScrollEnd!=null&&Be("scrollend",o),c.onClick!=null&&(o.onclick=Bi),o=!0):o=!1,o||qr(s,!0)}function mb(s){for(_n=s.return;_n;)switch(_n.tag){case 5:case 31:case 13:Si=!1;return;case 27:case 3:Si=!0;return;default:_n=_n.return}}function Vl(s){if(s!==_n)return!1;if(!Ke)return mb(s),Ke=!0,!1;var o=s.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||Tv(s.type,s.memoizedProps)),u=!u),u&&gt&&qr(s),mb(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));gt=FA(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));gt=FA(s)}else o===27?(o=gt,io(s.type)?(s=Av,Av=null,gt=s):gt=o):gt=_n?bi(s.stateNode.nextSibling):null;return!0}function ca(){gt=_n=null,Ke=!1}function iy(){var s=jr;return s!==null&&(Hn===null?Hn=s:Hn.push.apply(Hn,s),jr=null),s}function Yc(s){jr===null?jr=[s]:jr.push(s)}var sy=B(null),ha=null,$s=null;function Hr(s,o,u){de(sy,o._currentValue),o._currentValue=u}function Ys(s){s._currentValue=sy.current,re(sy)}function ry(s,o,u){for(;s!==null;){var c=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),s===u)break;s=s.return}}function oy(s,o,u,c){var p=s.child;for(p!==null&&(p.return=s);p!==null;){var _=p.dependencies;if(_!==null){var E=p.child;_=_.firstContext;e:for(;_!==null;){var b=_;_=p;for(var O=0;O<o.length;O++)if(b.context===o[O]){_.lanes|=u,b=_.alternate,b!==null&&(b.lanes|=u),ry(_.return,u,s),c||(E=null);break e}_=b.next}}else if(p.tag===18){if(E=p.return,E===null)throw Error(i(341));E.lanes|=u,_=E.alternate,_!==null&&(_.lanes|=u),ry(E,u,s),E=null}else E=p.child;if(E!==null)E.return=p;else for(E=p;E!==null;){if(E===s){E=null;break}if(p=E.sibling,p!==null){p.return=E.return,E=p;break}E=E.return}p=E}}function kl(s,o,u,c){s=null;for(var p=o,_=!1;p!==null;){if(!_){if((p.flags&524288)!==0)_=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var E=p.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var b=p.type;Zn(p.pendingProps.value,E.value)||(s!==null?s.push(b):s=[b])}}else if(p===$e.current){if(E=p.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(s!==null?s.push(Eh):s=[Eh])}p=p.return}s!==null&&oy(o,s,u,c),o.flags|=262144}function Xd(s){for(s=s.firstContext;s!==null;){if(!Zn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function fa(s){ha=s,$s=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function yn(s){return pb(ha,s)}function Jd(s,o){return ha===null&&fa(s),pb(s,o)}function pb(s,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},$s===null){if(s===null)throw Error(i(308));$s=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else $s=$s.next=o;return u}var $k=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(u,c){s.push(c)}};this.abort=function(){o.aborted=!0,s.forEach(function(u){return u()})}},Yk=n.unstable_scheduleCallback,Wk=n.unstable_NormalPriority,Ht={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ay(){return{controller:new $k,data:new Map,refCount:0}}function Wc(s){s.refCount--,s.refCount===0&&Yk(Wk,function(){s.controller.abort()})}var Qc=null,ly=0,Ll=0,Ul=null;function Qk(s,o){if(Qc===null){var u=Qc=[];ly=0,Ll=hv(),Ul={status:"pending",value:void 0,then:function(c){u.push(c)}}}return ly++,o.then(gb,gb),o}function gb(){if(--ly===0&&Qc!==null){Ul!==null&&(Ul.status="fulfilled");var s=Qc;Qc=null,Ll=0,Ul=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function Xk(s,o){var u=[],c={status:"pending",value:null,reason:null,then:function(p){u.push(p)}};return s.then(function(){c.status="fulfilled",c.value=o;for(var p=0;p<u.length;p++)(0,u[p])(o)},function(p){for(c.status="rejected",c.reason=p,p=0;p<u.length;p++)(0,u[p])(void 0)}),c}var _b=te.S;te.S=function(s,o){eA=Nn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&Qk(s,o),_b!==null&&_b(s,o)};var da=B(null);function uy(){var s=da.current;return s!==null?s:mt.pooledCache}function Zd(s,o){o===null?de(da,da.current):de(da,o.pool)}function yb(){var s=uy();return s===null?null:{parent:Ht._currentValue,pool:s}}var Fl=Error(i(460)),cy=Error(i(474)),em=Error(i(542)),tm={then:function(){}};function vb(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Tb(s,o,u){switch(u=s[u],u===void 0?s.push(o):u!==o&&(o.then(Bi,Bi),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Sb(s),s;default:if(typeof o.status=="string")o.then(Bi,Bi);else{if(s=mt,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(c){if(o.status==="pending"){var p=o;p.status="fulfilled",p.value=c}},function(c){if(o.status==="pending"){var p=o;p.status="rejected",p.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Sb(s),s}throw pa=o,Fl}}function ma(s){try{var o=s._init;return o(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(pa=u,Fl):u}}var pa=null;function Eb(){if(pa===null)throw Error(i(459));var s=pa;return pa=null,s}function Sb(s){if(s===Fl||s===em)throw Error(i(483))}var Bl=null,Xc=0;function nm(s){var o=Xc;return Xc+=1,Bl===null&&(Bl=[]),Tb(Bl,s,o)}function Jc(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function im(s,o){throw o.$$typeof===v?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function wb(s){function o(j,F){if(s){var $=j.deletions;$===null?(j.deletions=[F],j.flags|=16):$.push(F)}}function u(j,F){if(!s)return null;for(;F!==null;)o(j,F),F=F.sibling;return null}function c(j){for(var F=new Map;j!==null;)j.key!==null?F.set(j.key,j):F.set(j.index,j),j=j.sibling;return F}function p(j,F){return j=Gs(j,F),j.index=0,j.sibling=null,j}function _(j,F,$){return j.index=$,s?($=j.alternate,$!==null?($=$.index,$<F?(j.flags|=67108866,F):$):(j.flags|=67108866,F)):(j.flags|=1048576,F)}function E(j){return s&&j.alternate===null&&(j.flags|=67108866),j}function b(j,F,$,ie){return F===null||F.tag!==6?(F=J_($,j.mode,ie),F.return=j,F):(F=p(F,$),F.return=j,F)}function O(j,F,$,ie){var Te=$.type;return Te===N?ee(j,F,$.props.children,ie,$.key):F!==null&&(F.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&ma(Te)===F.type)?(F=p(F,$.props),Jc(F,$),F.return=j,F):(F=Wd($.type,$.key,$.props,null,j.mode,ie),Jc(F,$),F.return=j,F)}function Y(j,F,$,ie){return F===null||F.tag!==4||F.stateNode.containerInfo!==$.containerInfo||F.stateNode.implementation!==$.implementation?(F=Z_($,j.mode,ie),F.return=j,F):(F=p(F,$.children||[]),F.return=j,F)}function ee(j,F,$,ie,Te){return F===null||F.tag!==7?(F=ua($,j.mode,ie,Te),F.return=j,F):(F=p(F,$),F.return=j,F)}function se(j,F,$){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=J_(""+F,j.mode,$),F.return=j,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return $=Wd(F.type,F.key,F.props,null,j.mode,$),Jc($,F),$.return=j,$;case C:return F=Z_(F,j.mode,$),F.return=j,F;case A:return F=ma(F),se(j,F,$)}if(Rt(F)||q(F))return F=ua(F,j.mode,$,null),F.return=j,F;if(typeof F.then=="function")return se(j,nm(F),$);if(F.$$typeof===k)return se(j,Jd(j,F),$);im(j,F)}return null}function W(j,F,$,ie){var Te=F!==null?F.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return Te!==null?null:b(j,F,""+$,ie);if(typeof $=="object"&&$!==null){switch($.$$typeof){case w:return $.key===Te?O(j,F,$,ie):null;case C:return $.key===Te?Y(j,F,$,ie):null;case A:return $=ma($),W(j,F,$,ie)}if(Rt($)||q($))return Te!==null?null:ee(j,F,$,ie,null);if(typeof $.then=="function")return W(j,F,nm($),ie);if($.$$typeof===k)return W(j,F,Jd(j,$),ie);im(j,$)}return null}function J(j,F,$,ie,Te){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return j=j.get($)||null,b(F,j,""+ie,Te);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case w:return j=j.get(ie.key===null?$:ie.key)||null,O(F,j,ie,Te);case C:return j=j.get(ie.key===null?$:ie.key)||null,Y(F,j,ie,Te);case A:return ie=ma(ie),J(j,F,$,ie,Te)}if(Rt(ie)||q(ie))return j=j.get($)||null,ee(F,j,ie,Te,null);if(typeof ie.then=="function")return J(j,F,$,nm(ie),Te);if(ie.$$typeof===k)return J(j,F,$,Jd(F,ie),Te);im(F,ie)}return null}function ge(j,F,$,ie){for(var Te=null,We=null,ye=F,Oe=F=0,He=null;ye!==null&&Oe<$.length;Oe++){ye.index>Oe?(He=ye,ye=null):He=ye.sibling;var Qe=W(j,ye,$[Oe],ie);if(Qe===null){ye===null&&(ye=He);break}s&&ye&&Qe.alternate===null&&o(j,ye),F=_(Qe,F,Oe),We===null?Te=Qe:We.sibling=Qe,We=Qe,ye=He}if(Oe===$.length)return u(j,ye),Ke&&Ks(j,Oe),Te;if(ye===null){for(;Oe<$.length;Oe++)ye=se(j,$[Oe],ie),ye!==null&&(F=_(ye,F,Oe),We===null?Te=ye:We.sibling=ye,We=ye);return Ke&&Ks(j,Oe),Te}for(ye=c(ye);Oe<$.length;Oe++)He=J(ye,j,Oe,$[Oe],ie),He!==null&&(s&&He.alternate!==null&&ye.delete(He.key===null?Oe:He.key),F=_(He,F,Oe),We===null?Te=He:We.sibling=He,We=He);return s&&ye.forEach(function(lo){return o(j,lo)}),Ke&&Ks(j,Oe),Te}function Se(j,F,$,ie){if($==null)throw Error(i(151));for(var Te=null,We=null,ye=F,Oe=F=0,He=null,Qe=$.next();ye!==null&&!Qe.done;Oe++,Qe=$.next()){ye.index>Oe?(He=ye,ye=null):He=ye.sibling;var lo=W(j,ye,Qe.value,ie);if(lo===null){ye===null&&(ye=He);break}s&&ye&&lo.alternate===null&&o(j,ye),F=_(lo,F,Oe),We===null?Te=lo:We.sibling=lo,We=lo,ye=He}if(Qe.done)return u(j,ye),Ke&&Ks(j,Oe),Te;if(ye===null){for(;!Qe.done;Oe++,Qe=$.next())Qe=se(j,Qe.value,ie),Qe!==null&&(F=_(Qe,F,Oe),We===null?Te=Qe:We.sibling=Qe,We=Qe);return Ke&&Ks(j,Oe),Te}for(ye=c(ye);!Qe.done;Oe++,Qe=$.next())Qe=J(ye,j,Oe,Qe.value,ie),Qe!==null&&(s&&Qe.alternate!==null&&ye.delete(Qe.key===null?Oe:Qe.key),F=_(Qe,F,Oe),We===null?Te=Qe:We.sibling=Qe,We=Qe);return s&&ye.forEach(function(l4){return o(j,l4)}),Ke&&Ks(j,Oe),Te}function ft(j,F,$,ie){if(typeof $=="object"&&$!==null&&$.type===N&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case w:e:{for(var Te=$.key;F!==null;){if(F.key===Te){if(Te=$.type,Te===N){if(F.tag===7){u(j,F.sibling),ie=p(F,$.props.children),ie.return=j,j=ie;break e}}else if(F.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===A&&ma(Te)===F.type){u(j,F.sibling),ie=p(F,$.props),Jc(ie,$),ie.return=j,j=ie;break e}u(j,F);break}else o(j,F);F=F.sibling}$.type===N?(ie=ua($.props.children,j.mode,ie,$.key),ie.return=j,j=ie):(ie=Wd($.type,$.key,$.props,null,j.mode,ie),Jc(ie,$),ie.return=j,j=ie)}return E(j);case C:e:{for(Te=$.key;F!==null;){if(F.key===Te)if(F.tag===4&&F.stateNode.containerInfo===$.containerInfo&&F.stateNode.implementation===$.implementation){u(j,F.sibling),ie=p(F,$.children||[]),ie.return=j,j=ie;break e}else{u(j,F);break}else o(j,F);F=F.sibling}ie=Z_($,j.mode,ie),ie.return=j,j=ie}return E(j);case A:return $=ma($),ft(j,F,$,ie)}if(Rt($))return ge(j,F,$,ie);if(q($)){if(Te=q($),typeof Te!="function")throw Error(i(150));return $=Te.call($),Se(j,F,$,ie)}if(typeof $.then=="function")return ft(j,F,nm($),ie);if($.$$typeof===k)return ft(j,F,Jd(j,$),ie);im(j,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,F!==null&&F.tag===6?(u(j,F.sibling),ie=p(F,$),ie.return=j,j=ie):(u(j,F),ie=J_($,j.mode,ie),ie.return=j,j=ie),E(j)):u(j,F)}return function(j,F,$,ie){try{Xc=0;var Te=ft(j,F,$,ie);return Bl=null,Te}catch(ye){if(ye===Fl||ye===em)throw ye;var We=ei(29,ye,null,j.mode);return We.lanes=ie,We.return=j,We}finally{}}}var ga=wb(!0),bb=wb(!1),Gr=!1;function hy(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fy(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Kr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function $r(s,o,u){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(Je&2)!==0){var p=c.pending;return p===null?o.next=o:(o.next=p.next,p.next=o),c.pending=o,o=Yd(s),ab(s,null,u),o}return $d(s,c,o,u),Yd(s)}function Zc(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var c=o.lanes;c&=s.pendingLanes,u|=c,o.lanes=u,Cc(s,u)}}function dy(s,o){var u=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,u===c)){var p=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var E={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};_===null?p=_=E:_=_.next=E,u=u.next}while(u!==null);_===null?p=_=o:_=_.next=o}else p=_=o;u={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:_,shared:c.shared,callbacks:c.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}var my=!1;function eh(){if(my){var s=Ul;if(s!==null)throw s}}function th(s,o,u,c){my=!1;var p=s.updateQueue;Gr=!1;var _=p.firstBaseUpdate,E=p.lastBaseUpdate,b=p.shared.pending;if(b!==null){p.shared.pending=null;var O=b,Y=O.next;O.next=null,E===null?_=Y:E.next=Y,E=O;var ee=s.alternate;ee!==null&&(ee=ee.updateQueue,b=ee.lastBaseUpdate,b!==E&&(b===null?ee.firstBaseUpdate=Y:b.next=Y,ee.lastBaseUpdate=O))}if(_!==null){var se=p.baseState;E=0,ee=Y=O=null,b=_;do{var W=b.lane&-536870913,J=W!==b.lane;if(J?(qe&W)===W:(c&W)===W){W!==0&&W===Ll&&(my=!0),ee!==null&&(ee=ee.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ge=s,Se=b;W=o;var ft=u;switch(Se.tag){case 1:if(ge=Se.payload,typeof ge=="function"){se=ge.call(ft,se,W);break e}se=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Se.payload,W=typeof ge=="function"?ge.call(ft,se,W):ge,W==null)break e;se=y({},se,W);break e;case 2:Gr=!0}}W=b.callback,W!==null&&(s.flags|=64,J&&(s.flags|=8192),J=p.callbacks,J===null?p.callbacks=[W]:J.push(W))}else J={lane:W,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ee===null?(Y=ee=J,O=se):ee=ee.next=J,E|=W;if(b=b.next,b===null){if(b=p.shared.pending,b===null)break;J=b,b=J.next,J.next=null,p.lastBaseUpdate=J,p.shared.pending=null}}while(!0);ee===null&&(O=se),p.baseState=O,p.firstBaseUpdate=Y,p.lastBaseUpdate=ee,_===null&&(p.shared.lanes=0),Jr|=E,s.lanes=E,s.memoizedState=se}}function Ab(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function Cb(s,o){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)Ab(u[s],o)}var zl=B(null),sm=B(0);function Ib(s,o){s=ir,de(sm,s),de(zl,o),ir=s|o.baseLanes}function py(){de(sm,ir),de(zl,zl.current)}function gy(){ir=sm.current,re(zl),re(sm)}var ti=B(null),wi=null;function Yr(s){var o=s.alternate;de(Vt,Vt.current&1),de(ti,s),wi===null&&(o===null||zl.current!==null||o.memoizedState!==null)&&(wi=s)}function _y(s){de(Vt,Vt.current),de(ti,s),wi===null&&(wi=s)}function Rb(s){s.tag===22?(de(Vt,Vt.current),de(ti,s),wi===null&&(wi=s)):Wr()}function Wr(){de(Vt,Vt.current),de(ti,ti.current)}function ni(s){re(ti),wi===s&&(wi=null),re(Vt)}var Vt=B(0);function rm(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||wv(u)||bv(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ws=0,Ne=null,ct=null,Gt=null,om=!1,jl=!1,_a=!1,am=0,nh=0,ql=null,Jk=0;function xt(){throw Error(i(321))}function yy(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!Zn(s[u],o[u]))return!1;return!0}function vy(s,o,u,c,p,_){return Ws=_,Ne=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,te.H=s===null||s.memoizedState===null?h1:Oy,_a=!1,_=u(c,p),_a=!1,jl&&(_=Db(o,u,c,p)),xb(s),_}function xb(s){te.H=rh;var o=ct!==null&&ct.next!==null;if(Ws=0,Gt=ct=Ne=null,om=!1,nh=0,ql=null,o)throw Error(i(300));s===null||Kt||(s=s.dependencies,s!==null&&Xd(s)&&(Kt=!0))}function Db(s,o,u,c){Ne=s;var p=0;do{if(jl&&(ql=null),nh=0,jl=!1,25<=p)throw Error(i(301));if(p+=1,Gt=ct=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}te.H=f1,_=o(u,c)}while(jl);return _}function Zk(){var s=te.H,o=s.useState()[0];return o=typeof o.then=="function"?ih(o):o,s=s.useState()[0],(ct!==null?ct.memoizedState:null)!==s&&(Ne.flags|=1024),o}function Ty(){var s=am!==0;return am=0,s}function Ey(s,o,u){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~u}function Sy(s){if(om){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}om=!1}Ws=0,Gt=ct=Ne=null,jl=!1,nh=am=0,ql=null}function Mn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Ne.memoizedState=Gt=s:Gt=Gt.next=s,Gt}function kt(){if(ct===null){var s=Ne.alternate;s=s!==null?s.memoizedState:null}else s=ct.next;var o=Gt===null?Ne.memoizedState:Gt.next;if(o!==null)Gt=o,ct=s;else{if(s===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));ct=s,s={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},Gt===null?Ne.memoizedState=Gt=s:Gt=Gt.next=s}return Gt}function lm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ih(s){var o=nh;return nh+=1,ql===null&&(ql=[]),s=Tb(ql,s,o),o=Ne,(Gt===null?o.memoizedState:Gt.next)===null&&(o=o.alternate,te.H=o===null||o.memoizedState===null?h1:Oy),s}function um(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ih(s);if(s.$$typeof===k)return yn(s)}throw Error(i(438,String(s)))}function wy(s){var o=null,u=Ne.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(p){return p.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=lm(),Ne.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(s),c=0;c<s;c++)u[c]=L;return o.index++,u}function Qs(s,o){return typeof o=="function"?o(s):o}function cm(s){var o=kt();return by(o,ct,s)}function by(s,o,u){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=u;var p=s.baseQueue,_=c.pending;if(_!==null){if(p!==null){var E=p.next;p.next=_.next,_.next=E}o.baseQueue=p=_,c.pending=null}if(_=s.baseState,p===null)s.memoizedState=_;else{o=p.next;var b=E=null,O=null,Y=o,ee=!1;do{var se=Y.lane&-536870913;if(se!==Y.lane?(qe&se)===se:(Ws&se)===se){var W=Y.revertLane;if(W===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),se===Ll&&(ee=!0);else if((Ws&W)===W){Y=Y.next,W===Ll&&(ee=!0);continue}else se={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},O===null?(b=O=se,E=_):O=O.next=se,Ne.lanes|=W,Jr|=W;se=Y.action,_a&&u(_,se),_=Y.hasEagerState?Y.eagerState:u(_,se)}else W={lane:se,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},O===null?(b=O=W,E=_):O=O.next=W,Ne.lanes|=se,Jr|=se;Y=Y.next}while(Y!==null&&Y!==o);if(O===null?E=_:O.next=b,!Zn(_,s.memoizedState)&&(Kt=!0,ee&&(u=Ul,u!==null)))throw u;s.memoizedState=_,s.baseState=E,s.baseQueue=O,c.lastRenderedState=_}return p===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Ay(s){var o=kt(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var c=u.dispatch,p=u.pending,_=o.memoizedState;if(p!==null){u.pending=null;var E=p=p.next;do _=s(_,E.action),E=E.next;while(E!==p);Zn(_,o.memoizedState)||(Kt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,c]}function Nb(s,o,u){var c=Ne,p=kt(),_=Ke;if(_){if(u===void 0)throw Error(i(407));u=u()}else u=o();var E=!Zn((ct||p).memoizedState,u);if(E&&(p.memoizedState=u,Kt=!0),p=p.queue,Ry(Ob.bind(null,c,p,s),[s]),p.getSnapshot!==o||E||Gt!==null&&Gt.memoizedState.tag&1){if(c.flags|=2048,Hl(9,{destroy:void 0},Mb.bind(null,c,p,u,o),null),mt===null)throw Error(i(349));_||(Ws&127)!==0||Pb(c,o,u)}return u}function Pb(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Ne.updateQueue,o===null?(o=lm(),Ne.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function Mb(s,o,u,c){o.value=u,o.getSnapshot=c,Vb(o)&&kb(s)}function Ob(s,o,u){return u(function(){Vb(o)&&kb(s)})}function Vb(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!Zn(s,u)}catch{return!0}}function kb(s){var o=la(s,2);o!==null&&Gn(o,s,2)}function Cy(s){var o=Mn();if(typeof s=="function"){var u=s;if(s=u(),_a){di(!0);try{u()}finally{di(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:s},o}function Lb(s,o,u,c){return s.baseState=u,by(s,ct,typeof c=="function"?c:Qs)}function eL(s,o,u,c,p){if(dm(s))throw Error(i(485));if(s=o.action,s!==null){var _={payload:p,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){_.listeners.push(E)}};te.T!==null?u(!0):_.isTransition=!1,c(_),u=o.pending,u===null?(_.next=o.pending=_,Ub(o,_)):(_.next=u.next,o.pending=u.next=_)}}function Ub(s,o){var u=o.action,c=o.payload,p=s.state;if(o.isTransition){var _=te.T,E={};te.T=E;try{var b=u(p,c),O=te.S;O!==null&&O(E,b),Fb(s,o,b)}catch(Y){Iy(s,o,Y)}finally{_!==null&&E.types!==null&&(_.types=E.types),te.T=_}}else try{_=u(p,c),Fb(s,o,_)}catch(Y){Iy(s,o,Y)}}function Fb(s,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(c){Bb(s,o,c)},function(c){return Iy(s,o,c)}):Bb(s,o,u)}function Bb(s,o,u){o.status="fulfilled",o.value=u,zb(o),s.state=u,o=s.pending,o!==null&&(u=o.next,u===o?s.pending=null:(u=u.next,o.next=u,Ub(s,u)))}function Iy(s,o,u){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=u,zb(o),o=o.next;while(o!==c)}s.action=null}function zb(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function jb(s,o){return o}function qb(s,o){if(Ke){var u=mt.formState;if(u!==null){e:{var c=Ne;if(Ke){if(gt){t:{for(var p=gt,_=Si;p.nodeType!==8;){if(!_){p=null;break t}if(p=bi(p.nextSibling),p===null){p=null;break t}}_=p.data,p=_==="F!"||_==="F"?p:null}if(p){gt=bi(p.nextSibling),c=p.data==="F!";break e}}qr(c)}c=!1}c&&(o=u[0])}}return u=Mn(),u.memoizedState=u.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:jb,lastRenderedState:o},u.queue=c,u=l1.bind(null,Ne,c),c.dispatch=u,c=Cy(!1),_=My.bind(null,Ne,!1,c.queue),c=Mn(),p={state:o,dispatch:null,action:s,pending:null},c.queue=p,u=eL.bind(null,Ne,p,_,u),p.dispatch=u,c.memoizedState=s,[o,u,!1]}function Hb(s){var o=kt();return Gb(o,ct,s)}function Gb(s,o,u){if(o=by(s,o,jb)[0],s=cm(Qs)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=ih(o)}catch(E){throw E===Fl?em:E}else c=o;o=kt();var p=o.queue,_=p.dispatch;return u!==o.memoizedState&&(Ne.flags|=2048,Hl(9,{destroy:void 0},tL.bind(null,p,u),null)),[c,_,s]}function tL(s,o){s.action=o}function Kb(s){var o=kt(),u=ct;if(u!==null)return Gb(o,u,s);kt(),o=o.memoizedState,u=kt();var c=u.queue.dispatch;return u.memoizedState=s,[o,c,!1]}function Hl(s,o,u,c){return s={tag:s,create:u,deps:c,inst:o,next:null},o=Ne.updateQueue,o===null&&(o=lm(),Ne.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=s.next=s:(c=u.next,u.next=s,s.next=c,o.lastEffect=s),s}function $b(){return kt().memoizedState}function hm(s,o,u,c){var p=Mn();Ne.flags|=s,p.memoizedState=Hl(1|o,{destroy:void 0},u,c===void 0?null:c)}function fm(s,o,u,c){var p=kt();c=c===void 0?null:c;var _=p.memoizedState.inst;ct!==null&&c!==null&&yy(c,ct.memoizedState.deps)?p.memoizedState=Hl(o,_,u,c):(Ne.flags|=s,p.memoizedState=Hl(1|o,_,u,c))}function Yb(s,o){hm(8390656,8,s,o)}function Ry(s,o){fm(2048,8,s,o)}function nL(s){Ne.flags|=4;var o=Ne.updateQueue;if(o===null)o=lm(),Ne.updateQueue=o,o.events=[s];else{var u=o.events;u===null?o.events=[s]:u.push(s)}}function Wb(s){var o=kt().memoizedState;return nL({ref:o,nextImpl:s}),function(){if((Je&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function Qb(s,o){return fm(4,2,s,o)}function Xb(s,o){return fm(4,4,s,o)}function Jb(s,o){if(typeof o=="function"){s=s();var u=o(s);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Zb(s,o,u){u=u!=null?u.concat([s]):null,fm(4,4,Jb.bind(null,o,s),u)}function xy(){}function e1(s,o){var u=kt();o=o===void 0?null:o;var c=u.memoizedState;return o!==null&&yy(o,c[1])?c[0]:(u.memoizedState=[s,o],s)}function t1(s,o){var u=kt();o=o===void 0?null:o;var c=u.memoizedState;if(o!==null&&yy(o,c[1]))return c[0];if(c=s(),_a){di(!0);try{s()}finally{di(!1)}}return u.memoizedState=[c,o],c}function Dy(s,o,u){return u===void 0||(Ws&1073741824)!==0&&(qe&261930)===0?s.memoizedState=o:(s.memoizedState=u,s=nA(),Ne.lanes|=s,Jr|=s,u)}function n1(s,o,u,c){return Zn(u,o)?u:zl.current!==null?(s=Dy(s,u,c),Zn(s,o)||(Kt=!0),s):(Ws&42)===0||(Ws&1073741824)!==0&&(qe&261930)===0?(Kt=!0,s.memoizedState=u):(s=nA(),Ne.lanes|=s,Jr|=s,o)}function i1(s,o,u,c,p){var _=ae.p;ae.p=_!==0&&8>_?_:8;var E=te.T,b={};te.T=b,My(s,!1,o,u);try{var O=p(),Y=te.S;if(Y!==null&&Y(b,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ee=Xk(O,c);sh(s,o,ee,ri(s))}else sh(s,o,c,ri(s))}catch(se){sh(s,o,{then:function(){},status:"rejected",reason:se},ri())}finally{ae.p=_,E!==null&&b.types!==null&&(E.types=b.types),te.T=E}}function iL(){}function Ny(s,o,u,c){if(s.tag!==5)throw Error(i(476));var p=s1(s).queue;i1(s,p,o,pe,u===null?iL:function(){return r1(s),u(c)})}function s1(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:pe},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qs,lastRenderedState:u},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function r1(s){var o=s1(s);o.next===null&&(o=s.alternate.memoizedState),sh(s,o.next.queue,{},ri())}function Py(){return yn(Eh)}function o1(){return kt().memoizedState}function a1(){return kt().memoizedState}function sL(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var u=ri();s=Kr(u);var c=$r(o,s,u);c!==null&&(Gn(c,o,u),Zc(c,o,u)),o={cache:ay()},s.payload=o;return}o=o.return}}function rL(s,o,u){var c=ri();u={lane:c,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},dm(s)?u1(o,u):(u=Q_(s,o,u,c),u!==null&&(Gn(u,s,c),c1(u,o,c)))}function l1(s,o,u){var c=ri();sh(s,o,u,c)}function sh(s,o,u,c){var p={lane:c,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(dm(s))u1(o,p);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var E=o.lastRenderedState,b=_(E,u);if(p.hasEagerState=!0,p.eagerState=b,Zn(b,E))return $d(s,o,p,0),mt===null&&Kd(),!1}catch{}finally{}if(u=Q_(s,o,p,c),u!==null)return Gn(u,s,c),c1(u,o,c),!0}return!1}function My(s,o,u,c){if(c={lane:2,revertLane:hv(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},dm(s)){if(o)throw Error(i(479))}else o=Q_(s,u,c,2),o!==null&&Gn(o,s,2)}function dm(s){var o=s.alternate;return s===Ne||o!==null&&o===Ne}function u1(s,o){jl=om=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function c1(s,o,u){if((u&4194048)!==0){var c=o.lanes;c&=s.pendingLanes,u|=c,o.lanes=u,Cc(s,u)}}var rh={readContext:yn,use:um,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt};rh.useEffectEvent=xt;var h1={readContext:yn,use:um,useCallback:function(s,o){return Mn().memoizedState=[s,o===void 0?null:o],s},useContext:yn,useEffect:Yb,useImperativeHandle:function(s,o,u){u=u!=null?u.concat([s]):null,hm(4194308,4,Jb.bind(null,o,s),u)},useLayoutEffect:function(s,o){return hm(4194308,4,s,o)},useInsertionEffect:function(s,o){hm(4,2,s,o)},useMemo:function(s,o){var u=Mn();o=o===void 0?null:o;var c=s();if(_a){di(!0);try{s()}finally{di(!1)}}return u.memoizedState=[c,o],c},useReducer:function(s,o,u){var c=Mn();if(u!==void 0){var p=u(o);if(_a){di(!0);try{u(o)}finally{di(!1)}}}else p=o;return c.memoizedState=c.baseState=p,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:p},c.queue=s,s=s.dispatch=rL.bind(null,Ne,s),[c.memoizedState,s]},useRef:function(s){var o=Mn();return s={current:s},o.memoizedState=s},useState:function(s){s=Cy(s);var o=s.queue,u=l1.bind(null,Ne,o);return o.dispatch=u,[s.memoizedState,u]},useDebugValue:xy,useDeferredValue:function(s,o){var u=Mn();return Dy(u,s,o)},useTransition:function(){var s=Cy(!1);return s=i1.bind(null,Ne,s.queue,!0,!1),Mn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,u){var c=Ne,p=Mn();if(Ke){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),mt===null)throw Error(i(349));(qe&127)!==0||Pb(c,o,u)}p.memoizedState=u;var _={value:u,getSnapshot:o};return p.queue=_,Yb(Ob.bind(null,c,_,s),[s]),c.flags|=2048,Hl(9,{destroy:void 0},Mb.bind(null,c,_,u,o),null),u},useId:function(){var s=Mn(),o=mt.identifierPrefix;if(Ke){var u=bs,c=ws;u=(c&~(1<<32-Mt(c)-1)).toString(32)+u,o="_"+o+"R_"+u,u=am++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=Jk++,o="_"+o+"r_"+u.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:Py,useFormState:qb,useActionState:qb,useOptimistic:function(s){var o=Mn();o.memoizedState=o.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=My.bind(null,Ne,!0,u),u.dispatch=o,[s,o]},useMemoCache:wy,useCacheRefresh:function(){return Mn().memoizedState=sL.bind(null,Ne)},useEffectEvent:function(s){var o=Mn(),u={impl:s};return o.memoizedState=u,function(){if((Je&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Oy={readContext:yn,use:um,useCallback:e1,useContext:yn,useEffect:Ry,useImperativeHandle:Zb,useInsertionEffect:Qb,useLayoutEffect:Xb,useMemo:t1,useReducer:cm,useRef:$b,useState:function(){return cm(Qs)},useDebugValue:xy,useDeferredValue:function(s,o){var u=kt();return n1(u,ct.memoizedState,s,o)},useTransition:function(){var s=cm(Qs)[0],o=kt().memoizedState;return[typeof s=="boolean"?s:ih(s),o]},useSyncExternalStore:Nb,useId:o1,useHostTransitionStatus:Py,useFormState:Hb,useActionState:Hb,useOptimistic:function(s,o){var u=kt();return Lb(u,ct,s,o)},useMemoCache:wy,useCacheRefresh:a1};Oy.useEffectEvent=Wb;var f1={readContext:yn,use:um,useCallback:e1,useContext:yn,useEffect:Ry,useImperativeHandle:Zb,useInsertionEffect:Qb,useLayoutEffect:Xb,useMemo:t1,useReducer:Ay,useRef:$b,useState:function(){return Ay(Qs)},useDebugValue:xy,useDeferredValue:function(s,o){var u=kt();return ct===null?Dy(u,s,o):n1(u,ct.memoizedState,s,o)},useTransition:function(){var s=Ay(Qs)[0],o=kt().memoizedState;return[typeof s=="boolean"?s:ih(s),o]},useSyncExternalStore:Nb,useId:o1,useHostTransitionStatus:Py,useFormState:Kb,useActionState:Kb,useOptimistic:function(s,o){var u=kt();return ct!==null?Lb(u,ct,s,o):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:wy,useCacheRefresh:a1};f1.useEffectEvent=Wb;function Vy(s,o,u,c){o=s.memoizedState,u=u(c,o),u=u==null?o:y({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var ky={enqueueSetState:function(s,o,u){s=s._reactInternals;var c=ri(),p=Kr(c);p.payload=o,u!=null&&(p.callback=u),o=$r(s,p,c),o!==null&&(Gn(o,s,c),Zc(o,s,c))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var c=ri(),p=Kr(c);p.tag=1,p.payload=o,u!=null&&(p.callback=u),o=$r(s,p,c),o!==null&&(Gn(o,s,c),Zc(o,s,c))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=ri(),c=Kr(u);c.tag=2,o!=null&&(c.callback=o),o=$r(s,c,u),o!==null&&(Gn(o,s,u),Zc(o,s,u))}};function d1(s,o,u,c,p,_,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,_,E):o.prototype&&o.prototype.isPureReactComponent?!Gc(u,c)||!Gc(p,_):!0}function m1(s,o,u,c){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,c),o.state!==s&&ky.enqueueReplaceState(o,o.state,null)}function ya(s,o){var u=o;if("ref"in o){u={};for(var c in o)c!=="ref"&&(u[c]=o[c])}if(s=s.defaultProps){u===o&&(u=y({},u));for(var p in s)u[p]===void 0&&(u[p]=s[p])}return u}function p1(s){Gd(s)}function g1(s){console.error(s)}function _1(s){Gd(s)}function mm(s,o){try{var u=s.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function y1(s,o,u){try{var c=s.onCaughtError;c(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Ly(s,o,u){return u=Kr(u),u.tag=3,u.payload={element:null},u.callback=function(){mm(s,o)},u}function v1(s){return s=Kr(s),s.tag=3,s}function T1(s,o,u,c){var p=u.type.getDerivedStateFromError;if(typeof p=="function"){var _=c.value;s.payload=function(){return p(_)},s.callback=function(){y1(o,u,c)}}var E=u.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(s.callback=function(){y1(o,u,c),typeof p!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})})}function oL(s,o,u,c,p){if(u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=u.alternate,o!==null&&kl(o,u,p,!0),u=ti.current,u!==null){switch(u.tag){case 31:case 13:return wi===null?Cm():u.alternate===null&&Dt===0&&(Dt=3),u.flags&=-257,u.flags|=65536,u.lanes=p,c===tm?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([c]):o.add(c),lv(s,c,p)),!1;case 22:return u.flags|=65536,c===tm?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([c]):u.add(c)),lv(s,c,p)),!1}throw Error(i(435,u.tag))}return lv(s,c,p),Cm(),!1}if(Ke)return o=ti.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=p,c!==ny&&(s=Error(i(422),{cause:c}),Yc(vi(s,u)))):(c!==ny&&(o=Error(i(423),{cause:c}),Yc(vi(o,u))),s=s.current.alternate,s.flags|=65536,p&=-p,s.lanes|=p,c=vi(c,u),p=Ly(s.stateNode,c,p),dy(s,p),Dt!==4&&(Dt=2)),!1;var _=Error(i(520),{cause:c});if(_=vi(_,u),dh===null?dh=[_]:dh.push(_),Dt!==4&&(Dt=2),o===null)return!0;c=vi(c,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,s=p&-p,u.lanes|=s,s=Ly(u.stateNode,c,s),dy(u,s),!1;case 1:if(o=u.type,_=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Zr===null||!Zr.has(_))))return u.flags|=65536,p&=-p,u.lanes|=p,p=v1(p),T1(p,s,u,c),dy(u,p),!1}u=u.return}while(u!==null);return!1}var Uy=Error(i(461)),Kt=!1;function vn(s,o,u,c){o.child=s===null?bb(o,null,u,c):ga(o,s.child,u,c)}function E1(s,o,u,c,p){u=u.render;var _=o.ref;if("ref"in c){var E={};for(var b in c)b!=="ref"&&(E[b]=c[b])}else E=c;return fa(o),c=vy(s,o,u,E,_,p),b=Ty(),s!==null&&!Kt?(Ey(s,o,p),Xs(s,o,p)):(Ke&&b&&ey(o),o.flags|=1,vn(s,o,c,p),o.child)}function S1(s,o,u,c,p){if(s===null){var _=u.type;return typeof _=="function"&&!X_(_)&&_.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=_,w1(s,o,_,c,p)):(s=Wd(u.type,null,c,o,o.mode,p),s.ref=o.ref,s.return=o,o.child=s)}if(_=s.child,!Ky(s,p)){var E=_.memoizedProps;if(u=u.compare,u=u!==null?u:Gc,u(E,c)&&s.ref===o.ref)return Xs(s,o,p)}return o.flags|=1,s=Gs(_,c),s.ref=o.ref,s.return=o,o.child=s}function w1(s,o,u,c,p){if(s!==null){var _=s.memoizedProps;if(Gc(_,c)&&s.ref===o.ref)if(Kt=!1,o.pendingProps=c=_,Ky(s,p))(s.flags&131072)!==0&&(Kt=!0);else return o.lanes=s.lanes,Xs(s,o,p)}return Fy(s,o,u,c,p)}function b1(s,o,u,c){var p=c.children,_=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|u:u,s!==null){for(c=o.child=s.child,p=0;c!==null;)p=p|c.lanes|c.childLanes,c=c.sibling;c=p&~_}else c=0,o.child=null;return A1(s,o,_,u,c)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Zd(o,_!==null?_.cachePool:null),_!==null?Ib(o,_):py(),Rb(o);else return c=o.lanes=536870912,A1(s,o,_!==null?_.baseLanes|u:u,u,c)}else _!==null?(Zd(o,_.cachePool),Ib(o,_),Wr(),o.memoizedState=null):(s!==null&&Zd(o,null),py(),Wr());return vn(s,o,p,u),o.child}function oh(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function A1(s,o,u,c,p){var _=uy();return _=_===null?null:{parent:Ht._currentValue,pool:_},o.memoizedState={baseLanes:u,cachePool:_},s!==null&&Zd(o,null),py(),Rb(o),s!==null&&kl(s,o,c,!0),o.childLanes=p,null}function pm(s,o){return o=_m({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function C1(s,o,u){return ga(o,s.child,null,u),s=pm(o,o.pendingProps),s.flags|=2,ni(o),o.memoizedState=null,s}function aL(s,o,u){var c=o.pendingProps,p=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(Ke){if(c.mode==="hidden")return s=pm(o,c),o.lanes=536870912,oh(null,s);if(_y(o),(s=gt)?(s=UA(s,Si),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:zr!==null?{id:ws,overflow:bs}:null,retryLane:536870912,hydrationErrors:null},u=ub(s),u.return=o,o.child=u,_n=o,gt=null)):s=null,s===null)throw qr(o);return o.lanes=536870912,null}return pm(o,c)}var _=s.memoizedState;if(_!==null){var E=_.dehydrated;if(_y(o),p)if(o.flags&256)o.flags&=-257,o=C1(s,o,u);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(Kt||kl(s,o,u,!1),p=(u&s.childLanes)!==0,Kt||p){if(c=mt,c!==null&&(E=Ic(c,u),E!==0&&E!==_.retryLane))throw _.retryLane=E,la(s,E),Gn(c,s,E),Uy;Cm(),o=C1(s,o,u)}else s=_.treeContext,gt=bi(E.nextSibling),_n=o,Ke=!0,jr=null,Si=!1,s!==null&&fb(o,s),o=pm(o,c),o.flags|=4096;return o}return s=Gs(s.child,{mode:c.mode,children:c.children}),s.ref=o.ref,o.child=s,s.return=o,s}function gm(s,o){var u=o.ref;if(u===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(o.flags|=4194816)}}function Fy(s,o,u,c,p){return fa(o),u=vy(s,o,u,c,void 0,p),c=Ty(),s!==null&&!Kt?(Ey(s,o,p),Xs(s,o,p)):(Ke&&c&&ey(o),o.flags|=1,vn(s,o,u,p),o.child)}function I1(s,o,u,c,p,_){return fa(o),o.updateQueue=null,u=Db(o,c,u,p),xb(s),c=Ty(),s!==null&&!Kt?(Ey(s,o,_),Xs(s,o,_)):(Ke&&c&&ey(o),o.flags|=1,vn(s,o,u,_),o.child)}function R1(s,o,u,c,p){if(fa(o),o.stateNode===null){var _=Pl,E=u.contextType;typeof E=="object"&&E!==null&&(_=yn(E)),_=new u(c,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=ky,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=c,_.state=o.memoizedState,_.refs={},hy(o),E=u.contextType,_.context=typeof E=="object"&&E!==null?yn(E):Pl,_.state=o.memoizedState,E=u.getDerivedStateFromProps,typeof E=="function"&&(Vy(o,u,E,c),_.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(E=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),E!==_.state&&ky.enqueueReplaceState(_,_.state,null),th(o,c,_,p),eh(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(s===null){_=o.stateNode;var b=o.memoizedProps,O=ya(u,b);_.props=O;var Y=_.context,ee=u.contextType;E=Pl,typeof ee=="object"&&ee!==null&&(E=yn(ee));var se=u.getDerivedStateFromProps;ee=typeof se=="function"||typeof _.getSnapshotBeforeUpdate=="function",b=o.pendingProps!==b,ee||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b||Y!==E)&&m1(o,_,c,E),Gr=!1;var W=o.memoizedState;_.state=W,th(o,c,_,p),eh(),Y=o.memoizedState,b||W!==Y||Gr?(typeof se=="function"&&(Vy(o,u,se,c),Y=o.memoizedState),(O=Gr||d1(o,u,O,c,W,Y,E))?(ee||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=Y),_.props=c,_.state=Y,_.context=E,c=O):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{_=o.stateNode,fy(s,o),E=o.memoizedProps,ee=ya(u,E),_.props=ee,se=o.pendingProps,W=_.context,Y=u.contextType,O=Pl,typeof Y=="object"&&Y!==null&&(O=yn(Y)),b=u.getDerivedStateFromProps,(Y=typeof b=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(E!==se||W!==O)&&m1(o,_,c,O),Gr=!1,W=o.memoizedState,_.state=W,th(o,c,_,p),eh();var J=o.memoizedState;E!==se||W!==J||Gr||s!==null&&s.dependencies!==null&&Xd(s.dependencies)?(typeof b=="function"&&(Vy(o,u,b,c),J=o.memoizedState),(ee=Gr||d1(o,u,ee,c,W,J,O)||s!==null&&s.dependencies!==null&&Xd(s.dependencies))?(Y||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,J,O),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,J,O)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||E===s.memoizedProps&&W===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&W===s.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=J),_.props=c,_.state=J,_.context=O,c=ee):(typeof _.componentDidUpdate!="function"||E===s.memoizedProps&&W===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||E===s.memoizedProps&&W===s.memoizedState||(o.flags|=1024),c=!1)}return _=c,gm(s,o),c=(o.flags&128)!==0,_||c?(_=o.stateNode,u=c&&typeof u.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,s!==null&&c?(o.child=ga(o,s.child,null,p),o.child=ga(o,null,u,p)):vn(s,o,u,p),o.memoizedState=_.state,s=o.child):s=Xs(s,o,p),s}function x1(s,o,u,c){return ca(),o.flags|=256,vn(s,o,u,c),o.child}var By={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zy(s){return{baseLanes:s,cachePool:yb()}}function jy(s,o,u){return s=s!==null?s.childLanes&~u:0,o&&(s|=si),s}function D1(s,o,u){var c=o.pendingProps,p=!1,_=(o.flags&128)!==0,E;if((E=_)||(E=s!==null&&s.memoizedState===null?!1:(Vt.current&2)!==0),E&&(p=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,s===null){if(Ke){if(p?Yr(o):Wr(),(s=gt)?(s=UA(s,Si),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:zr!==null?{id:ws,overflow:bs}:null,retryLane:536870912,hydrationErrors:null},u=ub(s),u.return=o,o.child=u,_n=o,gt=null)):s=null,s===null)throw qr(o);return bv(s)?o.lanes=32:o.lanes=536870912,null}var b=c.children;return c=c.fallback,p?(Wr(),p=o.mode,b=_m({mode:"hidden",children:b},p),c=ua(c,p,u,null),b.return=o,c.return=o,b.sibling=c,o.child=b,c=o.child,c.memoizedState=zy(u),c.childLanes=jy(s,E,u),o.memoizedState=By,oh(null,c)):(Yr(o),qy(o,b))}var O=s.memoizedState;if(O!==null&&(b=O.dehydrated,b!==null)){if(_)o.flags&256?(Yr(o),o.flags&=-257,o=Hy(s,o,u)):o.memoizedState!==null?(Wr(),o.child=s.child,o.flags|=128,o=null):(Wr(),b=c.fallback,p=o.mode,c=_m({mode:"visible",children:c.children},p),b=ua(b,p,u,null),b.flags|=2,c.return=o,b.return=o,c.sibling=b,o.child=c,ga(o,s.child,null,u),c=o.child,c.memoizedState=zy(u),c.childLanes=jy(s,E,u),o.memoizedState=By,o=oh(null,c));else if(Yr(o),bv(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var Y=E.dgst;E=Y,c=Error(i(419)),c.stack="",c.digest=E,Yc({value:c,source:null,stack:null}),o=Hy(s,o,u)}else if(Kt||kl(s,o,u,!1),E=(u&s.childLanes)!==0,Kt||E){if(E=mt,E!==null&&(c=Ic(E,u),c!==0&&c!==O.retryLane))throw O.retryLane=c,la(s,c),Gn(E,s,c),Uy;wv(b)||Cm(),o=Hy(s,o,u)}else wv(b)?(o.flags|=192,o.child=s.child,o=null):(s=O.treeContext,gt=bi(b.nextSibling),_n=o,Ke=!0,jr=null,Si=!1,s!==null&&fb(o,s),o=qy(o,c.children),o.flags|=4096);return o}return p?(Wr(),b=c.fallback,p=o.mode,O=s.child,Y=O.sibling,c=Gs(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,Y!==null?b=Gs(Y,b):(b=ua(b,p,u,null),b.flags|=2),b.return=o,c.return=o,c.sibling=b,o.child=c,oh(null,c),c=o.child,b=s.child.memoizedState,b===null?b=zy(u):(p=b.cachePool,p!==null?(O=Ht._currentValue,p=p.parent!==O?{parent:O,pool:O}:p):p=yb(),b={baseLanes:b.baseLanes|u,cachePool:p}),c.memoizedState=b,c.childLanes=jy(s,E,u),o.memoizedState=By,oh(s.child,c)):(Yr(o),u=s.child,s=u.sibling,u=Gs(u,{mode:"visible",children:c.children}),u.return=o,u.sibling=null,s!==null&&(E=o.deletions,E===null?(o.deletions=[s],o.flags|=16):E.push(s)),o.child=u,o.memoizedState=null,u)}function qy(s,o){return o=_m({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function _m(s,o){return s=ei(22,s,null,o),s.lanes=0,s}function Hy(s,o,u){return ga(o,s.child,null,u),s=qy(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function N1(s,o,u){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o),ry(s.return,o,u)}function Gy(s,o,u,c,p,_){var E=s.memoizedState;E===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:u,tailMode:p,treeForkCount:_}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=c,E.tail=u,E.tailMode=p,E.treeForkCount=_)}function P1(s,o,u){var c=o.pendingProps,p=c.revealOrder,_=c.tail;c=c.children;var E=Vt.current,b=(E&2)!==0;if(b?(E=E&1|2,o.flags|=128):E&=1,de(Vt,E),vn(s,o,c,u),c=Ke?$c:0,!b&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&N1(s,u,o);else if(s.tag===19)N1(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(p){case"forwards":for(u=o.child,p=null;u!==null;)s=u.alternate,s!==null&&rm(s)===null&&(p=u),u=u.sibling;u=p,u===null?(p=o.child,o.child=null):(p=u.sibling,u.sibling=null),Gy(o,!1,p,u,_,c);break;case"backwards":case"unstable_legacy-backwards":for(u=null,p=o.child,o.child=null;p!==null;){if(s=p.alternate,s!==null&&rm(s)===null){o.child=p;break}s=p.sibling,p.sibling=u,u=p,p=s}Gy(o,!0,u,null,_,c);break;case"together":Gy(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function Xs(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Jr|=o.lanes,(u&o.childLanes)===0)if(s!==null){if(kl(s,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,u=Gs(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Gs(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function Ky(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Xd(s)))}function lL(s,o,u){switch(o.tag){case 3:tn(o,o.stateNode.containerInfo),Hr(o,Ht,s.memoizedState.cache),ca();break;case 27:case 5:Ho(o);break;case 4:tn(o,o.stateNode.containerInfo);break;case 10:Hr(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,_y(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(Yr(o),o.flags|=128,null):(u&o.child.childLanes)!==0?D1(s,o,u):(Yr(o),s=Xs(s,o,u),s!==null?s.sibling:null);Yr(o);break;case 19:var p=(s.flags&128)!==0;if(c=(u&o.childLanes)!==0,c||(kl(s,o,u,!1),c=(u&o.childLanes)!==0),p){if(c)return P1(s,o,u);o.flags|=128}if(p=o.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),de(Vt,Vt.current),c)break;return null;case 22:return o.lanes=0,b1(s,o,u,o.pendingProps);case 24:Hr(o,Ht,s.memoizedState.cache)}return Xs(s,o,u)}function M1(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps)Kt=!0;else{if(!Ky(s,u)&&(o.flags&128)===0)return Kt=!1,lL(s,o,u);Kt=(s.flags&131072)!==0}else Kt=!1,Ke&&(o.flags&1048576)!==0&&hb(o,$c,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(s=ma(o.elementType),o.type=s,typeof s=="function")X_(s)?(c=ya(s,c),o.tag=1,o=R1(null,o,s,c,u)):(o.tag=0,o=Fy(null,o,s,c,u));else{if(s!=null){var p=s.$$typeof;if(p===Z){o.tag=11,o=E1(null,o,s,c,u);break e}else if(p===R){o.tag=14,o=S1(null,o,s,c,u);break e}}throw o=dt(s)||s,Error(i(306,o,""))}}return o;case 0:return Fy(s,o,o.type,o.pendingProps,u);case 1:return c=o.type,p=ya(c,o.pendingProps),R1(s,o,c,p,u);case 3:e:{if(tn(o,o.stateNode.containerInfo),s===null)throw Error(i(387));c=o.pendingProps;var _=o.memoizedState;p=_.element,fy(s,o),th(o,c,null,u);var E=o.memoizedState;if(c=E.cache,Hr(o,Ht,c),c!==_.cache&&oy(o,[Ht],u,!0),eh(),c=E.element,_.isDehydrated)if(_={element:c,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=x1(s,o,c,u);break e}else if(c!==p){p=vi(Error(i(424)),o),Yc(p),o=x1(s,o,c,u);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(gt=bi(s.firstChild),_n=o,Ke=!0,jr=null,Si=!0,u=bb(o,null,c,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(ca(),c===p){o=Xs(s,o,u);break e}vn(s,o,c,u)}o=o.child}return o;case 26:return gm(s,o),s===null?(u=HA(o.type,null,o.pendingProps,null))?o.memoizedState=u:Ke||(u=o.type,s=o.pendingProps,c=Mm(Me.current).createElement(u),c[zt]=o,c[ln]=s,Tn(c,u,s),jt(c),o.stateNode=c):o.memoizedState=HA(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Ho(o),s===null&&Ke&&(c=o.stateNode=zA(o.type,o.pendingProps,Me.current),_n=o,Si=!0,p=gt,io(o.type)?(Av=p,gt=bi(c.firstChild)):gt=p),vn(s,o,o.pendingProps.children,u),gm(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Ke&&((p=c=gt)&&(c=UL(c,o.type,o.pendingProps,Si),c!==null?(o.stateNode=c,_n=o,gt=bi(c.firstChild),Si=!1,p=!0):p=!1),p||qr(o)),Ho(o),p=o.type,_=o.pendingProps,E=s!==null?s.memoizedProps:null,c=_.children,Tv(p,_)?c=null:E!==null&&Tv(p,E)&&(o.flags|=32),o.memoizedState!==null&&(p=vy(s,o,Zk,null,null,u),Eh._currentValue=p),gm(s,o),vn(s,o,c,u),o.child;case 6:return s===null&&Ke&&((s=u=gt)&&(u=FL(u,o.pendingProps,Si),u!==null?(o.stateNode=u,_n=o,gt=null,s=!0):s=!1),s||qr(o)),null;case 13:return D1(s,o,u);case 4:return tn(o,o.stateNode.containerInfo),c=o.pendingProps,s===null?o.child=ga(o,null,c,u):vn(s,o,c,u),o.child;case 11:return E1(s,o,o.type,o.pendingProps,u);case 7:return vn(s,o,o.pendingProps,u),o.child;case 8:return vn(s,o,o.pendingProps.children,u),o.child;case 12:return vn(s,o,o.pendingProps.children,u),o.child;case 10:return c=o.pendingProps,Hr(o,o.type,c.value),vn(s,o,c.children,u),o.child;case 9:return p=o.type._context,c=o.pendingProps.children,fa(o),p=yn(p),c=c(p),o.flags|=1,vn(s,o,c,u),o.child;case 14:return S1(s,o,o.type,o.pendingProps,u);case 15:return w1(s,o,o.type,o.pendingProps,u);case 19:return P1(s,o,u);case 31:return aL(s,o,u);case 22:return b1(s,o,u,o.pendingProps);case 24:return fa(o),c=yn(Ht),s===null?(p=uy(),p===null&&(p=mt,_=ay(),p.pooledCache=_,_.refCount++,_!==null&&(p.pooledCacheLanes|=u),p=_),o.memoizedState={parent:c,cache:p},hy(o),Hr(o,Ht,p)):((s.lanes&u)!==0&&(fy(s,o),th(o,null,null,u),eh()),p=s.memoizedState,_=o.memoizedState,p.parent!==c?(p={parent:c,cache:c},o.memoizedState=p,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=p),Hr(o,Ht,c)):(c=_.cache,Hr(o,Ht,c),c!==p.cache&&oy(o,[Ht],u,!0))),vn(s,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Js(s){s.flags|=4}function $y(s,o,u,c,p){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(p&335544128)===p)if(s.stateNode.complete)s.flags|=8192;else if(oA())s.flags|=8192;else throw pa=tm,cy}else s.flags&=-16777217}function O1(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!WA(o))if(oA())s.flags|=8192;else throw pa=tm,cy}function ym(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?bd():536870912,s.lanes|=o,Yl|=o)}function ah(s,o){if(!Ke)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var c=null;u!==null;)u.alternate!==null&&(c=u),u=u.sibling;c===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function _t(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,c=0;if(o)for(var p=s.child;p!==null;)u|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=s,p=p.sibling;else for(p=s.child;p!==null;)u|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=s,p=p.sibling;return s.subtreeFlags|=c,s.childLanes=u,o}function uL(s,o,u){var c=o.pendingProps;switch(ty(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(o),null;case 1:return _t(o),null;case 3:return u=o.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ys(Ht),vt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Vl(o)?Js(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,iy())),_t(o),null;case 26:var p=o.type,_=o.memoizedState;return s===null?(Js(o),_!==null?(_t(o),O1(o,_)):(_t(o),$y(o,p,null,c,u))):_?_!==s.memoizedState?(Js(o),_t(o),O1(o,_)):(_t(o),o.flags&=-16777217):(s=s.memoizedProps,s!==c&&Js(o),_t(o),$y(o,p,s,c,u)),null;case 27:if(dl(o),u=Me.current,p=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Js(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return _t(o),null}s=me.current,Vl(o)?db(o):(s=zA(p,c,u),o.stateNode=s,Js(o))}return _t(o),null;case 5:if(dl(o),p=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Js(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return _t(o),null}if(_=me.current,Vl(o))db(o);else{var E=Mm(Me.current);switch(_){case 1:_=E.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:_=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":_=E.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":_=E.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":_=E.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof c.is=="string"?E.createElement("select",{is:c.is}):E.createElement("select"),c.multiple?_.multiple=!0:c.size&&(_.size=c.size);break;default:_=typeof c.is=="string"?E.createElement(p,{is:c.is}):E.createElement(p)}}_[zt]=o,_[ln]=c;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)_.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=_;e:switch(Tn(_,p,c),p){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Js(o)}}return _t(o),$y(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,u),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==c&&Js(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(s=Me.current,Vl(o)){if(s=o.stateNode,u=o.memoizedProps,c=null,p=_n,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}s[zt]=o,s=!!(s.nodeValue===u||c!==null&&c.suppressHydrationWarning===!0||DA(s.nodeValue,u)),s||qr(o,!0)}else s=Mm(s).createTextNode(c),s[zt]=o,o.stateNode=s}return _t(o),null;case 31:if(u=o.memoizedState,s===null||s.memoizedState!==null){if(c=Vl(o),u!==null){if(s===null){if(!c)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[zt]=o}else ca(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_t(o),s=!1}else u=iy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return o.flags&256?(ni(o),o):(ni(o),null);if((o.flags&128)!==0)throw Error(i(558))}return _t(o),null;case 13:if(c=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(p=Vl(o),c!==null&&c.dehydrated!==null){if(s===null){if(!p)throw Error(i(318));if(p=o.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[zt]=o}else ca(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;_t(o),p=!1}else p=iy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=p),p=!0;if(!p)return o.flags&256?(ni(o),o):(ni(o),null)}return ni(o),(o.flags&128)!==0?(o.lanes=u,o):(u=c!==null,s=s!==null&&s.memoizedState!==null,u&&(c=o.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool),_=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(_=c.memoizedState.cachePool.pool),_!==p&&(c.flags|=2048)),u!==s&&u&&(o.child.flags|=8192),ym(o,o.updateQueue),_t(o),null);case 4:return vt(),s===null&&pv(o.stateNode.containerInfo),_t(o),null;case 10:return Ys(o.type),_t(o),null;case 19:if(re(Vt),c=o.memoizedState,c===null)return _t(o),null;if(p=(o.flags&128)!==0,_=c.rendering,_===null)if(p)ah(c,!1);else{if(Dt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(_=rm(s),_!==null){for(o.flags|=128,ah(c,!1),s=_.updateQueue,o.updateQueue=s,ym(o,s),o.subtreeFlags=0,s=u,u=o.child;u!==null;)lb(u,s),u=u.sibling;return de(Vt,Vt.current&1|2),Ke&&Ks(o,c.treeForkCount),o.child}s=s.sibling}c.tail!==null&&Nn()>wm&&(o.flags|=128,p=!0,ah(c,!1),o.lanes=4194304)}else{if(!p)if(s=rm(_),s!==null){if(o.flags|=128,p=!0,s=s.updateQueue,o.updateQueue=s,ym(o,s),ah(c,!0),c.tail===null&&c.tailMode==="hidden"&&!_.alternate&&!Ke)return _t(o),null}else 2*Nn()-c.renderingStartTime>wm&&u!==536870912&&(o.flags|=128,p=!0,ah(c,!1),o.lanes=4194304);c.isBackwards?(_.sibling=o.child,o.child=_):(s=c.last,s!==null?s.sibling=_:o.child=_,c.last=_)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Nn(),s.sibling=null,u=Vt.current,de(Vt,p?u&1|2:u&1),Ke&&Ks(o,c.treeForkCount),s):(_t(o),null);case 22:case 23:return ni(o),gy(),c=o.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(u&536870912)!==0&&(o.flags&128)===0&&(_t(o),o.subtreeFlags&6&&(o.flags|=8192)):_t(o),u=o.updateQueue,u!==null&&ym(o,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==u&&(o.flags|=2048),s!==null&&re(da),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Ys(Ht),_t(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function cL(s,o){switch(ty(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Ys(Ht),vt(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return dl(o),null;case 31:if(o.memoizedState!==null){if(ni(o),o.alternate===null)throw Error(i(340));ca()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(ni(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));ca()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return re(Vt),null;case 4:return vt(),null;case 10:return Ys(o.type),null;case 22:case 23:return ni(o),gy(),s!==null&&re(da),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Ys(Ht),null;case 25:return null;default:return null}}function V1(s,o){switch(ty(o),o.tag){case 3:Ys(Ht),vt();break;case 26:case 27:case 5:dl(o);break;case 4:vt();break;case 31:o.memoizedState!==null&&ni(o);break;case 13:ni(o);break;case 19:re(Vt);break;case 10:Ys(o.type);break;case 22:case 23:ni(o),gy(),s!==null&&re(da);break;case 24:Ys(Ht)}}function lh(s,o){try{var u=o.updateQueue,c=u!==null?u.lastEffect:null;if(c!==null){var p=c.next;u=p;do{if((u.tag&s)===s){c=void 0;var _=u.create,E=u.inst;c=_(),E.destroy=c}u=u.next}while(u!==p)}}catch(b){rt(o,o.return,b)}}function Qr(s,o,u){try{var c=o.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var _=p.next;c=_;do{if((c.tag&s)===s){var E=c.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,p=o;var O=u,Y=b;try{Y()}catch(ee){rt(p,O,ee)}}}c=c.next}while(c!==_)}}catch(ee){rt(o,o.return,ee)}}function k1(s){var o=s.updateQueue;if(o!==null){var u=s.stateNode;try{Cb(o,u)}catch(c){rt(s,s.return,c)}}}function L1(s,o,u){u.props=ya(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(c){rt(s,o,c)}}function uh(s,o){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof u=="function"?s.refCleanup=u(c):u.current=c}}catch(p){rt(s,o,p)}}function As(s,o){var u=s.ref,c=s.refCleanup;if(u!==null)if(typeof c=="function")try{c()}catch(p){rt(s,o,p)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(p){rt(s,o,p)}else u.current=null}function U1(s){var o=s.type,u=s.memoizedProps,c=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&c.focus();break e;case"img":u.src?c.src=u.src:u.srcSet&&(c.srcset=u.srcSet)}}catch(p){rt(s,s.return,p)}}function Yy(s,o,u){try{var c=s.stateNode;PL(c,s.type,u,o),c[ln]=o}catch(p){rt(s,s.return,p)}}function F1(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&io(s.type)||s.tag===4}function Wy(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||F1(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&io(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Qy(s,o,u){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(s),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Bi));else if(c!==4&&(c===27&&io(s.type)&&(u=s.stateNode,o=null),s=s.child,s!==null))for(Qy(s,o,u),s=s.sibling;s!==null;)Qy(s,o,u),s=s.sibling}function vm(s,o,u){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(c!==4&&(c===27&&io(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(vm(s,o,u),s=s.sibling;s!==null;)vm(s,o,u),s=s.sibling}function B1(s){var o=s.stateNode,u=s.memoizedProps;try{for(var c=s.type,p=o.attributes;p.length;)o.removeAttributeNode(p[0]);Tn(o,c,u),o[zt]=s,o[ln]=u}catch(_){rt(s,s.return,_)}}var Zs=!1,$t=!1,Xy=!1,z1=typeof WeakSet=="function"?WeakSet:Set,cn=null;function hL(s,o){if(s=s.containerInfo,yv=Bm,s=Zw(s),H_(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var c=u.getSelection&&u.getSelection();if(c&&c.rangeCount!==0){u=c.anchorNode;var p=c.anchorOffset,_=c.focusNode;c=c.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var E=0,b=-1,O=-1,Y=0,ee=0,se=s,W=null;t:for(;;){for(var J;se!==u||p!==0&&se.nodeType!==3||(b=E+p),se!==_||c!==0&&se.nodeType!==3||(O=E+c),se.nodeType===3&&(E+=se.nodeValue.length),(J=se.firstChild)!==null;)W=se,se=J;for(;;){if(se===s)break t;if(W===u&&++Y===p&&(b=E),W===_&&++ee===c&&(O=E),(J=se.nextSibling)!==null)break;se=W,W=se.parentNode}se=J}u=b===-1||O===-1?null:{start:b,end:O}}else u=null}u=u||{start:0,end:0}}else u=null;for(vv={focusedElem:s,selectionRange:u},Bm=!1,cn=o;cn!==null;)if(o=cn,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,cn=s;else for(;cn!==null;){switch(o=cn,_=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)p=s[u],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,u=o,p=_.memoizedProps,_=_.memoizedState,c=u.stateNode;try{var ge=ya(u.type,p);s=c.getSnapshotBeforeUpdate(ge,_),c.__reactInternalSnapshotBeforeUpdate=s}catch(Se){rt(u,u.return,Se)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,u=s.nodeType,u===9)Sv(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Sv(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,cn=s;break}cn=o.return}}function j1(s,o,u){var c=u.flags;switch(u.tag){case 0:case 11:case 15:tr(s,u),c&4&&lh(5,u);break;case 1:if(tr(s,u),c&4)if(s=u.stateNode,o===null)try{s.componentDidMount()}catch(E){rt(u,u.return,E)}else{var p=ya(u.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(p,o,s.__reactInternalSnapshotBeforeUpdate)}catch(E){rt(u,u.return,E)}}c&64&&k1(u),c&512&&uh(u,u.return);break;case 3:if(tr(s,u),c&64&&(s=u.updateQueue,s!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{Cb(s,o)}catch(E){rt(u,u.return,E)}}break;case 27:o===null&&c&4&&B1(u);case 26:case 5:tr(s,u),o===null&&c&4&&U1(u),c&512&&uh(u,u.return);break;case 12:tr(s,u);break;case 31:tr(s,u),c&4&&G1(s,u);break;case 13:tr(s,u),c&4&&K1(s,u),c&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=TL.bind(null,u),BL(s,u))));break;case 22:if(c=u.memoizedState!==null||Zs,!c){o=o!==null&&o.memoizedState!==null||$t,p=Zs;var _=$t;Zs=c,($t=o)&&!_?nr(s,u,(u.subtreeFlags&8772)!==0):tr(s,u),Zs=p,$t=_}break;case 30:break;default:tr(s,u)}}function q1(s){var o=s.alternate;o!==null&&(s.alternate=null,q1(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&yl(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Et=null,zn=!1;function er(s,o,u){for(u=u.child;u!==null;)H1(s,o,u),u=u.sibling}function H1(s,o,u){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(ki,u)}catch{}switch(u.tag){case 26:$t||As(u,o),er(s,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:$t||As(u,o);var c=Et,p=zn;io(u.type)&&(Et=u.stateNode,zn=!1),er(s,o,u),yh(u.stateNode),Et=c,zn=p;break;case 5:$t||As(u,o);case 6:if(c=Et,p=zn,Et=null,er(s,o,u),Et=c,zn=p,Et!==null)if(zn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(u.stateNode)}catch(_){rt(u,o,_)}else try{Et.removeChild(u.stateNode)}catch(_){rt(u,o,_)}break;case 18:Et!==null&&(zn?(s=Et,kA(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),nu(s)):kA(Et,u.stateNode));break;case 4:c=Et,p=zn,Et=u.stateNode.containerInfo,zn=!0,er(s,o,u),Et=c,zn=p;break;case 0:case 11:case 14:case 15:Qr(2,u,o),$t||Qr(4,u,o),er(s,o,u);break;case 1:$t||(As(u,o),c=u.stateNode,typeof c.componentWillUnmount=="function"&&L1(u,o,c)),er(s,o,u);break;case 21:er(s,o,u);break;case 22:$t=(c=$t)||u.memoizedState!==null,er(s,o,u),$t=c;break;default:er(s,o,u)}}function G1(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{nu(s)}catch(u){rt(o,o.return,u)}}}function K1(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{nu(s)}catch(u){rt(o,o.return,u)}}function fL(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new z1),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new z1),o;default:throw Error(i(435,s.tag))}}function Tm(s,o){var u=fL(s);o.forEach(function(c){if(!u.has(c)){u.add(c);var p=EL.bind(null,s,c);c.then(p,p)}})}function jn(s,o){var u=o.deletions;if(u!==null)for(var c=0;c<u.length;c++){var p=u[c],_=s,E=o,b=E;e:for(;b!==null;){switch(b.tag){case 27:if(io(b.type)){Et=b.stateNode,zn=!1;break e}break;case 5:Et=b.stateNode,zn=!1;break e;case 3:case 4:Et=b.stateNode.containerInfo,zn=!0;break e}b=b.return}if(Et===null)throw Error(i(160));H1(_,E,p),Et=null,zn=!1,_=p.alternate,_!==null&&(_.return=null),p.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)$1(o,s),o=o.sibling}var Ki=null;function $1(s,o){var u=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:jn(o,s),qn(s),c&4&&(Qr(3,s,s.return),lh(3,s),Qr(5,s,s.return));break;case 1:jn(o,s),qn(s),c&512&&($t||u===null||As(u,u.return)),c&64&&Zs&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?c:u.concat(c))));break;case 26:var p=Ki;if(jn(o,s),qn(s),c&512&&($t||u===null||As(u,u.return)),c&4){var _=u!==null?u.memoizedState:null;if(c=s.memoizedState,u===null)if(c===null)if(s.stateNode===null){e:{c=s.type,u=s.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":_=p.getElementsByTagName("title")[0],(!_||_[hs]||_[zt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=p.createElement(c),p.head.insertBefore(_,p.querySelector("head > title"))),Tn(_,c,u),_[zt]=s,jt(_),c=_;break e;case"link":var E=$A("link","href",p).get(c+(u.href||""));if(E){for(var b=0;b<E.length;b++)if(_=E[b],_.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&_.getAttribute("rel")===(u.rel==null?null:u.rel)&&_.getAttribute("title")===(u.title==null?null:u.title)&&_.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){E.splice(b,1);break t}}_=p.createElement(c),Tn(_,c,u),p.head.appendChild(_);break;case"meta":if(E=$A("meta","content",p).get(c+(u.content||""))){for(b=0;b<E.length;b++)if(_=E[b],_.getAttribute("content")===(u.content==null?null:""+u.content)&&_.getAttribute("name")===(u.name==null?null:u.name)&&_.getAttribute("property")===(u.property==null?null:u.property)&&_.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&_.getAttribute("charset")===(u.charSet==null?null:u.charSet)){E.splice(b,1);break t}}_=p.createElement(c),Tn(_,c,u),p.head.appendChild(_);break;default:throw Error(i(468,c))}_[zt]=s,jt(_),c=_}s.stateNode=c}else YA(p,s.type,s.stateNode);else s.stateNode=KA(p,c,s.memoizedProps);else _!==c?(_===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):_.count--,c===null?YA(p,s.type,s.stateNode):KA(p,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Yy(s,s.memoizedProps,u.memoizedProps)}break;case 27:jn(o,s),qn(s),c&512&&($t||u===null||As(u,u.return)),u!==null&&c&4&&Yy(s,s.memoizedProps,u.memoizedProps);break;case 5:if(jn(o,s),qn(s),c&512&&($t||u===null||As(u,u.return)),s.flags&32){p=s.stateNode;try{Bn(p,"")}catch(ge){rt(s,s.return,ge)}}c&4&&s.stateNode!=null&&(p=s.memoizedProps,Yy(s,p,u!==null?u.memoizedProps:p)),c&1024&&(Xy=!0);break;case 6:if(jn(o,s),qn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,u=s.stateNode;try{u.nodeValue=c}catch(ge){rt(s,s.return,ge)}}break;case 3:if(km=null,p=Ki,Ki=Om(o.containerInfo),jn(o,s),Ki=p,qn(s),c&4&&u!==null&&u.memoizedState.isDehydrated)try{nu(o.containerInfo)}catch(ge){rt(s,s.return,ge)}Xy&&(Xy=!1,Y1(s));break;case 4:c=Ki,Ki=Om(s.stateNode.containerInfo),jn(o,s),qn(s),Ki=c;break;case 12:jn(o,s),qn(s);break;case 31:jn(o,s),qn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Tm(s,c)));break;case 13:jn(o,s),qn(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Sm=Nn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Tm(s,c)));break;case 22:p=s.memoizedState!==null;var O=u!==null&&u.memoizedState!==null,Y=Zs,ee=$t;if(Zs=Y||p,$t=ee||O,jn(o,s),$t=ee,Zs=Y,qn(s),c&8192)e:for(o=s.stateNode,o._visibility=p?o._visibility&-2:o._visibility|1,p&&(u===null||O||Zs||$t||va(s)),u=null,o=s;;){if(o.tag===5||o.tag===26){if(u===null){O=u=o;try{if(_=O.stateNode,p)E=_.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=O.stateNode;var se=O.memoizedProps.style,W=se!=null&&se.hasOwnProperty("display")?se.display:null;b.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(ge){rt(O,O.return,ge)}}}else if(o.tag===6){if(u===null){O=o;try{O.stateNode.nodeValue=p?"":O.memoizedProps}catch(ge){rt(O,O.return,ge)}}}else if(o.tag===18){if(u===null){O=o;try{var J=O.stateNode;p?LA(J,!0):LA(O.stateNode,!1)}catch(ge){rt(O,O.return,ge)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=s.updateQueue,c!==null&&(u=c.retryQueue,u!==null&&(c.retryQueue=null,Tm(s,u))));break;case 19:jn(o,s),qn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,Tm(s,c)));break;case 30:break;case 21:break;default:jn(o,s),qn(s)}}function qn(s){var o=s.flags;if(o&2){try{for(var u,c=s.return;c!==null;){if(F1(c)){u=c;break}c=c.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var p=u.stateNode,_=Wy(s);vm(s,_,p);break;case 5:var E=u.stateNode;u.flags&32&&(Bn(E,""),u.flags&=-33);var b=Wy(s);vm(s,b,E);break;case 3:case 4:var O=u.stateNode.containerInfo,Y=Wy(s);Qy(s,Y,O);break;default:throw Error(i(161))}}catch(ee){rt(s,s.return,ee)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Y1(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Y1(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function tr(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)j1(s,o.alternate,o),o=o.sibling}function va(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Qr(4,o,o.return),va(o);break;case 1:As(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&L1(o,o.return,u),va(o);break;case 27:yh(o.stateNode);case 26:case 5:As(o,o.return),va(o);break;case 22:o.memoizedState===null&&va(o);break;case 30:va(o);break;default:va(o)}s=s.sibling}}function nr(s,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,p=s,_=o,E=_.flags;switch(_.tag){case 0:case 11:case 15:nr(p,_,u),lh(4,_);break;case 1:if(nr(p,_,u),c=_,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(Y){rt(c,c.return,Y)}if(c=_,p=c.updateQueue,p!==null){var b=c.stateNode;try{var O=p.shared.hiddenCallbacks;if(O!==null)for(p.shared.hiddenCallbacks=null,p=0;p<O.length;p++)Ab(O[p],b)}catch(Y){rt(c,c.return,Y)}}u&&E&64&&k1(_),uh(_,_.return);break;case 27:B1(_);case 26:case 5:nr(p,_,u),u&&c===null&&E&4&&U1(_),uh(_,_.return);break;case 12:nr(p,_,u);break;case 31:nr(p,_,u),u&&E&4&&G1(p,_);break;case 13:nr(p,_,u),u&&E&4&&K1(p,_);break;case 22:_.memoizedState===null&&nr(p,_,u),uh(_,_.return);break;case 30:break;default:nr(p,_,u)}o=o.sibling}}function Jy(s,o){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Wc(u))}function Zy(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Wc(s))}function $i(s,o,u,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)W1(s,o,u,c),o=o.sibling}function W1(s,o,u,c){var p=o.flags;switch(o.tag){case 0:case 11:case 15:$i(s,o,u,c),p&2048&&lh(9,o);break;case 1:$i(s,o,u,c);break;case 3:$i(s,o,u,c),p&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Wc(s)));break;case 12:if(p&2048){$i(s,o,u,c),s=o.stateNode;try{var _=o.memoizedProps,E=_.id,b=_.onPostCommit;typeof b=="function"&&b(E,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(O){rt(o,o.return,O)}}else $i(s,o,u,c);break;case 31:$i(s,o,u,c);break;case 13:$i(s,o,u,c);break;case 23:break;case 22:_=o.stateNode,E=o.alternate,o.memoizedState!==null?_._visibility&2?$i(s,o,u,c):ch(s,o):_._visibility&2?$i(s,o,u,c):(_._visibility|=2,Gl(s,o,u,c,(o.subtreeFlags&10256)!==0||!1)),p&2048&&Jy(E,o);break;case 24:$i(s,o,u,c),p&2048&&Zy(o.alternate,o);break;default:$i(s,o,u,c)}}function Gl(s,o,u,c,p){for(p=p&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=s,E=o,b=u,O=c,Y=E.flags;switch(E.tag){case 0:case 11:case 15:Gl(_,E,b,O,p),lh(8,E);break;case 23:break;case 22:var ee=E.stateNode;E.memoizedState!==null?ee._visibility&2?Gl(_,E,b,O,p):ch(_,E):(ee._visibility|=2,Gl(_,E,b,O,p)),p&&Y&2048&&Jy(E.alternate,E);break;case 24:Gl(_,E,b,O,p),p&&Y&2048&&Zy(E.alternate,E);break;default:Gl(_,E,b,O,p)}o=o.sibling}}function ch(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=s,c=o,p=c.flags;switch(c.tag){case 22:ch(u,c),p&2048&&Jy(c.alternate,c);break;case 24:ch(u,c),p&2048&&Zy(c.alternate,c);break;default:ch(u,c)}o=o.sibling}}var hh=8192;function Kl(s,o,u){if(s.subtreeFlags&hh)for(s=s.child;s!==null;)Q1(s,o,u),s=s.sibling}function Q1(s,o,u){switch(s.tag){case 26:Kl(s,o,u),s.flags&hh&&s.memoizedState!==null&&JL(u,Ki,s.memoizedState,s.memoizedProps);break;case 5:Kl(s,o,u);break;case 3:case 4:var c=Ki;Ki=Om(s.stateNode.containerInfo),Kl(s,o,u),Ki=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=hh,hh=16777216,Kl(s,o,u),hh=c):Kl(s,o,u));break;default:Kl(s,o,u)}}function X1(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function fh(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var c=o[u];cn=c,Z1(c,s)}X1(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)J1(s),s=s.sibling}function J1(s){switch(s.tag){case 0:case 11:case 15:fh(s),s.flags&2048&&Qr(9,s,s.return);break;case 3:fh(s);break;case 12:fh(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Em(s)):fh(s);break;default:fh(s)}}function Em(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var c=o[u];cn=c,Z1(c,s)}X1(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Qr(8,o,o.return),Em(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Em(o));break;default:Em(o)}s=s.sibling}}function Z1(s,o){for(;cn!==null;){var u=cn;switch(u.tag){case 0:case 11:case 15:Qr(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var c=u.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Wc(u.memoizedState.cache)}if(c=u.child,c!==null)c.return=u,cn=c;else e:for(u=s;cn!==null;){c=cn;var p=c.sibling,_=c.return;if(q1(c),c===u){cn=null;break e}if(p!==null){p.return=_,cn=p;break e}cn=_}}}var dL={getCacheForType:function(s){var o=yn(Ht),u=o.data.get(s);return u===void 0&&(u=s(),o.data.set(s,u)),u},cacheSignal:function(){return yn(Ht).controller.signal}},mL=typeof WeakMap=="function"?WeakMap:Map,Je=0,mt=null,Fe=null,qe=0,st=0,ii=null,Xr=!1,$l=!1,ev=!1,ir=0,Dt=0,Jr=0,Ta=0,tv=0,si=0,Yl=0,dh=null,Hn=null,nv=!1,Sm=0,eA=0,wm=1/0,bm=null,Zr=null,sn=0,eo=null,Wl=null,sr=0,iv=0,sv=null,tA=null,mh=0,rv=null;function ri(){return(Je&2)!==0&&qe!==0?qe&-qe:te.T!==null?hv():Ad()}function nA(){if(si===0)if((qe&536870912)===0||Ke){var s=$o;$o<<=1,($o&3932160)===0&&($o=262144),si=s}else si=536870912;return s=ti.current,s!==null&&(s.flags|=32),si}function Gn(s,o,u){(s===mt&&(st===2||st===9)||s.cancelPendingCommit!==null)&&(Ql(s,0),to(s,qe,si,!1)),Yo(s,u),((Je&2)===0||s!==mt)&&(s===mt&&((Je&2)===0&&(Ta|=u),Dt===4&&to(s,qe,si,!1)),Cs(s))}function iA(s,o,u){if((Je&6)!==0)throw Error(i(327));var c=!u&&(o&127)===0&&(o&s.expiredLanes)===0||Li(s,o),p=c?_L(s,o):av(s,o,!0),_=c;do{if(p===0){$l&&!c&&to(s,o,0,!1);break}else{if(u=s.current.alternate,_&&!pL(u)){p=av(s,o,!1),_=!1;continue}if(p===2){if(_=o,s.errorRecoveryDisabledLanes&_)var E=0;else E=s.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var b=s;p=dh;var O=b.current.memoizedState.isDehydrated;if(O&&(Ql(b,E).flags|=256),E=av(b,E,!1),E!==2){if(ev&&!O){b.errorRecoveryDisabledLanes|=_,Ta|=_,p=4;break e}_=Hn,Hn=p,_!==null&&(Hn===null?Hn=_:Hn.push.apply(Hn,_))}p=E}if(_=!1,p!==2)continue}}if(p===1){Ql(s,0),to(s,o,0,!0);break}e:{switch(c=s,_=p,_){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:to(c,o,si,!Xr);break e;case 2:Hn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(p=Sm+300-Nn(),10<p)){if(to(c,o,si,!Xr),ls(c,0,!0)!==0)break e;sr=o,c.timeoutHandle=OA(sA.bind(null,c,u,Hn,bm,nv,o,si,Ta,Yl,Xr,_,"Throttled",-0,0),p);break e}sA(c,u,Hn,bm,nv,o,si,Ta,Yl,Xr,_,null,-0,0)}}break}while(!0);Cs(s)}function sA(s,o,u,c,p,_,E,b,O,Y,ee,se,W,J){if(s.timeoutHandle=-1,se=o.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Bi},Q1(o,_,se);var ge=(_&62914560)===_?Sm-Nn():(_&4194048)===_?eA-Nn():0;if(ge=ZL(se,ge),ge!==null){sr=_,s.cancelPendingCommit=ge(fA.bind(null,s,o,_,u,c,p,E,b,O,ee,se,null,W,J)),to(s,_,E,!Y);return}}fA(s,o,_,u,c,p,E,b,O)}function pL(s){for(var o=s;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var c=0;c<u.length;c++){var p=u[c],_=p.getSnapshot;p=p.value;try{if(!Zn(_(),p))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function to(s,o,u,c){o&=~tv,o&=~Ta,s.suspendedLanes|=o,s.pingedLanes&=~o,c&&(s.warmLanes|=o),c=s.expirationTimes;for(var p=o;0<p;){var _=31-Mt(p),E=1<<_;c[_]=-1,p&=~E}u!==0&&Wo(s,u,o)}function Am(){return(Je&6)===0?(ph(0),!1):!0}function ov(){if(Fe!==null){if(st===0)var s=Fe.return;else s=Fe,$s=ha=null,Sy(s),Bl=null,Xc=0,s=Fe;for(;s!==null;)V1(s.alternate,s),s=s.return;Fe=null}}function Ql(s,o){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,VL(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),sr=0,ov(),mt=s,Fe=u=Gs(s.current,null),qe=o,st=0,ii=null,Xr=!1,$l=Li(s,o),ev=!1,Yl=si=tv=Ta=Jr=Dt=0,Hn=dh=null,nv=!1,(o&8)!==0&&(o|=o&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=o;0<c;){var p=31-Mt(c),_=1<<p;o|=s[p],c&=~_}return ir=o,Kd(),u}function rA(s,o){Ne=null,te.H=rh,o===Fl||o===em?(o=Eb(),st=3):o===cy?(o=Eb(),st=4):st=o===Uy?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ii=o,Fe===null&&(Dt=1,mm(s,vi(o,s.current)))}function oA(){var s=ti.current;return s===null?!0:(qe&4194048)===qe?wi===null:(qe&62914560)===qe||(qe&536870912)!==0?s===wi:!1}function aA(){var s=te.H;return te.H=rh,s===null?rh:s}function lA(){var s=te.A;return te.A=dL,s}function Cm(){Dt=4,Xr||(qe&4194048)!==qe&&ti.current!==null||($l=!0),(Jr&134217727)===0&&(Ta&134217727)===0||mt===null||to(mt,qe,si,!1)}function av(s,o,u){var c=Je;Je|=2;var p=aA(),_=lA();(mt!==s||qe!==o)&&(bm=null,Ql(s,o)),o=!1;var E=Dt;e:do try{if(st!==0&&Fe!==null){var b=Fe,O=ii;switch(st){case 8:ov(),E=6;break e;case 3:case 2:case 9:case 6:ti.current===null&&(o=!0);var Y=st;if(st=0,ii=null,Xl(s,b,O,Y),u&&$l){E=0;break e}break;default:Y=st,st=0,ii=null,Xl(s,b,O,Y)}}gL(),E=Dt;break}catch(ee){rA(s,ee)}while(!0);return o&&s.shellSuspendCounter++,$s=ha=null,Je=c,te.H=p,te.A=_,Fe===null&&(mt=null,qe=0,Kd()),E}function gL(){for(;Fe!==null;)uA(Fe)}function _L(s,o){var u=Je;Je|=2;var c=aA(),p=lA();mt!==s||qe!==o?(bm=null,wm=Nn()+500,Ql(s,o)):$l=Li(s,o);e:do try{if(st!==0&&Fe!==null){o=Fe;var _=ii;t:switch(st){case 1:st=0,ii=null,Xl(s,o,_,1);break;case 2:case 9:if(vb(_)){st=0,ii=null,cA(o);break}o=function(){st!==2&&st!==9||mt!==s||(st=7),Cs(s)},_.then(o,o);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:vb(_)?(st=0,ii=null,cA(o)):(st=0,ii=null,Xl(s,o,_,7));break;case 5:var E=null;switch(Fe.tag){case 26:E=Fe.memoizedState;case 5:case 27:var b=Fe;if(E?WA(E):b.stateNode.complete){st=0,ii=null;var O=b.sibling;if(O!==null)Fe=O;else{var Y=b.return;Y!==null?(Fe=Y,Im(Y)):Fe=null}break t}}st=0,ii=null,Xl(s,o,_,5);break;case 6:st=0,ii=null,Xl(s,o,_,6);break;case 8:ov(),Dt=6;break e;default:throw Error(i(462))}}yL();break}catch(ee){rA(s,ee)}while(!0);return $s=ha=null,te.H=c,te.A=p,Je=u,Fe!==null?0:(mt=null,qe=0,Kd(),Dt)}function yL(){for(;Fe!==null&&!L_();)uA(Fe)}function uA(s){var o=M1(s.alternate,s,ir);s.memoizedProps=s.pendingProps,o===null?Im(s):Fe=o}function cA(s){var o=s,u=o.alternate;switch(o.tag){case 15:case 0:o=I1(u,o,o.pendingProps,o.type,void 0,qe);break;case 11:o=I1(u,o,o.pendingProps,o.type.render,o.ref,qe);break;case 5:Sy(o);default:V1(u,o),o=Fe=lb(o,ir),o=M1(u,o,ir)}s.memoizedProps=s.pendingProps,o===null?Im(s):Fe=o}function Xl(s,o,u,c){$s=ha=null,Sy(o),Bl=null,Xc=0;var p=o.return;try{if(oL(s,p,o,u,qe)){Dt=1,mm(s,vi(u,s.current)),Fe=null;return}}catch(_){if(p!==null)throw Fe=p,_;Dt=1,mm(s,vi(u,s.current)),Fe=null;return}o.flags&32768?(Ke||c===1?s=!0:$l||(qe&536870912)!==0?s=!1:(Xr=s=!0,(c===2||c===9||c===3||c===6)&&(c=ti.current,c!==null&&c.tag===13&&(c.flags|=16384))),hA(o,s)):Im(o)}function Im(s){var o=s;do{if((o.flags&32768)!==0){hA(o,Xr);return}s=o.return;var u=uL(o.alternate,o,ir);if(u!==null){Fe=u;return}if(o=o.sibling,o!==null){Fe=o;return}Fe=o=s}while(o!==null);Dt===0&&(Dt=5)}function hA(s,o){do{var u=cL(s.alternate,s);if(u!==null){u.flags&=32767,Fe=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(s=s.sibling,s!==null)){Fe=s;return}Fe=s=u}while(s!==null);Dt=6,Fe=null}function fA(s,o,u,c,p,_,E,b,O){s.cancelPendingCommit=null;do Rm();while(sn!==0);if((Je&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(_=o.lanes|o.childLanes,_|=W_,B_(s,u,_,E,b,O),s===mt&&(Fe=mt=null,qe=0),Wl=o,eo=s,sr=u,iv=_,sv=p,tA=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,SL(Nr,function(){return _A(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=te.T,te.T=null,p=ae.p,ae.p=2,E=Je,Je|=4;try{hL(s,o,u)}finally{Je=E,ae.p=p,te.T=c}}sn=1,dA(),mA(),pA()}}function dA(){if(sn===1){sn=0;var s=eo,o=Wl,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=te.T,te.T=null;var c=ae.p;ae.p=2;var p=Je;Je|=4;try{$1(o,s);var _=vv,E=Zw(s.containerInfo),b=_.focusedElem,O=_.selectionRange;if(E!==b&&b&&b.ownerDocument&&Jw(b.ownerDocument.documentElement,b)){if(O!==null&&H_(b)){var Y=O.start,ee=O.end;if(ee===void 0&&(ee=Y),"selectionStart"in b)b.selectionStart=Y,b.selectionEnd=Math.min(ee,b.value.length);else{var se=b.ownerDocument||document,W=se&&se.defaultView||window;if(W.getSelection){var J=W.getSelection(),ge=b.textContent.length,Se=Math.min(O.start,ge),ft=O.end===void 0?Se:Math.min(O.end,ge);!J.extend&&Se>ft&&(E=ft,ft=Se,Se=E);var j=Xw(b,Se),F=Xw(b,ft);if(j&&F&&(J.rangeCount!==1||J.anchorNode!==j.node||J.anchorOffset!==j.offset||J.focusNode!==F.node||J.focusOffset!==F.offset)){var $=se.createRange();$.setStart(j.node,j.offset),J.removeAllRanges(),Se>ft?(J.addRange($),J.extend(F.node,F.offset)):($.setEnd(F.node,F.offset),J.addRange($))}}}}for(se=[],J=b;J=J.parentNode;)J.nodeType===1&&se.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<se.length;b++){var ie=se[b];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Bm=!!yv,vv=yv=null}finally{Je=p,ae.p=c,te.T=u}}s.current=o,sn=2}}function mA(){if(sn===2){sn=0;var s=eo,o=Wl,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=te.T,te.T=null;var c=ae.p;ae.p=2;var p=Je;Je|=4;try{j1(s,o.alternate,o)}finally{Je=p,ae.p=c,te.T=u}}sn=3}}function pA(){if(sn===4||sn===3){sn=0,yd();var s=eo,o=Wl,u=sr,c=tA;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?sn=5:(sn=0,Wl=eo=null,gA(s,s.pendingLanes));var p=s.pendingLanes;if(p===0&&(Zr=null),zs(u),o=o.stateNode,pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(ki,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=te.T,p=ae.p,ae.p=2,te.T=null;try{for(var _=s.onRecoverableError,E=0;E<c.length;E++){var b=c[E];_(b.value,{componentStack:b.stack})}}finally{te.T=o,ae.p=p}}(sr&3)!==0&&Rm(),Cs(s),p=s.pendingLanes,(u&261930)!==0&&(p&42)!==0?s===rv?mh++:(mh=0,rv=s):mh=0,ph(0)}}function gA(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Wc(o)))}function Rm(){return dA(),mA(),pA(),_A()}function _A(){if(sn!==5)return!1;var s=eo,o=iv;iv=0;var u=zs(sr),c=te.T,p=ae.p;try{ae.p=32>u?32:u,te.T=null,u=sv,sv=null;var _=eo,E=sr;if(sn=0,Wl=eo=null,sr=0,(Je&6)!==0)throw Error(i(331));var b=Je;if(Je|=4,J1(_.current),W1(_,_.current,E,u),Je=b,ph(0,!1),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(ki,_)}catch{}return!0}finally{ae.p=p,te.T=c,gA(s,o)}}function yA(s,o,u){o=vi(u,o),o=Ly(s.stateNode,o,2),s=$r(s,o,2),s!==null&&(Yo(s,2),Cs(s))}function rt(s,o,u){if(s.tag===3)yA(s,s,u);else for(;o!==null;){if(o.tag===3){yA(o,s,u);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Zr===null||!Zr.has(c))){s=vi(u,s),u=v1(2),c=$r(o,u,2),c!==null&&(T1(u,c,o,s),Yo(c,2),Cs(c));break}}o=o.return}}function lv(s,o,u){var c=s.pingCache;if(c===null){c=s.pingCache=new mL;var p=new Set;c.set(o,p)}else p=c.get(o),p===void 0&&(p=new Set,c.set(o,p));p.has(u)||(ev=!0,p.add(u),s=vL.bind(null,s,o,u),o.then(s,s))}function vL(s,o,u){var c=s.pingCache;c!==null&&c.delete(o),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,mt===s&&(qe&u)===u&&(Dt===4||Dt===3&&(qe&62914560)===qe&&300>Nn()-Sm?(Je&2)===0&&Ql(s,0):tv|=u,Yl===qe&&(Yl=0)),Cs(s)}function vA(s,o){o===0&&(o=bd()),s=la(s,o),s!==null&&(Yo(s,o),Cs(s))}function TL(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),vA(s,u)}function EL(s,o){var u=0;switch(s.tag){case 31:case 13:var c=s.stateNode,p=s.memoizedState;p!==null&&(u=p.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),vA(s,u)}function SL(s,o){return nn(s,o)}var xm=null,Jl=null,uv=!1,Dm=!1,cv=!1,no=0;function Cs(s){s!==Jl&&s.next===null&&(Jl===null?xm=Jl=s:Jl=Jl.next=s),Dm=!0,uv||(uv=!0,bL())}function ph(s,o){if(!cv&&Dm){cv=!0;do for(var u=!1,c=xm;c!==null;){if(s!==0){var p=c.pendingLanes;if(p===0)var _=0;else{var E=c.suspendedLanes,b=c.pingedLanes;_=(1<<31-Mt(42|s)+1)-1,_&=p&~(E&~b),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(u=!0,wA(c,_))}else _=qe,_=ls(c,c===mt?_:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(_&3)===0||Li(c,_)||(u=!0,wA(c,_));c=c.next}while(u);cv=!1}}function wL(){TA()}function TA(){Dm=uv=!1;var s=0;no!==0&&OL()&&(s=no);for(var o=Nn(),u=null,c=xm;c!==null;){var p=c.next,_=EA(c,o);_===0?(c.next=null,u===null?xm=p:u.next=p,p===null&&(Jl=u)):(u=c,(s!==0||(_&3)!==0)&&(Dm=!0)),c=p}sn!==0&&sn!==5||ph(s),no!==0&&(no=0)}function EA(s,o){for(var u=s.suspendedLanes,c=s.pingedLanes,p=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var E=31-Mt(_),b=1<<E,O=p[E];O===-1?((b&u)===0||(b&c)!==0)&&(p[E]=F_(b,o)):O<=o&&(s.expiredLanes|=b),_&=~b}if(o=mt,u=qe,u=ls(s,s===o?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,u===0||s===o&&(st===2||st===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&Dr(c),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||Li(s,u)){if(o=u&-u,o===s.callbackPriority)return o;switch(c!==null&&Dr(c),zs(u)){case 2:case 8:u=Ac;break;case 32:u=Nr;break;case 268435456:u=vd;break;default:u=Nr}return c=SA.bind(null,s),u=nn(u,c),s.callbackPriority=o,s.callbackNode=u,o}return c!==null&&c!==null&&Dr(c),s.callbackPriority=2,s.callbackNode=null,2}function SA(s,o){if(sn!==0&&sn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Rm()&&s.callbackNode!==u)return null;var c=qe;return c=ls(s,s===mt?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(iA(s,c,o),EA(s,Nn()),s.callbackNode!=null&&s.callbackNode===u?SA.bind(null,s):null)}function wA(s,o){if(Rm())return null;iA(s,o,!0)}function bL(){kL(function(){(Je&6)!==0?nn(bc,wL):TA()})}function hv(){if(no===0){var s=Ll;s===0&&(s=os,os<<=1,(os&261888)===0&&(os=256)),no=s}return no}function bA(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Sl(""+s)}function AA(s,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,s.id&&u.setAttribute("form",s.id),o.parentNode.insertBefore(u,o),s=new FormData(s),u.parentNode.removeChild(u),s}function AL(s,o,u,c,p){if(o==="submit"&&u&&u.stateNode===p){var _=bA((p[ln]||null).action),E=c.submitter;E&&(o=(o=E[ln]||null)?bA(o.formAction):E.getAttribute("formAction"),o!==null&&(_=o,E=null));var b=new vs("action","action",null,c,p);s.push({event:b,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(no!==0){var O=E?AA(p,E):new FormData(p);Ny(u,{pending:!0,data:O,method:p.method,action:_},null,O)}}else typeof _=="function"&&(b.preventDefault(),O=E?AA(p,E):new FormData(p),Ny(u,{pending:!0,data:O,method:p.method,action:_},_,O))},currentTarget:p}]})}}for(var fv=0;fv<Y_.length;fv++){var dv=Y_[fv],CL=dv.toLowerCase(),IL=dv[0].toUpperCase()+dv.slice(1);Gi(CL,"on"+IL)}Gi(nb,"onAnimationEnd"),Gi(ib,"onAnimationIteration"),Gi(sb,"onAnimationStart"),Gi("dblclick","onDoubleClick"),Gi("focusin","onFocus"),Gi("focusout","onBlur"),Gi(qk,"onTransitionRun"),Gi(Hk,"onTransitionStart"),Gi(Gk,"onTransitionCancel"),Gi(rb,"onTransitionEnd"),ps("onMouseEnter",["mouseout","mouseover"]),ps("onMouseLeave",["mouseout","mouseover"]),ps("onPointerEnter",["pointerout","pointerover"]),ps("onPointerLeave",["pointerout","pointerover"]),ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ms("onBeforeInput",["compositionend","keypress","textInput","paste"]),ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gh));function CA(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var c=s[u],p=c.event;c=c.listeners;e:{var _=void 0;if(o)for(var E=c.length-1;0<=E;E--){var b=c[E],O=b.instance,Y=b.currentTarget;if(b=b.listener,O!==_&&p.isPropagationStopped())break e;_=b,p.currentTarget=Y;try{_(p)}catch(ee){Gd(ee)}p.currentTarget=null,_=O}else for(E=0;E<c.length;E++){if(b=c[E],O=b.instance,Y=b.currentTarget,b=b.listener,O!==_&&p.isPropagationStopped())break e;_=b,p.currentTarget=Y;try{_(p)}catch(ee){Gd(ee)}p.currentTarget=null,_=O}}}}function Be(s,o){var u=o[_l];u===void 0&&(u=o[_l]=new Set);var c=s+"__bubble";u.has(c)||(IA(o,s,2,!1),u.add(c))}function mv(s,o,u){var c=0;o&&(c|=4),IA(u,s,c,o)}var Nm="_reactListening"+Math.random().toString(36).slice(2);function pv(s){if(!s[Nm]){s[Nm]=!0,Rc.forEach(function(u){u!=="selectionchange"&&(RL.has(u)||mv(u,!1,s),mv(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Nm]||(o[Nm]=!0,mv("selectionchange",!1,o))}}function IA(s,o,u,c){switch(nC(o)){case 2:var p=n4;break;case 8:p=i4;break;default:p=Dv}u=p.bind(null,o,u,s),p=void 0,!ea||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(p=!0),c?p!==void 0?s.addEventListener(o,u,{capture:!0,passive:p}):s.addEventListener(o,u,!0):p!==void 0?s.addEventListener(o,u,{passive:p}):s.addEventListener(o,u,!1)}function gv(s,o,u,c,p){var _=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var b=c.stateNode.containerInfo;if(b===p)break;if(E===4)for(E=c.return;E!==null;){var O=E.tag;if((O===3||O===4)&&E.stateNode.containerInfo===p)return;E=E.return}for(;b!==null;){if(E=fs(b),E===null)return;if(O=E.tag,O===5||O===6||O===26||O===27){c=_=E;continue e}b=b.parentNode}}c=c.return}Lr(function(){var Y=_,ee=pi(u),se=[];e:{var W=ob.get(s);if(W!==void 0){var J=vs,ge=s;switch(s){case"keypress":if(na(u)===0)break e;case"keydown":case"keyup":J=jd;break;case"focusin":ge="focus",J=sa;break;case"focusout":ge="blur",J=sa;break;case"beforeblur":case"afterblur":J=sa;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=zc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=Md;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=T;break;case nb:case ib:case sb:J=Vd;break;case rb:J=I;break;case"scroll":case"scrollend":J=Bc;break;case"wheel":J=X;break;case"copy":case"cut":case"paste":J=kd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Hs;break;case"toggle":case"beforetoggle":J=De}var Se=(o&4)!==0,ft=!Se&&(s==="scroll"||s==="scrollend"),j=Se?W!==null?W+"Capture":null:W;Se=[];for(var F=Y,$;F!==null;){var ie=F;if($=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||$===null||j===null||(ie=zi(F,j),ie!=null&&Se.push(_h(F,ie,$))),ft)break;F=F.return}0<Se.length&&(W=new J(W,ge,null,u,ee),se.push({event:W,listeners:Se}))}}if((o&7)===0){e:{if(W=s==="mouseover"||s==="pointerover",J=s==="mouseout"||s==="pointerout",W&&u!==Lc&&(ge=u.relatedTarget||u.fromElement)&&(fs(ge)||ge[cs]))break e;if((J||W)&&(W=ee.window===ee?ee:(W=ee.ownerDocument)?W.defaultView||W.parentWindow:window,J?(ge=u.relatedTarget||u.toElement,J=Y,ge=ge?fs(ge):null,ge!==null&&(ft=a(ge),Se=ge.tag,ge!==ft||Se!==5&&Se!==27&&Se!==6)&&(ge=null)):(J=null,ge=Y),J!==ge)){if(Se=zc,ie="onMouseLeave",j="onMouseEnter",F="mouse",(s==="pointerout"||s==="pointerover")&&(Se=Hs,ie="onPointerLeave",j="onPointerEnter",F="pointer"),ft=J==null?W:Xn(J),$=ge==null?W:Xn(ge),W=new Se(ie,F+"leave",J,u,ee),W.target=ft,W.relatedTarget=$,ie=null,fs(ee)===Y&&(Se=new Se(j,F+"enter",ge,u,ee),Se.target=$,Se.relatedTarget=ft,ie=Se),ft=ie,J&&ge)t:{for(Se=xL,j=J,F=ge,$=0,ie=j;ie;ie=Se(ie))$++;ie=0;for(var Te=F;Te;Te=Se(Te))ie++;for(;0<$-ie;)j=Se(j),$--;for(;0<ie-$;)F=Se(F),ie--;for(;$--;){if(j===F||F!==null&&j===F.alternate){Se=j;break t}j=Se(j),F=Se(F)}Se=null}else Se=null;J!==null&&RA(se,W,J,Se,!1),ge!==null&&ft!==null&&RA(se,ft,ge,Se,!0)}}e:{if(W=Y?Xn(Y):window,J=W.nodeName&&W.nodeName.toLowerCase(),J==="select"||J==="input"&&W.type==="file")var We=Gw;else if(qw(W))if(Kw)We=Bk;else{We=Uk;var ye=Lk}else J=W.nodeName,!J||J.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Y&&El(Y.elementType)&&(We=Gw):We=Fk;if(We&&(We=We(s,Y))){Hw(se,We,u,ee);break e}ye&&ye(s,W,Y),s==="focusout"&&Y&&W.type==="number"&&Y.memoizedProps.value!=null&&Oc(W,"number",W.value)}switch(ye=Y?Xn(Y):window,s){case"focusin":(qw(ye)||ye.contentEditable==="true")&&(xl=ye,G_=Y,Kc=null);break;case"focusout":Kc=G_=xl=null;break;case"mousedown":K_=!0;break;case"contextmenu":case"mouseup":case"dragend":K_=!1,eb(se,u,ee);break;case"selectionchange":if(jk)break;case"keydown":case"keyup":eb(se,u,ee)}var Oe;if(Xe)e:{switch(s){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Rl?ra(s,u)&&(He="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(He="onCompositionStart");He&&(Ss&&u.locale!=="ko"&&(Rl||He!=="onCompositionStart"?He==="onCompositionEnd"&&Rl&&(Oe=Fc()):(ys=ee,Uc="value"in ys?ys.value:ys.textContent,Rl=!0)),ye=Pm(Y,He),0<ye.length&&(He=new Es(He,s,null,u,ee),se.push({event:He,listeners:ye}),Oe?He.data=Oe:(Oe=Il(u),Oe!==null&&(He.data=Oe)))),(Oe=_i?Mk(s,u):Ok(s,u))&&(He=Pm(Y,"onBeforeInput"),0<He.length&&(ye=new Es("onBeforeInput","beforeinput",null,u,ee),se.push({event:ye,listeners:He}),ye.data=Oe)),AL(se,s,Y,u,ee)}CA(se,o)})}function _h(s,o,u){return{instance:s,listener:o,currentTarget:u}}function Pm(s,o){for(var u=o+"Capture",c=[];s!==null;){var p=s,_=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||_===null||(p=zi(s,u),p!=null&&c.unshift(_h(s,p,_)),p=zi(s,o),p!=null&&c.push(_h(s,p,_))),s.tag===3)return c;s=s.return}return[]}function xL(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function RA(s,o,u,c,p){for(var _=o._reactName,E=[];u!==null&&u!==c;){var b=u,O=b.alternate,Y=b.stateNode;if(b=b.tag,O!==null&&O===c)break;b!==5&&b!==26&&b!==27||Y===null||(O=Y,p?(Y=zi(u,_),Y!=null&&E.unshift(_h(u,Y,O))):p||(Y=zi(u,_),Y!=null&&E.push(_h(u,Y,O)))),u=u.return}E.length!==0&&s.push({event:o,listeners:E})}var DL=/\r\n?/g,NL=/\u0000|\uFFFD/g;function xA(s){return(typeof s=="string"?s:""+s).replace(DL,`
`).replace(NL,"")}function DA(s,o){return o=xA(o),xA(s)===o}function ht(s,o,u,c,p,_){switch(u){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||Bn(s,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&Bn(s,""+c);break;case"className":Jn(s,"class",c);break;case"tabIndex":Jn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Jn(s,u,c);break;case"style":kc(s,c,_);break;case"data":if(o!=="object"){Jn(s,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||u!=="href")){s.removeAttribute(u);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(u);break}c=Sl(""+c),s.setAttribute(u,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(u==="formAction"?(o!=="input"&&ht(s,o,"name",p.name,p,null),ht(s,o,"formEncType",p.formEncType,p,null),ht(s,o,"formMethod",p.formMethod,p,null),ht(s,o,"formTarget",p.formTarget,p,null)):(ht(s,o,"encType",p.encType,p,null),ht(s,o,"method",p.method,p,null),ht(s,o,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(u);break}c=Sl(""+c),s.setAttribute(u,c);break;case"onClick":c!=null&&(s.onclick=Bi);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(u=c.__html,u!=null){if(p.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}u=Sl(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(u,""+c):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":c===!0?s.setAttribute(u,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(u,c):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(u,c):s.removeAttribute(u);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(u):s.setAttribute(u,c);break;case"popover":Be("beforetoggle",s),Be("toggle",s),vl(s,"popover",c);break;case"xlinkActuate":qt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":qt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":qt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":qt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":qt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":qt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":qt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":qt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":qt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":vl(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Pd.get(u)||u,vl(s,u,c))}}function _v(s,o,u,c,p,_){switch(u){case"style":kc(s,c,_);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(u=c.__html,u!=null){if(p.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof c=="string"?Bn(s,c):(typeof c=="number"||typeof c=="bigint")&&Bn(s,""+c);break;case"onScroll":c!=null&&Be("scroll",s);break;case"onScrollEnd":c!=null&&Be("scrollend",s);break;case"onClick":c!=null&&(s.onclick=Bi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xc.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(p=u.endsWith("Capture"),o=u.slice(2,p?u.length-7:void 0),_=s[ln]||null,_=_!=null?_[u]:null,typeof _=="function"&&s.removeEventListener(o,_,p),typeof c=="function")){typeof _!="function"&&_!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(o,c,p);break e}u in s?s[u]=c:c===!0?s.setAttribute(u,""):vl(s,u,c)}}}function Tn(s,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",s),Be("load",s);var c=!1,p=!1,_;for(_ in u)if(u.hasOwnProperty(_)){var E=u[_];if(E!=null)switch(_){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ht(s,o,_,E,u,null)}}p&&ht(s,o,"srcSet",u.srcSet,u,null),c&&ht(s,o,"src",u.src,u,null);return;case"input":Be("invalid",s);var b=_=E=p=null,O=null,Y=null;for(c in u)if(u.hasOwnProperty(c)){var ee=u[c];if(ee!=null)switch(c){case"name":p=ee;break;case"type":E=ee;break;case"checked":O=ee;break;case"defaultChecked":Y=ee;break;case"value":_=ee;break;case"defaultValue":b=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,o));break;default:ht(s,o,c,ee,u,null)}}xd(s,_,b,O,Y,E,p,!1);return;case"select":Be("invalid",s),c=E=_=null;for(p in u)if(u.hasOwnProperty(p)&&(b=u[p],b!=null))switch(p){case"value":_=b;break;case"defaultValue":E=b;break;case"multiple":c=b;default:ht(s,o,p,b,u,null)}o=_,u=E,s.multiple=!!c,o!=null?Mr(s,!!c,o,!1):u!=null&&Mr(s,!!c,u,!0);return;case"textarea":Be("invalid",s),_=p=c=null;for(E in u)if(u.hasOwnProperty(E)&&(b=u[E],b!=null))switch(E){case"value":c=b;break;case"defaultValue":p=b;break;case"children":_=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:ht(s,o,E,b,u,null)}Or(s,c,p,_);return;case"option":for(O in u)if(u.hasOwnProperty(O)&&(c=u[O],c!=null))switch(O){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ht(s,o,O,c,u,null)}return;case"dialog":Be("beforetoggle",s),Be("toggle",s),Be("cancel",s),Be("close",s);break;case"iframe":case"object":Be("load",s);break;case"video":case"audio":for(c=0;c<gh.length;c++)Be(gh[c],s);break;case"image":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"embed":case"source":case"link":Be("error",s),Be("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in u)if(u.hasOwnProperty(Y)&&(c=u[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ht(s,o,Y,c,u,null)}return;default:if(El(o)){for(ee in u)u.hasOwnProperty(ee)&&(c=u[ee],c!==void 0&&_v(s,o,ee,c,u,void 0));return}}for(b in u)u.hasOwnProperty(b)&&(c=u[b],c!=null&&ht(s,o,b,c,u,null))}function PL(s,o,u,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,_=null,E=null,b=null,O=null,Y=null,ee=null;for(J in u){var se=u[J];if(u.hasOwnProperty(J)&&se!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":O=se;default:c.hasOwnProperty(J)||ht(s,o,J,null,c,se)}}for(var W in c){var J=c[W];if(se=u[W],c.hasOwnProperty(W)&&(J!=null||se!=null))switch(W){case"type":_=J;break;case"name":p=J;break;case"checked":Y=J;break;case"defaultChecked":ee=J;break;case"value":E=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,o));break;default:J!==se&&ht(s,o,W,J,c,se)}}Tl(s,E,b,O,Y,ee,_,p);return;case"select":J=E=b=W=null;for(_ in u)if(O=u[_],u.hasOwnProperty(_)&&O!=null)switch(_){case"value":break;case"multiple":J=O;default:c.hasOwnProperty(_)||ht(s,o,_,null,c,O)}for(p in c)if(_=c[p],O=u[p],c.hasOwnProperty(p)&&(_!=null||O!=null))switch(p){case"value":W=_;break;case"defaultValue":b=_;break;case"multiple":E=_;default:_!==O&&ht(s,o,p,_,c,O)}o=b,u=E,c=J,W!=null?Mr(s,!!u,W,!1):!!c!=!!u&&(o!=null?Mr(s,!!u,o,!0):Mr(s,!!u,u?[]:"",!1));return;case"textarea":J=W=null;for(b in u)if(p=u[b],u.hasOwnProperty(b)&&p!=null&&!c.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ht(s,o,b,null,c,p)}for(E in c)if(p=c[E],_=u[E],c.hasOwnProperty(E)&&(p!=null||_!=null))switch(E){case"value":W=p;break;case"defaultValue":J=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==_&&ht(s,o,E,p,c,_)}Dd(s,W,J);return;case"option":for(var ge in u)if(W=u[ge],u.hasOwnProperty(ge)&&W!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":s.selected=!1;break;default:ht(s,o,ge,null,c,W)}for(O in c)if(W=c[O],J=u[O],c.hasOwnProperty(O)&&W!==J&&(W!=null||J!=null))switch(O){case"selected":s.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:ht(s,o,O,W,c,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in u)W=u[Se],u.hasOwnProperty(Se)&&W!=null&&!c.hasOwnProperty(Se)&&ht(s,o,Se,null,c,W);for(Y in c)if(W=c[Y],J=u[Y],c.hasOwnProperty(Y)&&W!==J&&(W!=null||J!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,o));break;default:ht(s,o,Y,W,c,J)}return;default:if(El(o)){for(var ft in u)W=u[ft],u.hasOwnProperty(ft)&&W!==void 0&&!c.hasOwnProperty(ft)&&_v(s,o,ft,void 0,c,W);for(ee in c)W=c[ee],J=u[ee],!c.hasOwnProperty(ee)||W===J||W===void 0&&J===void 0||_v(s,o,ee,W,c,J);return}}for(var j in u)W=u[j],u.hasOwnProperty(j)&&W!=null&&!c.hasOwnProperty(j)&&ht(s,o,j,null,c,W);for(se in c)W=c[se],J=u[se],!c.hasOwnProperty(se)||W===J||W==null&&J==null||ht(s,o,se,W,c,J)}function NA(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ML(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,u=performance.getEntriesByType("resource"),c=0;c<u.length;c++){var p=u[c],_=p.transferSize,E=p.initiatorType,b=p.duration;if(_&&b&&NA(E)){for(E=0,b=p.responseEnd,c+=1;c<u.length;c++){var O=u[c],Y=O.startTime;if(Y>b)break;var ee=O.transferSize,se=O.initiatorType;ee&&NA(se)&&(O=O.responseEnd,E+=ee*(O<b?1:(b-Y)/(O-Y)))}if(--c,o+=8*(_+E)/(p.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var yv=null,vv=null;function Mm(s){return s.nodeType===9?s:s.ownerDocument}function PA(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function MA(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function Tv(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Ev=null;function OL(){var s=window.event;return s&&s.type==="popstate"?s===Ev?!1:(Ev=s,!0):(Ev=null,!1)}var OA=typeof setTimeout=="function"?setTimeout:void 0,VL=typeof clearTimeout=="function"?clearTimeout:void 0,VA=typeof Promise=="function"?Promise:void 0,kL=typeof queueMicrotask=="function"?queueMicrotask:typeof VA<"u"?function(s){return VA.resolve(null).then(s).catch(LL)}:OA;function LL(s){setTimeout(function(){throw s})}function io(s){return s==="head"}function kA(s,o){var u=o,c=0;do{var p=u.nextSibling;if(s.removeChild(u),p&&p.nodeType===8)if(u=p.data,u==="/$"||u==="/&"){if(c===0){s.removeChild(p),nu(o);return}c--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")c++;else if(u==="html")yh(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,yh(u);for(var _=u.firstChild;_;){var E=_.nextSibling,b=_.nodeName;_[hs]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&_.rel.toLowerCase()==="stylesheet"||u.removeChild(_),_=E}}else u==="body"&&yh(s.ownerDocument.body);u=p}while(u);nu(o)}function LA(s,o){var u=s;s=0;do{var c=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),c&&c.nodeType===8)if(u=c.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=c}while(u)}function Sv(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Sv(u),yl(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function UL(s,o,u,c){for(;s.nodeType===1;){var p=u;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[hs])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==p.rel||s.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||s.getAttribute("title")!==(p.title==null?null:p.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(p.src==null?null:p.src)||s.getAttribute("type")!==(p.type==null?null:p.type)||s.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var _=p.name==null?null:""+p.name;if(p.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=bi(s.nextSibling),s===null)break}return null}function FL(s,o,u){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=bi(s.nextSibling),s===null))return null;return s}function UA(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=bi(s.nextSibling),s===null))return null;return s}function wv(s){return s.data==="$?"||s.data==="$~"}function bv(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function BL(s,o){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||u.readyState!=="loading")o();else{var c=function(){o(),u.removeEventListener("DOMContentLoaded",c)};u.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function bi(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var Av=null;function FA(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(o===0)return bi(s.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}s=s.nextSibling}return null}function BA(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return s;o--}else u!=="/$"&&u!=="/&"||o++}s=s.previousSibling}return null}function zA(s,o,u){switch(o=Mm(u),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function yh(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);yl(s)}var Ai=new Map,jA=new Set;function Om(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var rr=ae.d;ae.d={f:zL,r:jL,D:qL,C:HL,L:GL,m:KL,X:YL,S:$L,M:WL};function zL(){var s=rr.f(),o=Am();return s||o}function jL(s){var o=mi(s);o!==null&&o.tag===5&&o.type==="form"?r1(o):rr.r(s)}var Zl=typeof document>"u"?null:document;function qA(s,o,u){var c=Zl;if(c&&typeof o=="string"&&o){var p=Fn(o);p='link[rel="'+s+'"][href="'+p+'"]',typeof u=="string"&&(p+='[crossorigin="'+u+'"]'),jA.has(p)||(jA.add(p),s={rel:s,crossOrigin:u,href:o},c.querySelector(p)===null&&(o=c.createElement("link"),Tn(o,"link",s),jt(o),c.head.appendChild(o)))}}function qL(s){rr.D(s),qA("dns-prefetch",s,null)}function HL(s,o){rr.C(s,o),qA("preconnect",s,o)}function GL(s,o,u){rr.L(s,o,u);var c=Zl;if(c&&s&&o){var p='link[rel="preload"][as="'+Fn(o)+'"]';o==="image"&&u&&u.imageSrcSet?(p+='[imagesrcset="'+Fn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(p+='[imagesizes="'+Fn(u.imageSizes)+'"]')):p+='[href="'+Fn(s)+'"]';var _=p;switch(o){case"style":_=eu(s);break;case"script":_=tu(s)}Ai.has(_)||(s=y({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:s,as:o},u),Ai.set(_,s),c.querySelector(p)!==null||o==="style"&&c.querySelector(vh(_))||o==="script"&&c.querySelector(Th(_))||(o=c.createElement("link"),Tn(o,"link",s),jt(o),c.head.appendChild(o)))}}function KL(s,o){rr.m(s,o);var u=Zl;if(u&&s){var c=o&&typeof o.as=="string"?o.as:"script",p='link[rel="modulepreload"][as="'+Fn(c)+'"][href="'+Fn(s)+'"]',_=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=tu(s)}if(!Ai.has(_)&&(s=y({rel:"modulepreload",href:s},o),Ai.set(_,s),u.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Th(_)))return}c=u.createElement("link"),Tn(c,"link",s),jt(c),u.head.appendChild(c)}}}function $L(s,o,u){rr.S(s,o,u);var c=Zl;if(c&&s){var p=ds(c).hoistableStyles,_=eu(s);o=o||"default";var E=p.get(_);if(!E){var b={loading:0,preload:null};if(E=c.querySelector(vh(_)))b.loading=5;else{s=y({rel:"stylesheet",href:s,"data-precedence":o},u),(u=Ai.get(_))&&Cv(s,u);var O=E=c.createElement("link");jt(O),Tn(O,"link",s),O._p=new Promise(function(Y,ee){O.onload=Y,O.onerror=ee}),O.addEventListener("load",function(){b.loading|=1}),O.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Vm(E,o,c)}E={type:"stylesheet",instance:E,count:1,state:b},p.set(_,E)}}}function YL(s,o){rr.X(s,o);var u=Zl;if(u&&s){var c=ds(u).hoistableScripts,p=tu(s),_=c.get(p);_||(_=u.querySelector(Th(p)),_||(s=y({src:s,async:!0},o),(o=Ai.get(p))&&Iv(s,o),_=u.createElement("script"),jt(_),Tn(_,"link",s),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(p,_))}}function WL(s,o){rr.M(s,o);var u=Zl;if(u&&s){var c=ds(u).hoistableScripts,p=tu(s),_=c.get(p);_||(_=u.querySelector(Th(p)),_||(s=y({src:s,async:!0,type:"module"},o),(o=Ai.get(p))&&Iv(s,o),_=u.createElement("script"),jt(_),Tn(_,"link",s),u.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},c.set(p,_))}}function HA(s,o,u,c){var p=(p=Me.current)?Om(p):null;if(!p)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=eu(u.href),u=ds(p).hoistableStyles,c=u.get(o),c||(c={type:"style",instance:null,count:0,state:null},u.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=eu(u.href);var _=ds(p).hoistableStyles,E=_.get(s);if(E||(p=p.ownerDocument||p,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,E),(_=p.querySelector(vh(s)))&&!_._p&&(E.instance=_,E.state.loading=5),Ai.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Ai.set(s,u),_||QL(p,s,u,E.state))),o&&c===null)throw Error(i(528,""));return E}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=tu(u),u=ds(p).hoistableScripts,c=u.get(o),c||(c={type:"script",instance:null,count:0,state:null},u.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function eu(s){return'href="'+Fn(s)+'"'}function vh(s){return'link[rel="stylesheet"]['+s+"]"}function GA(s){return y({},s,{"data-precedence":s.precedence,precedence:null})}function QL(s,o,u,c){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=s.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),Tn(o,"link",u),jt(o),s.head.appendChild(o))}function tu(s){return'[src="'+Fn(s)+'"]'}function Th(s){return"script[async]"+s}function KA(s,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var c=s.querySelector('style[data-href~="'+Fn(u.href)+'"]');if(c)return o.instance=c,jt(c),c;var p=y({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),jt(c),Tn(c,"style",p),Vm(c,u.precedence,s),o.instance=c;case"stylesheet":p=eu(u.href);var _=s.querySelector(vh(p));if(_)return o.state.loading|=4,o.instance=_,jt(_),_;c=GA(u),(p=Ai.get(p))&&Cv(c,p),_=(s.ownerDocument||s).createElement("link"),jt(_);var E=_;return E._p=new Promise(function(b,O){E.onload=b,E.onerror=O}),Tn(_,"link",c),o.state.loading|=4,Vm(_,u.precedence,s),o.instance=_;case"script":return _=tu(u.src),(p=s.querySelector(Th(_)))?(o.instance=p,jt(p),p):(c=u,(p=Ai.get(_))&&(c=y({},u),Iv(c,p)),s=s.ownerDocument||s,p=s.createElement("script"),jt(p),Tn(p,"link",c),s.head.appendChild(p),o.instance=p);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,Vm(c,u.precedence,s));return o.instance}function Vm(s,o,u){for(var c=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,_=p,E=0;E<c.length;E++){var b=c[E];if(b.dataset.precedence===o)_=b;else if(_!==p)break}_?_.parentNode.insertBefore(s,_.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(s,o.firstChild))}function Cv(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function Iv(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var km=null;function $A(s,o,u){if(km===null){var c=new Map,p=km=new Map;p.set(u,c)}else p=km,c=p.get(u),c||(c=new Map,p.set(u,c));if(c.has(s))return c;for(c.set(s,null),u=u.getElementsByTagName(s),p=0;p<u.length;p++){var _=u[p];if(!(_[hs]||_[zt]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var E=_.getAttribute(o)||"";E=s+E;var b=c.get(E);b?b.push(_):c.set(E,[_])}}return c}function YA(s,o,u){s=s.ownerDocument||s,s.head.insertBefore(u,o==="title"?s.querySelector("head > title"):null)}function XL(s,o,u){if(u===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function WA(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function JL(s,o,u,c){if(u.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var p=eu(c.href),_=o.querySelector(vh(p));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=Lm.bind(s),o.then(s,s)),u.state.loading|=4,u.instance=_,jt(_);return}_=o.ownerDocument||o,c=GA(c),(p=Ai.get(p))&&Cv(c,p),_=_.createElement("link"),jt(_);var E=_;E._p=new Promise(function(b,O){E.onload=b,E.onerror=O}),Tn(_,"link",c),u.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=Lm.bind(s),o.addEventListener("load",u),o.addEventListener("error",u))}}var Rv=0;function ZL(s,o){return s.stylesheets&&s.count===0&&Fm(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var c=setTimeout(function(){if(s.stylesheets&&Fm(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+o);0<s.imgBytes&&Rv===0&&(Rv=62500*ML());var p=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Fm(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>Rv?50:800)+o);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(p)}}:null}function Lm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fm(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Um=null;function Fm(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Um=new Map,o.forEach(e4,s),Um=null,Lm.call(s))}function e4(s,o){if(!(o.state.loading&4)){var u=Um.get(s);if(u)var c=u.get(null);else{u=new Map,Um.set(s,u);for(var p=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<p.length;_++){var E=p[_];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(u.set(E.dataset.precedence,E),c=E)}c&&u.set(null,c)}p=o.instance,E=p.getAttribute("data-precedence"),_=u.get(E)||c,_===c&&u.set(null,p),u.set(E,p),this.count++,c=Lm.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),_?_.parentNode.insertBefore(p,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(p,s.firstChild)),o.state.loading|=4}}var Eh={$$typeof:k,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function t4(s,o,u,c,p,_,E,b,O){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=us(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=us(0),this.hiddenUpdates=us(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=_,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function QA(s,o,u,c,p,_,E,b,O,Y,ee,se){return s=new t4(s,o,u,E,O,Y,ee,se,b),o=1,_===!0&&(o|=24),_=ei(3,null,null,o),s.current=_,_.stateNode=s,o=ay(),o.refCount++,s.pooledCache=o,o.refCount++,_.memoizedState={element:c,isDehydrated:u,cache:o},hy(_),s}function XA(s){return s?(s=Pl,s):Pl}function JA(s,o,u,c,p,_){p=XA(p),c.context===null?c.context=p:c.pendingContext=p,c=Kr(o),c.payload={element:u},_=_===void 0?null:_,_!==null&&(c.callback=_),u=$r(s,c,o),u!==null&&(Gn(u,s,o),Zc(u,s,o))}function ZA(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function xv(s,o){ZA(s,o),(s=s.alternate)&&ZA(s,o)}function eC(s){if(s.tag===13||s.tag===31){var o=la(s,67108864);o!==null&&Gn(o,s,67108864),xv(s,67108864)}}function tC(s){if(s.tag===13||s.tag===31){var o=ri();o=Qo(o);var u=la(s,o);u!==null&&Gn(u,s,o),xv(s,o)}}var Bm=!0;function n4(s,o,u,c){var p=te.T;te.T=null;var _=ae.p;try{ae.p=2,Dv(s,o,u,c)}finally{ae.p=_,te.T=p}}function i4(s,o,u,c){var p=te.T;te.T=null;var _=ae.p;try{ae.p=8,Dv(s,o,u,c)}finally{ae.p=_,te.T=p}}function Dv(s,o,u,c){if(Bm){var p=Nv(c);if(p===null)gv(s,o,c,zm,u),iC(s,c);else if(r4(p,s,o,u,c))c.stopPropagation();else if(iC(s,c),o&4&&-1<s4.indexOf(s)){for(;p!==null;){var _=mi(p);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var E=as(_.pendingLanes);if(E!==0){var b=_;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var O=1<<31-Mt(E);b.entanglements[1]|=O,E&=~O}Cs(_),(Je&6)===0&&(wm=Nn()+500,ph(0))}}break;case 31:case 13:b=la(_,2),b!==null&&Gn(b,_,2),Am(),xv(_,2)}if(_=Nv(c),_===null&&gv(s,o,c,zm,u),_===p)break;p=_}p!==null&&c.stopPropagation()}else gv(s,o,c,null,u)}}function Nv(s){return s=pi(s),Pv(s)}var zm=null;function Pv(s){if(zm=null,s=fs(s),s!==null){var o=a(s);if(o===null)s=null;else{var u=o.tag;if(u===13){if(s=l(o),s!==null)return s;s=null}else if(u===31){if(s=h(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return zm=s,null}function nC(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ko()){case bc:return 2;case Ac:return 8;case Nr:case U_:return 32;case vd:return 268435456;default:return 32}default:return 32}}var Mv=!1,so=null,ro=null,oo=null,Sh=new Map,wh=new Map,ao=[],s4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iC(s,o){switch(s){case"focusin":case"focusout":so=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":oo=null;break;case"pointerover":case"pointerout":Sh.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":wh.delete(o.pointerId)}}function bh(s,o,u,c,p,_){return s===null||s.nativeEvent!==_?(s={blockedOn:o,domEventName:u,eventSystemFlags:c,nativeEvent:_,targetContainers:[p]},o!==null&&(o=mi(o),o!==null&&eC(o)),s):(s.eventSystemFlags|=c,o=s.targetContainers,p!==null&&o.indexOf(p)===-1&&o.push(p),s)}function r4(s,o,u,c,p){switch(o){case"focusin":return so=bh(so,s,o,u,c,p),!0;case"dragenter":return ro=bh(ro,s,o,u,c,p),!0;case"mouseover":return oo=bh(oo,s,o,u,c,p),!0;case"pointerover":var _=p.pointerId;return Sh.set(_,bh(Sh.get(_)||null,s,o,u,c,p)),!0;case"gotpointercapture":return _=p.pointerId,wh.set(_,bh(wh.get(_)||null,s,o,u,c,p)),!0}return!1}function sC(s){var o=fs(s.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){s.blockedOn=o,Ui(s.priority,function(){tC(u)});return}}else if(o===31){if(o=h(u),o!==null){s.blockedOn=o,Ui(s.priority,function(){tC(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function jm(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=Nv(s.nativeEvent);if(u===null){u=s.nativeEvent;var c=new u.constructor(u.type,u);Lc=c,u.target.dispatchEvent(c),Lc=null}else return o=mi(u),o!==null&&eC(o),s.blockedOn=u,!1;o.shift()}return!0}function rC(s,o,u){jm(s)&&u.delete(o)}function o4(){Mv=!1,so!==null&&jm(so)&&(so=null),ro!==null&&jm(ro)&&(ro=null),oo!==null&&jm(oo)&&(oo=null),Sh.forEach(rC),wh.forEach(rC)}function qm(s,o){s.blockedOn===o&&(s.blockedOn=null,Mv||(Mv=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,o4)))}var Hm=null;function oC(s){Hm!==s&&(Hm=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Hm===s&&(Hm=null);for(var o=0;o<s.length;o+=3){var u=s[o],c=s[o+1],p=s[o+2];if(typeof c!="function"){if(Pv(c||u)===null)continue;break}var _=mi(u);_!==null&&(s.splice(o,3),o-=3,Ny(_,{pending:!0,data:p,method:u.method,action:c},c,p))}}))}function nu(s){function o(O){return qm(O,s)}so!==null&&qm(so,s),ro!==null&&qm(ro,s),oo!==null&&qm(oo,s),Sh.forEach(o),wh.forEach(o);for(var u=0;u<ao.length;u++){var c=ao[u];c.blockedOn===s&&(c.blockedOn=null)}for(;0<ao.length&&(u=ao[0],u.blockedOn===null);)sC(u),u.blockedOn===null&&ao.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(c=0;c<u.length;c+=3){var p=u[c],_=u[c+1],E=p[ln]||null;if(typeof _=="function")E||oC(u);else if(E){var b=null;if(_&&_.hasAttribute("formAction")){if(p=_,E=_[ln]||null)b=E.formAction;else if(Pv(p)!==null)continue}else b=E.action;typeof b=="function"?u[c+1]=b:(u.splice(c,3),c-=3),oC(u)}}}function aC(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(E){return p=E})},focusReset:"manual",scroll:"manual"})}function o(){p!==null&&(p(),p=null),c||setTimeout(u,20)}function u(){if(!c&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,p=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),p!==null&&(p(),p=null)}}}function Ov(s){this._internalRoot=s}Gm.prototype.render=Ov.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,c=ri();JA(u,c,s,o,null,null)},Gm.prototype.unmount=Ov.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;JA(s.current,2,null,s,null,null),Am(),o[cs]=null}};function Gm(s){this._internalRoot=s}Gm.prototype.unstable_scheduleHydration=function(s){if(s){var o=Ad();s={blockedOn:null,target:s,priority:o};for(var u=0;u<ao.length&&o!==0&&o<ao[u].priority;u++);ao.splice(u,0,s),u===0&&sC(s)}};var lC=e.version;if(lC!=="19.2.0")throw Error(i(527,lC,"19.2.0"));ae.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=d(o),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var a4={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Km=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Km.isDisabled&&Km.supportsFiber)try{ki=Km.inject(a4),pn=Km}catch{}}return Ch.createRoot=function(s,o){if(!r(s))throw Error(i(299));var u=!1,c="",p=p1,_=g1,E=_1;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),o=QA(s,1,!1,null,null,u,c,null,p,_,E,aC),s[cs]=o.current,pv(s),new Ov(o)},Ch.hydrateRoot=function(s,o,u){if(!r(s))throw Error(i(299));var c=!1,p="",_=p1,E=g1,b=_1,O=null;return u!=null&&(u.unstable_strictMode===!0&&(c=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onUncaughtError!==void 0&&(_=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(b=u.onRecoverableError),u.formState!==void 0&&(O=u.formState)),o=QA(s,1,!0,o,u??null,c,p,O,_,E,b,aC),o.context=XA(null),u=o.current,c=ri(),c=Qo(c),p=Kr(c),p.callback=null,$r(u,p,c),u=c,o.current.lanes=u,Yo(o,u),Cs(o),s[cs]=o.current,pv(s),new Gm(o)},Ch.version="19.2.0",Ch}var yC;function _4(){if(yC)return Lv.exports;yC=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lv.exports=g4(),Lv.exports}var y4=_4();const v4=Bg(y4);/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var vC="popstate";function T4(n={}){function e(r,a){let{pathname:l="/",search:h="",hash:f=""}=rc(r.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),V0("",{pathname:l,search:h,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(r,a){let l=r.document.querySelector("base"),h="";if(l&&l.getAttribute("href")){let f=r.location.href,d=f.indexOf("#");h=d===-1?f:f.slice(0,d)}return h+"#"+(typeof a=="string"?a:mf(a))}function i(r,a){Vi(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return S4(e,t,i,n)}function Zt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Vi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function E4(){return Math.random().toString(36).substring(2,10)}function TC(n,e){return{usr:n.state,key:n.key,idx:e}}function V0(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?rc(e):e,state:t,key:e&&e.key||i||E4()}}function mf({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function rc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function S4(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,l=r.history,h="POP",f=null,d=g();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function g(){return(l.state||{idx:null}).idx}function y(){h="POP";let D=g(),U=D==null?null:D-d;d=D,f&&f({action:h,location:N.location,delta:U})}function v(D,U){h="PUSH";let z=V0(N.location,D,U);t&&t(z,D),d=g()+1;let k=TC(z,d),Z=N.createHref(z);try{l.pushState(k,"",Z)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;r.location.assign(Z)}a&&f&&f({action:h,location:N.location,delta:1})}function w(D,U){h="REPLACE";let z=V0(N.location,D,U);t&&t(z,D),d=g();let k=TC(z,d),Z=N.createHref(z);l.replaceState(k,"",Z),a&&f&&f({action:h,location:N.location,delta:0})}function C(D){return w4(D)}let N={get action(){return h},get location(){return n(r,l)},listen(D){if(f)throw new Error("A history only accepts one active listener");return r.addEventListener(vC,y),f=D,()=>{r.removeEventListener(vC,y),f=null}},createHref(D){return e(r,D)},createURL:C,encodeLocation(D){let U=C(D);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:v,replace:w,go(D){return l.go(D)}};return N}function w4(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Zt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:mf(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function Bx(n,e,t="/"){return b4(n,e,t,!1)}function b4(n,e,t,i){let r=typeof e=="string"?rc(e):e,a=pr(r.pathname||"/",t);if(a==null)return null;let l=zx(n);A4(l);let h=null;for(let f=0;h==null&&f<l.length;++f){let d=k4(a);h=O4(l[f],d,i)}return h}function zx(n,e=[],t=[],i="",r=!1){let a=(l,h,f=r,d)=>{let g={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&f)return;Zt(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let y=hr([i,g.relativePath]),v=t.concat(g);l.children&&l.children.length>0&&(Zt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),zx(l.children,e,v,y,f)),!(l.path==null&&!l.index)&&e.push({path:y,score:P4(y,l.index),routesMeta:v})};return n.forEach((l,h)=>{if(l.path===""||!l.path?.includes("?"))a(l,h);else for(let f of jx(l.path))a(l,h,!0,f)}),e}function jx(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let l=jx(i.join("/")),h=[];return h.push(...l.map(f=>f===""?a:[a,f].join("/"))),r&&h.push(...l),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function A4(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:M4(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var C4=/^:[\w-]+$/,I4=3,R4=2,x4=1,D4=10,N4=-2,EC=n=>n==="*";function P4(n,e){let t=n.split("/"),i=t.length;return t.some(EC)&&(i+=N4),e&&(i+=R4),t.filter(r=>!EC(r)).reduce((r,a)=>r+(C4.test(a)?I4:a===""?x4:D4),i)}function M4(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function O4(n,e,t=!1){let{routesMeta:i}=n,r={},a="/",l=[];for(let h=0;h<i.length;++h){let f=i[h],d=h===i.length-1,g=a==="/"?e:e.slice(a.length)||"/",y=Lp({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},g),v=f.route;if(!y&&d&&t&&!i[i.length-1].route.index&&(y=Lp({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!y)return null;Object.assign(r,y.params),l.push({params:r,pathname:hr([a,y.pathname]),pathnameBase:B4(hr([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=hr([a,y.pathnameBase]))}return l}function Lp(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=V4(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let a=r[0],l=a.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:i.reduce((d,{paramName:g,isOptional:y},v)=>{if(g==="*"){let C=h[v]||"";l=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}const w=h[v];return y&&!w?d[g]=void 0:d[g]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:l,pattern:n}}function V4(n,e=!1,t=!0){Vi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function k4(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function pr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function L4(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?rc(n):n;return{pathname:t?t.startsWith("/")?t:U4(t,e):e,search:z4(i),hash:j4(r)}}function U4(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function zv(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function F4(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function sE(n){let e=F4(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function rE(n,e,t,i=!1){let r;typeof n=="string"?r=rc(n):(r={...n},Zt(!r.pathname||!r.pathname.includes("?"),zv("?","pathname","search",r)),Zt(!r.pathname||!r.pathname.includes("#"),zv("#","pathname","hash",r)),Zt(!r.search||!r.search.includes("#"),zv("#","search","hash",r)));let a=n===""||r.pathname==="",l=a?"/":r.pathname,h;if(l==null)h=t;else{let y=e.length-1;if(!i&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),y-=1;r.pathname=v.join("/")}h=y>=0?e[y]:"/"}let f=L4(r,h),d=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(d||g)&&(f.pathname+="/"),f}var hr=n=>n.join("/").replace(/\/\/+/g,"/"),B4=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),z4=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,j4=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function q4(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var qx=["POST","PUT","PATCH","DELETE"];new Set(qx);var H4=["GET",...qx];new Set(H4);var oc=P.createContext(null);oc.displayName="DataRouter";var jg=P.createContext(null);jg.displayName="DataRouterState";P.createContext(!1);var Hx=P.createContext({isTransitioning:!1});Hx.displayName="ViewTransition";var G4=P.createContext(new Map);G4.displayName="Fetchers";var K4=P.createContext(null);K4.displayName="Await";var is=P.createContext(null);is.displayName="Navigation";var qg=P.createContext(null);qg.displayName="Location";var ss=P.createContext({outlet:null,matches:[],isDataRoute:!1});ss.displayName="Route";var oE=P.createContext(null);oE.displayName="RouteError";function $4(n,{relative:e}={}){Zt(ac(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=P.useContext(is),{hash:r,pathname:a,search:l}=Yf(n,{relative:e}),h=a;return t!=="/"&&(h=a==="/"?t:hr([t,a])),i.createHref({pathname:h,search:l,hash:r})}function ac(){return P.useContext(qg)!=null}function Ir(){return Zt(ac(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(qg).location}var Gx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Kx(n){P.useContext(is).static||P.useLayoutEffect(n)}function $x(){let{isDataRoute:n}=P.useContext(ss);return n?l3():Y4()}function Y4(){Zt(ac(),"useNavigate() may be used only in the context of a <Router> component.");let n=P.useContext(oc),{basename:e,navigator:t}=P.useContext(is),{matches:i}=P.useContext(ss),{pathname:r}=Ir(),a=JSON.stringify(sE(i)),l=P.useRef(!1);return Kx(()=>{l.current=!0}),P.useCallback((f,d={})=>{if(Vi(l.current,Gx),!l.current)return;if(typeof f=="number"){t.go(f);return}let g=rE(f,JSON.parse(a),r,d.relative==="path");n==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:hr([e,g.pathname])),(d.replace?t.replace:t.push)(g,d.state,d)},[e,t,a,r,n])}var W4=P.createContext(null);function Q4(n){let e=P.useContext(ss).outlet;return P.useMemo(()=>e&&P.createElement(W4.Provider,{value:n},e),[e,n])}function Yf(n,{relative:e}={}){let{matches:t}=P.useContext(ss),{pathname:i}=Ir(),r=JSON.stringify(sE(t));return P.useMemo(()=>rE(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function X4(n,e){return Yx(n)}function Yx(n,e,t,i,r){Zt(ac(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=P.useContext(is),{matches:l}=P.useContext(ss),h=l[l.length-1],f=h?h.params:{},d=h?h.pathname:"/",g=h?h.pathnameBase:"/",y=h&&h.route;{let z=y&&y.path||"";Wx(d,!y||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let v=Ir(),w;w=v;let C=w.pathname||"/",N=C;if(g!=="/"){let z=g.replace(/^\//,"").split("/");N="/"+C.replace(/^\//,"").split("/").slice(z.length).join("/")}let D=Bx(n,{pathname:N});return Vi(y||D!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Vi(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),n3(D&&D.map(z=>Object.assign({},z,{params:Object.assign({},f,z.params),pathname:hr([g,a.encodeLocation?a.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?g:hr([g,a.encodeLocation?a.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),l,t,i,r)}function J4(){let n=a3(),e=q4(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=P.createElement(P.Fragment,null,P.createElement("p",null,"💿 Hey developer 👋"),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:a},"ErrorBoundary")," or"," ",P.createElement("code",{style:a},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),t?P.createElement("pre",{style:r},t):null,l)}var Z4=P.createElement(J4,null),e3=class extends P.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?P.createElement(ss.Provider,{value:this.props.routeContext},P.createElement(oE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function t3({routeContext:n,match:e,children:t}){let i=P.useContext(oc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(ss.Provider,{value:n},t)}function n3(n,e=[],t=null,i=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t?.errors;if(l!=null){let d=a.findIndex(g=>g.route.id&&l?.[g.route.id]!==void 0);Zt(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let h=!1,f=-1;if(t)for(let d=0;d<a.length;d++){let g=a[d];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=d),g.route.id){let{loaderData:y,errors:v}=t,w=g.route.loader&&!y.hasOwnProperty(g.route.id)&&(!v||v[g.route.id]===void 0);if(g.route.lazy||w){h=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}return a.reduceRight((d,g,y)=>{let v,w=!1,C=null,N=null;t&&(v=l&&g.route.id?l[g.route.id]:void 0,C=g.route.errorElement||Z4,h&&(f<0&&y===0?(Wx("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,N=null):f===y&&(w=!0,N=g.route.hydrateFallbackElement||null)));let D=e.concat(a.slice(0,y+1)),U=()=>{let z;return v?z=C:w?z=N:g.route.Component?z=P.createElement(g.route.Component,null):g.route.element?z=g.route.element:z=d,P.createElement(t3,{match:g,routeContext:{outlet:d,matches:D,isDataRoute:t!=null},children:z})};return t&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?P.createElement(e3,{location:t.location,revalidation:t.revalidation,component:C,error:v,children:U(),routeContext:{outlet:null,matches:D,isDataRoute:!0},unstable_onError:i}):U()},null)}function aE(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function i3(n){let e=P.useContext(oc);return Zt(e,aE(n)),e}function s3(n){let e=P.useContext(jg);return Zt(e,aE(n)),e}function r3(n){let e=P.useContext(ss);return Zt(e,aE(n)),e}function lE(n){let e=r3(n),t=e.matches[e.matches.length-1];return Zt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function o3(){return lE("useRouteId")}function a3(){let n=P.useContext(oE),e=s3("useRouteError"),t=lE("useRouteError");return n!==void 0?n:e.errors?.[t]}function l3(){let{router:n}=i3("useNavigate"),e=lE("useNavigate"),t=P.useRef(!1);return Kx(()=>{t.current=!0}),P.useCallback(async(r,a={})=>{Vi(t.current,Gx),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...a}))},[n,e])}var SC={};function Wx(n,e,t){!e&&!SC[n]&&(SC[n]=!0,Vi(!1,t))}P.memo(u3);function u3({routes:n,future:e,state:t,unstable_onError:i}){return Yx(n,void 0,t,i,e)}function wC({to:n,replace:e,state:t,relative:i}){Zt(ac(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=P.useContext(is);Vi(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=P.useContext(ss),{pathname:l}=Ir(),h=$x(),f=rE(n,sE(a),l,i==="path"),d=JSON.stringify(f);return P.useEffect(()=>{h(JSON.parse(d),{replace:e,state:t,relative:i})},[h,d,i,e,t]),null}function c3(n){return Q4(n.context)}function h3({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:a=!1}){Zt(!ac(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),h=P.useMemo(()=>({basename:l,navigator:r,static:a,future:{}}),[l,r,a]);typeof t=="string"&&(t=rc(t));let{pathname:f="/",search:d="",hash:g="",state:y=null,key:v="default"}=t,w=P.useMemo(()=>{let C=pr(f,l);return C==null?null:{location:{pathname:C,search:d,hash:g,state:y,key:v},navigationType:i}},[l,f,d,g,y,v,i]);return Vi(w!=null,`<Router basename="${l}"> is not able to match the URL "${f}${d}${g}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:P.createElement(is.Provider,{value:h},P.createElement(qg.Provider,{children:e,value:w}))}var dp="get",mp="application/x-www-form-urlencoded";function Hg(n){return n!=null&&typeof n.tagName=="string"}function f3(n){return Hg(n)&&n.tagName.toLowerCase()==="button"}function d3(n){return Hg(n)&&n.tagName.toLowerCase()==="form"}function m3(n){return Hg(n)&&n.tagName.toLowerCase()==="input"}function p3(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function g3(n,e){return n.button===0&&(!e||e==="_self")&&!p3(n)}var $m=null;function _3(){if($m===null)try{new FormData(document.createElement("form"),0),$m=!1}catch{$m=!0}return $m}var y3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jv(n){return n!=null&&!y3.has(n)?(Vi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mp}"`),null):n}function v3(n,e){let t,i,r,a,l;if(d3(n)){let h=n.getAttribute("action");i=h?pr(h,e):null,t=n.getAttribute("method")||dp,r=jv(n.getAttribute("enctype"))||mp,a=new FormData(n)}else if(f3(n)||m3(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(i=f?pr(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||dp,r=jv(n.getAttribute("formenctype"))||jv(h.getAttribute("enctype"))||mp,a=new FormData(h,n),!_3()){let{name:d,type:g,value:y}=n;if(g==="image"){let v=d?`${d}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else d&&a.append(d,y)}}else{if(Hg(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=dp,i=null,r=mp,l=n}return a&&r==="text/plain"&&(l=a,a=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uE(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function T3(n,e,t){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&pr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function E3(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function S3(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function w3(n,e,t){let i=await Promise.all(n.map(async r=>{let a=e.routes[r.route.id];if(a){let l=await E3(a,t);return l.links?l.links():[]}return[]}));return I3(i.flat(1).filter(S3).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function bC(n,e,t,i,r,a){let l=(f,d)=>t[d]?f.route.id!==t[d].route.id:!0,h=(f,d)=>t[d].pathname!==f.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==f.params["*"];return a==="assets"?e.filter((f,d)=>l(f,d)||h(f,d)):a==="data"?e.filter((f,d)=>{let g=i.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(l(f,d)||h(f,d))return!0;if(f.route.shouldRevalidate){let y=f.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function b3(n,e,{includeHydrateFallback:t}={}){return A3(n.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),t&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function A3(n){return[...new Set(n)]}function C3(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function I3(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let a=JSON.stringify(C3(r));return t.has(a)||(t.add(a),i.push({key:a,link:r})),i},[])}function Qx(){let n=P.useContext(oc);return uE(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function R3(){let n=P.useContext(jg);return uE(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var cE=P.createContext(void 0);cE.displayName="FrameworkContext";function Xx(){let n=P.useContext(cE);return uE(n,"You must render this element inside a <HydratedRouter> element"),n}function x3(n,e){let t=P.useContext(cE),[i,r]=P.useState(!1),[a,l]=P.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:d,onMouseLeave:g,onTouchStart:y}=e,v=P.useRef(null);P.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let N=U=>{U.forEach(z=>{l(z.isIntersecting)})},D=new IntersectionObserver(N,{threshold:.5});return v.current&&D.observe(v.current),()=>{D.disconnect()}}},[n]),P.useEffect(()=>{if(i){let N=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(N)}}},[i]);let w=()=>{r(!0)},C=()=>{r(!1),l(!1)};return t?n!=="intent"?[a,v,{}]:[a,v,{onFocus:Ih(h,w),onBlur:Ih(f,C),onMouseEnter:Ih(d,w),onMouseLeave:Ih(g,C),onTouchStart:Ih(y,w)}]:[!1,v,{}]}function Ih(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function D3({page:n,...e}){let{router:t}=Qx(),i=P.useMemo(()=>Bx(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?P.createElement(P3,{page:n,matches:i,...e}):null}function N3(n){let{manifest:e,routeModules:t}=Xx(),[i,r]=P.useState([]);return P.useEffect(()=>{let a=!1;return w3(n,e,t).then(l=>{a||r(l)}),()=>{a=!0}},[n,e,t]),i}function P3({page:n,matches:e,...t}){let i=Ir(),{manifest:r,routeModules:a}=Xx(),{basename:l}=Qx(),{loaderData:h,matches:f}=R3(),d=P.useMemo(()=>bC(n,e,f,r,i,"data"),[n,e,f,r,i]),g=P.useMemo(()=>bC(n,e,f,r,i,"assets"),[n,e,f,r,i]),y=P.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let C=new Set,N=!1;if(e.forEach(U=>{let z=r.routes[U.route.id];!z||!z.hasLoader||(!d.some(k=>k.route.id===U.route.id)&&U.route.id in h&&a[U.route.id]?.shouldRevalidate||z.hasClientLoader?N=!0:C.add(U.route.id))}),C.size===0)return[];let D=T3(n,l,"data");return N&&C.size>0&&D.searchParams.set("_routes",e.filter(U=>C.has(U.route.id)).map(U=>U.route.id).join(",")),[D.pathname+D.search]},[l,h,i,r,d,e,n,a]),v=P.useMemo(()=>b3(g,r),[g,r]),w=N3(g);return P.createElement(P.Fragment,null,y.map(C=>P.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...t})),v.map(C=>P.createElement("link",{key:C,rel:"modulepreload",href:C,...t})),w.map(({key:C,link:N})=>P.createElement("link",{key:C,nonce:t.nonce,...N})))}function M3(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Jx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Jx&&(window.__reactRouterVersion="7.9.4")}catch{}function O3({basename:n,children:e,window:t}){let i=P.useRef();i.current==null&&(i.current=T4({window:t,v5Compat:!0}));let r=i.current,[a,l]=P.useState({action:r.action,location:r.location}),h=P.useCallback(f=>{P.startTransition(()=>l(f))},[l]);return P.useLayoutEffect(()=>r.listen(h),[r,h]),P.createElement(h3,{basename:n,children:e,location:a.location,navigationType:a.action,navigator:r})}var Zx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hE=P.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:a,replace:l,state:h,target:f,to:d,preventScrollReset:g,viewTransition:y,...v},w){let{basename:C}=P.useContext(is),N=typeof d=="string"&&Zx.test(d),D,U=!1;if(typeof d=="string"&&N&&(D=d,Jx))try{let x=new URL(window.location.href),L=d.startsWith("//")?new URL(x.protocol+d):new URL(d),V=pr(L.pathname,C);L.origin===x.origin&&V!=null?d=V+L.search+L.hash:U=!0}catch{Vi(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=$4(d,{relative:r}),[k,Z,Q]=x3(i,v),oe=L3(d,{replace:l,state:h,target:f,preventScrollReset:g,relative:r,viewTransition:y});function R(x){e&&e(x),x.defaultPrevented||oe(x)}let A=P.createElement("a",{...v,...Q,href:D||z,onClick:U||a?e:R,ref:M3(w,Z),target:f,"data-discover":!N&&t==="render"?"true":void 0});return k&&!N?P.createElement(P.Fragment,null,A,P.createElement(D3,{page:z})):A});hE.displayName="Link";var hu=P.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:a,to:l,viewTransition:h,children:f,...d},g){let y=Yf(l,{relative:d.relative}),v=Ir(),w=P.useContext(jg),{navigator:C,basename:N}=P.useContext(is),D=w!=null&&j3(y)&&h===!0,U=C.encodeLocation?C.encodeLocation(y).pathname:y.pathname,z=v.pathname,k=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(z=z.toLowerCase(),k=k?k.toLowerCase():null,U=U.toLowerCase()),k&&N&&(k=pr(k,N)||k);const Z=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let Q=z===U||!r&&z.startsWith(U)&&z.charAt(Z)==="/",oe=k!=null&&(k===U||!r&&k.startsWith(U)&&k.charAt(U.length)==="/"),R={isActive:Q,isPending:oe,isTransitioning:D},A=Q?e:void 0,x;typeof i=="function"?x=i(R):x=[i,Q?"active":null,oe?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(R):a;return P.createElement(hE,{...d,"aria-current":A,className:x,ref:g,style:L,to:l,viewTransition:h},typeof f=="function"?f(R):f)});hu.displayName="NavLink";var V3=P.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:a,method:l=dp,action:h,onSubmit:f,relative:d,preventScrollReset:g,viewTransition:y,...v},w)=>{let C=B3(),N=z3(h,{relative:d}),D=l.toLowerCase()==="get"?"get":"post",U=typeof h=="string"&&Zx.test(h),z=k=>{if(f&&f(k),k.defaultPrevented)return;k.preventDefault();let Z=k.nativeEvent.submitter,Q=Z?.getAttribute("formmethod")||l;C(Z||k.currentTarget,{fetcherKey:e,method:Q,navigate:t,replace:r,state:a,relative:d,preventScrollReset:g,viewTransition:y})};return P.createElement("form",{ref:w,method:D,action:N,onSubmit:i?f:z,...v,"data-discover":!U&&n==="render"?"true":void 0})});V3.displayName="Form";function k3(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eD(n){let e=P.useContext(oc);return Zt(e,k3(n)),e}function L3(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:a,viewTransition:l}={}){let h=$x(),f=Ir(),d=Yf(n,{relative:a});return P.useCallback(g=>{if(g3(g,e)){g.preventDefault();let y=t!==void 0?t:mf(f)===mf(d);h(n,{replace:y,state:i,preventScrollReset:r,relative:a,viewTransition:l})}},[f,h,d,t,i,e,n,r,a,l])}var U3=0,F3=()=>`__${String(++U3)}__`;function B3(){let{router:n}=eD("useSubmit"),{basename:e}=P.useContext(is),t=o3();return P.useCallback(async(i,r={})=>{let{action:a,method:l,encType:h,formData:f,body:d}=v3(i,e);if(r.navigate===!1){let g=r.fetcherKey||F3();await n.fetch(g,t,r.action||a,{preventScrollReset:r.preventScrollReset,formData:f,body:d,formMethod:r.method||l,formEncType:r.encType||h,flushSync:r.flushSync})}else await n.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:f,body:d,formMethod:r.method||l,formEncType:r.encType||h,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function z3(n,{relative:e}={}){let{basename:t}=P.useContext(is),i=P.useContext(ss);Zt(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...Yf(n||".",{relative:e})},l=Ir();if(n==null){a.search=l.search;let h=new URLSearchParams(a.search),f=h.getAll("index");if(f.some(g=>g==="")){h.delete("index"),f.filter(y=>y).forEach(y=>h.append("index",y));let g=h.toString();a.search=g?`?${g}`:""}}return(!n||n===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:hr([t,a.pathname])),mf(a)}function j3(n,{relative:e}={}){let t=P.useContext(Hx);Zt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=eD("useViewTransitionState"),r=Yf(n,{relative:e});if(!t.isTransitioning)return!1;let a=pr(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=pr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Lp(r.pathname,l)!=null||Lp(r.pathname,a)!=null}const q3=()=>H.jsx("div",{children:"Groups"});var qv={exports:{}},Hv={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AC;function H3(){if(AC)return Hv;AC=1;var n=zg();function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var t=typeof Object.is=="function"?Object.is:e,i=n.useSyncExternalStore,r=n.useRef,a=n.useEffect,l=n.useMemo,h=n.useDebugValue;return Hv.useSyncExternalStoreWithSelector=function(f,d,g,y,v){var w=r(null);if(w.current===null){var C={hasValue:!1,value:null};w.current=C}else C=w.current;w=l(function(){function D(Q){if(!U){if(U=!0,z=Q,Q=y(Q),v!==void 0&&C.hasValue){var oe=C.value;if(v(oe,Q))return k=oe}return k=Q}if(oe=k,t(z,Q))return oe;var R=y(Q);return v!==void 0&&v(oe,R)?(z=Q,oe):(z=Q,k=R)}var U=!1,z,k,Z=g===void 0?null:g;return[function(){return D(d())},Z===null?void 0:function(){return D(Z())}]},[d,g,y,v]);var N=i(f,w[0],w[1]);return a(function(){C.hasValue=!0,C.value=N},[N]),h(N),N},Hv}var CC;function G3(){return CC||(CC=1,qv.exports=H3()),qv.exports}var K3=G3();function $3(n){n()}function Y3(){let n=null,e=null;return{clear(){n=null,e=null},notify(){$3(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){const t=[];let i=n;for(;i;)t.push(i),i=i.next;return t},subscribe(t){let i=!0;const r=e={callback:t,next:null,prev:e};return r.prev?r.prev.next=r:n=r,function(){!i||n===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:n=r.next)}}}}var IC={notify(){},get:()=>[]};function W3(n,e){let t,i=IC,r=0,a=!1;function l(N){g();const D=i.subscribe(N);let U=!1;return()=>{U||(U=!0,D(),y())}}function h(){i.notify()}function f(){C.onStateChange&&C.onStateChange()}function d(){return a}function g(){r++,t||(t=n.subscribe(f),i=Y3())}function y(){r--,t&&r===0&&(t(),t=void 0,i.clear(),i=IC)}function v(){a||(a=!0,g())}function w(){a&&(a=!1,y())}const C={addNestedSub:l,notifyNestedSubs:h,handleChangeWrapper:f,isSubscribed:d,trySubscribe:v,tryUnsubscribe:w,getListeners:()=>i};return C}var Q3=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",X3=Q3(),J3=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Z3=J3(),e6=()=>X3||Z3?P.useLayoutEffect:P.useEffect,t6=e6(),n6=Symbol.for("react-redux-context"),i6=typeof globalThis<"u"?globalThis:{};function s6(){if(!P.createContext)return{};const n=i6[n6]??=new Map;let e=n.get(P.createContext);return e||(e=P.createContext(null),n.set(P.createContext,e)),e}var Ro=s6();function r6(n){const{children:e,context:t,serverState:i,store:r}=n,a=P.useMemo(()=>{const f=W3(r);return{store:r,subscription:f,getServerState:i?()=>i:void 0}},[r,i]),l=P.useMemo(()=>r.getState(),[r]);t6(()=>{const{subscription:f}=a;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),l!==r.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[a,l]);const h=t||Ro;return P.createElement(h.Provider,{value:a},e)}var o6=r6;function fE(n=Ro){return function(){return P.useContext(n)}}var tD=fE();function nD(n=Ro){const e=n===Ro?tD:fE(n),t=()=>{const{store:i}=e();return i};return Object.assign(t,{withTypes:()=>t}),t}var a6=nD();function l6(n=Ro){const e=n===Ro?a6:nD(n),t=()=>e().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var u6=l6(),c6=(n,e)=>n===e;function h6(n=Ro){const e=n===Ro?tD:fE(n),t=(i,r={})=>{const{equalityFn:a=c6}=typeof r=="function"?{equalityFn:r}:r,l=e(),{store:h,subscription:f,getServerState:d}=l;P.useRef(!0);const g=P.useCallback({[i.name](v){return i(v)}}[i.name],[i]),y=K3.useSyncExternalStoreWithSelector(f.addNestedSub,h.getState,d||h.getState,g,a);return P.useDebugValue(y),y};return Object.assign(t,{withTypes:()=>t}),t}var f6=h6();const Gg=()=>u6();function En(n){return`Minified Redux error #${n}; visit https://redux.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}var d6=typeof Symbol=="function"&&Symbol.observable||"@@observable",RC=d6,Gv=()=>Math.random().toString(36).substring(7).split("").join("."),m6={INIT:`@@redux/INIT${Gv()}`,REPLACE:`@@redux/REPLACE${Gv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Gv()}`},Up=m6;function dE(n){if(typeof n!="object"||n===null)return!1;let e=n;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e||Object.getPrototypeOf(n)===null}function iD(n,e,t){if(typeof n!="function")throw new Error(En(2));if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(En(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(En(1));return t(iD)(n,e)}let i=n,r=e,a=new Map,l=a,h=0,f=!1;function d(){l===a&&(l=new Map,a.forEach((D,U)=>{l.set(U,D)}))}function g(){if(f)throw new Error(En(3));return r}function y(D){if(typeof D!="function")throw new Error(En(4));if(f)throw new Error(En(5));let U=!0;d();const z=h++;return l.set(z,D),function(){if(U){if(f)throw new Error(En(6));U=!1,d(),l.delete(z),a=null}}}function v(D){if(!dE(D))throw new Error(En(7));if(typeof D.type>"u")throw new Error(En(8));if(typeof D.type!="string")throw new Error(En(17));if(f)throw new Error(En(9));try{f=!0,r=i(r,D)}finally{f=!1}return(a=l).forEach(z=>{z()}),D}function w(D){if(typeof D!="function")throw new Error(En(10));i=D,v({type:Up.REPLACE})}function C(){const D=y;return{subscribe(U){if(typeof U!="object"||U===null)throw new Error(En(11));function z(){const Z=U;Z.next&&Z.next(g())}return z(),{unsubscribe:D(z)}},[RC](){return this}}}return v({type:Up.INIT}),{dispatch:v,subscribe:y,getState:g,replaceReducer:w,[RC]:C}}function p6(n){Object.keys(n).forEach(e=>{const t=n[e];if(typeof t(void 0,{type:Up.INIT})>"u")throw new Error(En(12));if(typeof t(void 0,{type:Up.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(En(13))})}function g6(n){const e=Object.keys(n),t={};for(let a=0;a<e.length;a++){const l=e[a];typeof n[l]=="function"&&(t[l]=n[l])}const i=Object.keys(t);let r;try{p6(t)}catch(a){r=a}return function(l={},h){if(r)throw r;let f=!1;const d={};for(let g=0;g<i.length;g++){const y=i[g],v=t[y],w=l[y],C=v(w,h);if(typeof C>"u")throw h&&h.type,new Error(En(14));d[y]=C,f=f||C!==w}return f=f||i.length!==Object.keys(l).length,f?d:l}}function Fp(...n){return n.length===0?e=>e:n.length===1?n[0]:n.reduce((e,t)=>(...i)=>e(t(...i)))}function _6(...n){return e=>(t,i)=>{const r=e(t,i);let a=()=>{throw new Error(En(15))};const l={getState:r.getState,dispatch:(f,...d)=>a(f,...d)},h=n.map(f=>f(l));return a=Fp(...h)(r.dispatch),{...r,dispatch:a}}}function y6(n){return dE(n)&&"type"in n&&typeof n.type=="string"}var sD=Symbol.for("immer-nothing"),xC=Symbol.for("immer-draftable"),ci=Symbol.for("immer-state");function Xi(n,...e){throw new Error(`[Immer] minified error nr: ${n}. Full error at: https://bit.ly/3cXEKWf`)}var Vu=Object.getPrototypeOf;function Ka(n){return!!n&&!!n[ci]}function gr(n){return n?rD(n)||Array.isArray(n)||!!n[xC]||!!n.constructor?.[xC]||Wf(n)||$g(n):!1}var v6=Object.prototype.constructor.toString();function rD(n){if(!n||typeof n!="object")return!1;const e=Vu(n);if(e===null)return!0;const t=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return t===Object?!0:typeof t=="function"&&Function.toString.call(t)===v6}function Bp(n,e){Kg(n)===0?Reflect.ownKeys(n).forEach(t=>{e(t,n[t],n)}):n.forEach((t,i)=>e(i,t,n))}function Kg(n){const e=n[ci];return e?e.type_:Array.isArray(n)?1:Wf(n)?2:$g(n)?3:0}function k0(n,e){return Kg(n)===2?n.has(e):Object.prototype.hasOwnProperty.call(n,e)}function oD(n,e,t){const i=Kg(n);i===2?n.set(e,t):i===3?n.add(t):n[e]=t}function T6(n,e){return n===e?n!==0||1/n===1/e:n!==n&&e!==e}function Wf(n){return n instanceof Map}function $g(n){return n instanceof Set}function wa(n){return n.copy_||n.base_}function L0(n,e){if(Wf(n))return new Map(n);if($g(n))return new Set(n);if(Array.isArray(n))return Array.prototype.slice.call(n);const t=rD(n);if(e===!0||e==="class_only"&&!t){const i=Object.getOwnPropertyDescriptors(n);delete i[ci];let r=Reflect.ownKeys(i);for(let a=0;a<r.length;a++){const l=r[a],h=i[l];h.writable===!1&&(h.writable=!0,h.configurable=!0),(h.get||h.set)&&(i[l]={configurable:!0,writable:!0,enumerable:h.enumerable,value:n[l]})}return Object.create(Vu(n),i)}else{const i=Vu(n);if(i!==null&&t)return{...n};const r=Object.create(i);return Object.assign(r,n)}}function mE(n,e=!1){return Yg(n)||Ka(n)||!gr(n)||(Kg(n)>1&&Object.defineProperties(n,{set:{value:Ym},add:{value:Ym},clear:{value:Ym},delete:{value:Ym}}),Object.freeze(n),e&&Object.values(n).forEach(t=>mE(t,!0))),n}function Ym(){Xi(2)}function Yg(n){return Object.isFrozen(n)}var E6={};function $a(n){const e=E6[n];return e||Xi(0,n),e}var pf;function aD(){return pf}function S6(n,e){return{drafts_:[],parent_:n,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function DC(n,e){e&&($a("Patches"),n.patches_=[],n.inversePatches_=[],n.patchListener_=e)}function U0(n){F0(n),n.drafts_.forEach(w6),n.drafts_=null}function F0(n){n===pf&&(pf=n.parent_)}function NC(n){return pf=S6(pf,n)}function w6(n){const e=n[ci];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function PC(n,e){e.unfinalizedDrafts_=e.drafts_.length;const t=e.drafts_[0];return n!==void 0&&n!==t?(t[ci].modified_&&(U0(e),Xi(4)),gr(n)&&(n=zp(e,n),e.parent_||jp(e,n)),e.patches_&&$a("Patches").generateReplacementPatches_(t[ci].base_,n,e.patches_,e.inversePatches_)):n=zp(e,t,[]),U0(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),n!==sD?n:void 0}function zp(n,e,t){if(Yg(e))return e;const i=e[ci];if(!i)return Bp(e,(r,a)=>MC(n,i,e,r,a,t)),e;if(i.scope_!==n)return e;if(!i.modified_)return jp(n,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const r=i.copy_;let a=r,l=!1;i.type_===3&&(a=new Set(r),r.clear(),l=!0),Bp(a,(h,f)=>MC(n,i,r,h,f,t,l)),jp(n,r,!1),t&&n.patches_&&$a("Patches").generatePatches_(i,t,n.patches_,n.inversePatches_)}return i.copy_}function MC(n,e,t,i,r,a,l){if(Ka(r)){const h=a&&e&&e.type_!==3&&!k0(e.assigned_,i)?a.concat(i):void 0,f=zp(n,r,h);if(oD(t,i,f),Ka(f))n.canAutoFreeze_=!1;else return}else l&&t.add(r);if(gr(r)&&!Yg(r)){if(!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1)return;zp(n,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(Wf(t)?t.has(i):Object.prototype.propertyIsEnumerable.call(t,i))&&jp(n,r)}}function jp(n,e,t=!1){!n.parent_&&n.immer_.autoFreeze_&&n.canAutoFreeze_&&mE(e,t)}function b6(n,e){const t=Array.isArray(n),i={type_:t?1:0,scope_:e?e.scope_:aD(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:n,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,a=pE;t&&(r=[i],a=gf);const{revoke:l,proxy:h}=Proxy.revocable(r,a);return i.draft_=h,i.revoke_=l,h}var pE={get(n,e){if(e===ci)return n;const t=wa(n);if(!k0(t,e))return A6(n,t,e);const i=t[e];return n.finalized_||!gr(i)?i:i===Kv(n.base_,e)?($v(n),n.copy_[e]=z0(i,n)):i},has(n,e){return e in wa(n)},ownKeys(n){return Reflect.ownKeys(wa(n))},set(n,e,t){const i=lD(wa(n),e);if(i?.set)return i.set.call(n.draft_,t),!0;if(!n.modified_){const r=Kv(wa(n),e),a=r?.[ci];if(a&&a.base_===t)return n.copy_[e]=t,n.assigned_[e]=!1,!0;if(T6(t,r)&&(t!==void 0||k0(n.base_,e)))return!0;$v(n),B0(n)}return n.copy_[e]===t&&(t!==void 0||e in n.copy_)||Number.isNaN(t)&&Number.isNaN(n.copy_[e])||(n.copy_[e]=t,n.assigned_[e]=!0),!0},deleteProperty(n,e){return Kv(n.base_,e)!==void 0||e in n.base_?(n.assigned_[e]=!1,$v(n),B0(n)):delete n.assigned_[e],n.copy_&&delete n.copy_[e],!0},getOwnPropertyDescriptor(n,e){const t=wa(n),i=Reflect.getOwnPropertyDescriptor(t,e);return i&&{writable:!0,configurable:n.type_!==1||e!=="length",enumerable:i.enumerable,value:t[e]}},defineProperty(){Xi(11)},getPrototypeOf(n){return Vu(n.base_)},setPrototypeOf(){Xi(12)}},gf={};Bp(pE,(n,e)=>{gf[n]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});gf.deleteProperty=function(n,e){return gf.set.call(this,n,e,void 0)};gf.set=function(n,e,t){return pE.set.call(this,n[0],e,t,n[0])};function Kv(n,e){const t=n[ci];return(t?wa(t):n)[e]}function A6(n,e,t){const i=lD(e,t);return i?"value"in i?i.value:i.get?.call(n.draft_):void 0}function lD(n,e){if(!(e in n))return;let t=Vu(n);for(;t;){const i=Object.getOwnPropertyDescriptor(t,e);if(i)return i;t=Vu(t)}}function B0(n){n.modified_||(n.modified_=!0,n.parent_&&B0(n.parent_))}function $v(n){n.copy_||(n.copy_=L0(n.base_,n.scope_.immer_.useStrictShallowCopy_))}var C6=class{constructor(n){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,i)=>{if(typeof e=="function"&&typeof t!="function"){const a=t;t=e;const l=this;return function(f=a,...d){return l.produce(f,g=>t.call(this,g,...d))}}typeof t!="function"&&Xi(6),i!==void 0&&typeof i!="function"&&Xi(7);let r;if(gr(e)){const a=NC(this),l=z0(e,void 0);let h=!0;try{r=t(l),h=!1}finally{h?U0(a):F0(a)}return DC(a,i),PC(r,a)}else if(!e||typeof e!="object"){if(r=t(e),r===void 0&&(r=e),r===sD&&(r=void 0),this.autoFreeze_&&mE(r,!0),i){const a=[],l=[];$a("Patches").generateReplacementPatches_(e,r,a,l),i(a,l)}return r}else Xi(1,e)},this.produceWithPatches=(e,t)=>{if(typeof e=="function")return(l,...h)=>this.produceWithPatches(l,f=>e(f,...h));let i,r;return[this.produce(e,t,(l,h)=>{i=l,r=h}),i,r]},typeof n?.autoFreeze=="boolean"&&this.setAutoFreeze(n.autoFreeze),typeof n?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(n.useStrictShallowCopy)}createDraft(n){gr(n)||Xi(8),Ka(n)&&(n=I6(n));const e=NC(this),t=z0(n,void 0);return t[ci].isManual_=!0,F0(e),t}finishDraft(n,e){const t=n&&n[ci];(!t||!t.isManual_)&&Xi(9);const{scope_:i}=t;return DC(i,e),PC(void 0,i)}setAutoFreeze(n){this.autoFreeze_=n}setUseStrictShallowCopy(n){this.useStrictShallowCopy_=n}applyPatches(n,e){let t;for(t=e.length-1;t>=0;t--){const r=e[t];if(r.path.length===0&&r.op==="replace"){n=r.value;break}}t>-1&&(e=e.slice(t+1));const i=$a("Patches").applyPatches_;return Ka(n)?i(n,e):this.produce(n,r=>i(r,e))}};function z0(n,e){const t=Wf(n)?$a("MapSet").proxyMap_(n,e):$g(n)?$a("MapSet").proxySet_(n,e):b6(n,e);return(e?e.scope_:aD()).drafts_.push(t),t}function I6(n){return Ka(n)||Xi(10,n),uD(n)}function uD(n){if(!gr(n)||Yg(n))return n;const e=n[ci];let t;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,t=L0(n,e.scope_.immer_.useStrictShallowCopy_)}else t=L0(n,!0);return Bp(t,(i,r)=>{oD(t,i,uD(r))}),e&&(e.finalized_=!1),t}var R6=new C6,cD=R6.produce;function x6(n,e=`expected a function, instead received ${typeof n}`){if(typeof n!="function")throw new TypeError(e)}function D6(n,e=`expected an object, instead received ${typeof n}`){if(typeof n!="object")throw new TypeError(e)}function N6(n,e="expected all items to be functions, instead received the following types: "){if(!n.every(t=>typeof t=="function")){const t=n.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${t}]`)}}var OC=n=>Array.isArray(n)?n:[n];function P6(n){const e=Array.isArray(n[0])?n[0]:n;return N6(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function M6(n,e){const t=[],{length:i}=n;for(let r=0;r<i;r++)t.push(n[r].apply(null,e));return t}var O6=class{constructor(n){this.value=n}deref(){return this.value}},V6=typeof WeakRef<"u"?WeakRef:O6,k6=0,VC=1;function Wm(){return{s:k6,v:void 0,o:null,p:null}}function hD(n,e={}){let t=Wm();const{resultEqualityCheck:i}=e;let r,a=0;function l(){let h=t;const{length:f}=arguments;for(let y=0,v=f;y<v;y++){const w=arguments[y];if(typeof w=="function"||typeof w=="object"&&w!==null){let C=h.o;C===null&&(h.o=C=new WeakMap);const N=C.get(w);N===void 0?(h=Wm(),C.set(w,h)):h=N}else{let C=h.p;C===null&&(h.p=C=new Map);const N=C.get(w);N===void 0?(h=Wm(),C.set(w,h)):h=N}}const d=h;let g;if(h.s===VC)g=h.v;else if(g=n.apply(null,arguments),a++,i){const y=r?.deref?.()??r;y!=null&&i(y,g)&&(g=y,a!==0&&a--),r=typeof g=="object"&&g!==null||typeof g=="function"?new V6(g):g}return d.s=VC,d.v=g,g}return l.clearCache=()=>{t=Wm(),l.resetResultsCount()},l.resultsCount=()=>a,l.resetResultsCount=()=>{a=0},l}function L6(n,...e){const t=typeof n=="function"?{memoize:n,memoizeOptions:e}:n,i=(...r)=>{let a=0,l=0,h,f={},d=r.pop();typeof d=="object"&&(f=d,d=r.pop()),x6(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const g={...t,...f},{memoize:y,memoizeOptions:v=[],argsMemoize:w=hD,argsMemoizeOptions:C=[]}=g,N=OC(v),D=OC(C),U=P6(r),z=y(function(){return a++,d.apply(null,arguments)},...N),k=w(function(){l++;const Q=M6(U,arguments);return h=z.apply(null,Q),h},...D);return Object.assign(k,{resultFunc:d,memoizedResultFunc:z,dependencies:U,dependencyRecomputations:()=>l,resetDependencyRecomputations:()=>{l=0},lastResult:()=>h,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:y,argsMemoize:w})};return Object.assign(i,{withTypes:()=>i}),i}var fD=L6(hD),U6=Object.assign((n,e=fD)=>{D6(n,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof n}`);const t=Object.keys(n),i=t.map(a=>n[a]);return e(i,(...a)=>a.reduce((l,h,f)=>(l[t[f]]=h,l),{}))},{withTypes:()=>U6});function dD(n){return({dispatch:t,getState:i})=>r=>a=>typeof a=="function"?a(t,i,n):r(a)}var F6=dD(),B6=dD,z6=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Fp:Fp.apply(null,arguments)},j6=n=>n&&typeof n.match=="function";function Kh(n,e){function t(...i){if(e){let r=e(...i);if(!r)throw new Error(fr(0));return{type:n,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:n,payload:i[0]}}return t.toString=()=>`${n}`,t.type=n,t.match=i=>y6(i)&&i.type===n,t}var mD=class Uh extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Uh.prototype)}static get[Symbol.species](){return Uh}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Uh(...e[0].concat(this)):new Uh(...e.concat(this))}};function kC(n){return gr(n)?cD(n,()=>{}):n}function Qm(n,e,t){return n.has(e)?n.get(e):n.set(e,t(e)).get(e)}function q6(n){return typeof n=="boolean"}var H6=()=>function(e){const{thunk:t=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:a=!0}=e??{};let l=new mD;return t&&(q6(t)?l.push(F6):l.push(B6(t.extraArgument))),l},G6="RTK_autoBatch",LC=n=>e=>{setTimeout(e,n)},K6=(n={type:"raf"})=>e=>(...t)=>{const i=e(...t);let r=!0,a=!1,l=!1;const h=new Set,f=n.type==="tick"?queueMicrotask:n.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:LC(10):n.type==="callback"?n.queueNotification:LC(n.timeout),d=()=>{l=!1,a&&(a=!1,h.forEach(g=>g()))};return Object.assign({},i,{subscribe(g){const y=()=>r&&g(),v=i.subscribe(y);return h.add(g),()=>{v(),h.delete(g)}},dispatch(g){try{return r=!g?.meta?.[G6],a=!r,a&&(l||(l=!0,f(d))),i.dispatch(g)}finally{r=!0}}})},$6=n=>function(t){const{autoBatch:i=!0}=t??{};let r=new mD(n);return i&&r.push(K6(typeof i=="object"?i:void 0)),r};function Y6(n){const e=H6(),{reducer:t=void 0,middleware:i,devTools:r=!0,preloadedState:a=void 0,enhancers:l=void 0}=n||{};let h;if(typeof t=="function")h=t;else if(dE(t))h=g6(t);else throw new Error(fr(1));let f;typeof i=="function"?f=i(e):f=e();let d=Fp;r&&(d=z6({trace:!1,...typeof r=="object"&&r}));const g=_6(...f),y=$6(g);let v=typeof l=="function"?l(y):y();const w=d(...v);return iD(h,a,w)}function pD(n){const e={},t=[];let i;const r={addCase(a,l){const h=typeof a=="string"?a:a.type;if(!h)throw new Error(fr(28));if(h in e)throw new Error(fr(29));return e[h]=l,r},addAsyncThunk(a,l){return l.pending&&(e[a.pending.type]=l.pending),l.rejected&&(e[a.rejected.type]=l.rejected),l.fulfilled&&(e[a.fulfilled.type]=l.fulfilled),l.settled&&t.push({matcher:a.settled,reducer:l.settled}),r},addMatcher(a,l){return t.push({matcher:a,reducer:l}),r},addDefaultCase(a){return i=a,r}};return n(r),[e,t,i]}function W6(n){return typeof n=="function"}function Q6(n,e){let[t,i,r]=pD(e),a;if(W6(n))a=()=>kC(n());else{const h=kC(n);a=()=>h}function l(h=a(),f){let d=[t[f.type],...i.filter(({matcher:g})=>g(f)).map(({reducer:g})=>g)];return d.filter(g=>!!g).length===0&&(d=[r]),d.reduce((g,y)=>{if(y)if(Ka(g)){const w=y(g,f);return w===void 0?g:w}else{if(gr(g))return cD(g,v=>y(v,f));{const v=y(g,f);if(v===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return g},h)}return l.getInitialState=a,l}var X6=(n,e)=>j6(n)?n.match(e):n(e);function J6(...n){return e=>n.some(t=>X6(t,e))}var Z6="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",e5=(n=21)=>{let e="",t=n;for(;t--;)e+=Z6[Math.random()*64|0];return e},t5=["name","message","stack","code"],Yv=class{constructor(n,e){this.payload=n,this.meta=e}_type},UC=class{constructor(n,e){this.payload=n,this.meta=e}_type},n5=n=>{if(typeof n=="object"&&n!==null){const e={};for(const t of t5)typeof n[t]=="string"&&(e[t]=n[t]);return e}return{message:String(n)}},FC="External signal was aborted",i5=(()=>{function n(e,t,i){const r=Kh(e+"/fulfilled",(f,d,g,y)=>({payload:f,meta:{...y||{},arg:g,requestId:d,requestStatus:"fulfilled"}})),a=Kh(e+"/pending",(f,d,g)=>({payload:void 0,meta:{...g||{},arg:d,requestId:f,requestStatus:"pending"}})),l=Kh(e+"/rejected",(f,d,g,y,v)=>({payload:y,error:(i&&i.serializeError||n5)(f||"Rejected"),meta:{...v||{},arg:g,requestId:d,rejectedWithValue:!!y,requestStatus:"rejected",aborted:f?.name==="AbortError",condition:f?.name==="ConditionError"}}));function h(f,{signal:d}={}){return(g,y,v)=>{const w=i?.idGenerator?i.idGenerator(f):e5(),C=new AbortController;let N,D;function U(k){D=k,C.abort()}d&&(d.aborted?U(FC):d.addEventListener("abort",()=>U(FC),{once:!0}));const z=(async function(){let k;try{let Q=i?.condition?.(f,{getState:y,extra:v});if(r5(Q)&&(Q=await Q),Q===!1||C.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const oe=new Promise((R,A)=>{N=()=>{A({name:"AbortError",message:D||"Aborted"})},C.signal.addEventListener("abort",N)});g(a(w,f,i?.getPendingMeta?.({requestId:w,arg:f},{getState:y,extra:v}))),k=await Promise.race([oe,Promise.resolve(t(f,{dispatch:g,getState:y,extra:v,requestId:w,signal:C.signal,abort:U,rejectWithValue:(R,A)=>new Yv(R,A),fulfillWithValue:(R,A)=>new UC(R,A)})).then(R=>{if(R instanceof Yv)throw R;return R instanceof UC?r(R.payload,w,f,R.meta):r(R,w,f)})])}catch(Q){k=Q instanceof Yv?l(null,w,f,Q.payload,Q.meta):l(Q,w,f)}finally{N&&C.signal.removeEventListener("abort",N)}return i&&!i.dispatchConditionRejection&&l.match(k)&&k.meta.condition||g(k),k})();return Object.assign(z,{abort:U,requestId:w,arg:f,unwrap(){return z.then(s5)}})}}return Object.assign(h,{pending:a,rejected:l,fulfilled:r,settled:J6(l,r),typePrefix:e})}return n.withTypes=()=>n,n})();function s5(n){if(n.meta&&n.meta.rejectedWithValue)throw n.payload;if(n.error)throw n.error;return n.payload}function r5(n){return n!==null&&typeof n=="object"&&typeof n.then=="function"}var gD=Symbol.for("rtk-slice-createasyncthunk"),o5={[gD]:i5};function a5(n,e){return`${n}/${e}`}function l5({creators:n}={}){const e=n?.asyncThunk?.[gD];return function(i){const{name:r,reducerPath:a=r}=i;if(!r)throw new Error(fr(11));const l=(typeof i.reducers=="function"?i.reducers(c5()):i.reducers)||{},h=Object.keys(l),f={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(k,Z){const Q=typeof k=="string"?k:k.type;if(!Q)throw new Error(fr(12));if(Q in f.sliceCaseReducersByType)throw new Error(fr(13));return f.sliceCaseReducersByType[Q]=Z,d},addMatcher(k,Z){return f.sliceMatchers.push({matcher:k,reducer:Z}),d},exposeAction(k,Z){return f.actionCreators[k]=Z,d},exposeCaseReducer(k,Z){return f.sliceCaseReducersByName[k]=Z,d}};h.forEach(k=>{const Z=l[k],Q={reducerName:k,type:a5(r,k),createNotation:typeof i.reducers=="function"};f5(Z)?m5(Q,Z,d,e):h5(Q,Z,d)});function g(){const[k={},Z=[],Q=void 0]=typeof i.extraReducers=="function"?pD(i.extraReducers):[i.extraReducers],oe={...k,...f.sliceCaseReducersByType};return Q6(i.initialState,R=>{for(let A in oe)R.addCase(A,oe[A]);for(let A of f.sliceMatchers)R.addMatcher(A.matcher,A.reducer);for(let A of Z)R.addMatcher(A.matcher,A.reducer);Q&&R.addDefaultCase(Q)})}const y=k=>k,v=new Map,w=new WeakMap;let C;function N(k,Z){return C||(C=g()),C(k,Z)}function D(){return C||(C=g()),C.getInitialState()}function U(k,Z=!1){function Q(R){let A=R[k];return typeof A>"u"&&Z&&(A=Qm(w,Q,D)),A}function oe(R=y){const A=Qm(v,Z,()=>new WeakMap);return Qm(A,R,()=>{const x={};for(const[L,V]of Object.entries(i.selectors??{}))x[L]=u5(V,R,()=>Qm(w,R,D),Z);return x})}return{reducerPath:k,getSelectors:oe,get selectors(){return oe(Q)},selectSlice:Q}}const z={name:r,reducer:N,actions:f.actionCreators,caseReducers:f.sliceCaseReducersByName,getInitialState:D,...U(a),injectInto(k,{reducerPath:Z,...Q}={}){const oe=Z??a;return k.inject({reducerPath:oe,reducer:N},Q),{...z,...U(oe,!0)}}};return z}}function u5(n,e,t,i){function r(a,...l){let h=e(a);return typeof h>"u"&&i&&(h=t()),n(h,...l)}return r.unwrapped=n,r}function c5(){function n(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return n.withTypes=()=>n,{reducer(e){return Object.assign({[e.name](...t){return e(...t)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,t){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}},asyncThunk:n}}function h5({type:n,reducerName:e,createNotation:t},i,r){let a,l;if("reducer"in i){if(t&&!d5(i))throw new Error(fr(17));a=i.reducer,l=i.prepare}else a=i;r.addCase(n,a).exposeCaseReducer(e,a).exposeAction(e,l?Kh(n,l):Kh(n))}function f5(n){return n._reducerDefinitionType==="asyncThunk"}function d5(n){return n._reducerDefinitionType==="reducerWithPrepare"}function m5({type:n,reducerName:e},t,i,r){if(!r)throw new Error(fr(18));const{payloadCreator:a,fulfilled:l,pending:h,rejected:f,settled:d,options:g}=t,y=r(n,a,g);i.exposeAction(e,y),l&&i.addCase(y.fulfilled,l),h&&i.addCase(y.pending,h),f&&i.addCase(y.rejected,f),d&&i.addMatcher(y.settled,d),i.exposeCaseReducer(e,{fulfilled:l||Xm,pending:h||Xm,rejected:f||Xm,settled:d||Xm})}function Xm(){}function fr(n){return`Minified Redux Toolkit error #${n}; visit https://redux-toolkit.js.org/Errors?code=${n} for the full message or use the non-minified dev environment for full errors. `}const Ua=f6.withTypes(),p5=n=>n.products.products,g5=fD([p5],n=>n.reduce((e,t)=>{const i=t.order.toString();return e[i]||(e[i]=[]),e[i].push(t),e},{})),_D=l5({creators:{asyncThunk:o5}}),_5=()=>{};var BC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue=function(n,e){if(!n)throw lc(e)},lc=function(n){return new Error("Firebase Database ("+yD.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},y5=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],l=n[t++],h=n[t++],f=((r&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|l&63)}}return e.join("")},gE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],l=r+1<n.length,h=l?n[r+1]:0,f=r+2<n.length,d=f?n[r+2]:0,g=a>>2,y=(a&3)<<4|h>>4;let v=(h&15)<<2|d>>6,w=d&63;f||(w=64,l||(v=64)),i.push(t[g],t[y],t[v],t[w])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(vD(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):y5(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],h=r<n.length?t[n.charAt(r)]:0;++r;const d=r<n.length?t[n.charAt(r)]:64;++r;const y=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||h==null||d==null||y==null)throw new v5;const v=a<<2|h>>4;if(i.push(v),d!==64){const w=h<<4&240|d>>2;if(i.push(w),y!==64){const C=d<<6&192|y;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class v5 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TD=function(n){const e=vD(n);return gE.encodeByteArray(e,!0)},qp=function(n){return TD(n).replace(/\./g,"")},Hp=function(n){try{return gE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(n){return ED(void 0,n)}function ED(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!E5(t)||(n[t]=ED(n[t],e[t]));return n}function E5(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5=()=>SD().__FIREBASE_DEFAULTS__,w5=()=>{if(typeof process>"u"||typeof BC>"u")return;const n=BC.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},b5=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Hp(n[1]);return e&&JSON.parse(e)},Wg=()=>{try{return _5()||S5()||w5()||b5()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},wD=n=>Wg()?.emulatorHosts?.[n],A5=n=>{const e=wD(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},bD=()=>Wg()?.config,AD=n=>Wg()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _E(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C5(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[qp(JSON.stringify(t)),qp(JSON.stringify(l)),""].join(".")}const $h={};function I5(){const n={prod:[],emulator:[]};for(const e of Object.keys($h))$h[e]?n.emulator.push(e):n.prod.push(e);return n}function R5(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let zC=!1;function CD(n,e){if(typeof window>"u"||typeof document>"u"||!Fo(window.location.host)||$h[n]===e||$h[n]||zC)return;$h[n]=e;function t(v){return`__firebase__banner__${v}`}const i="__firebase__banner",a=I5().prod.length>0;function l(){const v=document.getElementById(i);v&&v.remove()}function h(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function f(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function d(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{zC=!0,l()},v}function g(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=R5(i),w=t("text"),C=document.getElementById(w)||document.createElement("span"),N=t("learnmore"),D=document.getElementById(N)||document.createElement("a"),U=t("preprendIcon"),z=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const k=v.element;h(k),g(D,N);const Z=d();f(z,U),k.append(z,C,D,Z),document.body.appendChild(k)}a?(C.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function ID(){const n=Wg()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function x5(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function D5(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function RD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function N5(){const n=rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function P5(){return yD.NODE_ADMIN===!0}function xD(){return!ID()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DD(){return!ID()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function ND(){try{return typeof indexedDB=="object"}catch{return!1}}function M5(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{e(r.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5="FirebaseError";class Rr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=O5,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qf.prototype.create)}}class Qf{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],l=a?V5(a,i):"Error",h=`${this.serviceName}: ${l} (${r}).`;return new Rr(r,h,i)}}function V5(n,e){return n.replace(k5,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const k5=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(n){return JSON.parse(n)}function dn(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=function(n){let e={},t={},i={},r="";try{const a=n.split(".");e=_f(Hp(a[0])||""),t=_f(Hp(a[1])||""),r=a[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}},L5=function(n){const e=PD(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},U5=function(n){const e=PD(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function ku(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function Gp(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Kp(n,e,t){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function xo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],l=e[r];if(jC(a)&&jC(l)){if(!xo(a,l))return!1}else if(a!==l)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function jC(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let y=0;y<16;y++)i[y]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let y=0;y<16;y++)i[y]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let y=16;y<80;y++){const v=i[y-3]^i[y-8]^i[y-14]^i[y-16];i[y]=(v<<1|v>>>31)&4294967295}let r=this.chain_[0],a=this.chain_[1],l=this.chain_[2],h=this.chain_[3],f=this.chain_[4],d,g;for(let y=0;y<80;y++){y<40?y<20?(d=h^a&(l^h),g=1518500249):(d=a^l^h,g=1859775393):y<60?(d=a&l|h&(a|l),g=2400959708):(d=a^l^h,g=3395469782);const v=(r<<5|r>>>27)+d+f+g+i[y]&4294967295;f=h,h=l,l=(a<<30|a>>>2)&4294967295,a=r,r=v}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let r=0;const a=this.buf_;let l=this.inbuf_;for(;r<t;){if(l===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(a[l]=e.charCodeAt(r),++l,++r,l===this.blockSize){this.compress_(a),l=0;break}}else for(;r<t;)if(a[l]=e[r],++l,++r,l===this.blockSize){this.compress_(a),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let a=24;a>=0;a-=8)e[i]=this.chain_[r]>>a&255,++i;return e}}function B5(n,e){const t=new z5(n,e);return t.subscribe.bind(t)}class z5{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");j5(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Wv),r.error===void 0&&(r.error=Wv),r.complete===void 0&&(r.complete=Wv);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function j5(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Wv(){}function Lu(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const a=r-55296;i++,ue(i<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(i)-56320;r=65536+(a<<10)+l}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Qg=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(n){return n&&n._delegate?n._delegate:n}class Do{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ba="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H5=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new or;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(K5(e))try{this.getOrInitializeService({instanceIdentifier:ba})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=ba){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ba){return this.instances.has(e)}getOptions(e=ba){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);i===h&&l.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:G5(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ba){return this.component?this.component.multipleInstances?e:ba:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function G5(n){return n===ba?void 0:n}function K5(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new H5(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const Y5={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},W5=ze.INFO,Q5={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},X5=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=Q5[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xg{constructor(e){this.name=e,this._logLevel=W5,this._logHandler=X5,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const J5=(n,e)=>e.some(t=>n instanceof t);let qC,HC;function Z5(){return qC||(qC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function eU(){return HC||(HC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MD=new WeakMap,j0=new WeakMap,OD=new WeakMap,Qv=new WeakMap,vE=new WeakMap;function tU(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(So(n.result)),r()},l=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&MD.set(t,n)}).catch(()=>{}),vE.set(e,n),e}function nU(n){if(j0.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),r()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});j0.set(n,e)}let q0={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return j0.get(n);if(e==="objectStoreNames")return n.objectStoreNames||OD.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return So(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function iU(n){q0=n(q0)}function sU(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Xv(this),e,...t);return OD.set(i,e.sort?e.sort():[e]),So(i)}:eU().includes(n)?function(...e){return n.apply(Xv(this),e),So(MD.get(this))}:function(...e){return So(n.apply(Xv(this),e))}}function rU(n){return typeof n=="function"?sU(n):(n instanceof IDBTransaction&&nU(n),J5(n,Z5())?new Proxy(n,q0):n)}function So(n){if(n instanceof IDBRequest)return tU(n);if(Qv.has(n))return Qv.get(n);const e=rU(n);return e!==n&&(Qv.set(n,e),vE.set(e,n)),e}const Xv=n=>vE.get(n);function oU(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const l=indexedDB.open(n,e),h=So(l);return i&&l.addEventListener("upgradeneeded",f=>{i(So(l.result),f.oldVersion,f.newVersion,So(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),r&&f.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),h}const aU=["get","getKey","getAll","getAllKeys","count"],lU=["put","add","delete","clear"],Jv=new Map;function GC(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Jv.get(e))return Jv.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=lU.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||aU.includes(t)))return;const a=async function(l,...h){const f=this.transaction(l,r?"readwrite":"readonly");let d=f.store;return i&&(d=d.index(h.shift())),(await Promise.all([d[t](...h),r&&f.done]))[0]};return Jv.set(e,a),a}iU(n=>({...n,get:(e,t,i)=>GC(e,t)||n.get(e,t,i),has:(e,t)=>!!GC(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(cU(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function cU(n){return n.getComponent()?.type==="VERSION"}const H0="@firebase/app",KC="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new Xg("@firebase/app"),hU="@firebase/app-compat",fU="@firebase/analytics-compat",dU="@firebase/analytics",mU="@firebase/app-check-compat",pU="@firebase/app-check",gU="@firebase/auth",_U="@firebase/auth-compat",yU="@firebase/database",vU="@firebase/data-connect",TU="@firebase/database-compat",EU="@firebase/functions",SU="@firebase/functions-compat",wU="@firebase/installations",bU="@firebase/installations-compat",AU="@firebase/messaging",CU="@firebase/messaging-compat",IU="@firebase/performance",RU="@firebase/performance-compat",xU="@firebase/remote-config",DU="@firebase/remote-config-compat",NU="@firebase/storage",PU="@firebase/storage-compat",MU="@firebase/firestore",OU="@firebase/ai",VU="@firebase/firestore-compat",kU="firebase",LU="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="[DEFAULT]",UU={[H0]:"fire-core",[hU]:"fire-core-compat",[dU]:"fire-analytics",[fU]:"fire-analytics-compat",[pU]:"fire-app-check",[mU]:"fire-app-check-compat",[gU]:"fire-auth",[_U]:"fire-auth-compat",[yU]:"fire-rtdb",[vU]:"fire-data-connect",[TU]:"fire-rtdb-compat",[EU]:"fire-fn",[SU]:"fire-fn-compat",[wU]:"fire-iid",[bU]:"fire-iid-compat",[AU]:"fire-fcm",[CU]:"fire-fcm-compat",[IU]:"fire-perf",[RU]:"fire-perf-compat",[xU]:"fire-rc",[DU]:"fire-rc-compat",[NU]:"fire-gcs",[PU]:"fire-gcs-compat",[MU]:"fire-fst",[VU]:"fire-fst-compat",[OU]:"fire-vertex","fire-js":"fire-js",[kU]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=new Map,FU=new Map,K0=new Map;function $C(n,e){try{n.container.addComponent(e)}catch(t){_r.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ya(n){const e=n.name;if(K0.has(e))return _r.debug(`There were multiple attempts to register component ${e}.`),!1;K0.set(e,n);for(const t of $p.values())$C(t,n);for(const t of FU.values())$C(t,n);return!0}function Jg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ji(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wo=new Qf("app","Firebase",BU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Do("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=LU;function VD(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:G0,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw wo.create("bad-app-name",{appName:String(r)});if(t||(t=bD()),!t)throw wo.create("no-options");const a=$p.get(r);if(a){if(xo(t,a.options)&&xo(i,a.config))return a;throw wo.create("duplicate-app",{appName:r})}const l=new $5(r);for(const f of K0.values())l.addComponent(f);const h=new zU(t,i,l);return $p.set(r,h),h}function kD(n=G0){const e=$p.get(n);if(!e&&n===G0&&bD())return VD();if(!e)throw wo.create("no-app",{appName:n});return e}function Ps(n,e,t){let i=UU[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const l=[`Unable to register library "${i}" with version "${e}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),_r.warn(l.join(" "));return}Ya(new Do(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU="firebase-heartbeat-database",qU=1,yf="firebase-heartbeat-store";let Zv=null;function LD(){return Zv||(Zv=oU(jU,qU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yf)}catch(t){console.warn(t)}}}}).catch(n=>{throw wo.create("idb-open",{originalErrorMessage:n.message})})),Zv}async function HU(n){try{const t=(await LD()).transaction(yf),i=await t.objectStore(yf).get(UD(n));return await t.done,i}catch(e){if(e instanceof Rr)_r.warn(e.message);else{const t=wo.create("idb-get",{originalErrorMessage:e?.message});_r.warn(t.message)}}}async function YC(n,e){try{const i=(await LD()).transaction(yf,"readwrite");await i.objectStore(yf).put(e,UD(n)),await i.done}catch(t){if(t instanceof Rr)_r.warn(t.message);else{const i=wo.create("idb-set",{originalErrorMessage:t?.message});_r.warn(i.message)}}}function UD(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU=1024,KU=30;class $U{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new WU(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=WC();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>KU){const r=QU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(r,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_r.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=WC(),{heartbeatsToSend:t,unsentEntries:i}=YU(this._heartbeatsCache.heartbeats),r=qp(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return _r.warn(e),""}}}function WC(){return new Date().toISOString().substring(0,10)}function YU(n,e=GU){const t=[];let i=n.slice();for(const r of n){const a=t.find(l=>l.agent===r.agent);if(a){if(a.dates.push(r.date),QC(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),QC(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class WU{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ND()?M5().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HU(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return YC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return YC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function QC(n){return qp(JSON.stringify({version:2,heartbeats:n})).length}function QU(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(n){Ya(new Do("platform-logger",e=>new uU(e),"PRIVATE")),Ya(new Do("heartbeat",e=>new $U(e),"PRIVATE")),Ps(H0,KC,n),Ps(H0,KC,"esm2020"),Ps("fire-js","")}XU("");var XC={};const JC="@firebase/database",ZC="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FD="";function JU(n){FD=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),dn(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:_f(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Bs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ZU(e)}}catch{}return new e9},Ma=BD("localStorage"),t9=BD("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bu=new Xg("@firebase/database"),n9=(function(){let n=1;return function(){return n++}})(),zD=function(n){const e=q5(n),t=new F5;t.update(e);const i=t.digest();return gE.encodeByteArray(i)},Xf=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Xf.apply(null,i):typeof i=="object"?e+=dn(i):e+=i,e+=" "}return e};let Yh=null,eI=!0;const i9=function(n,e){ue(!0,"Can't turn on custom loggers persistently."),bu.logLevel=ze.VERBOSE,Yh=bu.log.bind(bu)},bn=function(...n){if(eI===!0&&(eI=!1,Yh===null&&t9.get("logging_enabled")===!0&&i9()),Yh){const e=Xf.apply(null,n);Yh(e)}},Jf=function(n){return function(...e){bn(n,...e)}},$0=function(...n){const e="FIREBASE INTERNAL ERROR: "+Xf(...n);bu.error(e)},yr=function(...n){const e=`FIREBASE FATAL ERROR: ${Xf(...n)}`;throw bu.error(e),new Error(e)},Qn=function(...n){const e="FIREBASE WARNING: "+Xf(...n);bu.warn(e)},s9=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Qn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Zg=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},r9=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Uu="[MIN_NAME]",Wa="[MAX_NAME]",ll=function(n,e){if(n===e)return 0;if(n===Uu||e===Wa)return-1;if(e===Uu||n===Wa)return 1;{const t=tI(n),i=tI(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},o9=function(n,e){return n===e?0:n<e?-1:1},Rh=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+dn(e))},TE=function(n){if(typeof n!="object"||n===null)return dn(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=dn(e[i]),t+=":",t+=TE(n[e[i]]);return t+="}",t},jD=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function Dn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const qD=function(n){ue(!Zg(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let r,a,l,h,f;n===0?(a=0,l=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),a=h+i,l=Math.round(n*Math.pow(2,t-h)-Math.pow(2,t))):(a=0,l=Math.round(n/Math.pow(2,1-i-t))));const d=[];for(f=t;f;f-=1)d.push(l%2?1:0),l=Math.floor(l/2);for(f=e;f;f-=1)d.push(a%2?1:0),a=Math.floor(a/2);d.push(r?1:0),d.reverse();const g=d.join("");let y="";for(f=0;f<64;f+=8){let v=parseInt(g.substr(f,8),2).toString(16);v.length===1&&(v="0"+v),y=y+v}return y.toLowerCase()},a9=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},l9=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function u9(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const c9=new RegExp("^-?(0*)\\d{1,10}$"),h9=-2147483648,f9=2147483647,tI=function(n){if(c9.test(n)){const e=Number(n);if(e>=h9&&e<=f9)return e}return null},cc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Qn("Exception was thrown by user callback.",t),e},Math.floor(0))}},d9=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Wh=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Ji(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.appCheckProvider?.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Qn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(bn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qn(e)}}class pp{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}pp.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="5",HD="v",GD="s",KD="r",$D="f",YD=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,WD="ls",QD="p",Y0="ac",XD="websocket",JD="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,t,i,r,a=!1,l="",h=!1,f=!1,d=null){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=f,this.emulatorOptions=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ma.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ma.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function g9(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function eN(n,e,t){ue(typeof e=="string","typeof type must == string"),ue(typeof t=="object","typeof params must == object");let i;if(e===XD)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===JD)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);g9(n)&&(t.ns=n.namespace);const r=[];return Dn(t,(a,l)=>{r.push(a+"="+l)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _9{constructor(){this.counters_={}}incrementCounter(e,t=1){Bs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return T5(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0={},t0={};function SE(n){const e=n.toString();return e0[e]||(e0[e]=new _9),e0[e]}function y9(n,e){const t=n.toString();return t0[t]||(t0[t]=e()),t0[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&cc(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="start",T9="close",E9="pLPCommand",S9="pRTLPCB",tN="id",nN="pw",iN="ser",w9="cb",b9="seg",A9="ts",C9="d",I9="dframe",sN=1870,rN=30,R9=sN-rN,x9=25e3,D9=3e4;class _u{constructor(e,t,i,r,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Jf(e),this.stats_=SE(t),this.urlFn=f=>(this.appCheckToken&&(f[Y0]=this.appCheckToken),eN(t,JD,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new v9(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(D9)),r9(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wE((...a)=>{const[l,h,f,d,g]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===nI)this.id=h,this.password=f;else if(l===T9)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const i={};i[nI]="t",i[iN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[w9]=this.scriptTagHolder.uniqueCallbackIdentifier),i[HD]=EE,this.transportSessionId&&(i[GD]=this.transportSessionId),this.lastSessionId&&(i[WD]=this.lastSessionId),this.applicationId&&(i[QD]=this.applicationId),this.appCheckToken&&(i[Y0]=this.appCheckToken),typeof location<"u"&&location.hostname&&YD.test(location.hostname)&&(i[KD]=$D);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){_u.forceAllow_=!0}static forceDisallow(){_u.forceDisallow_=!0}static isAvailable(){return _u.forceAllow_?!0:!_u.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!a9()&&!l9()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=dn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=TD(t),r=jD(i,R9);for(let a=0;a<r.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[I9]="t",i[tN]=e,i[nN]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=dn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class wE{constructor(e,t,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=n9(),window[E9+this.uniqueCallbackIdentifier]=e,window[S9+this.uniqueCallbackIdentifier]=t,this.myIFrame=wE.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){bn("frame writing exception"),h.stack&&bn(h.stack),bn(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||bn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[tN]=this.myID,e[nN]=this.myPW,e[iN]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+rN+i.length<=sN;){const l=this.pendingSegs.shift();i=i+"&"+b9+r+"="+l.seg+"&"+A9+r+"="+l.ts+"&"+C9+r+"="+l.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(x9)),a=()=>{clearTimeout(r),i()};this.addTag(e,a)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{bn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=16384,P9=45e3;let Yp=null;typeof MozWebSocket<"u"?Yp=MozWebSocket:typeof WebSocket<"u"&&(Yp=WebSocket);class Zi{constructor(e,t,i,r,a,l,h){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Jf(this.connId),this.stats_=SE(t),this.connURL=Zi.connectionURL_(t,l,h,r,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,r,a){const l={};return l[HD]=EE,typeof location<"u"&&location.hostname&&YD.test(location.hostname)&&(l[KD]=$D),t&&(l[GD]=t),i&&(l[WD]=i),r&&(l[Y0]=r),a&&(l[QD]=a),eN(e,XD,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ma.set("previous_websocket_failure",!0);try{let i;P5(),this.mySock=new Yp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Zi.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Yp!==null&&!Zi.forceDisallow_}static previouslyFailed(){return Ma.isInMemoryStorage||Ma.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ma.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=_f(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ue(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=dn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=jD(t,N9);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(P9))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Zi.responsesRequiredToBeHealthy=2;Zi.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{static get ALL_TRANSPORTS(){return[_u,Zi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Zi&&Zi.isAvailable();let i=t&&!Zi.previouslyFailed();if(e.webSocketOnly&&(t||Qn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Zi];else{const r=this.transports_=[];for(const a of vf.ALL_TRANSPORTS)a&&a.isAvailable()&&r.push(a);vf.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}vf.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9=6e4,O9=5e3,V9=10*1024,k9=100*1024,n0="t",iI="d",L9="s",sI="r",U9="e",rI="o",oI="a",aI="n",lI="p",F9="h";class B9{constructor(e,t,i,r,a,l,h,f,d,g){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=f,this.onKill_=d,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Jf("c:"+this.id+":"),this.transportManager_=new vf(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Wh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>k9?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>V9?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(n0 in e){const t=e[n0];t===oI?this.upgradeIfSecondaryHealthy_():t===sI?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===rI&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Rh("t",e),i=Rh("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:lI,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:oI,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:aI,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Rh("t",e),i=Rh("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Rh(n0,e);if(iI in e){const i=e[iI];if(t===F9){const r={...i};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===aI){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===L9?this.onConnectionShutdown_(i):t===sI?this.onReset_(i):t===U9?$0("Server Error: "+i):t===rI?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$0("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),EE!==i&&Qn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Wh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(M9))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(O9))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:lI,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ma.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.allowedEvents_=e,this.listeners_={},ue(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let a=0;a<r.length;a++)if(r[a].callback===t&&(!i||i===r[a].context)){r.splice(a,1);return}}validateEventType_(e){ue(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp extends aN{static getInstance(){return new Wp}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!yE()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ue(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=32,cI=768;class lt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function et(){return new lt("")}function Ve(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function No(n){return n.pieces_.length-n.pieceNum_}function pt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new lt(n.pieces_,e)}function bE(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function z9(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Tf(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function lN(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new lt(e,0)}function Ut(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof lt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new lt(t,0)}function Le(n){return n.pieceNum_>=n.pieces_.length}function $n(n,e){const t=Ve(n),i=Ve(e);if(t===null)return e;if(t===i)return $n(pt(n),pt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function j9(n,e){const t=Tf(n,0),i=Tf(e,0);for(let r=0;r<t.length&&r<i.length;r++){const a=ll(t[r],i[r]);if(a!==0)return a}return t.length===i.length?0:t.length<i.length?-1:1}function AE(n,e){if(No(n)!==No(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function xi(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(No(n)>No(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class q9{constructor(e,t){this.errorPrefix_=t,this.parts_=Tf(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Qg(this.parts_[i]);uN(this)}}function H9(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Qg(e),uN(n)}function G9(n){const e=n.parts_.pop();n.byteLength_-=Qg(e),n.parts_.length>0&&(n.byteLength_-=1)}function uN(n){if(n.byteLength_>cI)throw new Error(n.errorPrefix_+"has a key path longer than "+cI+" bytes ("+n.byteLength_+").");if(n.parts_.length>uI)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+uI+") or object contains a cycle "+Aa(n))}function Aa(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE extends aN{static getInstance(){return new CE}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return ue(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh=1e3,K9=300*1e3,hI=30*1e3,$9=1.3,Y9=3e4,W9="server_kill",fI=3;class dr extends oN{constructor(e,t,i,r,a,l,h,f){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=h,this.authOverride_=f,this.id=dr.nextPersistentConnectionId_++,this.log_=Jf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xh,this.maxReconnectDelay_=K9,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");CE.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Wp.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const r=++this.requestNumber_,a={r,a:e,b:t};this.log_(dn(a)),ue(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const t=new or,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const h=l.d;l.s==="ok"?t.resolve(h):t.reject(h)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),t.promise}listen(e,t,i,r){this.initConnection_();const a=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ue(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const h={onComplete:r,hashFn:t,query:e,tag:i};this.listens.get(l).set(a,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+i+" for "+r);const a={p:i},l="q";e.tag&&(a.q=t._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(l,a,h=>{const f=h.d,d=h.s;dr.warnOnListenWarnings_(f,t),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",h),d!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(d,f))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Bs(e,"w")){const i=ku(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',a=t._path.toString();Qn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||U5(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=hI)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=L5(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,r=>{const a=r.s,l=r.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),ue(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,t)}sendUnlisten_(e,t,i,r){this.log_("Unlisten on "+e+" for "+t);const a={p:e},l="n";r&&(a.q=i,a.t=r),this.sendRequest(l,a)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,r){const a={p:t,d:i};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,l=>{r&&setTimeout(()=>{r(l.s,l.d)},Math.floor(0))})}put(e,t,i,r){this.putInternal("p",e,t,i,r)}merge(e,t,i,r){this.putInternal("m",e,t,i,r)}putInternal(e,t,i,r,a){this.initConnection_();const l={p:t,d:i};a!==void 0&&(l.h=a),this.outstandingPuts_.push({action:e,request:l,onComplete:r}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,a=>{this.log_(t+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(a.s,a.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const a=i.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+dn(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):$0("Unrecognized action received from server: "+dn(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ue(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xh,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=xh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Y9&&(this.reconnectDelay_=xh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*$9)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+dr.nextConnectionId_++,a=this.lastSessionId;let l=!1,h=null;const f=function(){h?h.close():(l=!0,i())},d=function(y){ue(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(y)};this.realtime_={close:f,sendRequest:d};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[y,v]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);l?bn("getToken() completed but was canceled"):(bn("getToken() completed. Creating connection."),this.authToken_=y&&y.accessToken,this.appCheckToken_=v&&v.token,h=new B9(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,w=>{Qn(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(W9)},a))}catch(y){this.log_("Failed to get token: "+y),l||(this.repoInfo_.nodeAdmin&&Qn(y),f())}}}interrupt(e){bn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){bn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Gp(this.interruptReasons_)&&(this.reconnectDelay_=xh,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(a=>TE(a)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const i=new lt(e).toString();let r;if(this.listens.has(i)){const a=this.listens.get(i);r=a.get(t),a.delete(t),a.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,t){bn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=fI&&(this.reconnectDelay_=hI,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){bn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=fI&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+FD.replace(/\./g,"-")]=1,yE()?e["framework.cordova"]=1:RD()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Wp.getInstance().currentlyOnline();return Gp(this.interruptReasons_)&&e}}dr.nextPersistentConnectionId_=0;dr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Ue(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Ue(Uu,e),r=new Ue(Uu,t);return this.compare(i,r)!==0}minPost(){return Ue.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jm;class cN extends e_{static get __EMPTY_NODE(){return Jm}static set __EMPTY_NODE(e){Jm=e}compare(e,t){return ll(e.name,t.name)}isDefinedOn(e){throw lc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ue.MIN}maxPost(){return new Ue(Wa,Jm)}makePost(e,t){return ue(typeof e=="string","KeyIndex indexValue must always be a string."),new Ue(e,Jm)}toString(){return".key"}}const Au=new cN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zm=class{constructor(e,t,i,r,a=null){this.isReverse_=r,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?i(e.key,t):1,r&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},oi=class Fh{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??Fh.RED,this.left=r??xs.EMPTY_NODE,this.right=a??xs.EMPTY_NODE}copy(e,t,i,r,a){return new Fh(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return a<0?r=r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r=r.copy(null,t,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return xs.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,r;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return xs.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Fh.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Fh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}};oi.RED=!0;oi.BLACK=!1;class Q9{copy(e,t,i,r,a){return this}insert(e,t,i){return new oi(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}let xs=class gp{constructor(e,t=gp.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new gp(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,oi.BLACK,null,null))}remove(e){return new gp(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,oi.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Zm(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Zm(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Zm(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Zm(this.root_,null,this.comparator_,!0,e)}};xs.EMPTY_NODE=new Q9;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(n,e){return ll(n.name,e.name)}function IE(n,e){return ll(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W0;function J9(n){W0=n}const hN=function(n){return typeof n=="number"?"number:"+qD(n):"string:"+n},fN=function(n){if(n.isLeafNode()){const e=n.val();ue(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Bs(e,".sv"),"Priority must be a string or number.")}else ue(n===W0||n.isEmpty(),"priority of unexpected type.");ue(n===W0||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dI;class hn{static set __childrenNodeConstructor(e){dI=e}static get __childrenNodeConstructor(){return dI}constructor(e,t=hn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,ue(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),fN(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new hn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:hn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Le(e)?this:Ve(e)===".priority"?this.priorityNode_:hn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:hn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Ve(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(ue(i!==".priority"||No(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,hn.__childrenNodeConstructor.EMPTY_NODE.updateChild(pt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+hN(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=qD(this.value_):e+=this.value_,this.lazyHash_=zD(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===hn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof hn.__childrenNodeConstructor?-1:(ue(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,r=hn.VALUE_TYPE_ORDER.indexOf(t),a=hn.VALUE_TYPE_ORDER.indexOf(i);return ue(r>=0,"Unknown leaf type: "+t),ue(a>=0,"Unknown leaf type: "+i),r===a?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}hn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dN,mN;function Z9(n){dN=n}function eF(n){mN=n}class tF extends e_{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),a=i.compareTo(r);return a===0?ll(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ue.MIN}maxPost(){return new Ue(Wa,new hn("[PRIORITY-POST]",mN))}makePost(e,t){const i=dN(e);return new Ue(t,new hn("[PRIORITY-POST]",i))}toString(){return".priority"}}const It=new tF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF=Math.log(2);class iF{constructor(e){const t=a=>parseInt(Math.log(a)/nF,10),i=a=>parseInt(Array(a+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Qp=function(n,e,t,i){n.sort(e);const r=function(f,d){const g=d-f;let y,v;if(g===0)return null;if(g===1)return y=n[f],v=t?t(y):y,new oi(v,y.node,oi.BLACK,null,null);{const w=parseInt(g/2,10)+f,C=r(f,w),N=r(w+1,d);return y=n[w],v=t?t(y):y,new oi(v,y.node,oi.BLACK,C,N)}},a=function(f){let d=null,g=null,y=n.length;const v=function(C,N){const D=y-C,U=y;y-=C;const z=r(D+1,U),k=n[D],Z=t?t(k):k;w(new oi(Z,k.node,N,null,z))},w=function(C){d?(d.left=C,d=C):(g=C,d=C)};for(let C=0;C<f.count;++C){const N=f.nextBitIsOne(),D=Math.pow(2,f.count-(C+1));N?v(D,oi.BLACK):(v(D,oi.BLACK),v(D,oi.RED))}return g},l=new iF(n.length),h=a(l);return new xs(i||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let i0;const iu={};class ar{static get Default(){return ue(iu&&It,"ChildrenNode.ts has not been loaded"),i0=i0||new ar({".priority":iu},{".priority":It}),i0}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=ku(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof xs?t:null}hasIndex(e){return Bs(this.indexSet_,e.toString())}addIndex(e,t){ue(e!==Au,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const a=t.getIterator(Ue.Wrap);let l=a.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=a.getNext();let h;r?h=Qp(i,e.getCompare()):h=iu;const f=e.toString(),d={...this.indexSet_};d[f]=e;const g={...this.indexes_};return g[f]=h,new ar(g,d)}addToIndexes(e,t){const i=Kp(this.indexes_,(r,a)=>{const l=ku(this.indexSet_,a);if(ue(l,"Missing index implementation for "+a),r===iu)if(l.isDefinedOn(e.node)){const h=[],f=t.getIterator(Ue.Wrap);let d=f.getNext();for(;d;)d.name!==e.name&&h.push(d),d=f.getNext();return h.push(e),Qp(h,l.getCompare())}else return iu;else{const h=t.get(e.name);let f=r;return h&&(f=f.remove(new Ue(e.name,h))),f.insert(e,e.node)}});return new ar(i,this.indexSet_)}removeFromIndexes(e,t){const i=Kp(this.indexes_,r=>{if(r===iu)return r;{const a=t.get(e.name);return a?r.remove(new Ue(e.name,a)):r}});return new ar(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dh;class be{static get EMPTY_NODE(){return Dh||(Dh=new be(new xs(IE),null,ar.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&fN(this.priorityNode_),this.children_.isEmpty()&&ue(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Dh}updatePriority(e){return this.children_.isEmpty()?this:new be(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?Dh:t}}getChild(e){const t=Ve(e);return t===null?this:this.getImmediateChild(t).getChild(pt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(ue(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Ue(e,t);let r,a;t.isEmpty()?(r=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,t),a=this.indexMap_.addToIndexes(i,this.children_));const l=r.isEmpty()?Dh:this.priorityNode_;return new be(r,l,a)}}updateChild(e,t){const i=Ve(e);if(i===null)return t;{ue(Ve(e)!==".priority"||No(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(pt(e),t);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,r=0,a=!0;if(this.forEachChild(It,(l,h)=>{t[l]=h.val(e),i++,a&&be.INTEGER_REGEXP_.test(l)?r=Math.max(r,Number(l)):a=!1}),!e&&a&&r<2*i){const l=[];for(const h in t)l[h]=t[h];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+hN(this.getPriority().val())+":"),this.forEachChild(It,(t,i)=>{const r=i.hash();r!==""&&(e+=":"+t+":"+r)}),this.lazyHash_=e===""?"":zD(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const r=this.resolveIndex_(i);if(r){const a=r.getPredecessorKey(new Ue(e,t));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Ue(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Ue(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>t(r.name,r.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,Ue.Wrap);let a=r.peek();for(;a!=null&&t.compare(a,e)<0;)r.getNext(),a=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,Ue.Wrap);let a=r.peek();for(;a!=null&&t.compare(a,e)>0;)r.getNext(),a=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Zf?-1:0}withIndex(e){if(e===Au||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new be(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Au||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(It),r=t.getIterator(It);let a=i.getNext(),l=r.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=i.getNext(),l=r.getNext()}return a===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===Au?null:this.indexMap_.get(e.toString())}}be.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class sF extends be{constructor(){super(new xs(IE),be.EMPTY_NODE,ar.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return be.EMPTY_NODE}isEmpty(){return!1}}const Zf=new sF;Object.defineProperties(Ue,{MIN:{value:new Ue(Uu,be.EMPTY_NODE)},MAX:{value:new Ue(Wa,Zf)}});cN.__EMPTY_NODE=be.EMPTY_NODE;hn.__childrenNodeConstructor=be;J9(Zf);eF(Zf);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF=!0;function Xt(n,e=null){if(n===null)return be.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),ue(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new hn(t,Xt(e))}if(!(n instanceof Array)&&rF){const t=[];let i=!1;if(Dn(n,(l,h)=>{if(l.substring(0,1)!=="."){const f=Xt(h);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),t.push(new Ue(l,f)))}}),t.length===0)return be.EMPTY_NODE;const a=Qp(t,X9,l=>l.name,IE);if(i){const l=Qp(t,It.getCompare());return new be(a,Xt(e),new ar({".priority":l},{".priority":It}))}else return new be(a,Xt(e),ar.Default)}else{let t=be.EMPTY_NODE;return Dn(n,(i,r)=>{if(Bs(n,i)&&i.substring(0,1)!=="."){const a=Xt(r);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(i,a))}}),t.updatePriority(Xt(e))}}Z9(Xt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF extends e_{constructor(e){super(),this.indexPath_=e,ue(!Le(e)&&Ve(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),a=i.compareTo(r);return a===0?ll(e.name,t.name):a}makePost(e,t){const i=Xt(e),r=be.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ue(t,r)}maxPost(){const e=be.EMPTY_NODE.updateChild(this.indexPath_,Zf);return new Ue(Wa,e)}toString(){return Tf(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF extends e_{compare(e,t){const i=e.node.compareTo(t.node);return i===0?ll(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ue.MIN}maxPost(){return Ue.MAX}makePost(e,t){const i=Xt(e);return new Ue(t,i)}toString(){return".value"}}const lF=new aF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(n){return{type:"value",snapshotNode:n}}function Fu(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Ef(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Sf(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function uF(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e){this.index_=e}updateChild(e,t,i,r,a,l){ue(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(r).equals(i.getChild(r))&&h.isEmpty()===i.isEmpty()||(l!=null&&(i.isEmpty()?e.hasChild(t)?l.trackChildChange(Ef(t,h)):ue(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(Fu(t,i)):l.trackChildChange(Sf(t,i,h))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(It,(r,a)=>{t.hasChild(r)||i.trackChildChange(Ef(r,a))}),t.isLeafNode()||t.forEachChild(It,(r,a)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(a)||i.trackChildChange(Sf(r,a,l))}else i.trackChildChange(Fu(r,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?be.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this.indexedFilter_=new RE(e.getIndex()),this.index_=e.getIndex(),this.startPost_=wf.getStartPost_(e),this.endPost_=wf.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,a,l){return this.matches(new Ue(t,i))||(i=be.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,a,l)}updateFullNode(e,t,i){t.isLeafNode()&&(t=be.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(be.EMPTY_NODE);const a=this;return t.forEachChild(It,(l,h)=>{a.matches(new Ue(l,h))||(r=r.updateImmediateChild(l,be.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new wf(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,a,l){return this.rangedFilter_.matches(new Ue(t,i))||(i=be.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,a,l):this.fullLimitUpdateChild_(e,t,i,a,l)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=be.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=be.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))r=r.updateImmediateChild(h.name,h.node),l++;else break;else continue}}else{r=t.withIndex(this.index_),r=r.updatePriority(be.EMPTY_NODE);let a;this.reverse_?a=r.getReverseIterator(this.index_):a=r.getIterator(this.index_);let l=0;for(;a.hasNext();){const h=a.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:r=r.updateImmediateChild(h.name,be.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,a){let l;if(this.reverse_){const y=this.index_.getCompare();l=(v,w)=>y(w,v)}else l=this.index_.getCompare();const h=e;ue(h.numChildren()===this.limit_,"");const f=new Ue(t,i),d=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),g=this.rangedFilter_.matches(f);if(h.hasChild(t)){const y=h.getImmediateChild(t);let v=r.getChildAfterChild(this.index_,d,this.reverse_);for(;v!=null&&(v.name===t||h.hasChild(v.name));)v=r.getChildAfterChild(this.index_,v,this.reverse_);const w=v==null?1:l(v,f);if(g&&!i.isEmpty()&&w>=0)return a?.trackChildChange(Sf(t,i,y)),h.updateImmediateChild(t,i);{a?.trackChildChange(Ef(t,y));const N=h.updateImmediateChild(t,be.EMPTY_NODE);return v!=null&&this.rangedFilter_.matches(v)?(a?.trackChildChange(Fu(v.name,v.node)),N.updateImmediateChild(v.name,v.node)):N}}else return i.isEmpty()?e:g&&l(d,f)>=0?(a!=null&&(a.trackChildChange(Ef(d.name,d.node)),a.trackChildChange(Fu(t,i))),h.updateImmediateChild(t,i).updateImmediateChild(d.name,be.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=It}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ue(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ue(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Uu}hasEnd(){return this.endSet_}getIndexEndValue(){return ue(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ue(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ue(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===It}copy(){const e=new xE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function hF(n){return n.loadsAllData()?new RE(n.getIndex()):n.hasLimit()?new cF(n):new wf(n)}function mI(n){const e={};if(n.isDefault())return e;let t;if(n.index_===It?t="$priority":n.index_===lF?t="$value":n.index_===Au?t="$key":(ue(n.index_ instanceof oF,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=dn(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=dn(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+dn(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=dn(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+dn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function pI(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==It&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp extends oN{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(ue(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Jf("p:rest:"),this.listens_={}}listen(e,t,i,r){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=Xp.getListenId_(e,i),h={};this.listens_[l]=h;const f=mI(e._queryParams);this.restRequest_(a+".json",f,(d,g)=>{let y=g;if(d===404&&(y=null,d=null),d===null&&this.onDataUpdate_(a,y,!1,i),ku(this.listens_,l)===h){let v;d?d===401?v="permission_denied":v="rest_error:"+d:v="ok",r(v,null)}})}unlisten(e,t){const i=Xp.getListenId_(e,t);delete this.listens_[i]}get(e){const t=mI(e._queryParams),i=e._path.toString(),r=new or;return this.restRequest_(i+".json",t,(a,l)=>{let h=l;a===404&&(h=null,a=null),a===null?(this.onDataUpdate_(i,h,!1,null),r.resolve(h)):r.reject(new Error(h))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,a])=>{r&&r.accessToken&&(t.auth=r.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+uc(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&h.readyState===4){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let f=null;if(h.status>=200&&h.status<300){try{f=_f(h.responseText)}catch{Qn("Failed to parse JSON response for "+l+": "+h.responseText)}i(null,f)}else h.status!==401&&h.status!==404&&Qn("Got unsuccessful REST response for "+l+" Status: "+h.status),i(h.status);i=null}},h.open("GET",l,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(){this.rootNode_=be.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(){return{value:null,children:new Map}}function hc(n,e,t){if(Le(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Ve(e);n.children.has(i)||n.children.set(i,Jp());const r=n.children.get(i);e=pt(e),hc(r,e,t)}}function Q0(n,e){if(Le(e))return n.value=null,n.children.clear(),!0;if(n.value!==null){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(It,(i,r)=>{hc(n,new lt(i),r)}),Q0(n,e)}}else if(n.children.size>0){const t=Ve(e);return e=pt(e),n.children.has(t)&&Q0(n.children.get(t),e)&&n.children.delete(t),n.children.size===0}else return!0}function X0(n,e,t){n.value!==null?t(e,n.value):dF(n,(i,r)=>{const a=new lt(e.toString()+"/"+i);X0(r,a,t)})}function dF(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&Dn(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gI=10*1e3,pF=30*1e3,gF=300*1e3;class _F{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new mF(e);const i=gI+(pF-gI)*Math.random();Wh(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Dn(e,(r,a)=>{a>0&&Bs(this.statsToReport_,r)&&(t[r]=a,i=!0)}),i&&this.server_.reportStats(t),Wh(this.reportStats_.bind(this),Math.floor(Math.random()*2*gF))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var es;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(es||(es={}));function gN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function DE(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function NE(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=es.ACK_USER_WRITE,this.source=gN()}operationForChild(e){if(Le(this.path)){if(this.affectedTree.value!=null)return ue(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new lt(e));return new Zp(et(),t,this.revert)}}else return ue(Ve(this.path)===e,"operationForChild called for unrelated child."),new Zp(pt(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t){this.source=e,this.path=t,this.type=es.LISTEN_COMPLETE}operationForChild(e){return Le(this.path)?new bf(this.source,et()):new bf(this.source,pt(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=es.OVERWRITE}operationForChild(e){return Le(this.path)?new Qa(this.source,et(),this.snap.getImmediateChild(e)):new Qa(this.source,pt(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=es.MERGE}operationForChild(e){if(Le(this.path)){const t=this.children.subtree(new lt(e));return t.isEmpty()?null:t.value?new Qa(this.source,et(),t.value):new Af(this.source,et(),t)}else return ue(Ve(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Af(this.source,pt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Le(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ve(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function vF(n,e,t,i){const r=[],a=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(uF(l.childName,l.snapshotNode))}),Nh(n,r,"child_removed",e,i,t),Nh(n,r,"child_added",e,i,t),Nh(n,r,"child_moved",a,i,t),Nh(n,r,"child_changed",e,i,t),Nh(n,r,"value",e,i,t),r}function Nh(n,e,t,i,r,a){const l=i.filter(h=>h.type===t);l.sort((h,f)=>EF(n,h,f)),l.forEach(h=>{const f=TF(n,h,a);r.forEach(d=>{d.respondsTo(h.type)&&e.push(d.createEvent(f,n.query_))})})}function TF(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function EF(n,e,t){if(e.childName==null||t.childName==null)throw lc("Should only compare child_ events.");const i=new Ue(e.childName,e.snapshotNode),r=new Ue(t.childName,t.snapshotNode);return n.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(n,e){return{eventCache:n,serverCache:e}}function Qh(n,e,t,i){return t_(new Xa(e,t,i),n.serverCache)}function _N(n,e,t,i){return t_(n.eventCache,new Xa(e,t,i))}function J0(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ja(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s0;const SF=()=>(s0||(s0=new xs(o9)),s0);class yt{static fromObject(e){let t=new yt(null);return Dn(e,(i,r)=>{t=t.set(new lt(i),r)}),t}constructor(e,t=SF()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:et(),value:this.value};if(Le(e))return null;{const i=Ve(e),r=this.children.get(i);if(r!==null){const a=r.findRootMostMatchingPathAndValue(pt(e),t);return a!=null?{path:Ut(new lt(i),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Le(e))return this;{const t=Ve(e),i=this.children.get(t);return i!==null?i.subtree(pt(e)):new yt(null)}}set(e,t){if(Le(e))return new yt(t,this.children);{const i=Ve(e),a=(this.children.get(i)||new yt(null)).set(pt(e),t),l=this.children.insert(i,a);return new yt(this.value,l)}}remove(e){if(Le(e))return this.children.isEmpty()?new yt(null):new yt(null,this.children);{const t=Ve(e),i=this.children.get(t);if(i){const r=i.remove(pt(e));let a;return r.isEmpty()?a=this.children.remove(t):a=this.children.insert(t,r),this.value===null&&a.isEmpty()?new yt(null):new yt(this.value,a)}else return this}}get(e){if(Le(e))return this.value;{const t=Ve(e),i=this.children.get(t);return i?i.get(pt(e)):null}}setTree(e,t){if(Le(e))return t;{const i=Ve(e),a=(this.children.get(i)||new yt(null)).setTree(pt(e),t);let l;return a.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,a),new yt(this.value,l)}}fold(e){return this.fold_(et(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,a)=>{i[r]=a.fold_(Ut(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,et(),t)}findOnPath_(e,t,i){const r=this.value?i(t,this.value):!1;if(r)return r;if(Le(e))return null;{const a=Ve(e),l=this.children.get(a);return l?l.findOnPath_(pt(e),Ut(t,a),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,et(),t)}foreachOnPath_(e,t,i){if(Le(e))return this;{this.value&&i(t,this.value);const r=Ve(e),a=this.children.get(r);return a?a.foreachOnPath_(pt(e),Ut(t,r),i):new yt(null)}}foreach(e){this.foreach_(et(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Ut(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this.writeTree_=e}static empty(){return new ns(new yt(null))}}function Xh(n,e,t){if(Le(e))return new ns(new yt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let a=i.value;const l=$n(r,e);return a=a.updateChild(l,t),new ns(n.writeTree_.set(r,a))}else{const r=new yt(t),a=n.writeTree_.setTree(e,r);return new ns(a)}}}function _I(n,e,t){let i=n;return Dn(t,(r,a)=>{i=Xh(i,Ut(e,r),a)}),i}function yI(n,e){if(Le(e))return ns.empty();{const t=n.writeTree_.setTree(e,new yt(null));return new ns(t)}}function Z0(n,e){return ul(n,e)!=null}function ul(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild($n(t.path,e)):null}function vI(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(It,(i,r)=>{e.push(new Ue(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Ue(i,r.value))}),e}function bo(n,e){if(Le(e))return n;{const t=ul(n,e);return t!=null?new ns(new yt(t)):new ns(n.writeTree_.subtree(e))}}function eT(n){return n.writeTree_.isEmpty()}function Bu(n,e){return yN(et(),n.writeTree_,e)}function yN(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,a)=>{r===".priority"?(ue(a.value!==null,"Priority writes must always be leaf nodes"),i=a.value):t=yN(Ut(n,r),a,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Ut(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(n,e){return SN(e,n)}function wF(n,e,t,i,r){ue(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Xh(n.visibleWrites,e,t)),n.lastWriteId=i}function bF(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function AF(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);ue(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,a=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&CF(h,i.path)?r=!1:xi(i.path,h.path)&&(a=!0)),l--}if(r){if(a)return IF(n),!0;if(i.snap)n.visibleWrites=yI(n.visibleWrites,i.path);else{const h=i.children;Dn(h,f=>{n.visibleWrites=yI(n.visibleWrites,Ut(i.path,f))})}return!0}else return!1}function CF(n,e){if(n.snap)return xi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&xi(Ut(n.path,t),e))return!0;return!1}function IF(n){n.visibleWrites=vN(n.allWrites,RF,et()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function RF(n){return n.visible}function vN(n,e,t){let i=ns.empty();for(let r=0;r<n.length;++r){const a=n[r];if(e(a)){const l=a.path;let h;if(a.snap)xi(t,l)?(h=$n(t,l),i=Xh(i,h,a.snap)):xi(l,t)&&(h=$n(l,t),i=Xh(i,et(),a.snap.getChild(h)));else if(a.children){if(xi(t,l))h=$n(t,l),i=_I(i,h,a.children);else if(xi(l,t))if(h=$n(l,t),Le(h))i=_I(i,et(),a.children);else{const f=ku(a.children,Ve(h));if(f){const d=f.getChild(pt(h));i=Xh(i,et(),d)}}}else throw lc("WriteRecord should have .snap or .children")}}return i}function TN(n,e,t,i,r){if(!i&&!r){const a=ul(n.visibleWrites,e);if(a!=null)return a;{const l=bo(n.visibleWrites,e);if(eT(l))return t;if(t==null&&!Z0(l,et()))return null;{const h=t||be.EMPTY_NODE;return Bu(l,h)}}}else{const a=bo(n.visibleWrites,e);if(!r&&eT(a))return t;if(!r&&t==null&&!Z0(a,et()))return null;{const l=function(d){return(d.visible||r)&&(!i||!~i.indexOf(d.writeId))&&(xi(d.path,e)||xi(e,d.path))},h=vN(n.allWrites,l,e),f=t||be.EMPTY_NODE;return Bu(h,f)}}}function xF(n,e,t){let i=be.EMPTY_NODE;const r=ul(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(It,(a,l)=>{i=i.updateImmediateChild(a,l)}),i;if(t){const a=bo(n.visibleWrites,e);return t.forEachChild(It,(l,h)=>{const f=Bu(bo(a,new lt(l)),h);i=i.updateImmediateChild(l,f)}),vI(a).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const a=bo(n.visibleWrites,e);return vI(a).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function DF(n,e,t,i,r){ue(i||r,"Either existingEventSnap or existingServerSnap must exist");const a=Ut(e,t);if(Z0(n.visibleWrites,a))return null;{const l=bo(n.visibleWrites,a);return eT(l)?r.getChild(t):Bu(l,r.getChild(t))}}function NF(n,e,t,i){const r=Ut(e,t),a=ul(n.visibleWrites,r);if(a!=null)return a;if(i.isCompleteForChild(t)){const l=bo(n.visibleWrites,r);return Bu(l,i.getNode().getImmediateChild(t))}else return null}function PF(n,e){return ul(n.visibleWrites,e)}function MF(n,e,t,i,r,a,l){let h;const f=bo(n.visibleWrites,e),d=ul(f,et());if(d!=null)h=d;else if(t!=null)h=Bu(f,t);else return[];if(h=h.withIndex(l),!h.isEmpty()&&!h.isLeafNode()){const g=[],y=l.getCompare(),v=a?h.getReverseIteratorFrom(i,l):h.getIteratorFrom(i,l);let w=v.getNext();for(;w&&g.length<r;)y(w,i)!==0&&g.push(w),w=v.getNext();return g}else return[]}function OF(){return{visibleWrites:ns.empty(),allWrites:[],lastWriteId:-1}}function eg(n,e,t,i){return TN(n.writeTree,n.treePath,e,t,i)}function ME(n,e){return xF(n.writeTree,n.treePath,e)}function TI(n,e,t,i){return DF(n.writeTree,n.treePath,e,t,i)}function tg(n,e){return PF(n.writeTree,Ut(n.treePath,e))}function VF(n,e,t,i,r,a){return MF(n.writeTree,n.treePath,e,t,i,r,a)}function OE(n,e,t){return NF(n.writeTree,n.treePath,e,t)}function EN(n,e){return SN(Ut(n.treePath,e),n.writeTree)}function SN(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;ue(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),ue(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const a=r.type;if(t==="child_added"&&a==="child_removed")this.changeMap.set(i,Sf(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&a==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&a==="child_changed")this.changeMap.set(i,Ef(i,r.oldSnap));else if(t==="child_changed"&&a==="child_added")this.changeMap.set(i,Fu(i,e.snapshotNode));else if(t==="child_changed"&&a==="child_changed")this.changeMap.set(i,Sf(i,e.snapshotNode,r.oldSnap));else throw lc("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const wN=new LF;class VE{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Xa(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return OE(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ja(this.viewCache_),a=VF(this.writes_,r,t,1,i,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(n){return{filter:n}}function FF(n,e){ue(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ue(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function BF(n,e,t,i,r){const a=new kF;let l,h;if(t.type===es.OVERWRITE){const d=t;d.source.fromUser?l=tT(n,e,d.path,d.snap,i,r,a):(ue(d.source.fromServer,"Unknown source."),h=d.source.tagged||e.serverCache.isFiltered()&&!Le(d.path),l=ng(n,e,d.path,d.snap,i,r,h,a))}else if(t.type===es.MERGE){const d=t;d.source.fromUser?l=jF(n,e,d.path,d.children,i,r,a):(ue(d.source.fromServer,"Unknown source."),h=d.source.tagged||e.serverCache.isFiltered(),l=nT(n,e,d.path,d.children,i,r,h,a))}else if(t.type===es.ACK_USER_WRITE){const d=t;d.revert?l=GF(n,e,d.path,i,r,a):l=qF(n,e,d.path,d.affectedTree,i,r,a)}else if(t.type===es.LISTEN_COMPLETE)l=HF(n,e,t.path,i,a);else throw lc("Unknown operation type: "+t.type);const f=a.getChanges();return zF(e,l,f),{viewCache:l,changes:f}}function zF(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=J0(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&t.push(pN(J0(e)))}}function bN(n,e,t,i,r,a){const l=e.eventCache;if(tg(i,t)!=null)return e;{let h,f;if(Le(t))if(ue(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const d=Ja(e),g=d instanceof be?d:be.EMPTY_NODE,y=ME(i,g);h=n.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const d=eg(i,Ja(e));h=n.filter.updateFullNode(e.eventCache.getNode(),d,a)}else{const d=Ve(t);if(d===".priority"){ue(No(t)===1,"Can't have a priority with additional path components");const g=l.getNode();f=e.serverCache.getNode();const y=TI(i,t,g,f);y!=null?h=n.filter.updatePriority(g,y):h=l.getNode()}else{const g=pt(t);let y;if(l.isCompleteForChild(d)){f=e.serverCache.getNode();const v=TI(i,t,l.getNode(),f);v!=null?y=l.getNode().getImmediateChild(d).updateChild(g,v):y=l.getNode().getImmediateChild(d)}else y=OE(i,d,e.serverCache);y!=null?h=n.filter.updateChild(l.getNode(),d,y,g,r,a):h=l.getNode()}}return Qh(e,h,l.isFullyInitialized()||Le(t),n.filter.filtersNodes())}}function ng(n,e,t,i,r,a,l,h){const f=e.serverCache;let d;const g=l?n.filter:n.filter.getIndexedFilter();if(Le(t))d=g.updateFullNode(f.getNode(),i,null);else if(g.filtersNodes()&&!f.isFiltered()){const w=f.getNode().updateChild(t,i);d=g.updateFullNode(f.getNode(),w,null)}else{const w=Ve(t);if(!f.isCompleteForPath(t)&&No(t)>1)return e;const C=pt(t),D=f.getNode().getImmediateChild(w).updateChild(C,i);w===".priority"?d=g.updatePriority(f.getNode(),D):d=g.updateChild(f.getNode(),w,D,C,wN,null)}const y=_N(e,d,f.isFullyInitialized()||Le(t),g.filtersNodes()),v=new VE(r,y,a);return bN(n,y,t,r,v,h)}function tT(n,e,t,i,r,a,l){const h=e.eventCache;let f,d;const g=new VE(r,e,a);if(Le(t))d=n.filter.updateFullNode(e.eventCache.getNode(),i,l),f=Qh(e,d,!0,n.filter.filtersNodes());else{const y=Ve(t);if(y===".priority")d=n.filter.updatePriority(e.eventCache.getNode(),i),f=Qh(e,d,h.isFullyInitialized(),h.isFiltered());else{const v=pt(t),w=h.getNode().getImmediateChild(y);let C;if(Le(v))C=i;else{const N=g.getCompleteChild(y);N!=null?bE(v)===".priority"&&N.getChild(lN(v)).isEmpty()?C=N:C=N.updateChild(v,i):C=be.EMPTY_NODE}if(w.equals(C))f=e;else{const N=n.filter.updateChild(h.getNode(),y,C,v,g,l);f=Qh(e,N,h.isFullyInitialized(),n.filter.filtersNodes())}}}return f}function EI(n,e){return n.eventCache.isCompleteForChild(e)}function jF(n,e,t,i,r,a,l){let h=e;return i.foreach((f,d)=>{const g=Ut(t,f);EI(e,Ve(g))&&(h=tT(n,h,g,d,r,a,l))}),i.foreach((f,d)=>{const g=Ut(t,f);EI(e,Ve(g))||(h=tT(n,h,g,d,r,a,l))}),h}function SI(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function nT(n,e,t,i,r,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f=e,d;Le(t)?d=i:d=new yt(null).setTree(t,i);const g=e.serverCache.getNode();return d.children.inorderTraversal((y,v)=>{if(g.hasChild(y)){const w=e.serverCache.getNode().getImmediateChild(y),C=SI(n,w,v);f=ng(n,f,new lt(y),C,r,a,l,h)}}),d.children.inorderTraversal((y,v)=>{const w=!e.serverCache.isCompleteForChild(y)&&v.value===null;if(!g.hasChild(y)&&!w){const C=e.serverCache.getNode().getImmediateChild(y),N=SI(n,C,v);f=ng(n,f,new lt(y),N,r,a,l,h)}}),f}function qF(n,e,t,i,r,a,l){if(tg(r,t)!=null)return e;const h=e.serverCache.isFiltered(),f=e.serverCache;if(i.value!=null){if(Le(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return ng(n,e,t,f.getNode().getChild(t),r,a,h,l);if(Le(t)){let d=new yt(null);return f.getNode().forEachChild(Au,(g,y)=>{d=d.set(new lt(g),y)}),nT(n,e,t,d,r,a,h,l)}else return e}else{let d=new yt(null);return i.foreach((g,y)=>{const v=Ut(t,g);f.isCompleteForPath(v)&&(d=d.set(g,f.getNode().getChild(v)))}),nT(n,e,t,d,r,a,h,l)}}function HF(n,e,t,i,r){const a=e.serverCache,l=_N(e,a.getNode(),a.isFullyInitialized()||Le(t),a.isFiltered());return bN(n,l,t,i,wN,r)}function GF(n,e,t,i,r,a){let l;if(tg(i,t)!=null)return e;{const h=new VE(i,e,r),f=e.eventCache.getNode();let d;if(Le(t)||Ve(t)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=eg(i,Ja(e));else{const y=e.serverCache.getNode();ue(y instanceof be,"serverChildren would be complete if leaf node"),g=ME(i,y)}g=g,d=n.filter.updateFullNode(f,g,a)}else{const g=Ve(t);let y=OE(i,g,e.serverCache);y==null&&e.serverCache.isCompleteForChild(g)&&(y=f.getImmediateChild(g)),y!=null?d=n.filter.updateChild(f,g,y,pt(t),h,a):e.eventCache.getNode().hasChild(g)?d=n.filter.updateChild(f,g,be.EMPTY_NODE,pt(t),h,a):d=f,d.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=eg(i,Ja(e)),l.isLeafNode()&&(d=n.filter.updateFullNode(d,l,a)))}return l=e.serverCache.isFullyInitialized()||tg(i,et())!=null,Qh(e,d,l,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new RE(i.getIndex()),a=hF(i);this.processor_=UF(a);const l=t.serverCache,h=t.eventCache,f=r.updateFullNode(be.EMPTY_NODE,l.getNode(),null),d=a.updateFullNode(be.EMPTY_NODE,h.getNode(),null),g=new Xa(f,l.isFullyInitialized(),r.filtersNodes()),y=new Xa(d,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=t_(y,g),this.eventGenerator_=new yF(this.query_)}get query(){return this.query_}}function $F(n){return n.viewCache_.serverCache.getNode()}function YF(n,e){const t=Ja(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Le(e)&&!t.getImmediateChild(Ve(e)).isEmpty())?t.getChild(e):null}function wI(n){return n.eventRegistrations_.length===0}function WF(n,e){n.eventRegistrations_.push(e)}function bI(n,e,t){const i=[];if(t){ue(e==null,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,r);l&&i.push(l)})}if(e){let r=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(!l.matches(e))r.push(l);else if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(a+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function AI(n,e,t,i){e.type===es.MERGE&&e.source.queryId!==null&&(ue(Ja(n.viewCache_),"We should always have a full cache before handling merges"),ue(J0(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,a=BF(n.processor_,r,e,t,i);return FF(n.processor_,a.viewCache),ue(a.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,AN(n,a.changes,a.viewCache.eventCache.getNode(),null)}function QF(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(It,(a,l)=>{i.push(Fu(a,l))}),t.isFullyInitialized()&&i.push(pN(t.getNode())),AN(n,i,t.getNode(),e)}function AN(n,e,t,i){const r=i?[i]:n.eventRegistrations_;return vF(n.eventGenerator_,e,t,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ig;class XF{constructor(){this.views=new Map}}function JF(n){ue(!ig,"__referenceConstructor has already been defined"),ig=n}function ZF(){return ue(ig,"Reference.ts has not been loaded"),ig}function eB(n){return n.views.size===0}function kE(n,e,t,i){const r=e.source.queryId;if(r!==null){const a=n.views.get(r);return ue(a!=null,"SyncTree gave us an op for an invalid query."),AI(a,e,t,i)}else{let a=[];for(const l of n.views.values())a=a.concat(AI(l,e,t,i));return a}}function tB(n,e,t,i,r){const a=e._queryIdentifier,l=n.views.get(a);if(!l){let h=eg(t,r?i:null),f=!1;h?f=!0:i instanceof be?(h=ME(t,i),f=!1):(h=be.EMPTY_NODE,f=!1);const d=t_(new Xa(h,f,!1),new Xa(i,r,!1));return new KF(e,d)}return l}function nB(n,e,t,i,r,a){const l=tB(n,e,i,r,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),WF(l,t),QF(l,t)}function iB(n,e,t,i){const r=e._queryIdentifier,a=[];let l=[];const h=Po(n);if(r==="default")for(const[f,d]of n.views.entries())l=l.concat(bI(d,t,i)),wI(d)&&(n.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query));else{const f=n.views.get(r);f&&(l=l.concat(bI(f,t,i)),wI(f)&&(n.views.delete(r),f.query._queryParams.loadsAllData()||a.push(f.query)))}return h&&!Po(n)&&a.push(new(ZF())(e._repo,e._path)),{removed:a,events:l}}function CN(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Cu(n,e){let t=null;for(const i of n.views.values())t=t||YF(i,e);return t}function IN(n,e){if(e._queryParams.loadsAllData())return n_(n);{const i=e._queryIdentifier;return n.views.get(i)}}function RN(n,e){return IN(n,e)!=null}function Po(n){return n_(n)!=null}function n_(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg;function sB(n){ue(!sg,"__referenceConstructor has already been defined"),sg=n}function rB(){return ue(sg,"Reference.ts has not been loaded"),sg}let oB=1;class CI{constructor(e){this.listenProvider_=e,this.syncPointTree_=new yt(null),this.pendingWriteTree_=OF(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function xN(n,e,t,i,r){return wF(n.pendingWriteTree_,e,t,i,r),r?ed(n,new Qa(gN(),e,t)):[]}function Oa(n,e,t=!1){const i=bF(n.pendingWriteTree_,e);if(AF(n.pendingWriteTree_,e)){let a=new yt(null);return i.snap!=null?a=a.set(et(),!0):Dn(i.children,l=>{a=a.set(new lt(l),!0)}),ed(n,new Zp(i.path,a,t))}else return[]}function i_(n,e,t){return ed(n,new Qa(DE(),e,t))}function aB(n,e,t){const i=yt.fromObject(t);return ed(n,new Af(DE(),e,i))}function lB(n,e){return ed(n,new bf(DE(),e))}function uB(n,e,t){const i=UE(n,t);if(i){const r=FE(i),a=r.path,l=r.queryId,h=$n(a,e),f=new bf(NE(l),h);return BE(n,a,f)}else return[]}function iT(n,e,t,i,r=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&(e._queryIdentifier==="default"||RN(l,e))){const f=iB(l,e,t,i);eB(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const d=f.removed;if(h=f.events,!r){const g=d.findIndex(v=>v._queryParams.loadsAllData())!==-1,y=n.syncPointTree_.findOnPath(a,(v,w)=>Po(w));if(g&&!y){const v=n.syncPointTree_.subtree(a);if(!v.isEmpty()){const w=fB(v);for(let C=0;C<w.length;++C){const N=w[C],D=N.query,U=PN(n,N);n.listenProvider_.startListening(Jh(D),rg(n,D),U.hashFn,U.onComplete)}}}!y&&d.length>0&&!i&&(g?n.listenProvider_.stopListening(Jh(e),null):d.forEach(v=>{const w=n.queryToTagMap.get(s_(v));n.listenProvider_.stopListening(Jh(v),w)}))}dB(n,d)}return h}function cB(n,e,t,i){const r=UE(n,i);if(r!=null){const a=FE(r),l=a.path,h=a.queryId,f=$n(l,e),d=new Qa(NE(h),f,t);return BE(n,l,d)}else return[]}function hB(n,e,t,i){const r=UE(n,i);if(r){const a=FE(r),l=a.path,h=a.queryId,f=$n(l,e),d=yt.fromObject(t),g=new Af(NE(h),f,d);return BE(n,l,g)}else return[]}function II(n,e,t,i=!1){const r=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(r,(v,w)=>{const C=$n(v,r);a=a||Cu(w,C),l=l||Po(w)});let h=n.syncPointTree_.get(r);h?(l=l||Po(h),a=a||Cu(h,et())):(h=new XF,n.syncPointTree_=n.syncPointTree_.set(r,h));let f;a!=null?f=!0:(f=!1,a=be.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((w,C)=>{const N=Cu(C,et());N&&(a=a.updateImmediateChild(w,N))}));const d=RN(h,e);if(!d&&!e._queryParams.loadsAllData()){const v=s_(e);ue(!n.queryToTagMap.has(v),"View does not exist, but we have a tag");const w=mB();n.queryToTagMap.set(v,w),n.tagToQueryMap.set(w,v)}const g=PE(n.pendingWriteTree_,r);let y=nB(h,e,t,g,a,f);if(!d&&!l&&!i){const v=IN(h,e);y=y.concat(pB(n,e,v))}return y}function LE(n,e,t){const r=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const f=$n(l,e),d=Cu(h,f);if(d)return d});return TN(r,e,a,t,!0)}function ed(n,e){return DN(e,n.syncPointTree_,null,PE(n.pendingWriteTree_,et()))}function DN(n,e,t,i){if(Le(n.path))return NN(n,e,t,i);{const r=e.get(et());t==null&&r!=null&&(t=Cu(r,et()));let a=[];const l=Ve(n.path),h=n.operationForChild(l),f=e.children.get(l);if(f&&h){const d=t?t.getImmediateChild(l):null,g=EN(i,l);a=a.concat(DN(h,f,d,g))}return r&&(a=a.concat(kE(r,n,i,t))),a}}function NN(n,e,t,i){const r=e.get(et());t==null&&r!=null&&(t=Cu(r,et()));let a=[];return e.children.inorderTraversal((l,h)=>{const f=t?t.getImmediateChild(l):null,d=EN(i,l),g=n.operationForChild(l);g&&(a=a.concat(NN(g,h,f,d)))}),r&&(a=a.concat(kE(r,n,i,t))),a}function PN(n,e){const t=e.query,i=rg(n,t);return{hashFn:()=>($F(e)||be.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?uB(n,t._path,i):lB(n,t._path);{const a=u9(r,t);return iT(n,t,null,a)}}}}function rg(n,e){const t=s_(e);return n.queryToTagMap.get(t)}function s_(n){return n._path.toString()+"$"+n._queryIdentifier}function UE(n,e){return n.tagToQueryMap.get(e)}function FE(n){const e=n.indexOf("$");return ue(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new lt(n.substr(0,e))}}function BE(n,e,t){const i=n.syncPointTree_.get(e);ue(i,"Missing sync point for query tag that we're tracking");const r=PE(n.pendingWriteTree_,e);return kE(i,t,r,null)}function fB(n){return n.fold((e,t,i)=>{if(t&&Po(t))return[n_(t)];{let r=[];return t&&(r=CN(t)),Dn(i,(a,l)=>{r=r.concat(l)}),r}})}function Jh(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(rB())(n._repo,n._path):n}function dB(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=s_(i),a=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(a)}}}function mB(){return oB++}function pB(n,e,t){const i=e._path,r=rg(n,e),a=PN(n,t),l=n.listenProvider_.startListening(Jh(e),r,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(i);if(r)ue(!Po(h.value),"If we're adding a query, it shouldn't be shadowed");else{const f=h.fold((d,g,y)=>{if(!Le(d)&&g&&Po(g))return[n_(g).query];{let v=[];return g&&(v=v.concat(CN(g).map(w=>w.query))),Dn(y,(w,C)=>{v=v.concat(C)}),v}});for(let d=0;d<f.length;++d){const g=f[d];n.listenProvider_.stopListening(Jh(g),rg(n,g))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new zE(t)}node(){return this.node_}}class jE{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ut(this.path_,e);return new jE(this.syncTree_,t)}node(){return LE(this.syncTree_,this.path_)}}const gB=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},RI=function(n,e,t){if(!n||typeof n!="object")return n;if(ue(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return _B(n[".sv"],e,t);if(typeof n[".sv"]=="object")return yB(n[".sv"],e);ue(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},_B=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:ue(!1,"Unexpected server value: "+n)}},yB=function(n,e,t){n.hasOwnProperty("increment")||ue(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&ue(!1,"Unexpected increment value: "+i);const r=e.node();if(ue(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return typeof l!="number"?i:l+i},vB=function(n,e,t,i){return qE(e,new jE(t,n),i)},MN=function(n,e,t){return qE(n,new zE(e),t)};function qE(n,e,t){const i=n.getPriority().val(),r=RI(i,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=RI(l.getValue(),e,t);return h!==l.getValue()||r!==l.getPriority().val()?new hn(h,Xt(r)):n}else{const l=n;return a=l,r!==l.getPriority().val()&&(a=a.updatePriority(new hn(r))),l.forEachChild(It,(h,f)=>{const d=qE(f,e.getImmediateChild(h),t);d!==f&&(a=a.updateImmediateChild(h,d))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function GE(n,e){let t=e instanceof lt?e:new lt(e),i=n,r=Ve(t);for(;r!==null;){const a=ku(i.node.children,r)||{children:{},childCount:0};i=new HE(r,i,a),t=pt(t),r=Ve(t)}return i}function fc(n){return n.node.value}function ON(n,e){n.node.value=e,sT(n)}function VN(n){return n.node.childCount>0}function TB(n){return fc(n)===void 0&&!VN(n)}function r_(n,e){Dn(n.node.children,(t,i)=>{e(new HE(t,n,i))})}function kN(n,e,t,i){t&&e(n),r_(n,r=>{kN(r,e,!0)})}function EB(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function td(n){return new lt(n.parent===null?n.name:td(n.parent)+"/"+n.name)}function sT(n){n.parent!==null&&SB(n.parent,n.name,n)}function SB(n,e,t){const i=TB(t),r=Bs(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,sT(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,sT(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wB=/[\[\].#$\/\u0000-\u001F\u007F]/,bB=/[\[\].#$\u0000-\u001F\u007F]/,r0=10*1024*1024,KE=function(n){return typeof n=="string"&&n.length!==0&&!wB.test(n)},LN=function(n){return typeof n=="string"&&n.length!==0&&!bB.test(n)},AB=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),LN(n)},UN=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Zg(n)||n&&typeof n=="object"&&Bs(n,".sv")},rT=function(n,e,t,i){o_(Lu(n,"value"),e,t)},o_=function(n,e,t){const i=t instanceof lt?new q9(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Aa(i));if(typeof e=="function")throw new Error(n+"contains a function "+Aa(i)+" with contents = "+e.toString());if(Zg(e))throw new Error(n+"contains "+e.toString()+" "+Aa(i));if(typeof e=="string"&&e.length>r0/3&&Qg(e)>r0)throw new Error(n+"contains a string greater than "+r0+" utf8 bytes "+Aa(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,a=!1;if(Dn(e,(l,h)=>{if(l===".value")r=!0;else if(l!==".priority"&&l!==".sv"&&(a=!0,!KE(l)))throw new Error(n+" contains an invalid key ("+l+") "+Aa(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);H9(i,l),o_(n,h,i),G9(i)}),r&&a)throw new Error(n+' contains ".value" child '+Aa(i)+" in addition to actual children.")}},CB=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const a=Tf(i);for(let l=0;l<a.length;l++)if(!(a[l]===".priority"&&l===a.length-1)){if(!KE(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(j9);let r=null;for(t=0;t<e.length;t++){if(i=e[t],r!==null&&xi(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},IB=function(n,e,t,i){const r=Lu(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const a=[];Dn(e,(l,h)=>{const f=new lt(l);if(o_(r,h,Ut(t,f)),bE(f)===".priority"&&!UN(h))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(f)}),CB(r,a)},RB=function(n,e,t){if(Zg(e))throw new Error(Lu(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!UN(e))throw new Error(Lu(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},FN=function(n,e,t,i){if(!LN(t))throw new Error(Lu(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},xB=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),FN(n,e,t)},Bh=function(n,e){if(Ve(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},DB=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!KE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!AB(t))throw new Error(Lu(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function $E(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],a=r.getPath();t!==null&&!AE(a,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:a}),t.events.push(r)}t&&n.eventLists_.push(t)}function BN(n,e,t){$E(n,t),zN(n,i=>AE(i,e))}function vr(n,e,t){$E(n,t),zN(n,i=>xi(i,e)||xi(e,i))}function zN(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];if(r){const a=r.path;e(a)?(PB(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function PB(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Yh&&bn("event: "+t.toString()),cc(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB="repo_interrupt",OB=25;class VB{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new NB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Jp(),this.transactionQueueTree_=new HE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function kB(n,e,t){if(n.stats_=SE(n.repoInfo_),n.forceRestClient_||d9())n.server_=new Xp(n.repoInfo_,(i,r,a,l)=>{xI(n,i,r,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>DI(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{dn(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new dr(n.repoInfo_,e,(i,r,a,l)=>{xI(n,i,r,a,l)},i=>{DI(n,i)},i=>{UB(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=y9(n.repoInfo_,()=>new _F(n.stats_,n.server_)),n.infoData_=new fF,n.infoSyncTree_=new CI({startListening:(i,r,a,l)=>{let h=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(h=i_(n.infoSyncTree_,i._path,f),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),WE(n,"connected",!1),n.serverSyncTree_=new CI({startListening:(i,r,a,l)=>(n.server_.listen(i,a,r,(h,f)=>{const d=l(h,f);vr(n.eventQueue_,i._path,d)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function LB(n){const t=n.infoData_.getNode(new lt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function YE(n){return gB({timestamp:LB(n)})}function xI(n,e,t,i,r){n.dataUpdateCount++;const a=new lt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(r)if(i){const f=Kp(t,d=>Xt(d));l=hB(n.serverSyncTree_,a,f,r)}else{const f=Xt(t);l=cB(n.serverSyncTree_,a,f,r)}else if(i){const f=Kp(t,d=>Xt(d));l=aB(n.serverSyncTree_,a,f)}else{const f=Xt(t);l=i_(n.serverSyncTree_,a,f)}let h=a;l.length>0&&(h=a_(n,a)),vr(n.eventQueue_,h,l)}function DI(n,e){WE(n,"connected",e),e===!1&&BB(n)}function UB(n,e){Dn(e,(t,i)=>{WE(n,t,i)})}function WE(n,e,t){const i=new lt("/.info/"+e),r=Xt(t);n.infoData_.updateSnapshot(i,r);const a=i_(n.infoSyncTree_,i,r);vr(n.eventQueue_,i,a)}function jN(n){return n.nextWriteId_++}function FB(n,e,t,i,r){QE(n,"set",{path:e.toString(),value:t,priority:i});const a=YE(n),l=Xt(t,i),h=LE(n.serverSyncTree_,e),f=MN(l,h,a),d=jN(n),g=xN(n.serverSyncTree_,e,f,d,!0);$E(n.eventQueue_,g),n.server_.put(e.toString(),l.val(!0),(v,w)=>{const C=v==="ok";C||Qn("set at "+e+" failed: "+v);const N=Oa(n.serverSyncTree_,d,!C);vr(n.eventQueue_,e,N),zu(n,r,v,w)});const y=$N(n,e);a_(n,y),vr(n.eventQueue_,y,[])}function BB(n){QE(n,"onDisconnectEvents");const e=YE(n),t=Jp();X0(n.onDisconnect_,et(),(r,a)=>{const l=vB(r,a,n.serverSyncTree_,e);hc(t,r,l)});let i=[];X0(t,et(),(r,a)=>{i=i.concat(i_(n.serverSyncTree_,r,a));const l=$N(n,r);a_(n,l)}),n.onDisconnect_=Jp(),vr(n.eventQueue_,et(),i)}function zB(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{i==="ok"&&Q0(n.onDisconnect_,e),zu(n,t,i,r)})}function NI(n,e,t,i){const r=Xt(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(a,l)=>{a==="ok"&&hc(n.onDisconnect_,e,r),zu(n,i,a,l)})}function jB(n,e,t,i,r){const a=Xt(t,i);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{l==="ok"&&hc(n.onDisconnect_,e,a),zu(n,r,l,h)})}function qB(n,e,t,i){if(Gp(t)){bn("onDisconnect().update() called with empty data.  Don't do anything."),zu(n,i,"ok",void 0);return}n.server_.onDisconnectMerge(e.toString(),t,(r,a)=>{r==="ok"&&Dn(t,(l,h)=>{const f=Xt(h);hc(n.onDisconnect_,Ut(e,l),f)}),zu(n,i,r,a)})}function HB(n,e,t){let i;Ve(e._path)===".info"?i=II(n.infoSyncTree_,e,t):i=II(n.serverSyncTree_,e,t),BN(n.eventQueue_,e._path,i)}function GB(n,e,t){let i;Ve(e._path)===".info"?i=iT(n.infoSyncTree_,e,t):i=iT(n.serverSyncTree_,e,t),BN(n.eventQueue_,e._path,i)}function KB(n){n.persistentConnection_&&n.persistentConnection_.interrupt(MB)}function QE(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),bn(t,...e)}function zu(n,e,t,i){e&&cc(()=>{if(t==="ok")e(null);else{const r=(t||"error").toUpperCase();let a=r;i&&(a+=": "+i);const l=new Error(a);l.code=r,e(l)}})}function qN(n,e,t){return LE(n.serverSyncTree_,e,t)||be.EMPTY_NODE}function XE(n,e=n.transactionQueueTree_){if(e||l_(n,e),fc(e)){const t=GN(n,e);ue(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&$B(n,td(e),t)}else VN(e)&&r_(e,t=>{XE(n,t)})}function $B(n,e,t){const i=t.map(d=>d.currentWriteId),r=qN(n,e,i);let a=r;const l=r.hash();for(let d=0;d<t.length;d++){const g=t[d];ue(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const y=$n(e,g.path);a=a.updateChild(y,g.currentOutputSnapshotRaw)}const h=a.val(!0),f=e;n.server_.put(f.toString(),h,d=>{QE(n,"transaction put response",{path:f.toString(),status:d});let g=[];if(d==="ok"){const y=[];for(let v=0;v<t.length;v++)t[v].status=2,g=g.concat(Oa(n.serverSyncTree_,t[v].currentWriteId)),t[v].onComplete&&y.push(()=>t[v].onComplete(null,!0,t[v].currentOutputSnapshotResolved)),t[v].unwatcher();l_(n,GE(n.transactionQueueTree_,e)),XE(n,n.transactionQueueTree_),vr(n.eventQueue_,e,g);for(let v=0;v<y.length;v++)cc(y[v])}else{if(d==="datastale")for(let y=0;y<t.length;y++)t[y].status===3?t[y].status=4:t[y].status=0;else{Qn("transaction at "+f.toString()+" failed: "+d);for(let y=0;y<t.length;y++)t[y].status=4,t[y].abortReason=d}a_(n,e)}},l)}function a_(n,e){const t=HN(n,e),i=td(t),r=GN(n,t);return YB(n,r,i),i}function YB(n,e,t){if(e.length===0)return;const i=[];let r=[];const l=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const f=e[h],d=$n(t,f.path);let g=!1,y;if(ue(d!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)g=!0,y=f.abortReason,r=r.concat(Oa(n.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=OB)g=!0,y="maxretry",r=r.concat(Oa(n.serverSyncTree_,f.currentWriteId,!0));else{const v=qN(n,f.path,l);f.currentInputSnapshot=v;const w=e[h].update(v.val());if(w!==void 0){o_("transaction failed: Data returned ",w,f.path);let C=Xt(w);typeof w=="object"&&w!=null&&Bs(w,".priority")||(C=C.updatePriority(v.getPriority()));const D=f.currentWriteId,U=YE(n),z=MN(C,v,U);f.currentOutputSnapshotRaw=C,f.currentOutputSnapshotResolved=z,f.currentWriteId=jN(n),l.splice(l.indexOf(D),1),r=r.concat(xN(n.serverSyncTree_,f.path,z,f.currentWriteId,f.applyLocally)),r=r.concat(Oa(n.serverSyncTree_,D,!0))}else g=!0,y="nodata",r=r.concat(Oa(n.serverSyncTree_,f.currentWriteId,!0))}vr(n.eventQueue_,t,r),r=[],g&&(e[h].status=2,(function(v){setTimeout(v,Math.floor(0))})(e[h].unwatcher),e[h].onComplete&&(y==="nodata"?i.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):i.push(()=>e[h].onComplete(new Error(y),!1,null))))}l_(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)cc(i[h]);XE(n,n.transactionQueueTree_)}function HN(n,e){let t,i=n.transactionQueueTree_;for(t=Ve(e);t!==null&&fc(i)===void 0;)i=GE(i,t),e=pt(e),t=Ve(e);return i}function GN(n,e){const t=[];return KN(n,e,t),t.sort((i,r)=>i.order-r.order),t}function KN(n,e,t){const i=fc(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);r_(e,r=>{KN(n,r,t)})}function l_(n,e){const t=fc(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,ON(e,t.length>0?t:void 0)}r_(e,i=>{l_(n,i)})}function $N(n,e){const t=td(HN(n,e)),i=GE(n.transactionQueueTree_,e);return EB(i,r=>{o0(n,r)}),o0(n,i),kN(i,r=>{o0(n,r)}),t}function o0(n,e){const t=fc(e);if(t){const i=[];let r=[],a=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(ue(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):(ue(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),r=r.concat(Oa(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&i.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));a===-1?ON(e,void 0):t.length=a+1,vr(n.eventQueue_,td(e),r);for(let l=0;l<i.length;l++)cc(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WB(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function QB(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Qn(`Invalid query segment '${t}' in query '${n}'`)}return e}const PI=function(n,e){const t=XB(n),i=t.namespace;t.domain==="firebase.com"&&yr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&yr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||s9();const r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new ZD(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new lt(t.pathString)}},XB=function(n){let e="",t="",i="",r="",a="",l=!0,h="https",f=443;if(typeof n=="string"){let d=n.indexOf("//");d>=0&&(h=n.substring(0,d-1),n=n.substring(d+2));let g=n.indexOf("/");g===-1&&(g=n.length);let y=n.indexOf("?");y===-1&&(y=n.length),e=n.substring(0,Math.min(g,y)),g<y&&(r=WB(n.substring(g,y)));const v=QB(n.substring(Math.min(n.length,y)));d=e.indexOf(":"),d>=0?(l=h==="https"||h==="wss",f=parseInt(e.substring(d+1),10)):d=e.length;const w=e.slice(0,d);if(w.toLowerCase()==="localhost")t="localhost";else if(w.split(".").length<=2)t=w;else{const C=e.indexOf(".");i=e.substring(0,C).toLowerCase(),t=e.substring(C+1),a=i}"ns"in v&&(a=v.ns)}return{host:e,port:f,domain:t,subdomain:i,secure:l,scheme:h,pathString:r,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+dn(this.snapshot.exportVal())}}class ZB{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return ue(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new or;return zB(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Bh("OnDisconnect.remove",this._path);const e=new or;return NI(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Bh("OnDisconnect.set",this._path),rT("OnDisconnect.set",e,this._path);const t=new or;return NI(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Bh("OnDisconnect.setWithPriority",this._path),rT("OnDisconnect.setWithPriority",e,this._path),RB("OnDisconnect.setWithPriority",t);const i=new or;return jB(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Bh("OnDisconnect.update",this._path),IB("OnDisconnect.update",e,this._path);const t=new or;return qB(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return Le(this._path)?null:bE(this._path)}get ref(){return new Bo(this._repo,this._path)}get _queryIdentifier(){const e=pI(this._queryParams),t=TE(e);return t==="{}"?"default":t}get _queryObject(){return pI(this._queryParams)}isEqual(e){if(e=on(e),!(e instanceof JE))return!1;const t=this._repo===e._repo,i=AE(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+z9(this._path)}}class Bo extends JE{constructor(e,t){super(e,t,new xE,!1)}get parent(){const e=lN(this._path);return e===null?null:new Bo(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class og{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new lt(e),i=oT(this.ref,e);return new og(this._node.getChild(t),i,It)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new og(r,oT(this.ref,i),It)))}hasChild(e){const t=new lt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function MI(n,e){return n=on(n),n._checkNotDeleted("ref"),e!==void 0?oT(n._root,e):n._root}function oT(n,e){return n=on(n),Ve(n._path)===null?xB("child","path",e):FN("child","path",e),new Bo(n._repo,Ut(n._path,e))}function nz(n){return n=on(n),new tz(n._repo,n._path)}function OI(n,e){n=on(n),Bh("set",n._path),rT("set",e,n._path);const t=new or;return FB(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}class ZE{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new JB("value",this,new og(e.snapshotNode,new Bo(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new ZB(this,e,t):null}matches(e){return e instanceof ZE?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function iz(n,e,t,i,r){const a=new ez(t,void 0),l=new ZE(a);return HB(n._repo,n,l),()=>GB(n._repo,n,l)}function sz(n,e,t,i){return iz(n,"value",e)}JF(Bo);sB(Bo);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rz="FIREBASE_DATABASE_EMULATOR_HOST",aT={};let oz=!1;function az(n,e,t,i){const r=e.lastIndexOf(":"),a=e.substring(0,r),l=Fo(a);n.repoInfo_=new ZD(e,l,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function lz(n,e,t,i,r){let a=i||n.options.databaseURL;a===void 0&&(n.options.projectId||yr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bn("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=PI(a,r),h=l.repoInfo,f;typeof process<"u"&&XC&&(f=XC[rz]),f?(a=`http://${f}?ns=${h.namespace}`,l=PI(a,r),h=l.repoInfo):l.repoInfo.secure;const d=new p9(n.name,n.options,e);DB("Invalid Firebase Database URL",l),Le(l.path)||yr("Database URL must point to the root of a Firebase Database (not including a child path).");const g=cz(h,n,d,new m9(n,t));return new hz(g,n)}function uz(n,e){const t=aT[e];(!t||t[n.key]!==n)&&yr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),KB(n),delete t[n.key]}function cz(n,e,t,i){let r=aT[e.name];r||(r={},aT[e.name]=r);let a=r[n.toURLString()];return a&&yr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new VB(n,oz,t,i),r[n.toURLString()]=a,a}class hz{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(kB(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Bo(this._repo,et())),this._rootInternal}_delete(){return this._rootInternal!==null&&(uz(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&yr("Cannot call "+e+" on a deleted database.")}}function fz(n=kD(),e){const t=Jg(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=A5("database");i&&dz(t,...i)}return t}function dz(n,e,t,i={}){n=on(n),n._checkNotDeleted("useEmulator");const r=`${e}:${t}`,a=n._repoInternal;if(n._instanceStarted){if(r===n._repoInternal.repoInfo_.host&&xo(i,a.repoInfo_.emulatorOptions))return;yr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(a.repoInfo_.nodeAdmin)i.mockUserToken&&yr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new pp(pp.OWNER);else if(i.mockUserToken){const h=typeof i.mockUserToken=="string"?i.mockUserToken:C5(i.mockUserToken,n.app.options.projectId);l=new pp(h)}Fo(e)&&(_E(e),CD("Database",!0)),az(a,r,i,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mz(n){JU(al),Ya(new Do("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return lz(i,r,a,t)},"PUBLIC").setMultipleInstances(!0)),Ps(JC,ZC,n),Ps(JC,ZC,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pz={".sv":"timestamp"};function gz(){return pz}dr.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};dr.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};mz();var _z="firebase",yz="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ps(_z,yz,"app");function YN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vz=YN,WN=new Qf("auth","Firebase",YN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=new Xg("@firebase/auth");function Tz(n,...e){ag.logLevel<=ze.WARN&&ag.warn(`Auth (${al}): ${n}`,...e)}function _p(n,...e){ag.logLevel<=ze.ERROR&&ag.error(`Auth (${al}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(n,...e){throw eS(n,...e)}function Ms(n,...e){return eS(n,...e)}function QN(n,e,t){const i={...vz(),[e]:t};return new Qf("auth","Firebase",i).create(e,{appName:n.name})}function Fa(n){return QN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function eS(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return WN.create(n,...e)}function Ae(n,e,...t){if(!n)throw eS(e,...t)}function lr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _p(e),new Error(e)}function Er(n,e){n||lr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(){return typeof self<"u"&&self.location?.href||""}function Ez(){return VI()==="http:"||VI()==="https:"}function VI(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sz(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ez()||D5()||"connection"in navigator)?navigator.onLine:!0}function wz(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Er(t>e,"Short delay should be less than long delay!"),this.isMobile=yE()||RD()}get(){return Sz()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(n,e){Er(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;lr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;lr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;lr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bz={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Cz=new nd(3e4,6e4);function nS(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function dc(n,e,t,i,r={}){return JN(n,r,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const h=uc({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const d={method:e,headers:f,...a};return x5()||(d.referrerPolicy="no-referrer"),n.emulatorConfig&&Fo(n.emulatorConfig.host)&&(d.credentials="include"),XN.fetch()(await ZN(n,n.config.apiHost,t,h),d)})}async function JN(n,e,t){n._canInitEmulator=!1;const i={...bz,...e};try{const r=new Rz(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw ep(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[f,d]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw ep(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw ep(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw ep(n,"user-disabled",l);const g=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw QN(n,g,d);Tr(n,g)}}catch(r){if(r instanceof Rr)throw r;Tr(n,"network-request-failed",{message:String(r)})}}async function Iz(n,e,t,i,r={}){const a=await dc(n,e,t,i,r);return"mfaPendingCredential"in a&&Tr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function ZN(n,e,t,i){const r=`${e}${t}?${i}`,a=n,l=a.config.emulator?tS(n.config,r):`${n.config.apiScheme}://${r}`;return Az.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}class Rz{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ms(this.auth,"network-request-failed")),Cz.get())})}}function ep(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=Ms(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xz(n,e){return dc(n,"POST","/v1/accounts:delete",e)}async function lg(n,e){return dc(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Dz(n,e=!1){const t=on(n),i=await t.getIdToken(e),r=iS(i);Ae(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,l=a?.sign_in_provider;return{claims:r,token:i,authTime:Zh(a0(r.auth_time)),issuedAtTime:Zh(a0(r.iat)),expirationTime:Zh(a0(r.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function a0(n){return Number(n)*1e3}function iS(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return _p("JWT malformed, contained fewer than 3 sections"),null;try{const r=Hp(t);return r?JSON.parse(r):(_p("Failed to decode base64 JWT payload"),null)}catch(r){return _p("Caught error parsing JWT payload as JSON",r?.toString()),null}}function kI(n){const e=iS(n);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cf(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Rr&&Nz(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Nz({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zh(this.lastLoginAt),this.creationTime=Zh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ug(n){const e=n.auth,t=await n.getIdToken(),i=await Cf(n,lg(e,{idToken:t}));Ae(i?.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const a=r.providerUserInfo?.length?eP(r.providerUserInfo):[],l=Oz(n.providerData,a),h=n.isAnonymous,f=!(n.email&&r.passwordHash)&&!l?.length,d=h?f:!1,g={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new uT(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(n,g)}async function Mz(n){const e=on(n);await ug(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Oz(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function eP(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vz(n,e){const t=await JN(n,{},async()=>{const i=uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,l=await ZN(n,r,"/v1/token",`key=${a}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:i};return n.emulatorConfig&&Fo(n.emulatorConfig.host)&&(f.credentials="include"),XN.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kz(n,e){return dc(n,"POST","/v2/accounts:revokeToken",nS(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const t=kI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await Vz(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,l=new Iu;return i&&(Ae(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(Ae(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),a&&(Ae(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Iu,this.toJSON())}_performRefresh(){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(n,e){Ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ts{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new Pz(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new uT(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Cf(this,this.stsTokenManager.getToken(this.auth,e));return Ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Dz(this,e)}reload(){return Mz(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ts({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ug(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ji(this.auth.app))return Promise.reject(Fa(this.auth));const e=await this.getIdToken();return await Cf(this,xz(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,h=t.tenantId??void 0,f=t._redirectEventId??void 0,d=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:w,providerData:C,stsTokenManager:N}=t;Ae(y&&N,e,"internal-error");const D=Iu.fromJSON(this.name,N);Ae(typeof y=="string",e,"internal-error"),uo(i,e.name),uo(r,e.name),Ae(typeof v=="boolean",e,"internal-error"),Ae(typeof w=="boolean",e,"internal-error"),uo(a,e.name),uo(l,e.name),uo(h,e.name),uo(f,e.name),uo(d,e.name),uo(g,e.name);const U=new ts({uid:y,auth:e,email:r,emailVerified:v,displayName:i,isAnonymous:w,photoURL:l,phoneNumber:a,tenantId:h,stsTokenManager:D,createdAt:d,lastLoginAt:g});return C&&Array.isArray(C)&&(U.providerData=C.map(z=>({...z}))),f&&(U._redirectEventId=f),U}static async _fromIdTokenResponse(e,t,i=!1){const r=new Iu;r.updateFromServerResponse(t);const a=new ts({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await ug(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Ae(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?eP(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!a?.length,h=new Iu;h.updateFromIdToken(i);const f=new ts({uid:r.localId,auth:e,stsTokenManager:h,isAnonymous:l}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new uT(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!a?.length};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=new Map;function ur(n){Er(n instanceof Function,"Expected a class definition");let e=LI.get(n);return e?(Er(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,LI.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}tP.type="NONE";const UI=tP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(n,e,t){return`firebase:${n}:${e}:${t}`}class Ru{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=yp(this.userKey,r.apiKey,a),this.fullPersistenceKey=yp("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await lg(this.auth,{idToken:e}).catch(()=>{});return t?ts._fromGetAccountInfoResponse(this.auth,t,e):null}return ts._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ru(ur(UI),e,i);const r=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=r[0]||ur(UI);const l=yp(i,e.config.apiKey,e.name);let h=null;for(const d of t)try{const g=await d._get(l);if(g){let y;if(typeof g=="string"){const v=await lg(e,{idToken:g}).catch(()=>{});if(!v)break;y=await ts._fromGetAccountInfoResponse(e,v,g)}else y=ts._fromJSON(e,g);d!==a&&(h=y),a=d;break}}catch{}const f=r.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Ru(a,e,i):(a=f[0],h&&await a._set(l,h.toJSON()),await Promise.all(t.map(async d=>{if(d!==a)try{await d._remove(l)}catch{}})),new Ru(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aP(e))return"Blackberry";if(lP(e))return"Webos";if(iP(e))return"Safari";if((e.includes("chrome/")||sP(e))&&!e.includes("edge/"))return"Chrome";if(oP(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function nP(n=rn()){return/firefox\//i.test(n)}function iP(n=rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sP(n=rn()){return/crios\//i.test(n)}function rP(n=rn()){return/iemobile/i.test(n)}function oP(n=rn()){return/android/i.test(n)}function aP(n=rn()){return/blackberry/i.test(n)}function lP(n=rn()){return/webos/i.test(n)}function sS(n=rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Lz(n=rn()){return sS(n)&&!!window.navigator?.standalone}function Uz(){return N5()&&document.documentMode===10}function uP(n=rn()){return sS(n)||oP(n)||lP(n)||aP(n)||/windows phone/i.test(n)||rP(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(n,e=[]){let t;switch(n){case"Browser":t=FI(rn());break;case"Worker":t=`${FI(rn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${al}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((l,h)=>{try{const f=e(a);l(f)}catch(f){h(f)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bz(n,e={}){return dc(n,"GET","/v2/passwordPolicy",nS(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz=6;class jz{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??zz,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new BI(this),this.idTokenSubscription=new BI(this),this.beforeStateQueue=new Fz(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ur(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ru.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await lg(this,{idToken:e}),i=await ts._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ji(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,l=i?._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===l)&&h?.user&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ug(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wz()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ji(this.app))return Promise.reject(Fa(this));const t=e?on(e):null;return t&&Ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ji(this.app)?Promise.reject(Fa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ji(this.app)?Promise.reject(Fa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Bz(this),t=new jz(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Qf("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await kz(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ur(e)||this._popupRedirectResolver;Ae(t,this,"argument-error"),this.redirectPersistenceManager=await Ru.create(this,[ur(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,r);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Ji(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Tz(`Error while retrieving App Check token: ${e.error}`),e?.token}}function rS(n){return on(n)}class BI{constructor(e){this.auth=e,this.observer=null,this.addObserver=B5(t=>this.observer=t)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hz(n){oS=n}function Gz(n){return oS.loadJS(n)}function Kz(){return oS.gapiScript}function $z(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yz(n,e){const t=Jg(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(xo(a,e??{}))return r;Tr(r,"already-initialized")}return t.initialize({options:e})}function Wz(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ur);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Qz(n,e,t){const i=rS(n);Ae(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=hP(e),{host:l,port:h}=Xz(e),f=h===null?"":`:${h}`,d={url:`${a}//${l}${f}/`},g=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Ae(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ae(xo(d,i.config.emulator)&&xo(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,Fo(l)?(_E(`${a}//${l}${f}`),CD("Auth",!0)):Jz()}function hP(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function Xz(n){const e=hP(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:zI(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:zI(l)}}}function zI(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function Jz(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return lr("not implemented")}_getIdTokenResponse(e){return lr("not implemented")}_linkToIdToken(e,t){return lr("not implemented")}_getReauthenticationResolver(e){return lr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xu(n,e){return Iz(n,"POST","/v1/accounts:signInWithIdp",nS(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zz="http://localhost";class Za extends fP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Za(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Tr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...a}=t;if(!i||!r)return null;const l=new Za(i,r);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return xu(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,xu(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xu(e,t)}buildRequest(){const e={requestUri:Zz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=uc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends dP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po extends id{constructor(){super("facebook.com")}static credential(e){return Za._fromParams({providerId:po.PROVIDER_ID,signInMethod:po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return po.credentialFromTaggedObject(e)}static credentialFromError(e){return po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return po.credential(e.oauthAccessToken)}catch{return null}}}po.FACEBOOK_SIGN_IN_METHOD="facebook.com";po.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go extends id{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Za._fromParams({providerId:go.PROVIDER_ID,signInMethod:go.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return go.credentialFromTaggedObject(e)}static credentialFromError(e){return go.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return go.credential(t,i)}catch{return null}}}go.GOOGLE_SIGN_IN_METHOD="google.com";go.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends id{constructor(){super("github.com")}static credential(e){return Za._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _o.credential(e.oauthAccessToken)}catch{return null}}}_o.GITHUB_SIGN_IN_METHOD="github.com";_o.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends id{constructor(){super("twitter.com")}static credential(e,t){return Za._fromParams({providerId:yo.PROVIDER_ID,signInMethod:yo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return yo.credentialFromTaggedObject(e)}static credentialFromError(e){return yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return yo.credential(t,i)}catch{return null}}}yo.TWITTER_SIGN_IN_METHOD="twitter.com";yo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await ts._fromIdTokenResponse(e,i,r),l=jI(i);return new ju({user:a,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=jI(i);return new ju({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function jI(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg extends Rr{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,cg.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new cg(e,t,i,r)}}function mP(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?cg._fromErrorAndOperation(n,a,e,i):a})}async function ej(n,e,t=!1){const i=await Cf(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ju._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tj(n,e,t=!1){const{auth:i}=n;if(Ji(i.app))return Promise.reject(Fa(i));const r="reauthenticate";try{const a=await Cf(n,mP(i,r,e,n),t);Ae(a.idToken,i,"internal-error");const l=iS(a.idToken);Ae(l,i,"internal-error");const{sub:h}=l;return Ae(n.uid===h,i,"user-mismatch"),ju._forOperation(n,r,a)}catch(a){throw a?.code==="auth/user-not-found"&&Tr(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nj(n,e,t=!1){if(Ji(n.app))return Promise.reject(Fa(n));const i="signIn",r=await mP(n,i,e),a=await ju._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(n,e){return on(n).setPersistence(e)}function sj(n,e,t,i){return on(n).onIdTokenChanged(e,t,i)}function rj(n,e,t){return on(n).beforeAuthStateChanged(e,t)}const hg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(hg,"1"),this.storage.removeItem(hg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=1e3,aj=10;class gP extends pP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);Uz()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,aj):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},oj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gP.type="LOCAL";const _P=gP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP extends pP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yP.type="SESSION";const vP=yP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new u_(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,l=this.handlersMap[r];if(!l?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const h=Array.from(l).map(async d=>d(t.origin,a)),f=await lj(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}u_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,l;return new Promise((h,f)=>{const d=aS("",20);r.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(y){const v=y;if(v.data.eventId===d)switch(v.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(v.data.response);break;default:clearTimeout(g),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(){return window}function cj(n){Os().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(){return typeof Os().WorkerGlobalScope<"u"&&typeof Os().importScripts=="function"}async function hj(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fj(){return navigator?.serviceWorker?.controller||null}function dj(){return TP()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP="firebaseLocalStorageDb",mj=1,fg="firebaseLocalStorage",SP="fbase_key";class sd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function c_(n,e){return n.transaction([fg],e?"readwrite":"readonly").objectStore(fg)}function pj(){const n=indexedDB.deleteDatabase(EP);return new sd(n).toPromise()}function cT(){const n=indexedDB.open(EP,mj);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(fg,{keyPath:SP})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(fg)?e(i):(i.close(),await pj(),e(await cT()))})})}async function qI(n,e,t){const i=c_(n,!0).put({[SP]:e,value:t});return new sd(i).toPromise()}async function gj(n,e){const t=c_(n,!1).get(e),i=await new sd(t).toPromise();return i===void 0?null:i.value}function HI(n,e){const t=c_(n,!0).delete(e);return new sd(t).toPromise()}const _j=800,yj=3;class wP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cT(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>yj)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=u_._getInstance(dj()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await hj(),!this.activeServiceWorker)return;this.sender=new uj(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cT();return await qI(e,hg,"1"),await HI(e,hg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>qI(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>gj(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>HI(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=c_(r,!1).getAll();return new sd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_j)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wP.type="LOCAL";const vj=wP;new nd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(n,e){return e?ur(e):(Ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS extends fP{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xu(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ej(n){return nj(n.auth,new lS(n),n.bypassAuthState)}function Sj(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),tj(t,new lS(n),n.bypassAuthState)}async function wj(n){const{auth:e,user:t}=n;return Ae(t,e,"internal-error"),ej(t,new lS(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ej;case"linkViaPopup":case"linkViaRedirect":return wj;case"reauthViaPopup":case"reauthViaRedirect":return Sj;default:Tr(this.auth,"internal-error")}}resolve(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=new nd(2e3,1e4);class yu extends bP{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,yu.currentPopupAction&&yu.currentPopupAction.cancel(),yu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){Er(this.filter.length===1,"Popup operations only handle one event");const e=aS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yu.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bj.get())};e()}}yu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj="pendingRedirect",vp=new Map;class Cj extends bP{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=vp.get(this.auth._key());if(!e){try{const i=await Ij(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}vp.set(this.auth._key(),e)}return this.bypassAuthState||vp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ij(n,e){const t=Dj(e),i=xj(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function Rj(n,e){vp.set(n._key(),e)}function xj(n){return ur(n._redirectPersistence)}function Dj(n){return yp(Aj,n.config.apiKey,n.name)}async function Nj(n,e,t=!1){if(Ji(n.app))return Promise.reject(Fa(n));const i=rS(n),r=Tj(i,e),l=await new Cj(i,r,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=600*1e3;class Mj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Oj(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!AP(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ms(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Pj&&this.cachedEventUids.clear(),this.cachedEventUids.has(GI(e))}saveEventToCache(e){this.cachedEventUids.add(GI(e)),this.lastProcessedEventTime=Date.now()}}function GI(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function AP({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Oj(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AP(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vj(n,e={}){return dc(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lj=/^https?/;async function Uj(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Vj(n);for(const t of e)try{if(Fj(t))return}catch{}Tr(n,"unauthorized-domain")}function Fj(n){const e=lT(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!Lj.test(t))return!1;if(kj.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj=new nd(3e4,6e4);function KI(){const n=Os().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function zj(n){return new Promise((e,t)=>{function i(){KI(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KI(),t(Ms(n,"network-request-failed"))},timeout:Bj.get()})}if(Os().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Os().gapi?.load)i();else{const r=$z("iframefcb");return Os()[r]=()=>{gapi.load?i():t(Ms(n,"network-request-failed"))},Gz(`${Kz()}?onload=${r}`).catch(a=>t(a))}}).catch(e=>{throw Tp=null,e})}let Tp=null;function jj(n){return Tp=Tp||zj(n),Tp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=new nd(5e3,15e3),Hj="__/auth/iframe",Gj="emulator/auth/iframe",Kj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$j=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Yj(n){const e=n.config;Ae(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?tS(e,Gj):`https://${n.config.authDomain}/${Hj}`,i={apiKey:e.apiKey,appName:n.name,v:al},r=$j.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${uc(i).slice(1)}`}async function Wj(n){const e=await jj(n),t=Os().gapi;return Ae(t,n,"internal-error"),e.open({where:document.body,url:Yj(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kj,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const l=Ms(n,"network-request-failed"),h=Os().setTimeout(()=>{a(l)},qj.get());function f(){Os().clearTimeout(h),r(i)}i.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xj=500,Jj=600,Zj="_blank",e8="http://localhost";class $I{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function t8(n,e,t,i=Xj,r=Jj){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const f={...Qj,width:i.toString(),height:r.toString(),top:a,left:l},d=rn().toLowerCase();t&&(h=sP(d)?Zj:t),nP(d)&&(e=e||e8,f.scrollbars="yes");const g=Object.entries(f).reduce((v,[w,C])=>`${v}${w}=${C},`,"");if(Lz(d)&&h!=="_self")return n8(e||"",h),new $I(null);const y=window.open(e||"",h,g);Ae(y,n,"popup-blocked");try{y.focus()}catch{}return new $I(y)}function n8(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8="__/auth/handler",s8="emulator/auth/handler",r8=encodeURIComponent("fac");async function YI(n,e,t,i,r,a){Ae(n.config.authDomain,n,"auth-domain-config-required"),Ae(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:al,eventId:r};if(e instanceof dP){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Gp(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))l[g]=y}if(e instanceof id){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(l.scopes=g.join(","))}n.tenantId&&(l.tid=n.tenantId);const h=l;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const f=await n._getAppCheckToken(),d=f?`#${r8}=${encodeURIComponent(f)}`:"";return`${o8(n)}?${uc(h).slice(1)}${d}`}function o8({config:n}){return n.emulator?tS(n,s8):`https://${n.authDomain}/${i8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0="webStorageSupport";class a8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vP,this._completeRedirectFn=Nj,this._overrideRedirectResult=Rj}async _openPopup(e,t,i,r){Er(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await YI(e,t,i,lT(),r);return t8(e,a,aS())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await YI(e,t,i,lT(),r);return cj(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(Er(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Wj(e),i=new Mj(e);return t.register("authEvent",r=>(Ae(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(l0,{type:l0},r=>{const a=r?.[0]?.[l0];a!==void 0&&t(!!a),Tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Uj(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return uP()||iP()||sS()}}const l8=a8;var WI="@firebase/auth",QI="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h8(n){Ya(new Do("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;Ae(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:l,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cP(n)},d=new qz(i,r,a,f);return Wz(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ya(new Do("auth-internal",e=>{const t=rS(e.getProvider("auth").getImmediate());return(i=>new u8(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ps(WI,QI,c8(n)),Ps(WI,QI,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8=300,d8=AD("authIdTokenMaxAge")||f8;let XI=null;const m8=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>d8)return;const r=t?.token;XI!==r&&(XI=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function p8(n=kD()){const e=Jg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Yz(n,{popupRedirectResolver:l8,persistence:[vj,_P,vP]}),i=AD("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=m8(a.toString());rj(t,l,()=>l(t.currentUser)),sj(t,h=>l(h))}}const r=wD("auth");return r&&Qz(t,`http://${r}`),t}function g8(){return document.getElementsByTagName("head")?.[0]??document}Hz({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=Ms("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",g8().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h8("Browser");var JI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ao,CP;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,A){function x(){}x.prototype=A.prototype,R.F=A.prototype,R.prototype=new x,R.prototype.constructor=R,R.D=function(L,V,q){for(var M=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)M[dt-2]=arguments[dt];return A.prototype[V].apply(L,M)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,A,x){x||(x=0);const L=Array(16);if(typeof A=="string")for(var V=0;V<16;++V)L[V]=A.charCodeAt(x++)|A.charCodeAt(x++)<<8|A.charCodeAt(x++)<<16|A.charCodeAt(x++)<<24;else for(V=0;V<16;++V)L[V]=A[x++]|A[x++]<<8|A[x++]<<16|A[x++]<<24;A=R.g[0],x=R.g[1],V=R.g[2];let q=R.g[3],M;M=A+(q^x&(V^q))+L[0]+3614090360&4294967295,A=x+(M<<7&4294967295|M>>>25),M=q+(V^A&(x^V))+L[1]+3905402710&4294967295,q=A+(M<<12&4294967295|M>>>20),M=V+(x^q&(A^x))+L[2]+606105819&4294967295,V=q+(M<<17&4294967295|M>>>15),M=x+(A^V&(q^A))+L[3]+3250441966&4294967295,x=V+(M<<22&4294967295|M>>>10),M=A+(q^x&(V^q))+L[4]+4118548399&4294967295,A=x+(M<<7&4294967295|M>>>25),M=q+(V^A&(x^V))+L[5]+1200080426&4294967295,q=A+(M<<12&4294967295|M>>>20),M=V+(x^q&(A^x))+L[6]+2821735955&4294967295,V=q+(M<<17&4294967295|M>>>15),M=x+(A^V&(q^A))+L[7]+4249261313&4294967295,x=V+(M<<22&4294967295|M>>>10),M=A+(q^x&(V^q))+L[8]+1770035416&4294967295,A=x+(M<<7&4294967295|M>>>25),M=q+(V^A&(x^V))+L[9]+2336552879&4294967295,q=A+(M<<12&4294967295|M>>>20),M=V+(x^q&(A^x))+L[10]+4294925233&4294967295,V=q+(M<<17&4294967295|M>>>15),M=x+(A^V&(q^A))+L[11]+2304563134&4294967295,x=V+(M<<22&4294967295|M>>>10),M=A+(q^x&(V^q))+L[12]+1804603682&4294967295,A=x+(M<<7&4294967295|M>>>25),M=q+(V^A&(x^V))+L[13]+4254626195&4294967295,q=A+(M<<12&4294967295|M>>>20),M=V+(x^q&(A^x))+L[14]+2792965006&4294967295,V=q+(M<<17&4294967295|M>>>15),M=x+(A^V&(q^A))+L[15]+1236535329&4294967295,x=V+(M<<22&4294967295|M>>>10),M=A+(V^q&(x^V))+L[1]+4129170786&4294967295,A=x+(M<<5&4294967295|M>>>27),M=q+(x^V&(A^x))+L[6]+3225465664&4294967295,q=A+(M<<9&4294967295|M>>>23),M=V+(A^x&(q^A))+L[11]+643717713&4294967295,V=q+(M<<14&4294967295|M>>>18),M=x+(q^A&(V^q))+L[0]+3921069994&4294967295,x=V+(M<<20&4294967295|M>>>12),M=A+(V^q&(x^V))+L[5]+3593408605&4294967295,A=x+(M<<5&4294967295|M>>>27),M=q+(x^V&(A^x))+L[10]+38016083&4294967295,q=A+(M<<9&4294967295|M>>>23),M=V+(A^x&(q^A))+L[15]+3634488961&4294967295,V=q+(M<<14&4294967295|M>>>18),M=x+(q^A&(V^q))+L[4]+3889429448&4294967295,x=V+(M<<20&4294967295|M>>>12),M=A+(V^q&(x^V))+L[9]+568446438&4294967295,A=x+(M<<5&4294967295|M>>>27),M=q+(x^V&(A^x))+L[14]+3275163606&4294967295,q=A+(M<<9&4294967295|M>>>23),M=V+(A^x&(q^A))+L[3]+4107603335&4294967295,V=q+(M<<14&4294967295|M>>>18),M=x+(q^A&(V^q))+L[8]+1163531501&4294967295,x=V+(M<<20&4294967295|M>>>12),M=A+(V^q&(x^V))+L[13]+2850285829&4294967295,A=x+(M<<5&4294967295|M>>>27),M=q+(x^V&(A^x))+L[2]+4243563512&4294967295,q=A+(M<<9&4294967295|M>>>23),M=V+(A^x&(q^A))+L[7]+1735328473&4294967295,V=q+(M<<14&4294967295|M>>>18),M=x+(q^A&(V^q))+L[12]+2368359562&4294967295,x=V+(M<<20&4294967295|M>>>12),M=A+(x^V^q)+L[5]+4294588738&4294967295,A=x+(M<<4&4294967295|M>>>28),M=q+(A^x^V)+L[8]+2272392833&4294967295,q=A+(M<<11&4294967295|M>>>21),M=V+(q^A^x)+L[11]+1839030562&4294967295,V=q+(M<<16&4294967295|M>>>16),M=x+(V^q^A)+L[14]+4259657740&4294967295,x=V+(M<<23&4294967295|M>>>9),M=A+(x^V^q)+L[1]+2763975236&4294967295,A=x+(M<<4&4294967295|M>>>28),M=q+(A^x^V)+L[4]+1272893353&4294967295,q=A+(M<<11&4294967295|M>>>21),M=V+(q^A^x)+L[7]+4139469664&4294967295,V=q+(M<<16&4294967295|M>>>16),M=x+(V^q^A)+L[10]+3200236656&4294967295,x=V+(M<<23&4294967295|M>>>9),M=A+(x^V^q)+L[13]+681279174&4294967295,A=x+(M<<4&4294967295|M>>>28),M=q+(A^x^V)+L[0]+3936430074&4294967295,q=A+(M<<11&4294967295|M>>>21),M=V+(q^A^x)+L[3]+3572445317&4294967295,V=q+(M<<16&4294967295|M>>>16),M=x+(V^q^A)+L[6]+76029189&4294967295,x=V+(M<<23&4294967295|M>>>9),M=A+(x^V^q)+L[9]+3654602809&4294967295,A=x+(M<<4&4294967295|M>>>28),M=q+(A^x^V)+L[12]+3873151461&4294967295,q=A+(M<<11&4294967295|M>>>21),M=V+(q^A^x)+L[15]+530742520&4294967295,V=q+(M<<16&4294967295|M>>>16),M=x+(V^q^A)+L[2]+3299628645&4294967295,x=V+(M<<23&4294967295|M>>>9),M=A+(V^(x|~q))+L[0]+4096336452&4294967295,A=x+(M<<6&4294967295|M>>>26),M=q+(x^(A|~V))+L[7]+1126891415&4294967295,q=A+(M<<10&4294967295|M>>>22),M=V+(A^(q|~x))+L[14]+2878612391&4294967295,V=q+(M<<15&4294967295|M>>>17),M=x+(q^(V|~A))+L[5]+4237533241&4294967295,x=V+(M<<21&4294967295|M>>>11),M=A+(V^(x|~q))+L[12]+1700485571&4294967295,A=x+(M<<6&4294967295|M>>>26),M=q+(x^(A|~V))+L[3]+2399980690&4294967295,q=A+(M<<10&4294967295|M>>>22),M=V+(A^(q|~x))+L[10]+4293915773&4294967295,V=q+(M<<15&4294967295|M>>>17),M=x+(q^(V|~A))+L[1]+2240044497&4294967295,x=V+(M<<21&4294967295|M>>>11),M=A+(V^(x|~q))+L[8]+1873313359&4294967295,A=x+(M<<6&4294967295|M>>>26),M=q+(x^(A|~V))+L[15]+4264355552&4294967295,q=A+(M<<10&4294967295|M>>>22),M=V+(A^(q|~x))+L[6]+2734768916&4294967295,V=q+(M<<15&4294967295|M>>>17),M=x+(q^(V|~A))+L[13]+1309151649&4294967295,x=V+(M<<21&4294967295|M>>>11),M=A+(V^(x|~q))+L[4]+4149444226&4294967295,A=x+(M<<6&4294967295|M>>>26),M=q+(x^(A|~V))+L[11]+3174756917&4294967295,q=A+(M<<10&4294967295|M>>>22),M=V+(A^(q|~x))+L[2]+718787259&4294967295,V=q+(M<<15&4294967295|M>>>17),M=x+(q^(V|~A))+L[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(V+(M<<21&4294967295|M>>>11))&4294967295,R.g[2]=R.g[2]+V&4294967295,R.g[3]=R.g[3]+q&4294967295}i.prototype.v=function(R,A){A===void 0&&(A=R.length);const x=A-this.blockSize,L=this.C;let V=this.h,q=0;for(;q<A;){if(V==0)for(;q<=x;)r(this,R,q),q+=this.blockSize;if(typeof R=="string"){for(;q<A;)if(L[V++]=R.charCodeAt(q++),V==this.blockSize){r(this,L),V=0;break}}else for(;q<A;)if(L[V++]=R[q++],V==this.blockSize){r(this,L),V=0;break}}this.h=V,this.o+=A},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;A=this.o*8;for(var x=R.length-8;x<R.length;++x)R[x]=A&255,A/=256;for(this.v(R),R=Array(16),A=0,x=0;x<4;++x)for(let L=0;L<32;L+=8)R[A++]=this.g[x]>>>L&255;return R};function a(R,A){var x=h;return Object.prototype.hasOwnProperty.call(x,R)?x[R]:x[R]=A(R)}function l(R,A){this.h=A;const x=[];let L=!0;for(let V=R.length-1;V>=0;V--){const q=R[V]|0;L&&q==A||(x[V]=q,L=!1)}this.g=x}var h={};function f(R){return-128<=R&&R<128?a(R,function(A){return new l([A|0],A<0?-1:0)}):new l([R|0],R<0?-1:0)}function d(R){if(isNaN(R)||!isFinite(R))return y;if(R<0)return D(d(-R));const A=[];let x=1;for(let L=0;R>=x;L++)A[L]=R/x|0,x*=4294967296;return new l(A,0)}function g(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return D(g(R.substring(1),A));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=d(Math.pow(A,8));let L=y;for(let q=0;q<R.length;q+=8){var V=Math.min(8,R.length-q);const M=parseInt(R.substring(q,q+V),A);V<8?(V=d(Math.pow(A,V)),L=L.j(V).add(d(M))):(L=L.j(x),L=L.add(d(M)))}return L}var y=f(0),v=f(1),w=f(16777216);n=l.prototype,n.m=function(){if(N(this))return-D(this).m();let R=0,A=1;for(let x=0;x<this.g.length;x++){const L=this.i(x);R+=(L>=0?L:4294967296+L)*A,A*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(C(this))return"0";if(N(this))return"-"+D(this).toString(R);const A=d(Math.pow(R,6));var x=this;let L="";for(;;){const V=Z(x,A).g;x=U(x,V.j(A));let q=((x.g.length>0?x.g[0]:x.h)>>>0).toString(R);if(x=V,C(x))return q+L;for(;q.length<6;)q="0"+q;L=q+L}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function C(R){if(R.h!=0)return!1;for(let A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function N(R){return R.h==-1}n.l=function(R){return R=U(this,R),N(R)?-1:C(R)?0:1};function D(R){const A=R.g.length,x=[];for(let L=0;L<A;L++)x[L]=~R.g[L];return new l(x,~R.h).add(v)}n.abs=function(){return N(this)?D(this):this},n.add=function(R){const A=Math.max(this.g.length,R.g.length),x=[];let L=0;for(let V=0;V<=A;V++){let q=L+(this.i(V)&65535)+(R.i(V)&65535),M=(q>>>16)+(this.i(V)>>>16)+(R.i(V)>>>16);L=M>>>16,q&=65535,M&=65535,x[V]=M<<16|q}return new l(x,x[x.length-1]&-2147483648?-1:0)};function U(R,A){return R.add(D(A))}n.j=function(R){if(C(this)||C(R))return y;if(N(this))return N(R)?D(this).j(D(R)):D(D(this).j(R));if(N(R))return D(this.j(D(R)));if(this.l(w)<0&&R.l(w)<0)return d(this.m()*R.m());const A=this.g.length+R.g.length,x=[];for(var L=0;L<2*A;L++)x[L]=0;for(L=0;L<this.g.length;L++)for(let V=0;V<R.g.length;V++){const q=this.i(L)>>>16,M=this.i(L)&65535,dt=R.i(V)>>>16,Rt=R.i(V)&65535;x[2*L+2*V]+=M*Rt,z(x,2*L+2*V),x[2*L+2*V+1]+=q*Rt,z(x,2*L+2*V+1),x[2*L+2*V+1]+=M*dt,z(x,2*L+2*V+1),x[2*L+2*V+2]+=q*dt,z(x,2*L+2*V+2)}for(R=0;R<A;R++)x[R]=x[2*R+1]<<16|x[2*R];for(R=A;R<2*A;R++)x[R]=0;return new l(x,0)};function z(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function k(R,A){this.g=R,this.h=A}function Z(R,A){if(C(A))throw Error("division by zero");if(C(R))return new k(y,y);if(N(R))return A=Z(D(R),A),new k(D(A.g),D(A.h));if(N(A))return A=Z(R,D(A)),new k(D(A.g),A.h);if(R.g.length>30){if(N(R)||N(A))throw Error("slowDivide_ only works with positive integers.");for(var x=v,L=A;L.l(R)<=0;)x=Q(x),L=Q(L);var V=oe(x,1),q=oe(L,1);for(L=oe(L,2),x=oe(x,2);!C(L);){var M=q.add(L);M.l(R)<=0&&(V=V.add(x),q=M),L=oe(L,1),x=oe(x,1)}return A=U(R,V.j(A)),new k(V,A)}for(V=y;R.l(A)>=0;){for(x=Math.max(1,Math.floor(R.m()/A.m())),L=Math.ceil(Math.log(x)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),q=d(x),M=q.j(A);N(M)||M.l(R)>0;)x-=L,q=d(x),M=q.j(A);C(q)&&(q=v),V=V.add(q),R=U(R,M)}return new k(V,R)}n.B=function(R){return Z(this,R).h},n.and=function(R){const A=Math.max(this.g.length,R.g.length),x=[];for(let L=0;L<A;L++)x[L]=this.i(L)&R.i(L);return new l(x,this.h&R.h)},n.or=function(R){const A=Math.max(this.g.length,R.g.length),x=[];for(let L=0;L<A;L++)x[L]=this.i(L)|R.i(L);return new l(x,this.h|R.h)},n.xor=function(R){const A=Math.max(this.g.length,R.g.length),x=[];for(let L=0;L<A;L++)x[L]=this.i(L)^R.i(L);return new l(x,this.h^R.h)};function Q(R){const A=R.g.length+1,x=[];for(let L=0;L<A;L++)x[L]=R.i(L)<<1|R.i(L-1)>>>31;return new l(x,R.h)}function oe(R,A){const x=A>>5;A%=32;const L=R.g.length-x,V=[];for(let q=0;q<L;q++)V[q]=A>0?R.i(q+x)>>>A|R.i(q+x+1)<<32-A:R.i(q+x);return new l(V,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,CP=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=d,l.fromString=g,Ao=l}).apply(typeof JI<"u"?JI:typeof self<"u"?self:typeof window<"u"?window:{});var tp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IP,zh,RP,Ep,hT,xP,DP,NP;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof tp=="object"&&tp];for(var T=0;T<m.length;++T){var S=m[T];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=t(this);function r(m,T){if(T)e:{var S=i;m=m.split(".");for(var I=0;I<m.length-1;I++){var K=m[I];if(!(K in S))break e;S=S[K]}m=m[m.length-1],I=S[m],T=T(I),T!=I&&T!=null&&e(S,m,{configurable:!0,writable:!0,value:T})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(T){var S=[],I;for(I in T)Object.prototype.hasOwnProperty.call(T,I)&&S.push([I,T[I]]);return S}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function h(m){var T=typeof m;return T=="object"&&m!=null||T=="function"}function f(m,T,S){return m.call.apply(m.bind,arguments)}function d(m,T,S){return d=f,d.apply(null,arguments)}function g(m,T){var S=Array.prototype.slice.call(arguments,1);return function(){var I=S.slice();return I.push.apply(I,arguments),m.apply(this,I)}}function y(m,T){function S(){}S.prototype=T.prototype,m.Z=T.prototype,m.prototype=new S,m.prototype.constructor=m,m.Ob=function(I,K,X){for(var ce=Array(arguments.length-2),De=2;De<arguments.length;De++)ce[De-2]=arguments[De];return T.prototype[K].apply(I,ce)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const T=m.length;if(T>0){const S=Array(T);for(let I=0;I<T;I++)S[I]=m[I];return S}return[]}function C(m,T){for(let I=1;I<arguments.length;I++){const K=arguments[I];var S=typeof K;if(S=S!="object"?S:K?Array.isArray(K)?"array":S:"null",S=="array"||S=="object"&&typeof K.length=="number"){S=m.length||0;const X=K.length||0;m.length=S+X;for(let ce=0;ce<X;ce++)m[S+ce]=K[ce]}else m.push(K)}}class N{constructor(T,S){this.i=T,this.j=S,this.h=0,this.g=null}get(){let T;return this.h>0?(this.h--,T=this.g,this.g=T.next,T.next=null):T=this.i(),T}}function D(m){l.setTimeout(()=>{throw m},0)}function U(){var m=R;let T=null;return m.g&&(T=m.g,m.g=m.g.next,m.g||(m.h=null),T.next=null),T}class z{constructor(){this.h=this.g=null}add(T,S){const I=k.get();I.set(T,S),this.h?this.h.next=I:this.g=I,this.h=I}}var k=new N(()=>new Z,m=>m.reset());class Z{constructor(){this.next=this.g=this.h=null}set(T,S){this.h=T,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,oe=!1,R=new z,A=()=>{const m=Promise.resolve(void 0);Q=()=>{m.then(x)}};function x(){for(var m;m=U();){try{m.h.call(m.g)}catch(S){D(S)}var T=k;T.j(m),T.h<100&&(T.h++,m.next=T.g,T.g=m)}oe=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(m,T){this.type=m,this.g=this.target=T,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,T=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const S=()=>{};l.addEventListener("test",S,T),l.removeEventListener("test",S,T)}catch{}return m})();function M(m){return/^[\s\xa0]*$/.test(m)}function dt(m,T){V.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,T)}y(dt,V),dt.prototype.init=function(m,T){const S=this.type=m.type,I=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=T,T=m.relatedTarget,T||(S=="mouseover"?T=m.fromElement:S=="mouseout"&&(T=m.toElement)),this.relatedTarget=T,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&dt.Z.h.call(this)},dt.prototype.h=function(){dt.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Rt="closure_listenable_"+(Math.random()*1e6|0),te=0;function ae(m,T,S,I,K){this.listener=m,this.proxy=null,this.src=T,this.type=S,this.capture=!!I,this.ha=K,this.key=++te,this.da=this.fa=!1}function pe(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Pe(m,T,S){for(const I in m)T.call(S,m[I],I,m)}function je(m,T){for(const S in m)T.call(void 0,m[S],S,m)}function B(m){const T={};for(const S in m)T[S]=m[S];return T}const re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(m,T){let S,I;for(let K=1;K<arguments.length;K++){I=arguments[K];for(S in I)m[S]=I[S];for(let X=0;X<re.length;X++)S=re[X],Object.prototype.hasOwnProperty.call(I,S)&&(m[S]=I[S])}}function me(m){this.src=m,this.g={},this.h=0}me.prototype.add=function(m,T,S,I,K){const X=m.toString();m=this.g[X],m||(m=this.g[X]=[],this.h++);const ce=Me(m,T,I,K);return ce>-1?(T=m[ce],S||(T.fa=!1)):(T=new ae(T,this.src,X,!!I,K),T.fa=S,m.push(T)),T};function Ce(m,T){const S=T.type;if(S in m.g){var I=m.g[S],K=Array.prototype.indexOf.call(I,T,void 0),X;(X=K>=0)&&Array.prototype.splice.call(I,K,1),X&&(pe(T),m.g[S].length==0&&(delete m.g[S],m.h--))}}function Me(m,T,S,I){for(let K=0;K<m.length;++K){const X=m[K];if(!X.da&&X.listener==T&&X.capture==!!S&&X.ha==I)return K}return-1}var $e="closure_lm_"+(Math.random()*1e6|0),tn={};function vt(m,T,S,I,K){if(Array.isArray(T)){for(let X=0;X<T.length;X++)vt(m,T[X],S,I,K);return null}return S=wc(S),m&&m[Rt]?m.J(T,S,h(I)?!!I.capture:!1,K):Ho(m,T,S,!1,I,K)}function Ho(m,T,S,I,K,X){if(!T)throw Error("Invalid event type");const ce=h(K)?!!K.capture:!!K;let De=Go(m);if(De||(m[$e]=De=new me(m)),S=De.add(T,S,I,ce,X),S.proxy)return S;if(I=dl(),S.proxy=I,I.src=m,I.listener=S,m.addEventListener)q||(K=ce),K===void 0&&(K=!1),m.addEventListener(T.toString(),I,K);else if(m.attachEvent)m.attachEvent(rs(T.toString()),I);else if(m.addListener&&m.removeListener)m.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return S}function dl(){function m(S){return T.call(m.src,m.listener,S)}const T=Ec;return m}function ml(m,T,S,I,K){if(Array.isArray(T))for(var X=0;X<T.length;X++)ml(m,T[X],S,I,K);else I=h(I)?!!I.capture:!!I,S=wc(S),m&&m[Rt]?(m=m.i,X=String(T).toString(),X in m.g&&(T=m.g[X],S=Me(T,S,I,K),S>-1&&(pe(T[S]),Array.prototype.splice.call(T,S,1),T.length==0&&(delete m.g[X],m.h--)))):m&&(m=Go(m))&&(T=m.g[T.toString()],m=-1,T&&(m=Me(T,S,I,K)),(S=m>-1?T[m]:null)&&pl(S))}function pl(m){if(typeof m!="number"&&m&&!m.da){var T=m.src;if(T&&T[Rt])Ce(T.i,m);else{var S=m.type,I=m.proxy;T.removeEventListener?T.removeEventListener(S,I,m.capture):T.detachEvent?T.detachEvent(rs(S),I):T.addListener&&T.removeListener&&T.removeListener(I),(S=Go(T))?(Ce(S,m),S.h==0&&(S.src=null,T[$e]=null)):pe(m)}}}function rs(m){return m in tn?tn[m]:tn[m]="on"+m}function Ec(m,T){if(m.da)m=!0;else{T=new dt(T,this);const S=m.listener,I=m.ha||m.src;m.fa&&pl(m),m=S.call(I,T)}return m}function Go(m){return m=m[$e],m instanceof me?m:null}var Sc="__closure_events_fn_"+(Math.random()*1e9>>>0);function wc(m){return typeof m=="function"?m:(m[Sc]||(m[Sc]=function(T){return m.handleEvent(T)}),m[Sc])}function Ft(){L.call(this),this.i=new me(this),this.M=this,this.G=null}y(Ft,L),Ft.prototype[Rt]=!0,Ft.prototype.removeEventListener=function(m,T,S,I){ml(this,m,T,S,I)};function nn(m,T){var S,I=m.G;if(I)for(S=[];I;I=I.G)S.push(I);if(m=m.M,I=T.type||T,typeof T=="string")T=new V(T,m);else if(T instanceof V)T.target=T.target||m;else{var K=T;T=new V(I,m),de(T,K)}K=!0;let X,ce;if(S)for(ce=S.length-1;ce>=0;ce--)X=T.g=S[ce],K=Dr(X,I,!0,T)&&K;if(X=T.g=m,K=Dr(X,I,!0,T)&&K,K=Dr(X,I,!1,T)&&K,S)for(ce=0;ce<S.length;ce++)X=T.g=S[ce],K=Dr(X,I,!1,T)&&K}Ft.prototype.N=function(){if(Ft.Z.N.call(this),this.i){var m=this.i;for(const T in m.g){const S=m.g[T];for(let I=0;I<S.length;I++)pe(S[I]);delete m.g[T],m.h--}}this.G=null},Ft.prototype.J=function(m,T,S,I){return this.i.add(String(m),T,!1,S,I)},Ft.prototype.K=function(m,T,S,I){return this.i.add(String(m),T,!0,S,I)};function Dr(m,T,S,I){if(T=m.i.g[String(T)],!T)return!0;T=T.concat();let K=!0;for(let X=0;X<T.length;++X){const ce=T[X];if(ce&&!ce.da&&ce.capture==S){const De=ce.listener,Ot=ce.ha||ce.src;ce.fa&&Ce(m.i,ce),K=De.call(Ot,I)!==!1&&K}}return K&&!I.defaultPrevented}function L_(m,T){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=d(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(T)>2147483647?-1:l.setTimeout(m,T||0)}function yd(m){m.g=L_(()=>{m.g=null,m.i&&(m.i=!1,yd(m))},m.l);const T=m.h;m.h=null,m.m.apply(null,T)}class Nn extends L{constructor(T,S){super(),this.m=T,this.l=S,this.h=null,this.i=!1,this.g=null}j(T){this.h=arguments,this.g?this.i=!0:yd(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ko(m){L.call(this),this.h=m,this.g={}}y(Ko,L);var bc=[];function Ac(m){Pe(m.g,function(T,S){this.g.hasOwnProperty(S)&&pl(T)},m),m.g={}}Ko.prototype.N=function(){Ko.Z.N.call(this),Ac(this)},Ko.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nr=l.JSON.stringify,U_=l.JSON.parse,vd=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function Td(){}function Ed(){}var ki={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pn(){V.call(this,"d")}y(pn,V);function di(){V.call(this,"c")}y(di,V);var Mt={},Sd=null;function gl(){return Sd=Sd||new Ft}Mt.Ia="serverreachability";function wd(m){V.call(this,Mt.Ia,m)}y(wd,V);function os(m){const T=gl();nn(T,new wd(T))}Mt.STAT_EVENT="statevent";function $o(m,T){V.call(this,Mt.STAT_EVENT,m),this.stat=T}y($o,V);function Bt(m){const T=gl();nn(T,new $o(T,m))}Mt.Ja="timingevent";function as(m,T){V.call(this,Mt.Ja,m),this.size=T}y(as,V);function ls(m,T){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},T)}function Li(){this.g=!0}Li.prototype.ua=function(){this.g=!1};function F_(m,T,S,I,K,X){m.info(function(){if(m.g)if(X){var ce="",De=X.split("&");for(let Xe=0;Xe<De.length;Xe++){var Ot=De[Xe].split("=");if(Ot.length>1){const Tt=Ot[0];Ot=Ot[1];const _i=Tt.split("_");ce=_i.length>=2&&_i[1]=="type"?ce+(Tt+"="+Ot+"&"):ce+(Tt+"=redacted&")}}}else ce=null;else ce=X;return"XMLHTTP REQ ("+I+") [attempt "+K+"]: "+T+`
`+S+`
`+ce})}function bd(m,T,S,I,K,X,ce){m.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+K+"]: "+T+`
`+S+`
`+X+" "+ce})}function us(m,T,S,I){m.info(function(){return"XMLHTTP TEXT ("+T+"): "+B_(m,S)+(I?" "+I:"")})}function Yo(m,T){m.info(function(){return"TIMEOUT: "+T})}Li.prototype.info=function(){};function B_(m,T){if(!m.g)return T;if(!T)return null;try{const X=JSON.parse(T);if(X){for(m=0;m<X.length;m++)if(Array.isArray(X[m])){var S=X[m];if(!(S.length<2)){var I=S[1];if(Array.isArray(I)&&!(I.length<1)){var K=I[0];if(K!="noop"&&K!="stop"&&K!="close")for(let ce=1;ce<I.length;ce++)I[ce]=""}}}}return Nr(X)}catch{return T}}var Wo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Cc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ic;function Qo(){}y(Qo,Td),Qo.prototype.g=function(){return new XMLHttpRequest},Ic=new Qo;function zs(m){return encodeURIComponent(String(m))}function Ad(m){var T=1;m=m.split(":");const S=[];for(;T>0&&m.length;)S.push(m.shift()),T--;return m.length&&S.push(m.join(":")),S}function Ui(m,T,S,I){this.j=m,this.i=T,this.l=S,this.S=I||1,this.V=new Ko(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fi}function Fi(){this.i=null,this.g="",this.h=!1}var zt={},ln={};function cs(m,T,S){m.M=1,m.A=Xo(qt(T)),m.u=S,m.R=!0,_l(m,null)}function _l(m,T){m.F=Date.now(),hs(m),m.B=qt(m.A);var S=m.B,I=m.S;Array.isArray(I)||(I=[String(I)]),El(S.i,"t",I),m.C=0,S=m.j.L,m.h=new Fi,m.g=Bd(m.j,S?T:null,!m.u),m.P>0&&(m.O=new Nn(d(m.Y,m,m.g),m.P)),T=m.V,S=m.g,I=m.ba;var K="readystatechange";Array.isArray(K)||(K&&(bc[0]=K.toString()),K=bc);for(let X=0;X<K.length;X++){const ce=vt(S,K[X],I||T.handleEvent,!1,T.h||T);if(!ce)break;T.g[ce.key]=ce}T=m.J?B(m.J):{},m.u?(m.v||(m.v="POST"),T["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,T)):(m.v="GET",m.g.ea(m.B,m.v,null,T)),os(),F_(m.i,m.v,m.B,m.l,m.S,m.u)}Ui.prototype.ba=function(m){m=m.target;const T=this.O;T&&ji(m)==3?T.j():this.Y(m)},Ui.prototype.Y=function(m){try{if(m==this.g)e:{const De=ji(this.g),Ot=this.g.ya(),Xe=this.g.ca();if(!(De<3)&&(De!=3||this.g&&(this.h.h||this.g.la()||gn(this.g)))){this.K||De!=4||Ot==7||(Ot==8||Xe<=0?os(3):os(2)),fs(this);var T=this.g.ca();this.X=T;var S=z_(this);if(this.o=T==200,bd(this.i,this.v,this.B,this.l,this.S,De,T),this.o){if(this.U&&!this.L){t:{if(this.g){var I,K=this.g;if((I=K.g?K.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(I)){var X=I;break t}}X=null}if(m=X)us(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ds(this,m);else{this.o=!1,this.m=3,Bt(12),Xn(this),mi(this);break e}}if(this.R){m=!0;let Tt;for(;!this.K&&this.C<S.length;)if(Tt=Id(this,S),Tt==ln){De==4&&(this.m=4,Bt(14),m=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==zt){this.m=4,Bt(15),us(this.i,this.l,S,"[Invalid Chunk]"),m=!1;break}else us(this.i,this.l,Tt,null),ds(this,Tt);if(Cd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),De!=4||S.length!=0||this.h.h||(this.m=1,Bt(16),m=!1),this.o=this.o&&m,!m)us(this.i,this.l,S,"[Invalid Chunked Response]"),Xn(this),mi(this);else if(S.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+S.length),jc(ce),ce.P=!0,Bt(11))}}else us(this.i,this.l,S,null),ds(this,S);De==4&&Xn(this),this.o&&!this.K&&(De==4?kd(this.j,this):(this.o=!1,hs(this)))}else qs(this.g),T==400&&S.indexOf("Unknown SID")>0?(this.m=3,Bt(12)):(this.m=0,Bt(13)),Xn(this),mi(this)}}}catch{}finally{}};function z_(m){if(!Cd(m))return m.g.la();const T=gn(m.g);if(T==="")return"";let S="";const I=T.length,K=ji(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Xn(m),mi(m),"";m.h.i=new l.TextDecoder}for(let X=0;X<I;X++)m.h.h=!0,S+=m.h.i.decode(T[X],{stream:!(K&&X==I-1)});return T.length=0,m.h.g+=S,m.C=0,m.h.g}function Cd(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Id(m,T){var S=m.C,I=T.indexOf(`
`,S);return I==-1?ln:(S=Number(T.substring(S,I)),isNaN(S)?zt:(I+=1,I+S>T.length?ln:(T=T.slice(I,I+S),m.C=I+S,T)))}Ui.prototype.cancel=function(){this.K=!0,Xn(this)};function hs(m){m.T=Date.now()+m.H,yl(m,m.H)}function yl(m,T){if(m.D!=null)throw Error("WatchDog timer not null");m.D=ls(d(m.aa,m),T)}function fs(m){m.D&&(l.clearTimeout(m.D),m.D=null)}Ui.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Yo(this.i,this.B),this.M!=2&&(os(),Bt(17)),Xn(this),this.m=2,mi(this)):yl(this,this.T-m)};function mi(m){m.j.I==0||m.K||kd(m.j,m)}function Xn(m){fs(m);var T=m.O;T&&typeof T.dispose=="function"&&T.dispose(),m.O=null,Ac(m.V),m.g&&(T=m.g,m.g=null,T.abort(),T.dispose())}function ds(m,T){try{var S=m.j;if(S.I!=0&&(S.g==m||ps(S.h,m))){if(!m.L&&ps(S.h,m)&&S.I==3){try{var I=S.Ba.g.parse(T)}catch{I=null}if(Array.isArray(I)&&I.length==3){var K=I;if(K[0]==0){e:if(!S.v){if(S.g)if(S.g.F+3e3<m.F)Cl(S),Fr(S);else break e;sa(S),Bt(18)}}else S.xa=K[1],0<S.xa-S.K&&K[2]<37500&&S.F&&S.A==0&&!S.C&&(S.C=ls(d(S.Va,S),6e3));ms(S.h)<=1&&S.ta&&(S.ta=void 0)}else Es(S,11)}else if((m.L||S.g==m)&&Cl(S),!M(T))for(K=S.Ba.g.parse(T),T=0;T<K.length;T++){let Xe=K[T];const Tt=Xe[0];if(!(Tt<=S.K))if(S.K=Tt,Xe=Xe[1],S.I==2)if(Xe[0]=="c"){S.M=Xe[1],S.ba=Xe[2];const _i=Xe[3];_i!=null&&(S.ka=_i,S.j.info("VER="+S.ka));const Ss=Xe[4];Ss!=null&&(S.za=Ss,S.j.info("SVER="+S.za));const qi=Xe[5];qi!=null&&typeof qi=="number"&&qi>0&&(I=1.5*qi,S.O=I,S.j.info("backChannelRequestTimeoutMs_="+I)),I=S;const Hi=m.g;if(Hi){const ra=Hi.g?Hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ra){var X=I.h;X.g||ra.indexOf("spdy")==-1&&ra.indexOf("quic")==-1&&ra.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Dc(X,X.h),X.h=null))}if(I.G){const Il=Hi.g?Hi.g.getResponseHeader("X-HTTP-Session-Id"):null;Il&&(I.wa=Il,it(I.J,I.G,Il))}}S.I=3,S.l&&S.l.ra(),S.aa&&(S.T=Date.now()-m.F,S.j.info("Handshake RTT: "+S.T+"ms")),I=S;var ce=m;if(I.na=Fd(I,I.L?I.ba:null,I.W),ce.L){Nc(I.h,ce);var De=ce,Ot=I.O;Ot&&(De.H=Ot),De.D&&(fs(De),hs(De)),I.g=ce}else Od(I);S.i.length>0&&Ts(S)}else Xe[0]!="stop"&&Xe[0]!="close"||Es(S,7);else S.I==3&&(Xe[0]=="stop"||Xe[0]=="close"?Xe[0]=="stop"?Es(S,7):Bc(S):Xe[0]!="noop"&&S.l&&S.l.qa(Xe),S.A=0)}}os(4)}catch{}}var jt=class{constructor(m,T){this.g=m,this.map=T}};function Rc(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xc(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ms(m){return m.h?1:m.g?m.g.size:0}function ps(m,T){return m.h?m.h==T:m.g?m.g.has(T):!1}function Dc(m,T){m.g?m.g.add(T):m.h=T}function Nc(m,T){m.h&&m.h==T?m.h=null:m.g&&m.g.has(T)&&m.g.delete(T)}Rc.prototype.cancel=function(){if(this.i=Pc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Pc(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let T=m.i;for(const S of m.g.values())T=T.concat(S.G);return T}return w(m.i)}var Rd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vl(m,T){if(m){m=m.split("&");for(let S=0;S<m.length;S++){const I=m[S].indexOf("=");let K,X=null;I>=0?(K=m[S].substring(0,I),X=m[S].substring(I+1)):K=m[S],T(K,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Jn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let T;m instanceof Jn?(this.l=m.l,un(this,m.j),this.o=m.o,this.g=m.g,Pr(this,m.u),this.h=m.h,Mc(this,Pd(m.i)),this.m=m.m):m&&(T=String(m).match(Rd))?(this.l=!1,un(this,T[1]||"",!0),this.o=gs(T[2]||""),this.g=gs(T[3]||"",!0),Pr(this,T[4]),this.h=gs(T[5]||"",!0),Mc(this,T[6]||"",!0),this.m=gs(T[7]||"")):(this.l=!1,this.i=new Or(null,this.l))}Jn.prototype.toString=function(){const m=[];var T=this.j;T&&m.push(Jo(T,Tl,!0),":");var S=this.g;return(S||T=="file")&&(m.push("//"),(T=this.o)&&m.push(Jo(T,Tl,!0),"@"),m.push(zs(S).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.u,S!=null&&m.push(":",String(S))),(S=this.h)&&(this.g&&S.charAt(0)!="/"&&m.push("/"),m.push(Jo(S,S.charAt(0)=="/"?Oc:xd,!0))),(S=this.i.toString())&&m.push("?",S),(S=this.m)&&m.push("#",Jo(S,Dd)),m.join("")},Jn.prototype.resolve=function(m){const T=qt(this);let S=!!m.j;S?un(T,m.j):S=!!m.o,S?T.o=m.o:S=!!m.g,S?T.g=m.g:S=m.u!=null;var I=m.h;if(S)Pr(T,m.u);else if(S=!!m.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var K=T.h.lastIndexOf("/");K!=-1&&(I=T.h.slice(0,K+1)+I)}if(K=I,K==".."||K==".")I="";else if(K.indexOf("./")!=-1||K.indexOf("/.")!=-1){I=K.lastIndexOf("/",0)==0,K=K.split("/");const X=[];for(let ce=0;ce<K.length;){const De=K[ce++];De=="."?I&&ce==K.length&&X.push(""):De==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),I&&ce==K.length&&X.push("")):(X.push(De),I=!0)}I=X.join("/")}else I=K}return S?T.h=I:S=m.i.toString()!=="",S?Mc(T,Pd(m.i)):S=!!m.m,S&&(T.m=m.m),T};function qt(m){return new Jn(m)}function un(m,T,S){m.j=S?gs(T,!0):T,m.j&&(m.j=m.j.replace(/:$/,""))}function Pr(m,T){if(T){if(T=Number(T),isNaN(T)||T<0)throw Error("Bad port number "+T);m.u=T}else m.u=null}function Mc(m,T,S){T instanceof Or?(m.i=T,Sl(m.i,m.l)):(S||(T=Jo(T,Mr)),m.i=new Or(T,m.l))}function it(m,T,S){m.i.set(T,S)}function Xo(m){return it(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function gs(m,T){return m?T?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Jo(m,T,S){return typeof m=="string"?(m=encodeURI(m).replace(T,Fn),S&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Fn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Tl=/[#\/\?@]/g,xd=/[#\?:]/g,Oc=/[#\?]/g,Mr=/[#\?@]/g,Dd=/#/g;function Or(m,T){this.h=this.g=null,this.i=m||null,this.j=!!T}function Bn(m){m.g||(m.g=new Map,m.h=0,m.i&&vl(m.i,function(T,S){m.add(decodeURIComponent(T.replace(/\+/g," ")),S)}))}n=Or.prototype,n.add=function(m,T){Bn(this),this.i=null,m=Vr(this,m);let S=this.g.get(m);return S||this.g.set(m,S=[]),S.push(T),this.h+=1,this};function Nd(m,T){Bn(m),T=Vr(m,T),m.g.has(T)&&(m.i=null,m.h-=m.g.get(T).length,m.g.delete(T))}function Vc(m,T){return Bn(m),T=Vr(m,T),m.g.has(T)}n.forEach=function(m,T){Bn(this),this.g.forEach(function(S,I){S.forEach(function(K){m.call(T,K,I,this)},this)},this)};function kc(m,T){Bn(m);let S=[];if(typeof T=="string")Vc(m,T)&&(S=S.concat(m.g.get(Vr(m,T))));else for(m=Array.from(m.g.values()),T=0;T<m.length;T++)S=S.concat(m[T]);return S}n.set=function(m,T){return Bn(this),this.i=null,m=Vr(this,m),Vc(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[T]),this.h+=1,this},n.get=function(m,T){return m?(m=kc(this,m),m.length>0?String(m[0]):T):T};function El(m,T,S){Nd(m,T),S.length>0&&(m.i=null,m.g.set(Vr(m,T),w(S)),m.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],T=Array.from(this.g.keys());for(let I=0;I<T.length;I++){var S=T[I];const K=zs(S);S=kc(this,S);for(let X=0;X<S.length;X++){let ce=K;S[X]!==""&&(ce+="="+zs(S[X])),m.push(ce)}}return this.i=m.join("&")};function Pd(m){const T=new Or;return T.i=m.i,m.g&&(T.g=new Map(m.g),T.h=m.h),T}function Vr(m,T){return T=String(T),m.j&&(T=T.toLowerCase()),T}function Sl(m,T){T&&!m.j&&(Bn(m),m.i=null,m.g.forEach(function(S,I){const K=I.toLowerCase();I!=K&&(Nd(this,I),El(this,K,S))},m)),m.j=T}function Bi(m,T){const S=new Li;if(l.Image){const I=new Image;I.onload=g(pi,S,"TestLoadImage: loaded",!0,T,I),I.onerror=g(pi,S,"TestLoadImage: error",!1,T,I),I.onabort=g(pi,S,"TestLoadImage: abort",!1,T,I),I.ontimeout=g(pi,S,"TestLoadImage: timeout",!1,T,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=m}else T(!1)}function Lc(m,T){const S=new Li,I=new AbortController,K=setTimeout(()=>{I.abort(),pi(S,"TestPingServer: timeout",!1,T)},1e4);fetch(m,{signal:I.signal}).then(X=>{clearTimeout(K),X.ok?pi(S,"TestPingServer: ok",!0,T):pi(S,"TestPingServer: server error",!1,T)}).catch(()=>{clearTimeout(K),pi(S,"TestPingServer: error",!1,T)})}function pi(m,T,S,I,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),I(S)}catch{}}function kr(){this.g=new vd}function _s(m){this.i=m.Sb||null,this.h=m.ab||!1}y(_s,Td),_s.prototype.g=function(){return new Zo(this.i,this.h)};function Zo(m,T){Ft.call(this),this.H=m,this.o=T,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Zo,Ft),n=Zo.prototype,n.open=function(m,T){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=T,this.readyState=1,zi(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const T={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(T.body=m),(this.H||l).fetch(new Request(this.D,T)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Lr(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,zi(this)),this.g&&(this.readyState=3,zi(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;wl(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function wl(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var T=m.value?m.value:new Uint8Array(0);(T=this.B.decode(T,{stream:!m.done}))&&(this.response=this.responseText+=T)}m.done?Lr(this):zi(this),this.readyState==3&&wl(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Lr(this))},n.Na=function(m){this.g&&(this.response=m,Lr(this))},n.ga=function(){this.g&&Lr(this)};function Lr(m){m.readyState=4,m.l=null,m.j=null,m.B=null,zi(m)}n.setRequestHeader=function(m,T){this.A.append(m,T)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],T=this.h.entries();for(var S=T.next();!S.done;)S=S.value,m.push(S[0]+": "+S[1]),S=T.next();return m.join(`\r
`)};function zi(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Zo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function gi(m){let T="";return Pe(m,function(S,I){T+=I,T+=":",T+=S,T+=`\r
`}),T}function ea(m,T,S){e:{for(I in S){var I=!1;break e}I=!0}I||(S=gi(S),typeof m=="string"?S!=null&&zs(S):it(m,T,S))}function ut(m){Ft.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(ut,Ft);var ys=/^https?$/i,Uc=["POST","PUT"];n=ut.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,T,S,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);T=T?T.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ic.g(),this.g.onreadystatechange=v(d(this.Ca,this));try{this.B=!0,this.g.open(T,String(m),!0),this.B=!1}catch(X){ta(this,X);return}if(m=S||"",S=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var K in I)S.set(K,I[K]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const X of I.keys())S.set(X,I.get(X));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(S.keys()).find(X=>X.toLowerCase()=="content-type"),K=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(Uc,T,void 0)>=0)||I||K||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ce]of S)this.g.setRequestHeader(X,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(X){ta(this,X)}};function ta(m,T){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=T,m.o=5,Fc(m),js(m)}function Fc(m){m.A||(m.A=!0,nn(m,"complete"),nn(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,nn(this,"complete"),nn(this,"abort"),js(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),js(this,!0)),ut.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?na(this):this.Xa())},n.Xa=function(){na(this)};function na(m){if(m.h&&typeof a<"u"){if(m.v&&ji(m)==4)setTimeout(m.Ca.bind(m),0);else if(nn(m,"readystatechange"),ji(m)==4){m.h=!1;try{const X=m.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var T=!0;break e;default:T=!1}var S;if(!(S=T)){var I;if(I=X===0){let ce=String(m.D).match(Rd)[1]||null;!ce&&l.self&&l.self.location&&(ce=l.self.location.protocol.slice(0,-1)),I=!ys.test(ce?ce.toLowerCase():"")}S=I}if(S)nn(m,"complete"),nn(m,"success");else{m.o=6;try{var K=ji(m)>2?m.g.statusText:""}catch{K=""}m.l=K+" ["+m.ca()+"]",Fc(m)}}finally{js(m)}}}}function js(m,T){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const S=m.g;m.g=null,T||nn(m,"ready");try{S.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ji(m){return m.g?m.g.readyState:0}n.ca=function(){try{return ji(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var T=this.g.responseText;return m&&T.indexOf(m)==0&&(T=T.substring(m.length)),U_(T)}};function gn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function qs(m){const T={};m=(m.g&&ji(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<m.length;I++){if(M(m[I]))continue;var S=Ad(m[I]);const K=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const X=T[K]||[];T[K]=X,X.push(S)}je(T,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vs(m,T,S){return S&&S.internalChannelParams&&S.internalChannelParams[m]||T}function Ur(m){this.za=0,this.i=[],this.j=new Li,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vs("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vs("baseRetryDelayMs",5e3,m),this.Za=vs("retryDelaySeedMs",1e4,m),this.Ta=vs("forwardChannelMaxRetries",2,m),this.va=vs("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Rc(m&&m.concurrentRequestLimit),this.Ba=new kr,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ur.prototype,n.ka=8,n.I=1,n.connect=function(m,T,S,I){Bt(0),this.W=m,this.H=T||{},S&&I!==void 0&&(this.H.OSID=S,this.H.OAID=I),this.F=this.X,this.J=Fd(this,null,this.W),Ts(this)};function Bc(m){if(bl(m),m.I==3){var T=m.V++,S=qt(m.J);if(it(S,"SID",m.M),it(S,"RID",T),it(S,"TYPE","terminate"),ia(m,S),T=new Ui(m,m.j,T),T.M=2,T.A=Xo(qt(S)),S=!1,l.navigator&&l.navigator.sendBeacon)try{S=l.navigator.sendBeacon(T.A.toString(),"")}catch{}!S&&l.Image&&(new Image().src=T.A,S=!0),S||(T.g=Bd(T.j,null),T.g.ea(T.A)),T.F=Date.now(),hs(T)}Ud(m)}function Fr(m){m.g&&(jc(m),m.g.cancel(),m.g=null)}function bl(m){Fr(m),m.v&&(l.clearTimeout(m.v),m.v=null),Cl(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function Ts(m){if(!xc(m.h)&&!m.m){m.m=!0;var T=m.Ea;Q||A(),oe||(Q(),oe=!0),R.add(T,m),m.D=0}}function Al(m,T){return ms(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=T.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=ls(d(m.Ea,m,T),Ld(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const K=new Ui(this,this.j,m);let X=this.o;if(this.U&&(X?(X=B(X),de(X,this.U)):X=this.U),this.u!==null||this.R||(K.J=X,X=null),this.S)e:{for(var T=0,S=0;S<this.i.length;S++){t:{var I=this.i[S];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(T+=I,T>4096){T=S;break e}if(T===4096||S===this.i.length-1){T=S+1;break e}}T=1e3}else T=1e3;T=Md(this,K,T),S=qt(this.J),it(S,"RID",m),it(S,"CVER",22),this.G&&it(S,"X-HTTP-Session-Id",this.G),ia(this,S),X&&(this.R?T="headers="+zs(gi(X))+"&"+T:this.u&&ea(S,this.u,X)),Dc(this.h,K),this.Ra&&it(S,"TYPE","init"),this.S?(it(S,"$req",T),it(S,"SID","null"),K.U=!0,cs(K,S,null)):cs(K,S,T),this.I=2}}else this.I==3&&(m?zc(this,m):this.i.length==0||xc(this.h)||zc(this))};function zc(m,T){var S;T?S=T.l:S=m.V++;const I=qt(m.J);it(I,"SID",m.M),it(I,"RID",S),it(I,"AID",m.K),ia(m,I),m.u&&m.o&&ea(I,m.u,m.o),S=new Ui(m,m.j,S,m.D+1),m.u===null&&(S.J=m.o),T&&(m.i=T.G.concat(m.i)),T=Md(m,S,1e3),S.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Dc(m.h,S),cs(S,I,T)}function ia(m,T){m.H&&Pe(m.H,function(S,I){it(T,I,S)}),m.l&&Pe({},function(S,I){it(T,I,S)})}function Md(m,T,S){S=Math.min(m.i.length,S);const I=m.l?d(m.l.Ka,m.l,m):null;e:{var K=m.i;let De=-1;for(;;){const Ot=["count="+S];De==-1?S>0?(De=K[0].g,Ot.push("ofs="+De)):De=0:Ot.push("ofs="+De);let Xe=!0;for(let Tt=0;Tt<S;Tt++){var X=K[Tt].g;const _i=K[Tt].map;if(X-=De,X<0)De=Math.max(0,K[Tt].g-100),Xe=!1;else try{X="req"+X+"_"||"";try{var ce=_i instanceof Map?_i:Object.entries(_i);for(const[Ss,qi]of ce){let Hi=qi;h(qi)&&(Hi=Nr(qi)),Ot.push(X+Ss+"="+encodeURIComponent(Hi))}}catch(Ss){throw Ot.push(X+"type="+encodeURIComponent("_badmap")),Ss}}catch{I&&I(_i)}}if(Xe){ce=Ot.join("&");break e}}ce=void 0}return m=m.i.splice(0,S),T.G=m,ce}function Od(m){if(!m.g&&!m.v){m.Y=1;var T=m.Da;Q||A(),oe||(Q(),oe=!0),R.add(T,m),m.A=0}}function sa(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=ls(d(m.Da,m),Ld(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Vd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=ls(d(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Bt(10),Fr(this),Vd(this))};function jc(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function Vd(m){m.g=new Ui(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var T=qt(m.na);it(T,"RID","rpc"),it(T,"SID",m.M),it(T,"AID",m.K),it(T,"CI",m.F?"0":"1"),!m.F&&m.ia&&it(T,"TO",m.ia),it(T,"TYPE","xmlhttp"),ia(m,T),m.u&&m.o&&ea(T,m.u,m.o),m.O&&(m.g.H=m.O);var S=m.g;m=m.ba,S.M=1,S.A=Xo(qt(T)),S.u=null,S.R=!0,_l(S,m)}n.Va=function(){this.C!=null&&(this.C=null,Fr(this),sa(this),Bt(19))};function Cl(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function kd(m,T){var S=null;if(m.g==T){Cl(m),jc(m),m.g=null;var I=2}else if(ps(m.h,T))S=T.G,Nc(m.h,T),I=1;else return;if(m.I!=0){if(T.o)if(I==1){S=T.u?T.u.length:0,T=Date.now()-T.F;var K=m.D;I=gl(),nn(I,new as(I,S)),Ts(m)}else Od(m);else if(K=T.m,K==3||K==0&&T.X>0||!(I==1&&Al(m,T)||I==2&&sa(m)))switch(S&&S.length>0&&(T=m.h,T.i=T.i.concat(S)),K){case 1:Es(m,5);break;case 4:Es(m,10);break;case 3:Es(m,6);break;default:Es(m,2)}}}function Ld(m,T){let S=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(S*=2),S*T}function Es(m,T){if(m.j.info("Error code "+T),T==2){var S=d(m.bb,m),I=m.Ua;const K=!I;I=new Jn(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||un(I,"https"),Xo(I),K?Bi(I.toString(),S):Lc(I.toString(),S)}else Bt(2);m.I=0,m.l&&m.l.pa(T),Ud(m),bl(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Bt(2)):(this.j.info("Failed to ping google.com"),Bt(1))};function Ud(m){if(m.I=0,m.ja=[],m.l){const T=Pc(m.h);(T.length!=0||m.i.length!=0)&&(C(m.ja,T),C(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function Fd(m,T,S){var I=S instanceof Jn?qt(S):new Jn(S);if(I.g!="")T&&(I.g=T+"."+I.g),Pr(I,I.u);else{var K=l.location;I=K.protocol,T=T?T+"."+K.hostname:K.hostname,K=+K.port;const X=new Jn(null);I&&un(X,I),T&&(X.g=T),K&&Pr(X,K),S&&(X.h=S),I=X}return S=m.G,T=m.wa,S&&T&&it(I,S,T),it(I,"VER",m.ka),ia(m,I),I}function Bd(m,T,S){if(T&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return T=m.Aa&&!m.ma?new ut(new _s({ab:S})):new ut(m.ma),T.Fa(m.L),T}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function zd(){}n=zd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Br(){}Br.prototype.g=function(m,T){return new Pn(m,T)};function Pn(m,T){Ft.call(this),this.g=new Ur(T),this.l=m,this.h=T&&T.messageUrlParams||null,m=T&&T.messageHeaders||null,T&&T.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=T&&T.initMessageHeaders||null,T&&T.messageContentType&&(m?m["X-WebChannel-Content-Type"]=T.messageContentType:m={"X-WebChannel-Content-Type":T.messageContentType}),T&&T.sa&&(m?m["X-WebChannel-Client-Profile"]=T.sa:m={"X-WebChannel-Client-Profile":T.sa}),this.g.U=m,(m=T&&T.Qb)&&!M(m)&&(this.g.u=m),this.A=T&&T.supportsCrossDomainXhr||!1,this.v=T&&T.sendRawJson||!1,(T=T&&T.httpSessionIdParam)&&!M(T)&&(this.g.G=T,m=this.h,m!==null&&T in m&&(m=this.h,T in m&&delete m[T])),this.j=new Hs(this)}y(Pn,Ft),Pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){Bc(this.g)},Pn.prototype.o=function(m){var T=this.g;if(typeof m=="string"){var S={};S.__data__=m,m=S}else this.v&&(S={},S.__data__=Nr(m),m=S);T.i.push(new jt(T.Ya++,m)),T.I==3&&Ts(T)},Pn.prototype.N=function(){this.g.l=null,delete this.j,Bc(this.g),delete this.g,Pn.Z.N.call(this)};function jd(m){pn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var T=m.__sm__;if(T){e:{for(const S in T){m=S;break e}m=void 0}(this.i=m)&&(m=this.i,T=T!==null&&m in T?T[m]:void 0),this.data=T}else this.data=m}y(jd,pn);function qd(){di.call(this),this.status=1}y(qd,di);function Hs(m){this.g=m}y(Hs,zd),Hs.prototype.ra=function(){nn(this.g,"a")},Hs.prototype.qa=function(m){nn(this.g,new jd(m))},Hs.prototype.pa=function(m){nn(this.g,new qd)},Hs.prototype.oa=function(){nn(this.g,"b")},Br.prototype.createWebChannel=Br.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,NP=function(){return new Br},DP=function(){return gl()},xP=Mt,hT={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Wo.NO_ERROR=0,Wo.TIMEOUT=8,Wo.HTTP_ERROR=6,Ep=Wo,Cc.COMPLETE="complete",RP=Cc,Ed.EventType=ki,ki.OPEN="a",ki.CLOSE="b",ki.ERROR="c",ki.MESSAGE="d",Ft.prototype.listen=Ft.prototype.J,zh=Ed,ut.prototype.listenOnce=ut.prototype.K,ut.prototype.getLastError=ut.prototype.Ha,ut.prototype.getLastErrorCode=ut.prototype.ya,ut.prototype.getStatus=ut.prototype.ca,ut.prototype.getResponseJson=ut.prototype.La,ut.prototype.getResponseText=ut.prototype.la,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Fa,IP=ut}).apply(typeof tp<"u"?tp:typeof self<"u"?self:typeof window<"u"?window:{});const ZI="@firebase/firestore",eR="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mc="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=new Xg("@firebase/firestore");function fu(){return el.logLevel}function le(n,...e){if(el.logLevel<=ze.DEBUG){const t=e.map(uS);el.debug(`Firestore (${mc}): ${n}`,...t)}}function Vn(n,...e){if(el.logLevel<=ze.ERROR){const t=e.map(uS);el.error(`Firestore (${mc}): ${n}`,...t)}}function If(n,...e){if(el.logLevel<=ze.WARN){const t=e.map(uS);el.warn(`Firestore (${mc}): ${n}`,...t)}}function uS(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,PP(n,i,t)}function PP(n,e,t){let i=`FIRESTORE (${mc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Vn(i),new Error(i)}function ve(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||PP(e,r,i)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Rr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class y8{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(On.UNAUTHENTICATED)))}shutdown(){}}class v8{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new mr,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},h=f=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>h(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new mr)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ve(typeof i.accessToken=="string",31837,{l:i}),new _8(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new On(e)}}class T8{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=On.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class E8{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new T8(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(On.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class tR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class S8{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ji(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ve(this.o===void 0,3512);const i=a=>{a.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,le("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new tR(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new tR(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=w8(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function Ie(n,e){return n<e?-1:n>e?1:0}function fT(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return u0(r)===u0(a)?Ie(r,a):u0(r)?1:-1}return Ie(n.length,e.length)}const b8=55296,A8=57343;function u0(n){const e=n.charCodeAt(0);return e>=b8&&e<=A8}function qu(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}function MP(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR="__name__";class Rs{constructor(e,t,i){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&_e(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Rs.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Rs?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=Rs.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return Ie(e.length,t.length)}static compareSegments(e,t){const i=Rs.isNumericId(e),r=Rs.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Rs.extractNumericId(e).compare(Rs.extractNumericId(t)):fT(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ao.fromString(e.substring(4,e.length-2))}}class Ze extends Rs{construct(e,t,i){return new Ze(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new Ze(t)}static emptyPath(){return new Ze([])}}const C8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Rs{construct(e,t,i){return new At(e,t,i)}static isValidIdentifier(e){return C8.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===nR}static keyField(){return new At([nR])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new he(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new he(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else h==="`"?(l=!l,r++):h!=="."||l?(i+=h,r++):(a(),r++)}if(a(),l)throw new he(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(t)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(Ze.fromString(e))}static fromName(e){return new fe(Ze.fromString(e).popFirst(5))}static empty(){return new fe(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new Ze(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OP(n,e,t){if(!t)throw new he(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function I8(n,e,t,i){if(e===!0&&i===!0)throw new he(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iR(n){if(!fe.isDocumentKey(n))throw new he(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sR(n){if(fe.isDocumentKey(n))throw new he(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function VP(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function h_(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":_e(12329,{type:typeof n})}function dg(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=h_(n);throw new he(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(n,e){const t={typeString:n};return e&&(t.value=e),t}function rd(n,e){if(!VP(n))throw new he(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(r&&typeof l!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new he(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=-62135596800,oR=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*oR);return new nt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rR)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/oR}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(rd(e,nt._jsonSchema))return new nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-rR;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nt._jsonSchemaVersion="firestore/timestamp/1.0",nt._jsonSchema={type:Jt("string",nt._jsonSchemaVersion),seconds:Jt("number"),nanoseconds:Jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new nt(0,0))}static max(){return new Ee(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=-1;class mg{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function dT(n){return n.fields.find((e=>e.kind===2))}function Ca(n){return n.fields.filter((e=>e.kind!==2))}mg.UNKNOWN_ID=-1;class Sp{constructor(e,t){this.fieldPath=e,this.kind=t}}class xf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new xf(0,hi.min())}}function R8(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Ee.fromTimestamp(i===1e9?new nt(t+1,0):new nt(t,i));return new hi(r,fe.empty(),e)}function kP(n){return new hi(n.readTime,n.key,Rf)}class hi{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new hi(Ee.min(),fe.empty(),Rf)}static max(){return new hi(Ee.max(),fe.empty(),Rf)}}function hS(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(n.documentKey,e.documentKey),t!==0?t:Ie(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class UP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==LP)throw n;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,i)=>{t(e)}))}static reject(e){return new G(((t,i)=>{i(e)}))}static waitFor(e){return new G(((t,i)=>{let r=0,a=0,l=!1;e.forEach((h=>{++r,h.next((()=>{++a,l&&a===r&&t()}),(f=>i(f)))})),l=!0,a===r&&t()}))}static or(e){let t=G.resolve(!1);for(const i of e)t=t.next((r=>r?G.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new G(((i,r)=>{const a=e.length,l=new Array(a);let h=0;for(let f=0;f<a;f++){const d=f;t(e[d]).next((g=>{l[d]=g,++h,h===a&&i(l)}),(g=>r(g)))}}))}static doWhile(e,t){return new G(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="SimpleDb";class f_{static open(e,t,i,r){try{return new f_(t,e.transaction(r,i))}catch(a){throw new ef(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new mr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ef(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=fS(i.target.error);this.S.reject(new ef(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(le(ai,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new D8(t)}}class Co{static delete(e){return le(ai,"Removing database:",e),xa(SD().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!ND())return!1;if(Co.F())return!0;const e=rn(),t=Co.M(e),i=0<t&&t<10,r=FP(e),a=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||a)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,Co.M(rn())===12.2&&Vn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(le(ai,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=a=>{const l=a.target.result;t(l)},r.onblocked=()=>{i(new ef(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=a=>{const l=a.target.error;l.name==="VersionError"?i(new he(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new he(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new ef(e,l))},r.onupgradeneeded=a=>{le(ai,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.N.k(l,r.transaction,a.oldVersion,this.version).next((()=>{le(ai,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,r){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const h=f_.open(this.db,e,a?"readonly":"readwrite",i),f=r(h).next((d=>(h.C(),d))).catch((d=>(h.abort(d),G.reject(d)))).toPromise();return f.catch((()=>{})),await h.D,f}catch(h){const f=h,d=f.name!=="FirebaseError"&&l<3;if(le(ai,"Transaction failed with error:",f.message,"Retrying:",d),this.close(),!d)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function FP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class x8{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return xa(this.U.delete())}}class ef extends he{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function zo(n){return n.name==="IndexedDbTransactionError"}class D8{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(le(ai,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(le(ai,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),xa(i)}add(e){return le(ai,"ADD",this.store.name,e,e),xa(this.store.add(e))}get(e){return xa(this.store.get(e)).next((t=>(t===void 0&&(t=null),le(ai,"GET",this.store.name,e,t),t)))}delete(e){return le(ai,"DELETE",this.store.name,e),xa(this.store.delete(e))}count(){return le(ai,"COUNT",this.store.name),xa(this.store.count())}J(e,t){const i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const a=r.getAll(i.range);return new G(((l,h)=>{a.onerror=f=>{h(f.target.error)},a.onsuccess=f=>{l(f.target.result)}}))}{const a=this.cursor(i),l=[];return this.H(a,((h,f)=>{l.push(f)})).next((()=>l))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new G(((r,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{r(l.target.result)}}))}Z(e,t){le(ai,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const r=this.cursor(i);return this.H(r,((a,l,h)=>h.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.H(r,t)}te(e){const t=this.cursor({});return new G(((i,r)=>{t.onerror=a=>{const l=fS(a.target.error);r(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((h=>{h?l.continue():i()})):i()}}))}H(e,t){const i=[];return new G(((r,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void r();const f=new x8(h),d=t(h.primaryKey,h.value,f);if(d instanceof G){const g=d.catch((y=>(f.done(),G.reject(y))));i.push(g)}f.isDone?r():f.G===null?h.continue():h.continue(f.G)}})).next((()=>G.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xa(n){return new G(((e,t)=>{n.onsuccess=i=>{const r=i.target.result;e(r)},n.onerror=i=>{const r=fS(i.target.error);t(r)}}))}let aR=!1;function fS(n){const e=Co.M(rn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new he("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aR||(aR=!0,setTimeout((()=>{throw i}),0)),i}}return n}const tf="IndexBackfiller";class N8{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){le(tf,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();le(tf,`Documents written: ${t}`)}catch(t){zo(t)?le(tf,"Ignoring IndexedDB error during index backfill: ",t):await cl(t)}await this.re(6e4)}))}}class P8{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let r=t,a=!0;return G.doWhile((()=>a===!0&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!i.has(l))return le(tf,`Processing collection: ${l}`),this.oe(e,l,r).next((h=>{r-=h,i.add(l)}));a=!1})))).next((()=>t-r))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(r,a))).next((h=>(le(tf,`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h)))).next((()=>l.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((r,a)=>{const l=kP(a);hS(l,i)>0&&(i=l)})),new hi(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Di.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=-1;function d_(n){return n==null}function Df(n){return n===0&&1/n==-1/0}function M8(n){return typeof n=="number"&&Number.isInteger(n)&&!Df(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="";function xn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lR(e)),e=O8(n.get(t),e);return lR(e)}function O8(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case pg:t+="";break;default:t+=a}}return t}function lR(n){return n+pg+""}function Ds(n){const e=n.length;if(ve(e>=2,64408,{path:n}),e===2)return ve(n.charAt(0)===pg&&n.charAt(1)==="",56145,{path:n}),Ze.emptyPath();const t=e-2,i=[];let r="";for(let a=0;a<e;){const l=n.indexOf(pg,a);switch((l<0||l>t)&&_e(50515,{path:n}),n.charAt(l+1)){case"":const h=n.substring(a,l);let f;r.length===0?f=h:(r+=h,f=r,r=""),i.push(f);break;case"":r+=n.substring(a,l),r+="\0";break;case"":r+=n.substring(a,l+1);break;default:_e(61167,{path:n})}a=l+2}return new Ze(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="remoteDocuments",od="owner",su="owner",Nf="mutationQueues",V8="userId",Qi="mutations",uR="batchId",Va="userMutationsIndex",cR=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(n,e){return[n,xn(e)]}function BP(n,e,t){return[n,xn(e),t]}const k8={},Hu="documentMutations",gg="remoteDocumentsV14",L8=["prefixPath","collectionGroup","readTime","documentId"],bp="documentKeyIndex",U8=["prefixPath","collectionGroup","documentId"],zP="collectionGroupIndex",F8=["collectionGroup","readTime","prefixPath","documentId"],Pf="remoteDocumentGlobal",mT="remoteDocumentGlobalKey",Gu="targets",jP="queryTargetsIndex",B8=["canonicalId","targetId"],Ku="targetDocuments",z8=["targetId","path"],dS="documentTargetsIndex",j8=["path","targetId"],_g="targetGlobalKey",za="targetGlobal",Mf="collectionParents",q8=["collectionId","parent"],$u="clientMetadata",H8="clientId",m_="bundles",G8="bundleId",p_="namedQueries",K8="name",mS="indexConfiguration",$8="indexId",pT="collectionGroupIndex",Y8="collectionGroup",nf="indexState",W8=["indexId","uid"],qP="sequenceNumberIndex",Q8=["uid","sequenceNumber"],sf="indexEntries",X8=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],HP="documentKeyIndex",J8=["indexId","uid","orderedDocumentKey"],g_="documentOverlays",Z8=["userId","collectionPath","documentId"],gT="collectionPathOverlayIndex",e7=["userId","collectionPath","largestBatchId"],GP="collectionGroupOverlayIndex",t7=["userId","collectionGroup","largestBatchId"],pS="globals",n7="name",KP=[Nf,Qi,Hu,Ia,Gu,od,za,Ku,$u,Pf,Mf,m_,p_],i7=[...KP,g_],$P=[Nf,Qi,Hu,gg,Gu,od,za,Ku,$u,Pf,Mf,m_,p_,g_],YP=$P,gS=[...YP,mS,nf,sf],s7=gS,WP=[...gS,pS],r7=WP;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T extends UP{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function an(n,e){const t=Re(n);return Co.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function QP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){this.comparator=e,this.root=t||wn.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,wn.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,wn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new np(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new np(this.root,e,this.comparator,!1)}getReverseIterator(){return new np(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new np(this.root,e,this.comparator,!0)}}class np{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class wn{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??wn.RED,this.left=r??wn.EMPTY,this.right=a??wn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new wn(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return wn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return wn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,wn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,wn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}wn.EMPTY=null,wn.RED=!0,wn.BLACK=!1;wn.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new wn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fR(this.data.getIterator())}getIteratorFrom(e){return new fR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new at(this.comparator);return t.data=e,t}}class fR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ru(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new Ni([])}unionWith(e){let t=new at(At.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ni(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qu(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new XP("Invalid base64 string: "+a):a}})(e);return new en(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const o7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sr(n){if(ve(!!n,39018),typeof n=="string"){let e=0;const t=o7.exec(n);if(ve(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wr(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="server_timestamp",ZP="__type__",eM="__previous_value__",tM="__local_write_time__";function _S(n){return(n?.mapValue?.fields||{})[ZP]?.stringValue===JP}function __(n){const e=n.mapValue.fields[eM];return _S(e)?__(e):e}function Of(n){const e=Sr(n.mapValue.fields[tM].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7{constructor(e,t,i,r,a,l,h,f,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=g}}const yg="(default)";class tl{constructor(e,t){this.projectId=e,this.database=t||yg}static empty(){return new tl("","")}get isDefaultDatabase(){return this.database===yg}isEqual(e){return e instanceof tl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="__type__",nM="__max__",To={mapValue:{fields:{__type__:{stringValue:nM}}}},vS="__vector__",Yu="value",Ap={nullValue:"NULL_VALUE"};function Mo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_S(n)?4:iM(n)?9007199254740991:y_(n)?10:11:_e(28295,{value:n})}function Fs(n,e){if(n===e)return!0;const t=Mo(n);if(t!==Mo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Of(n).isEqual(Of(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=Sr(r.timestampValue),h=Sr(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return wr(r.bytesValue).isEqual(wr(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return St(r.geoPointValue.latitude)===St(a.geoPointValue.latitude)&&St(r.geoPointValue.longitude)===St(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return St(r.integerValue)===St(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=St(r.doubleValue),h=St(a.doubleValue);return l===h?Df(l)===Df(h):isNaN(l)&&isNaN(h)}return!1})(n,e);case 9:return qu(n.arrayValue.values||[],e.arrayValue.values||[],Fs);case 10:case 11:return(function(r,a){const l=r.mapValue.fields||{},h=a.mapValue.fields||{};if(hR(l)!==hR(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!Fs(l[f],h[f])))return!1;return!0})(n,e);default:return _e(52216,{left:n})}}function Vf(n,e){return(n.values||[]).find((t=>Fs(t,e)))!==void 0}function Oo(n,e){if(n===e)return 0;const t=Mo(n),i=Mo(e);if(t!==i)return Ie(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const h=St(a.integerValue||a.doubleValue),f=St(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1})(n,e);case 3:return dR(n.timestampValue,e.timestampValue);case 4:return dR(Of(n),Of(e));case 5:return fT(n.stringValue,e.stringValue);case 6:return(function(a,l){const h=wr(a),f=wr(l);return h.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const h=a.split("/"),f=l.split("/");for(let d=0;d<h.length&&d<f.length;d++){const g=Ie(h[d],f[d]);if(g!==0)return g}return Ie(h.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const h=Ie(St(a.latitude),St(l.latitude));return h!==0?h:Ie(St(a.longitude),St(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return mR(n.arrayValue,e.arrayValue);case 10:return(function(a,l){const h=a.fields||{},f=l.fields||{},d=h[Yu]?.arrayValue,g=f[Yu]?.arrayValue,y=Ie(d?.values?.length||0,g?.values?.length||0);return y!==0?y:mR(d,g)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===To.mapValue&&l===To.mapValue)return 0;if(a===To.mapValue)return 1;if(l===To.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),d=l.fields||{},g=Object.keys(d);f.sort(),g.sort();for(let y=0;y<f.length&&y<g.length;++y){const v=fT(f[y],g[y]);if(v!==0)return v;const w=Oo(h[f[y]],d[g[y]]);if(w!==0)return w}return Ie(f.length,g.length)})(n.mapValue,e.mapValue);default:throw _e(23264,{he:t})}}function dR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ie(n,e);const t=Sr(n),i=Sr(e),r=Ie(t.seconds,i.seconds);return r!==0?r:Ie(t.nanos,i.nanos)}function mR(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=Oo(t[r],i[r]);if(a)return a}return Ie(t.length,i.length)}function Wu(n){return yT(n)}function yT(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Sr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return wr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return fe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=yT(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const l of i)a?a=!1:r+=",",r+=`${l}:${yT(t.fields[l])}`;return r+"}"})(n.mapValue):_e(61005,{value:n})}function Cp(n){switch(Mo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__(n);return e?16+Cp(e):16;case 5:return 2*n.stringValue.length;case 6:return wr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+Cp(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return hl(i.fields,((a,l)=>{r+=a.length+Cp(l)})),r})(n.mapValue);default:throw _e(13486,{value:n})}}function kf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vT(n){return!!n&&"integerValue"in n}function Lf(n){return!!n&&"arrayValue"in n}function pR(n){return!!n&&"nullValue"in n}function gR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ip(n){return!!n&&"mapValue"in n}function y_(n){return(n?.mapValue?.fields||{})[yS]?.stringValue===vS}function rf(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return hl(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=rf(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rf(n.arrayValue.values[t]);return e}return{...n}}function iM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nM}const sM={mapValue:{fields:{[yS]:{stringValue:vS},[Yu]:{arrayValue:{}}}}};function l7(n){return"nullValue"in n?Ap:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?kf(tl.empty(),fe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?y_(n)?sM:{mapValue:{}}:_e(35942,{value:n})}function u7(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?kf(tl.empty(),fe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?sM:"mapValue"in n?y_(n)?{mapValue:{}}:To:_e(61959,{value:n})}function _R(n,e){const t=Oo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function yR(n,e){const t=Oo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.value=e}static empty(){return new Kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ip(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rf(t)}setAll(e){let t=At.emptyPath(),i={},r=[];e.forEach(((l,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,i,r),i={},r=[],t=h.popLast()}l?i[h.lastSegment()]=rf(l):r.push(h.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());Ip(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Ip(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){hl(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new Kn(rf(this.value))}}function rM(n){const e=[];return hl(n.fields,((t,i)=>{const r=new At([t]);if(Ip(i)){const a=rM(i.mapValue).fields;if(a.length===0)e.push(r);else for(const l of a)e.push(r.child(l))}else e.push(r)})),new Ni(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,t,i,r,a,l,h){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Pt(e,0,Ee.min(),Ee.min(),Ee.min(),Kn.empty(),0)}static newFoundDocument(e,t,i,r){return new Pt(e,1,t,Ee.min(),i,r,0)}static newNoDocument(e,t){return new Pt(e,2,t,Ee.min(),Ee.min(),Kn.empty(),0)}static newUnknownDocument(e,t){return new Pt(e,3,t,Ee.min(),Ee.min(),Kn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t){this.position=e,this.inclusive=t}}function vR(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],l=n.position[r];if(a.field.isKeyField()?i=fe.comparator(fe.fromName(l.referenceValue),t.key):i=Oo(l,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function TR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fs(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,t="asc"){this.field=e,this.dir=t}}function c7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{}class Ge extends oM{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new h7(e,t,i):t==="array-contains"?new m7(e,i):t==="in"?new fM(e,i):t==="not-in"?new p7(e,i):t==="array-contains-any"?new g7(e,i):new Ge(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new f7(e,i):new d7(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Oo(t,this.value)):t!==null&&Mo(this.value)===Mo(t)&&this.matchesComparison(Oo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ot extends oM{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ot(e,t)}matches(e){return Xu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Xu(n){return n.op==="and"}function TT(n){return n.op==="or"}function TS(n){return aM(n)&&Xu(n)}function aM(n){for(const e of n.filters)if(e instanceof ot)return!1;return!0}function ET(n){if(n instanceof Ge)return n.field.canonicalString()+n.op.toString()+Wu(n.value);if(TS(n))return n.filters.map((e=>ET(e))).join(",");{const e=n.filters.map((t=>ET(t))).join(",");return`${n.op}(${e})`}}function lM(n,e){return n instanceof Ge?(function(i,r){return r instanceof Ge&&i.op===r.op&&i.field.isEqual(r.field)&&Fs(i.value,r.value)})(n,e):n instanceof ot?(function(i,r){return r instanceof ot&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,l,h)=>a&&lM(l,r.filters[h])),!0):!1})(n,e):void _e(19439)}function uM(n,e){const t=n.filters.concat(e);return ot.create(t,n.op)}function cM(n){return n instanceof Ge?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wu(t.value)}`})(n):n instanceof ot?(function(t){return t.op.toString()+" {"+t.getFilters().map(cM).join(" ,")+"}"})(n):"Filter"}class h7 extends Ge{constructor(e,t,i){super(e,t,i),this.key=fe.fromName(i.referenceValue)}matches(e){const t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class f7 extends Ge{constructor(e,t){super(e,"in",t),this.keys=hM("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class d7 extends Ge{constructor(e,t){super(e,"not-in",t),this.keys=hM("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function hM(n,e){return(e.arrayValue?.values||[]).map((t=>fe.fromName(t.referenceValue)))}class m7 extends Ge{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lf(t)&&Vf(t.arrayValue,this.value)}}class fM extends Ge{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vf(this.value.arrayValue,t)}}class p7 extends Ge{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vf(this.value.arrayValue,t)}}class g7 extends Ge{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Vf(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e,t=null,i=[],r=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=l,this.endAt=h,this.Te=null}}function ST(n,e=null,t=[],i=[],r=null,a=null,l=null){return new _7(n,e,t,i,r,a,l)}function nl(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>ET(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),d_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Wu(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Wu(i))).join(",")),e.Te=t}return e.Te}function ad(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!c7(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!lM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!TR(n.startAt,e.startAt)&&TR(n.endAt,e.endAt)}function Tg(n){return fe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Eg(n,e){return n.filters.filter((t=>t instanceof Ge&&t.field.isEqual(e)))}function ER(n,e,t){let i=Ap,r=!0;for(const a of Eg(n,e)){let l=Ap,h=!0;switch(a.op){case"<":case"<=":l=l7(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=Ap}_R({value:i,inclusive:r},{value:l,inclusive:h})<0&&(i=l,r=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];_R({value:i,inclusive:r},{value:l,inclusive:t.inclusive})<0&&(i=l,r=t.inclusive);break}}return{value:i,inclusive:r}}function SR(n,e,t){let i=To,r=!0;for(const a of Eg(n,e)){let l=To,h=!0;switch(a.op){case">=":case">":l=u7(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=To}yR({value:i,inclusive:r},{value:l,inclusive:h})>0&&(i=l,r=h)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];yR({value:i,inclusive:r},{value:l,inclusive:t.inclusive})>0&&(i=l,r=t.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t=null,i=[],r=[],a=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function y7(n,e,t,i,r,a,l,h){return new ld(n,e,t,i,r,a,l,h)}function ES(n){return new ld(n)}function wR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dM(n){return n.collectionGroup!==null}function of(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new at(At.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(h=h.add(d.field))}))})),h})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new vg(a,i))})),t.has(At.keyField().canonicalString())||e.Ie.push(new vg(At.keyField(),i))}return e.Ie}function Mi(n){const e=Re(n);return e.Ee||(e.Ee=v7(e,of(n))),e.Ee}function v7(n,e){if(n.limitType==="F")return ST(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new vg(r.field,a)}));const t=n.endAt?new Qu(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Qu(n.startAt.position,n.startAt.inclusive):null;return ST(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function wT(n,e){const t=n.filters.concat([e]);return new ld(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bT(n,e,t){return new ld(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function v_(n,e){return ad(Mi(n),Mi(e))&&n.limitType===e.limitType}function mM(n){return`${nl(Mi(n))}|lt:${n.limitType}`}function du(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>cM(r))).join(", ")}]`),d_(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>Wu(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>Wu(r))).join(",")),`Target(${i})`})(Mi(n))}; limitType=${n.limitType})`}function ud(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):fe.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of of(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(l,h,f){const d=vR(l,h,f);return l.inclusive?d<=0:d<0})(i.startAt,of(i),r)||i.endAt&&!(function(l,h,f){const d=vR(l,h,f);return l.inclusive?d>=0:d>0})(i.endAt,of(i),r))})(n,e)}function T7(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pM(n){return(e,t)=>{let i=!1;for(const r of of(n)){const a=E7(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function E7(n,e,t){const i=n.field.isKeyField()?fe.comparator(e.key,t.key):(function(a,l,h){const f=l.data.field(a),d=h.data.field(a);return f!==null&&d!==null?Oo(f,d):_e(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return _e(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){hl(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return QP(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7=new bt(fe.comparator);function ui(){return S7}const gM=new bt(fe.comparator);function jh(...n){let e=gM;for(const t of n)e=e.insert(t.key,t);return e}function _M(n){let e=gM;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ns(){return af()}function yM(){return af()}function af(){return new xr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const w7=new bt(fe.comparator),b7=new at(fe.comparator);function ke(...n){let e=b7;for(const t of n)e=e.add(t);return e}const A7=new at(Ie);function C7(){return A7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Df(e)?"-0":e}}function vM(n){return{integerValue:""+n}}function I7(n,e){return M8(e)?vM(e):SS(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this._=void 0}}function R7(n,e,t){return n instanceof Ju?(function(r,a){const l={fields:{[ZP]:{stringValue:JP},[tM]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&_S(a)&&(a=__(a)),a&&(l.fields[eM]=a),{mapValue:l}})(t,e):n instanceof Zu?EM(n,e):n instanceof ec?SM(n,e):(function(r,a){const l=TM(r,a),h=bR(l)+bR(r.Ae);return vT(l)&&vT(r.Ae)?vM(h):SS(r.serializer,h)})(n,e)}function x7(n,e,t){return n instanceof Zu?EM(n,e):n instanceof ec?SM(n,e):t}function TM(n,e){return n instanceof Uf?(function(i){return vT(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Ju extends T_{}class Zu extends T_{constructor(e){super(),this.elements=e}}function EM(n,e){const t=wM(e);for(const i of n.elements)t.some((r=>Fs(r,i)))||t.push(i);return{arrayValue:{values:t}}}class ec extends T_{constructor(e){super(),this.elements=e}}function SM(n,e){let t=wM(e);for(const i of n.elements)t=t.filter((r=>!Fs(r,i)));return{arrayValue:{values:t}}}class Uf extends T_{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function bR(n){return St(n.integerValue||n.doubleValue)}function wM(n){return Lf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,t){this.field=e,this.transform=t}}function D7(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Zu&&r instanceof Zu||i instanceof ec&&r instanceof ec?qu(i.elements,r.elements,Fs):i instanceof Uf&&r instanceof Uf?Fs(i.Ae,r.Ae):i instanceof Ju&&r instanceof Ju})(n.transform,e.transform)}class N7{constructor(e,t){this.version=e,this.transformResults=t}}class Yn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class E_{}function AM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new S_(n.key,Yn.none()):new pc(n.key,n.data,Yn.none());{const t=n.data,i=Kn.empty();let r=new at(At.comparator);for(let a of e.fields)if(!r.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?i.delete(a):i.set(a,l),r=r.add(a)}return new jo(n.key,i,new Ni(r.toArray()),Yn.none())}}function P7(n,e,t){n instanceof pc?(function(r,a,l){const h=r.value.clone(),f=CR(r.fieldTransforms,a,l.transformResults);h.setAll(f),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):n instanceof jo?(function(r,a,l){if(!Rp(r.precondition,a))return void a.convertToUnknownDocument(l.version);const h=CR(r.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(CM(r)),f.setAll(h),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(r,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function lf(n,e,t,i){return n instanceof pc?(function(a,l,h,f){if(!Rp(a.precondition,l))return h;const d=a.value.clone(),g=IR(a.fieldTransforms,f,l);return d.setAll(g),l.convertToFoundDocument(l.version,d).setHasLocalMutations(),null})(n,e,t,i):n instanceof jo?(function(a,l,h,f){if(!Rp(a.precondition,l))return h;const d=IR(a.fieldTransforms,f,l),g=l.data;return g.setAll(CM(a)),g.setAll(d),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((y=>y.field)))})(n,e,t,i):(function(a,l,h){return Rp(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h})(n,e,t)}function M7(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=TM(i.transform,r||null);a!=null&&(t===null&&(t=Kn.empty()),t.set(i.field,a))}return t||null}function AR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&qu(i,r,((a,l)=>D7(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class pc extends E_{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jo extends E_{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function CM(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function CR(n,e,t){const i=new Map;ve(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const a=n[r],l=a.transform,h=e.data.field(a.field);i.set(a.field,x7(l,h,t[r]))}return i}function IR(n,e,t){const i=new Map;for(const r of n){const a=r.transform,l=t.data.field(r.field);i.set(r.field,R7(a,l,e))}return i}class S_ extends E_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IM extends E_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&P7(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=lf(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=lf(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=yM();return this.mutations.forEach((r=>{const a=e.get(r.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(r.key)?null:h;const f=AM(l,h);f!==null&&i.set(r.key,f),l.isValidDocument()||l.convertToNoDocument(Ee.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ke())}isEqual(e){return this.batchId===e.batchId&&qu(this.mutations,e.mutations,((t,i)=>AR(t,i)))&&qu(this.baseMutations,e.baseMutations,((t,i)=>AR(t,i)))}}class bS{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){ve(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return w7})();const a=e.mutations;for(let l=0;l<a.length;l++)r=r.insert(a[l].key,i[l].version);return new bS(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,Ye;function V7(n){switch(n){case ne.OK:return _e(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return _e(15467,{code:n})}}function RM(n){if(n===void 0)return Vn("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Wt.OK:return ne.OK;case Wt.CANCELLED:return ne.CANCELLED;case Wt.UNKNOWN:return ne.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return ne.INTERNAL;case Wt.UNAVAILABLE:return ne.UNAVAILABLE;case Wt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Wt.NOT_FOUND:return ne.NOT_FOUND;case Wt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Wt.ABORTED:return ne.ABORTED;case Wt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Wt.DATA_LOSS:return ne.DATA_LOSS;default:return _e(39323,{code:n})}}(Ye=Wt||(Wt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L7=new Ao([4294967295,4294967295],0);function RR(n){const e=k7().encode(n),t=new CP;return t.update(e),new Uint8Array(t.digest())}function xR(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ao([t,i],0),new Ao([r,a],0)]}class CS{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new qh(`Invalid padding: ${t}`);if(i<0)throw new qh(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new qh(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new qh(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ao.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(Ao.fromNumber(i)));return r.compare(L7)===1&&(r=new Ao([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=RR(e),[i,r]=xR(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);if(!this.we(l))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new CS(a,r,t);return i.forEach((h=>l.insert(h))),l}insert(e){if(this.ge===0)return;const t=RR(e),[i,r]=xR(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class qh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,cd.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new w_(Ee.min(),r,new bt(Ie),ui(),ke())}}class cd{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new cd(i,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}}class xM{constructor(e,t){this.targetId=e,this.Ce=t}}class DM{constructor(e,t,i=en.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class DR{constructor(){this.ve=0,this.Fe=NR(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),t=ke(),i=ke();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:_e(38017,{changeType:a})}})),new cd(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=NR()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class U7{constructor(e){this.Ge=e,this.ze=new Map,this.je=ui(),this.Je=ip(),this.He=ip(),this.Ye=new bt(Ie)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(Tg(a))if(i===0){const l=new fe(a.path);this.et(t,l,Pt.newNoDocument(l,Ee.min()))}else ve(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const h=this.ut(e),f=h?this.ct(h,e,l):1;if(f!==0){this.it(t);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let l,h;try{l=wr(i).toUint8Array()}catch(f){if(f instanceof XP)return If("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new CS(l,r,a)}catch(f){return If(f instanceof qh?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.ge===0?null:h}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const l=this.Ge.ht(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const h=this.ot(l);if(h){if(a.current&&Tg(h.target)){const f=new fe(h.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,Pt.newNoDocument(f,e))}a.Be&&(t.set(l,a.ke()),a.qe())}}));let i=ke();this.He.forEach(((a,l)=>{let h=!0;l.forEachWhile((f=>{const d=this.ot(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(i=i.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const r=new w_(e,t,this.Ye,this.je,i);return this.je=ui(),this.Je=ip(),this.He=ip(),this.Ye=new bt(Ie),r}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new DR,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new at(Ie),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new at(Ie),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new DR),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ip(){return new bt(fe.comparator)}function NR(){return new bt(fe.comparator)}const F7={asc:"ASCENDING",desc:"DESCENDING"},B7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z7={and:"AND",or:"OR"};class j7{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function AT(n,e){return n.useProto3Json||d_(e)?e:{value:e}}function tc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function q7(n,e){return tc(n,e.toTimestamp())}function Ln(n){return ve(!!n,49232),Ee.fromTimestamp((function(t){const i=Sr(t);return new nt(i.seconds,i.nanos)})(n))}function IS(n,e){return CT(n,e).canonicalString()}function CT(n,e){const t=(function(r){return new Ze(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function PM(n){const e=Ze.fromString(n);return ve(zM(e),10190,{key:e.toString()}),e}function Sg(n,e){return IS(n.databaseId,e.path)}function ja(n,e){const t=PM(e);if(t.get(1)!==n.databaseId.projectId)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new fe(VM(t))}function MM(n,e){return IS(n.databaseId,e)}function OM(n){const e=PM(n);return e.length===4?Ze.emptyPath():VM(e)}function IT(n){return new Ze(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function VM(n){return ve(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function PR(n,e,t){return{name:Sg(n,e),fields:t.value.mapValue.fields}}function H7(n,e,t){const i=ja(n,e.name),r=Ln(e.updateTime),a=e.createTime?Ln(e.createTime):Ee.min(),l=new Kn({mapValue:{fields:e.fields}}),h=Pt.newFoundDocument(i,r,a,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function G7(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:_e(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(d,g){return d.useProto3Json?(ve(g===void 0||typeof g=="string",58123),en.fromBase64String(g||"")):(ve(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),en.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&(function(d){const g=d.code===void 0?ne.UNKNOWN:RM(d.code);return new he(g,d.message||"")})(l);t=new DM(i,r,a,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ja(n,i.document.name),a=Ln(i.document.updateTime),l=i.document.createTime?Ln(i.document.createTime):Ee.min(),h=new Kn({mapValue:{fields:i.document.fields}}),f=Pt.newFoundDocument(r,a,l,h),d=i.targetIds||[],g=i.removedTargetIds||[];t=new xp(d,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ja(n,i.document),a=i.readTime?Ln(i.readTime):Ee.min(),l=Pt.newNoDocument(r,a),h=i.removedTargetIds||[];t=new xp([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ja(n,i.document),a=i.removedTargetIds||[];t=new xp([],a,r,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,l=new O7(r,a),h=i.targetId;t=new xM(h,l)}}return t}function wg(n,e){let t;if(e instanceof pc)t={update:PR(n,e.key,e.value)};else if(e instanceof S_)t={delete:Sg(n,e.key)};else if(e instanceof jo)t={update:PR(n,e.key,e.data),updateMask:X7(e.fieldMask)};else{if(!(e instanceof IM))return _e(16599,{Vt:e.type});t={verify:Sg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,l){const h=l.transform;if(h instanceof Ju)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Zu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof ec)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Uf)return{fieldPath:l.field.canonicalString(),increment:h.Ae};throw _e(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:q7(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:_e(27497)})(n,e.precondition)),t}function RT(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?Yn.updateTime(Ln(a.updateTime)):a.exists!==void 0?Yn.exists(a.exists):Yn.none()})(e.currentDocument):Yn.none(),i=e.updateTransforms?e.updateTransforms.map((r=>(function(l,h){let f=null;if("setToServerValue"in h)ve(h.setToServerValue==="REQUEST_TIME",16630,{proto:h}),f=new Ju;else if("appendMissingElements"in h){const g=h.appendMissingElements.values||[];f=new Zu(g)}else if("removeAllFromArray"in h){const g=h.removeAllFromArray.values||[];f=new ec(g)}else"increment"in h?f=new Uf(l,h.increment):_e(16584,{proto:h});const d=At.fromServerFormat(h.fieldPath);return new bM(d,f)})(n,r))):[];if(e.update){e.update.name;const r=ja(n,e.update.name),a=new Kn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const d=f.fieldPaths||[];return new Ni(d.map((g=>At.fromServerFormat(g))))})(e.updateMask);return new jo(r,a,l,t,i)}return new pc(r,a,t,i)}if(e.delete){const r=ja(n,e.delete);return new S_(r,t)}if(e.verify){const r=ja(n,e.verify);return new IM(r,t)}return _e(1463,{proto:e})}function K7(n,e){return n&&n.length>0?(ve(e!==void 0,14353),n.map((t=>(function(r,a){let l=r.updateTime?Ln(r.updateTime):Ln(a);return l.isEqual(Ee.min())&&(l=Ln(a)),new N7(l,r.transformResults||[])})(t,e)))):[]}function kM(n,e){return{documents:[MM(n,e.path)]}}function LM(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=MM(n,r);const a=(function(d){if(d.length!==0)return BM(ot.create(d,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(d){if(d.length!==0)return d.map((g=>(function(v){return{field:mu(v.field),direction:Y7(v.dir)}})(g)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=AT(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:r}}function UM(n){let e=OM(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){ve(i===1,65062);const g=t.from[0];g.allDescendants?r=g.collectionId:e=e.child(g.collectionId)}let a=[];t.where&&(a=(function(y){const v=FM(y);return v instanceof ot&&TS(v)?v.getFilters():[v]})(t.where));let l=[];t.orderBy&&(l=(function(y){return y.map((v=>(function(C){return new vg(pu(C.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(v)))})(t.orderBy));let h=null;t.limit&&(h=(function(y){let v;return v=typeof y=="object"?y.value:y,d_(v)?null:v})(t.limit));let f=null;t.startAt&&(f=(function(y){const v=!!y.before,w=y.values||[];return new Qu(w,v)})(t.startAt));let d=null;return t.endAt&&(d=(function(y){const v=!y.before,w=y.values||[];return new Qu(w,v)})(t.endAt)),y7(e,r,l,a,h,"F",f,d)}function $7(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function FM(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=pu(t.unaryFilter.field);return Ge.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=pu(t.unaryFilter.field);return Ge.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=pu(t.unaryFilter.field);return Ge.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=pu(t.unaryFilter.field);return Ge.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ge.create(pu(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ot.create(t.compositeFilter.filters.map((i=>FM(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(n):_e(30097,{filter:n})}function Y7(n){return F7[n]}function W7(n){return B7[n]}function Q7(n){return z7[n]}function mu(n){return{fieldPath:n.canonicalString()}}function pu(n){return At.fromServerFormat(n.fieldPath)}function BM(n){return n instanceof Ge?(function(t){if(t.op==="=="){if(gR(t.value))return{unaryFilter:{field:mu(t.field),op:"IS_NAN"}};if(pR(t.value))return{unaryFilter:{field:mu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(gR(t.value))return{unaryFilter:{field:mu(t.field),op:"IS_NOT_NAN"}};if(pR(t.value))return{unaryFilter:{field:mu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mu(t.field),op:W7(t.op),value:t.value}}})(n):n instanceof ot?(function(t){const i=t.getFilters().map((r=>BM(r)));return i.length===1?i[0]:{compositeFilter:{op:Q7(t.op),filters:i}}})(n):_e(54877,{filter:n})}function X7(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function zM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,t,i,r,a=Ee.min(),l=Ee.min(),h=en.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e){this.yt=e}}function J7(n,e){let t;if(e.document)t=H7(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=fe.fromSegments(e.noDocument.path),r=sl(e.noDocument.readTime);t=Pt.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _e(56709);{const i=fe.fromSegments(e.unknownDocument.path),r=sl(e.unknownDocument.version);t=Pt.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime((function(r){const a=new nt(r[0],r[1]);return Ee.fromTimestamp(a)})(e.readTime)),t}function MR(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:bg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(a,l){return{name:Sg(a,l.key),fields:l.data.value.mapValue.fields,updateTime:tc(a,l.version.toTimestamp()),createTime:tc(a,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:il(e.version)};else{if(!e.isUnknownDocument())return _e(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:il(e.version)}}return i}function bg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function il(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sl(n){const e=new nt(n.seconds,n.nanoseconds);return Ee.fromTimestamp(e)}function Da(n,e){const t=(e.baseMutations||[]).map((a=>RT(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const h=e.mutations[a+1];l.updateTransforms=h.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const i=e.mutations.map((a=>RT(n.yt,a))),r=nt.fromMillis(e.localWriteTimeMs);return new wS(e.batchId,r,t,i)}function Hh(n){const e=sl(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?sl(n.lastLimboFreeSnapshotVersion):Ee.min();let i;return i=(function(a){return a.documents!==void 0})(n.query)?(function(a){const l=a.documents.length;return ve(l===1,1966,{count:l}),Mi(ES(OM(a.documents[0])))})(n.query):(function(a){return Mi(UM(a))})(n.query),new cr(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,en.fromBase64String(n.resumeToken))}function qM(n,e){const t=il(e.snapshotVersion),i=il(e.lastLimboFreeSnapshotVersion);let r;r=Tg(e.target)?kM(n.yt,e.target):LM(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:nl(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function HM(n){const e=UM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?bT(e,e.limit,"L"):e}function c0(n,e){return new AS(e.largestBatchId,RT(n.yt,e.overlayMutation))}function OR(n,e){const t=e.path.lastSegment();return[n,xn(e.path.popLast()),t]}function VR(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:il(i.readTime),documentKey:xn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{getBundleMetadata(e,t){return kR(e).get(t).next((i=>{if(i)return(function(a){return{id:a.bundleId,createTime:sl(a.createTime),version:a.version}})(i)}))}saveBundleMetadata(e,t){return kR(e).put((function(r){return{bundleId:r.id,createTime:il(Ln(r.createTime)),version:r.version}})(t))}getNamedQuery(e,t){return LR(e).get(t).next((i=>{if(i)return(function(a){return{name:a.name,query:HM(a.bundledQuery),readTime:sl(a.readTime)}})(i)}))}saveNamedQuery(e,t){return LR(e).put((function(r){return{name:r.name,readTime:il(Ln(r.readTime)),bundledQuery:r.bundledQuery}})(t))}}function kR(n){return an(n,m_)}function LR(n){return an(n,p_)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new b_(e,i)}getOverlay(e,t){return Ph(e).get(OR(this.userId,t)).next((i=>i?c0(this.serializer,i):null))}getOverlays(e,t){const i=Ns();return G.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){const r=[];return i.forEach(((a,l)=>{const h=new AS(t,l);r.push(this.St(e,h))})),G.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach((l=>r.add(xn(l.getCollectionPath()))));const a=[];return r.forEach((l=>{const h=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);a.push(Ph(e).Z(gT,h))})),G.waitFor(a)}getOverlaysForCollection(e,t,i){const r=Ns(),a=xn(t),l=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ph(e).J(gT,l).next((h=>{for(const f of h){const d=c0(this.serializer,f);r.set(d.getKey(),d)}return r}))}getOverlaysForCollectionGroup(e,t,i,r){const a=Ns();let l;const h=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ph(e).ee({index:GP,range:h},((f,d,g)=>{const y=c0(this.serializer,d);a.size()<r||y.largestBatchId===l?(a.set(y.getKey(),y),l=y.largestBatchId):g.done()})).next((()=>a))}St(e,t){return Ph(e).put((function(r,a,l){const[h,f,d]=OR(a,l.mutation.key);return{userId:a,collectionPath:f,documentId:d,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:wg(r.yt,l.mutation)}})(this.serializer,this.userId,t))}}function Ph(n){return an(n,g_)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eq{bt(e){return an(e,pS)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?en.fromUint8Array(i):en.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(St(e.integerValue));else if("doubleValue"in e){const i=St(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Df(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=Sr(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(wr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?iM(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):y_(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):_e(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const r of Object.keys(i))this.Ot(r,t),this.Ct(i[r],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const r=Yu,a=i[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(St(a)),this.Ot(r,t),this.Ct(i[r],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const r of i)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),fe.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Na.Kt=new Na;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou=255;function tq(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function UR(n){const e=64-(function(i){let r=0;for(let a=0;a<8;++a){const l=tq(255&i[a]);if(r+=l,l!==8)break}return r})(n);return Math.ceil(e/8)}class nq{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const r=t.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const r=t.codePointAt(0);this.Jt(240|r>>>18),this.Jt(128|63&r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r)}}this.Ht()}Xt(e){const t=this.en(e),i=UR(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}nn(e){const t=this.en(e),i=UR(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}rn(){this.sn(ou),this.sn(255)}_n(){this.an(ou),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===ou?(this.sn(ou),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===ou?(this.an(ou),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class iq{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class sq{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Mh{constructor(){this.cn=new nq,this.ln=new iq(this.cn),this.hn=new sq(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t,i,r){this.Tn=e,this.In=t,this.En=i,this.dn=r}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new Pa(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:Dp(this.En),directionalValue:Dp(this.dn),orderedDocumentKey:Dp(t),documentKey:i.path.toArray()}}Vn(e,t,i){const r=this.Rn(e,t,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function co(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=FR(n.En,e.En),t!==0?t:(t=FR(n.dn,e.dn),t!==0?t:fe.comparator(n.In,e.In)))}function FR(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function Dp(n){return DD()?(function(t){let i="";for(let r=0;r<t.length;r++)i+=String.fromCharCode(t[r]);return i})(n):n}function BR(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(n)}class zR{constructor(e){this.mn=new at(((t,i)=>At.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(ve(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=dT(e);if(t!==void 0&&!this.wn(t))return!1;const i=Ca(e);let r=new Set,a=0,l=0;for(;a<i.length&&this.wn(i[a]);++a)r=r.add(i[a].fieldPath.canonicalString());if(a===i.length)return!0;if(this.mn.size>0){const h=this.mn.getIterator().getNext();if(!r.has(h.field.canonicalString())){const f=i[a];if(!this.Sn(h,f)||!this.bn(this.fn[l++],f))return!1}++a}for(;a<i.length;++a){const h=i[a];if(l>=this.fn.length||!this.bn(this.fn[l++],h))return!1}return!0}Dn(){if(this.pn)return null;let e=new at(At.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new Sp(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new Sp(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new Sp(i.field,i.dir==="asc"?0:1)));return new mg(mg.UNKNOWN_ID,this.collectionId,t,xf.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(n){if(ve(n instanceof Ge||n instanceof ot,20012),n instanceof Ge){if(n instanceof fM){const t=n.value.arrayValue?.values?.map((i=>Ge.create(n.field,"==",i)))||[];return ot.create(t,"or")}return n}const e=n.filters.map((t=>GM(t)));return ot.create(e,n.op)}function rq(n){if(n.getFilters().length===0)return[];const e=NT(GM(n));return ve(KM(e),7391),xT(e)||DT(e)?[e]:e.getFilters()}function xT(n){return n instanceof Ge}function DT(n){return n instanceof ot&&TS(n)}function KM(n){return xT(n)||DT(n)||(function(t){if(t instanceof ot&&TT(t)){for(const i of t.getFilters())if(!xT(i)&&!DT(i))return!1;return!0}return!1})(n)}function NT(n){if(ve(n instanceof Ge||n instanceof ot,34018),n instanceof Ge)return n;if(n.filters.length===1)return NT(n.filters[0]);const e=n.filters.map((i=>NT(i)));let t=ot.create(e,n.op);return t=Ag(t),KM(t)?t:(ve(t instanceof ot,64498),ve(Xu(t),40251),ve(t.filters.length>1,57927),t.filters.reduce(((i,r)=>RS(i,r))))}function RS(n,e){let t;return ve(n instanceof Ge||n instanceof ot,38388),ve(e instanceof Ge||e instanceof ot,25473),t=n instanceof Ge?e instanceof Ge?(function(r,a){return ot.create([r,a],"and")})(n,e):jR(n,e):e instanceof Ge?jR(e,n):(function(r,a){if(ve(r.filters.length>0&&a.filters.length>0,48005),Xu(r)&&Xu(a))return uM(r,a.getFilters());const l=TT(r)?r:a,h=TT(r)?a:r,f=l.filters.map((d=>RS(d,h)));return ot.create(f,"or")})(n,e),Ag(t)}function jR(n,e){if(Xu(e))return uM(e,n.getFilters());{const t=e.filters.map((i=>RS(n,i)));return ot.create(t,"or")}}function Ag(n){if(ve(n instanceof Ge||n instanceof ot,11850),n instanceof Ge)return n;const e=n.getFilters();if(e.length===1)return Ag(e[0]);if(aM(n))return n;const t=e.map((r=>Ag(r))),i=[];return t.forEach((r=>{r instanceof Ge?i.push(r):r instanceof ot&&(r.op===n.op?i.push(...r.filters):i.push(r))})),i.length===1?i[0]:ot.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{constructor(){this.Cn=new xS}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(hi.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(hi.min())}updateCollectionGroup(e,t,i){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class xS{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new at(Ze.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new at(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR="IndexedDbIndexManager",sp=new Uint8Array(0);class aq{constructor(e,t){this.databaseId=t,this.vn=new xS,this.Fn=new xr((i=>nl(i)),((i,r)=>ad(i,r))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const a={collectionId:i,parent:xn(r)};return HR(e).put(a)}return G.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[MP(t),""],!1,!0);return HR(e).J(r).next((a=>{for(const l of a){if(l.collectionId!==t)break;i.push(Ds(l.parent))}return i}))}addFieldIndex(e,t){const i=Oh(e),r=(function(h){return{indexId:h.indexId,collectionGroup:h.collectionGroup,fields:h.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete r.indexId;const a=i.add(r);if(t.indexState){const l=lu(e);return a.next((h=>{l.put(VR(h,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const i=Oh(e),r=lu(e),a=au(e);return i.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Oh(e),i=au(e),r=lu(e);return t.Z().next((()=>i.Z())).next((()=>r.Z()))}createTargetIndexes(e,t){return G.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((r=>{if(r===0||r===1){const a=new zR(i).Dn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const i=au(e);let r=!0;const a=new Map;return G.forEach(this.Mn(t),(l=>this.xn(e,l).next((h=>{r&&(r=!!h),a.set(l,h)})))).next((()=>{if(r){let l=ke();const h=[];return G.forEach(a,((f,d)=>{le(qR,`Using index ${(function(k){return`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map((Z=>`${Z.fieldPath}:${Z.kind}`)).join(",")}`})(f)} to execute ${nl(t)}`);const g=(function(k,Z){const Q=dT(Z);if(Q===void 0)return null;for(const oe of Eg(k,Q.fieldPath))switch(oe.op){case"array-contains-any":return oe.value.arrayValue.values||[];case"array-contains":return[oe.value]}return null})(d,f),y=(function(k,Z){const Q=new Map;for(const oe of Ca(Z))for(const R of Eg(k,oe.fieldPath))switch(R.op){case"==":case"in":Q.set(oe.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return Q.set(oe.fieldPath.canonicalString(),R.value),Array.from(Q.values())}return null})(d,f),v=(function(k,Z){const Q=[];let oe=!0;for(const R of Ca(Z)){const A=R.kind===0?ER(k,R.fieldPath,k.startAt):SR(k,R.fieldPath,k.startAt);Q.push(A.value),oe&&(oe=A.inclusive)}return new Qu(Q,oe)})(d,f),w=(function(k,Z){const Q=[];let oe=!0;for(const R of Ca(Z)){const A=R.kind===0?SR(k,R.fieldPath,k.endAt):ER(k,R.fieldPath,k.endAt);Q.push(A.value),oe&&(oe=A.inclusive)}return new Qu(Q,oe)})(d,f),C=this.On(f,d,v),N=this.On(f,d,w),D=this.Nn(f,d,y),U=this.Bn(f.indexId,g,C,v.inclusive,N,w.inclusive,D);return G.forEach(U,(z=>i.Y(z,t.limit).next((k=>{k.forEach((Z=>{const Q=fe.fromSegments(Z.documentKey);l.has(Q)||(l=l.add(Q),h.push(Q))}))}))))})).next((()=>h))}return G.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=rq(ot.create(e.filters,"and")).map((i=>ST(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,r,a,l,h){const f=(t!=null?t.length:1)*Math.max(i.length,a.length),d=f/(t!=null?t.length:1),g=[];for(let y=0;y<f;++y){const v=t?this.Ln(t[y/d]):sp,w=this.kn(e,v,i[y%d],r),C=this.qn(e,v,a[y%d],l),N=h.map((D=>this.kn(e,v,D,!0)));g.push(...this.createRange(w,C,N))}return g}kn(e,t,i,r){const a=new Pa(e,fe.empty(),t,i);return r?a:a.An()}qn(e,t,i,r){const a=new Pa(e,fe.empty(),t,i);return r?a.An():a}xn(e,t){const i=new zR(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((a=>{let l=null;for(const h of a)i.yn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l}))}getIndexType(e,t){let i=2;const r=this.Mn(t);return G.forEach(r,(a=>this.xn(e,a).next((l=>{l?i!==0&&l.fields.length<(function(f){let d=new at(At.comparator),g=!1;for(const y of f.filters)for(const v of y.getFlattenedFilters())v.field.isKeyField()||(v.op==="array-contains"||v.op==="array-contains-any"?g=!0:d=d.add(v.field));for(const y of f.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(g?1:0)})(a)&&(i=1):i=0})))).next((()=>(function(l){return l.limit!==null})(t)&&r.length>1&&i===2?1:i))}Qn(e,t){const i=new Mh;for(const r of Ca(e)){const a=t.data.field(r.fieldPath);if(a==null)return null;const l=i.Pn(r.kind);Na.Kt.Dt(a,l)}return i.un()}Ln(e){const t=new Mh;return Na.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new Mh;return Na.Kt.Dt(kf(this.databaseId,t),i.Pn((function(a){const l=Ca(a);return l.length===0?0:l[l.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let r=[];r.push(new Mh);let a=0;for(const l of Ca(e)){const h=i[a++];for(const f of r)if(this.Un(t,l.fieldPath)&&Lf(h))r=this.Kn(r,l,h);else{const d=f.Pn(l.kind);Na.Kt.Dt(h,d)}}return this.Wn(r)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const r=[...e],a=[];for(const l of i.arrayValue.values||[])for(const h of r){const f=new Mh;f.seed(h.un()),Na.Kt.Dt(l,f.Pn(t.kind)),a.push(f)}return a}Un(e,t){return!!e.filters.find((i=>i instanceof Ge&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Oh(e),r=lu(e);return(t?i.J(pT,IDBKeyRange.bound(t,t)):i.J()).next((a=>{const l=[];return G.forEach(a,(h=>r.get([h.indexId,this.uid]).next((f=>{l.push((function(g,y){const v=y?new xf(y.sequenceNumber,new hi(sl(y.readTime),new fe(Ds(y.documentKey)),y.largestBatchId)):xf.empty(),w=g.fields.map((([C,N])=>new Sp(At.fromServerFormat(C),N)));return new mg(g.indexId,g.collectionGroup,w,v)})(h,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,r)=>{const a=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return a!==0?a:Ie(i.collectionGroup,r.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const r=Oh(e),a=lu(e);return this.Gn(e).next((l=>r.J(pT,IDBKeyRange.bound(t,t)).next((h=>G.forEach(h,(f=>a.put(VR(f.indexId,this.uid,l,i))))))))}updateIndexEntries(e,t){const i=new Map;return G.forEach(t,((r,a)=>{const l=i.get(r.collectionGroup);return(l?G.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next((h=>(i.set(r.collectionGroup,h),G.forEach(h,(f=>this.zn(e,r,f).next((d=>{const g=this.jn(a,f);return d.isEqual(g)?G.resolve():this.Jn(e,a,f,d,g)})))))))}))}Hn(e,t,i,r){return au(e).put(r.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,r){return au(e).delete(r.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const r=au(e);let a=new at(co);return r.ee({index:HP,range:IDBKeyRange.only([i.indexId,this.uid,Dp(this.$n(i,t))])},((l,h)=>{a=a.add(new Pa(i.indexId,t,BR(h.arrayValue),BR(h.directionalValue)))})).next((()=>a))}jn(e,t){let i=new at(co);const r=this.Qn(t,e);if(r==null)return i;const a=dT(t);if(a!=null){const l=e.data.field(a.fieldPath);if(Lf(l))for(const h of l.arrayValue.values||[])i=i.add(new Pa(t.indexId,e.key,this.Ln(h),r))}else i=i.add(new Pa(t.indexId,e.key,sp,r));return i}Jn(e,t,i,r,a){le(qR,"Updating index entries for document '%s'",t.key);const l=[];return(function(f,d,g,y,v){const w=f.getIterator(),C=d.getIterator();let N=ru(w),D=ru(C);for(;N||D;){let U=!1,z=!1;if(N&&D){const k=g(N,D);k<0?z=!0:k>0&&(U=!0)}else N!=null?z=!0:U=!0;U?(y(D),D=ru(C)):z?(v(N),N=ru(w)):(N=ru(w),D=ru(C))}})(r,a,co,(h=>{l.push(this.Hn(e,t,i,h))}),(h=>{l.push(this.Yn(e,t,i,h))})),G.waitFor(l)}Gn(e){let t=1;return lu(e).ee({index:qP,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,r,a)=>{a.done(),t=r.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((l,h)=>co(l,h))).filter(((l,h,f)=>!h||co(l,f[h-1])!==0));const r=[];r.push(e);for(const l of i){const h=co(l,e),f=co(l,t);if(h===0)r[0]=e.An();else if(h>0&&f<0)r.push(l),r.push(l.An());else if(f>0)break}r.push(t);const a=[];for(let l=0;l<r.length;l+=2){if(this.Zn(r[l],r[l+1]))return[];const h=r[l].Vn(this.uid,sp,fe.empty()),f=r[l+1].Vn(this.uid,sp,fe.empty());a.push(IDBKeyRange.bound(h,f))}return a}Zn(e,t){return co(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(GR)}getMinOffset(e,t){return G.mapArray(this.Mn(t),(i=>this.xn(e,i).next((r=>r||_e(44426))))).next(GR)}}function HR(n){return an(n,Mf)}function au(n){return an(n,sf)}function Oh(n){return an(n,mS)}function lu(n){return an(n,nf)}function GR(n){ve(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;hS(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new hi(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$M=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YM(n,e,t){const i=n.store(Qi),r=n.store(Hu),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const f=i.ee({range:l},((g,y,v)=>(h++,v.delete())));a.push(f.next((()=>{ve(h===1,47070,{batchId:t.batchId})})));const d=[];for(const g of t.mutations){const y=BP(e,g.key.path,t.batchId);a.push(r.delete(y)),d.push(g.key)}return G.waitFor(a).next((()=>d))}function Cg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw _e(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In($M,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);class A_{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Xn={}}static wt(e,t,i,r){ve(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new A_(a,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ho(e).ee({index:Va,range:i},((r,a,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,i,r){const a=gu(e),l=ho(e);return l.add({}).next((h=>{ve(typeof h=="number",49019);const f=new wS(h,t,i,r),d=(function(w,C,N){const D=N.baseMutations.map((z=>wg(w.yt,z))),U=N.mutations.map((z=>wg(w.yt,z)));return{userId:C,batchId:N.batchId,localWriteTimeMs:N.localWriteTime.toMillis(),baseMutations:D,mutations:U}})(this.serializer,this.userId,f),g=[];let y=new at(((v,w)=>Ie(v.canonicalString(),w.canonicalString())));for(const v of r){const w=BP(this.userId,v.key.path,h);y=y.add(v.key.path.popLast()),g.push(l.put(d)),g.push(a.put(w,k8))}return y.forEach((v=>{g.push(this.indexManager.addToCollectionParentIndex(e,v))})),e.addOnCommittedListener((()=>{this.Xn[h]=f.keys()})),G.waitFor(g).next((()=>f))}))}lookupMutationBatch(e,t){return ho(e).get(t).next((i=>i?(ve(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),Da(this.serializer,i)):null))}er(e,t){return this.Xn[t]?G.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const r=i.keys();return this.Xn[t]=r,r}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let a=null;return ho(e).ee({index:Va,range:r},((l,h,f)=>{h.userId===this.userId&&(ve(h.batchId>=i,47524,{tr:i}),a=Da(this.serializer,h)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Ba;return ho(e).ee({index:Va,range:t,reverse:!0},((r,a,l)=>{i=a.batchId,l.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ba],[this.userId,Number.POSITIVE_INFINITY]);return ho(e).J(Va,t).next((i=>i.map((r=>Da(this.serializer,r)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=wp(this.userId,t.path),r=IDBKeyRange.lowerBound(i),a=[];return gu(e).ee({range:r},((l,h,f)=>{const[d,g,y]=l,v=Ds(g);if(d===this.userId&&t.path.isEqual(v))return ho(e).get(y).next((w=>{if(!w)throw _e(61480,{nr:l,batchId:y});ve(w.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:w.userId,batchId:y}),a.push(Da(this.serializer,w))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new at(Ie);const r=[];return t.forEach((a=>{const l=wp(this.userId,a.path),h=IDBKeyRange.lowerBound(l),f=gu(e).ee({range:h},((d,g,y)=>{const[v,w,C]=d,N=Ds(w);v===this.userId&&a.path.isEqual(N)?i=i.add(C):y.done()}));r.push(f)})),G.waitFor(r).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,a=wp(this.userId,i),l=IDBKeyRange.lowerBound(a);let h=new at(Ie);return gu(e).ee({range:l},((f,d,g)=>{const[y,v,w]=f,C=Ds(v);y===this.userId&&i.isPrefixOf(C)?C.length===r&&(h=h.add(w)):g.done()})).next((()=>this.rr(e,h)))}rr(e,t){const i=[],r=[];return t.forEach((a=>{r.push(ho(e).get(a).next((l=>{if(l===null)throw _e(35274,{batchId:a});ve(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),i.push(Da(this.serializer,l))})))})),G.waitFor(r).next((()=>i))}removeMutationBatch(e,t){return YM(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),G.forEach(i,(r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return G.resolve();const i=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),r=[];return gu(e).ee({range:i},((a,l,h)=>{if(a[0]===this.userId){const f=Ds(a[1]);r.push(f)}else h.done()})).next((()=>{ve(r.length===0,56720,{sr:r.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return WM(e,this.userId,t)}_r(e){return QM(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ba,lastStreamToken:""}))}}function WM(n,e,t){const i=wp(e,t.path),r=i[1],a=IDBKeyRange.lowerBound(i);let l=!1;return gu(n).ee({range:a,X:!0},((h,f,d)=>{const[g,y,v]=h;g===e&&y===r&&(l=!0),d.done()})).next((()=>l))}function ho(n){return an(n,Qi)}function gu(n){return an(n,Hu)}function QM(n){return an(n,Nf)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new rl(0)}static cr(){return new rl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new rl(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ee.fromTimestamp(new nt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.hr(e,r))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>uu(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(ve(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let r=0;const a=[];return uu(e).ee(((l,h)=>{const f=Hh(h);f.sequenceNumber<=t&&i.get(f.targetId)===null&&(r++,a.push(this.removeTargetData(e,f)))})).next((()=>G.waitFor(a))).next((()=>r))}forEachTarget(e,t){return uu(e).ee(((i,r)=>{const a=Hh(r);t(a)}))}lr(e){return $R(e).get(_g).next((t=>(ve(t!==null,2888),t)))}hr(e,t){return $R(e).put(_g,t)}Pr(e,t){return uu(e).put(qM(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=nl(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let a=null;return uu(e).ee({range:r,index:jP},((l,h,f)=>{const d=Hh(h);ad(t,d.target)&&(a=d,f.done())})).next((()=>a))}addMatchingKeys(e,t,i){const r=[],a=vo(e);return t.forEach((l=>{const h=xn(l.path);r.push(a.put({targetId:i,path:h})),r.push(this.referenceDelegate.addReference(e,i,l))})),G.waitFor(r)}removeMatchingKeys(e,t,i){const r=vo(e);return G.forEach(t,(a=>{const l=xn(a.path);return G.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,a)])}))}removeMatchingKeysForTargetId(e,t){const i=vo(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=vo(e);let a=ke();return r.ee({range:i,X:!0},((l,h,f)=>{const d=Ds(l[1]),g=new fe(d);a=a.add(g)})).next((()=>a))}containsKey(e,t){const i=xn(t.path),r=IDBKeyRange.bound([i],[MP(i)],!1,!0);let a=0;return vo(e).ee({index:dS,X:!0,range:r},(([l,h],f,d)=>{l!==0&&(a++,d.done())})).next((()=>a>0))}At(e,t){return uu(e).get(t).next((i=>i?Hh(i):null))}}function uu(n){return an(n,Gu)}function $R(n){return an(n,za)}function vo(n){return an(n,Ku)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR="LruGarbageCollector",XM=1048576;function WR([n,e],[t,i]){const r=Ie(n,t);return r===0?Ie(e,i):r}class uq{constructor(e){this.Ir=e,this.buffer=new at(WR),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();WR(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class JM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(YR,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zo(t)?le(YR,"Ignoring IndexedDB error during garbage collection: ",t):await cl(t)}await this.Vr(3e5)}))}}class cq{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Di.ce);const i=new uq(t);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(KR)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KR):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,a,l,h,f,d;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),r=this.params.maximumSequenceNumbersToCollect):r=y,l=Date.now(),this.nthSequenceNumber(e,r)))).next((y=>(i=y,h=Date.now(),this.removeTargets(e,i,t)))).next((y=>(a=y,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((y=>(d=Date.now(),fu()<=ze.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${r} in `+(h-l)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${y} documents in `+(d-f)+`ms
Total Duration: ${d-g}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:y}))))}}function ZM(n,e){return new cq(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hq{constructor(e,t){this.db=e,this.garbageCollector=ZM(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,r)=>t(r)))}addReference(e,t,i){return rp(e,i)}removeReference(e,t,i){return rp(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return rp(e,t)}br(e,t){return(function(r,a){let l=!1;return QM(r).te((h=>WM(r,h,a).next((f=>(f&&(l=!0),G.resolve(!f)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let a=0;return this.Sr(e,((l,h)=>{if(h<=t){const f=this.br(e,l).next((d=>{if(!d)return a++,i.getEntry(e,l).next((()=>(i.removeEntry(l,Ee.min()),vo(e).delete((function(y){return[0,xn(y.path)]})(l)))))}));r.push(f)}})).next((()=>G.waitFor(r))).next((()=>i.apply(e))).next((()=>a))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return rp(e,t)}Sr(e,t){const i=vo(e);let r,a=Di.ce;return i.ee({index:dS},(([l,h],{path:f,sequenceNumber:d})=>{l===0?(a!==Di.ce&&t(new fe(Ds(r)),a),a=d,r=f):a=Di.ce})).next((()=>{a!==Di.ce&&t(new fe(Ds(r)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rp(n,e){return vo(n).put((function(i,r){return{targetId:0,path:xn(i.path),sequenceNumber:r}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(){this.changes=new xr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?G.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fq{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Ea(e).put(i)}removeEntry(e,t,i){return Ea(e).delete((function(a,l){const h=a.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],bg(l),h[h.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=Pt.newInvalidDocument(t);return Ea(e).ee({index:bp,range:IDBKeyRange.only(Vh(t))},((r,a)=>{i=this.Cr(t,a)})).next((()=>i))}vr(e,t){let i={size:0,document:Pt.newInvalidDocument(t)};return Ea(e).ee({index:bp,range:IDBKeyRange.only(Vh(t))},((r,a)=>{i={document:this.Cr(t,a),size:Cg(a)}})).next((()=>i))}getEntries(e,t){let i=ui();return this.Fr(e,t,((r,a)=>{const l=this.Cr(r,a);i=i.insert(r,l)})).next((()=>i))}Mr(e,t){let i=ui(),r=new bt(fe.comparator);return this.Fr(e,t,((a,l)=>{const h=this.Cr(a,l);i=i.insert(a,h),r=r.insert(a,Cg(l))})).next((()=>({documents:i,Or:r})))}Fr(e,t,i){if(t.isEmpty())return G.resolve();let r=new at(JR);t.forEach((f=>r=r.add(f)));const a=IDBKeyRange.bound(Vh(r.first()),Vh(r.last())),l=r.getIterator();let h=l.getNext();return Ea(e).ee({index:bp,range:a},((f,d,g)=>{const y=fe.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;h&&JR(h,y)<0;)i(h,null),h=l.getNext();h&&h.isEqual(y)&&(i(h,d),h=l.hasNext()?l.getNext():null),h?g.j(Vh(h)):g.done()})).next((()=>{for(;h;)i(h,null),h=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,i,r,a){const l=t.path,h=[l.popLast().toArray(),l.lastSegment(),bg(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ea(e).J(IDBKeyRange.bound(h,f,!0)).next((d=>{a?.incrementDocumentReadCount(d.length);let g=ui();for(const y of d){const v=this.Cr(fe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);v.isFoundDocument()&&(ud(t,v)||r.has(v.key))&&(g=g.insert(v.key,v))}return g}))}getAllFromCollectionGroup(e,t,i,r){let a=ui();const l=XR(t,i),h=XR(t,hi.max());return Ea(e).ee({index:zP,range:IDBKeyRange.bound(l,h,!0)},((f,d,g)=>{const y=this.Cr(fe.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);a=a.insert(y.key,y),a.size===r&&g.done()})).next((()=>a))}newChangeBuffer(e){return new dq(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return QR(e).get(mT).next((t=>(ve(!!t,20021),t)))}Dr(e,t){return QR(e).put(mT,t)}Cr(e,t){if(t){const i=J7(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Ee.min())))return i}return Pt.newInvalidDocument(e)}}function tO(n){return new fq(n)}class dq extends eO{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new xr((i=>i.toString()),((i,r)=>i.isEqual(r)))}applyChanges(e){const t=[];let i=0,r=new at(((a,l)=>Ie(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const h=this.Br.get(a);if(t.push(this.Nr.removeEntry(e,a,h.readTime)),l.isValidDocument()){const f=MR(this.Nr.serializer,l);r=r.add(a.path.popLast());const d=Cg(f);i+=d-h.size,t.push(this.Nr.addEntry(e,a,f))}else if(i-=h.size,this.trackRemovals){const f=MR(this.Nr.serializer,l.convertToNoDocument(Ee.min()));t.push(this.Nr.addEntry(e,a,f))}})),r.forEach((a=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Nr.updateMetadata(e,i)),G.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:r})=>(r.forEach(((a,l)=>{this.Br.set(a,{size:l,readTime:i.get(a).readTime})})),i)))}}function QR(n){return an(n,Pf)}function Ea(n){return an(n,gg)}function Vh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function XR(n,e){const t=e.documentKey.path.toArray();return[n,bg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function JR(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let a=0;a<t.length-2&&a<i.length-2;++a)if(r=Ie(t[a],i[a]),r)return r;return r=Ie(t.length,i.length),r||(r=Ie(t[t.length-2],i[i.length-2]),r||Ie(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&lf(i.mutation,r,Ni.empty(),nt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ke()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ke()){const r=Ns();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let l=jh();return a.forEach(((h,f)=>{l=l.insert(h,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=Ns();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ke())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((l,h)=>{t.set(l,h)}))}))}computeViews(e,t,i,r){let a=ui();const l=af(),h=(function(){return af()})();return t.forEach(((f,d)=>{const g=i.get(d.key);r.has(d.key)&&(g===void 0||g.mutation instanceof jo)?a=a.insert(d.key,d):g!==void 0?(l.set(d.key,g.mutation.getFieldMask()),lf(g.mutation,d,g.mutation.getFieldMask(),nt.now())):l.set(d.key,Ni.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((d,g)=>l.set(d,g))),t.forEach(((d,g)=>h.set(d,new mq(g,l.get(d)??null)))),h)))}recalculateAndSaveOverlays(e,t){const i=af();let r=new bt(((l,h)=>l-h)),a=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const h of l)h.keys().forEach((f=>{const d=t.get(f);if(d===null)return;let g=i.get(f)||Ni.empty();g=h.applyToLocalView(d,g),i.set(f,g);const y=(r.get(h.batchId)||ke()).add(f);r=r.insert(h.batchId,y)}))})).next((()=>{const l=[],h=r.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),d=f.key,g=f.value,y=yM();g.forEach((v=>{if(!a.has(v)){const w=AM(t.get(v),i.get(v));w!==null&&y.set(v,w),a=a.add(v)}})),l.push(this.documentOverlayCache.saveOverlays(e,d,y))}return G.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(l){return fe.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const l=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):G.resolve(Ns());let h=Rf,f=a;return l.next((d=>G.forEach(d,((g,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),a.get(g)?G.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{f=f.insert(g,v)}))))).next((()=>this.populateOverlays(e,d,a))).next((()=>this.computeViews(e,f,d,ke()))).next((g=>({batchId:h,changes:_M(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next((i=>{let r=jh();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let l=jh();return this.indexManager.getCollectionParents(e,a).next((h=>G.forEach(h,(f=>{const d=(function(y,v){return new ld(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next((g=>{g.forEach(((y,v)=>{l=l.insert(y,v)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((l=>{a.forEach(((f,d)=>{const g=d.getKey();l.get(g)===null&&(l=l.insert(g,Pt.newInvalidDocument(g)))}));let h=jh();return l.forEach(((f,d)=>{const g=a.get(f);g!==void 0&&lf(g.mutation,d,Ni.empty(),nt.now()),ud(t,d)&&(h=h.insert(f,d))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Ln(r.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:HM(r.bundledQuery),readTime:Ln(r.readTime)}})(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gq{constructor(){this.overlays=new bt(fe.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ns();return G.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.St(e,t,a)})),G.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),G.resolve()}getOverlaysForCollection(e,t,i){const r=Ns(),a=t.length+1,l=new fe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,d=f.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===a&&f.largestBatchId>i&&r.set(f.getKey(),f)}return G.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new bt(((d,g)=>d-g));const l=this.overlays.getIterator();for(;l.hasNext();){const d=l.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>i){let g=a.get(d.largestBatchId);g===null&&(g=Ns(),a=a.insert(d.largestBatchId,g)),g.set(d.getKey(),d)}}const h=Ns(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,g)=>h.set(d,g))),!(h.size()>=r)););return G.resolve(h)}St(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new AS(t,i));let a=this.qr.get(t);a===void 0&&(a=ke(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _q{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(){this.Qr=new at(fn.$r),this.Ur=new at(fn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new fn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new fn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new fe(new Ze([])),i=new fn(t,e),r=new fn(t,e+1),a=[];return this.Ur.forEachInRange([i,r],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new fe(new Ze([])),i=new fn(t,e),r=new fn(t,e+1);let a=ke();return this.Ur.forEachInRange([i,r],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new fn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class fn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return fe.comparator(e.key,t.key)||Ie(e.Yr,t.Yr)}static Kr(e,t){return Ie(e.Yr,t.Yr)||fe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yq{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new at(fn.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new wS(a,t,i,r);this.mutationQueue.push(l);for(const h of r)this.Zr=this.Zr.add(new fn(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return G.resolve(l)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ei(i),a=r<0?0:r;return G.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Ba:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new fn(t,0),r=new fn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,r],(l=>{const h=this.Xr(l.Yr);a.push(h)})),G.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new at(Ie);return t.forEach((r=>{const a=new fn(r,0),l=new fn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(h=>{i=i.add(h.Yr)}))})),G.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;fe.isDocumentKey(a)||(a=a.child(""));const l=new fn(new fe(a),0);let h=new at(Ie);return this.Zr.forEachWhile((f=>{const d=f.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(h=h.add(f.Yr)),!0)}),l),G.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){ve(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return G.forEach(t.mutations,(r=>{const a=new fn(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new fn(t,0),r=this.Zr.firstAfterOrEqual(i);return G.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vq{constructor(e){this.ri=e,this.docs=(function(){return new bt(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,l=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return G.resolve(i?i.document.mutableCopy():Pt.newInvalidDocument(t))}getEntries(e,t){let i=ui();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():Pt.newInvalidDocument(r))})),G.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=ui();const l=t.path,h=new fe(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:d,value:{document:g}}=f.getNext();if(!l.isPrefixOf(d.path))break;d.path.length>l.length+1||hS(kP(g),i)<=0||(r.has(g.key)||ud(t,g))&&(a=a.insert(g.key,g.mutableCopy()))}return G.resolve(a)}getAllFromCollectionGroup(e,t,i,r){_e(9500)}ii(e,t){return G.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new Tq(this)}getSize(e){return G.resolve(this.size)}}class Tq extends eO{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(e){this.persistence=e,this.si=new xr((t=>nl(t)),ad),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new DS,this.targetCount=0,this.ai=rl.ur()}forEachTarget(e,t){return this.si.forEach(((i,r)=>t(r))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new rl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.si.forEach(((l,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)})),G.waitFor(a).next((()=>r))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return G.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),G.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((l=>{a.push(r.markPotentiallyOrphaned(e,l))})),G.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return G.resolve(i)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Di(0),this.li=!1,this.li=!0,this.hi=new _q,this.referenceDelegate=e(this),this.Pi=new Eq(this),this.indexManager=new oq,this.remoteDocumentCache=(function(r){return new vq(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new jM(t),this.Ii=new pq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gq,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new yq(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){le("MemoryPersistence","Starting transaction:",e);const r=new Sq(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((a=>this.referenceDelegate.di(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ai(e,t){return G.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class Sq extends UP{constructor(e){super(),this.currentSequenceNumber=e}}class C_{constructor(e){this.persistence=e,this.Ri=new DS,this.Vi=null}static mi(e){return new C_(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),G.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,(i=>{const r=fe.fromPath(i);return this.gi(e,r).next((a=>{a||t.removeEntry(r,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ig{constructor(e,t){this.persistence=e,this.pi=new xr((i=>xn(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=ZM(this,t)}static mi(e,t){return new Ig(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return G.forEach(this.pi,((i,r)=>this.br(e,i,r).next((a=>a?G.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ii(e,(l=>this.br(e,l,t).next((h=>{h||(i++,a.removeEntry(l,Ee.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),G.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Cp(e.data.value)),t}br(e,t,i){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return G.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wq{constructor(e){this.serializer=e}k(e,t,i,r){const a=new f_("createOrUpgrade",t);i<1&&r>=1&&((function(f){f.createObjectStore(od)})(e),(function(f){f.createObjectStore(Nf,{keyPath:V8}),f.createObjectStore(Qi,{keyPath:uR,autoIncrement:!0}).createIndex(Va,cR,{unique:!0}),f.createObjectStore(Hu)})(e),ZR(e),(function(f){f.createObjectStore(Ia)})(e));let l=G.resolve();return i<3&&r>=3&&(i!==0&&((function(f){f.deleteObjectStore(Ku),f.deleteObjectStore(Gu),f.deleteObjectStore(za)})(e),ZR(e)),l=l.next((()=>(function(f){const d=f.store(za),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ee.min().toTimestamp(),targetCount:0};return d.put(_g,g)})(a)))),i<4&&r>=4&&(i!==0&&(l=l.next((()=>(function(f,d){return d.store(Qi).J().next((y=>{f.deleteObjectStore(Qi),f.createObjectStore(Qi,{keyPath:uR,autoIncrement:!0}).createIndex(Va,cR,{unique:!0});const v=d.store(Qi),w=y.map((C=>v.put(C)));return G.waitFor(w)}))})(e,a)))),l=l.next((()=>{(function(f){f.createObjectStore($u,{keyPath:H8})})(e)}))),i<5&&r>=5&&(l=l.next((()=>this.yi(a)))),i<6&&r>=6&&(l=l.next((()=>((function(f){f.createObjectStore(Pf)})(e),this.wi(a))))),i<7&&r>=7&&(l=l.next((()=>this.Si(a)))),i<8&&r>=8&&(l=l.next((()=>this.bi(e,a)))),i<9&&r>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&r>=10&&(l=l.next((()=>this.Di(a)))),i<11&&r>=11&&(l=l.next((()=>{(function(f){f.createObjectStore(m_,{keyPath:G8})})(e),(function(f){f.createObjectStore(p_,{keyPath:K8})})(e)}))),i<12&&r>=12&&(l=l.next((()=>{(function(f){const d=f.createObjectStore(g_,{keyPath:Z8});d.createIndex(gT,e7,{unique:!1}),d.createIndex(GP,t7,{unique:!1})})(e)}))),i<13&&r>=13&&(l=l.next((()=>(function(f){const d=f.createObjectStore(gg,{keyPath:L8});d.createIndex(bp,U8),d.createIndex(zP,F8)})(e))).next((()=>this.Ci(e,a))).next((()=>e.deleteObjectStore(Ia)))),i<14&&r>=14&&(l=l.next((()=>this.Fi(e,a)))),i<15&&r>=15&&(l=l.next((()=>(function(f){f.createObjectStore(mS,{keyPath:$8,autoIncrement:!0}).createIndex(pT,Y8,{unique:!1}),f.createObjectStore(nf,{keyPath:W8}).createIndex(qP,Q8,{unique:!1}),f.createObjectStore(sf,{keyPath:X8}).createIndex(HP,J8,{unique:!1})})(e)))),i<16&&r>=16&&(l=l.next((()=>{t.objectStore(nf).clear()})).next((()=>{t.objectStore(sf).clear()}))),i<17&&r>=17&&(l=l.next((()=>{(function(f){f.createObjectStore(pS,{keyPath:n7})})(e)}))),i<18&&r>=18&&DD()&&(l=l.next((()=>{t.objectStore(nf).clear()})).next((()=>{t.objectStore(sf).clear()}))),l}wi(e){let t=0;return e.store(Ia).ee(((i,r)=>{t+=Cg(r)})).next((()=>{const i={byteSize:t};return e.store(Pf).put(mT,i)}))}yi(e){const t=e.store(Nf),i=e.store(Qi);return t.J().next((r=>G.forEach(r,(a=>{const l=IDBKeyRange.bound([a.userId,Ba],[a.userId,a.lastAcknowledgedBatchId]);return i.J(Va,l).next((h=>G.forEach(h,(f=>{ve(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const d=Da(this.serializer,f);return YM(e,a.userId,d).next((()=>{}))}))))}))))}Si(e){const t=e.store(Ku),i=e.store(Ia);return e.store(za).get(_g).next((r=>{const a=[];return i.ee(((l,h)=>{const f=new Ze(l),d=(function(y){return[0,xn(y)]})(f);a.push(t.get(d).next((g=>g?G.resolve():(y=>t.put({targetId:0,path:xn(y),sequenceNumber:r.highestListenSequenceNumber}))(f))))})).next((()=>G.waitFor(a)))}))}bi(e,t){e.createObjectStore(Mf,{keyPath:q8});const i=t.store(Mf),r=new xS,a=l=>{if(r.add(l)){const h=l.lastSegment(),f=l.popLast();return i.put({collectionId:h,parent:xn(f)})}};return t.store(Ia).ee({X:!0},((l,h)=>{const f=new Ze(l);return a(f.popLast())})).next((()=>t.store(Hu).ee({X:!0},(([l,h,f],d)=>{const g=Ds(h);return a(g.popLast())}))))}Di(e){const t=e.store(Gu);return t.ee(((i,r)=>{const a=Hh(r),l=qM(this.serializer,a);return t.put(l)}))}Ci(e,t){const i=t.store(Ia),r=[];return i.ee(((a,l)=>{const h=t.store(gg),f=(function(y){return y.document?new fe(Ze.fromString(y.document.name).popFirst(5)):y.noDocument?fe.fromSegments(y.noDocument.path):y.unknownDocument?fe.fromSegments(y.unknownDocument.path):_e(36783)})(l).path.toArray(),d={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(h.put(d))})).next((()=>G.waitFor(r)))}Fi(e,t){const i=t.store(Qi),r=tO(this.serializer),a=new NS(C_.mi,this.serializer.yt);return i.J().next((l=>{const h=new Map;return l.forEach((f=>{let d=h.get(f.userId)??ke();Da(this.serializer,f).keys().forEach((g=>d=d.add(g))),h.set(f.userId,d)})),G.forEach(h,((f,d)=>{const g=new On(d),y=b_.wt(this.serializer,g),v=a.getIndexManager(g),w=A_.wt(g,this.serializer,v,a.referenceDelegate);return new nO(r,w,y,v).recalculateAndSaveOverlaysForDocumentKeys(new _T(t,Di.ce),f).next()}))}))}}function ZR(n){n.createObjectStore(Ku,{keyPath:z8}).createIndex(dS,j8,{unique:!0}),n.createObjectStore(Gu,{keyPath:"targetId"}).createIndex(jP,B8,{unique:!0}),n.createObjectStore(za)}const fo="IndexedDbPersistence",h0=18e5,f0=5e3,d0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",bq="main";class PS{constructor(e,t,i,r,a,l,h,f,d,g,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=a,this.window=l,this.document=h,this.xi=d,this.Oi=g,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=v=>Promise.resolve(),!PS.v())throw new he(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hq(this,r),this.$i=t+bq,this.serializer=new jM(f),this.Ui=new Co(this.$i,this.Ni,new wq(this.serializer)),this.hi=new eq,this.Pi=new lq(this.referenceDelegate,this.serializer),this.remoteDocumentCache=tO(this.serializer),this.Ii=new Z7,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Vn(fo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new he(ne.FAILED_PRECONDITION,d0);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Di(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>op(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(zo(e))return le(fo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le(fo,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return kh(e).get(su).next((t=>G.resolve(this.es(t))))}ts(e){return op(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,h0)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=an(t,$u);return i.J().next((r=>{const a=this.ss(r,h0),l=r.filter((h=>a.indexOf(h)===-1));return G.forEach(l,(h=>i.delete(h.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?G.resolve(!0):kh(e).get(su).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,f0)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new he(ne.FAILED_PRECONDITION,d0);return!1}}return!(!this.networkEnabled||!this.inForeground)||op(e).J().next((i=>this.ss(i,f0).find((r=>{if(this.clientId!==r.clientId){const a=!this.networkEnabled&&r.networkEnabled,l=!this.inForeground&&r.inForeground,h=this.networkEnabled===r.networkEnabled;if(a||l&&h)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&le(fo,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[od,$u],(e=>{const t=new _T(e,Di.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>op(e).J().next((t=>this.ss(t,h0).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return A_.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aq(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return b_.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){le(fo,"Starting transaction:",e);const r=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?r7:f===17?WP:f===16?s7:f===15?gS:f===14?YP:f===13?$P:f===12?i7:f===11?KP:void _e(60245)})(this.Ni);let l;return this.Ui.runTransaction(e,r,a,(h=>(l=new _T(h,this.ci?this.ci.next():Di.ce),t==="readwrite-primary"?this.Hi(l).next((f=>!!f||this.Yi(l))).next((f=>{if(!f)throw Vn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new he(ne.FAILED_PRECONDITION,LP);return i(l)})).next((f=>this.Xi(l).next((()=>f)))):this.Is(l).next((()=>i(l)))))).then((h=>(l.raiseOnCommittedEvent(),h)))}Is(e){return kh(e).get(su).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,f0)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new he(ne.FAILED_PRECONDITION,d0)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return kh(e).put(su,t)}static v(){return Co.v()}Zi(e){const t=kh(e);return t.get(su).next((i=>this.es(i)?(le(fo,"Releasing primary lease."),t.delete(su)):G.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Vn(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;xD()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return le(fo,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Vn(fo,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Vn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function kh(n){return an(n,od)}function op(n){return an(n,$u)}function Aq(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=ke(),r=ke();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new MS(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return xD()?8:FP(rn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.ys(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,t,r,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new Cq;return this.Ss(e,t,l).next((h=>{if(a.result=h,this.Vs)return this.bs(e,t,l,h.size)}))})).next((()=>a.result))}bs(e,t,i,r){return i.documentReadCount<this.fs?(fu()<=ze.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",du(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(fu()<=ze.DEBUG&&le("QueryEngine","Query:",du(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(fu()<=ze.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",du(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(t))):G.resolve())}ys(e,t){if(wR(t))return G.resolve(null);let i=Mi(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=bT(t,null,"F"),i=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const l=ke(...a);return this.ps.getDocuments(e,l).next((h=>this.indexManager.getMinOffset(e,i).next((f=>{const d=this.Ds(t,h);return this.Cs(t,d,l,f.readTime)?this.ys(e,bT(t,null,"F")):this.vs(e,d,t,f)}))))})))))}ws(e,t,i,r){return wR(t)||r.isEqual(Ee.min())?G.resolve(null):this.ps.getDocuments(e,i).next((a=>{const l=this.Ds(t,a);return this.Cs(t,l,i,r)?G.resolve(null):(fu()<=ze.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),du(t)),this.vs(e,l,t,R8(r,Rf)).next((h=>h)))}))}Ds(e,t){let i=new at(pM(e));return t.forEach(((r,a)=>{ud(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(e,t,i){return fu()<=ze.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",du(t)),this.ps.getDocumentsMatchingQuery(e,t,hi.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="LocalStore",Iq=3e8;class Rq{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new bt(Ie),this.xs=new xr((a=>nl(a)),ad),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function sO(n,e,t,i){return new Rq(n,e,t,i)}async function rO(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],h=[];let f=ke();for(const d of r){l.push(d.batchId);for(const g of d.mutations)f=f.add(g.key)}for(const d of a){h.push(d.batchId);for(const g of d.mutations)f=f.add(g.key)}return t.localDocuments.getDocuments(i,f).next((d=>({Ls:d,removedBatchIds:l,addedBatchIds:h})))}))}))}function xq(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,f,d,g){const y=d.batch,v=y.keys();let w=G.resolve();return v.forEach((C=>{w=w.next((()=>g.getEntry(f,C))).next((N=>{const D=d.docVersions.get(C);ve(D!==null,48541),N.version.compareTo(D)<0&&(y.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),g.addEntry(N)))}))})),w.next((()=>h.mutationQueue.removeMutationBatch(f,y)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(h){let f=ke();for(let d=0;d<h.mutationResults.length;++d)h.mutationResults[d].transformResults.length>0&&(f=f.add(h.batch.mutations[d].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function oO(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Dq(n,e){const t=Re(n),i=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const h=[];e.targetChanges.forEach(((g,y)=>{const v=r.get(y);if(!v)return;h.push(t.Pi.removeMatchingKeys(a,g.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(a,g.addedDocuments,y))));let w=v.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(y)!==null?w=w.withResumeToken(en.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):g.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(g.resumeToken,i)),r=r.insert(y,w),(function(N,D,U){return N.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Iq?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(v,w,g)&&h.push(t.Pi.updateTargetData(a,w))}));let f=ui(),d=ke();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,g))})),h.push(Nq(a,l,e.documentUpdates).next((g=>{f=g.ks,d=g.qs}))),!i.isEqual(Ee.min())){const g=t.Pi.getLastRemoteSnapshotVersion(a).next((y=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));h.push(g)}return G.waitFor(h).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,d))).next((()=>f))})).then((a=>(t.Ms=r,a)))}function Nq(n,e,t){let i=ke(),r=ke();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let l=ui();return t.forEach(((h,f)=>{const d=a.get(h);f.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(h)),f.isNoDocument()&&f.version.isEqual(Ee.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):le(OS,"Ignoring outdated watch update for ",h,". Current version:",d.version," Watch version:",f.version)})),{ks:l,qs:r}}))}function Pq(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Ba),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Mq(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.Pi.getTargetData(i,e).next((a=>a?(r=a,G.resolve(r)):t.Pi.allocateTargetId(i).next((l=>(r=new cr(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function PT(n,e,t){const i=Re(n),r=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!zo(l))throw l;le(OS,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function e2(n,e,t){const i=Re(n);let r=Ee.min(),a=ke();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,d,g){const y=Re(f),v=y.xs.get(g);return v!==void 0?G.resolve(y.Ms.get(v)):y.Pi.getTargetData(d,g)})(i,l,Mi(e)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,h.targetId).next((f=>{a=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,t?r:Ee.min(),t?a:ke()))).next((h=>(Oq(i,T7(e),h),{documents:h,Qs:a})))))}function Oq(n,e,t){let i=n.Os.get(e)||Ee.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class t2{constructor(){this.activeTargetIds=C7()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aO{constructor(){this.Mo=new t2,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new t2,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vq{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="ConnectivityMonitor";class i2{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(n2,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(n2,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ap=null;function MT(){return ap===null?ap=(function(){return 268435456+Math.round(2147483648*Math.random())})():ap++,"0x"+ap.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="RestConnection",kq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Lq{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===yg?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,a){const l=MT(),h=this.zo(e,t.toUriEncodedString());le(m0,`Sending RPC '${e}' ${l}:`,h,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,a);const{host:d}=new URL(h),g=Fo(d);return this.Jo(e,h,f,i,g).then((y=>(le(m0,`Received RPC '${e}' ${l}: `,y),y)),(y=>{throw If(m0,`RPC '${e}' ${l} failed with error: `,y,"url: ",h,"request:",i),y}))}Ho(e,t,i,r,a,l){return this.Go(e,t,i,r,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+mc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}zo(e,t){const i=kq[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uq{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn="WebChannelConnection";class Fq extends Lq{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,a){const l=MT();return new Promise(((h,f)=>{const d=new IP;d.setWithCredentials(!0),d.listenOnce(RP.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Ep.NO_ERROR:const y=d.getResponseJson();le(Cn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(y)),h(y);break;case Ep.TIMEOUT:le(Cn,`RPC '${e}' ${l} timed out`),f(new he(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Ep.HTTP_ERROR:const v=d.getStatus();if(le(Cn,`RPC '${e}' ${l} failed with status:`,v,"response text:",d.getResponseText()),v>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const C=w?.error;if(C&&C.status&&C.message){const N=(function(U){const z=U.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(z)>=0?z:ne.UNKNOWN})(C.status);f(new he(N,C.message))}else f(new he(ne.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new he(ne.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:l,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{le(Cn,`RPC '${e}' ${l} completed.`)}}));const g=JSON.stringify(r);le(Cn,`RPC '${e}' ${l} sending request:`,r),d.send(t,"POST",g,i,15)}))}T_(e,t,i){const r=MT(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=NP(),h=DP(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(f.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const g=a.join("");le(Cn,`Creating RPC '${e}' stream ${r}: ${g}`,f);const y=l.createWebChannel(g,f);this.I_(y);let v=!1,w=!1;const C=new Uq({Yo:D=>{w?le(Cn,`Not sending because RPC '${e}' stream ${r} is closed:`,D):(v||(le(Cn,`Opening RPC '${e}' stream ${r} transport.`),y.open(),v=!0),le(Cn,`RPC '${e}' stream ${r} sending:`,D),y.send(D))},Zo:()=>y.close()}),N=(D,U,z)=>{D.listen(U,(k=>{try{z(k)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return N(y,zh.EventType.OPEN,(()=>{w||(le(Cn,`RPC '${e}' stream ${r} transport opened.`),C.o_())})),N(y,zh.EventType.CLOSE,(()=>{w||(w=!0,le(Cn,`RPC '${e}' stream ${r} transport closed`),C.a_(),this.E_(y))})),N(y,zh.EventType.ERROR,(D=>{w||(w=!0,If(Cn,`RPC '${e}' stream ${r} transport errored. Name:`,D.name,"Message:",D.message),C.a_(new he(ne.UNAVAILABLE,"The operation could not be completed")))})),N(y,zh.EventType.MESSAGE,(D=>{if(!w){const U=D.data[0];ve(!!U,16349);const z=U,k=z?.error||z[0]?.error;if(k){le(Cn,`RPC '${e}' stream ${r} received error:`,k);const Z=k.status;let Q=(function(A){const x=Wt[A];if(x!==void 0)return RM(x)})(Z),oe=k.message;Q===void 0&&(Q=ne.INTERNAL,oe="Unknown error status: "+Z+" with message "+k.message),w=!0,C.a_(new he(Q,oe)),y.close()}else le(Cn,`RPC '${e}' stream ${r} received:`,U),C.u_(U)}})),N(h,xP.STAT_EVENT,(D=>{D.stat===hT.PROXY?le(Cn,`RPC '${e}' stream ${r} detected buffering proxy`):D.stat===hT.NOPROXY&&le(Cn,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{C.__()}),0),C}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(){return typeof window<"u"?window:null}function Np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(n){return new j7(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&le("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="PersistentStream";class uO{constructor(e,t,i,r,a,l,h,f){this.Mi=e,this.S_=i,this.b_=r,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lO(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Vn(t.toString()),Vn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new he(ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(s2,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(le(s2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zq extends uO{constructor(e,t,i,r,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=G7(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ee.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ee.min():l.readTime?Ln(l.readTime):Ee.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=IT(this.serializer),t.addTarget=(function(a,l){let h;const f=l.target;if(h=Tg(f)?{documents:kM(a,f)}:{query:LM(a,f).ft},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=NM(a,l.resumeToken);const d=AT(a,l.expectedCount);d!==null&&(h.expectedCount=d)}else if(l.snapshotVersion.compareTo(Ee.min())>0){h.readTime=tc(a,l.snapshotVersion.toTimestamp());const d=AT(a,l.expectedCount);d!==null&&(h.expectedCount=d)}return h})(this.serializer,e);const i=$7(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=IT(this.serializer),t.removeTarget=e,this.q_(t)}}class jq extends uO{constructor(e,t,i,r,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=K7(e.writeResults,e.commitTime),i=Ln(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=IT(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>wg(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qq{}class Hq extends qq{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,CT(t,i),r,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(ne.UNKNOWN,a.toString())}))}Ho(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Ho(e,CT(t,i),r,l,h,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new he(ne.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Gq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vn(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="RemoteStore";class Kq{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{fl(this)&&(le(ol,"Restarting streams for network reachability change."),await(async function(f){const d=Re(f);d.Ea.add(4),await hd(d),d.Ra.set("Unknown"),d.Ea.delete(4),await R_(d)})(this))}))})),this.Ra=new Gq(i,r)}}async function R_(n){if(fl(n))for(const e of n.da)await e(!0)}async function hd(n){for(const e of n.da)await e(!1)}function cO(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),US(t)?LS(t):gc(t).O_()&&kS(t,e))}function VS(n,e){const t=Re(n),i=gc(t);t.Ia.delete(e),i.O_()&&hO(t,e),t.Ia.size===0&&(i.O_()?i.L_():fl(t)&&t.Ra.set("Unknown"))}function kS(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gc(n).Y_(e)}function hO(n,e){n.Va.Ue(e),gc(n).Z_(e)}function LS(n){n.Va=new U7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),gc(n).start(),n.Ra.ua()}function US(n){return fl(n)&&!gc(n).x_()&&n.Ia.size>0}function fl(n){return Re(n).Ea.size===0}function fO(n){n.Va=void 0}async function $q(n){n.Ra.set("Online")}async function Yq(n){n.Ia.forEach(((e,t)=>{kS(n,e)}))}async function Wq(n,e){fO(n),US(n)?(n.Ra.ha(e),LS(n)):n.Ra.set("Unknown")}async function Qq(n,e,t){if(n.Ra.set("Online"),e instanceof DM&&e.state===2&&e.cause)try{await(async function(r,a){const l=a.cause;for(const h of a.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,l),r.Ia.delete(h),r.Va.removeTarget(h))})(n,e)}catch(i){le(ol,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Rg(n,i)}else if(e instanceof xp?n.Va.Ze(e):e instanceof xM?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ee.min()))try{const i=await oO(n.localStore);t.compareTo(i)>=0&&await(function(a,l){const h=a.Va.Tt(l);return h.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const g=a.Ia.get(d);g&&a.Ia.set(d,g.withResumeToken(f.resumeToken,l))}})),h.targetMismatches.forEach(((f,d)=>{const g=a.Ia.get(f);if(!g)return;a.Ia.set(f,g.withResumeToken(en.EMPTY_BYTE_STRING,g.snapshotVersion)),hO(a,f);const y=new cr(g.target,f,d,g.sequenceNumber);kS(a,y)})),a.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(i){le(ol,"Failed to raise snapshot:",i),await Rg(n,i)}}async function Rg(n,e,t){if(!zo(e))throw e;n.Ea.add(1),await hd(n),n.Ra.set("Offline"),t||(t=()=>oO(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(ol,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await R_(n)}))}function dO(n,e){return e().catch((t=>Rg(n,t,e)))}async function fd(n){const e=Re(n),t=Vo(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ba;for(;Xq(e);)try{const r=await Pq(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,Jq(e,r)}catch(r){await Rg(e,r)}mO(e)&&pO(e)}function Xq(n){return fl(n)&&n.Ta.length<10}function Jq(n,e){n.Ta.push(e);const t=Vo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function mO(n){return fl(n)&&!Vo(n).x_()&&n.Ta.length>0}function pO(n){Vo(n).start()}async function Zq(n){Vo(n).ra()}async function eH(n){const e=Vo(n);for(const t of n.Ta)e.ea(t.mutations)}async function tH(n,e,t){const i=n.Ta.shift(),r=bS.from(i,e,t);await dO(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await fd(n)}async function nH(n,e){e&&Vo(n).X_&&await(async function(i,r){if((function(l){return V7(l)&&l!==ne.ABORTED})(r.code)){const a=i.Ta.shift();Vo(i).B_(),await dO(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await fd(i)}})(n,e),mO(n)&&pO(n)}async function r2(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),le(ol,"RemoteStore received new credentials");const i=fl(t);t.Ea.add(3),await hd(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await R_(t)}async function iH(n,e){const t=Re(n);e?(t.Ea.delete(2),await R_(t)):e||(t.Ea.add(2),await hd(t),t.Ra.set("Unknown"))}function gc(n){return n.ma||(n.ma=(function(t,i,r){const a=Re(t);return a.sa(),new zq(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Xo:$q.bind(null,n),t_:Yq.bind(null,n),r_:Wq.bind(null,n),H_:Qq.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),US(n)?LS(n):n.Ra.set("Unknown")):(await n.ma.stop(),fO(n))}))),n.ma}function Vo(n){return n.fa||(n.fa=(function(t,i,r){const a=Re(t);return a.sa(),new jq(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Zq.bind(null,n),r_:nH.bind(null,n),ta:eH.bind(null,n),na:tH.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await fd(n)):(await n.fa.stop(),n.Ta.length>0&&(le(ol,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const l=Date.now()+i,h=new FS(e,t,l,r,a);return h.start(i),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function BS(n,e){if(Vn("AsyncQueue",`${e}: ${n}`),zo(n))return new he(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{static emptySet(e){return new Du(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||fe.comparator(t.key,i.key):(t,i)=>fe.comparator(t.key,i.key),this.keyedMap=jh(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Du)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Du;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.ga=new bt(fe.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class nc{constructor(e,t,i,r,a,l,h,f,d){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(e,t,i,r,a){const l=[];return t.forEach((h=>{l.push({type:0,doc:h})})),new nc(e,t,Du.emptySet(t),l,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&v_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class rH{constructor(){this.queries=a2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Re(t),a=r.queries;r.queries=a2(),a.forEach(((l,h)=>{for(const f of h.Sa)f.onError(i)}))})(this,new he(ne.ABORTED,"Firestore shutting down"))}}function a2(){return new xr((n=>mM(n)),v_)}async function oH(n,e){const t=Re(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.ba()&&e.Da()&&(i=2):(a=new sH,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(l){const h=BS(l,`Initialization of query '${du(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&zS(t)}async function aH(n,e){const t=Re(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?r=e.Da()?0:1:!a.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function lH(n,e){const t=Re(n);let i=!1;for(const r of e){const a=r.query,l=t.queries.get(a);if(l){for(const h of l.Sa)h.Fa(r)&&(i=!0);l.wa=r}}i&&zS(t)}function uH(n,e,t){const i=Re(n),r=i.queries.get(e);if(r)for(const a of r.Sa)a.onError(t);i.queries.delete(e)}function zS(n){n.Ca.forEach((e=>{e.next()}))}var OT,l2;(l2=OT||(OT={})).Ma="default",l2.Cache="cache";class cH{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new nc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==OT.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.key=e}}class _O{constructor(e){this.key=e}}class hH{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=pM(e),this.tu=new Du(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new o2,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=r,h=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((g,y)=>{const v=r.get(g),w=ud(this.query,y)?y:null,C=!!v&&this.mutatedKeys.has(v.key),N=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let D=!1;v&&w?v.data.isEqual(w.data)?C!==N&&(i.track({type:3,doc:w}),D=!0):this.su(v,w)||(i.track({type:2,doc:w}),D=!0,(f&&this.eu(w,f)>0||d&&this.eu(w,d)<0)&&(h=!0)):!v&&w?(i.track({type:0,doc:w}),D=!0):v&&!w&&(i.track({type:1,doc:v}),D=!0,(f||d)&&(h=!0)),D&&(w?(l=l.add(w),a=N?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),i.track({type:1,doc:g})}return{tu:l,iu:i,Cs:h,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((g,y)=>(function(w,C){const N=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:D})}};return N(w)-N(C)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(i),r=r??!1;const h=t&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,d=f!==this.Za;return this.Za=f,l.length!==0||d?{snapshot:new nc(this.query,e.tu,a,l,e.mutatedKeys,f===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new o2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new _O(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new gO(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const jS="SyncEngine";class fH{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class dH{constructor(e){this.key=e,this.hu=!1}}class mH{constructor(e,t,i,r,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new xr((h=>mM(h)),v_),this.Iu=new Map,this.Eu=new Set,this.du=new bt(fe.comparator),this.Au=new Map,this.Ru=new DS,this.Vu={},this.mu=new Map,this.fu=rl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pH(n,e,t=!0){const i=wO(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await yO(i,e,t,!0),r}async function gH(n,e){const t=wO(n);await yO(t,e,!0,!1)}async function yO(n,e,t,i){const r=await Mq(n.localStore,Mi(e)),a=r.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let h;return i&&(h=await _H(n,e,a,l==="current",r.resumeToken)),n.isPrimaryClient&&t&&cO(n.remoteStore,r),h}async function _H(n,e,t,i,r){n.pu=(y,v,w)=>(async function(N,D,U,z){let k=D.view.ru(U);k.Cs&&(k=await e2(N.localStore,D.query,!1).then((({documents:R})=>D.view.ru(R,k))));const Z=z&&z.targetChanges.get(D.targetId),Q=z&&z.targetMismatches.get(D.targetId)!=null,oe=D.view.applyChanges(k,N.isPrimaryClient,Z,Q);return c2(N,D.targetId,oe.au),oe.snapshot})(n,y,v,w);const a=await e2(n.localStore,e,!0),l=new hH(e,a.Qs),h=l.ru(a.documents),f=cd.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),d=l.applyChanges(h,n.isPrimaryClient,f);c2(n,t,d.au);const g=new fH(e,t,l);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),d.snapshot}async function yH(n,e,t){const i=Re(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((l=>!v_(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await PT(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&VS(i.remoteStore,r.targetId),VT(i,r.targetId)})).catch(cl)):(VT(i,r.targetId),await PT(i.localStore,r.targetId,!0))}async function vH(n,e){const t=Re(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),VS(t.remoteStore,i.targetId))}async function TH(n,e,t){const i=bO(n);try{const r=await(function(l,h){const f=Re(l),d=nt.now(),g=h.reduce(((w,C)=>w.add(C.key)),ke());let y,v;return f.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let C=ui(),N=ke();return f.Ns.getEntries(w,g).next((D=>{C=D,C.forEach(((U,z)=>{z.isValidDocument()||(N=N.add(U))}))})).next((()=>f.localDocuments.getOverlayedDocuments(w,C))).next((D=>{y=D;const U=[];for(const z of h){const k=M7(z,y.get(z.key).overlayedDocument);k!=null&&U.push(new jo(z.key,k,rM(k.value.mapValue),Yn.exists(!0)))}return f.mutationQueue.addMutationBatch(w,d,U,h)})).next((D=>{v=D;const U=D.applyToLocalDocumentSet(y,N);return f.documentOverlayCache.saveOverlays(w,D.batchId,U)}))})).then((()=>({batchId:v.batchId,changes:_M(y)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,h,f){let d=l.Vu[l.currentUser.toKey()];d||(d=new bt(Ie)),d=d.insert(h,f),l.Vu[l.currentUser.toKey()]=d})(i,r.batchId,t),await dd(i,r.changes),await fd(i.remoteStore)}catch(r){const a=BS(r,"Failed to persist write");t.reject(a)}}async function vO(n,e){const t=Re(n);try{const i=await Dq(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const l=t.Au.get(a);l&&(ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?ve(l.hu,14607):r.removedDocuments.size>0&&(ve(l.hu,42227),l.hu=!1))})),await dd(t,i,e)}catch(i){await cl(i)}}function u2(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,l)=>{const h=l.view.va(e);h.snapshot&&r.push(h.snapshot)})),(function(l,h){const f=Re(l);f.onlineState=h;let d=!1;f.queries.forEach(((g,y)=>{for(const v of y.Sa)v.va(h)&&(d=!0)})),d&&zS(f)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function EH(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let l=new bt(fe.comparator);l=l.insert(a,Pt.newNoDocument(a,Ee.min()));const h=ke().add(a),f=new w_(Ee.min(),new Map,new bt(Ie),l,h);await vO(i,f),i.du=i.du.remove(a),i.Au.delete(e),qS(i)}else await PT(i.localStore,e,!1).then((()=>VT(i,e,t))).catch(cl)}async function SH(n,e){const t=Re(n),i=e.batch.batchId;try{const r=await xq(t.localStore,e);EO(t,i,null),TO(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await dd(t,r)}catch(r){await cl(r)}}async function wH(n,e,t){const i=Re(n);try{const r=await(function(l,h){const f=Re(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let g;return f.mutationQueue.lookupMutationBatch(d,h).next((y=>(ve(y!==null,37113),g=y.keys(),f.mutationQueue.removeMutationBatch(d,y)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,g,h))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,g))).next((()=>f.localDocuments.getDocuments(d,g)))}))})(i.localStore,e);EO(i,e,t),TO(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await dd(i,r)}catch(r){await cl(r)}}function TO(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function EO(n,e,t){const i=Re(n);let r=i.Vu[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function VT(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||SO(n,i)}))}function SO(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(VS(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),qS(n))}function c2(n,e,t){for(const i of t)i instanceof gO?(n.Ru.addReference(i.key,e),bH(n,i)):i instanceof _O?(le(jS,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||SO(n,i.key)):_e(19791,{wu:i})}function bH(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(le(jS,"New document in limbo: "+t),n.Eu.add(i),qS(n))}function qS(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new fe(Ze.fromString(e)),i=n.fu.next();n.Au.set(i,new dH(t)),n.du=n.du.insert(t,i),cO(n.remoteStore,new cr(Mi(ES(t.path)),i,"TargetPurposeLimboResolution",Di.ce))}}async function dd(n,e,t){const i=Re(n),r=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((h,f)=>{l.push(i.pu(f,e,t).then((d=>{if((d||t)&&i.isPrimaryClient){const g=d?!d.fromCache:t?.targetChanges.get(f.targetId)?.current;i.sharedClientState.updateQueryState(f.targetId,g?"current":"not-current")}if(d){r.push(d);const g=MS.As(f.targetId,d);a.push(g)}})))})),await Promise.all(l),i.Pu.H_(r),await(async function(f,d){const g=Re(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>G.forEach(d,(v=>G.forEach(v.Es,(w=>g.persistence.referenceDelegate.addReference(y,v.targetId,w))).next((()=>G.forEach(v.ds,(w=>g.persistence.referenceDelegate.removeReference(y,v.targetId,w)))))))))}catch(y){if(!zo(y))throw y;le(OS,"Failed to update sequence numbers: "+y)}for(const y of d){const v=y.targetId;if(!y.fromCache){const w=g.Ms.get(v),C=w.snapshotVersion,N=w.withLastLimboFreeSnapshotVersion(C);g.Ms=g.Ms.insert(v,N)}}})(i.localStore,a))}async function AH(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){le(jS,"User change. New user:",e.toKey());const i=await rO(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((h=>{h.forEach((f=>{f.reject(new he(ne.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await dd(t,i.Ls)}}function CH(n,e){const t=Re(n),i=t.Au.get(e);if(i&&i.hu)return ke().add(i.key);{let r=ke();const a=t.Iu.get(e);if(!a)return r;for(const l of a){const h=t.Tu.get(l);r=r.unionWith(h.view.nu)}return r}}function wO(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EH.bind(null,e),e.Pu.H_=lH.bind(null,e.eventManager),e.Pu.yu=uH.bind(null,e.eventManager),e}function bO(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wH.bind(null,e),e}class Ff{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=I_(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return sO(this.persistence,new iO,e.initialUser,this.serializer)}Cu(e){return new NS(C_.mi,this.serializer)}Du(e){return new aO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ff.provider={build:()=>new Ff};class IH extends Ff{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ve(this.persistence.referenceDelegate instanceof Ig,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new JM(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new NS((i=>Ig.mi(i,t)),this.serializer)}}class RH extends Ff{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await bO(this.xu.syncEngine),await fd(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return sO(this.persistence,new iO,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new JM(i,e.asyncQueue,t)}Mu(e,t){const i=new P8(t,this.persistence);return new N8(e.asyncQueue,i)}Cu(e){const t=Aq(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new PS(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,Bq(),Np(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new aO}}class xg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>u2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=AH.bind(null,this.syncEngine),await iH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new rH})()}createDatastore(e){const t=I_(e.databaseInfo.databaseId),i=(function(a){return new Fq(a)})(e.databaseInfo);return(function(a,l,h,f){return new Hq(a,l,h,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,l,h){return new Kq(i,r,a,l,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>u2(this.syncEngine,t,0)),(function(){return i2.v()?new i2:new Vq})())}createSyncEngine(e,t){return(function(r,a,l,h,f,d,g){const y=new mH(r,a,l,h,f,d);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Re(t);le(ol,"RemoteStore shutting down."),i.Ea.add(5),await hd(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}xg.provider={build:()=>new xg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xH{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="FirestoreClient";class DH{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=On.UNAUTHENTICATED,this.clientId=cS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{le(ko,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(le(ko,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=BS(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function p0(n,e){n.asyncQueue.verifyOperationInProgress(),le(ko,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await rO(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function h2(n,e){n.asyncQueue.verifyOperationInProgress();const t=await NH(n);le(ko,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>r2(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>r2(e.remoteStore,r))),n._onlineComponents=e}async function NH(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(ko,"Using user provided OfflineComponentProvider");try{await p0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ne.FAILED_PRECONDITION||r.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;If("Error using user provided cache. Falling back to memory cache: "+t),await p0(n,new Ff)}}else le(ko,"Using default OfflineComponentProvider"),await p0(n,new IH(void 0));return n._offlineComponents}async function AO(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(ko,"Using user provided OnlineComponentProvider"),await h2(n,n._uninitializedComponentsProvider._online)):(le(ko,"Using default OnlineComponentProvider"),await h2(n,new xg))),n._onlineComponents}function PH(n){return AO(n).then((e=>e.syncEngine))}async function MH(n){const e=await AO(n),t=e.eventManager;return t.onListen=pH.bind(null,e.syncEngine),t.onUnlisten=yH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=gH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vH.bind(null,e.syncEngine),t}function OH(n,e,t={}){const i=new mr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,h,f,d){const g=new xH({next:v=>{g.Nu(),l.enqueueAndForget((()=>aH(a,y))),v.fromCache&&f.source==="server"?d.reject(new he(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),y=new cH(h,g,{includeMetadataChanges:!0,qa:!0});return oH(a,y)})(await MH(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VH="firestore.googleapis.com",d2=!0;class m2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VH,this.ssl=d2}else this.host=e.host,this.ssl=e.ssl??d2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$M;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XM)throw new he(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}I8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CO(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class HS{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new y8;switch(i.type){case"firstParty":return new E8(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=f2.get(t);i&&(le("ComponentProvider","Removing Datastore"),f2.delete(t),i.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new _c(this.firestore,e,this._query)}}class mn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Io(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mn(this.firestore,e,this._key)}toJSON(){return{type:mn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(rd(t,mn._jsonSchema))return new mn(e,i||null,new fe(Ze.fromString(t.referencePath)))}}mn._jsonSchemaVersion="firestore/documentReference/1.0",mn._jsonSchema={type:Jt("string",mn._jsonSchemaVersion),referencePath:Jt("string")};class Io extends _c{constructor(e,t,i){super(e,t,ES(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new fe(e))}withConverter(e){return new Io(this.firestore,e,this._path)}}function Bf(n,e,...t){if(n=on(n),OP("collection","path",e),n instanceof HS){const i=Ze.fromString(e,...t);return sR(i),new Io(n,null,i)}{if(!(n instanceof mn||n instanceof Io))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ze.fromString(e,...t));return sR(i),new Io(n.firestore,null,i)}}function GS(n,e,...t){if(n=on(n),arguments.length===1&&(e=cS.newId()),OP("doc","path",e),n instanceof HS){const i=Ze.fromString(e,...t);return iR(i),new mn(n,null,new fe(i))}{if(!(n instanceof mn||n instanceof Io))throw new he(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ze.fromString(e,...t));return iR(i),new mn(n.firestore,n instanceof Io?n.converter:null,new fe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="AsyncQueue";class g2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lO(this,"async_queue_retry"),this._c=()=>{const i=Np();i&&le(p2,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Np();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Np();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new mr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zo(e))throw e;le(p2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Vn("INTERNAL UNHANDLED ERROR: ",_2(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=FS.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&_e(47125,{Pc:_2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function _2(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kH=-1;class x_ extends HS{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new g2,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new g2(e),this._firestoreClient=void 0,await e}}}function LH(n,e,t){t||(t=yg);const i=Jg(n,"firestore");if(i.isInitialized(t)){const r=i.getImmediate({identifier:t}),a=i.getOptions(t);if(xo(a,e))return r;throw new he(ne.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new he(ne.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XM)throw new he(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Fo(e.host)&&_E(e.host),i.initialize({options:e,instanceIdentifier:t})}function IO(n){if(n._terminated)throw new he(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||UH(n),n._firestoreClient}function UH(n){const e=n._freezeSettings(),t=(function(r,a,l,h){return new a7(r,a,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,CO(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new DH(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(r){const a=r?._online.build();return{_offline:r?._offline.build(a),_online:a}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ri(en.fromBase64String(e))}catch(t){throw new he(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ri(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ri._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(rd(e,Ri._jsonSchema))return Ri.fromBase64String(e.bytes)}}Ri._jsonSchemaVersion="firestore/bytes/1.0",Ri._jsonSchema={type:Jt("string",Ri._jsonSchemaVersion),bytes:Jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vs._jsonSchemaVersion}}static fromJSON(e){if(rd(e,Vs._jsonSchema))return new Vs(e.latitude,e.longitude)}}Vs._jsonSchemaVersion="firestore/geoPoint/1.0",Vs._jsonSchema={type:Jt("string",Vs._jsonSchemaVersion),latitude:Jt("number"),longitude:Jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ks._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(rd(e,ks._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ks(e.vectorValues);throw new he(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ks._jsonSchemaVersion="firestore/vectorValue/1.0",ks._jsonSchema={type:Jt("string",ks._jsonSchemaVersion),vectorValues:Jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FH=/^__.*__$/;class BH{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new jo(e,this.data,this.fieldMask,t,this.fieldTransforms):new pc(e,this.data,t,this.fieldTransforms)}}function RO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:n})}}class YS{constructor(e,t,i,r,a,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new YS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Dg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(RO(this.Ac)&&FH.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class zH{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||I_(e)}Cc(e,t,i,r=!1){return new YS({Ac:e,methodName:t,Dc:i,path:At.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xO(n){const e=n._freezeSettings(),t=I_(n._databaseId);return new zH(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jH(n,e,t,i,r,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,e,t,r);PO("Data must be an object, but it was:",l,i);const h=DO(i,l);let f,d;if(a.merge)f=new Ni(l.fieldMask),d=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const y of a.mergeFields){const v=HH(e,y,t);if(!l.contains(v))throw new he(ne.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);KH(g,v)||g.push(v)}f=new Ni(g),d=l.fieldTransforms.filter((y=>f.covers(y.field)))}else f=null,d=l.fieldTransforms;return new BH(new Kn(h),f,d)}class WS extends $S{_toFieldTransform(e){return new bM(e.path,new Ju)}isEqual(e){return e instanceof WS}}function qH(n,e,t,i=!1){return QS(t,n.Cc(i?4:3,e))}function QS(n,e){if(NO(n=on(n)))return PO("Unsupported field value:",e,n),DO(n,e);if(n instanceof $S)return(function(i,r){if(!RO(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const a=[];let l=0;for(const h of i){let f=QS(h,r.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=on(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return I7(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=nt.fromDate(i);return{timestampValue:tc(r.serializer,a)}}if(i instanceof nt){const a=new nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:tc(r.serializer,a)}}if(i instanceof Vs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ri)return{bytesValue:NM(r.serializer,i._byteString)};if(i instanceof mn){const a=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw r.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:IS(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ks)return(function(l,h){return{mapValue:{fields:{[yS]:{stringValue:vS},[Yu]:{arrayValue:{values:l.toArray().map((d=>{if(typeof d!="number")throw h.Sc("VectorValues must only contain numeric values.");return SS(h.serializer,d)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${h_(i)}`)})(n,e)}function DO(n,e){const t={};return QP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hl(n,((i,r)=>{const a=QS(r,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function NO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof nt||n instanceof Vs||n instanceof Ri||n instanceof mn||n instanceof $S||n instanceof ks)}function PO(n,e,t){if(!NO(t)||!VP(t)){const i=h_(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function HH(n,e,t){if((e=on(e))instanceof KS)return e._internalPath;if(typeof e=="string")return MO(n,e);throw Dg("Field path arguments must be of type string or ",n,!1,void 0,t)}const GH=new RegExp("[~\\*/\\[\\]]");function MO(n,e,t){if(e.search(GH)>=0)throw Dg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new KS(...e.split("."))._internalPath}catch{throw Dg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Dg(n,e,t,i,r){const a=i&&!i.isEmpty(),l=r!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${i}`),l&&(f+=` in document ${r}`),f+=")"),new he(ne.INVALID_ARGUMENT,h+n+f)}function KH(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $H(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(XS("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $H extends OO{data(){return super.data()}}function XS(n,e){return typeof e=="string"?MO(n,e):e instanceof KS?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YH(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class JS{}class WH extends JS{}function QH(n,e,...t){let i=[];e instanceof JS&&i.push(e),i=i.concat(t),(function(a){const l=a.filter((f=>f instanceof ZS)).length,h=a.filter((f=>f instanceof D_)).length;if(l>1||l>0&&h>0)throw new he(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class D_ extends WH{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new D_(e,t,i)}_apply(e){const t=this._parse(e);return VO(e._query,t),new _c(e.firestore,e.converter,wT(e._query,t))}_parse(e){const t=xO(e.firestore);return(function(a,l,h,f,d,g,y){let v;if(d.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new he(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){v2(y,g);const C=[];for(const N of y)C.push(y2(f,a,N));v={arrayValue:{values:C}}}else v=y2(f,a,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||v2(y,g),v=qH(h,l,y,g==="in"||g==="not-in");return Ge.create(d,g,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function XH(n,e,t){const i=e,r=XS("where",n);return D_._create(r,i,t)}class ZS extends JS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ZS(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:ot.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,a){let l=r;const h=a.getFlattenedFilters();for(const f of h)VO(l,f),l=wT(l,f)})(e._query,t),new _c(e.firestore,e.converter,wT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function y2(n,e,t){if(typeof(t=on(t))=="string"){if(t==="")throw new he(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dM(e)&&t.indexOf("/")!==-1)throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ze.fromString(t));if(!fe.isDocumentKey(i))throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return kf(n,new fe(i))}if(t instanceof mn)return kf(n,t._key);throw new he(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${h_(t)}.`)}function v2(n,e){if(!Array.isArray(n)||n.length===0)throw new he(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VO(n,e){const t=(function(r,a){for(const l of r)for(const h of l.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class JH{convertValue(e,t="none"){switch(Mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return hl(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){const t=e.fields?.[Yu].arrayValue?.values?.map((i=>St(i.doubleValue)));return new ks(t)}convertGeoPoint(e){return new Vs(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=__(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Of(e));default:return null}}convertTimestamp(e){const t=Sr(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ze.fromString(e);ve(zM(i),9688,{name:e});const r=new tl(i.get(1),i.get(3)),a=new fe(i.popFirst(5));return r.isEqual(t)||Vn(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZH(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class lp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nu extends OO{constructor(e,t,i,r,a,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(XS("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Nu._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Nu._jsonSchemaVersion="firestore/documentSnapshot/1.0",Nu._jsonSchema={type:Jt("string",Nu._jsonSchemaVersion),bundleSource:Jt("string","DocumentSnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class Pp extends Nu{data(e={}){return super.data(e)}}class Pu{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new lp(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Pp(this._firestore,this._userDataWriter,i.key,i,new lp(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((h=>{const f=new Pp(r._firestore,r._userDataWriter,h.doc.key,h.doc,new lp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>a||h.type!==3)).map((h=>{const f=new Pp(r._firestore,r._userDataWriter,h.doc.key,h.doc,new lp(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,g=-1;return h.type!==0&&(d=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),g=l.indexOf(h.doc.key)),{type:eG(h.type),doc:f,oldIndex:d,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Pu._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:n})}}Pu._jsonSchemaVersion="firestore/querySnapshot/1.0",Pu._jsonSchema={type:Jt("string",Pu._jsonSchemaVersion),bundleSource:Jt("string","QuerySnapshot"),bundleName:Jt("string"),bundle:Jt("string")};class tG extends JH{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ri(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,t)}}function ew(n){n=dg(n,_c);const e=dg(n.firestore,x_),t=IO(e),i=new tG(e);return YH(n._query),OH(t,n._query).then((r=>new Pu(e,i,n,r)))}function kO(n){return UO(dg(n.firestore,x_),[new S_(n._key,Yn.none())])}function LO(n,e){const t=dg(n.firestore,x_),i=GS(n),r=ZH(n.converter,e);return UO(t,[jH(xO(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Yn.exists(!1))]).then((()=>i))}function UO(n,e){return(function(i,r){const a=new mr;return i.asyncQueue.enqueueAndForget((async()=>TH(await PH(i),r,a))),a.promise})(IO(n),e)}class nG{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=rG(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function iG(n){return new nG(n)}class sG{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=xg.provider,this._offlineComponentProvider={build:t=>new RH(t,e?.cacheSizeBytes,this.forceOwnership)}}}function rG(n){return new sG(n?.forceOwnership)}function oG(){return new WS("serverTimestamp")}(function(e,t=!0){(function(r){mc=r})(al),Ya(new Do("firestore",((i,{instanceIdentifier:r,options:a})=>{const l=i.getProvider("app").getImmediate(),h=new x_(new v8(i.getProvider("auth-internal")),new S8(l,i.getProvider("app-check-internal")),(function(d,g){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new he(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tl(d.options.projectId,g)})(l,r),l);return a={useFetchStreams:t,...a},h._setSettings(a),h}),"PUBLIC").setMultipleInstances(!0)),Ps(ZI,eR,e),Ps(ZI,eR,"esm2020")})();const aG={apiKey:"AIzaSyDohDZ_1IPsjgOhyzw_2dRMWAkObxE4WV4",authDomain:"project-test-d89c4.firebaseapp.com",databaseURL:"https://project-test-d89c4-default-rtdb.europe-west1.firebasedatabase.app",projectId:"project-test-d89c4",storageBucket:"project-test-d89c4.firebasestorage.app",messagingSenderId:"829539787895",appId:"1:829539787895:web:7ab849b09811e70c265272",measurementId:"G-TJHM6BSH1H"},tw=VD(aG),lG=p8(tw),T2=fz(tw);ij(lG,_P).then(()=>{console.log("Auth persistence set to 'localStorage'")}).catch(n=>{console.error("Failed to set persistence:",n)});const qa=LH(tw,{localCache:iG({cacheSizeBytes:kH})});console.log("Firebase initialized successfully");console.log("Offline persistence enabled (via localCache)");const uG={products:[],status:"idle",error:null},kT=n=>{if(n==null)return n;if(n instanceof nt)return n.toDate().toISOString();if(Array.isArray(n))return n.map(e=>kT(e));if(typeof n=="object"){const e={};for(const t in n)n.hasOwnProperty(t)&&(e[t]=kT(n[t]));return e}return n},nw=_D({name:"products",initialState:uG,reducers:n=>({fetchProductsTC:n.asyncThunk(async(e,t)=>{try{return(await ew(Bf(qa,"products"))).docs.map(a=>{const l=a.data(),h=kT(l);return{id:a.id,...h}})}catch(i){return t.rejectWithValue(i.message??"Failed to fetch products")}},{fulfilled:(e,t)=>{e.products=t.payload,e.status="succeeded"},pending:e=>{e.status="loading",e.error=null},rejected:(e,t)=>{e.status="failed",e.error=t.payload}}),deleteProductTC:n.asyncThunk(async(e,t)=>{try{return await kO(GS(qa,"products",e)),e}catch(i){return t.rejectWithValue(i.message??"Failed to delete product")}},{fulfilled:(e,t)=>{e.products=e.products.filter(i=>i.id!==t.payload)}}),addProductTC:n.asyncThunk(async(e,t)=>{try{const i={...e,guarantee:{start:e.guarantee.start,end:e.guarantee.end},date:oG()};return{id:(await LO(Bf(qa,"products"),i)).id,...e,date:new Date().toISOString()}}catch(i){return t.rejectWithValue(i.message??"Failed to add product")}},{fulfilled:(e,t)=>{e.products.push(t.payload)}})}),selectors:{selectProducts:n=>n.products,selectStatus:n=>n.status,selectError:n=>n.error}}),{selectProducts:FO,selectStatus:cG,selectError:hG}=nw.selectors,{fetchProductsTC:iw,deleteProductTC:fG,addProductTC:dG}=nw.actions,mG=nw.reducer;var g0={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var E2;function pG(){return E2||(E2=1,(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var a="",l=0;l<arguments.length;l++){var h=arguments[l];h&&(a=r(a,i(h)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return t.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var h in a)e.call(a,h)&&a[h]&&(l=r(l,h));return l}function r(a,l){return l?a?a+" "+l:a+l:a}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(g0)),g0.exports}var gG=pG();const Un=Bg(gG),_G=["xxl","xl","lg","md","sm","xs"],yG="xs",N_=P.createContext({prefixes:{},breakpoints:_G,minBreakpoint:yG}),{Consumer:XX,Provider:JX}=N_;function fi(n,e){const{prefixes:t}=P.useContext(N_);return n||t[e]||e}function BO(){const{breakpoints:n}=P.useContext(N_);return n}function zO(){const{minBreakpoint:n}=P.useContext(N_);return n}var _0={exports:{}},y0,S2;function vG(){if(S2)return y0;S2=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return y0=n,y0}var v0,w2;function TG(){if(w2)return v0;w2=1;var n=vG();function e(){}function t(){}return t.resetWarningCache=e,v0=function(){function i(l,h,f,d,g,y){if(y!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return a.PropTypes=a,a},v0}var b2;function EG(){return b2||(b2=1,_0.exports=TG()()),_0.exports}var SG=EG();const Mu=Bg(SG);function wG(n,e){return P.Children.toArray(n).some(t=>P.isValidElement(t)&&t.type===e)}function bG({as:n,bsPrefix:e,className:t,...i}){e=fi(e,"col");const r=BO(),a=zO(),l=[],h=[];return r.forEach(f=>{const d=i[f];delete i[f];let g,y,v;typeof d=="object"&&d!=null?{span:g,offset:y,order:v}=d:g=d;const w=f!==a?`-${f}`:"";g&&l.push(g===!0?`${e}${w}`:`${e}${w}-${g}`),v!=null&&h.push(`order${w}-${v}`),y!=null&&h.push(`offset${w}-${y}`)}),[{...i,className:Un(t,...l,...h)},{as:n,bsPrefix:e,spans:l}]}const zf=P.forwardRef((n,e)=>{const[{className:t,...i},{as:r="div",bsPrefix:a,spans:l}]=bG(n);return H.jsx(r,{...i,ref:e,className:Un(t,!l.length&&a)})});zf.displayName="Col";const AG={type:Mu.string,tooltip:Mu.bool,as:Mu.elementType},P_=P.forwardRef(({as:n="div",className:e,type:t="valid",tooltip:i=!1,...r},a)=>H.jsx(n,{...r,ref:a,className:Un(e,`${t}-${i?"tooltip":"feedback"}`)}));P_.displayName="Feedback";P_.propTypes=AG;const br=P.createContext({}),sw=P.forwardRef(({id:n,bsPrefix:e,className:t,type:i="checkbox",isValid:r=!1,isInvalid:a=!1,as:l="input",...h},f)=>{const{controlId:d}=P.useContext(br);return e=fi(e,"form-check-input"),H.jsx(l,{...h,ref:f,type:i,id:n||d,className:Un(t,e,r&&"is-valid",a&&"is-invalid")})});sw.displayName="FormCheckInput";const Ng=P.forwardRef(({bsPrefix:n,className:e,htmlFor:t,...i},r)=>{const{controlId:a}=P.useContext(br);return n=fi(n,"form-check-label"),H.jsx("label",{...i,ref:r,htmlFor:t||a,className:Un(e,n)})});Ng.displayName="FormCheckLabel";const jO=P.forwardRef(({id:n,bsPrefix:e,bsSwitchPrefix:t,inline:i=!1,reverse:r=!1,disabled:a=!1,isValid:l=!1,isInvalid:h=!1,feedbackTooltip:f=!1,feedback:d,feedbackType:g,className:y,style:v,title:w="",type:C="checkbox",label:N,children:D,as:U="input",...z},k)=>{e=fi(e,"form-check"),t=fi(t,"form-switch");const{controlId:Z}=P.useContext(br),Q=P.useMemo(()=>({controlId:n||Z}),[Z,n]),oe=!D&&N!=null&&N!==!1||wG(D,Ng),R=H.jsx(sw,{...z,type:C==="switch"?"checkbox":C,ref:k,isValid:l,isInvalid:h,disabled:a,as:U});return H.jsx(br.Provider,{value:Q,children:H.jsx("div",{style:v,className:Un(y,oe&&e,i&&`${e}-inline`,r&&`${e}-reverse`,C==="switch"&&t),children:D||H.jsxs(H.Fragment,{children:[R,oe&&H.jsx(Ng,{title:w,children:N}),d&&H.jsx(P_,{type:g,tooltip:f,children:d})]})})})});jO.displayName="FormCheck";const Pg=Object.assign(jO,{Input:sw,Label:Ng}),qO=P.forwardRef(({bsPrefix:n,type:e,size:t,htmlSize:i,id:r,className:a,isValid:l=!1,isInvalid:h=!1,plaintext:f,readOnly:d,as:g="input",...y},v)=>{const{controlId:w}=P.useContext(br);return n=fi(n,"form-control"),H.jsx(g,{...y,type:e,size:i,ref:v,readOnly:d,id:r||w,className:Un(a,f?`${n}-plaintext`:n,t&&`${n}-${t}`,e==="color"&&`${n}-color`,l&&"is-valid",h&&"is-invalid")})});qO.displayName="FormControl";const CG=Object.assign(qO,{Feedback:P_}),HO=P.forwardRef(({className:n,bsPrefix:e,as:t="div",...i},r)=>(e=fi(e,"form-floating"),H.jsx(t,{ref:r,className:Un(n,e),...i})));HO.displayName="FormFloating";const rw=P.forwardRef(({controlId:n,as:e="div",...t},i)=>{const r=P.useMemo(()=>({controlId:n}),[n]);return H.jsx(br.Provider,{value:r,children:H.jsx(e,{...t,ref:i})})});rw.displayName="FormGroup";const GO=P.forwardRef(({as:n="label",bsPrefix:e,column:t=!1,visuallyHidden:i=!1,className:r,htmlFor:a,...l},h)=>{const{controlId:f}=P.useContext(br);e=fi(e,"form-label");let d="col-form-label";typeof t=="string"&&(d=`${d} ${d}-${t}`);const g=Un(r,e,i&&"visually-hidden",t&&d);return a=a||f,t?H.jsx(zf,{ref:h,as:"label",className:g,htmlFor:a,...l}):H.jsx(n,{ref:h,className:g,htmlFor:a,...l})});GO.displayName="FormLabel";const KO=P.forwardRef(({bsPrefix:n,className:e,id:t,...i},r)=>{const{controlId:a}=P.useContext(br);return n=fi(n,"form-range"),H.jsx("input",{...i,type:"range",ref:r,className:Un(e,n),id:t||a})});KO.displayName="FormRange";const $O=P.forwardRef(({bsPrefix:n,size:e,htmlSize:t,className:i,isValid:r=!1,isInvalid:a=!1,id:l,...h},f)=>{const{controlId:d}=P.useContext(br);return n=fi(n,"form-select"),H.jsx("select",{...h,size:t,ref:f,className:Un(i,n,e&&`${n}-${e}`,r&&"is-valid",a&&"is-invalid"),id:l||d})});$O.displayName="FormSelect";const YO=P.forwardRef(({bsPrefix:n,className:e,as:t="small",muted:i,...r},a)=>(n=fi(n,"form-text"),H.jsx(t,{...r,ref:a,className:Un(e,n,i&&"text-muted")})));YO.displayName="FormText";const WO=P.forwardRef((n,e)=>H.jsx(Pg,{...n,ref:e,type:"switch"}));WO.displayName="Switch";const IG=Object.assign(WO,{Input:Pg.Input,Label:Pg.Label}),QO=P.forwardRef(({bsPrefix:n,className:e,children:t,controlId:i,label:r,...a},l)=>(n=fi(n,"form-floating"),H.jsxs(rw,{ref:l,className:Un(e,n),controlId:i,...a,children:[t,H.jsx("label",{htmlFor:i,children:r})]})));QO.displayName="FloatingLabel";const RG={_ref:Mu.any,validated:Mu.bool,as:Mu.elementType},ow=P.forwardRef(({className:n,validated:e,as:t="form",...i},r)=>H.jsx(t,{...i,ref:r,className:Un(n,e&&"was-validated")}));ow.displayName="Form";ow.propTypes=RG;const cu=Object.assign(ow,{Group:rw,Control:CG,Floating:HO,Check:Pg,Switch:IG,Label:GO,Text:YO,Range:KO,Select:$O,FloatingLabel:QO}),aw=P.forwardRef(({bsPrefix:n,className:e,as:t="div",...i},r)=>{const a=fi(n,"row"),l=BO(),h=zO(),f=`${a}-cols`,d=[];return l.forEach(g=>{const y=i[g];delete i[g];let v;y!=null&&typeof y=="object"?{cols:v}=y:v=y;const w=g!==h?`-${g}`:"";v!=null&&d.push(`${f}${w}-${v}`)}),H.jsx(t,{ref:r,...i,className:Un(e,a,...d)})});aw.displayName="Row";const xG="_formLabel_2ak2w_3",DG="_productsContainer_2ak2w_15",NG="_productCard_2ak2w_37",PG="_statusIndicator_2ak2w_73",MG="_statusDot_2ak2w_81",OG="_available_2ak2w_147",VG="_notAvailable_2ak2w_155",kG="_productImage_2ak2w_171",LG="_productInfo_2ak2w_187",UG="_productTitle_2ak2w_197",FG="_productSerial_2ak2w_211",BG="_productStatus_2ak2w_221",zG="_statusText_2ak2w_231",jG="_dateRange_2ak2w_263",qG="_condition_2ak2w_281",HG="_price_2ak2w_303",GG="_priceUsd_2ak2w_315",KG="_priceUah_2ak2w_327",$G="_groupName_2ak2w_337",YG="_name_2ak2w_351",WG="_probel_2ak2w_365",QG="_arrivalDate_2ak2w_415",XG="_deleteBtn_2ak2w_431",tt={formLabel:xG,productsContainer:DG,productCard:NG,statusIndicator:PG,statusDot:MG,available:OG,notAvailable:VG,productImage:kG,productInfo:LG,productTitle:UG,productSerial:FG,productStatus:BG,statusText:zG,dateRange:jG,condition:qG,new:"_new_2ak2w_291",price:HG,priceUsd:GG,priceUah:KG,groupName:$G,name:YG,probel:WG,arrivalDate:QG,deleteBtn:XG},JG=({filteredProducts:n})=>{const e=Gg(),t=i=>{e(fG(i))};return H.jsx(H.Fragment,{children:H.jsx("div",{className:tt.productsContainer,children:n.map(i=>H.jsxs("div",{className:tt.productCard,children:[H.jsx("div",{className:tt.statusIndicator,children:i.status?H.jsx("div",{className:`${tt.statusDot} ${tt.available}`}):H.jsx("div",{className:`${tt.statusDot} ${tt.notAvailable}`})}),H.jsx("div",{className:tt.productImage,children:H.jsx("img",{src:i.photo,alt:i.title,width:40,height:40})}),H.jsxs("div",{className:tt.productInfo,children:[H.jsx("div",{className:tt.productTitle,children:i.title}),H.jsx("div",{className:tt.productSerial,children:i.serialNumber})]}),H.jsx("div",{className:tt.productStatus,children:i.status?H.jsx("span",{className:`${tt.statusText} ${tt.available}`,children:"свободен"}):H.jsx("span",{className:`${tt.statusText} ${tt.notAvailable}`,children:"В ремонте"})}),H.jsxs("div",{className:tt.dateRange,children:[H.jsxs("div",{children:["c:    ",i.guarantee.start]}),H.jsxs("div",{children:["по: ",i.guarantee.end]})]}),H.jsx("div",{className:tt.condition,children:H.jsx("span",{className:tt.new,children:i.isNew===1?"новый":"Б/У"})}),H.jsxs("div",{className:tt.price,children:[H.jsx("div",{className:tt.priceUsd,children:"2 500 $"}),H.jsx("div",{className:tt.priceUah,children:"250 000. 50 UAH"})]}),H.jsx("div",{className:tt.groupName,children:"Длинное предлинное длиннючее название группы"}),i.name?H.jsx("div",{className:tt.name,children:i.name}):H.jsx("div",{className:tt.probel,children:"-"}),H.jsx("div",{className:tt.groupName,children:"Длинное предлинное длиннючее название прихода"}),H.jsxs("div",{className:tt.arrivalDate,children:[H.jsx("span",{children:new Date(i.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),H.jsx("span",{children:new Date(i.date).toLocaleDateString("ru-RU",{day:"2-digit",month:"short",year:"numeric"})}),H.jsx("button",{className:tt.deleteBtn,onClick:()=>t(i.id),children:"🗑️"})]})]},i.id))})})},ZG=()=>{const n=Gg(),e=Ua(FO),t=Ua(cG),i=Ua(hG),[r,a]=P.useState("");console.log("products",e),P.useEffect(()=>{n(iw())},[]);const l=r?e.filter(g=>g.type===r):e,h=g=>{a(g.currentTarget.value)};if(t==="loading")return H.jsx("div",{children:"Loading products..."});if(t==="failed")return H.jsxs("div",{children:["Error: ",i]});const f={serialNumber:123459,isNew:1,photo:"https://baproar.vtexassets.com/arquivos/ids/2069005/image-928323e59f2040b0b9d00210d52a6b6b.jpg?v=638932927540630000",title:"Barcelona",type:"Table",specification:"Specs here",guarantee:{start:"2025-01-01",end:"2026-01-01"},price:[{value:100,symbol:"USD",isDefault:1}],order:"4",date:new Date().toISOString(),name:"Кто то хз кто но кто то ",status:!0},d=()=>{n(dG(f))};return H.jsxs("div",{className:"container-fluid py-4",style:{background:"#f8f9fa"},children:[H.jsxs("div",{className:"d-flex",style:{alignItems:"flex-end",gap:"10px"},children:[H.jsxs("h1",{className:"mb-4",children:["Продукты / ",l.length]}),H.jsx("div",{className:"mb-4 d-flex",children:H.jsxs(aw,{className:"g-3 flex-nowrap",children:[H.jsx(zf,{xs:6,md:12,children:H.jsxs(cu.Group,{className:"d-flex align-items-center gap-2",children:[H.jsx(cu.Label,{className:tt.formLabel,children:"Тип:"}),H.jsxs(cu.Select,{onChange:h,children:[H.jsx("option",{value:"",children:"All"}),H.jsx("option",{value:"Monitors",children:"Monitors"}),H.jsx("option",{value:"Some Think",children:"Some Think"})]})]})}),H.jsx(zf,{xs:6,md:12,children:H.jsxs(cu.Group,{className:"d-flex align-items-center gap-2",children:[H.jsx(cu.Label,{className:tt.formLabel,children:"Спецификация:"}),H.jsx(cu.Select,{children:H.jsx("option",{})})]})})]})})]}),H.jsx(JG,{filteredProducts:l}),H.jsx("button",{onClick:d,className:"btn btn-primary mt-3",children:"add"})]})},eK=()=>H.jsx("div",{children:"Users"}),tK=()=>H.jsx("div",{children:"Settings"}),nK=()=>H.jsx("div",{children:H.jsx("h3",{children:"Error404"})}),iK="_header_19c6z_1",sK="_header__container_19c6z_19",rK="_logo_19c6z_35",oK="_left_container_19c6z_47",aK="_left_19c6z_47",lK="_center_19c6z_79",uK="_search__input_19c6z_89",cK="_right_19c6z_123",hK="_data_container_allDate_19c6z_141",fK="_clockIcon_19c6z_153",Yi={header:iK,header__container:sK,logo:rK,left_container:oK,left:aK,center:lK,search__input:uK,right:cK,data_container_allDate:hK,clockIcon:fK},dK="/testObject/assets/logo-CDE6t0y_.png",mK="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%2020010904//EN'%20'http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd'%3e%3csvg%20version='1.0'%20xmlns='http://www.w3.org/2000/svg'%20width='512.000000pt'%20height='512.000000pt'%20viewBox='0%200%20512.000000%20512.000000'%20preserveAspectRatio='xMidYMid%20meet'%3e%3cmetadata%3e%20Created%20by%20potrace%201.16,%20written%20by%20Peter%20Selinger%202001-2019%20%3c/metadata%3e%3cg%20transform='translate(0.000000,512.000000)%20scale(0.100000,-0.100000)'%20fill='%2345897d'%20stroke='none'%3e%3cpath%20d='M2240%205105%20c-444%20-55%20-852%20-220%20-1220%20-493%20-150%20-112%20-400%20-362%20-512%20-512%20-276%20-372%20-439%20-779%20-494%20-1230%20-17%20-148%20-17%20-472%200%20-620%2055%20-451%20218%20-858%20494%20-1230%20112%20-150%20362%20-400%20512%20-512%20372%20-276%20779%20-439%201230%20-494%20148%20-17%20472%20-17%20620%200%20451%2055%20858%20218%201230%20494%20150%20112%20400%20362%20512%20512%20276%20372%20439%20779%20494%201230%2017%20148%2017%20472%200%20620%20-55%20451%20-218%20858%20-494%201230%20-112%20150%20-362%20400%20-512%20512%20-372%20276%20-779%20439%20-1230%20494%20-143%2017%20-488%2016%20-630%20-1z%20m610%20-159%20c792%20-99%201487%20-585%201848%20-1292%20182%20-358%20262%20-692%20262%20-1094%200%20-402%20-80%20-736%20-262%20-1094%20-328%20-643%20-946%20-1114%20-1657%20-1262%20-286%20-59%20-676%20-59%20-962%200%20-710%20148%20-1329%20619%20-1656%201261%20-183%20359%20-263%20692%20-263%201095%200%20318%2052%20598%20161%20872%20331%20832%201078%201408%201964%201517%20116%2014%20441%2012%20565%20-3z'/%3e%3cpath%20d='M2240%204801%20c-418%20-63%20-812%20-236%20-1117%20-491%20-68%20-56%20-73%20-63%20-73%20-100%200%20-50%2027%20-80%2073%20-80%2026%200%2052%2015%20118%2067%20249%20197%20537%20338%20836%20409%20324%2077%20699%2073%201017%20-11%20720%20-189%201312%20-781%201501%20-1501%2087%20-332%2087%20-736%200%20-1068%20-189%20-720%20-781%20-1312%20-1501%20-1501%20-332%20-87%20-736%20-87%20-1068%200%20-720%20189%20-1312%20781%20-1501%201501%20-84%20318%20-88%20693%20-11%201017%2071%20299%20212%20587%20409%20836%2052%2066%2067%2092%2067%20118%200%2046%20-30%2073%20-80%2073%20-37%200%20-44%20-5%20-100%20-72%20-261%20-313%20-436%20-719%20-494%20-1146%20-21%20-146%20-21%20-435%20-1%20-589%20132%20-1013%20935%20-1816%201948%20-1948%20153%20-20%20441%20-20%20594%200%201013%20132%201816%20935%201948%201948%2020%20153%2020%20441%200%20594%20-132%201013%20-935%201816%20-1948%201948%20-161%2021%20-466%2019%20-617%20-4z'/%3e%3cpath%20d='M2501%204494%20c-12%20-15%20-21%20-37%20-21%20-49%200%20-12%209%20-34%2021%20-49%2016%20-20%2029%20-26%2059%20-26%2030%200%2043%206%2059%2026%2012%2015%2021%2037%2021%2049%200%2012%20-9%2034%20-21%2049%20-16%2020%20-29%2026%20-59%2026%20-30%200%20-43%20-6%20-59%20-26z'/%3e%3cpath%20d='M1562%204247%20c-59%20-63%202%20-154%2084%20-127%2058%2019%2068%20111%2015%20139%20-33%2018%20-76%2013%20-99%20-12z'/%3e%3cpath%20d='M3457%204259%20c-51%20-30%20-40%20-120%2017%20-139%2060%20-20%20106%2014%20106%2078%200%2055%20-72%2091%20-123%2061z'/%3e%3cpath%20d='M1712%203987%20c-13%20-13%20-22%20-36%20-22%20-53%200%20-21%20102%20-207%20345%20-627%20l344%20-597%20-24%20-52%20c-45%20-96%20-28%20-185%2047%20-260%2026%20-27%2054%20-48%2063%20-48%2013%200%2015%20-89%2015%20-849%200%20-843%200%20-848%2021%20-875%2029%20-37%2089%20-37%20118%200%2021%2027%2021%2032%2021%20875%200%20760%202%20849%2015%20849%209%200%2037%2021%2063%2048%2073%2072%2091%20164%2051%20252%20-38%2083%20-102%20128%20-197%20139%20l-54%206%20-343%20595%20c-189%20327%20-351%20600%20-361%20607%20-29%2021%20-78%2016%20-102%20-10z'/%3e%3cpath%20d='M872%203557%20c-59%20-63%202%20-154%2084%20-127%2058%2019%2068%20111%2015%20139%20-33%2018%20-76%2013%20-99%20-12z'/%3e%3cpath%20d='M4147%203569%20c-51%20-30%20-40%20-120%2017%20-139%2060%20-20%20106%2014%20106%2078%200%2055%20-72%2091%20-123%2061z'/%3e%3cpath%20d='M626%202619%20c-37%20-29%20-37%20-89%200%20-118%2015%20-12%2037%20-21%2049%20-21%2012%200%2034%209%2049%2021%2020%2016%2026%2029%2026%2059%200%2030%20-6%2043%20-26%2059%20-15%2012%20-37%2021%20-49%2021%20-12%200%20-34%20-9%20-49%20-21z'/%3e%3cpath%20d='M4396%202619%20c-37%20-29%20-37%20-89%200%20-118%2015%20-12%2037%20-21%2049%20-21%2012%200%2034%209%2049%2021%2037%2029%2037%2089%200%20118%20-15%2012%20-37%2021%20-49%2021%20-12%200%20-34%20-9%20-49%20-21z'/%3e%3cpath%20d='M893%201690%20c-47%20-19%20-58%20-92%20-20%20-128%2025%20-24%2066%20-28%2098%20-11%2052%2027%2043%20119%20-13%20138%20-36%2013%20-36%2013%20-65%201z'/%3e%3cpath%20d='M4158%201689%20c-52%20-20%20-58%20-112%20-9%20-138%2055%20-30%20121%206%20121%2066%200%2058%20-55%2093%20-112%2072z'/%3e%3cpath%20d='M1583%201000%20c-47%20-19%20-58%20-92%20-20%20-128%2025%20-24%2066%20-28%2098%20-11%2052%2027%2043%20119%20-13%20138%20-36%2013%20-36%2013%20-65%201z'/%3e%3cpath%20d='M3468%20999%20c-52%20-20%20-58%20-112%20-9%20-138%2055%20-30%20121%206%20121%2066%200%2058%20-55%2093%20-112%2072z'/%3e%3c/g%3e%3c/svg%3e",pK=()=>{const[n,e]=P.useState(0),t=P.useRef(n);return P.useEffect(()=>{const i=Math.random().toString(36).substring(2),r=MI(T2,`activeSessions/${i}`);OI(r,{connectedAt:gz()}),nz(r).remove();const a=MI(T2,"activeSessions"),l=sz(a,h=>{const f=h.val(),d=f?Object.keys(f).length:0;d!==t.current&&(t.current=d,e(d))});return()=>{l(),OI(r,null).catch(console.error)}},[]),n},lw=P.createContext({});function uw(n){const e=P.useRef(null);return e.current===null&&(e.current=n()),e.current}const cw=typeof window<"u",XO=cw?P.useLayoutEffect:P.useEffect,M_=P.createContext(null);function hw(n,e){n.indexOf(e)===-1&&n.push(e)}function fw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ar=(n,e,t)=>t>e?e:t<n?n:t;let dw=()=>{};const Cr={},JO=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function ZO(n){return typeof n=="object"&&n!==null}const eV=n=>/^0[^.\s]+$/u.test(n);function mw(n){let e;return()=>(e===void 0&&(e=n()),e)}const Oi=n=>n,gK=(n,e)=>t=>e(n(t)),md=(...n)=>n.reduce(gK),jf=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};class pw{constructor(){this.subscriptions=[]}add(e){return hw(this.subscriptions,e),()=>fw(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let a=0;a<r;a++){const l=this.subscriptions[a];l&&l(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ls=n=>n*1e3,Pi=n=>n/1e3;function tV(n,e){return e?n*(1e3/e):0}const nV=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,_K=1e-7,yK=12;function vK(n,e,t,i,r){let a,l,h=0;do l=e+(t-e)/2,a=nV(l,i,r)-n,a>0?t=l:e=l;while(Math.abs(a)>_K&&++h<yK);return l}function pd(n,e,t,i){if(n===e&&t===i)return Oi;const r=a=>vK(a,0,1,n,t);return a=>a===0||a===1?a:nV(r(a),e,i)}const iV=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,sV=n=>e=>1-n(1-e),rV=pd(.33,1.53,.69,.99),gw=sV(rV),oV=iV(gw),aV=n=>(n*=2)<1?.5*gw(n):.5*(2-Math.pow(2,-10*(n-1))),_w=n=>1-Math.sin(Math.acos(n)),lV=sV(_w),uV=iV(_w),TK=pd(.42,0,1,1),EK=pd(0,0,.58,1),cV=pd(.42,0,.58,1),SK=n=>Array.isArray(n)&&typeof n[0]!="number",hV=n=>Array.isArray(n)&&typeof n[0]=="number",wK={linear:Oi,easeIn:TK,easeInOut:cV,easeOut:EK,circIn:_w,circInOut:uV,circOut:lV,backIn:gw,backInOut:oV,backOut:rV,anticipate:aV},bK=n=>typeof n=="string",A2=n=>{if(hV(n)){dw(n.length===4);const[e,t,i,r]=n;return pd(e,t,i,r)}else if(bK(n))return wK[n];return n},up=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function AK(n,e){let t=new Set,i=new Set,r=!1,a=!1;const l=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function f(g){l.has(g)&&(d.schedule(g),n()),g(h)}const d={schedule:(g,y=!1,v=!1)=>{const C=v&&r?t:i;return y&&l.add(g),C.has(g)||C.add(g),g},cancel:g=>{i.delete(g),l.delete(g)},process:g=>{if(h=g,r){a=!0;return}r=!0,[t,i]=[i,t],t.forEach(f),t.clear(),r=!1,a&&(a=!1,d.process(g))}};return d}const CK=40;function fV(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>t=!0,l=up.reduce((k,Z)=>(k[Z]=AK(a),k),{}),{setup:h,read:f,resolveKeyframes:d,preUpdate:g,update:y,preRender:v,render:w,postRender:C}=l,N=()=>{const k=Cr.useManualTiming?r.timestamp:performance.now();t=!1,Cr.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(k-r.timestamp,CK),1)),r.timestamp=k,r.isProcessing=!0,h.process(r),f.process(r),d.process(r),g.process(r),y.process(r),v.process(r),w.process(r),C.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(N))},D=()=>{t=!0,i=!0,r.isProcessing||n(N)};return{schedule:up.reduce((k,Z)=>{const Q=l[Z];return k[Z]=(oe,R=!1,A=!1)=>(t||D(),Q.schedule(oe,R,A)),k},{}),cancel:k=>{for(let Z=0;Z<up.length;Z++)l[up[Z]].cancel(k)},state:r,steps:l}}const{schedule:wt,cancel:Lo,state:Sn,steps:T0}=fV(typeof requestAnimationFrame<"u"?requestAnimationFrame:Oi,!0);let Mp;function IK(){Mp=void 0}const Wn={now:()=>(Mp===void 0&&Wn.set(Sn.isProcessing||Cr.useManualTiming?Sn.timestamp:performance.now()),Mp),set:n=>{Mp=n,queueMicrotask(IK)}},dV=n=>e=>typeof e=="string"&&e.startsWith(n),yw=dV("--"),RK=dV("var(--"),vw=n=>RK(n)?xK.test(n.split("/*")[0].trim()):!1,xK=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},qf={...yc,transform:n=>Ar(0,1,n)},cp={...yc,default:1},uf=n=>Math.round(n*1e5)/1e5,Tw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function DK(n){return n==null}const NK=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ew=(n,e)=>t=>!!(typeof t=="string"&&NK.test(t)&&t.startsWith(n)||e&&!DK(t)&&Object.prototype.hasOwnProperty.call(t,e)),mV=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,a,l,h]=i.match(Tw);return{[n]:parseFloat(r),[e]:parseFloat(a),[t]:parseFloat(l),alpha:h!==void 0?parseFloat(h):1}},PK=n=>Ar(0,255,n),E0={...yc,transform:n=>Math.round(PK(n))},ka={test:Ew("rgb","red"),parse:mV("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+E0.transform(n)+", "+E0.transform(e)+", "+E0.transform(t)+", "+uf(qf.transform(i))+")"};function MK(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const LT={test:Ew("#"),parse:MK,transform:ka.transform},gd=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),mo=gd("deg"),Us=gd("%"),we=gd("px"),OK=gd("vh"),VK=gd("vw"),C2={...Us,parse:n=>Us.parse(n)/100,transform:n=>Us.transform(n*100)},vu={test:Ew("hsl","hue"),parse:mV("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Us.transform(uf(e))+", "+Us.transform(uf(t))+", "+uf(qf.transform(i))+")"},Qt={test:n=>ka.test(n)||LT.test(n)||vu.test(n),parse:n=>ka.test(n)?ka.parse(n):vu.test(n)?vu.parse(n):LT.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?ka.transform(n):vu.transform(n),getAnimatableNone:n=>{const e=Qt.parse(n);return e.alpha=0,Qt.transform(e)}},kK=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function LK(n){return isNaN(n)&&typeof n=="string"&&(n.match(Tw)?.length||0)+(n.match(kK)?.length||0)>0}const pV="number",gV="color",UK="var",FK="var(",I2="${}",BK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Hf(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let a=0;const h=e.replace(BK,f=>(Qt.test(f)?(i.color.push(a),r.push(gV),t.push(Qt.parse(f))):f.startsWith(FK)?(i.var.push(a),r.push(UK),t.push(f)):(i.number.push(a),r.push(pV),t.push(parseFloat(f))),++a,I2)).split(I2);return{values:t,split:h,indexes:i,types:r}}function _V(n){return Hf(n).values}function yV(n){const{split:e,types:t}=Hf(n),i=e.length;return r=>{let a="";for(let l=0;l<i;l++)if(a+=e[l],r[l]!==void 0){const h=t[l];h===pV?a+=uf(r[l]):h===gV?a+=Qt.transform(r[l]):a+=r[l]}return a}}const zK=n=>typeof n=="number"?0:Qt.test(n)?Qt.getAnimatableNone(n):n;function jK(n){const e=_V(n);return yV(n)(e.map(zK))}const Uo={test:LK,parse:_V,createTransformer:yV,getAnimatableNone:jK};function S0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function qK({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,a=0,l=0;if(!e)r=a=l=t;else{const h=t<.5?t*(1+e):t+e-t*e,f=2*t-h;r=S0(f,h,n+1/3),a=S0(f,h,n),l=S0(f,h,n-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:i}}function Mg(n,e){return t=>t>0?e:n}const Ct=(n,e,t)=>n+(e-n)*t,w0=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},HK=[LT,ka,vu],GK=n=>HK.find(e=>e.test(n));function R2(n){const e=GK(n);if(!e)return!1;let t=e.parse(n);return e===vu&&(t=qK(t)),t}const x2=(n,e)=>{const t=R2(n),i=R2(e);if(!t||!i)return Mg(n,e);const r={...t};return a=>(r.red=w0(t.red,i.red,a),r.green=w0(t.green,i.green,a),r.blue=w0(t.blue,i.blue,a),r.alpha=Ct(t.alpha,i.alpha,a),ka.transform(r))},UT=new Set(["none","hidden"]);function KK(n,e){return UT.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function $K(n,e){return t=>Ct(n,e,t)}function Sw(n){return typeof n=="number"?$K:typeof n=="string"?vw(n)?Mg:Qt.test(n)?x2:QK:Array.isArray(n)?vV:typeof n=="object"?Qt.test(n)?x2:YK:Mg}function vV(n,e){const t=[...n],i=t.length,r=n.map((a,l)=>Sw(a)(a,e[l]));return a=>{for(let l=0;l<i;l++)t[l]=r[l](a);return t}}function YK(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=Sw(n[r])(n[r],e[r]));return r=>{for(const a in i)t[a]=i[a](r);return t}}function WK(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const a=e.types[r],l=n.indexes[a][i[a]],h=n.values[l]??0;t[r]=h,i[a]++}return t}const QK=(n,e)=>{const t=Uo.createTransformer(e),i=Hf(n),r=Hf(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?UT.has(n)&&!r.values.length||UT.has(e)&&!i.values.length?KK(n,e):md(vV(WK(i,r),r.values),t):Mg(n,e)};function TV(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Ct(n,e,t):Sw(n)(n,e)}const XK=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>wt.update(e,t),stop:()=>Lo(e),now:()=>Sn.isProcessing?Sn.timestamp:Wn.now()}},EV=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let a=0;a<r;a++)i+=Math.round(n(a/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Og=2e4;function ww(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Og;)e+=t,i=n.next(e);return e>=Og?1/0:e}function JK(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(ww(i),Og);return{type:"keyframes",ease:a=>i.next(r*a).value/e,duration:Pi(r)}}const ZK=5;function SV(n,e,t){const i=Math.max(e-ZK,0);return tV(t-n(i),e-i)}const Nt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},b0=.001;function e$({duration:n=Nt.duration,bounce:e=Nt.bounce,velocity:t=Nt.velocity,mass:i=Nt.mass}){let r,a,l=1-e;l=Ar(Nt.minDamping,Nt.maxDamping,l),n=Ar(Nt.minDuration,Nt.maxDuration,Pi(n)),l<1?(r=d=>{const g=d*l,y=g*n,v=g-t,w=FT(d,l),C=Math.exp(-y);return b0-v/w*C},a=d=>{const y=d*l*n,v=y*t+t,w=Math.pow(l,2)*Math.pow(d,2)*n,C=Math.exp(-y),N=FT(Math.pow(d,2),l);return(-r(d)+b0>0?-1:1)*((v-w)*C)/N}):(r=d=>{const g=Math.exp(-d*n),y=(d-t)*n+1;return-b0+g*y},a=d=>{const g=Math.exp(-d*n),y=(t-d)*(n*n);return g*y});const h=5/n,f=n$(r,a,h);if(n=Ls(n),isNaN(f))return{stiffness:Nt.stiffness,damping:Nt.damping,duration:n};{const d=Math.pow(f,2)*i;return{stiffness:d,damping:l*2*Math.sqrt(i*d),duration:n}}}const t$=12;function n$(n,e,t){let i=t;for(let r=1;r<t$;r++)i=i-n(i)/e(i);return i}function FT(n,e){return n*Math.sqrt(1-e*e)}const i$=["duration","bounce"],s$=["stiffness","damping","mass"];function D2(n,e){return e.some(t=>n[t]!==void 0)}function r$(n){let e={velocity:Nt.velocity,stiffness:Nt.stiffness,damping:Nt.damping,mass:Nt.mass,isResolvedFromDuration:!1,...n};if(!D2(n,s$)&&D2(n,i$))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,a=2*Ar(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:Nt.mass,stiffness:r,damping:a}}else{const t=e$(n);e={...e,...t,mass:Nt.mass},e.isResolvedFromDuration=!0}return e}function Vg(n=Nt.visualDuration,e=Nt.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const a=t.keyframes[0],l=t.keyframes[t.keyframes.length-1],h={done:!1,value:a},{stiffness:f,damping:d,mass:g,duration:y,velocity:v,isResolvedFromDuration:w}=r$({...t,velocity:-Pi(t.velocity||0)}),C=v||0,N=d/(2*Math.sqrt(f*g)),D=l-a,U=Pi(Math.sqrt(f/g)),z=Math.abs(D)<5;i||(i=z?Nt.restSpeed.granular:Nt.restSpeed.default),r||(r=z?Nt.restDelta.granular:Nt.restDelta.default);let k;if(N<1){const Q=FT(U,N);k=oe=>{const R=Math.exp(-N*U*oe);return l-R*((C+N*U*D)/Q*Math.sin(Q*oe)+D*Math.cos(Q*oe))}}else if(N===1)k=Q=>l-Math.exp(-U*Q)*(D+(C+U*D)*Q);else{const Q=U*Math.sqrt(N*N-1);k=oe=>{const R=Math.exp(-N*U*oe),A=Math.min(Q*oe,300);return l-R*((C+N*U*D)*Math.sinh(A)+Q*D*Math.cosh(A))/Q}}const Z={calculatedDuration:w&&y||null,next:Q=>{const oe=k(Q);if(w)h.done=Q>=y;else{let R=Q===0?C:0;N<1&&(R=Q===0?Ls(C):SV(k,Q,oe));const A=Math.abs(R)<=i,x=Math.abs(l-oe)<=r;h.done=A&&x}return h.value=h.done?l:oe,h},toString:()=>{const Q=Math.min(ww(Z),Og),oe=EV(R=>Z.next(Q*R).value,Q,30);return Q+"ms "+oe},toTransition:()=>{}};return Z}Vg.applyToOptions=n=>{const e=JK(n,100,Vg);return n.ease=e.ease,n.duration=Ls(e.duration),n.type="keyframes",n};function BT({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:l,min:h,max:f,restDelta:d=.5,restSpeed:g}){const y=n[0],v={done:!1,value:y},w=A=>h!==void 0&&A<h||f!==void 0&&A>f,C=A=>h===void 0?f:f===void 0||Math.abs(h-A)<Math.abs(f-A)?h:f;let N=t*e;const D=y+N,U=l===void 0?D:l(D);U!==D&&(N=U-y);const z=A=>-N*Math.exp(-A/i),k=A=>U+z(A),Z=A=>{const x=z(A),L=k(A);v.done=Math.abs(x)<=d,v.value=v.done?U:L};let Q,oe;const R=A=>{w(v.value)&&(Q=A,oe=Vg({keyframes:[v.value,C(v.value)],velocity:SV(k,A,v.value),damping:r,stiffness:a,restDelta:d,restSpeed:g}))};return R(0),{calculatedDuration:null,next:A=>{let x=!1;return!oe&&Q===void 0&&(x=!0,Z(A),R(A)),Q!==void 0&&A>=Q?oe.next(A-Q):(!x&&Z(A),v)}}}function o$(n,e,t){const i=[],r=t||Cr.mix||TV,a=n.length-1;for(let l=0;l<a;l++){let h=r(n[l],n[l+1]);if(e){const f=Array.isArray(e)?e[l]||Oi:e;h=md(f,h)}i.push(h)}return i}function a$(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const a=n.length;if(dw(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=n[0]===n[1];n[0]>n[a-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=o$(e,i,r),f=h.length,d=g=>{if(l&&g<n[0])return e[0];let y=0;if(f>1)for(;y<n.length-2&&!(g<n[y+1]);y++);const v=jf(n[y],n[y+1],g);return h[y](v)};return t?g=>d(Ar(n[0],n[a-1],g)):d}function l$(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=jf(0,e,i);n.push(Ct(t,1,r))}}function u$(n){const e=[0];return l$(e,n.length-1),e}function c$(n,e){return n.map(t=>t*e)}function h$(n,e){return n.map(()=>e||cV).splice(0,n.length-1)}function cf({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=SK(i)?i.map(A2):A2(i),a={done:!1,value:e[0]},l=c$(t&&t.length===e.length?t:u$(e),n),h=a$(l,e,{ease:Array.isArray(r)?r:h$(e,r)});return{calculatedDuration:n,next:f=>(a.value=h(f),a.done=f>=n,a)}}const f$=n=>n!==null;function bw(n,{repeat:e,repeatType:t="loop"},i,r=1){const a=n.filter(f$),h=r<0||e&&t!=="loop"&&e%2===1?0:a.length-1;return!h||i===void 0?a[h]:i}const d$={decay:BT,inertia:BT,tween:cf,keyframes:cf,spring:Vg};function wV(n){typeof n.type=="string"&&(n.type=d$[n.type])}class Aw{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const m$=n=>n/100;class Cw extends Aw{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Wn.now()&&this.tick(Wn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;wV(e);const{type:t=cf,repeat:i=0,repeatDelay:r=0,repeatType:a,velocity:l=0}=e;let{keyframes:h}=e;const f=t||cf;f!==cf&&typeof h[0]!="number"&&(this.mixKeyframes=md(m$,TV(h[0],h[1])),h=[0,100]);const d=f({...e,keyframes:h});a==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...h].reverse(),velocity:-l})),d.calculatedDuration===null&&(d.calculatedDuration=ww(d));const{calculatedDuration:g}=d;this.calculatedDuration=g,this.resolvedDuration=g+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=d}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:h,calculatedDuration:f}=this;if(this.startTime===null)return i.next(0);const{delay:d=0,keyframes:g,repeat:y,repeatType:v,repeatDelay:w,type:C,onUpdate:N,finalKeyframe:D}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const U=this.currentTime-d*(this.playbackSpeed>=0?1:-1),z=this.playbackSpeed>=0?U<0:U>r;this.currentTime=Math.max(U,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let k=this.currentTime,Z=i;if(y){const A=Math.min(this.currentTime,r)/h;let x=Math.floor(A),L=A%1;!L&&A>=1&&(L=1),L===1&&x--,x=Math.min(x,y+1),!!(x%2)&&(v==="reverse"?(L=1-L,w&&(L-=w/h)):v==="mirror"&&(Z=l)),k=Ar(0,1,L)*h}const Q=z?{done:!1,value:g[0]}:Z.next(k);a&&(Q.value=a(Q.value));let{done:oe}=Q;!z&&f!==null&&(oe=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&oe);return R&&C!==BT&&(Q.value=bw(g,this.options,D,this.speed)),N&&N(Q.value),R&&this.finish(),Q}then(e,t){return this.finished.then(e,t)}get duration(){return Pi(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Pi(e)}get time(){return Pi(this.currentTime)}set time(e){e=Ls(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Wn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Pi(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=XK,startTime:t}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Wn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function p$(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const La=n=>n*180/Math.PI,zT=n=>{const e=La(Math.atan2(n[1],n[0]));return jT(e)},g$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:zT,rotateZ:zT,skewX:n=>La(Math.atan(n[1])),skewY:n=>La(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},jT=n=>(n=n%360,n<0&&(n+=360),n),N2=zT,P2=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),M2=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),_$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:P2,scaleY:M2,scale:n=>(P2(n)+M2(n))/2,rotateX:n=>jT(La(Math.atan2(n[6],n[5]))),rotateY:n=>jT(La(Math.atan2(-n[2],n[0]))),rotateZ:N2,rotate:N2,skewX:n=>La(Math.atan(n[4])),skewY:n=>La(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function qT(n){return n.includes("scale")?1:0}function HT(n,e){if(!n||n==="none")return qT(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=_$,r=t;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=g$,r=h}if(!r)return qT(e);const a=i[e],l=r[1].split(",").map(v$);return typeof a=="function"?a(l):l[a]}const y$=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return HT(t,e)};function v$(n){return parseFloat(n.trim())}const vc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Tc=new Set(vc),O2=n=>n===yc||n===we,T$=new Set(["x","y","z"]),E$=vc.filter(n=>!T$.has(n));function S$(n){const e=[];return E$.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const Ha={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>HT(e,"x"),y:(n,{transform:e})=>HT(e,"y")};Ha.translateX=Ha.x;Ha.translateY=Ha.y;const Ga=new Set;let GT=!1,KT=!1,$T=!1;function bV(){if(KT){const n=Array.from(Ga).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=S$(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([a,l])=>{i.getValue(a)?.set(l)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}KT=!1,GT=!1,Ga.forEach(n=>n.complete($T)),Ga.clear()}function AV(){Ga.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(KT=!0)})}function w$(){$T=!0,AV(),bV(),$T=!1}class Iw{constructor(e,t,i,r,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Ga.add(this),GT||(GT=!0,wt.read(AV),wt.resolveKeyframes(bV))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const a=r?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&t){const h=i.readValue(t,l);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=l),r&&a===void 0&&r.set(e[0])}p$(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ga.delete(this)}cancel(){this.state==="scheduled"&&(Ga.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const b$=n=>n.startsWith("--");function A$(n,e,t){b$(e)?n.style.setProperty(e,t):n.style[e]=t}const C$=mw(()=>window.ScrollTimeline!==void 0),I$={};function R$(n,e){const t=mw(n);return()=>I$[e]??t()}const CV=R$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gh=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,V2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gh([0,.65,.55,1]),circOut:Gh([.55,0,1,.45]),backIn:Gh([.31,.01,.66,-.59]),backOut:Gh([.33,1.53,.69,.99])};function IV(n,e){if(n)return typeof n=="function"?CV()?EV(n,e):"ease-out":hV(n)?Gh(n):Array.isArray(n)?n.map(t=>IV(t,e)||V2.easeOut):V2[n]}function x$(n,e,t,{delay:i=0,duration:r=300,repeat:a=0,repeatType:l="loop",ease:h="easeOut",times:f}={},d=void 0){const g={[e]:t};f&&(g.offset=f);const y=IV(h,r);Array.isArray(y)&&(g.easing=y);const v={delay:i,duration:r,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return d&&(v.pseudoElement=d),n.animate(g,v)}function RV(n){return typeof n=="function"&&"applyToOptions"in n}function D$({type:n,...e}){return RV(n)&&CV()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class N$ extends Aw{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:h,onComplete:f}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,dw(typeof e.type!="string");const d=D$(e);this.animation=x$(t,i,r,d,a),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=bw(r,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):A$(t,i,g),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Pi(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Pi(e)}get time(){return Pi(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ls(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&C$()?(this.animation.timeline=e,Oi):t(this)}}const xV={anticipate:aV,backInOut:oV,circInOut:uV};function P$(n){return n in xV}function M$(n){typeof n.ease=="string"&&P$(n.ease)&&(n.ease=xV[n.ease])}const k2=10;class O$ extends N${constructor(e){M$(e),wV(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:a,...l}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const h=new Cw({...l,autoplay:!1}),f=Ls(this.finishedTime??this.time);t.setWithVelocity(h.sample(f-k2).value,h.sample(f).value,k2),h.stop()}}const L2=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Uo.test(n)||n==="0")&&!n.startsWith("url("));function V$(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function k$(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const a=n[n.length-1],l=L2(r,e),h=L2(a,e);return!l||!h?!1:V$(n)||(t==="spring"||RV(t))&&i}function YT(n){n.duration=0,n.type="keyframes"}const L$=new Set(["opacity","clipPath","filter","transform"]),U$=mw(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function F$(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:a,type:l}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:d}=e.owner.getProps();return U$()&&t&&L$.has(t)&&(t!=="transform"||!d)&&!f&&!i&&r!=="mirror"&&a!==0&&l!=="inertia"}const B$=40;class z$ extends Aw{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:l="loop",keyframes:h,name:f,motionValue:d,element:g,...y}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Wn.now();const v={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:a,repeatType:l,name:f,motionValue:d,element:g,...y},w=g?.KeyframeResolver||Iw;this.keyframeResolver=new w(h,(C,N,D)=>this.onKeyframesResolved(C,N,v,!D),f,d,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:a,type:l,velocity:h,delay:f,isHandoff:d,onUpdate:g}=i;this.resolvedAt=Wn.now(),k$(e,a,l,h)||((Cr.instantAnimations||!f)&&g?.(bw(e,i,t)),e[0]=e[e.length-1],YT(i),i.repeat=0);const v={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>B$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},w=!d&&F$(v)?new O$({...v,element:v.motionValue.owner.current}):new Cw(v);w.finished.then(()=>this.notifyFinished()).catch(Oi),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),w$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const j$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function q$(n){const e=j$.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function DV(n,e,t=1){const[i,r]=q$(n);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const l=a.trim();return JO(l)?parseFloat(l):l}return vw(r)?DV(r,e,t+1):r}function Rw(n,e){return n?.[e]??n?.default??n}const NV=new Set(["width","height","top","left","right","bottom",...vc]),H$={test:n=>n==="auto",parse:n=>n},PV=n=>e=>e.test(n),MV=[yc,we,Us,mo,VK,OK,H$],U2=n=>MV.find(PV(n));function G$(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||eV(n):!0}const K$=new Set(["brightness","contrast","saturate","opacity"]);function $$(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Tw)||[];if(!i)return n;const r=t.replace(i,"");let a=K$.has(e)?1:0;return i!==t&&(a*=100),e+"("+a+r+")"}const Y$=/\b([a-z-]*)\(.*?\)/gu,WT={...Uo,getAnimatableNone:n=>{const e=n.match(Y$);return e?e.map($$).join(" "):n}},F2={...yc,transform:Math.round},W$={rotate:mo,rotateX:mo,rotateY:mo,rotateZ:mo,scale:cp,scaleX:cp,scaleY:cp,scaleZ:cp,skew:mo,skewX:mo,skewY:mo,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:qf,originX:C2,originY:C2,originZ:we},xw={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,backgroundPositionX:we,backgroundPositionY:we,...W$,zIndex:F2,fillOpacity:qf,strokeOpacity:qf,numOctaves:F2},Q$={...xw,color:Qt,backgroundColor:Qt,outlineColor:Qt,fill:Qt,stroke:Qt,borderColor:Qt,borderTopColor:Qt,borderRightColor:Qt,borderBottomColor:Qt,borderLeftColor:Qt,filter:WT,WebkitFilter:WT},OV=n=>Q$[n];function VV(n,e){let t=OV(n);return t!==WT&&(t=Uo),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const X$=new Set(["auto","none","0"]);function J$(n,e,t){let i=0,r;for(;i<n.length&&!r;){const a=n[i];typeof a=="string"&&!X$.has(a)&&Hf(a).values.length&&(r=n[i]),i++}if(r&&t)for(const a of e)n[a]=VV(t,r)}class Z$ extends Iw{constructor(e,t,i,r,a){super(e,t,i,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let d=e[f];if(typeof d=="string"&&(d=d.trim(),vw(d))){const g=DV(d,t.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!NV.has(i)||e.length!==2)return;const[r,a]=e,l=U2(r),h=U2(a);if(l!==h)if(O2(l)&&O2(h))for(let f=0;f<e.length;f++){const d=e[f];typeof d=="string"&&(e[f]=parseFloat(d))}else Ha[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||G$(e[r]))&&i.push(r);i.length&&J$(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ha[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const a=i.length-1,l=i[a];i[a]=Ha[t](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function eY(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let i=document;const r=t?.[n]??i.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}const kV=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function LV(n){return ZO(n)&&"offsetHeight"in n}const B2=30,tY=n=>!isNaN(parseFloat(n));class nY{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=Wn.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Wn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=tY(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new pw);const i=this.events[e].add(t);return e==="change"?()=>{i(),wt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Wn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>B2)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,B2);return tV(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ic(n,e){return new nY(n,e)}const{schedule:Dw}=fV(queueMicrotask,!1),Wi={x:!1,y:!1};function UV(){return Wi.x||Wi.y}function iY(n){return n==="x"||n==="y"?Wi[n]?null:(Wi[n]=!0,()=>{Wi[n]=!1}):Wi.x||Wi.y?null:(Wi.x=Wi.y=!0,()=>{Wi.x=Wi.y=!1})}function FV(n,e){const t=eY(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function z2(n){return!(n.pointerType==="touch"||UV())}function sY(n,e,t={}){const[i,r,a]=FV(n,t),l=h=>{if(!z2(h))return;const{target:f}=h,d=e(f,h);if(typeof d!="function"||!f)return;const g=y=>{z2(y)&&(d(y),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,r)};return i.forEach(h=>{h.addEventListener("pointerenter",l,r)}),a}const BV=(n,e)=>e?n===e?!0:BV(n,e.parentElement):!1,Nw=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,rY=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function oY(n){return rY.has(n.tagName)||n.tabIndex!==-1}const Op=new WeakSet;function j2(n){return e=>{e.key==="Enter"&&n(e)}}function A0(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const aY=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=j2(()=>{if(Op.has(t))return;A0(t,"down");const r=j2(()=>{A0(t,"up")}),a=()=>A0(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",a,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function q2(n){return Nw(n)&&!UV()}function lY(n,e,t={}){const[i,r,a]=FV(n,t),l=h=>{const f=h.currentTarget;if(!q2(h))return;Op.add(f);const d=e(f,h),g=(w,C)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),Op.has(f)&&Op.delete(f),q2(w)&&typeof d=="function"&&d(w,{success:C})},y=w=>{g(w,f===window||f===document||t.useGlobalTarget||BV(f,w.target))},v=w=>{g(w,!1)};window.addEventListener("pointerup",y,r),window.addEventListener("pointercancel",v,r)};return i.forEach(h=>{(t.useGlobalTarget?window:h).addEventListener("pointerdown",l,r),LV(h)&&(h.addEventListener("focus",d=>aY(d,r)),!oY(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),a}function zV(n){return ZO(n)&&"ownerSVGElement"in n}function uY(n){return zV(n)&&n.tagName==="svg"}const Rn=n=>!!(n&&n.getVelocity),cY=[...MV,Qt,Uo],hY=n=>cY.find(PV(n)),Pw=P.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function H2(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function fY(...n){return e=>{let t=!1;const i=n.map(r=>{const a=H2(r,e);return!t&&typeof a=="function"&&(t=!0),a});if(t)return()=>{for(let r=0;r<i.length;r++){const a=i[r];typeof a=="function"?a():H2(n[r],null)}}}}function dY(...n){return P.useCallback(fY(...n),n)}class mY extends P.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=t.offsetParent,r=LV(i)&&i.offsetWidth||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function pY({children:n,isPresent:e,anchorX:t,root:i}){const r=P.useId(),a=P.useRef(null),l=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=P.useContext(Pw),f=dY(a,n?.ref);return P.useInsertionEffect(()=>{const{width:d,height:g,top:y,left:v,right:w}=l.current;if(e||!a.current||!d||!g)return;const C=t==="left"?`left: ${v}`:`right: ${w}`;a.current.dataset.motionPopId=r;const N=document.createElement("style");h&&(N.nonce=h);const D=i??document.head;return D.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${g}px !important;
            ${C}px !important;
            top: ${y}px !important;
          }
        `),()=>{D.contains(N)&&D.removeChild(N)}},[e]),H.jsx(mY,{isPresent:e,childRef:a,sizeRef:l,children:P.cloneElement(n,{ref:f})})}const gY=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:a,mode:l,anchorX:h,root:f})=>{const d=uw(_Y),g=P.useId();let y=!0,v=P.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:t,custom:r,onExitComplete:w=>{d.set(w,!0);for(const C of d.values())if(!C)return;i&&i()},register:w=>(d.set(w,!1),()=>d.delete(w))}),[t,d,i]);return a&&y&&(v={...v}),P.useMemo(()=>{d.forEach((w,C)=>d.set(C,!1))},[t]),P.useEffect(()=>{!t&&!d.size&&i&&i()},[t]),l==="popLayout"&&(n=H.jsx(pY,{isPresent:t,anchorX:h,root:f,children:n})),H.jsx(M_.Provider,{value:v,children:n})};function _Y(){return new Map}function jV(n=!0){const e=P.useContext(M_);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,a=P.useId();P.useEffect(()=>{if(n)return r(a)},[n]);const l=P.useCallback(()=>n&&i&&i(a),[a,i,n]);return!t&&i?[!1,l]:[!0]}const hp=n=>n.key||"";function G2(n){const e=[];return P.Children.forEach(n,t=>{P.isValidElement(t)&&e.push(t)}),e}const yY=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:a="sync",propagate:l=!1,anchorX:h="left",root:f})=>{const[d,g]=jV(l),y=P.useMemo(()=>G2(n),[n]),v=l&&!d?[]:y.map(hp),w=P.useRef(!0),C=P.useRef(y),N=uw(()=>new Map),[D,U]=P.useState(y),[z,k]=P.useState(y);XO(()=>{w.current=!1,C.current=y;for(let oe=0;oe<z.length;oe++){const R=hp(z[oe]);v.includes(R)?N.delete(R):N.get(R)!==!0&&N.set(R,!1)}},[z,v.length,v.join("-")]);const Z=[];if(y!==D){let oe=[...y];for(let R=0;R<z.length;R++){const A=z[R],x=hp(A);v.includes(x)||(oe.splice(R,0,A),Z.push(A))}return a==="wait"&&Z.length&&(oe=Z),k(G2(oe)),U(y),null}const{forceRender:Q}=P.useContext(lw);return H.jsx(H.Fragment,{children:z.map(oe=>{const R=hp(oe),A=l&&!d?!1:y===z||v.includes(R),x=()=>{if(N.has(R))N.set(R,!0);else return;let L=!0;N.forEach(V=>{V||(L=!1)}),L&&(Q?.(),k(C.current),l&&g?.(),i&&i())};return H.jsx(gY,{isPresent:A,initial:!w.current||t?void 0:!1,custom:e,presenceAffectsLayout:r,mode:a,root:f,onExitComplete:A?void 0:x,anchorX:h,children:oe},R)})})},qV=P.createContext({strict:!1}),K2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},sc={};for(const n in K2)sc[n]={isEnabled:e=>K2[n].some(t=>!!e[t])};function vY(n){for(const e in n)sc[e]={...sc[e],...n[e]}}const TY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function kg(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||TY.has(n)}let HV=n=>!kg(n);function EY(n){typeof n=="function"&&(HV=e=>e.startsWith("on")?!kg(e):n(e))}try{EY(require("@emotion/is-prop-valid").default)}catch{}function SY(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(HV(r)||t===!0&&kg(r)||!e&&!kg(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}const O_=P.createContext({});function V_(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Gf(n){return typeof n=="string"||Array.isArray(n)}const Mw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ow=["initial",...Mw];function k_(n){return V_(n.animate)||Ow.some(e=>Gf(n[e]))}function GV(n){return!!(k_(n)||n.variants)}function wY(n,e){if(k_(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Gf(t)?t:void 0,animate:Gf(i)?i:void 0}}return n.inherit!==!1?e:{}}function bY(n){const{initial:e,animate:t}=wY(n,P.useContext(O_));return P.useMemo(()=>({initial:e,animate:t}),[$2(e),$2(t)])}function $2(n){return Array.isArray(n)?n.join(" "):n}const Kf={};function AY(n){for(const e in n)Kf[e]=n[e],yw(e)&&(Kf[e].isCSSVariable=!0)}function KV(n,{layout:e,layoutId:t}){return Tc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Kf[n]||n==="opacity")}const CY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},IY=vc.length;function RY(n,e,t){let i="",r=!0;for(let a=0;a<IY;a++){const l=vc[a],h=n[l];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(l.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||t){const d=kV(h,xw[l]);if(!f){r=!1;const g=CY[l]||l;i+=`${g}(${d}) `}t&&(e[l]=d)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function Vw(n,e,t){const{style:i,vars:r,transformOrigin:a}=n;let l=!1,h=!1;for(const f in e){const d=e[f];if(Tc.has(f)){l=!0;continue}else if(yw(f)){r[f]=d;continue}else{const g=kV(d,xw[f]);f.startsWith("origin")?(h=!0,a[f]=g):i[f]=g}}if(e.transform||(l||t?i.transform=RY(e,n.transform,t):i.transform&&(i.transform="none")),h){const{originX:f="50%",originY:d="50%",originZ:g=0}=a;i.transformOrigin=`${f} ${d} ${g}`}}const kw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $V(n,e,t){for(const i in e)!Rn(e[i])&&!KV(i,t)&&(n[i]=e[i])}function xY({transformTemplate:n},e){return P.useMemo(()=>{const t=kw();return Vw(t,e,n),Object.assign({},t.vars,t.style)},[e])}function DY(n,e){const t=n.style||{},i={};return $V(i,t,n),Object.assign(i,xY(n,e)),i}function NY(n,e){const t={},i=DY(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const PY={offset:"stroke-dashoffset",array:"stroke-dasharray"},MY={offset:"strokeDashoffset",array:"strokeDasharray"};function OY(n,e,t=1,i=0,r=!0){n.pathLength=1;const a=r?PY:MY;n[a.offset]=we.transform(-i);const l=we.transform(e),h=we.transform(t);n[a.array]=`${l} ${h}`}function YV(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:a=1,pathOffset:l=0,...h},f,d,g){if(Vw(n,h,d),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:v}=n;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=g?.transformBox??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),i!==void 0&&(y.scale=i),r!==void 0&&OY(y,r,a,l,!1)}const WV=()=>({...kw(),attrs:{}}),QV=n=>typeof n=="string"&&n.toLowerCase()==="svg";function VY(n,e,t,i){const r=P.useMemo(()=>{const a=WV();return YV(a,e,QV(i),n.transformTemplate,n.style),{...a.attrs,style:{...a.style}}},[e]);if(n.style){const a={};$V(a,n.style,n),r.style={...a,...r.style}}return r}const kY=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Lw(n){return typeof n!="string"||n.includes("-")?!1:!!(kY.indexOf(n)>-1||/[A-Z]/u.test(n))}function LY(n,e,t,{latestValues:i},r,a=!1){const h=(Lw(n)?VY:NY)(e,i,r,n),f=SY(e,typeof n=="string",a),d=n!==P.Fragment?{...f,...h,ref:t}:{},{children:g}=e,y=P.useMemo(()=>Rn(g)?g.get():g,[g]);return P.createElement(n,{...d,children:y})}function Y2(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function Uw(n,e,t,i){if(typeof e=="function"){const[r,a]=Y2(i);e=e(t!==void 0?t:n.custom,r,a)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,a]=Y2(i);e=e(t!==void 0?t:n.custom,r,a)}return e}function Vp(n){return Rn(n)?n.get():n}function UY({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:FY(t,i,r,n),renderState:e()}}function FY(n,e,t,i){const r={},a=i(n,{});for(const v in a)r[v]=Vp(a[v]);let{initial:l,animate:h}=n;const f=k_(n),d=GV(n);e&&d&&!f&&n.inherit!==!1&&(l===void 0&&(l=e.initial),h===void 0&&(h=e.animate));let g=t?t.initial===!1:!1;g=g||l===!1;const y=g?h:l;if(y&&typeof y!="boolean"&&!V_(y)){const v=Array.isArray(y)?y:[y];for(let w=0;w<v.length;w++){const C=Uw(n,v[w]);if(C){const{transitionEnd:N,transition:D,...U}=C;for(const z in U){let k=U[z];if(Array.isArray(k)){const Z=g?k.length-1:0;k=k[Z]}k!==null&&(r[z]=k)}for(const z in N)r[z]=N[z]}}}return r}const XV=n=>(e,t)=>{const i=P.useContext(O_),r=P.useContext(M_),a=()=>UY(n,e,i,r);return t?a():uw(a)};function Fw(n,e,t){const{style:i}=n,r={};for(const a in i)(Rn(i[a])||e.style&&Rn(e.style[a])||KV(a,n)||t?.getValue(a)?.liveStyle!==void 0)&&(r[a]=i[a]);return r}const BY=XV({scrapeMotionValuesFromProps:Fw,createRenderState:kw});function JV(n,e,t){const i=Fw(n,e,t);for(const r in n)if(Rn(n[r])||Rn(e[r])){const a=vc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[a]=n[r]}return i}const zY=XV({scrapeMotionValuesFromProps:JV,createRenderState:WV}),jY=Symbol.for("motionComponentSymbol");function Tu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function qY(n,e,t){return P.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Tu(t)&&(t.current=i))},[e])}const Bw=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),HY="framerAppearId",ZV="data-"+Bw(HY),ek=P.createContext({});function GY(n,e,t,i,r){const{visualElement:a}=P.useContext(O_),l=P.useContext(qV),h=P.useContext(M_),f=P.useContext(Pw).reducedMotion,d=P.useRef(null);i=i||l.renderer,!d.current&&i&&(d.current=i(n,{visualState:e,parent:a,props:t,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const g=d.current,y=P.useContext(ek);g&&!g.projection&&r&&(g.type==="html"||g.type==="svg")&&KY(d.current,t,r,y);const v=P.useRef(!1);P.useInsertionEffect(()=>{g&&v.current&&g.update(t,h)});const w=t[ZV],C=P.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return XO(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),C.current&&g.animationState&&g.animationState.animateChanges())}),P.useEffect(()=>{g&&(!C.current&&g.animationState&&g.animationState.animateChanges(),C.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),C.current=!1),g.enteringChildren=void 0)}),g}function KY(n,e,t,i){const{layoutId:r,layout:a,drag:l,dragConstraints:h,layoutScroll:f,layoutRoot:d,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:tk(n.parent)),n.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!l||h&&Tu(h),visualElement:n,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,crossfade:g,layoutScroll:f,layoutRoot:d})}function tk(n){if(n)return n.options.allowProjection!==!1?n.projection:tk(n.parent)}function C0(n,{forwardMotionProps:e=!1}={},t,i){t&&vY(t);const r=Lw(n)?zY:BY;function a(h,f){let d;const g={...P.useContext(Pw),...h,layoutId:$Y(h)},{isStatic:y}=g,v=bY(h),w=r(h,y);if(!y&&cw){YY();const C=WY(g);d=C.MeasureLayout,v.visualElement=GY(n,w,g,i,C.ProjectionNode)}return H.jsxs(O_.Provider,{value:v,children:[d&&v.visualElement?H.jsx(d,{visualElement:v.visualElement,...g}):null,LY(n,h,qY(w,v.visualElement,f),w,y,e)]})}a.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const l=P.forwardRef(a);return l[jY]=n,l}function $Y({layoutId:n}){const e=P.useContext(lw).id;return e&&n!==void 0?e+"-"+n:n}function YY(n,e){P.useContext(qV).strict}function WY(n){const{drag:e,layout:t}=sc;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function QY(n,e){if(typeof Proxy>"u")return C0;const t=new Map,i=(a,l)=>C0(a,l,n,e),r=(a,l)=>i(a,l);return new Proxy(r,{get:(a,l)=>l==="create"?i:(t.has(l)||t.set(l,C0(l,void 0,n,e)),t.get(l))})}function nk({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function XY({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function JY(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function I0(n){return n===void 0||n===1}function QT({scale:n,scaleX:e,scaleY:t}){return!I0(n)||!I0(e)||!I0(t)}function Ra(n){return QT(n)||ik(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function ik(n){return W2(n.x)||W2(n.y)}function W2(n){return n&&n!=="0%"}function Lg(n,e,t){const i=n-t,r=e*i;return t+r}function Q2(n,e,t,i,r){return r!==void 0&&(n=Lg(n,r,i)),Lg(n,t,i)+e}function XT(n,e=0,t=1,i,r){n.min=Q2(n.min,e,t,i,r),n.max=Q2(n.max,e,t,i,r)}function sk(n,{x:e,y:t}){XT(n.x,e.translate,e.scale,e.originPoint),XT(n.y,t.translate,t.scale,t.originPoint)}const X2=.999999999999,J2=1.0000000000001;function ZY(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let a,l;for(let h=0;h<r;h++){a=t[h],l=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Su(n,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,sk(n,l)),i&&Ra(a.latestValues)&&Su(n,a.latestValues))}e.x<J2&&e.x>X2&&(e.x=1),e.y<J2&&e.y>X2&&(e.y=1)}function Eu(n,e){n.min=n.min+e,n.max=n.max+e}function Z2(n,e,t,i,r=.5){const a=Ct(n.min,n.max,r);XT(n,e,t,a,i)}function Su(n,e){Z2(n.x,e.x,e.scaleX,e.scale,e.originX),Z2(n.y,e.y,e.scaleY,e.scale,e.originY)}function rk(n,e){return nk(JY(n.getBoundingClientRect(),e))}function eW(n,e,t){const i=rk(n,t),{scroll:r}=e;return r&&(Eu(i.x,r.offset.x),Eu(i.y,r.offset.y)),i}const ex=()=>({translate:0,scale:1,origin:0,originPoint:0}),wu=()=>({x:ex(),y:ex()}),tx=()=>({min:0,max:0}),Lt=()=>({x:tx(),y:tx()}),JT={current:null},ok={current:!1};function tW(){if(ok.current=!0,!!cw)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>JT.current=n.matches;n.addEventListener("change",e),e()}else JT.current=!1}const nW=new WeakMap;function iW(n,e,t){for(const i in e){const r=e[i],a=t[i];if(Rn(r))n.addValue(i,r);else if(Rn(a))n.addValue(i,ic(r,{owner:n}));else if(a!==r)if(n.hasValue(i)){const l=n.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=n.getStaticValue(i);n.addValue(i,ic(l!==void 0?l:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const nx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class sW{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:a,visualState:l},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Iw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Wn.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,wt.render(this.render,!1,!0))};const{latestValues:f,renderState:d}=l;this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=k_(t),this.isVariantNode=GV(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in y){const w=y[v];f[v]!==void 0&&Rn(w)&&w.set(f[v])}}mount(e){this.current=e,nW.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),ok.current||tW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:JT.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Lo(this.notifyUpdate),Lo(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Tc.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&wt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),a&&a(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in sc){const t=sc[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Lt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<nx.length;i++){const r=nx[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,l=e[a];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=iW(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=ic(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(JO(i)||eV(i))?i=parseFloat(i):!hY(i)&&Uo.test(t)&&(i=VV(e,t)),this.setBaseTarget(e,Rn(i)?i.get():i)),Rn(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const a=Uw(this.props,t,this.presenceContext?.custom);a&&(i=a[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Rn(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new pw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){Dw.render(this.render)}}class ak extends sW{constructor(){super(...arguments),this.KeyframeResolver=Z$}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Rn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function lk(n,{style:e,vars:t},i,r){const a=n.style;let l;for(l in e)a[l]=e[l];r?.applyProjectionStyles(a,i);for(l in t)a.setProperty(l,t[l])}function rW(n){return window.getComputedStyle(n)}class oW extends ak{constructor(){super(...arguments),this.type="html",this.renderInstance=lk}readValueFromInstance(e,t){if(Tc.has(t))return this.projection?.isProjecting?qT(t):y$(e,t);{const i=rW(e),r=(yw(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return rk(e,t)}build(e,t,i){Vw(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return Fw(e,t,i)}}const uk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function aW(n,e,t,i){lk(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(uk.has(r)?r:Bw(r),e.attrs[r])}class lW extends ak{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Lt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Tc.has(t)){const i=OV(t);return i&&i.default||0}return t=uk.has(t)?t:Bw(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return JV(e,t,i)}build(e,t,i){YV(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){aW(e,t,i,r)}mount(e){this.isSVGTag=QV(e.tagName),super.mount(e)}}const uW=(n,e)=>Lw(n)?new lW(e):new oW(e,{allowProjection:n!==P.Fragment});function Ou(n,e,t){const i=n.getProps();return Uw(i,e,t!==void 0?t:i.custom,n)}const ZT=n=>Array.isArray(n);function cW(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ic(t))}function hW(n){return ZT(n)?n[n.length-1]||0:n}function fW(n,e){const t=Ou(n,e);let{transitionEnd:i={},transition:r={},...a}=t||{};a={...a,...i};for(const l in a){const h=hW(a[l]);cW(n,l,h)}}function dW(n){return!!(Rn(n)&&n.add)}function eE(n,e){const t=n.getValue("willChange");if(dW(t))return t.add(e);if(!t&&Cr.WillChange){const i=new Cr.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function ck(n){return n.props[ZV]}const mW=n=>n!==null;function pW(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(mW),a=e&&t!=="loop"&&e%2===1?0:r.length-1;return r[a]}const gW={type:"spring",stiffness:500,damping:25,restSpeed:10},_W=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),yW={type:"keyframes",duration:.8},vW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},TW=(n,{keyframes:e})=>e.length>2?yW:Tc.has(n)?n.startsWith("scale")?_W(e[1]):gW:vW;function EW({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:a,repeatType:l,repeatDelay:h,from:f,elapsed:d,...g}){return!!Object.keys(g).length}const zw=(n,e,t,i={},r,a)=>l=>{const h=Rw(i,n)||{},f=h.delay||i.delay||0;let{elapsed:d=0}=i;d=d-Ls(f);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-d,onUpdate:v=>{e.set(v),h.onUpdate&&h.onUpdate(v)},onComplete:()=>{l(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:a?void 0:r};EW(h)||Object.assign(g,TW(n,g)),g.duration&&(g.duration=Ls(g.duration)),g.repeatDelay&&(g.repeatDelay=Ls(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(YT(g),g.delay===0&&(y=!0)),(Cr.instantAnimations||Cr.skipAnimations)&&(y=!0,YT(g),g.delay=0),g.allowFlatten=!h.type&&!h.ease,y&&!a&&e.get()!==void 0){const v=pW(g.keyframes,h);if(v!==void 0){wt.update(()=>{g.onUpdate(v),g.onComplete()});return}}return h.isSync?new Cw(g):new z$(g)};function SW({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function hk(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:a=n.getDefaultTransition(),transitionEnd:l,...h}=e;i&&(a=i);const f=[],d=r&&n.animationState&&n.animationState.getState()[r];for(const g in h){const y=n.getValue(g,n.latestValues[g]??null),v=h[g];if(v===void 0||d&&SW(d,g))continue;const w={delay:t,...Rw(a||{},g)},C=y.get();if(C!==void 0&&!y.isAnimating&&!Array.isArray(v)&&v===C&&!w.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const U=ck(n);if(U){const z=window.MotionHandoffAnimation(U,g,wt);z!==null&&(w.startTime=z,N=!0)}}eE(n,g),y.start(zw(g,y,v,n.shouldReduceMotion&&NV.has(g)?{type:!1}:w,n,N));const D=y.animation;D&&f.push(D)}return l&&Promise.all(f).then(()=>{wt.update(()=>{l&&fW(n,l)})}),f}function fk(n,e,t,i=0,r=1){const a=Array.from(n).sort((d,g)=>d.sortNodePosition(g)).indexOf(e),l=n.size,h=(l-1)*i;return typeof t=="function"?t(a,l):r===1?a*i:h-a*i}function tE(n,e,t={}){const i=Ou(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const a=i?()=>Promise.all(hk(n,i,t)):()=>Promise.resolve(),l=n.variantChildren&&n.variantChildren.size?(f=0)=>{const{delayChildren:d=0,staggerChildren:g,staggerDirection:y}=r;return wW(n,e,f,d,g,y,t)}:()=>Promise.resolve(),{when:h}=r;if(h){const[f,d]=h==="beforeChildren"?[a,l]:[l,a];return f().then(()=>d())}else return Promise.all([a(),l(t.delay)])}function wW(n,e,t=0,i=0,r=0,a=1,l){const h=[];for(const f of n.variantChildren)f.notify("AnimationStart",e),h.push(tE(f,e,{...l,delay:t+(typeof i=="function"?0:i)+fk(n.variantChildren,f,i,r,a)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(h)}function bW(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(a=>tE(n,a,t));i=Promise.all(r)}else if(typeof e=="string")i=tE(n,e,t);else{const r=typeof e=="function"?Ou(n,e,t.custom):e;i=Promise.all(hk(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function dk(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const AW=Ow.length;function mk(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?mk(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<AW;t++){const i=Ow[t],r=n.props[i];(Gf(r)||r===!1)&&(e[i]=r)}return e}const CW=[...Mw].reverse(),IW=Mw.length;function RW(n){return e=>Promise.all(e.map(({animation:t,options:i})=>bW(n,t,i)))}function xW(n){let e=RW(n),t=ix(),i=!0;const r=f=>(d,g)=>{const y=Ou(n,g,f==="exit"?n.presenceContext?.custom:void 0);if(y){const{transition:v,transitionEnd:w,...C}=y;d={...d,...C,...w}}return d};function a(f){e=f(n)}function l(f){const{props:d}=n,g=mk(n.parent)||{},y=[],v=new Set;let w={},C=1/0;for(let D=0;D<IW;D++){const U=CW[D],z=t[U],k=d[U]!==void 0?d[U]:g[U],Z=Gf(k),Q=U===f?z.isActive:null;Q===!1&&(C=D);let oe=k===g[U]&&k!==d[U]&&Z;if(oe&&i&&n.manuallyAnimateOnMount&&(oe=!1),z.protectedKeys={...w},!z.isActive&&Q===null||!k&&!z.prevProp||V_(k)||typeof k=="boolean")continue;const R=DW(z.prevProp,k);let A=R||U===f&&z.isActive&&!oe&&Z||D>C&&Z,x=!1;const L=Array.isArray(k)?k:[k];let V=L.reduce(r(U),{});Q===!1&&(V={});const{prevResolvedValues:q={}}=z,M={...q,...V},dt=ae=>{A=!0,v.has(ae)&&(x=!0,v.delete(ae)),z.needsAnimating[ae]=!0;const pe=n.getValue(ae);pe&&(pe.liveStyle=!1)};for(const ae in M){const pe=V[ae],Pe=q[ae];if(w.hasOwnProperty(ae))continue;let je=!1;ZT(pe)&&ZT(Pe)?je=!dk(pe,Pe):je=pe!==Pe,je?pe!=null?dt(ae):v.add(ae):pe!==void 0&&v.has(ae)?dt(ae):z.protectedKeys[ae]=!0}z.prevProp=k,z.prevResolvedValues=V,z.isActive&&(w={...w,...V}),i&&n.blockInitialAnimation&&(A=!1);const Rt=oe&&R;A&&(!Rt||x)&&y.push(...L.map(ae=>{const pe={type:U};if(typeof ae=="string"&&i&&!Rt&&n.manuallyAnimateOnMount&&n.parent){const{parent:Pe}=n,je=Ou(Pe,ae);if(Pe.enteringChildren&&je){const{delayChildren:B}=je.transition||{};pe.delay=fk(Pe.enteringChildren,n,B)}}return{animation:ae,options:pe}}))}if(v.size){const D={};if(typeof d.initial!="boolean"){const U=Ou(n,Array.isArray(d.initial)?d.initial[0]:d.initial);U&&U.transition&&(D.transition=U.transition)}v.forEach(U=>{const z=n.getBaseTarget(U),k=n.getValue(U);k&&(k.liveStyle=!0),D[U]=z??null}),y.push({animation:D})}let N=!!y.length;return i&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(N=!1),i=!1,N?e(y):Promise.resolve()}function h(f,d){if(t[f].isActive===d)return Promise.resolve();n.variantChildren?.forEach(y=>y.animationState?.setActive(f,d)),t[f].isActive=d;const g=l(f);for(const y in t)t[y].protectedKeys={};return g}return{animateChanges:l,setActive:h,setAnimateFunction:a,getState:()=>t,reset:()=>{t=ix(),i=!0}}}function DW(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!dk(e,n):!1}function Sa(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ix(){return{animate:Sa(!0),whileInView:Sa(),whileHover:Sa(),whileTap:Sa(),whileDrag:Sa(),whileFocus:Sa(),exit:Sa()}}class qo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class NW extends qo{constructor(e){super(e),e.animationState||(e.animationState=xW(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();V_(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let PW=0;class MW extends qo{constructor(){super(...arguments),this.id=PW++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const OW={animation:{Feature:NW},exit:{Feature:MW}};function $f(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function _d(n){return{point:{x:n.pageX,y:n.pageY}}}const VW=n=>e=>Nw(e)&&n(e,_d(e));function hf(n,e,t,i){return $f(n,e,VW(t),i)}const pk=1e-4,kW=1-pk,LW=1+pk,gk=.01,UW=0-gk,FW=0+gk;function kn(n){return n.max-n.min}function BW(n,e,t){return Math.abs(n-e)<=t}function sx(n,e,t,i=.5){n.origin=i,n.originPoint=Ct(e.min,e.max,n.origin),n.scale=kn(t)/kn(e),n.translate=Ct(t.min,t.max,n.origin)-n.originPoint,(n.scale>=kW&&n.scale<=LW||isNaN(n.scale))&&(n.scale=1),(n.translate>=UW&&n.translate<=FW||isNaN(n.translate))&&(n.translate=0)}function ff(n,e,t,i){sx(n.x,e.x,t.x,i?i.originX:void 0),sx(n.y,e.y,t.y,i?i.originY:void 0)}function rx(n,e,t){n.min=t.min+e.min,n.max=n.min+kn(e)}function zW(n,e,t){rx(n.x,e.x,t.x),rx(n.y,e.y,t.y)}function ox(n,e,t){n.min=e.min-t.min,n.max=n.min+kn(e)}function df(n,e,t){ox(n.x,e.x,t.x),ox(n.y,e.y,t.y)}function Ii(n){return[n("x"),n("y")]}const _k=({current:n})=>n?n.ownerDocument.defaultView:null,ax=(n,e)=>Math.abs(n-e);function jW(n,e){const t=ax(n.x,e.x),i=ax(n.y,e.y);return Math.sqrt(t**2+i**2)}class yk{constructor(e,t,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:a=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=x0(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,C=jW(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!C)return;const{point:N}=v,{timestamp:D}=Sn;this.history.push({...N,timestamp:D});const{onStart:U,onMove:z}=this.handlers;w||(U&&U(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),z&&z(this.lastMoveEvent,v)},this.handlePointerMove=(v,w)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=R0(w,this.transformPagePoint),wt.update(this.updatePoint,!0)},this.handlePointerUp=(v,w)=>{this.end();const{onEnd:C,onSessionEnd:N,resumeAnimation:D}=this.handlers;if(this.dragSnapToOrigin&&D&&D(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const U=x0(v.type==="pointercancel"?this.lastMoveEventInfo:R0(w,this.transformPagePoint),this.history);this.startEvent&&C&&C(v,U),N&&N(v,U)},!Nw(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=r||window;const h=_d(e),f=R0(h,this.transformPagePoint),{point:d}=f,{timestamp:g}=Sn;this.history=[{...d,timestamp:g}];const{onSessionStart:y}=t;y&&y(e,x0(f,this.history)),this.removeListeners=md(hf(this.contextWindow,"pointermove",this.handlePointerMove),hf(this.contextWindow,"pointerup",this.handlePointerUp),hf(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Lo(this.updatePoint)}}function R0(n,e){return e?{point:e(n.point)}:n}function lx(n,e){return{x:n.x-e.x,y:n.y-e.y}}function x0({point:n},e){return{point:n,delta:lx(n,vk(e)),offset:lx(n,qW(e)),velocity:HW(e,.1)}}function qW(n){return n[0]}function vk(n){return n[n.length-1]}function HW(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=vk(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Ls(e)));)t--;if(!i)return{x:0,y:0};const a=Pi(r.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const l={x:(r.x-i.x)/a,y:(r.y-i.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function GW(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Ct(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Ct(t,n,i.max):Math.min(n,t)),n}function ux(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function KW(n,{top:e,left:t,bottom:i,right:r}){return{x:ux(n.x,t,r),y:ux(n.y,e,i)}}function cx(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function $W(n,e){return{x:cx(n.x,e.x),y:cx(n.y,e.y)}}function YW(n,e){let t=.5;const i=kn(n),r=kn(e);return r>i?t=jf(e.min,e.max-i,n.min):i>r&&(t=jf(n.min,n.max-r,e.min)),Ar(0,1,t)}function WW(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const nE=.35;function QW(n=nE){return n===!1?n=0:n===!0&&(n=nE),{x:hx(n,"left","right"),y:hx(n,"top","bottom")}}function hx(n,e,t){return{min:fx(n,e),max:fx(n,t)}}function fx(n,e){return typeof n=="number"?n:n[e]||0}const XW=new WeakMap;class JW{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Lt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=y=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(_d(y).point)},l=(y,v)=>{const{drag:w,dragPropagation:C,onDragStart:N}=this.getProps();if(w&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=iY(w),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ii(U=>{let z=this.getAxisMotionValue(U).get()||0;if(Us.test(z)){const{projection:k}=this.visualElement;if(k&&k.layout){const Z=k.layout.layoutBox[U];Z&&(z=kn(Z)*(parseFloat(z)/100))}}this.originPoint[U]=z}),N&&wt.postRender(()=>N(y,v)),eE(this.visualElement,"transform");const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},h=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v;const{dragPropagation:w,dragDirectionLock:C,onDirectionLock:N,onDrag:D}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:U}=v;if(C&&this.currentDirection===null){this.currentDirection=ZW(U),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",v.point,U),this.updateAxis("y",v.point,U),this.visualElement.render(),D&&D(y,v)},f=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v,this.stop(y,v),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Ii(y=>this.getAnimationState(y)==="paused"&&this.getAxisMotionValue(y).animation?.play()),{dragSnapToOrigin:g}=this.getProps();this.panSession=new yk(e,{onSessionStart:a,onStart:l,onMove:h,onSessionEnd:f,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:i,contextWindow:_k(this.visualElement)})}stop(e,t){const i=e||this.latestPointerEvent,r=t||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!r||!i)return;const{velocity:l}=r;this.startAnimation(l);const{onDragEnd:h}=this.getProps();h&&wt.postRender(()=>h(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!fp(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=GW(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&Tu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=KW(i.layoutBox,e):this.constraints=!1,this.elastic=QW(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ii(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=WW(i.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Tu(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=eW(i,r.root,this.visualElement.getTransformPagePoint());let l=$W(r.layout.layoutBox,a);if(t){const h=t(XY(l));this.hasMutatedConstraints=!!h,h&&(l=nk(h))}return l}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},d=Ii(g=>{if(!fp(g,t,this.currentDirection))return;let y=f&&f[g]||{};l&&(y={min:0,max:0});const v=r?200:1e6,w=r?40:1e7,C={type:"inertia",velocity:i?e[g]:0,bounceStiffness:v,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...a,...y};return this.startAxisValueAnimation(g,C)});return Promise.all(d).then(h)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return eE(this.visualElement,e),i.start(zw(e,i,0,t,this.visualElement,!1))}stopAnimation(){Ii(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ii(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Ii(t=>{const{drag:i}=this.getProps();if(!fp(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(t);if(r&&r.layout){const{min:l,max:h}=r.layout.layoutBox[t];a.set(e[t]-Ct(l,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Tu(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ii(l=>{const h=this.getAxisMotionValue(l);if(h&&this.constraints!==!1){const f=h.get();r[l]=YW({min:f,max:f},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ii(l=>{if(!fp(l,e,null))return;const h=this.getAxisMotionValue(l),{min:f,max:d}=this.constraints[l];h.set(Ct(f,d,r[l]))})}addListeners(){if(!this.visualElement.current)return;XW.set(this.visualElement,this);const e=this.visualElement.current,t=hf(e,"pointerdown",f=>{const{drag:d,dragListener:g=!0}=this.getProps();d&&g&&this.start(f)}),i=()=>{const{dragConstraints:f}=this.getProps();Tu(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),wt.read(i);const l=$f(window,"resize",()=>this.scalePositionWithinConstraints()),h=r.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:d})=>{this.isDragging&&d&&(Ii(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=f[g].translate,y.set(y.get()+f[g].translate))}),this.visualElement.render())}));return()=>{l(),t(),a(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:l=nE,dragMomentum:h=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:a,dragElastic:l,dragMomentum:h}}}function fp(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function ZW(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class eQ extends qo{constructor(e){super(e),this.removeGroupControls=Oi,this.removeListeners=Oi,this.controls=new JW(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Oi}unmount(){this.removeGroupControls(),this.removeListeners()}}const dx=n=>(e,t)=>{n&&wt.postRender(()=>n(e,t))};class tQ extends qo{constructor(){super(...arguments),this.removePointerDownListener=Oi}onPointerDown(e){this.session=new yk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_k(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:dx(e),onStart:dx(t),onMove:i,onEnd:(a,l)=>{delete this.session,r&&wt.postRender(()=>r(a,l))}}}mount(){this.removePointerDownListener=hf(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const kp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function mx(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Lh={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(we.test(n))n=parseFloat(n);else return n;const t=mx(n,e.target.x),i=mx(n,e.target.y);return`${t}% ${i}%`}},nQ={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=Uo.parse(n);if(r.length>5)return i;const a=Uo.createTransformer(n),l=typeof r[0]!="number"?1:0,h=t.x.scale*e.x,f=t.y.scale*e.y;r[0+l]/=h,r[1+l]/=f;const d=Ct(h,f,.5);return typeof r[2+l]=="number"&&(r[2+l]/=d),typeof r[3+l]=="number"&&(r[3+l]/=d),a(r)}};let D0=!1;class iQ extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:a}=e;AY(sQ),a&&(t.group&&t.group.add(a),i&&i.register&&r&&i.register(a),D0&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),kp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:a}=this.props,{projection:l}=i;return l&&(l.isPresent=a,D0=!0,r||e.layoutDependency!==t||t===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||wt.postRender(()=>{const h=l.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Dw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;D0=!0,r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Tk(n){const[e,t]=jV(),i=P.useContext(lw);return H.jsx(iQ,{...n,layoutGroup:i,switchLayoutGroup:P.useContext(ek),isPresent:e,safeToRemove:t})}const sQ={borderRadius:{...Lh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Lh,borderTopRightRadius:Lh,borderBottomLeftRadius:Lh,borderBottomRightRadius:Lh,boxShadow:nQ};function rQ(n,e,t){const i=Rn(n)?n:ic(n);return i.start(zw("",i,e,t)),i.animation}const oQ=(n,e)=>n.depth-e.depth;class aQ{constructor(){this.children=[],this.isDirty=!1}add(e){hw(this.children,e),this.isDirty=!0}remove(e){fw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(oQ),this.isDirty=!1,this.children.forEach(e)}}function lQ(n,e){const t=Wn.now(),i=({timestamp:r})=>{const a=r-t;a>=e&&(Lo(i),n(a-e))};return wt.setup(i,!0),()=>Lo(i)}const Ek=["TopLeft","TopRight","BottomLeft","BottomRight"],uQ=Ek.length,px=n=>typeof n=="string"?parseFloat(n):n,gx=n=>typeof n=="number"||we.test(n);function cQ(n,e,t,i,r,a){r?(n.opacity=Ct(0,t.opacity??1,hQ(i)),n.opacityExit=Ct(e.opacity??1,0,fQ(i))):a&&(n.opacity=Ct(e.opacity??1,t.opacity??1,i));for(let l=0;l<uQ;l++){const h=`border${Ek[l]}Radius`;let f=_x(e,h),d=_x(t,h);if(f===void 0&&d===void 0)continue;f||(f=0),d||(d=0),f===0||d===0||gx(f)===gx(d)?(n[h]=Math.max(Ct(px(f),px(d),i),0),(Us.test(d)||Us.test(f))&&(n[h]+="%")):n[h]=d}(e.rotate||t.rotate)&&(n.rotate=Ct(e.rotate||0,t.rotate||0,i))}function _x(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const hQ=Sk(0,.5,lV),fQ=Sk(.5,.95,Oi);function Sk(n,e,t){return i=>i<n?0:i>e?1:t(jf(n,e,i))}function yx(n,e){n.min=e.min,n.max=e.max}function Ci(n,e){yx(n.x,e.x),yx(n.y,e.y)}function vx(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function Tx(n,e,t,i,r){return n-=e,n=Lg(n,1/t,i),r!==void 0&&(n=Lg(n,1/r,i)),n}function dQ(n,e=0,t=1,i=.5,r,a=n,l=n){if(Us.test(e)&&(e=parseFloat(e),e=Ct(l.min,l.max,e/100)-l.min),typeof e!="number")return;let h=Ct(a.min,a.max,i);n===a&&(h-=e),n.min=Tx(n.min,e,t,h,r),n.max=Tx(n.max,e,t,h,r)}function Ex(n,e,[t,i,r],a,l){dQ(n,e[t],e[i],e[r],e.scale,a,l)}const mQ=["x","scaleX","originX"],pQ=["y","scaleY","originY"];function Sx(n,e,t,i){Ex(n.x,e,mQ,t?t.x:void 0,i?i.x:void 0),Ex(n.y,e,pQ,t?t.y:void 0,i?i.y:void 0)}function wx(n){return n.translate===0&&n.scale===1}function wk(n){return wx(n.x)&&wx(n.y)}function bx(n,e){return n.min===e.min&&n.max===e.max}function gQ(n,e){return bx(n.x,e.x)&&bx(n.y,e.y)}function Ax(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function bk(n,e){return Ax(n.x,e.x)&&Ax(n.y,e.y)}function Cx(n){return kn(n.x)/kn(n.y)}function Ix(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class _Q{constructor(){this.members=[]}add(e){hw(this.members,e),e.scheduleRender()}remove(e){if(fw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yQ(n,e,t){let i="";const r=n.x.translate/e.x,a=n.y.translate/e.y,l=t?.z||0;if((r||a||l)&&(i=`translate3d(${r}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:d,rotate:g,rotateX:y,rotateY:v,skewX:w,skewY:C}=t;d&&(i=`perspective(${d}px) ${i}`),g&&(i+=`rotate(${g}deg) `),y&&(i+=`rotateX(${y}deg) `),v&&(i+=`rotateY(${v}deg) `),w&&(i+=`skewX(${w}deg) `),C&&(i+=`skewY(${C}deg) `)}const h=n.x.scale*e.x,f=n.y.scale*e.y;return(h!==1||f!==1)&&(i+=`scale(${h}, ${f})`),i||"none"}const N0=["","X","Y","Z"],vQ=1e3;let TQ=0;function P0(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function Ak(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=ck(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:a}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",wt,!(r||a))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&Ak(i)}function Ck({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},h=e?.()){this.id=TQ++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(wQ),this.nodes.forEach(IQ),this.nodes.forEach(RQ),this.nodes.forEach(bQ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new aQ)}addEventListener(l,h){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new pw),this.eventHandlers.get(l).add(h)}notifyListeners(l,...h){const f=this.eventHandlers.get(l);f&&f.notify(...h)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=zV(l)&&!uY(l),this.instance=l;const{layoutId:h,layout:f,visualElement:d}=this.options;if(d&&!d.current&&d.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||h)&&(this.isLayoutDirty=!0),n){let g,y=0;const v=()=>this.root.updateBlockedByResize=!1;wt.read(()=>{y=window.innerWidth}),n(l,()=>{const w=window.innerWidth;w!==y&&(y=w,this.root.updateBlockedByResize=!0,g&&g(),g=lQ(v,250),kp.hasAnimatedSinceResize&&(kp.hasAnimatedSinceResize=!1,this.nodes.forEach(Dx)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&d&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const C=this.options.transition||d.getDefaultTransition()||MQ,{onLayoutAnimationStart:N,onLayoutAnimationComplete:D}=d.getProps(),U=!this.targetLayout||!bk(this.targetLayout,w),z=!y&&v;if(this.options.layoutRoot||this.resumeFrom||z||y&&(U||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...Rw(C,"layout"),onPlay:N,onComplete:D};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(g,z)}else y||Dx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Lo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xQ),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ak(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Rx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(xx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(CQ),this.nodes.forEach(EQ),this.nodes.forEach(SQ)):this.nodes.forEach(xx),this.clearAllSnapshots();const h=Wn.now();Sn.delta=Ar(0,1e3/60,h-Sn.timestamp),Sn.timestamp=h,Sn.isProcessing=!0,T0.update.process(Sn),T0.preRender.process(Sn),T0.render.process(Sn),Sn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Dw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(AQ),this.sharedNodes.forEach(DQ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,wt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){wt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!kn(this.snapshot.measuredBox.x)&&!kn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Lt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(h=!1),h&&this.instance){const f=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!wk(this.projectionDelta),f=this.getTransformTemplate(),d=f?f(this.latestValues,""):void 0,g=d!==this.prevTransformTemplateValue;l&&this.instance&&(h||Ra(this.latestValues)||g)&&(r(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return l&&(f=this.removeTransform(f)),OQ(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Lt();const h=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(VQ))){const{scroll:d}=this.root;d&&(Eu(h.x,d.offset.x),Eu(h.y,d.offset.y))}return h}removeElementScroll(l){const h=Lt();if(Ci(h,l),this.scroll?.wasRoot)return h;for(let f=0;f<this.path.length;f++){const d=this.path[f],{scroll:g,options:y}=d;d!==this.root&&g&&y.layoutScroll&&(g.wasRoot&&Ci(h,l),Eu(h.x,g.offset.x),Eu(h.y,g.offset.y))}return h}applyTransform(l,h=!1){const f=Lt();Ci(f,l);for(let d=0;d<this.path.length;d++){const g=this.path[d];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Su(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Ra(g.latestValues)&&Su(f,g.latestValues)}return Ra(this.latestValues)&&Su(f,this.latestValues),f}removeTransform(l){const h=Lt();Ci(h,l);for(let f=0;f<this.path.length;f++){const d=this.path[f];if(!d.instance||!Ra(d.latestValues))continue;QT(d.latestValues)&&d.updateSnapshot();const g=Lt(),y=d.measurePageBox();Ci(g,y),Sx(h,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,g)}return Ra(this.latestValues)&&Sx(h,this.latestValues),h}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Sn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!(!this.layout||!(g||y))){if(this.resolvedRelativeTargetAt=Sn.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lt(),this.relativeTargetOrigin=Lt(),df(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Ci(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Lt(),this.targetWithTransforms=Lt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),zW(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ci(this.target,this.layout.layoutBox),sk(this.target,this.targetDelta)):Ci(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Lt(),this.relativeTargetOrigin=Lt(),df(this.relativeTargetOrigin,this.target,v.target),Ci(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||QT(this.parent.latestValues)||ik(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),h=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Sn.timestamp&&(f=!1),f)return;const{layout:d,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||g))return;Ci(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;ZY(this.layoutCorrected,this.treeScale,this.path,h),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Lt());const{target:w}=l;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vx(this.prevProjectionDelta.x,this.projectionDelta.x),vx(this.prevProjectionDelta.y,this.projectionDelta.y)),ff(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!Ix(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ix(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wu(),this.projectionDelta=wu(),this.projectionDeltaWithTransform=wu()}setAnimationOrigin(l,h=!1){const f=this.snapshot,d=f?f.latestValues:{},g={...this.latestValues},y=wu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const v=Lt(),w=f?f.source:void 0,C=this.layout?this.layout.source:void 0,N=w!==C,D=this.getStack(),U=!D||D.members.length<=1,z=!!(N&&!U&&this.options.crossfade===!0&&!this.path.some(PQ));this.animationProgress=0;let k;this.mixTargetDelta=Z=>{const Q=Z/1e3;Nx(y.x,l.x,Q),Nx(y.y,l.y,Q),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(df(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),NQ(this.relativeTarget,this.relativeTargetOrigin,v,Q),k&&gQ(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=Lt()),Ci(k,this.relativeTarget)),N&&(this.animationValues=g,cQ(g,d,this.latestValues,Q,z,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Lo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=wt.update(()=>{kp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ic(0)),this.currentAnimation=rQ(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),l.onUpdate&&l.onUpdate(h)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(vQ),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:h,target:f,layout:d,latestValues:g}=l;if(!(!h||!f||!d)){if(this!==l&&this.layout&&d&&Ik(this.options.animationType,this.layout.layoutBox,d.layoutBox)){f=this.target||Lt();const y=kn(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+y;const v=kn(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+v}Ci(h,f),Su(h,g),ff(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(l,h){this.sharedNodes.has(l)||this.sharedNodes.set(l,new _Q),this.sharedNodes.get(l).add(h);const d=h.options.initialPromotionConfig;h.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(h):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:h,preserveFollowOpacity:f}={}){const d=this.getStack();d&&d.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let h=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const d={};f.z&&P0("z",l,d,this.animationValues);for(let g=0;g<N0.length;g++)P0(`rotate${N0[g]}`,l,d,this.animationValues),P0(`skew${N0[g]}`,l,d,this.animationValues);l.render();for(const g in d)l.setStaticValue(g,d[g]),this.animationValues&&(this.animationValues[g]=d[g]);l.scheduleRender()}applyProjectionStyles(l,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Vp(h?.pointerEvents)||"",l.transform=f?f(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Vp(h?.pointerEvents)||""),this.hasProjected&&!Ra(this.latestValues)&&(l.transform=f?f({},""):"none",this.hasProjected=!1);return}l.visibility="";const g=d.animationValues||d.latestValues;this.applyTransformsToTarget();let y=yQ(this.projectionDeltaWithTransform,this.treeScale,g);f&&(y=f(g,y)),l.transform=y;const{x:v,y:w}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${w.origin*100}% 0`,d.animationValues?l.opacity=d===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:l.opacity=d===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const C in Kf){if(g[C]===void 0)continue;const{correct:N,applyTo:D,isCSSVariable:U}=Kf[C],z=y==="none"?g[C]:N(g[C],d);if(D){const k=D.length;for(let Z=0;Z<k;Z++)l[D[Z]]=z}else U?this.options.visualElement.renderState.vars[C]=z:l[C]=z}this.options.layoutId&&(l.pointerEvents=d===this?Vp(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(Rx),this.root.sharedNodes.clear()}}}function EQ(n){n.updateLayout()}function SQ(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=n.layout,{animationType:r}=n.options,a=e.source!==n.layout.source;r==="size"?Ii(g=>{const y=a?e.measuredBox[g]:e.layoutBox[g],v=kn(y);y.min=t[g].min,y.max=y.min+v}):Ik(r,e.layoutBox,t)&&Ii(g=>{const y=a?e.measuredBox[g]:e.layoutBox[g],v=kn(t[g]);y.max=y.min+v,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[g].max=n.relativeTarget[g].min+v)});const l=wu();ff(l,t,e.layoutBox);const h=wu();a?ff(h,n.applyTransform(i,!0),e.measuredBox):ff(h,t,e.layoutBox);const f=!wk(l);let d=!1;if(!n.resumeFrom){const g=n.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:y,layout:v}=g;if(y&&v){const w=Lt();df(w,e.layoutBox,y.layoutBox);const C=Lt();df(C,t,v.layoutBox),bk(w,C)||(d=!0),g.options.layoutRoot&&(n.relativeTarget=C,n.relativeTargetOrigin=w,n.relativeParent=g)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:h,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:d})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function wQ(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function bQ(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function AQ(n){n.clearSnapshot()}function Rx(n){n.clearMeasurements()}function xx(n){n.isLayoutDirty=!1}function CQ(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Dx(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function IQ(n){n.resolveTargetDelta()}function RQ(n){n.calcProjection()}function xQ(n){n.resetSkewAndRotation()}function DQ(n){n.removeLeadSnapshot()}function Nx(n,e,t){n.translate=Ct(e.translate,0,t),n.scale=Ct(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Px(n,e,t,i){n.min=Ct(e.min,t.min,i),n.max=Ct(e.max,t.max,i)}function NQ(n,e,t,i){Px(n.x,e.x,t.x,i),Px(n.y,e.y,t.y,i)}function PQ(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const MQ={duration:.45,ease:[.4,0,.1,1]},Mx=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Ox=Mx("applewebkit/")&&!Mx("chrome/")?Math.round:Oi;function Vx(n){n.min=Ox(n.min),n.max=Ox(n.max)}function OQ(n){Vx(n.x),Vx(n.y)}function Ik(n,e,t){return n==="position"||n==="preserve-aspect"&&!BW(Cx(e),Cx(t),.2)}function VQ(n){return n!==n.root&&n.scroll?.wasRoot}const kQ=Ck({attachResizeListener:(n,e)=>$f(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),M0={current:void 0},Rk=Ck({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!M0.current){const n=new kQ({});n.mount(window),n.setOptions({layoutScroll:!0}),M0.current=n}return M0.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),LQ={pan:{Feature:tQ},drag:{Feature:eQ,ProjectionNode:Rk,MeasureLayout:Tk}};function kx(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,a=i[r];a&&wt.postRender(()=>a(e,_d(e)))}class UQ extends qo{mount(){const{current:e}=this.node;e&&(this.unmount=sY(e,(t,i)=>(kx(this.node,i,"Start"),r=>kx(this.node,r,"End"))))}unmount(){}}class FQ extends qo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=md($f(this.node.current,"focus",()=>this.onFocus()),$f(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Lx(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),a=i[r];a&&wt.postRender(()=>a(e,_d(e)))}class BQ extends qo{mount(){const{current:e}=this.node;e&&(this.unmount=lY(e,(t,i)=>(Lx(this.node,i,"Start"),(r,{success:a})=>Lx(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const iE=new WeakMap,O0=new WeakMap,zQ=n=>{const e=iE.get(n.target);e&&e(n)},jQ=n=>{n.forEach(zQ)};function qQ({root:n,...e}){const t=n||document;O0.has(t)||O0.set(t,{});const i=O0.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(jQ,{root:n,...e})),i[r]}function HQ(n,e,t){const i=qQ(e);return iE.set(n,t),i.observe(n),()=>{iE.delete(n),i.unobserve(n)}}const GQ={some:0,all:1};class KQ extends qo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:a}=e,l={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:GQ[r]},h=f=>{const{isIntersecting:d}=f;if(this.isInView===d||(this.isInView=d,a&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),v=d?g:y;v&&v(f)};return HQ(this.node.current,l,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some($Q(e,t))&&this.startObserver()}unmount(){}}function $Q({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const YQ={inView:{Feature:KQ},tap:{Feature:BQ},focus:{Feature:FQ},hover:{Feature:UQ}},WQ={layout:{ProjectionNode:Rk,MeasureLayout:Tk}},QQ={...OW,...YQ,...LQ,...WQ},xk=QY(QQ,uW),XQ=P.memo(()=>{const n=pK(),e=P.useMemo(()=>H.jsx(yY,{mode:"wait",children:H.jsx(xk.span,{initial:{scale:.6,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.6,opacity:0},transition:{duration:.3,type:"spring"},style:{fontWeight:"bold",color:n>0?"#28a745":"#dc3545",marginLeft:"5px"},children:n},n)}),[n]);return H.jsx("div",{children:H.jsx("div",{style:{cursor:"pointer",boxShadow:"rgba(50, 50, 93, 0.25) 0px 30px 60px -12px inset, rgba(0, 0, 0, 0.3) 0px 18px 36px -18px inset",borderRadius:"8px",display:"flex",gap:"20px",background:"#ededed",border:"solid 1px #000",padding:"9px"},children:H.jsxs("span",{style:{fontSize:"15px"},children:["Active sessions:",e]})})})}),JQ=()=>{const[n,e]=P.useState(""),[t,i]=P.useState("");return P.useEffect(()=>{const r=()=>{const f=new Date,d=f.getDate(),g=f.toLocaleString("en-US",{month:"short"}).toUpperCase(),y=f.getFullYear();e(`${d} ${g}, ${y}`)},a=()=>{const f=new Date,d=String(f.getHours()).padStart(2,"0"),g=String(f.getMinutes()).padStart(2,"0");i(`${d}:${g}`)};r(),a();const l=setInterval(r,6e4),h=setInterval(a,1e3);return()=>{clearInterval(l),clearInterval(h)}},[]),H.jsx("header",{className:Yi.header,children:H.jsxs("div",{className:Yi.header__container,children:[H.jsxs("div",{className:Yi.left,children:[H.jsxs("div",{className:Yi.left_container,children:[H.jsx("img",{className:Yi.logo,src:dK,alt:"logo"}),H.jsx("span",{children:"INVENTORY"})]}),H.jsx("div",{className:Yi.center,children:H.jsx("input",{type:"text",placeholder:"Поиск...",className:Yi.search__input})}),H.jsx("span",{children:H.jsx(XQ,{})})]}),H.jsxs("div",{className:Yi.right,children:[H.jsx("div",{className:Yi.data_container,children:"today"}),H.jsxs("div",{className:Yi.data_container_allDate,children:[H.jsx("span",{children:n}),H.jsxs("div",{children:[H.jsx("img",{className:Yi.clockIcon,src:mK,alt:"clock",width:12,height:12}),H.jsx("span",{children:t})]})]})]})]})})},ZQ="_app_wfltt_1",eX="_app__body_wfltt_11",tX="_app__nav_wfltt_21",nX="_app__link_wfltt_55",iX="_app__user_wfltt_93",sX="_app__settings_wfltt_119",rX="_app__content_wfltt_157",Is={app:ZQ,app__body:eX,app__nav:tX,app__link:nX,"app__link--active":"_app__link--active_wfltt_79","app__user-container":"_app__user-container_wfltt_93",app__user:iX,app__settings:sX,app__content:rX},oX="/testObject/assets/currentUser-DW_uhQFp.jpg",aX="/testObject/assets/setting-iFurRb8-.png",lX=()=>{const n=Ir(),e=({isActive:t})=>t?`${Is.app__link} ${Is["app__link--active"]}`:Is.app__link;return H.jsxs("div",{className:Is.app__body,children:[H.jsxs("nav",{className:Is.app__nav,children:[H.jsxs("div",{className:Is["app__user-container"],children:[H.jsx("img",{className:Is.app__user,src:oX,alt:"user"}),H.jsx(hE,{to:li.SETTINGS,children:H.jsx("img",{className:Is.app__settings,src:aX,alt:"settings"})})]}),H.jsx(hu,{to:li.PRIHOD,className:e,children:"Приход"}),H.jsx(hu,{to:li.GROUPS,className:e,children:"Группы"}),H.jsx(hu,{to:li.PRODUCTS,className:e,children:"Продукты"}),H.jsx(hu,{to:li.USERS,className:e,children:"Пользователи"}),H.jsx(hu,{to:li.SETTINGS,className:e,children:"Настройки"})]}),H.jsx("main",{className:Is.app__content,children:H.jsx(xk.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.5,ease:"easeInOut"},children:H.jsx(c3,{})},n.pathname)})]})},uX=()=>H.jsxs("div",{className:Is.app,children:[H.jsx(JQ,{}),H.jsx(lX,{})]}),cX=async n=>{try{const e=Bf(qa,"products"),t=QH(e,XH("order","==",n));return(await ew(t)).docs.map(a=>({id:a.id,...a.data()}))}catch(e){return console.error("Ошибка при получении продуктов:",e),[]}},hX={orders:[],status:"idle",error:null},jw=_D({name:"orders",initialState:hX,reducers:n=>({fetchOrdersTC:n.asyncThunk(async(e,t)=>{try{const r=(await ew(Bf(qa,"orders"))).docs.map(l=>({id:l.id,...l.data()}));return await Promise.all(r.map(async l=>{const h=await cX(l.id);return{...l,products:h}}))}catch(i){return t.rejectWithValue(i.message??"Failed to fetch orders")}},{fulfilled:(e,t)=>{e.orders=t.payload},pending:e=>{e.error=null,e.status="loading"},rejected:(e,t)=>{e.status="failed",e.error=t.payload}}),deleteOrderTC:n.asyncThunk(async(e,t)=>{try{return await kO(GS(qa,"orders",e)),e}catch(i){return t.rejectWithValue(i.message??"Failed to delete order")}},{fulfilled:(e,t)=>{e.orders=e.orders.filter(i=>i.id!==t.payload)},rejected:(e,t)=>{e.error=t.payload}}),addOrderTC:n.asyncThunk(async(e,t)=>{try{return{id:(await LO(Bf(qa,"orders"),e)).id,...e}}catch(i){return t.rejectWithValue(i.message??"Failed to add order")}},{fulfilled:(e,t)=>{e.orders.push(t.payload)},rejected:(e,t)=>{e.error=t.payload}})}),selectors:{selectOrders:n=>n.orders,selectStatus:n=>n.status,selectError:n=>n.error}}),{fetchOrdersTC:fX,deleteOrderTC:dX,addOrderTC:mX}=jw.actions,{selectOrders:Dk,selectStatus:eJ,selectError:tJ}=jw.selectors,pX=jw.reducer,gX="_orderContainer_192an_3",_X="_orderCard_192an_25",yX="_orderCard__info_192an_63",vX="_orderCard__title_192an_73",TX="_orderCard__products_192an_89",EX="_orderCard__count_192an_107",SX="_orderCard__label_192an_121",wX="_orderCard__dateContainer_192an_131",bX="_orderCard__dayMonth_192an_149",AX="_orderCard__fullDate_192an_165",CX="_orderCard__day_192an_149",IX="_orderCard__month_192an_183",RX="_orderCard__yearDay_192an_185",xX="_orderCard__monthName_192an_187",DX="_orderCard__year_192an_185",NX="_orderCard__separator_192an_197",PX="_orderCard__actions_192an_215",MX="_orderCard__deleteBtn_192an_225",Yt={orderContainer:gX,orderCard:_X,orderCard__info:yX,orderCard__title:vX,orderCard__products:TX,orderCard__count:EX,orderCard__label:SX,orderCard__dateContainer:wX,orderCard__dayMonth:bX,orderCard__fullDate:AX,orderCard__day:CX,orderCard__month:IX,orderCard__yearDay:RX,orderCard__monthName:xX,orderCard__year:DX,orderCard__separator:NX,orderCard__actions:PX,orderCard__deleteBtn:MX};var Nk={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ux=Eo.createContext&&Eo.createContext(Nk),OX=["attr","size","title"];function VX(n,e){if(n==null)return{};var t=kX(n,e),i,r;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(r=0;r<a.length;r++)i=a[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function kX(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function Ug(){return Ug=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ug.apply(this,arguments)}function Fx(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Fg(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fx(Object(t),!0).forEach(function(i){LX(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Fx(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function LX(n,e,t){return e=UX(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function UX(n){var e=FX(n,"string");return typeof e=="symbol"?e:e+""}function FX(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Pk(n){return n&&n.map((e,t)=>Eo.createElement(e.tag,Fg({key:t},e.attr),Pk(e.child)))}function BX(n){return e=>Eo.createElement(zX,Ug({attr:Fg({},n.attr)},e),Pk(n.child))}function zX(n){var e=t=>{var{attr:i,size:r,title:a}=n,l=VX(n,OX),h=r||t.size||"1em",f;return t.className&&(f=t.className),n.className&&(f=(f?f+" ":"")+n.className),Eo.createElement("svg",Ug({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,l,{className:f,style:Fg(Fg({color:n.color||t.color},t.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),a&&Eo.createElement("title",null,a),n.children)};return Ux!==void 0?Eo.createElement(Ux.Consumer,null,t=>e(t)):e(Nk)}function jX(n){return BX({attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M8 6.9834C7.44772 6.9834 7 7.43111 7 7.9834C7 8.53568 7.44772 8.9834 8 8.9834H16C16.5523 8.9834 17 8.53568 17 7.9834C17 7.43111 16.5523 6.9834 16 6.9834H8Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M7 12C7 11.4477 7.44772 11 8 11H16C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13H8C7.44772 13 7 12.5523 7 12Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M8 15.017C7.44772 15.017 7 15.4647 7 16.017C7 16.5693 7.44772 17.017 8 17.017H16C16.5523 17.017 17 16.5693 17 16.017C17 15.4647 16.5523 15.017 16 15.017H8Z",fill:"currentColor"},child:[]},{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12Z",fill:"currentColor"},child:[]}]})(n)}const qX=()=>{const n=Ua(Dk);Ua(FO);const e=Ua(g5),t=Gg();P.useEffect(()=>{t(iw())},[t]);const i=r=>{t(dX(r))};return H.jsx("div",{className:Yt.orderContainer,children:n.map(r=>{const a=e[r.id]||[],l=new Date(r.date);return H.jsxs("div",{className:Yt.orderCard,children:[H.jsx("div",{className:Yt.orderCard__info,children:H.jsx("div",{className:Yt.orderCard__title,children:r.title})}),H.jsxs("div",{className:Yt.orderCard__products,children:[H.jsx(jX,{size:50,color:"#6c757d"}),H.jsxs("div",{className:Yt.orderCard__count,children:[a.length,H.jsx("div",{className:Yt.orderCard__label,children:"Продукта"})]})]}),H.jsxs("div",{className:Yt.orderCard__dateContainer,children:[H.jsxs("div",{className:Yt.orderCard__dayMonth,children:[H.jsx("span",{className:Yt.orderCard__day,children:l.getDate().toString().padStart(2,"0")}),H.jsx("span",{className:Yt.orderCard__separator,children:"/"}),H.jsx("span",{className:Yt.orderCard__month,children:l.getMonth()+1})]}),H.jsxs("div",{className:Yt.orderCard__fullDate,children:[H.jsx("span",{className:Yt.orderCard__yearDay,children:l.getDate().toString().padStart(2,"0")}),H.jsx("span",{className:Yt.orderCard__separator,children:"/"}),H.jsx("span",{className:Yt.orderCard__monthName,children:l.toLocaleDateString("ru-RU",{month:"short"})}),H.jsx("span",{className:Yt.orderCard__separator,children:"/"}),H.jsx("span",{className:Yt.orderCard__year,children:l.getFullYear()})]})]}),H.jsx("div",{className:Yt.orderCard__actions,children:H.jsx("button",{className:Yt.orderCard__deleteBtn,onClick:()=>i(r.id),children:"🗑️"})})]},r.id)})})},HX=()=>{const n=Ua(Dk),e=Gg();P.useEffect(()=>{e(fX())},[]);const t={title:"Длинное предлинное длиннючее название группы",date:new Date().toISOString(),description:"desc",products:[]},i=()=>{e(iw()),e(mX(t))};return H.jsxs("div",{className:"container-fluid py-4",style:{background:"#f8f9fa"},children:[H.jsx("button",{onClick:i,className:"btn btn-primary mt-3",children:"add"}),H.jsxs("div",{className:"d-flex",style:{alignItems:"flex-end",gap:"10px"},children:[H.jsxs("h1",{className:"mb-4",children:["Приходы / ",n.length]}),H.jsx("div",{className:"mb-4 d-flex",children:H.jsx(aw,{className:"g-3 flex-nowrap",children:H.jsx(zf,{xs:6,md:12})})})]}),H.jsx(qX,{})]})},li={PRIHOD:"/prihod",GROUPS:"/group",PRODUCTS:"/products",USERS:"/users",SETTINGS:"/settings",ERROR:"/404"},GX=[{element:H.jsx(uX,{}),children:[{path:"/",element:H.jsx(wC,{to:li.PRIHOD,replace:!0})},{path:li.PRIHOD,element:H.jsx(HX,{})},{path:li.GROUPS,element:H.jsx(q3,{})},{path:li.PRODUCTS,element:H.jsx(ZG,{})},{path:li.USERS,element:H.jsx(eK,{})},{path:li.SETTINGS,element:H.jsx(tK,{})},{path:li.ERROR,element:H.jsx(nK,{})},{path:"*",element:H.jsx(wC,{to:"/404",replace:!0})}]}],KX=Y6({reducer:{orders:pX,products:mG}}),$X=()=>X4(GX);v4.createRoot(document.getElementById("root")).render(H.jsx(Eo.StrictMode,{children:H.jsx(O3,{children:H.jsx(o6,{store:KX,children:H.jsx($X,{})})})}));
